Sổ tay Cài đặt Debian GNU/Linux

Bản quyền © 2004 - 2021 nhóm trình cài đặt Debian

Sổ tay này là phần mềm tự do; bạn có thể phát hành lại nó và/hay sửa đổi nó với
điều kiện của Giấy Phép Công Cộng GNU (GPL). Xem giấy phép trong Phụ lục F, 
Giấy phép Công cộng GNU.

Build version of this manual: 20220129~deb11u1.

Tổng quan

Tài liệu này chứa hướng dẫn cài đặt cho hệ thống Debian GNU/Linux 11 (tên mã "
bullseye"), cho kiến trúc 64-bit PC ("amd64"). Nó cũng chứa liên kết đến thông
tin bổ sung và thông tin về tận dụng hệ thống Debian mới.

Cảnh báo

This translation of the installation guide is not up-to-date and currently
there is noone actively working on updating it. Keep this in mind when reading
it; it may contain outdated or wrong information. Read or double-check the
English variant, if in doubt. If you can help us with updating the translation,
please contact <debian-boot@lists.debian.org> or the debian-l10n-xxx
mailinglist for this language. Many thanks

Trạng thái của bản dịch: hoàn tất (mà có thể là không đẹp ;) ). Mời bạn gửi
thông báo lỗi hoặc góp ý cho người dịch <clytie@riverland.net.au> và/hoặc hộp
thư chung <hanoilug@lists.hanoilug.org>.

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

Mục lục

Cài đặt 11 Debian GNU/Linux trên amd64
1. Chào mừng bạn dùng Debian

    1.1. Debian là gì vậy?
    1.2. GNU/Linux là gì vậy?
    1.3. Debian GNU/Linux là gì vậy?
    1.4. What is the Debian Installer?
    1.5. Lấy Debian
    1.6. Lấy phiên bản mới nhất của tài liệu này
    1.7. Cấu trúc của tài liệu này
    1.8. Về tác quyền và giấy phép phần mềm

2. Hệ thống Yêu cầu

    2.1. Phần cứng được hỗ trợ

        2.1.1. Kiến trúc được hỗ trợ
        2.1.2. CPU Support
        2.1.3. Máy tính xách tay
        2.1.4. Đa bộ xử lý
        2.1.5. Graphics Hardware Support
        2.1.6. Phần cứng khả năng kết nối mạng
        2.1.7. Thiết bị hiển thị chữ nổi
        2.1.8. Phần cứng tổng hợp giọng nối
        2.1.9. Ngoại vi và phần cứng khác

    2.2. Thiết bị cần thiết phần vững
    2.3. Mua phần cứng đặc biệt cho GNU/Linux

        2.3.1. Tránh phần mềm sở hữu hay bị đóng

    2.4. Vật chứa trình cài đặt

        2.4.1. Đĩa CD-ROM/DVD-ROM/BD-ROM
        2.4.2. Thanh bộ nhớ USB
        2.4.3. Mạng
        2.4.4. Đĩa cứng
        2.4.5. Hệ thống Un*x hay GNU
        2.4.6. Hệ thống cất giữ được hỗ trợ

    2.5. Bộ nhớ và sức chứa trên đĩa cần thiết

3. Trước khi cài đặt Debian GNU/Linux

    3.1. Toàn cảnh tiến trình cài đặt
    3.2. Sao lưu mọi dữ liệu đã có đi !
    3.3. Thông tin cần thiết

        3.3.1. Tài liệu hướng dẫn
        3.3.2. Tìm nguồn thông tin về phần cứng
        3.3.3. Khả năng tương thích của phần cứng
        3.3.4. Thiết lập mạng

    3.4. Thoả tiêu chuẩn phần cứng tối thiểu
    3.5. Phân vùng sẵn cho hệ thống đa khởi động
    3.6. Phần cứng cài đặt sẵn và thiết lập hệ điều hành

        3.6.1. Invoking the BIOS/UEFI Set-Up Menu
        3.6.2. Chọn thiết bị khởi động
        3.6.3. Systems with UEFI firmware
        3.6.4. Secure boot
        3.6.5. Disabling the Windows "fast boot"/"fast startup" feature
        3.6.6. Vấn đề phần cứng cần theo dõi

4. Lấy vật chứa cài đặt hệ thống

    4.1. Official Debian GNU/Linux installation images
    4.2. Tải tập tin xuống máy nhân bản Debian

        4.2.1. Where to Find Installation Files

    4.3. Chuẩn bị tập tin để khởi động thanh bộ nhớ USB

        4.3.1. Preparing a USB stick using a hybrid CD/DVD image
        4.3.2. Chép thủ công các tập tin vào thanh USB
        4.3.3. Chép thủ công các tập tin vào thanh USB -- theo cách uyển chuyển

    4.4. Chuẩn bị tập tin để khởi động đĩa cứng

        4.4.1. Hard disk installer booting from Linux using GRUB
        4.4.2. Hard disk installer booting from DOS using loadlin

    4.5. Chuẩn bị tập tin để khởi động qua mạng TFTP

        4.5.1. Thiết lập trình phục vụ DHCP
        4.5.2. Thiết lập trình phục vụ BOOTP
        4.5.3. Bật chạy trình phục vụ TFTP
        4.5.4. Xác định vị trí của ảnh TFTP

    4.6. Cài đặt tự động

        4.6.1. Tự động cài đặt dùng trình cài đặt Debian

    4.7. Verifying the integrity of installation files

5. Khởi động Hệ thống Cài đặt

    5.1. Khởi động trình cài đặt trên 64-bit PC

        5.1.1. Khởi động từ thanh bộ nhớ USB
        5.1.2. Booting from optical disc (CD/DVD)
        5.1.3. Khởi động từ Windows
        5.1.4. Booting from DOS using loadlin
        5.1.5. Booting from Linux using GRUB
        5.1.6. Khởi động bằng TFTP
        5.1.7. Màn hình khởi động
        5.1.8. The Graphical Installer

    5.2. Khả năng truy cập

        5.2.1. Installer front-end
        5.2.2. Thiết bị chữ nổi USB
        5.2.3. Thiết bị chữ nổi nối tiếp
        5.2.4. Phần mềm tổng hợp giọng nói
        5.2.5. Phần cứng tổng hợp giọng nói
        5.2.6. Thiết bị bảng
        5.2.7. Sắc thái cao tương phản
        5.2.8. Zoom
        5.2.9. Expert install, rescue mode, automated install
        5.2.10. Accessibility of the installed system

    5.3. Tham số khởi động

        5.3.1. Boot console
        5.3.2. Tham số trình cài đặt Debian
        5.3.3. Dùng tham số khởi động để trả lời câu hỏi
        5.3.4. Gửi tham số cho mô-đun hạt nhân
        5.3.5. Cấm mô-đun hạt nhân

    5.4. Giải đáp thắc mắc trong tiến trình cài đặt

        5.4.1. Reliability of optical media
        5.4.2. Cấu hình khởi động
        5.4.3. Phần mềm tổng hợp giọng nói
        5.4.4. Vấn đề cài đặt 64-bit PC thường
        5.4.5. Giải thích thông điệp khởi chạy hạt nhân
        5.4.6. Thông báo vấn đề cài đặt
        5.4.7. Đệ trình báo cáo cài đặt

6. Sử dụng trình cài đặt Debian

    6.1. Trình cài đặt hoạt động như thế nào

        6.1.1. Using the graphical installer

    6.2. Giới thiệu về thành phần
    6.3. Sử dụng mỗi thành phần

        6.3.1. Thiết lập trình cài đặt Debian và cấu hình phần cứng
        6.3.2. Thiết lập Người dùng và Mật khẩu
        6.3.3. Cấu hình Đồng hồ và Múi giờ
        6.3.4. Phân vùng và chọn điểm lắp
        6.3.5. Cài đặt Hệ thống Cơ bản
        6.3.6. Cài đặt phần mềm thêm
        6.3.7. Cho hệ thống khả năng khởi động
        6.3.8. Cài đặt xong
        6.3.9. Khắc phục sự số
        6.3.10. Installation over network-console

    6.4. Nạp phần vững bị thiếu

        6.4.1. Chuẩn bị vật chứa
        6.4.2. Phần vững và Hệ thống đã Cài đặt
        6.4.3. Completing the Installed System

    6.5. Customization

        6.5.1. Installing an alternative init system

7. Khởi động vào hệ thống Debian mới

    7.1. Giờ phút thử thách
    7.2. Gắn kết khối tin đã mật mã

        7.2.1. Giải đáp thắc mắc

    7.3. Đăng nhập

8. Bước kế tiếp và đi đâu vậy

    8.1. Tắt hệ thống
    8.2. Giới thiệu về Debian

        8.2.1. Hệ thống quản lý gói Debian
        8.2.2. Phần mềm Thêm Hiện có cho Debian
        8.2.3. Quản lý phiên bản ứng dụng
        8.2.4. Quản lý công việc định kỳ

    8.3. Thông tin thêm
    8.4. Thiết lập thư điện tử trên hệ thống

        8.4.1. Cấu hình thư điện tử mặc định
        8.4.2. Gửi thư ra hệ thống
        8.4.3. Cấu hình tác nhân truyền thư tín Exim4

    8.5. Biên dịch hạt nhân mới
    8.6. Phục hồi hệ thống bị hỏng

A. Cài đặt Thế nào

    A.1. Chuẩn bị
    A.2. Khởi động trình cài đặt

        A.2.1. Optical disc
        A.2.2. Thanh bộ nhớ USB
        A.2.3. Khởi động từ mạng
        A.2.4. Khởi động từ đĩa cứng

    A.3. Cài đặt
    A.4. Gởi báo cáo cài đặt cho chúng tôi
    A.5. Vậy cuối cùng...

B. Tự động hoá việc cài đặt bằng chèn sẵn

    B.1. Giới thiệu

        B.1.1. Phương pháp chèn sẵn
        B.1.2. Hạn chế

    B.2. Dùng khả năng chèn sẵn

        B.2.1. Tải tập tin định cấu hình sẵn
        B.2.2. Dùng tham số khởi động để chèn sẵn câu hỏi
        B.2.3. Chế độ tự động
        B.2.4. Biệt hiệu có ích khi chèn sẵn
        B.2.5. Examples of boot prompt preseeding
        B.2.6. Dùng máy phục vụ DHCP để xác định tập tin định cấu hình sẵn

    B.3. Tạo tập tin định cấu hình sẵn
    B.4. Nội dung của tập tin định cấu hình sẵn (cho bullseye)

        B.4.1. Địa phương hoá
        B.4.2. Cấu hình mạng
        B.4.3. Bàn giao tiếp mạng
        B.4.4. Thiết lập máy nhân bản
        B.4.5. Thiết lập tài khoản
        B.4.6. Thiết lập đồng hồ và múi giờ
        B.4.7. Phân vùng
        B.4.8. Cài đặt hệ thống cơ bản
        B.4.9. Thiết lập apt
        B.4.10. Chọn gói phần mềm
        B.4.11. Cài đặt bộ nạp khởi động
        B.4.12. Làm xong tiến trình cài đặt
        B.4.13. Chèn trước gói khác

    B.5. Tùy chọn cấp cao

        B.5.1. Chạy lệnh riêng trong khi cài đặt
        B.5.2. Dùng khả năng chèn sẵn để thay đổi giá trị mặc định
        B.5.3. Tải dây chuyền tập tin định cấu hình sẵn

C. Phân vùng cho Debian

    C.1. Chọn phân vùng Debian, lập kích cỡ phân vùng
    C.2. Cây thư mục
    C.3. Bố trí phân vùng khuyến khích
    C.4. Tên thiết bị dưới Linux
    C.5. Chương trình tạo phân vùng Debian

        C.5.1. Phân vùng cho 64-bit PC

D. Thông Tin Linh Tinh

    D.1. Thiết bị Linux

        D.1.1. Thiết lập con chuột

    D.2. Sức chứa trên đĩa cần thiết cho công việc
    D.3. Cài đặt Debian GNU/Linux từ hệ thống UNIX/Linux

        D.3.1. Bắt đầu
        D.3.2. Cài đặt debootstrap
        D.3.3. Chạy debootstrap
        D.3.4. Cấu hình hệ thống cơ bản
        D.3.5. Cài đặt hạt nhân
        D.3.6. Thiết lập bộ nạp khởi động
        D.3.7. Remote access: Installing SSH and setting up access
        D.3.8. Đòn kết liễu

    D.4. Cài đặt Debian GNU/Linux qua IP đường song song (PLIP)

        D.4.1. Nhu cầu
        D.4.2. Thiết lập nguồn
        D.4.3. Cài đặt đích

    D.5. Cài đặt Debian GNU/Linux dùng PPP qua Ethernet (PPPoE)

E. Linh tinh quản trị

    E.1. Về tài liệu này
    E.2. Cách đóng góp cho tài liệu này
    E.3. Đóng góp chính
    E.4. Lời báo nhận thương hiệu

F. Giấy phép Công cộng GNU

Danh sách Bảng

3.1. Hardware Information Helpful for an Install
3.2. Điều kiện hệ thống tối thiểu khuyến khích

Cài đặt 11 Debian GNU/Linux trên amd64

Chúng tôi rất vui thích thấy biết rằng bạn chọn thử sử dụng Debian; chúng tôi
cũng chắc chắn là bạn sẽ tìm thấy bản phát hành GNU/Linux của Debian là duy
nhất. Debian GNU/Linux tập hợp phần mềm có chất lượng cao từ trên khắp thế
giới, hợp nhất nó vào một toàn bộ mạch lạc. Chúng tôi cho rằng bạn sẽ tìm biết
là kết quả này thực sự lớn hơn tổng số các phần.

Có thể là bạn muốn cài đặt Debian mà không đọc sổ tay này: trình cài đặt Debian
được thiết kế để cho bạn có khả năng này. Nếu bạn lúc này không có đủ rảnh đọc
toàn bộ Sổ Tay Cài Đặt ngay bây giờ, khuyên bạn đọc ít nhất tài liệu Cài Đặt
Thế Nào, mà hướng dẫn bạn qua tiến trình cài đặt cơ bản, cung cấp nhiều liên
kết đến sổ tay về chủ đề cấp cao hoặc về thông tin giải đáp thắc mắc. Tài liệu
Cài Đặt Thế Nào nằm trong Phụ lục A, Cài đặt Thế nào.

Vậy bạn mất thời gian đọc phần lớn Sổ Tay này nhé: nó hướng dẫn đến kinh nghiệm
cài đặt thành công hơn.

Chương 1. Chào mừng bạn dùng Debian

Mục lục

1.1. Debian là gì vậy?
1.2. GNU/Linux là gì vậy?
1.3. Debian GNU/Linux là gì vậy?
1.4. What is the Debian Installer?
1.5. Lấy Debian
1.6. Lấy phiên bản mới nhất của tài liệu này
1.7. Cấu trúc của tài liệu này
1.8. Về tác quyền và giấy phép phần mềm

Chương này cung cấp tổng quan của Dự Án Debian và Debian GNU/Linux. Nếu bạn
quen với lịch sử của Dự Án Debian và bản phát hành Debian GNU/Linux, bạn cũng
nhảy được tới chương kế tiếp.

1.1. Debian là gì vậy?

Debian là một tổ chức nguyên tình nguyện cống hiến để phát triển phần mềm tự do
và đẩy mạnh những lý tưởng của công động Phần Mềm Tự Do. Dự Án Debian mới tạo
trong năm 1993, khi Ian Murdock gởi lời mời mở cho các nhà phát triển phần mềm
để đóng góp cho một bản phát hành hoàn toàn và mạch lạc dựa vào hạt nhân Linux
hơi mới. Nhóm người say mê cống hiến hơi nhỏ đó, đầu tiên do Tổ Chức Phần Mềm
Tự Do hỗ trợ, cũng theo triết lý của tổ chức GNU, đã lớn lên qua một số năm để
trở thành một tổ chức có khoảng 1000 Nhà Phát Triển Debian.

Nhà Phát Triển Debian tham gia nhiều hoạt động khác nhau, gồm quản trị chỗ Mạng
HTTP và FTP, thiết kế đồ họa, phân tích pháp luật các giấy phép phần mềm, tạo
tài liệu hướng dẫn và, tất nhiên, bảo trì gói phần mềm.

Để truyền triết lý của chúng tôi, và hấp dẫn nhà phát triển theo những nguyên
tắc do Debian hỗ trợ, Dự Án Debian đã xuất bản một số tài liệu phác họa các giá
trị của chúng tôi, cũng chỉ dẫn người nào muốn trở thành nhà phát triển Debian.

  • Hợp Động Xã Hội Debian phát biểu các lời cam kết Debian cho Cộng Đồng Phần
    Mềm Tự Do. Bất cứ ai hứa tuân theo Hợp Động Xã Hội thì có thể trở thành nhà
    bảo trì. Bất cứ nhà bảo trì nào có khả năng giới thiệu phần mềm mới vào
    Debian -- miễn là gói phần mềm thỏa tiêu chuẩn cả tự do lẫn chất lượng của
    chúng tôi.

  • Chỉ Dẫn Phần Mềm Tự Do Debian (DFSG) là lời tuyên bố rõ ràng và ngắn gọn về
    tiêu chuẩn phần mềm tự do của Debian. DFSG là tài liệu có ảnh hưởng rất lớn
    trong Phong Trào Phần Mềm Tự Do, cũng đã đặt nền móng cho Lời Định Nghĩa
    Nguồn Mở.

  • Sổ Tay Chính Sách Debian là đặc tả rộng rãi về những tiêu chuẩn chất lượng
    của Dự Án Debian.

Nhà phát triển Debian cũng tham gia một số dự án khác, đặc trưng cho Debian hay
gồm một phần cộng đồng Linux. Chẳng hạn:

  • Tiêu Chuẩn Phân Cấp Hệ Thống Tập Tin (FHS) là sự cố gắng tiêu chuẩn hóa bố
    trí của hệ thống tập tin Linux. FHS sẽ cho nhà phát triển phần mềm có khả
    năng tập trung sự cố gắng để thiết kế chương trình, không cần lo lăng về
    phương pháp cài đặt gói đó vào mỗi bản phát hành GNU/Linux riêng.

  • Debian Còn Trẻ là một dự án bên trong, nhắm mục đích là bảo đảm Debian hấp
    dẫn được người dùng trẻ nhất.

Để tìm thông tin chung thêm về Debian, xem Hỏi Đáp Debian.

1.2. GNU/Linux là gì vậy?

GNU/Linux là hệ điều hành: một dãy chương trình cho bạn khả năng tương tác với
máy tính, cũng chạy chương trình khác.

Một hệ điều hành gồm có nhiều chương trình cơ bản khác nhau do máy tính cần
thiết để liên lạc với và nhận lệnh từ người dùng; đọc từ và ghi vào đĩa cứng,
băng và máy in; điều khiển cách sử dụng bộ nhớ; chạy phần mềm khác. Trong hệ
điều hành, phần quan trọng nhất là hạt nhân. Trong hệ thống kiểu GNU/LInux,
Linux là thành phần hạt nhân. Phần còn lại của hệ thống chứa chương trình khác
nhau, gồm nhiều phần mềm do dự án GNU ghi hay hỗ trợ. Vì hạt nhân Linux đơn độc
không làm toàn bộ hệ điều hành, chúng tôi chọn sử dụng tên "GNU/Linux" để diễn
tả hệ thống cũng có tên cẩu thả "Linux".

Hệ thống GNU/Linux làm theo hệ điều hành UNIX. Kể từ đầu, GNU/Linux đã được
thiết kế như là hệ thống đa tác vụ, đa người dùng. Những sự thật này là đủ làm
cho GNU/Linux khác với các hệ điều hành nổi tiếng khác. Tuy nhiên, GNU/Linux
vẫn còn khác hơn. Trái ngược với hệ điều hành khác, không có ai sở hữu GNU/
Linux. Phần lớn việc phát triển nó được làm bởi người tình nguyện không được
tiền.

Tiến trình phát triển cái trở thành GNU/Linux đã bắt đầu trong năm 1984, khi Tổ
Chức Phần Mềm Tự Do bắt đầu phát triển một hệ điều hành miễn phí kiểu UNIX (tm)
được gọi là GNU.

Dự Án GNU đã phát triển một bộ gần hết các công cụ phần mềm tự do để sử dụng
với UNIX (tm) và hệ điều hành kiểu UNIX như GNU/Linux. Những công cụ này cho
người dùng có khả năng thực hiện công việc trong phạm vị từ việc thường (như
sao chép hay gỡ bỏ tập tin khỏi hệ thống) đến việc phức tạp (như ghi hay biên
dịch chương trình hoặc hiệu chỉnh cấp cao nhiều định dạng tài liệu khác nhau).

Mặc dù nhiều nhóm và người đã đóng góp cho GNU/Linux, Tổ Chức Phần Mềm Tự Do
vẫn còn đã đóng góp nhiều nhất: nó đã tạo phần lớn công cụ được dùng trong GNU/
Linux, ngay cả triết lý và cộng đồng hỗ trợ nó.

Hạt nhân Linux mới xuất hiện trong năm 1991, khi một học sinh vi tính tên Linus
Torvalds loan báo cho nhóm tin tức Usenet comp.os.minix một phiên bản sớm của
hạt nhân thay thế điều của Minix. Xem trang lịch sử Linux Linux History Page
của Linux Quốc Tế.

Linus Torvalds continues to coordinate the work of several hundred developers
with the help of a number of subsystem maintainers. There is an official
website for the Linux kernel. Information about the linux-kernel mailing list
can be found on the linux-kernel mailing list FAQ.

GNU/Linux users have immense freedom of choice in their software. For example,
they can choose from a dozen different command line shells and several
graphical desktops. This selection is often bewildering to users of other
operating systems, who are not used to thinking of the command line or desktop
as something that they can change.

Hơn nữa, GNU/Linux sụp đổ ít hơn, chạy dễ hơn nhiều chương trình đồng thời,
cũng là bảo mật hơn nhiều hệ điều hành khác. Do những lợi ích này, Linux là hệ
điều hành lớn lên nhanh nhất trong thị trường trình phục vụ. Gần đây hơn, Linux
cũng mới ưa chuộng với người dùng kinh doanh và ở nhà.

1.3. Debian GNU/Linux là gì vậy?

Kết hợp triết lý và phương pháp luận của Debian với những công cụ GNU, hạt nhân
Linux, và phần mềm tự do quan trọng khác, các điều này thành lập một bản phát
hành phần mềm duy nhất được gọi là Debian GNU/Linux. Bản phát hành này gồm có
rất nhiều gói phần mềm. Trong bản phát hành này, mỗi gói chứa chương trình chạy
được, tập lệnh, tài liệu hướng dẫn và thông tin cấu hình, cũng có một nhà bảo
trì nhận trách nhiệm chính cập nhật gói đó, theo dõi thông báo lỗi, và liên lạc
với tác giả gốc của phần mềm đã đóng gói. Cơ bản người dùng rất lớn của chúng
tôi, cùng với hệ thống theo dõi lỗi, bảo đảm các sự khó được tìm và sửa nhanh.

Tập trung Debian với chi tiết có kết quả là một bản phát hành có chất lượng
cao, ổn định, và có khả năng co giãn. Có thể cấu hình dễ dàng bản cài đặt để
thực hiện nhiều nhiệm vụ, từ bức tường lửa độc lập, đến máy trăm khoá học để
bàn, đến máy phục vụ mạng lớp cao.

Debian nối tiếng nhất trong những người dùng cấp cao vì nó có kỹ thuật rất tốt,
cam kết năng nổ với các sự cần và sự mong đợi của cộng đồng Linux. Debian cũng
đã giới thiệu vào Linux nhiều tính năng đã trở thành thường dụng.

Chẳng hạn, Debian là bản phát hành Linux thứ nhất có gồm hệ thống quản lý gói
để cài đặt và gỡ bỏ phần mềm một cách dễ dàng. Nó cũng là bản phát hành Linux
thứ nhất có khả năng nâng cấp mà không cần cài đặt lại.

Debian tiếp tục dẫn đường phát triển Linux. Tiến trình phát triển của nó là
thông lệ xuất sắc của mẫu phát triển Nguồn Mở -- ngay cả cho công việc rất phức
tạp như xây dựng và bảo trì một hệ điều hành hoàn toàn.

Tính năng khác biệt Debian nhiều nhất với các bản phát hành Linux khác là hệ
thống quản lý gói. Những công cụ này cho quản trị hệ thống Debian khả năng điều
khiển hoàn toàn mọi gói được cài đặt vào hệ thống đó, gồm khả năng cài đặt một
gói riêng hoặc cập nhật tự động toàn bộ hệ điều hành. Cũng có thể bảo vệ gói
riêng chống cập nhật. Bạn ngay cả có khả năng báo hệ thống quản lý gói biết về
phần mềm tự biên dịch và cách phụ thuộc nào nó thỏa.

Để bảo vệ hệ thống của bạn chống "vi rút Trojan" và phần mềm hiểm độc khác, máy
phục vụ Debian kiểm tra mỗi gói được tải lên từ nhà bảo trì Debian đã đăng ký
của nó. Người đóng gói Debian cũng rất cẩn thận để cấu hình gói một cách bảo
mật. Khi lỗi bảo mật xuất hiện trong gói đã phát hành, thường cung cấp rất
nhanh cách sửa. Với những tùy chọn cập nhật đơn giản của Debian, cách sửa bảo
mật có thể được tải về và cài đặt tự động qua Mạng.

Phương pháp chính và tốt nhất để được sự hỗ trợ cho hệ thống Debian GNU/Linux
của bạn, cũng để liên lạc với Nhà Phát Triển Debian là bằng những hộp thư chung
do Dự Án Debian bảo trì (có hơn 322 hộp thư vào lúc viết câu này). Cách dễ nhất
để đăng ký tham gia một hay nhiều hộp thư chung này là thăm trang đăng ký hộp
thư chung Debian (Debian's mailing list subscription page) rồi điền vào đơn tại
đó.

1.4. What is the Debian Installer?

Debian Installer, also known as "d-i", is the software system to install a
basic working Debian system. A wide range of hardware such as embedded devices,
laptops, desktops and server machines is supported and a large set of free
software for many purposes is offered.

The installation is conducted by answering a basic set of questions. Also
available are an expert mode that allows to control every aspect of the
installation and an advanced feature to perform automated installations. The
installed system can be used as is or further customized. The installation can
be performed from a multitude of sources: USB, CD/DVD/Blu-Ray or the network.
The installer supports localized installations in more than 80 languages.

The installer has its origin in the boot-floppies project, and it was first
mentioned by Joey Hess in 2000. Since then the installation system has been
continuously developed by volunteers improving and adding more features.

More information can be found on the Debian Installer page, on the Wiki and on
the debian-boot mailing list.

1.5. Lấy Debian

For information on how to download Debian GNU/Linux from the Internet or from
whom official Debian installation media can be purchased, see the distribution
web page. The list of Debian mirrors contains a full set of official Debian
mirrors, so you can easily find the nearest one.

Rất dễ dàng nâng cấp Debian sau khi cài đặt. Thủ tục cài đặt sẽ giúp đỡ thiết
lập hệ thống để cho bạn nâng cấp được một khi cài đặt hoàn toàn, nếu cần thiết.

1.6. Lấy phiên bản mới nhất của tài liệu này

Tài liệu này đang được sửa đổi liên miên. Bạn hãy kiểm tra xem trang bản phát
hành 11 Debian Debian 11 pages tìm tin tức nào về bản phát hành 11 của hệ thống
Debian GNU/Linux. Phiên bản đã cập nhật của sổ tay cài đặt này cũng sẵn sàng từ
trang Sổ Tay Cài Đặt chính thức official Install Manual pages.

1.7. Cấu trúc của tài liệu này

Tài liệu này được thiết kế nhằm sổ tay cho người dùng bắt đầu chạy Debian. Nó
cố gắng giả sử càng ít càng có thể về lớp kỹ năng của bạn. Tuy nhiên, chúng tôi
có phải giả sử là bạn có kiến thức chung về hoạt động của các phần cứng của máy
tính của mình.

Trong tài liệu này, người dùng thành thạo cũng tìm được thông tin tham chiếu
hay, gồm có kích cỡ cài đặt tối thiểu, chi tiết về phần cứng được hỗ trợ bởi hệ
thống cài đặt Debian, v.v.. Chúng tôi khuyên người dùng thành thạo nhảy giữa
các đoạn lựa chọn trong tài liệu này.

Nói chung, sổ tay này được sắp xếp bằng thứ tự tuyến tính, dẫn bạn qua tiến
trình cài đặt từ đầu đến cuối. Đây là những bước cài đặt Debian GNU/Linux, và
tiết đoạn tài liệu tương ứng với mỗi bước:

 1. Quyết định nếu phần cứng có thỏa tiêu chuẩn sử dụng hệ thống cài đặt chưa,
    trong Chương 2, Hệ thống Yêu cầu.

 2. Lưu trữ hệ thống, thực hiện việc định và cấu hình phần cứng nào cần thiết
    trước khi cài đặt Debian, trong Chương 3, Trước khi cài đặt Debian GNU/
    Linux. Nếu chuẩn bị một hệ thống đa khởi động thì bạn có thể cần phải tạo
    sức chứa phân vùng được trên phần cứng cho Debian dùng.

 3. Trong Chương 4, Lấy vật chứa cài đặt hệ thống, bạn sẽ giành những tập tin
    cài đặt cần thiết cho phương pháp cài đặt đã chọn.

 4. The next Chương 5, Khởi động Hệ thống Cài đặt describes booting into the
    installation system. This chapter also discusses troubleshooting procedures
    in case you have problems with this step.

 5. Perform the actual installation according to Chương 6, Sử dụng trình cài
    đặt Debian. This involves choosing your language, configuring peripheral
    driver modules, configuring your network connection, so that remaining
    installation files can be obtained directly from a Debian server (if you
    are not installing from a set of CD/DVD installation images), partitioning
    your hard drives and installation of a base system, then selection and
    installation of tasks. (Some background about setting up the partitions for
    your Debian system is explained in Phụ lục C, Phân vùng cho Debian.)

 6. Khởi động vào hệ thống cơ bản mới cài đặt, từ Chương 7, Khởi động vào hệ
    thống Debian mới.

Một khi cài đặt xong hệ thống, bạn đọc Chương 8, Bước kế tiếp và đi đâu vậy.
Chương này giải thích nơi cần tìm thông tin thêm về UNIX và Debian, và cách
thay thế hạt nhân.

Cuối cùng, thông tin về tài liệu này và cách đóng góp cho nó, nằm trong Phụ
lục E, Linh tinh quản trị.

1.8. Về tác quyền và giấy phép phần mềm

Chắc chắn là bạn đã đọc một số giấy phép được phát hành cùng với hậu hết phần
mềm buôn bán -- chúng thường nói là bạn có quyền dùng chỉ một bản sao của phần
mềm đó trên một máy tính riêng lẻ. Giấy phép của hệ thống này là rất khác với
đó. Chúng tôi mời bạn cài đặt một bản sao Debian GNU/Linux vào mọi máy tính
trong trường học hay chỗ làm của bạn. Cho các người bạn mượn vật chứa phần mềm
cài đặt, cũng giúp đỡ họ cài đặt nó vào các máy tính nhé ! Bạn ngay cả có quyền
tạo vài nghìn bản sao và bán chúng -- dù với một số điều kiện. Quyền cài đặt và
sử dụng hệ thống này dựa trực tiếp vào cơ bản phần mềm tự do của Debian.

Calling software free doesn't mean that the software isn't copyrighted, and it
doesn't mean that installation media containing that software must be
distributed at no charge. Free software, in part, means that the licenses of
individual programs do not require you to pay for the privilege of distributing
or using those programs. Free software also means that not only may anyone
extend, adapt, and modify the software, but that they may distribute the
results of their work as well.

Ghi chú

Dự án Debian, để giúp đỡ người dùng, có phải làm cho công bố một số gói không
thỏa tiêu chuẩn tự do của chúng tôi. Tuy nhiên, những gói này không phải thuộc
về bản phát hành chính thức, cũng chỉ sẵn sàng từ phần đóng góp (contrib) hay
khác tự do (non-free) của máy nhân bản Debian hay trên đĩa CD/DVD-ROM nhóm ba;
xem Hỏi Đáp Debian (Debian FAQ), dưới Kho FTP Debian ("The Debian FTP archives"
), để tìm thêm thông tin về bố trí và nội dung của kho đó.

Nhiều chương trình của hệ thống được phát hành với điều kiện của Giấy Phép Công
Cộng GNU, thường được gọi đơn giản là "GPL". Giấy phép GPL cần thiết bạn làm
cho mã nguồn của chương trình sẵn sàng khi nào bạn phát hành một bản sao nhị
phân của chương trình đó; điều khoản này trong giấy phép thì bảo đảm bất cứ
người dùng nào có thể sửa đổi phần mềm đó. Do điều khoản này, mã nguồn ^[1] cho
mọi chương trình như vậy có sẵn trong hệ thống Debian.

Có vài kiểu khác nhau của lời tuyên bố tác quyền và giấy phép phần mềm được áp
dụng cho chương trình của Debian. Bạn có thể tìm tác quyền và giấy phép dành
cho mỗi gói được cài đặt vào hệ thống, bằng cách xem tập tin /usr/share/doc/
tên_gói/copyright một khi cài đặt gói đó vào hệ thống.

Để tìm thông tin thêm về giấy phép và cách Debian quyết định nếu phần mềm là đủ
tự do để được bao gồm trong bản phát hành chính, xem Chỉ Dẫn Phần Mềm Tự Do
Debian (Debian Free Software Guidelines).

Thông báo hợp pháp quan trọng nhất là: phần mềm này không bảo hành gì cả. Những
lập trình viên tạo phần mềm này đã làm như thế để giúp đỡ cộng đồng. Không bảo
hành sự thích hợp của phần mềm cho mục đích riêng nào. Tuy nhiên, vì phần mềm
là tự do, bạn có quyền sửa đổi nó để thích hợp với sự cần của mình -- cũng để
thích thú lợi ích của các sự sửa đổi được tạo bởi người khác đã mở rộng phần
mềm đó bằng cách này.


━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

^[1] Để tìm thông tin về phương pháp định vị, giải nén và xây dựng bộ nhị phân
từ gói mã nguồn Debian, xem Hỏi Đáp Debian Debian FAQ, dưới Những điều cơ bản
của Hệ Thống Quản Lý Gói Debian ("Basics of the Debian Package Management
System").

Chương 2. Hệ thống Yêu cầu

Mục lục

2.1. Phần cứng được hỗ trợ

    2.1.1. Kiến trúc được hỗ trợ
    2.1.2. CPU Support
    2.1.3. Máy tính xách tay
    2.1.4. Đa bộ xử lý
    2.1.5. Graphics Hardware Support
    2.1.6. Phần cứng khả năng kết nối mạng
    2.1.7. Thiết bị hiển thị chữ nổi
    2.1.8. Phần cứng tổng hợp giọng nối
    2.1.9. Ngoại vi và phần cứng khác

2.2. Thiết bị cần thiết phần vững
2.3. Mua phần cứng đặc biệt cho GNU/Linux

    2.3.1. Tránh phần mềm sở hữu hay bị đóng

2.4. Vật chứa trình cài đặt

    2.4.1. Đĩa CD-ROM/DVD-ROM/BD-ROM
    2.4.2. Thanh bộ nhớ USB
    2.4.3. Mạng
    2.4.4. Đĩa cứng
    2.4.5. Hệ thống Un*x hay GNU
    2.4.6. Hệ thống cất giữ được hỗ trợ

2.5. Bộ nhớ và sức chứa trên đĩa cần thiết

Tiết đoạn này chứa thông tin về phần cứng yêu cầu để bắt đầu sử dụng Debian.
Cũng có liên kết đến thông tin bổ sung về phần cứng do GNU/Linux hỗ trợ.

2.1. Phần cứng được hỗ trợ

Debian không yêu cầu phần cứng đặc biệt khác với yêu cầu của hạt nhân Linux hay
kFreeBSD và các bộ công cụ GNU. Vì vậy, bất kỳ kiến trúc hay nền tảng nào sang
đó hạt nhân Linux hay kFreeBSD, thư viện C libc, bộ biên dịch gcc v.v. đã được
chuyển, cũng cho đó có một bản chuyển Debian, có khả năng chạy được hệ thống
Debian. Xem những trang Bản Chuyển (Ports) tại https://www.debian.org/ports/
amd64/ để tìm thêm thông tin về hệ thống kiến trúc 64-bit PC đã được thử ra với
Debian GNU/Linux.

Hơn là cố gắng diễn tả tất cả các cấu hình phần cứng được hỗ trợ cho kiến trúc 
64-bit PC, tiết đoạn này chứa thông tin chung và liên kết đến thông tin thêm.

2.1.1. Kiến trúc được hỗ trợ

Debian GNU/Linux 11 supports 9 major architectures and several variations of
each architecture known as "flavors".

┌─────────────────────────┬─────────┬──────────────────────────────┬──────────┐
│        Kiến trúc        │   Tên   │        Kiến trúc phụ         │  Mùi vị  │
│                         │ Debian  │                              │          │
├─────────────────────────┼─────────┼──────────────────────────────┼──────────┤
│AMD64 & Intel 64         │amd64    │                              │          │
├─────────────────────────┼─────────┼──────────────────────────────┼──────────┤
│                         │         │default x86 machines          │default   │
│Dựa vào x86 Intel        │i386     ├──────────────────────────────┼──────────┤
│                         │         │Xen PV domains only           │xen       │
├─────────────────────────┼─────────┼──────────────────────────────┼──────────┤
│ARM                      │armel    │Marvell Kirkwood and Orion    │marvell   │
├─────────────────────────┼─────────┼──────────────────────────────┼──────────┤
│ARM with hardware FPU    │armhf    │multiplatform                 │armmp     │
├─────────────────────────┼─────────┼──────────────────────────────┼──────────┤
│64bit ARM                │arm64    │                              │          │
├─────────────────────────┼─────────┼──────────────────────────────┼──────────┤
│                         │         │MIPS Malta                    │5kc-malta │
│64bit MIPS               │         ├──────────────────────────────┼──────────┤
│(little-endian)          │mips64el │Cavium Octeon                 │octeon    │
│                         │         ├──────────────────────────────┼──────────┤
│                         │         │Loongson 3                    │loongson-3│
├─────────────────────────┼─────────┼──────────────────────────────┼──────────┤
│                         │         │MIPS Malta                    │4kc-malta │
│32bit MIPS               │         ├──────────────────────────────┼──────────┤
│(little-endian)          │mipsel   │Cavium Octeon                 │octeon    │
│                         │         ├──────────────────────────────┼──────────┤
│                         │         │Loongson 3                    │loongson-3│
├─────────────────────────┼─────────┼──────────────────────────────┼──────────┤
│Power Systems            │ppc64el  │IBM POWER8 or newer machines  │          │
├─────────────────────────┼─────────┼──────────────────────────────┼──────────┤
│64bit IBM S/390          │s390x    │IPL từ bộ đọc VM-reader và    │giống loài│
│                         │         │DASD                          │          │
└─────────────────────────┴─────────┴──────────────────────────────┴──────────┘

Tài liệu này bao quát sự cài đặt cho kiến trúc 64-bit PC dùng hạt nhân Linux.
Nếu bạn tìm thông tin về bất cứ kiến trúc khác nào được Debian hỗ trợ, xem
trang Bản Chuyển Debian.

2.1.2. CPU Support

Hỗ trợ bộ xử lý kiểu cả hai AMD64 và Intel 64.

2.1.3. Máy tính xách tay

From a technical point of view, laptops are normal PCs, so all information
regarding PC systems applies to laptops as well. Installations on laptops
nowadays usually work out of the box, including things like automatically
suspending the system on closing the lid and laptop specfic hardware buttons
like those for disabling the wifi interfaces ("airplane mode"). Nonetheless
sometimes the hardware vendors use specialized or proprietary hardware for some
laptop-specific functions which might not be supported. To see if your
particular laptop works well with GNU/Linux, see for example the Linux Laptop
pages.

2.1.4. Đa bộ xử lý

Multiprocessor support -- also called "symmetric multiprocessing" or SMP -- is
available for this architecture. The standard Debian 11 kernel image has been
compiled with SMP-alternatives support. This means that the kernel will detect
the number of processors (or processor cores) and will automatically deactivate
SMP on uniprocessor systems.

Having multiple processors in a computer was originally only an issue for
high-end server systems but has become common in recent years nearly everywhere
with the introduction of so called "multi-core" processors. These contain two
or more processor units, called "cores", in one physical chip.

2.1.5. Graphics Hardware Support

Debian's support for graphical interfaces is determined by the underlying
support found in X.Org's X11 system, and the kernel. Basic framebuffer graphics
is provided by the kernel, whilst desktop environments use X11. Whether
advanced graphics card features such as 3D-hardware acceleration or
hardware-accelerated video are available, depends on the actual graphics
hardware used in the system and in some cases on the installation of additional
"firmware" blobs (see Phần 2.2, "Thiết bị cần thiết phần vững").

On modern PCs, having a graphical display usually works out of the box. For
quite a lot of hardware, 3D acceleration also works well out of the box, but
there is still some hardware that needs binary firmware blobs to work well. In
some cases there have been reports about hardware on which installation of
additional graphics card firmware was required even for basic graphics support.

Details on supported graphics hardware and pointing devices can be found at
https://wiki.freedesktop.org/xorg/. Debian 11 ships with X.Org version 7.7.

2.1.6. Phần cứng khả năng kết nối mạng

Almost any network interface card (NIC) supported by the Linux kernel should
also be supported by the installation system; drivers should normally be loaded
automatically. This includes most PCI/PCI-Express cards as well as PCMCIA/
Express Cards on laptops.

ISDN được hỗ trợ, nhưng không phải trong khi cài đặt.

2.1.6.1. Bo mạch mạng không dây

Wireless networking is in general supported as well and a growing number of
wireless adapters are supported by the official Linux kernel, although many of
them do require firmware to be loaded.

If firmware is needed, the installer will prompt you to load firmware. See
Phần 6.4, "Nạp phần vững bị thiếu" for detailed information on how to load
firmware during the installation.

NIC không dây mà không phải được hỗ trợ bởi hạt nhân Linux chính thức vẫn còn
có thể được làm cho hoạt động dưới Debian GNU/Linux, nhưng không phải được hỗ
trợ trong khi cài đặt.

Nếu bạn gặp vấn đề sử dụng chức năng chạy mạng không dây và không có NIC khác
nào có thể dùng trong khi cài đặt, vẫn còn có thể cài đặt Debian GNU/Linux dùng
một ảnh đĩa CD/DVD đầy đủ. Hãy bật tuỳ chọn để không cấu hình một mạng, và cài
đặt dùng chỉ những gói sẵn sàng trên đĩa CD/DVD. Sau đó thì bạn có thể cài đặt
trình điều khiển và phần vững yêu cầu sau khi cài đặt xong (sau khi khởi động
lại) và tự cấu hình mạng.

Trong một số trường hợp nào đó, trình điều khiển yêu cầu không sẵn sàng dưới
dạng một gói Debian. Vì thế bạn cần phải tìm mã nguồn trên Internet, và biên
dịch bằng tay trình điều khiển. (Hướng dẫn về tiến trình này nằm ở ngoại phạm
vị của sổ tay này.) Nếu không có sẵn trình điều khiển Linux nào, sự chọn cuối
cùng là dùng gói ndiswrapper mà cho phép bạn sử dụng một trình điều khiển
Windows.

2.1.7. Thiết bị hiển thị chữ nổi

Khả năng hỗ trợ thiết bị thiết bị chữ nổi phụ thuộc vào chương trình brltty.
Phần lớn các thiết bị hiển thị chữ nổi cũng hoạt động được với brltty, khi được
kết nối qua một cổng nối tiếp, USB hay Bluetooth. Chi tiết về những thiết bị
chữ nổi được hỗ trợ có thể được tìm trên trang Web của brltty. Debian GNU/Linux
11 có sẵn brltty phiên bản 6.3.

2.1.8. Phần cứng tổng hợp giọng nối

Khả năng hỗ trợ thiết bị phần cứng tổng hợp giọng nói thì phụ thuộc vào chương
trình speakup. speakup chỉ hỗ trợ bảng hợp nhất hay thiết bị bên ngoài được kết
nối đến một cổng nối tiếp (không hỗ trợ bộ điều hợp kiểu USB, nối-tiếp-đến-USB
hay PCI nào). Chi tiết về những thiết bị phần cứng tổng hợp giọng nói được hỗ
trợ có thể được tìm trên trang Web speakup. Debian GNU/Linux 11 có sẵn speakup
phiên bản 3.1.6.

2.1.9. Ngoại vi và phần cứng khác

Linux supports a large variety of hardware devices such as mice, printers,
scanners, PCMCIA/CardBus/ExpressCard and USB devices. However, most of these
devices are not required while installing the system.

USB hardware generally works fine. On some very old PC systems some USB
keyboards may require additional configuration (see Phần 3.6.6, "Vấn đề phần
cứng cần theo dõi"). On modern PCs, USB keyboards and mice work without
requiring any specific configuration.

2.2. Thiết bị cần thiết phần vững

Besides the availability of a device driver, some hardware also requires
so-called firmware or microcode to be loaded into the device before it can
become operational. This is most common for network interface cards (especially
wireless NICs), but for example some USB devices and even some hard disk
controllers also require firmware.

With many graphics cards, basic functionality is available without additional
firmware, but the use of advanced features requires an appropriate firmware
file to be installed in the system. In some cases, a successful installation
can still end up in a black screen or garbled display when rebooting into the
installed system. If that happens, some workarounds can be tried to log in
anyway (see Phần 6.4.3, "Completing the Installed System").

On many older devices which require firmware to work, the firmware file was
permanently placed in an EEPROM/Flash chip on the device itself by the
manufacturer. Nowadays most new devices do not have the firmware embedded this
way anymore, so the firmware file must be uploaded into the device by the host
operating system every time the system boots.

Trong hậu hết các trường hợp, phần cững khác tự do tùy theo những tiêu chuẩn
được Dự án Debian GNU/Linux dùng thì không thể được bao gồm trong bản phát hành
chính hoặc trong hệ thống cài đặt. Nếu trình điều khiển thiết bị chính nó được
bao gồm tong bản phát hành, và nếu Debian GNU/Linux có quyền hợp pháp để phát
hành phần vững đó, nó thường sẵn sàng dưới dạng một gói riêng từ phần khác tự
do (non-free) của kho gói.

However, this does not mean that such hardware cannot be used during an
installation. Starting with Debian GNU/Linux 5.0, debian-installer supports
loading firmware files or packages containing firmware from a removable medium,
such as a USB stick. See Phần 6.4, "Nạp phần vững bị thiếu" for detailed
information on how to load firmware files or packages during the installation.

If the debian-installer prompts for a firmware file and you do not have this
firmware file available or do not want to install a non-free firmware file on
your system, you can try to proceed without loading the firmware. There are
several cases where a driver prompts for additional firmware because it may be
needed under certain circumstances, but the device does work without it on most
systems (this e.g. happens with certain network cards using the tg3 driver).

2.3. Mua phần cứng đặc biệt cho GNU/Linux

Có vài nhà bán máy tính cài đặt sẵn hệ thống Debian hoặc một bản phát hành GNU/
LInux khác. Có thể là bạn trả thêm tiền mà mua sự yên tĩnh trong tâm hồn, vì
bạn chắc chắn biết rằng phần cứng đó được GNU/LInux hỗ trợ đầy đủ.

Nếu bạn cần phải mua một máy có hệ thống Windows có sẵn, khuyên bạn đọc cẩn
thận giấy phép phần mềm thuộc về Windows đó, vì trong một phần trường hợp riêng
bạn có thể từ chối giấy phép đó và giành hạ giá từ nhà bán. Việc tìm kiếm chuỗi
"windows refund" trên Mạng nên tìm thông tin có ích về trường hợp này.

Bất chấp bạn mua hệ thống có sẵn Linux hay hệ thống tiền dùng, vẫn còn quan
trọng là bạn kiểm tra nếu phần cứng đó được hỗ trợ bởi hạt nhân LInux hay
không. Kiểm tra xem nếu phần cứng đó được liệt kê trong những tham chiếu nói
trên. Báo người bán hàng biết bạn muốn mua một hệ thống LInux. Bạn hỗ trợ nhà
bán thân thiện với Linux nhé.

2.3.1. Tránh phần mềm sở hữu hay bị đóng

Some hardware manufacturers simply won't tell us how to write drivers for their
hardware. Others won't allow us access to the documentation without a
non-disclosure agreement that would prevent us from releasing the driver's
source code, which is one of the central elements of free software. Since we
haven't been granted access to usable documentation on these devices, they
simply won't work under Linux.

In many cases there are standards (or at least some de-facto standards)
describing how an operating system and its device drivers communicate with a
certain class of devices. All devices which comply to such a (de-facto-)
standard can be used with a single generic device driver and no device-specific
drivers are required. With some kinds of hardware (e.g. USB "Human Interface
Devices", i.e. keyboards, mice, etc., and USB mass storage devices like USB
flash disks and memory card readers) this works very well and practically every
device sold in the market is standards-compliant.

In other fields, among them e.g. printers, this is unfortunately not the case.
While there are many printers which can be addressed via a small set of
(de-facto-)standard control languages and therefore can be made to work without
problems in any operating system, there are quite a few models which only
understand proprietary control commands for which no usable documentation is
available and therefore either cannot be used at all on free operating systems
or can only be used with a vendor-supplied closed-source driver.

Even if there is a vendor-provided closed-source driver for such hardware when
purchasing the device, the practical lifespan of the device is limited by
driver availability. Nowadays product cycles have become short and it is not
uncommon that a short time after a consumer device has ceased production, no
driver updates get made available any more by the manufacturer. If the old
closed-source driver does not work anymore after a system update, an otherwise
perfectly working device becomes unusable due to lacking driver support and
there is nothing that can be done in this case. You should therefore avoid
buying closed hardware in the first place, regardless of the operating system
you want to use it with.

You can help improve this situation by encouraging manufacturers of closed
hardware to release the documentation and other resources necessary for us to
provide free drivers for their hardware.

2.4. Vật chứa trình cài đặt

Tiết đoạn này sẽ giúp đỡ bạn quyết định những kiểu vật chứa nào bạn có thể sử
dụng để cài đặt hệ thống Debian. Có một chương hoàn toàn dành riêng cho phương
tiện chứa, Chương 4, Lấy vật chứa cài đặt hệ thống, trong đó liệt kê những lợi
ích và bất lợi của mỗi kiểu phương tiện chứa. Một khi tới tiết đoạn đó, bạn có
thể muốn tham chiếu về lại trang này.

2.4.1. Đĩa CD-ROM/DVD-ROM/BD-ROM

Installation from optical disc is supported for most architectures.

On PCs SATA, IDE/ATAPI, USB and SCSI optical drives are supported, as are
FireWire devices that are supported by the ohci1394 and sbp2 drivers.

2.4.2. Thanh bộ nhớ USB

USB flash disks a.k.a. USB memory sticks have become a commonly used and cheap
storage device. Most modern computer systems also allow booting the
debian-installer from such a stick. Many modern computer systems, in particular
netbooks and thin laptops, do not have an optical drive anymore at all and
booting from USB media is the standard way of installing a new operating system
on them.

2.4.3. Mạng

Mạng co thể được sử dụng trong khi cài đặt, để lấy các tập tin cần thiết cho
tiến trình cài đặt. Cách sử dụng mạng phụ thuộc vào phương pháp cơ sở dữ liệu
đã chọn và các trả lời một số câu sẽ được hỏi trong khi cài đặt. Bộ cài đặt hỗ
trợ phần lớn kiểu sự kết nối mạng (gồm PPPoE, nhưng không phải ISDN hay PPP),
thông qua hoặc HTTP hoặc FTP. Sau khi cài đặt xong, bạn cũng có khả năng cấu
hình hệ thống để sử dụng IDSN và PPP.

You can also boot the installation system over the network without needing any
local media like CDs/DVDs or USB sticks. If you already have a
netboot-infrastructure available (i.e. you are already running DHCP and TFTP
services in your network), this allows an easy and fast deployment of a large
number of machines. Setting up the necessary infrastructure requires a certain
level of technical experience, so this is not recommended for novice users.

Một tùy chọn khác là tiến trình cài đặt không có đĩa, dùng khả năng khởi động
qua mạng từ mạng cục bộ và khả năng gắn kết bằng NFS các hệ thống tập tin cục
bộ.

2.4.4. Đĩa cứng

Booting the installation system directly from a hard disk is another option for
many architectures. This will require some other operating system to load the
installer onto the hard disk. This method is only recommended for special cases
when no other installation method is available.

2.4.5. Hệ thống Un*x hay GNU

If you are running another Unix-like system, you could use it to install Debian
GNU/Linux without using the debian-installer described in the rest of this
manual. This kind of install may be useful for users with otherwise unsupported
hardware or on hosts which can't afford downtime. If you are interested in this
technique, skip to the Phần D.3, "Cài đặt Debian GNU/Linux từ hệ thống UNIX/
Linux". This installation method is only recommended for advanced users when no
other installation method is available.

2.4.6. Hệ thống cất giữ được hỗ trợ

The Debian installer contains a kernel which is built to maximize the number of
systems it runs on.

Generally, the Debian installation system includes support for IDE (also known
as PATA) drives, SATA and SCSI controllers and drives, USB, and FireWire. The
supported file systems include FAT, Win-32 FAT extensions (VFAT) and NTFS.

2.5. Bộ nhớ và sức chứa trên đĩa cần thiết

Cần thiết ít nhất 780MB bộ nhớ và 920MB sức chứa còn rảnh trên đĩa để thực hiện
một tiến trình cài đặt thông thường. Ghi chú rằng hai số này hơi tối thiểu. Để
xem số lượng hiện thức hơn, xem Phần 3.4, "Thoả tiêu chuẩn phần cứng tối thiểu"
.

The installer normally automatically enables memory-saving tricks to be able to
run on such low-memory system, but on architectures that are less tested it may
miss doing so. It can however be enabled manually by appending the lowmem=1 or
even lowmem=2 boot parameter (see also Phần 6.3.1.1, "Kiểm tra bộ nhớ có sẵn /
chế độ thiếu bộ nhớ" and Phần 5.3.2, "Tham số trình cài đặt Debian").

Installation on systems with less memory^[2] or disk space available may be
possible but is only advised for experienced users.


━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

^[2] Installation images that support the graphical installer require more
memory than images that support only the text-based installer and should not be
used on systems with less than 780MB of memory. If there is a choice between
booting the text-based and the graphical installer, the former should be
selected on such systems.

Chương 3. Trước khi cài đặt Debian GNU/Linux

Mục lục

3.1. Toàn cảnh tiến trình cài đặt
3.2. Sao lưu mọi dữ liệu đã có đi !
3.3. Thông tin cần thiết

    3.3.1. Tài liệu hướng dẫn
    3.3.2. Tìm nguồn thông tin về phần cứng
    3.3.3. Khả năng tương thích của phần cứng
    3.3.4. Thiết lập mạng

3.4. Thoả tiêu chuẩn phần cứng tối thiểu
3.5. Phân vùng sẵn cho hệ thống đa khởi động
3.6. Phần cứng cài đặt sẵn và thiết lập hệ điều hành

    3.6.1. Invoking the BIOS/UEFI Set-Up Menu
    3.6.2. Chọn thiết bị khởi động
    3.6.3. Systems with UEFI firmware
    3.6.4. Secure boot
    3.6.5. Disabling the Windows "fast boot"/"fast startup" feature
    3.6.6. Vấn đề phần cứng cần theo dõi

Chương này diễn tả cách chuẩn bị để cài đặt hệ thống Debian, trước khi bạn ngay
cả khởi động trình cài đặt. Gồm có tiến trình sao lưu dữ liệu, tập hợp thông
tin về phần cứng, và tìm thông tin khác nào cần thiết.

3.1. Toàn cảnh tiến trình cài đặt

Trước tiên có chú thích về việc cài đặt lại. Đối với hệ thống Debian, có rất ít
trường hợp yêu cầu cài đặt lại toàn bộ hệ thống (v.d. cơ chế đĩa cứng thất
bại).

Nhiều hệ điều hành thường dùng có thể cần thiết người dùng cài đặt lại toàn bộ
hệ thống khi sự hỏng nghiêm trọng xảy ra, hoặc để nâng cấp lên phiên bản HĐH
mới. Thậm chí nếu không cần thiết cài đặt lại hoàn toàn, thường bạn phải cài
đặt lại các chương trình để hoạt động cho đúng trên HĐH mới.

Gặp vấn đề dưới Debian GNU/Linux, thì rất có thể là hệ điều hành có thể được
sửa chữa, thay vào bị thay thế. Tiến trình nâng cấp không bao giờ yêu cầu bạn
cài đặt lại hoàn toàn: lúc nào bạn cũng có thể nâng cấp « tại chỗ ». Hơn nữa,
hậu hết chương trình vẫn còn tương thích với bản phát hành HĐH mới. Nếu một
phiên bản chương trình mới nào đó cũng yêu cầu phần mềm hỗ trợ mới, hệ thống
quản lý gói Debian đảm bảo là tất cả phần mềm cần thiết được tự động nhận diện
và cài đặt. Điểm quan trọng là rất nhiều sự cố gắng đã được đóng góp để tránh
yêu cầu cài đặt lại, vì vậy bạn nên thấy việc đó là tùy chọn cuối cùng. Trình
cài đặt Debian không phải được thiết kế để cài đặt lại trên một hệ thống đã có.

Đây là các bước chính bạn nên theo trong tiến trình cài đặt.

 1. Sao lưu mọi dữ liệu hay tài liệu hiện thời nằm trên đĩa cứng nơi bạn định
    cài đặt Debian.

 2. Tập hợp thông tin về máy tính đích, và tài liệu hướng dẫn nào cần thiết,
    trước khi khởi chạy tiến trình cài đặt.

 3. Locate and/or download the installer software and any specialized driver or
    firmware files your machine requires.

 4. Set up boot media such as CDs/DVDs/USB sticks or provide a network boot
    infrastructure from which the installer can be booted.

 5. Khởi động hệ thống cài đặt.

 6. Chọn ngôn ngữ cài đặt.

 7. Kích hoạt sự kết nối mạng Ethernet, nếu có.

 8. If necessary, resize existing partitions on your target harddisk to make
    space for the installation.

 9. Tạo và gắn kết những phân vùng nơi Debian sẽ được cài đặt.

10. Theo dõi tiến trình tải về/cài đặt/thiết lập tự động hệ thống cơ bản.

11. Select and install additional software.

12. Cài đặt một bộ nạp khởi động có khả năng khởi chạy Debian GNU/Linux và/hay
    hệ thống đã có.

13. Tải lần đầu tiên hệ thống mới được cài đặt.

Đối với 64-bit PC, bạn có tùy chọn sử dụng một phiên bản đồ họa của hệ thống
cài đặt. Để tìm thêm thông tin về bộ cài đặt đồ họa, xem Phần 5.1.8, "The
Graphical Installer".

Nếu bạn gặp khó khăn trong tiến trình cài đặt, có ích khi biết bước nào sử dụng
gói nào. Ở đây giới thiệu những gói phần mềm quan trọng nhất:

Phần mềm cài đặt debian-installer là chủ đề chính của sổ tay này. Nó phát hiện
phần cứng nên tải các trình điều khiển thích hợp, sử dụng ứng dụng khách
dhcp-client để thiết lập sự kết nối mạng, chạy debootstrap để cài đặt các gói
hệ thống cơ bản, và chạy tasksel để cho bạn có khả năng cài đặt phần mềm thêm.
Có nhiều gói khác cũng làm việc trong tiến trình cài đặt này, nhưng trình
debian-installer đã làm xong công việc khi bạn nạp lần đầu tiên hệ thống mới.

Để điều chỉnh hệ thống để thích hợp với sự cần của bạn, tasksel cho bạn khả
năng cài đặt một số phần mềm bó riêng, v.d. trình phục vụ Mạng hay môi trường
làm việc.

One important option during the installation is whether or not to install a
graphical desktop environment, consisting of the X Window System and one of the
available graphical desktop environments. If you choose not to select the "
Desktop environment" task, you will only have a relatively basic, command line
driven system. Installing the Desktop environment task is optional because in
relation to a text-mode-only system it requires a comparatively large amount of
disk space and because many Debian GNU/Linux systems are servers which don't
really have any need for a graphical user interface to do their job.

Just be aware that the X Window System is completely separate from
debian-installer, and in fact is much more complicated. Troubleshooting of the
X Window System is not within the scope of this manual.

3.2. Sao lưu mọi dữ liệu đã có đi !

Before you start, make sure to back up every file that is now on your system.
If this is the first time a non-native operating system is going to be
installed on your computer, it is quite likely you will need to re-partition
your disk to make room for Debian GNU/Linux. Anytime you partition your disk,
you run a risk of losing everything on the disk, no matter what program you use
to do it. The programs used in the installation of Debian GNU/Linux are quite
reliable and most have seen years of use; but they are also quite powerful and
a false move can cost you. Even after backing up, be careful and think about
your answers and actions. Two minutes of thinking can save hours of unnecessary
work.

If you are creating a multi-boot system, make sure that you have the
distribution media of any other present operating systems on hand. Even though
this is normally not necessary, there might be situations in which you could be
required to reinstall your operating system's boot loader to make the system
boot or in a worst case even have to reinstall the complete operating system
and restore your previously made backup.

3.3. Thông tin cần thiết

3.3.1. Tài liệu hướng dẫn

3.3.1.1. Sổ tay cài đặt

Tài liệu này, dạng ASCII, HTML hay PDF.

  • install.vi.txt

  • install.vi.html

  • install.vi.pdf

3.3.1.2. Tài liệu hướng dẫn về phần cứng

Thường chứa thông tin có ích về cách cấu hình hay sử dụng phần cứng.

  • The Debian Wiki hardware page

3.3.2. Tìm nguồn thông tin về phần cứng

Trong nhiều trường hợp, trình cài đặt sẽ có khả năng phát hiện tự động phần
cứng riêng của bạn. Để chuẩn bị được, khuyên bạn quen với phần cứng đó trước
khi cài đặt.

Có thể tập hợp thông tin về phần cứng từ :

  • Sổ tay có sẵn với mỗi phần cứng.

  • The BIOS/UEFI setup screens of your computer. You can view these screens
    when you start your computer by pressing a combination of keys. Check your
    manual for the combination. Often, it is the Delete or the F2 key, but some
    manufacturers use other keys or key combinations. Usually upon starting the
    computer there will be a message stating which key to press to enter the
    setup screen.

  • Hộp của mỗi phần cứng.

  • Cửa sổ Hệ Thống (System) trong bảng điều khiển (Control Panel) Windows.

  • Lệnh hay công cụ hệ thống trong hệ điều hành khác, gồm bộ quản lý tập tin.
    Nguồn này có ích đặc biệt để tìm thông tin về bộ nhớ RAM và bộ nhớ của phần
    cứng.

  • Quản trị hệ thống hay nhà cung cấp dịch vụ Mạng (ISP). Những nguồn này có
    thông tin báo bạn biết cách thiết lập khả năng chạy mạng và gởi/nhận thư
    điện tử.

Bảng 3.1. Hardware Information Helpful for an Install

┌──────────────────┬────────────────────────────────────────────────┐
│    Phần cứng     │              Thông tin có thể cần              │
├──────────────────┼────────────────────────────────────────────────┤
│                  │Có mấy cái.                                     │
│                  ├────────────────────────────────────────────────┤
│                  │Thứ tự trên hệ thống.                           │
│                  ├────────────────────────────────────────────────┤
│                  │Kiểu IDE (cũng biết là PATA), SATA hay SCSI.    │
│Phần cứng         ├────────────────────────────────────────────────┤
│                  │Sức chứa còn rảnh sẵn sàng.                     │
│                  ├────────────────────────────────────────────────┤
│                  │Phân vùng.                                      │
│                  ├────────────────────────────────────────────────┤
│                  │Phân vùng nơi hệ điều hành khác đã được cài đặt.│
├──────────────────┼────────────────────────────────────────────────┤
│Network interfaces│Type/model of available network interfaces.     │
├──────────────────┼────────────────────────────────────────────────┤
│Máy in            │Mẫu và hãng chế tạo.                            │
├──────────────────┼────────────────────────────────────────────────┤
│Thẻ ảnh động      │Type/model and manufacturer.                    │
└──────────────────┴────────────────────────────────────────────────┘


3.3.3. Khả năng tương thích của phần cứng

Many products work without trouble on Linux. Moreover, hardware support in
Linux is improving daily. However, Linux still does not run as many different
types of hardware as some operating systems.

Drivers in Linux in most cases are not written for a certain "product" or "
brand" from a specific manufacturer, but for a certain hardware/chipset. Many
seemingly different products/brands are based on the same hardware design; it
is not uncommon that chip manufacturers provide so-called "reference designs"
for products based on their chips which are then used by several different
device manufacturers and sold under lots of different product or brand names.

This has advantages and disadvantages. An advantage is that a driver for one
chipset works with lots of different products from different manufacturers, as
long as their product is based on the same chipset. The disadvantage is that it
is not always easy to see which actual chipset is used in a certain product/
brand. Unfortunately sometimes device manufacturers change the hardware base of
their product without changing the product name or at least the product version
number, so that when having two items of the same brand/product name bought at
different times, they can sometimes be based on two different chipsets and
therefore use two different drivers or there might be no driver at all for one
of them.

For USB and PCI/PCI-Express/ExpressCard devices, a good way to find out on
which chipset they are based is to look at their device IDs. All USB/PCI/
PCI-Express/ExpressCard devices have so called "vendor" and "product" IDs, and
the combination of these two is usually the same for any product based on the
same chipset.

On Linux systems, these IDs can be read with the lsusb command for USB devices
and with the lspci -nn command for PCI/PCI-Express/ExpressCard devices. The
vendor and product IDs are usually given in the form of two hexadecimal
numbers, separated by a colon, such as "1d6b:0001".

An example for the output of lsusb: "Bus 001 Device 001: ID 1d6b:0002 Linux
Foundation 2.0 root hub", whereby 1d6b is the vendor ID and 0002 is the product
ID.

An example for the output of lspci -nn for an Ethernet card: "03:00.0 Ethernet
controller [0200]: Realtek Semiconductor Co., Ltd. RTL8111/8168B PCI Express
Gigabit Ethernet controller [10ec:8168] (rev 06)". The IDs are given inside the
rightmost square brackets, i.e. here 10ec is the vendor- and 8168 is the
product ID.

As another example, a graphics card could give the following output: "04:00.0
VGA compatible controller [0300]: Advanced Micro Devices [AMD] nee ATI RV710
[Radeon HD 4350] [1002:954f]".

On Windows systems, the IDs for a device can be found in the Windows device
manager on the tab "details", where the vendor ID is prefixed with VEN_ and the
product ID is prefixed with DEV_. On Windows 7 systems, you have to select the
property "Hardware IDs" in the device manager's details tab to actually see the
IDs, as they are not displayed by default.

Searching on the internet with the vendor/product ID, "Linux" and "driver" as
the search terms often results in information regarding the driver support
status for a certain chipset. If a search for the vendor/product ID does not
yield usable results, a search for the chip code names, which are also often
provided by lsusb and lspci ("RTL8111"/"RTL8168B" in the network card example
and "RV710" in the graphics card example), can help.

3.3.3.1. Testing hardware compatibility with a Live-System

Debian GNU/Linux is also available as a so-called "live system" for certain
architectures. A live system is a preconfigured ready-to-use system in a
compressed format that can be booted and used from a read-only medium like a CD
or DVD. Using it by default does not create any permanent changes on your
computer. You can change user settings and install additional programs from
within the live system, but all this only happens in the computer's RAM, i.e.
if you turn off the computer and boot the live system again, everything is
reset to its defaults. If you want to see whether your hardware is supported by
Debian GNU/Linux, the easiest way is to run a Debian live system on it and try
it out.

There are a few limitations in using a live system. The first is that as all
changes you do within the live system must be held in your computer's RAM, this
only works on systems with enough RAM to do that, so installing additional
large software packages may fail due to memory constraints. Another limitation
with regards to hardware compatibility testing is that the official Debian GNU/
Linux live system contains only free components, i.e. there are no non-free
firmware files included in it. Such non-free packages can of course be
installed manually within the system, but there is no automatic detection of
required firmware files like in the debian-installer, so installation of
non-free components must be done manually if needed.

Information about the available variants of the Debian live images can be found
at the Debian Live Images website.

3.3.4. Thiết lập mạng

If your computer is connected to a fixed network (i.e. an Ethernet or
equivalent connection -- not a dialup/PPP connection) which is administered by
somebody else, you should ask your network's system administrator for this
information:

  • Tên máy [host name] (có lẽ bạn tự quyết định được).

  • Tên miền [domain name].

  • Địa chỉ IP [IP address] của máy tính.

  • Mặt nạ mạng [netmask] cần dùng với mạng cục bộ.

  • Địa chỉ IP của hệ thống cổng ra [gateway] mặc định tới đó bạn nên định
    tuyến, nếu mạng có.

  • Trên mạng, hệ thống cần dùng như là trình phục vụ dịch vụ tên miền (DNS).

If the network you are connected to uses DHCP (Dynamic Host Configuration
Protocol) for configuring network settings, you don't need this information
because the DHCP server will provide it directly to your computer during the
installation process.

If you have internet access via DSL or cable modem (i.e. over a cable tv
network) and have a router (often provided preconfigured by your phone or catv
provider) which handles your network connectivity, DHCP is usually available by
default.

As a rule of thumb: if you run a Windows system in your home network and did
not have to manually perform any network settings there to achieve Internet
access, network connectivity in Debian GNU/Linux will also be configured
automatically.

If you use a WLAN/WiFi network, you should find out:

  • The ESSID ("network name") of your wireless network.

  • The WEP or WPA/WPA2 security key to access the network (if applicable).

3.4. Thoả tiêu chuẩn phần cứng tối thiểu

Một khi bạn đã tập hợp thông tin về các phần cứng của máy tính, hãy kiểm tra
xem phần cứng này sẽ cho phép bạn cài đặt bằng cách đã muốn.

Phụ thuộc vào sự cần của bạn, có lẽ bạn cài đặt được bằng ít phần cứng hơn
những điều được liệt kê trong bảng bên dưới. Tuy nhiên, hậu hết người dùng sẽ
gặp khó khăn nếu họ bỏ qua danh sách phần cứng khuyến khích.

Khuyên dùng ít nhất máy Pentium 4, 1 GHz, cho máy tính để bàn.

Bảng 3.2. Điều kiện hệ thống tối thiểu khuyến khích

┌────────────┬───────────────┬──────────────────┬────────┐
│Kiểu cài đặt│RAM (tối thiểu)│RAM (khuyến khích)│Đĩa cứng│
├────────────┼───────────────┼──────────────────┼────────┤
│Vô GUI      │256 MB         │512 MB            │2 GB    │
├────────────┼───────────────┼──────────────────┼────────┤
│Có GUI      │1 gigabytes    │2 GB              │10 GB   │
└────────────┴───────────────┴──────────────────┴────────┘


The minimum values assumes that swap will be enabled and a non-liveCD image is
used. The "No desktop" value assumes that the non-graphical (text-based)
installer is used.

The actual minimum memory requirements are a lot less than the numbers listed
in this table. With swap enabled, it is possible to install Debian with as
little as 350MB. The same goes for the disk space requirements, especially if
you pick and choose which applications to install; see Phần D.2, "Sức chứa trên
đĩa cần thiết cho công việc" for additional information on disk space
requirements.

It is possible to run a graphical desktop environment on older or low-end
systems, but in that case it is recommended to install a window manager that is
less resource-hungry than those of the GNOME or KDE Plasma desktop
environments; alternatives include xfce4, icewm and wmaker, but there are
others to choose from.

Không thể khuyến dự bộ nhớ hay sức chứa trên đĩa cần thiết cho việc cài đặt vào
máy phục vụ, vì số lượng phụ thuộc nhiều vào mục đích của máy phục vụ.

Ghi nhớ rằng những sự ước lượng này không gồm các dữ liệu thường dụng, như thư
điện tử và tập tin người dùng kiểu khác nhau. Bạn nên tính rộng lượng sức chứa
cho các tập tin và dữ liệu của mình.

Disk space required for the smooth operation of the Debian GNU/Linux system
itself is taken into account in these recommended system requirements. Notably,
the /var partition contains a lot of state information specific to Debian in
addition to its regular contents, like logfiles. The dpkg files (with
information on all installed packages) can easily consume 40MB. Also, apt puts
downloaded packages here before they are installed. You should usually allocate
at least 200MB for /var, and a lot more if you install a graphical desktop
environment.

3.5. Phân vùng sẵn cho hệ thống đa khởi động

Tiến trình phân vùng đĩa đơn giản là việc chia đĩa ra nhiều phần riêng, không
phụ thuộc vào nhau. Nó giống như việc xây dựng tường ở trong nhà: khi bạn thêm
đồ đạc vào phòng này, không có tác động trong phòng khác.

If you already have an operating system on your system (Windows 9x, Windows NT/
2000/XP/2003/Vista/7, OS/2, MacOS, Solaris, FreeBSD, ...) which uses the whole
disk and you want to stick Debian on the same disk, you will need to
repartition it. Debian requires its own hard disk partitions. It cannot be
installed on Windows or Mac OS X partitions. It may be able to share some
partitions with other Unix systems, but that's not covered here. At the very
least you will need a dedicated partition for the Debian root filesystem.

You can find information about your current partition setup by using a
partitioning tool for your current operating system, such as the integrated
Disk Manager in Windows or fdisk in DOS. Partitioning tools always provide a
way to show existing partitions without making changes.

Thông thường, việc thay đổi phân vùng chứa hệ thống tập tin sẽ hủy mọi thông
tin trên nó. Vì vậy bạn phải sao lưu hết trước khi phân vùng lại. Giống như
trong nhà, rất có thể là bạn muốn di chuyển các đồ đạc ra trước khi chuyển
tường, nếu không thì rủi ro hủy nó.

Several modern operating systems offer the ability to move and resize certain
existing partitions without destroying their contents. This allows making space
for additional partitions without losing existing data. Even though this works
quite well in most cases, making changes to the partitioning of a disk is an
inherently dangerous action and should only be done after having made a full
backup of all data. For FAT/FAT32 and NTFS partitions as used by DOS and
Windows systems, the ability to move and resize them losslessly is provided
both by debian-installer as well as by the integrated Disk Manager of Windows
7.

To losslessly resize an existing FAT or NTFS partition from within
debian-installer, go to the partitioning step, select the option for manual
partitioning, select the partition to resize, and simply specify its new size.

Creating and deleting partitions can be done from within debian-installer as
well as from an existing operating system. As a rule of thumb, partitions
should be created by the system for which they are to be used, i.e. partitions
to be used by Debian GNU/Linux should be created from within debian-installer
and partitions to be used from another operating system should be created from
there. debian-installer is capable of creating non-Linux partitions, and
partitions created this way usually work without problems when used in other
operating systems, but there are a few rare corner cases in which this could
cause problems, so if you want to be sure, use the native partitioning tools to
create partitions for use by other operating systems.

Dự định cài đặt nhiều hệ điều hành vào cùng một máy thì bạn nên cài đặt HĐH
khác nào trước khi cài đặt Debian. Thứ tự cài đặt này ngăn cản HĐH khác hủy khả
năng khởi chạy Debian, cũng tránh xem hướng dẫn bạn định dạng lại phân vùng
không sở hữu.

Cũng có thể tránh những hành động này hoặc phục hồi máy tính về sau, nhưng mà
theo thứ tự cài đặt này (cài đặt hệ thống sở hữu về trước) khỏi phiền đến bạn.

3.6. Phần cứng cài đặt sẵn và thiết lập hệ điều hành

This section will walk you through pre-installation hardware setup, if any,
that you will need to do prior to installing Debian. Generally, this involves
checking and possibly changing BIOS/UEFI/system firmware settings for your
system. The "BIOS/UEFI" or "system firmware" is the core software used by the
hardware; it is most critically invoked during the bootstrap process (after
power-up).

3.6.1. Invoking the BIOS/UEFI Set-Up Menu

The BIOS/UEFI provides the basic functions needed to boot your machine and to
allow your operating system to access your hardware. Your system provides a
BIOS/UEFI setup menu, which is used to configure the BIOS/UEFI. To enter the
BIOS/UEFI setup menu you have to press a key or key combination after turning
on the computer. Often it is the Delete or the F2 key, but some manufacturers
use other keys. Usually upon starting the computer there will be a message
stating which key to press to enter the setup screen.

3.6.2. Chọn thiết bị khởi động

Within the BIOS/UEFI setup menu, you can select which devices shall be checked
in which sequence for a bootable operating system. Possible choices usually
include the internal harddisks, the CD/DVD-ROM drive and USB mass storage
devices such as USB sticks or external USB harddisks. On modern systems there
is also often a possibility to enable network booting via PXE.

Depending on the installation media (CD/DVD ROM, USB stick, network boot) you
have chosen you should enable the appropriate boot devices if they are not
already enabled.

Most BIOS/UEFI versions allow you to call up a boot menu on system startup in
which you select from which device the computer should start for the current
session. If this option is available, the BIOS/UEFI usually displays a short
message like "press F12 for boot menu" on system startup. The actual key used
to select this menu varies from system to system; commonly used keys are F12, 
F11 and F8. Choosing a device from this menu does not change the default boot
order of the BIOS/UEFI, i.e. you can start once from a USB stick while having
configured the internal harddisk as the normal primary boot device.

If your BIOS/UEFI does not provide you with a boot menu to do ad-hoc choices of
the current boot device, you will have to change your BIOS/UEFI setup to make
the device from which the debian-installer shall be booted the primary boot
device.

Unfortunately some computers may contain buggy BIOS/UEFI versions. Booting
debian-installer from a USB stick might not work even if there is an
appropriate option in the BIOS/UEFI setup menu and the stick is selected as the
primary boot device. On some of these systems using a USB stick as boot medium
is impossible; others can be tricked into booting from the stick by changing
the device type in the BIOS/UEFI setup from the default "USB harddisk" or "USB
stick" to "USB ZIP" or "USB CDROM". In particular if you use an isohybrid
installation image on a USB stick (see Phần 4.3.1, "Preparing a USB stick using
a hybrid CD/DVD image"), changing the device type to "USB CDROM" helps on some
BIOSes which will not boot from a USB stick in USB harddisk mode. You may need
to configure your BIOS/UEFI to enable "USB legacy support".

If you cannot manipulate the BIOS/UEFI to boot directly from a USB stick you
still have the option of using an ISO copied to the stick. Boot
debian-installer using Phần 4.4, "Chuẩn bị tập tin để khởi động đĩa cứng" and,
after scanning the hard drives for an installer ISO image, select the USB
device and choose an installation image.

3.6.3. Systems with UEFI firmware

UEFI ("Unified Extensible Firmware Interface") is a new kind of system firmware
that is used on many modern systems and is - among other uses - intended to
replace the classic PC BIOS.

Currently most PC systems that use UEFI also have a so-called "Compatibility
Support Module" (CSM) in the firmware, which provides exactly the same
interfaces to an operating system as a classic PC BIOS, so that software
written for the classic PC BIOS can be used unchanged. Nonetheless UEFI is
intended to one day completely replace the old PC BIOS without being fully
backwards-compatible and there are already a lot of systems with UEFI but
without CSM.

On systems with UEFI there are a few things to take into consideration when
installing an operating system. The way the firmware loads an operating system
is fundamentally different between the classic BIOS (or UEFI in CSM mode) and
native UEFI. One major difference is the way the harddisk partitions are
recorded on the harddisk. While the classic BIOS and UEFI in CSM mode use a DOS
partition table, native UEFI uses a different partitioning scheme called "GUID
Partition Table" (GPT). On a single disk, for all practical purposes only one
of the two can be used and in case of a multi-boot setup with different
operating systems on one disk, all of them must therefore use the same type of
partition table. Booting from a disk with GPT is only possible in native UEFI
mode, but using GPT becomes more and more common as hard disk sizes grow,
because the classic DOS partition table cannot address disks larger than about
2 Terabytes while GPT allows for far larger disks. The other major difference
between BIOS (or UEFI in CSM mode) and native UEFI is the location where boot
code is stored and in which format it has to be. This means that different
bootloaders are needed for each system.

The latter becomes important when booting debian-installer on a UEFI system
with CSM because debian-installer checks whether it was started on a BIOS- or
on a native UEFI system and installs the corresponding bootloader. Normally
this simply works but there can be a problem in multi-boot environments. On
some UEFI systems with CSM the default boot mode for removable devices can be
different from what is actually used when booting from hard disk, so when
booting the installer from a USB stick in a different mode from what is used
when booting another already installed operating system from the hard disk, the
wrong bootloader might be installed and the system might be unbootable after
finishing the installation. When choosing the boot device from a firmware boot
menu, some systems offer two separate choices for each device, so that the user
can select whether booting shall happen in CSM or in native UEFI mode.

3.6.4. Secure boot

Another UEFI-related topic is the so-called "secure boot" mechanism. Secure
boot means a function of UEFI implementations that allows the firmware to only
load and execute code that is cryptographically signed with certain keys and
thereby blocking any (potentially malicious) boot code that is unsigned or
signed with unknown keys. In practice the only key accepted by default on most
UEFI systems with secure boot is a key from Microsoft used for signing the
Windows bootloader. Debian includes a "shim" bootloader signed by Microsoft, so
should work correctly on systems with secure boot enabled.

3.6.5. Disabling the Windows "fast boot"/"fast startup" feature

Windows offers a feature (called "fast boot" in Windows 8, "fast startup" in
Windows 10) to cut down system startup time. Technically, when this feature is
enabled, Windows does not do a real shutdown and a real cold boot afterwards
when ordered to shut down, but instead does something resembling a partial
suspend to disk to reduce the "boot" time. As long as Windows is the only
operating system on the machine, this is unproblematic, but it can result in
problems and data loss, when you have a dual boot setup, in which another
operating system accesses the same filesystems as Windows does. In that case
the real state of the filesystem can be different from what Windows believes it
to be after the "boot" and this could cause filesystem corruption upon further
write accesses to the filesystem. Therefore in a dual boot setup, to avoid
filesystem corruption the "fast boot"/"fast startup" feature has to be disabled
within Windows.

Furthermore, the Windows Update mechanism has (sometimes) been known to
automatically re-enable this feature, after it has been previously disabled by
the user. It is suggested to re-check this setting periodically.

It may also be necessary to disable "fast boot" to even allow access to UEFI
setup to choose to boot another operating system or debian-installer. On some
UEFI systems, the firmware will reduce "boot" time by not initialising the
keyboard controller or USB hardware; in these cases, it is necessary to boot
into Windows and disable this feature to allow for a change of boot order.

3.6.6. Vấn đề phần cứng cần theo dõi

Hỗ trợ BIOS và bàn phím kiểu USB. If you have no PS/2-style keyboard, but only
a USB model, on some very old PCs you may need to enable legacy keyboard
emulation in your BIOS setup to be able to use your keyboard in the bootloader
menu, but this is not an issue for modern systems. If your keyboard does not
work in the bootloader menu, consult your mainboard manual and look in the BIOS
for "Legacy keyboard emulation" or "USB keyboard support" options.

Chương 4. Lấy vật chứa cài đặt hệ thống

Mục lục

4.1. Official Debian GNU/Linux installation images
4.2. Tải tập tin xuống máy nhân bản Debian

    4.2.1. Where to Find Installation Files

4.3. Chuẩn bị tập tin để khởi động thanh bộ nhớ USB

    4.3.1. Preparing a USB stick using a hybrid CD/DVD image
    4.3.2. Chép thủ công các tập tin vào thanh USB
    4.3.3. Chép thủ công các tập tin vào thanh USB -- theo cách uyển chuyển

4.4. Chuẩn bị tập tin để khởi động đĩa cứng

    4.4.1. Hard disk installer booting from Linux using GRUB
    4.4.2. Hard disk installer booting from DOS using loadlin

4.5. Chuẩn bị tập tin để khởi động qua mạng TFTP

    4.5.1. Thiết lập trình phục vụ DHCP
    4.5.2. Thiết lập trình phục vụ BOOTP
    4.5.3. Bật chạy trình phục vụ TFTP
    4.5.4. Xác định vị trí của ảnh TFTP

4.6. Cài đặt tự động

    4.6.1. Tự động cài đặt dùng trình cài đặt Debian

4.7. Verifying the integrity of installation files

4.1. Official Debian GNU/Linux installation images

By far the easiest way to install Debian GNU/Linux is from a set of official
Debian installation images. You can buy a set of CDs/DVDs from a vendor (see
the CD vendors page). You may also download the installation images from a
Debian mirror and make your own set, if you have a fast network connection and
a CD/DVD burner (see the Debian CD/DVD page and Debian CD FAQ for detailed
instructions). If you have such optical installation media, and they are
bootable on your machine, which is the case on all modern PCs, you can skip
right to Chương 5, Khởi động Hệ thống Cài đặt. Much effort has been expended to
ensure the most-used files are on the first CD and DVD image, so that a basic
desktop installation can be done with only the first DVD or - to a limited
extent - even with only the first CD image.

As CDs have a rather limited capacity by today's standards, not all graphical
desktop environments are installable with only the first CD; for some desktop
environments a CD installation requires either network connectivity during the
installation to download the remaining files or additional CDs.

Also, keep in mind: if the installation media you are using don't contain some
packages you need, you can always install those packages afterwards from your
running new Debian system (after the installation has finished). If you need to
know on which installation image to find a specific package, visit https://
cdimage-search.debian.org/.

If your machine doesn't support booting from optical media (only relevant on
very old PC systems), but you do have a set of CD/DVD, you can use an
alternative strategy such as hard disk, usb stick, net boot, or manually
loading the kernel from the disc to initially boot the system installer. The
files you need for booting by another means are also on the disc; the Debian
network archive and folder organization on the disc are identical. So when
archive file paths are given below for particular files you need for booting,
look for those files in the same directories and subdirectories on your
installation media.

Once the installer is booted, it will be able to obtain all the other files it
needs from the disc.

If you don't have an installation media set, then you will need to download the
installer system files and place them on the hard disk or usb stick or a
connected computer so they can be used to boot the installer.

4.2. Tải tập tin xuống máy nhân bản Debian

Để tìm máy nhân bản gần nhất (cũng nên là nhanh nhất), xem danh sách máy nhân
bản Debian.

4.2.1. Where to Find Installation Files

Various installation files can be found on each Debian mirror in the directory
debian/dists/bullseye/main/installer-amd64/current/images/ -- the MANIFEST
lists each image and its purpose.

4.3. Chuẩn bị tập tin để khởi động thanh bộ nhớ USB

To prepare the USB stick, we recommend to use a system where GNU/Linux is
already running and where USB is supported. With current GNU/Linux systems the
USB stick should be automatically recognized when you insert it. If it is not
you should check that the usb-storage kernel module is loaded. When the USB
stick is inserted, it will be mapped to a device named /dev/sdX, where the "X"
is a letter in the range a-z. You should be able to see to which device the USB
stick was mapped by running the command lsblk before and after inserting it.
(The output of dmesg (as root) is another possible method for that.) To write
to your stick, you may have to turn off its write protection switch.

Cảnh báo

The procedures described in this section will destroy anything already on the
device! Make very sure that you use the correct device name for your USB stick.
If you use the wrong device the result could be that all information on, for
example, a hard disk is lost.

4.3.1. Preparing a USB stick using a hybrid CD/DVD image

Debian installation images for this architecture are created using the 
isohybrid technology; that means they can be written directly to a USB stick,
which is a very easy way to make an installation media. Simply choose an image
(such as the netinst, CD or DVD-1) that will fit on your USB stick. See
Phần 4.1, "Official Debian GNU/Linux installation images" to get an
installation image.

Một cách khác, đối với thanh USB quá nhỏ, chỉ có vài megabyte, bạn có thể tải
về ảnh mini.iso từ thư mục netboot (tại vị trí được đề cập đến trong
Phần 4.2.1, "Where to Find Installation Files").

The installation image you choose should be written directly to the USB stick,
overwriting its current contents. For example, when using an existing GNU/Linux
system, the image file can be written to a USB stick as follows, after having
made sure that the stick is unmounted:

# cp debian.iso /dev/sdX
# sync

Information about how to do this on other operating systems can be found in the
Debian CD FAQ.

Quan trọng

The image must be written to the whole-disk device and not a partition, e.g. /
dev/sdb and not /dev/sdb1. Do not use tools like unetbootin which alter the
image.

Quan trọng

Simply writing the installation image to USB like this should work fine for
most users. The other options below are more complex, mainly for people with
specialised needs.

The hybrid image on the stick does not occupy all the storage space, so it may
be worth considering using the free space to hold firmware files or packages or
any other files of your choice. This could be useful if you have only one stick
or just want to keep everything you need on one device.

To do so, use cfdisk or any other partitioning tool to create an additional
partition on the stick. Then create a (FAT) filesystem on the partition, mount
it and copy or unpack the firmware onto it, for example with:

# mkdosfs -n FIRMWARE /dev/sdX3
# mount /dev/sdX3 /mnt
# cd /mnt
# tar zxvf /path/to/firmware.tar.gz
# cd /
# umount /mnt

Take care that you use the correct device name for your USB stick. The mkdosfs
command is contained in the dosfstools Debian package.

Ghi chú

If you have chosen the mini.iso to be written to the USB stick, the second
partition doesn't have to be created, as - very nicely - it will already be
present. Unplugging and replugging the USB stick should make the two partitions
visible.

4.3.2. Chép thủ công các tập tin vào thanh USB

Prior to isohybrid technology being used for Debian installation images, the
methods documented in the chapters below were used to prepare media for booting
from USB devices. These have been superseded by the technique in Phần 4.3.1,
"Preparing a USB stick using a hybrid CD/DVD image", but have been left here
for educational and historical purposes and in case they are useful to some
user.

An alternative to the method described in Phần 4.3.1, "Preparing a USB stick
using a hybrid CD/DVD image" is to manually copy the installer files, and also
an installation image to the stick. Note that the USB stick should be at least
1 GB in size (smaller setups are possible using the files from netboot,
following Phần 4.3.3, "Chép thủ công các tập tin vào thanh USB -- theo cách
uyển chuyển").

There is an all-in-one file hd-media/boot.img.gz which contains all the
installer files (including the kernel) as well as syslinux and its
configuration file.

Ghi chú

Lưu ý rằng, dù tiện lợi, phương pháp này vẫn có một nhược điểm lớn: kích cỡ
luận lý của khối tin sẽ bị hạn chế thành 1 GB, ngay cả khi thanh USB có dung
lượng lớn hơn. Bạn sẽ phải phân vùng lại thanh USB và tạo hệ thống tập tin mới
để phục hồi lại dung lượng đầy đủ nếu bạn muốn sử dụng nó cho mục đích khác.

Simply extract this image directly to your USB stick:

# zcat boot.img.gz > /dev/sdX

After that, mount the USB memory stick (mount /dev/sdX /mnt), which will now
have a FAT filesystem on it, and copy a Debian ISO image (netinst or full CD;
see Phần 4.1, "Official Debian GNU/Linux installation images") to it. Unmount
the stick (umount /mnt) and you are done.

4.3.3. Chép thủ công các tập tin vào thanh USB -- theo cách uyển chuyển

If you like more flexibility or just want to know what's going on, you should
use the following method to put the files on your stick. One advantage of using
this method is that -- if the capacity of your USB stick is large enough -- you
have the option of copying any ISO image, even a DVD image, to it.

4.3.3.1. Partitioning and adding a boot loader

Tiết đoạn này diễn tả phương pháp thiết lập thanh USB để dùng chỉ phân vùng thứ
nhất, thay vì toàn bộ thiết bị.

In order to start the kernel after booting from the USB stick, we will put a
boot loader on the stick. Although any boot loader should work, it's convenient
to use syslinux, since it uses a FAT16 partition and can be reconfigured by
just editing a text file. Any operating system which supports the FAT file
system can be used to make changes to the configuration of the boot loader.

First, you need to install the syslinux and mtools packages on your system.

Ghi chú

Since most USB sticks come pre-configured with a single FAT16 partition, you
probably won't have to repartition or reformat the stick. If you have to do
that anyway, use cfdisk or any other partitioning tool to create a FAT16
partition now^[3], and then install an MBR using:

# cat /usr/lib/syslinux/mbr/mbr.bin
>/dev/sdX

Now create the filesystem using:

# mkdosfs /dev/sdX1

Take care that you use the correct device name for your USB stick. The mkdosfs
command is contained in the dosfstools Debian package.

Having a correctly partitioned USB stick (now), you need to put syslinux on the
FAT16 partition with:

# syslinux /dev/sdX1

Again, take care that you use the correct device name. The partition must not
be mounted when starting syslinux. This procedure writes a boot sector to the
partition and creates the file ldlinux.sys which contains the boot loader code.

4.3.3.2. Adding the installer files

There are two different installation variants to choose here: The hd-media
variant needs an installation ISO file on the stick, to load installer modules
and the base system from. The netboot installer however will load all that from
a Debian mirror.

According to your choice, you have to download some installer files from the
hd-media or netboot subdirectory of debian/dists/bullseye/main/installer-amd64/
current/images/ on any Debian mirror:

  • vmlinuz or linux (kernel binary)

  • initrd.gz (initial ramdisk image)

You can choose between either the text-based version of the installer (the
files can be found directly in hd-media or netboot) or the graphical version
(look in the respective gtk subdirectories).

Then mount the partition (mount /dev/sdX1 /mnt) and copy the downloaded files
to the root directory of the stick.

Next you should create a text file named syslinux.cfg in the root directory of
the stick as configuration file for syslinux, which at a bare minimum should
contain the following line:

default vmlinuz initrd=initrd.gz

Change the name of the kernel binary to "linux" if you used files from netboot.

For the graphical installer (from gtk) you should add vga=788 at the end of the
line. Other parameters can be appended as desired.

To enable the boot prompt to permit further parameter appending, add a prompt 1
line.

If you used files from hd-media, you should now copy the ISO file of a Debian
installation image onto the stick. (For the netboot variant this is not
needed.)

You can use either a netinst or a full CD/DVD image (see Phần 4.1, "Official
Debian GNU/Linux installation images"). Be sure to select one that fits on your
stick. Note that the "netboot mini.iso" image is not usable for this purpose.

When you are done, unmount the USB memory stick (umount /mnt).

4.4. Chuẩn bị tập tin để khởi động đĩa cứng

The installer may be booted using boot files placed on an existing hard drive
partition, either launched from another operating system or by invoking a boot
loader directly from the BIOS. On modern UEFI systems, the kernel may be booted
directly from the UEFI partition without the need of a boot loader.

A full, "pure network" installation can be achieved using this technique. This
avoids all hassles of removable media, like finding and burning CD/DVD images.

4.4.1. Hard disk installer booting from Linux using GRUB

This section explains how to add to or even replace an existing linux
installation using GRUB.

At boot time, GRUB supports loading in memory not only the kernel, but also a
disk image. This RAM disk can be used as the root file-system by the kernel.

Copy the following files from the Debian archives to a convenient location on
your hard drive, for instance to /boot/newinstall/.

  • vmlinuz (tập tin nhị phân của hạt nhân)

  • initrd.gz (ảnh đĩa RAM)

Nếu bạn định dùng đĩa cứng chỉ để khởi động, rồi tải về mọi thứ qua mạng, bạn
nên tải về tập tin netboot/debian-installer/amd64/initrd.gz và hạt nhân tương
ứng netboot/debian-installer/amd64/linux. Việc này sẽ cho bạn khả năng phân
vùng lại đĩa cứng nơi bạn khởi động bộ cài đặt, dù bạn nên làm như thế một cách
cẩn thận.

Alternatively, if you intend to keep an existing partition on the hard drive
unchanged during the install, you can download the hd-media/initrd.gz file and
its kernel hd-media/vmlinuz, as well as copy an installation image to the hard
drive (make sure the file is named ending in .iso). The installer can then boot
from the hard drive and install from the installation image, without needing
the network.

Cuối cùng, để cấu hình bộ nạp khởi động, hãy tiếp tục tới Phần 5.1.5, "Booting
from Linux using GRUB".

4.4.2. Hard disk installer booting from DOS using loadlin

Tiết đoạn này diễn tả cách chuẩn bị đĩa cứng để khởi động trình cài đặt từ DOS,
dùng loadlin.

Copy the following directories from a Debian installation image to c:\.

  • /install.amd (bản nhị phân hạt nhân và ảnh đĩa RAM)

  • /tools (công cụ loadlin)

4.5. Chuẩn bị tập tin để khởi động qua mạng TFTP

Nếu máy tính của bạn có kết nối đến mạng cục bộ, bạn có thể có khả năng khởi
động qua mạng từ máy khác bằng TFTP. Nếu bạn định khởi động hệ thống cài đặt từ
máy khác, cần phải để các tập tin khởi động vào vị trí dứt khoát trên máy đó,
cũng cấu hình máy đó để hỗ trợ khả năng khởi động máy tính riêng của bạn.

Bạn cần phải thiết lập một trình phục vụ TFTP, và cho nhiều máy cũng cần một
trình phục vụ DHCP, hay trình phục vụ BOOTP.

BOOTP là một giao thức IP báo máy tính biết địa chỉ IP của chính nó và nơi trên
mạng có thể lấy ảnh khởi động.

Giao thức truyền tập tin không đáng kể (TFTP) được dùng để phục vụ ảnh khởi
động cho ứng dụng khách. Về lý thuyết có thể sử dụng bất kỳ trình phục vụ nào
trên bất kỳ nền tảng nào mà thực hiện những giao thức này. Những lời thí dụ
trong tiết đoạn này sẽ cung cấp lệnh riêng cho hệ điều hành SunOS 4.x, SunOS
5.x (cũng tên Solaris), và GNU/Linux.

Ghi chú

Đối vơi một trình phục vụ Debian GNU/Linux, chúng tôi khuyến khích tftpd-hpa.
Nó được tạo bởi cùng một tác giả với bộ nạp khởi động syslinux thì ít nhất có
thể gây ra vấn đề. Một sự chọn tốt khác là atftpd.

4.5.1. Thiết lập trình phục vụ DHCP

Một trình phục vụ DHCP phần mềm tự do là dhcpd ISC. Đối với Debian GNU/Linux,
gói isc-dhcp-server khuyến khích. Đây là một tập tin cấu hình mẫu cho nó (xem /
etc/dhcp/dhcpd.conf):

option domain-name "mẫu.com";
option domain-name-servers ns1.mẫu.com;
option subnet-mask 255.255.255.0;
default-lease-time 600;
max-lease-time 7200;
server-name "tên_máy_phục_vụ";

subnet 192.168.1.0 netmask 255.255.255.0 {
  range 192.168.1.200 192.168.1.253;
  option routers 192.168.1.1;
}

host tên_máy_khách {
  filename "/tftpboot.img";
  server-name "tên_máy_phục_vụ";
  next-server tên_máy_phục_vụ;
  hardware ethernet 01:23:45:67:89:AB;
  fixed-address 192.168.1.90;
}

[option                 tùy chọn
domain-name             tên miền
domain name servers     các máy phục vụ tên miền
subnet-mask             mặt nạ mạng phụ
default-lease-time              thời gian thuê mặc định
max-lease-time  thời gian thuê tối đa
server-name             tên máy phục vụ
subnet                  mạng phụ
netmask                 mặt nạ mạng
range                   phạm vị
routers                 các bộ định tuyến
host                            máy (hỗ trợ)
filename                        tên tập tin
hardware ethernet       Ethernet phần cứng
fixed-address           địa chỉ cố định]

Trong lời thí dụ này, có một máy phục vụ tên tên_máy_phục_vụ mà làm mọi công
việc của trình phục vụ DHCP, trình phục vụ TFTP và cổng ra mạng. Bình thường,
bạn sẽ cần phải thay đổi những tùy chọn tên miền (domain-name), cũng như tên
máy phục vụ (server-name) và địa chỉ phần cứng (hardware address) của máy
khách. Tùy chọn filename (tên tập tin) nên là tên tập tin sẽ được lấy thông qua
TFTP.

Sau khi bạn chỉnh sửa tập tin cấu hình của trình nền dhcpd, hãy khởi chạy lại
nó bằng lệnh /etc/init.d/dhcpd3-server restart.

4.5.1.1. Bật khả năng khởi động PXE trong cấu hình DHCP

Đây là một mẫu dhcp.conf khác, dùng phương pháp môi trường thực hiện tiền khởi
động (PXE) của giao thức TFTP. [Chú thích đã được dịch trong mẫu này.]

option domain-name "mẫu.com";

default-lease-time 600;
max-lease-time 7200;

allow booting;
allow bootp;

# Cần phải sửa đổi đoạn văn này để thích hợp với trường hợp của bạn
subnet 192.168.1.0 netmask 255.255.255.0 {
  range 192.168.1.200 192.168.1.253;
  option broadcast-address 192.168.1.255;
# địa chỉ cổng ra mà có thể là khác
# (v.d. truy cập Mạng)
  option routers 192.168.1.1;
# xác định DNS cần dùng
  option domain-name-servers 192.168.1.3;
}

group {
 next-server 192.168.1.3;
 host tftpclient {
# địa chỉ phần cứng của máy khách TFTP
  hardware ethernet  00:10:DC:27:6C:15;
  filename "pxelinux.0";
 }
}

Ghi chú rằng để khởi động cách PXE, tên tập tin khách pxelinux.0 là bộ nạp khởi
động, không phải là ảnh hạt nhân (xem Phần 4.5.4, "Xác định vị trí của ảnh
TFTP" bên dưới).

If your machine uses UEFI to boot, you will have to specify a boot loader
appropriate for UEFI machines, for example

group {
  next-server 192.168.1.3;
  host tftpclient {
# tftp client hardware address
  hardware ethernet  00:10:DC:27:6C:15;
  filename "debian-installer/amd64/bootnetx64.efi";
 }
}

4.5.2. Thiết lập trình phục vụ BOOTP

Có hai trình phục vụ BOOTP sẵn sàng cho GNU/Linux. Trình thứ nhất là bootpd
CMU. Trình thứ hai thật là một trình phục vụ DHCP: dhcpd ISC. Trong Debian GNU/
Linux hai trình này nằm trong góibootp và isc-dhcp-server riêng từng cái.

Để sử dụng bootpd CMU, trước tiên bạn cần phải bỏ ghi chú (hay thêm) dòng tương
ứng trong trong tập tin cấu hình /etc/inetd.conf. Dưới hệ điều hành Debian GNU/
Linux, bạn có khả năng chạy lệnh update-inetd --enable bootps, rồi /etc/init.d/
inetd reload để làm như thế. Trong trường hợp trình phục vụ BOOTP của bạn không
chạy Debian được, dòng đó nên hình như:

bootps  dgram  udp  wait  root  /usr/sbin/bootpd  bootpd -i -t 120

Sau đó, bạn cần phải tạo một tập tin /etc/bootptab. Nó có cùng một dạng thức
thường và khó hiểu với những tập tin printcap, termcap và disktab của BSD. Xem
trang hướng dẫn (man) bootptab để tìm thông tin thêm. Đối với tiến trình bootpd
, bạn cần phải biết địa chỉ phần cứng (địa chỉ MAC) của máy khách. Đây là một
tập tin /etc/bootptab thí dụ :

client:\
  hd=/tftpboot:\
  bf=tftpboot.img:\
  ip=192.168.1.90:\
  sm=255.255.255.0:\
  sa=192.168.1.1:\
  ha=0123456789AB:

Bạn cần phải thay đổi ít nhất tùy chọn "ha", mà xác định địa chỉ phần cứng của
máy khách. Tùy chọn "bf" xác định tập tin máy khách cần lấy bằng TFTP; xem
Phần 4.5.4, "Xác định vị trí của ảnh TFTP" để tìm chi tiết.

Mặt khác, tiến trình thiết lập BOOTP bằng dhcpd ISC vẫn rất dễ dàng, vì nó thấy
các ứng dụng khách BOOTP là ứng dụng khách DHCP kiểu hơi đặc biệt. Một số kiến
trúc nào đó yêu cầu một cấu hình phức tạp để khởi động ứng dụng khách thông qua
BOOTP. Nếu máy của bạn có kiến trúc như thế, hãy đọc tiết đoạn Phần 4.5.1,
"Thiết lập trình phục vụ DHCP". Khác thì rất có thể là bạn đơn giản cần thêm
chỉ thị allow bootp (cho phép BOOTP) vào khối cấu hình dành cho mạng phụ chứa
máy chạy ứng dụng khách đó trong tập tin /etc/dhcp/dhcpd.conf, sau đó khởi chạy
lại trình nền dhcpd bằng câu lệnh /etc/init.d/isc-dhcp-server restart.

4.5.3. Bật chạy trình phục vụ TFTP

Để chuẩn bị trình phục vụ TFTP, trước tiên bạn nên đảm bảo rằng tftpd được hiệu
lực.

Trong trường hợp của tftpd-hpa, có hai phương pháp chạy dịch vụ. Nó có thể được
khởi chạy theo yêu cầu bởi trình nền inetd của hệ thống, hoặc nó có thể được
thiết lập để chạy như là một trình nền độc lập. Phương pháp này được chọn khi
gói được cài đặt, và lúc nào cũng có thể được thay đổi bằng cách cấu hình lại
gói đó.

Ghi chú

Trong quá khứ, máy phục vụ TFTP đã dùng /tftpboot như là thư mục từ đó cần phục
vụ ảnh. Tuy nhiên, các gói Debian GNU/Linux có thể sử dụng thư mục khác để tuân
theo Tiêu Chuẩn Phân Cấp Hệ Thống Tập Tin (FHS). Chẳng hạn, tftpd-hpa theo mặc
định sử dụng thư mục /srv/tftp. Có lẽ bạn cần phải điều chỉnh những mẫu cấu
hình trong phần này một cách tương ứng.

Tất cả các sự chọn in.tftpd khác sẵn sàng trong Debian thì nên ghi lưu các yêu
cầu TFTP vào sổ theo dõi hệ thống theo mặc định. Một số điều cũng hỗ trợ một
đối số -v để tăng mức chi tiết của kết xuất. Khuyên bạn kiểm tra các thông điệp
ghi lưu này trong trường hợp gặp vấn đề khởi động, vì sổ theo dõi là một điểm
bắt đầu hữu ích để chẩn đoán nguyên nhân của lỗi.

4.5.4. Xác định vị trí của ảnh TFTP

Sau đó, hãy để ảnh khởi động TFTP cần thiết (như được tìm trong Phần 4.2.1,
"Where to Find Installation Files") vào thư mục ảnh khởi động của trình nền 
tftpd. Có lẽ bạn cần phải tạo một liên kết từ tập tin đó đến tập tin mà tftpd
sẽ sử dụng để khởi động máy khách riêng. Tiếc là tên tập tin được quyết định
bởi máy khách TFTP, và chưa có tiêu chuẩn mạnh nào.

For PXE booting, everything you should need is set up in the netboot/
netboot.tar.gz tarball. Simply extract this tarball into the tftpd boot image
directory. Make sure your dhcp server is configured to pass pxelinux.0 to tftpd
as the filename to boot. For UEFI machines, you will need to pass an
appropriate EFI boot image name (such as /debian-installer/amd64/
bootnetx64.efi).

4.6. Cài đặt tự động

Để cài đặt vào nhiều máy tính, có thể chạy việc cài đặt đầy đủ tự động. Những
gói Debian dự định nhằm mục đích này bao gồm fai (mà có thể dùng một trình phục
vụ cài đặt), và trình cài đặt Debian chính nó. Xem trang chủ FAI để tìm thông
tin chi tiết.

4.6.1. Tự động cài đặt dùng trình cài đặt Debian

Trình cài đặt Debian hỗ trợ tự động hoá việc cài đặt thông qua tập tin cấu hình
sẵn. Tập tin cấu hình sẵn có thể được nạp từ mạng hoặc từ vật chứa rời, cũng
cung cấp trả lời cho câu được hỏi trong khi cài đặt.

Tài liệu hướng dẫn đầy đủ về phương pháp chèn trước, gồm một lời thí dụ hữu ích
mà bạn có thể hiệu chỉnh, nằm trong Phụ lục B, Tự động hoá việc cài đặt bằng
chèn sẵn.

4.7. Verifying the integrity of installation files

You can verify the integrity of downloaded files against checksums provided in
SHA256SUMS or SHA512SUMS files on Debian mirrors. You can find them in the same
places as the installation images itself. Visit the following locations:

  • checksum files for CD images,

  • checksum files for DVD images,

  • checksum files for BD images,

  • checksum files for other installation files.

To compute the checksum of a downloaded installation file, use

sha256sum filename.iso

respective

sha512sum filename.iso

and then compare the shown checksum against the corresponding one in the
SHA256SUMS respective SHA512SUMS file.

The Debian CD FAQ has more useful information on this topic (such as the script
check_debian_iso, to semi-automate above procedure), as well as instructions,
how to verify the integrity of the above checksum files themselves.


━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

^[3] Don't forget to activate the "bootable" flag.

Chương 5. Khởi động Hệ thống Cài đặt

Mục lục

5.1. Khởi động trình cài đặt trên 64-bit PC

    5.1.1. Khởi động từ thanh bộ nhớ USB
    5.1.2. Booting from optical disc (CD/DVD)
    5.1.3. Khởi động từ Windows
    5.1.4. Booting from DOS using loadlin
    5.1.5. Booting from Linux using GRUB
    5.1.6. Khởi động bằng TFTP
    5.1.7. Màn hình khởi động
    5.1.8. The Graphical Installer

5.2. Khả năng truy cập

    5.2.1. Installer front-end
    5.2.2. Thiết bị chữ nổi USB
    5.2.3. Thiết bị chữ nổi nối tiếp
    5.2.4. Phần mềm tổng hợp giọng nói
    5.2.5. Phần cứng tổng hợp giọng nói
    5.2.6. Thiết bị bảng
    5.2.7. Sắc thái cao tương phản
    5.2.8. Zoom
    5.2.9. Expert install, rescue mode, automated install
    5.2.10. Accessibility of the installed system

5.3. Tham số khởi động

    5.3.1. Boot console
    5.3.2. Tham số trình cài đặt Debian
    5.3.3. Dùng tham số khởi động để trả lời câu hỏi
    5.3.4. Gửi tham số cho mô-đun hạt nhân
    5.3.5. Cấm mô-đun hạt nhân

5.4. Giải đáp thắc mắc trong tiến trình cài đặt

    5.4.1. Reliability of optical media
    5.4.2. Cấu hình khởi động
    5.4.3. Phần mềm tổng hợp giọng nói
    5.4.4. Vấn đề cài đặt 64-bit PC thường
    5.4.5. Giải thích thông điệp khởi chạy hạt nhân
    5.4.6. Thông báo vấn đề cài đặt
    5.4.7. Đệ trình báo cáo cài đặt

5.1. Khởi động trình cài đặt trên 64-bit PC

Cảnh báo

Hệ thống của bạn cũng có hệ điều hành khác bạn muốn giữ lại (khởi động đôi) thì
bạn nên kiểm tra xem mỗi hệ điều hành đã được tắt hoàn toàn trước khi bạn khởi
chạy tiến trình cài đặt. Cài đặt hệ điều hành trong khi hệ điều hành khác ngủ
động thì có thể gây ra dữ liệu bị mất hay bị hỏng trong hệ đó. (Sau đó thì có
thể gặp lỗi khi khởi động lại.)

Ghi chú

Để tìm thông tin thêm về cách khởi động bộ cài đặt đồ họa, xem Phần 5.1.8, "The
Graphical Installer".

5.1.1. Khởi động từ thanh bộ nhớ USB

If your computer will boot from USB, this will probably be the easiest route
for installation. Assuming you have prepared everything from Phần 3.6.2, "Chọn
thiết bị khởi động" and Phần 4.3, "Chuẩn bị tập tin để khởi động thanh bộ nhớ
USB", just plug your USB stick into some free USB connector and reboot the
computer. The system should boot up, and unless you have used the flexible way
to build the stick and not enabled it, you should be presented with a graphical
boot menu (on hardware that supports it). Here you can select various installer
options, or just hit Enter.

5.1.2. Booting from optical disc (CD/DVD)

If you have a set of optical discs, and your machine supports booting directly
off those, great! Simply configure your system for booting off an optical disc
as described in Phần 3.6.2, "Chọn thiết bị khởi động", insert the disc, reboot,
and proceed to the next chapter.

Note that certain optical drives may require special drivers, and thus be
inaccessible in the early installation stages. If it turns out the standard way
of booting off an optical disc doesn't work for your hardware, revisit this
chapter and read about alternate kernels and installation methods which may
work for you.

Even if you cannot boot from optical disc, you can probably install the Debian
system components and any packages you want from such disc. Simply boot using a
different medium and when it's time to install the operating system, base
system, and any additional packages, point the installation system at the
optical drive.

Nếu bạn gặp khó khăn trong việc khởi động, xem Phần 5.4, "Giải đáp thắc
mắc trong tiến trình cài đặt".

5.1.3. Khởi động từ Windows

Để bắt đầu trình cài đặt từ Windows, bạn có thể

  • obtain installation media as described in Phần 4.1, "Official Debian GNU/
    Linux installation images" or Phần 4.3, "Chuẩn bị tập tin để khởi động
    thanh bộ nhớ USB" or

  • tải bộ cài đặt độc lập trong Windows, có tại tools/win32-loader/stable/
    win32-loader.exe trên các gương Debian.

If you use optical installation media, a pre-installation program should be
launched automatically when you insert the disc. In case Windows does not start
it automatically, or if you are using a USB memory stick, you can run it
manually by accessing the device and executing setup.exe.

Một khi khởi chạy chương trình đó, vài câu mở đầu sẽ được hỏi để chuẩn bị hệ
thống để khởi động lại vào tiến trình cài đặt Debian GNU/Linux.

5.1.4. Booting from DOS using loadlin

Khởi động vào DOS (không phải Windows). Chẳng hạn, bạn có thể khởi động từ một
đĩa phục hồi hay địa chẩn đoán.

Nếu bạn có truy cập đến đĩa CD cài đặt thì chuyển đổi ổ hiện thời sang ổ đĩa
CD-ROM, v.d.

d:

không thì kiểm tra lại bạn đã chuẩn bị đĩa cứng như diễn tả trong Phần 4.4.2,
"Hard disk installer booting from DOS using loadlin", sau đó chuyển đổi ổ hiện
thời nếu cần thiết.

Vào thư mục con của mủi vị đã chọn, v.d.

cd \install.amd

Thích sử dụng trình cài đặt đồ họa hơn thì vào thư mục con gtk.

cd gtk

Sau đó, thực hiện tập tin install.bat. Việc này nạp hạt nhân và khởi chạy hệ
thống cài đặt.

5.1.5. Booting from Linux using GRUB

Để khởi động trình cài đặt từ đĩa cứng, trước tiên bạn cần phải tải về và để
các tập tin cần thiết, như được diễn tả trong Phần 4.4, "Chuẩn bị tập tin để
khởi động đĩa cứng".

For GRUB2, you will need to configure two essential things in /boot/grub/
grub.cfg:

  • to load the initrd.gz installer at boot time;

  • have the vmlinuz kernel use a RAM disk as its root partition.

An entry for the installer would be for example:

menuentry 'New Install' {
insmod part_msdos
insmod ext2
set root='(hd0,msdos1)'
linux /boot/newinstall/vmlinuz
initrd /boot/newinstall/initrd.gz
}

5.1.6. Khởi động bằng TFTP

Booting from the network requires that you have a network connection and a TFTP
network boot server (and probably also a DHCP, RARP, or BOOTP server for
automatic network configuration).

The server-side setup to support network booting is described in Phần 4.5,
"Chuẩn bị tập tin để khởi động qua mạng TFTP".

Có vài cách khác nhau để khởi động qua TFTP trên i386.

5.1.6.1. NIC hay bo mạch chủ có hỗ trợ PXE

It could be that your Network Interface Card or Motherboard provides PXE boot
functionality. This is a Intel (tm) re-implementation of TFTP boot. If so, you
may be able to configure your BIOS/UEFI to boot from the network.

5.1.6.2. NIC với BootROM mạng

Có lẽ thẻ giao diện mạng (NIC) của bạn cung cấp chức năng khởi động qua TFTP.

5.1.6.3. Etherboot

Dự án Etherboot cung cấp đĩa mềm khởi động, ngay cả bộ nhớ ROM khởi động, mà
khởi động được qua TFTP.

5.1.7. Màn hình khởi động

When the installer boots, you should be presented with a friendly graphical
screen showing the Debian logo and a menu:

Debian GNU/Linux installer boot menu

Graphical install
Install
Advanced options                            >
Accessible dark contrast installer menu     >
Help
Install with speech synthesis

Ghi chú

This graphical screen will look very slightly different depending on how your
computer has booted (BIOS or UEFI), but the same options will be shown.

Depending on the installation method you are using, the "Graphical install"
option may not be available. Bi-arch images additionally have a 64 bit variant
for each install option, right below it, thus almost doubling the number of
options.

For a normal installation, select either the "Graphical install" or the "
Install" entry -- using either the arrow keys on your keyboard or by typing the
first (highlighted) letter -- and press Enter to boot the installer. The "
Graphical install" entry is already selected by default.

Mục nhập "Tùy chọn Cấp cao" cho truy cập đến một trình đơn thứ hai mà cho phép
khởi động trình cài đặt trong chế độ cấp cao, trong chế độ cứu và để tự động
cài đặt.

If you wish or need to add any boot parameters for either the installer or the
kernel, press Tab (BIOS boot), or e then down arrow three times then end (UEFI
boot). This will bring the boot command for the selected menu entry and allow
you to edit it to suit your needs. Note that the keyboard layout at this point
is still QWERTY. The help screens (see below) list some common possible
options. Press Enter (BIOS boot) or F10 (UEFI boot) to boot the installer with
your options; pressing Esc will return you to the boot menu and undo any
changes you made.

Choosing the "Help" entry will result in the first help screen being displayed
which gives an overview of all available help screens. To return to the boot
menu after the help screens have been displayed, type "menu" at the boot prompt
and press Enter. All help screens have a boot prompt at which the boot command
can be typed:

Press F1 for the help index, or ENTER to boot:

At this boot prompt you can either just press Enter to boot the installer with
default options or enter a specific boot command and, optionally, boot
parameters. A number of boot parameters which might be useful can be found on
the various help screens. If you do add any parameters to the boot command
line, be sure to first type the boot method (the default is install) and a
space before the first parameter (e.g., install fb=false).

Ghi chú

Giả sử bàn phím có một bố trí tiếng Anh Mỹ mặc định vào thời điểm đó. Có nghĩa
là nếu bàn phím của bạn dùng một bố trí khác (đặc trưng cho ngôn ngữ, v.d.
tiếng Việt) thì các ký tự xuất hiện trên màn hình có thể khác với ký tự mong
đợi khi bạn gõ tham số. Bách kho trực tuyến tự do Wikipedia cung cấp một giản
đồ của bố trí bàn phím tiếng Anh Mỹ đến đó bạn có thể tham chiếu để tìm những
phím đúng cần gõ.

Ghi chú

Nếu bạn đang sử dụng một hệ thống đã cấu hình BIOS để dùng bàn giao tiếp nối
tiếp, thì có lẽ bạn không thấy được màn hình giới thiệu đồ họa đầu tiên một khi
khởi động trình cài đặt; có lẽ bạn ngay cả không thấy được trình đơn khởi động.
Trường hợp này cũng có thể xảy ra nếu bạn đang cài đặt hệ thống qua một thiết
bị quản lý từ xa mà cung cấp một giao diện văn bản vào bàn giao tiếp VGA. Các
thiết bị như vậy bao gồm bàn giao tiếp văn bản của "integrated Lights Out"
(iLO) của công ty Compaq, và "Integrated Remote Assistant" (IRA) của công ty
HP.

Để đi vòng màn hình khởi động đồ họa, bạn có thể hoặc bấm phím Esc để thấy một
dấu nhắc khởi động kiểu văn bản, hoặc bấm phím "H" rồi Enter để chọn tùy chọn "
Trợ giúp" được diễn tả trên. Sau đó thì các cú nhấn phím của bạn nên xuất hiện
phía sau dấu nhắc. Để ngăn cản trình cài đặt sử dụng vùng đệm khung cho phần
còn lại của tiến trình cài đặt, bạn cũng cần phải thêm tham số fb=false vào dấu
nhắc khởi động, như được diễn tả trong đoạn văn trợ giúp.

5.1.8. The Graphical Installer

The graphical version of the installer is only available for a limited number
of architectures, including 64-bit PC. The functionality of the graphical
installer is essentially the same as that of the text-based installer as it
basically uses the same programs, but with a different frontend.

Although the functionality is identical, the graphical installer still has a
few significant advantages. The main advantage is that it supports more
languages, namely those that use a character set that cannot be displayed with
the text-based "newt" frontend. It also has a few usability advantages such as
the option to use a mouse, and in some cases several questions can be displayed
on a single screen.

The graphical installer is available with all CD/DVD images and with the
hd-media installation method. To boot the graphical installer simply select the
relevant option from the boot menu. Expert and rescue mode for the graphical
installer can be selected from the "Advanced options" menu. The previously used
boot methods installgui, expertgui and rescuegui can still be used from the
boot prompt which is shown after selecting the "Help" option in the boot menu.

There is also a graphical installer image that can be netbooted. And there is a
special "mini" ISO image^[4], which is mainly useful for testing.

Just as with the text-based installer it is possible to add boot parameters
when starting the graphical installer.

Ghi chú

The graphical installer requires significantly more memory to run than the
text-based installer: 810MB. If insufficient memory is available, it will
automatically fall back to the text-based "newt" frontend.

If the amount of memory in your system is below 780MB, the graphical installer
may fail to boot at all while booting the text-based installer would still
work. Using the text-based installer is recommended for systems with little
available memory.

5.2. Khả năng truy cập

Some users may need specific support because of e.g. some visual impairment. 
USB braille displays are detected automatically (not serial displays connected
via a serial-to-USB converter), but most other accessibility features have to
be enabled manually. On machines that support it, the boot menu emits beeps
when it is ready to receive keystrokes. It beeps once on BIOS systems, and
beeps twice on UEFI systems. Some boot parameters can then be appended to
enable accessibility features (see also Phần 5.1.7, "Màn hình khởi động"). Note
that on most architectures the boot loader interprets your keyboard as a QWERTY
keyboard.

5.2.1. Installer front-end

The Debian installer supports several front-ends for asking questions, with
varying convenience for accessibility: notably, text uses plain text while newt
uses text-based dialog boxes. The choice can be made at the boot prompt, see
the documentation for DEBIAN_FRONTEND in Phần 5.3.2, "Tham số trình cài đặt
Debian".

With the newt front-end (used mostly with braille), one mostly just selects
answers with arrow keys and presses Enter to validate the choice. Pressing Tab
or Shift - Tab allows to switch between dialog elements, and notably to access
the Go Back button, which brings back again to previous questions. Some dialogs
contain check boxes, which can be ticked on and off by pressing Space.

With the text front-end (used mostly with speech), one mostly selects answers
by typing their number followed by pressing Enter. One can also not type
anything and just press Enter to simply accept the default value. Typing < and
pressing Enter brings back again to previous questions. When a selection of
choices has to be made (e.g. during task selection), one can type ! to express
an empty selection.

5.2.2. Thiết bị chữ nổi USB

Thiết bị USB hiển thị chữ hổi nên được tự động phát hiện. Một phiên bản thuộc
văn bản của trình cài đặt thì được tự động chọn, và hỗ trợ cho thiết bị hiển
thị chữ nổi thì được cài đặt vào hệ thống đích. Vì vậy bạn chỉ cần bấm phím 
Enter tại trình đơn khởi động. Một khi phần mềm brltty khởi chạy, bạn có thể
chọn một bảng chữ nổi bằng cách vào trình đơn tùy thích. Tài liệu hướng dẫn về
tổ hợp phím cho thiết bị chữ nổi cũng sẵn sàng ở trang Web của brltty.

5.2.3. Thiết bị chữ nổi nối tiếp

Serial braille displays cannot safely be automatically detected (since that may
damage some of them). You thus need to append the brltty=driver,port boot
parameter to tell brltty which driver and port it should use. driver should be
replaced by the two-letter driver code for your terminal (see the BRLTTY manual
). port should be replaced by the name of the serial port the display is
connected to, ttyS0 is the default, ttyUSB0 can be typically used when using a
serial-to-USB converter. A third parameter can be provided, to choose the name
of the braille table to be used (see the BRLTTY manual); the English table is
the default. Note that the table can be changed later by entering the
preference menu. A fourth parameter can be provided to pass parameters to the
braille driver, such as protocol=foo which is needed for some rare models.
Documentation on key bindings for braille devices is available on the brltty
website.

5.2.4. Phần mềm tổng hợp giọng nói

Support for software speech synthesis is available on all installer images
which have the graphical installer, i.e. all netinst, CD and DVD images, and
the netboot gtk variant. It can be activated by selecting it in the boot menu
by typing s Enter. The textual version of the installer will then be
automatically selected, and support for software speech synthesis will be
automatically installed on the target system.

If several sound cards are detected, you will be prompted to press Enter when
you hear speech from the desired sound card.

The first question (language) is spoken in english, and the remainder of
installation is spoken in the selected language (if available in espeak).

The default speech rate is quite slow. To make it faster, press CapsLock+6. To
make it slower, press CapsLock+5. The default volume should be medium. To make
it louder, press CapsLock+2. To make it quieter, press CapsLock+1. To get more
details on the browsing shortcuts, see the Speakup guide. To just accept the
default answer for a question, simply press Enter at the prompt. To provide an
empty answer for a question, type ! at the prompt. To get back to the previous
question, type < at the prompt.

5.2.5. Phần cứng tổng hợp giọng nói

Support for hardware speech synthesis devices is available on all installer
images which have the graphical installer, i.e. all netinst, CD and DVD images,
and the netboot gtk variant. You thus need to select a "Graphical install"
entry in the boot menu.

Không thể tự động phát hiện được thiết bị tổng hợp tiếng nói kiểu phần. Vì thế
bạn cần phải phụ thêm tham số khởi động speakup.synth=trình_điều_khiển để báo
chương trình speakup biết có nên sử dụng trình điều khiển nào. Chuỗi
trình_điều_khiển nên được thay thế bằng mã trình điều khiển cho thiết bị đó
(xem/ danh sách các mã trình điều khiển).

5.2.6. Thiết bị bảng

Một số thiết bị khả năng truy cập nào đó là bảng thật được cắm vào bên trong
máy tính, mà đọc văn bản một cách trực tiếp từ vùng nhớ ảnh động. Để hiệu lực
thiết bị kiểu này, bạn cần phải tắt hỗ trợ cho vùng đệm khung bằng cách sử dụng
tham số khởi động vga=normal fb=false. Tuy nhiên, việc này cũng giảm số các
ngôn ngữ sẵn sàng.

Mong muốn thì cũng có thể kích hoạt một phiên bản văn bản của bộ nạp khởi động
trước khi thêm tham số khởi động, bằng cách gõ chuỗi « h Enter ».

5.2.7. Sắc thái cao tương phản

For users with low vision, the installer can use a high-contrast color theme
that makes it more readable. To enable it, you can use the "Accessible high
contrast" entry from the boot screen with the d shortcut, or append the theme=
dark boot parameter.

5.2.8. Zoom

For users with low vision, the graphical installer has a very basic zoom
support: the Control++ and Control+- shortcuts increase and decrease the font
size.

5.2.9. Expert install, rescue mode, automated install

Expert, Rescue, and Automated installation choices are also available with
accessibility support. To access them, one has to first enter the "Advanced
options" submenu from the boot menu by typing a. When using a BIOS system (the
boot menu will have beeped only once), this has to be followed by Enter ; for
UEFI systems (the boot menu will have beeped twice) that must not be done.
Then, to enable speech synthesis, s can optionally be pressed (followed again
by Enter on BIOS systems but not on UEFI systems). From there, various
shortcuts can be used: x for expert installation, r for rescue mode, or a for
automated installation. Again these need to be followed by Enter when using a
BIOS system.

The automated install choice allows to install Debian completely automatically
by using preseeding, whose source can be entered after accessibility features
get started. Preseeding itself is documented in Phụ lục B, Tự động hoá việc cài
đặt bằng chèn sẵn.

5.2.10. Accessibility of the installed system

Documentation on accessibility of the installed system is available on the
Debian Accessibility wiki page.

5.3. Tham số khởi động

Tham số khởi động là tham số hạt nhân Linux thường được dùng để đảm bảo thiết
bị ngoại vi được xử lý cho đúng. Bình thường, hạt nhân có khả năng phát hiện tự
động thông tin về các ngoại của máy tính. Tuy nhiên, trong một số trường hợp,
bạn cần phải giúp đỡ hạt nhân một ít.

Nếu đây là lần đầu tiên khởi động hệ thống này, hãy thử nhập các tham số khởi
động mặc định (tức là không thử đặt tham số thêm) và theo dõi hoạt động. Rất có
thể là máy sẽ hoạt động được vậy bạn không cần thêm gì. Nếu không, bạn có thể
khởi động lại sau, cũng tìm tham số đặc biệt có thể báo hệ thống biết về phần
cứng đó.

Thông tin về nhiều tham số khởi động khác nhau nằm trong tài liệu dấu nhắc khởi
động Linux Thế Nào Linux BootPrompt HOWTO, gồm có mẹo về phần cứng không
thường. Phần này chứa chỉ bản tóm tắt các tham số nổi bật nhất. Một số vấn đề
thường cũng được bao gồm bên dưới trong Phần 5.4, "Giải đáp thắc mắc trong tiến
trình cài đặt".

5.3.1. Boot console

If you are booting with a serial console, generally the kernel will autodetect
this. If you have a videocard (framebuffer) and a keyboard also attached to the
computer which you wish to boot via serial console, you may have to pass the
console=device argument to the kernel, where device is a serial device of the
target, which is usually something like ttyS0.

You may need to specify parameters for the serial port, such as speed and
parity, for instance console=ttyS0,9600n8; other typical speeds may be 57600 or
115200. Be sure to specify this option after "---", so that it is copied into
the bootloader configuration for the installed system (if supported by the
installer for the bootloader).

In order to ensure the terminal type used by the installer matches your
terminal emulator, the parameter TERM=type can be added. Note that the
installer only supports the following terminal types: linux, bterm, ansi, vt102
and dumb. The default for serial console in debian-installer is vt102. If you
are using an IPMI console, or a virtualization tool which does not provide
conversion into such terminals types itself, e.g. QEMU/KVM, you can start it
inside a screen session. That will indeed perform translation into the screen
terminal type, which is very close to vt102.

5.3.2. Tham số trình cài đặt Debian

The installation system recognizes a few additional boot parameters^[5] which
may be useful.

Một số tham số có "dạng ngắn" giúp đỡ tránh sự hạn chế của các tùy chọn dòng
lệnh hạt nhân và làm cho dễ hơn nhập tham số. Tham số có dạng ngắn thì được
hiển thị trong dấu ngoặc đúng sau dạng dài (chuẩn). Các mẫu thí dụ trong sổ tay
này cũng thường dùng dạng ngắn.

debconf/priority (priority)

    Tham số này đặt ưu tiên thấp nhất cho những thông điệp cần hiển thị.

    Bản cài đặt mặc định tùy theo ưu tiên cao debconf/priority=high. Có nghĩa
    là hiển thị những thông điệp có ưu tiên cả cao lẫn tới hạn, còn bỏ qua
    những thông điệp ưu tiên vừa và thấp. Nếu gặp lỗi, trình cài đặt điều chỉnh
    ưu tiên như cần thiết.

    Nếu bạn thêm ưu tiên vừa debconf/priority=medium là tham số khởi động, bạn
    sẽ thấy trình đơn cài đặt, giành thêm khả năng điều khiển tiến trình cài
    đặt. Còn khi dùng ưu tiên thấp debconf/priority=low, mọi thông điệp được
    hiển thị (nó tương đương với phương pháp khởi động nhà chuyên môn). Với ưu
    tiên tới hạn debconf/priority=critical, hệ thống cài đặt sẽ hiển thị chỉ
    những thông điệp nghiêm trọng, sẽ cố gắng làm việc đúng, không tương tác
    nhiều.

DEBIAN_FRONTEND

    Tham số khởi động này điều khiển kiểu giao diện người dùng được dùng cho bộ
    cài đặt. Các giá trị tham số hiện thời có thể:

      □ DEBIAN_FRONTEND=noninteractive (không tương tác)

      □ DEBIAN_FRONTEND=text (văn bản)

      □ DEBIAN_FRONTEND=newt (trình newt)

      □ DEBIAN_FRONTEND=gtk (trình gtk)

    Giao diện mặc định là DEBIAN_FRONTEND=newt. DEBIAN_FRONTEND=text có lẽ
    thích hợp hơn cho tiến trình cài đặt bằng bàn điều khiển nối tiếp. Một số
    bộ cài đặt chỉ cung cấp hạn chế trong một số giao diện, nhưng hầu như newt
    và text có sẵn trên vật chứa cài đặt mặc định. Trên các kiến trúc có hỗ
    trợ, bộ cài đặt kiểu đồ họa thì sử dụng giao diện gtk.

BOOT_DEBUG

    Việc đặt tham số khởi động này (gỡ lỗi khởi động) thành 2 sẽ gây ra tiến
    trình khởi động trình cài đặt sẽ được ghi lưu một cách chi tiết. Còn việc
    đặt nó thành 3 làm cho trình bao gỡ lỗi sẵn sàng tại một số điểm thời có
    ích trong tiến trình khởi động. (Hãy thoát khỏi trình bao để tiếp tục lại
    tiến trình khởi động.)

    BOOT_DEBUG=0

        Đây là giá trị mặc định.

    BOOT_DEBUG=1

        Chi tiết hơn cấp thường.

    BOOT_DEBUG=2

        Xuất rất nhiều thông tin gỡ lỗi.

    BOOT_DEBUG=3

        Chạy trình bao tại một số điểm thời khác nhau trong tiến trình khởi
        động, để cho khả năng gỡ lỗi chi tiết. Hãy thoát khỏi trình bao để tiếp
        tục lại khởi động.

log_host, log_port

    Làm cho trình cài đặt gửi thông điệp nhật ký đến máy chủ nhật ký syslog ở
    xa bằng tên và cổng được chỉ định cùng lúc với lưu vào tập tin cục bộ. Nếu
    không chỉ ra, cổng sẽ mặc định là cổng syslog chuẩn 514.

lowmem

    Có thể dùng để ép buộc tiến trình cài đặt lên mức lowmem (ít bộ nhớ) cao
    hơn mức được đặt theo mặc định bởi tiến trình cài đặt, dựa vào bộ nhớ còn
    rảnh. Giá trị có thể là 1 và 2. Xem thêm Phần 6.3.1.1, "Kiểm tra bộ nhớ có
    sẵn / chế độ thiếu bộ nhớ".

noshell

    Ngăn cản trình cài đặt cung cấp trình bao tương tác trên tty2 và tty3. Có
    ich đối với tiến trình cài đặt không có người theo dõi mà cũng có thể bị
    xâm nhập.

debian-installer/framebuffer (fb)

    Một số kiến trúc riêng sử dụng bộ đệm khung (framebuffer) của hạt nhân để
    cung cấp khả năng cài đặt bằng nhiều ngôn ngữ khác nhau. Nếu bộ đếm khung
    gây ra lỗi trên hệ thống, bạn vẫn có thể tắt tính năng này bằng tham số vga
    =normal fb=false. Trường hợp ngụ ý sự khó là thông điệp lỗi về bterm hay
    bogl, màn hình trống hay hệ thống đông đặc trong vòng vài phút sau khi khởi
    chạy tiến trình cài đặt.

debian-installer/theme (theme)

    A theme determines how the user interface of the installer looks (colors,
    icons, etc.). Which themes are available may differ per frontend. Currently
    both the newt and gtk frontend have (apart from the default look) only one
    additional theme named "dark" theme, which was designed for visually
    impaired users. Set this theme by booting with theme=dark (there is also
    the keyboard shortcut d for this in the boot menu).

netcfg/disable_autoconfig

    By default, the debian-installer automatically probes for network
    configuration via IPv6 autoconfiguration and DHCP. If the probe succeeds,
    you won't have a chance to review and change the obtained settings. You can
    get to the manual network setup only in case the automatic configuration
    fails.

    If you have an IPv6 router or a DHCP server on your local network, but want
    to avoid them because e.g. they give wrong answers, you can use the
    parameter netcfg/disable_autoconfig=true to prevent any automatic
    configuration of the network (neither v4 nor v6) and to enter the
    information manually.

hw-detect/start_pcmcia

    Đặt thành false (khởi chạy PCMCIA là sai) để ngăn cản khởi chạy dịch vụ
    PCMCIA, nếu nó gây ra lỗi. Một số máy tính xách tay là nổi tiếng do trường
    hợp lỗi này.

disk-detect/dmraid/enable (dmraid)

    Lập thành true (đúng) để hiệu lực hỗ trợ đĩa kiểu RAID ATA nối tiếp (Serial
    ATA RAID, cũng được gọi là ATA RAID, BIOS RAID hay RAID giả) trong trình
    cài đặt. Ghi chú rằng hỗ trợ này hiện thời vẫn còn thực nghiệm. Tìm thêm
    thông tin ở Wiki Cài Đặt Debian.

preseed/url (url)

    Hãy xác định địa chỉ Mạng của tập tin cấu hình sẵn cần tải về và sử dụng để
    tự động hoá tiến trình cài đặt. Xem Phần 4.6, "Cài đặt tự động".

preseed/file (file)

    Hãy xác định đường dẫn đến tập tin cấu hình sẵn cần nạp để tự động hoá tiến
    trình cài đặt. Xem Phần 4.6, "Cài đặt tự động".

preseed/interactive

    Đặt thành true (đúng) để hiển thị câu hỏi thậm chí nếu nó đã được chèn sẵn.
    Có thể hữu ích để thử hay gỡ lỗi tập tin cấu hình sẵn. Ghi chú rằng nó sẽ
    không có tác động những tham số được gửi qua dưới dạng tham số khởi động,
    nhưng cho chúng cũng có thể dùng cú pháp đặc biệt. Xem thêm Phần B.5.2,
    "Dùng khả năng chèn sẵn để thay đổi giá trị mặc định".

auto-install/enable (auto)

    Hoãn các câu bình thường được hỏi trước khi có khả năng chèn sẵn, đến sau
    khi mạng được cấu hình. Xem Phần B.2.3, "Chế độ tự động" để tìm chi tiết về
    cách sử dụng tùy chọn này để tự động hoá tiến trình cài đặt.

finish-install/keep-consoles

    Trong khi cài đặt từ bàn giao tiếp kiểu nối tiếp hay quản lý, những bàn
    giao tiếp ảo bình thường (VT1 đến VT6) thông thường bị tắt trong /etc/
    inittab. Đặt thành true (đúng) để ngăn cản trường hợp này.

cdrom-detect/eject

    By default, before rebooting, debian-installer automatically ejects the
    optical media used during the installation. This can be unnecessary if the
    system does not automatically boot off such media. In some cases it may
    even be undesirable, for example if the optical drive cannot reinsert the
    media itself and the user is not there to do it manually. Many slot
    loading, slim-line, and caddy style drives cannot reload media
    automatically.

    Đặt thành false (sai) để tắt khả năng đầy ra tự động; cũng ghi nhớ rằng bạn
    có lẽ sẽ cần phải đảm bảo hệ thống không khởi động tự động từ ổ đĩa quang
    sau khi việc cài đặt ban đầu.

base-installer/install-recommends (khuyến khích)

    Bằng cách lập tuỳ chọn này thành false (sai), hệ thống quản lý gói phần mềm
    sẽ được cấu hình để không phải tự động cài đặt các gói có nhãn "Khuyên", cả
    hai trong tiến trình cài đặt và cho hệ thống được cài đặt. Xem thêm
    Phần 6.3.5, "Cài đặt Hệ thống Cơ bản".

    Ghi chú rằng tuỳ chọn này cho phép bạn baỏ tồn một hệ thống nhỏ hơn, mà
    cũng có thể gây ra một số tính năng còn thiếu mà bạn bình thường mong đợi
    sẵn sàng. Trong trường hợp đó, bạn cần phải tự cài đặt một số gói khuyến
    khích để được chức năng đầy đủ. Vì thế tuỳ chọn này chỉ nên được sử dụng
    bởi người dùng cấp cao.

debian-installer/allow_unauthenticated

    Mặc định là tiến trình cài đặt cần thiết xác thực với kho lưu, dùng một
    khoá GPG đã biết. Đặt thành true (đúng) để tắt chức năng xác thực này. Cảnh
    báo : không bảo mật thì không khuyến khích.

rescue/enable

    (Cứu/bật) Đặt thành true (đúng) để vào chế độ cứu, hơn là chạy tiến trình
    cài đặt chuẩn. Xem Phần 8.6, "Phục hồi hệ thống bị hỏng".

5.3.3. Dùng tham số khởi động để trả lời câu hỏi

Trừ vài thứ, ở dấu nhắc khởi động vẫn có khả năng đặt giá trị cho bất cứ câu
nào được hỏi trong tiến trình cài đặt, dù khả năng này thật chỉ có ích trong
một số trường hợp riêng.

debian-installer/language (ngôn ngữ), debian-installer/country (quốc gia), 
    debian-installer/locale (locale)

    Có hai phương pháp ghi rõ ngôn ngữ, quốc gia và miền địa phương cần dùng
    cho tiến trình cài đặt và hệ thống được cài đặt.

    Phương pháp trước (cũng dễ hơn) là gửi chỉ tham số locale (miền địa
    phương). Ngôn ngữ và quốc gia thì bắt nguồn từ miền địa phương đó. Chẳng
    hạn, bạn có thể sử dụng tham số locale=de_CH để lập ngôn ngữ thành tiếng
    Đức và quốc gia thành Thuỵ Sĩ (de_CH.UTF-8 sẽ được đặt làm miền địa phương
    mặc định cho hệ thống được cài đặt). Tuy nhiên, chỉ có thể truy cập đến
    những miền địa phương có sẵn trong hệ thống thôi.

    Phương pháp sau (dẻo hơn) là ghi rõ từng tham sốlanguage (ngôn ngữ) và
    country (quốc gia). Trong trường hợp này, tham số locale (miền địa phương)
    cũng có thể được thêm để ghi rõ một miền địa phương mặc định cho hệ thống
    được cài đặt. Thí dụ : language=vi country=AU locale=vi.UTF-8.

anna/choose_modules (modules)

    Có thể được dùng để tự động nạp các thành phần cài đặt không được nạp theo
    mặc định. Các thành phần tùy chọn có thể hữu ích là (v.d.)
    openssh-client-udeb (để sử dụng scp trong khi cài đặt) và ppp-udeb (xem
    Phần D.5, "Cài đặt Debian GNU/Linux dùng PPP qua Ethernet (PPPoE)").

netcfg/disable_autoconfig

    Set to true if you want to disable IPv6 autoconfiguration and DHCP and
    instead force static network configuration.

mirror/protocol (protocol)

    Mặc định là trình cài đặt sử dụng giao thức HTTP để tải các tập tin xuống
    máy nhân bản Debian. Không thể thay đổi sang FTP trong khi cài đặt ở mức ưu
    tiên bình thường. Bằng cách lập tham số này thành ftp, bạn ép buộc trình
    cài đặt sử dụng giao thức FTP thay cho HTTP. Ghi chú rằng bạn không thể
    chọn một máy nhân bản FTP từ danh sách: bạn cần phải tự gõ tên máy.

tasksel:tasksel/first (tasks)

    Có thể được dùng để chọn các công việc không sẵn sàng trong danh sách công
    việc tương tác, v.d. công việc kde-desktop. Xem Phần 6.3.6.2, "Lựa chọn và
    Cài đặt Phần mềm" để tìm thông tin thêm.

5.3.4. Gửi tham số cho mô-đun hạt nhân

Nếu trình điêu khiển nào được biên dịch vào hạt nhân, bạn có khả năng gửi tham
số cho chúng, như được diễn tả trong tài liệu hướng dẫn về cách sử dụng hạt
nhân. Tuy nhiên, nếu trình điều khiển được biên dịch dạng mô-đun, vì mô-đun hạt
nhân được nạp khác trong tiến trình cài đặt so sánh với tiến trình khởi động hệ
thống đã cài đặt, không thể gửi tham số cho mô-đun như bình thường. Thay vào
đó, bạn cần phải sử dụng cú pháp đặc biệt được bộ cài đặt chấp nhận sẽ đảm bảo
các tham số được lưu vào tập tin cấu hình đúng thì được dùng khi mô-đun thật
được nạp. Các tham số này cũng sẽ tự động được gồm trong cấu hình cho hệ thống
đã cài đặt.

Ghi chú rằng lúc bây giờ hơi ít khi cần phải gửi tham số cho mô-đun. Trong phần
lớn trường hợp, hạt nhân có thể thăm dò phần cứng của hệ thống thì đặt các giá
trị mặc định có ích. Tuy nhiên, trong một số trường hợp riêng, vẫn cần phải tự
đặt tham số.

Để đặt tham số cho mô-đun, hãy sử dụng cú pháp:

tên_mô-đun.tên_tham_số=giá_trị

Nếu bạn cần phải gửi nhiều tham số cho cùng một mô-đun hay nhiều mô-đun khác
nhau, đơn giản hãy lặp lại câu lệnh này. Chẳng hạn, để đặt một thẻ giao diện
mạng 3Com cũ sử dụng bộ kết nối BNC (co-ax) và IRQ10, bạn cần gửi:

3c509.xcvr=3 3c509.irq=10

5.3.5. Cấm mô-đun hạt nhân

Đôi khi cần phải cấm một mô-đun để ngăn cản nó tự động được nạp bởi hạt nhân và
trình udev. Một lý do có thể là mô-đun đó gây ra vấn đề với phần cứng. Hạt nhân
cũng đôi khi liệt kê hai trình điều khiển khác nhau cho cùng một thiết bị.
Trường hợp này có thể gây ra thiết bị đó không hoạt động được nếu những trình
điều khiển xung đột, hoặc nếu trình điều khiển không đúng được nạp trước.

Bạn có khả năng cấm mô-đun bằng cú pháp này: tên_mô-đun.blacklist=yes (danh
sách màu đen = có). Câu lệnh này sẽ gây ra mô-đun đó bị cấm trong tập tin /etc/
modprobe.d/blacklist.local, cả hai trong tiến trình cài đặt, và trên hệ thống
được cài đặt.

Ghi chú rằng mô-đun đó vẫn còn có thể được nạp bởi hệ thống cài đặt chính nó.
Bạn vẫn có thể ngăn cản việc này cảy ra, bằng cách chạy tiến trình cài đặt
trong chế độ chuyên môn và bỏ chọn mô-đun đó trong danh sách các mô-đun được
hiển thị trong những giải đoạn phát hiện phần cứng.

5.4. Giải đáp thắc mắc trong tiến trình cài đặt

5.4.1. Reliability of optical media

Sometimes, especially with older drives, the installer may fail to boot from an
optical disc. The installer may also -- even after booting successfully from
such disc -- fail to recognize the disc or return errors while reading from it
during the installation.

Có nhiều nguyên nhân có thể khác nhau của những vấn đề này. Chúng tôi chỉ có
thể liệt kê một số vấn đề thường và cung cấp lời đề nghị chung về cách quyết
định chúng. Theo bạn sửa.

Khuyên bạn trước tiên thử hai việc rất đơn giản.

  • If the disc does not boot, check that it was inserted correctly and that it
    is not dirty.

  • If the installer fails to recognize the disc, try just running the option 
    Detect and mount installation media a second time. Some DMA related issues
    with very old CD-ROM drives are known to be resolved in this way.

If this does not work, then try the suggestions in the subsections below. Most,
but not all, suggestions discussed there are valid for CD-ROM and DVD.

If you cannot get the installation working from optical disc, try one of the
other installation methods that are available.

5.4.1.1. Vấn đề thường gặp

  • Một số ổ đĩa CD-ROM cũ không hỗ trợ khả năng đọc từ đĩa đã được chép ra ở
    tốc độ cao bằng bộ ghi CD hiện đại.

  • Some very old CD-ROM drives do not work correctly if "direct memory access"
    (DMA) is enabled for them.

5.4.1.2. Cách xem xét và có thể quyết định vấn đề

If the optical disc fails to boot, try the suggestions listed below.

  • Check that your BIOS/UEFI actually supports booting from optical disc (only
    an issue for very old systems) and that booting from such media is enabled
    in the BIOS/UEFI.

  • If you downloaded an iso image, check that the md5sum of that image matches
    the one listed for the image in the MD5SUMS file that should be present in
    the same location as where you downloaded the image from.

    $ md5sum debian-testing-i386-netinst.iso
    a20391b12f7ff22ef705cee4059c6b92  debian-testing-i386-netinst.iso

    Next, check that the md5sum of the burned disc matches as well. The
    following command should work. It uses the size of the image to read the
    correct number of bytes from the disc.

    $ dd if=/dev/cdrom | \
    > head -c `stat --format=%s debian-testing-i386-netinst.iso` | \
    > md5sum
    a20391b12f7ff22ef705cee4059c6b92  -
    262668+0 records in
    262668+0 records out
    134486016 bytes (134 MB) copied, 97.474 seconds, 1.4 MB/s
    [records in     số bản ghi gửi đến
    records out     số bản ghi gửi đi
    copied          đã sao chép
    seconds         giây]

If, after the installer has been booted successfully, the disc is not detected,
sometimes simply trying again may solve the problem. If you have more than one
optical drive, try changing the disc to the other drive. If that does not work
or if the disc is recognized but there are errors when reading from it, try the
suggestions listed below. Some basic knowledge of Linux is required for this.
To execute any of the commands, you should first switch to the second virtual
console (VT2) and activate the shell there.

  • Chuyển đổi sang VT2 hoặc xem nội dung của /var/log/syslog (dùng nano như là
    trình soạn thảo) để kiểm tra có thông điệp lỗi dứt khoát không. Sau đó,
    kiểm tra kết xuất của lệnh dmesg.

  • Check in the output of dmesg if your optical drive was recognized. You
    should see something like (the lines do not necessarily have to be
    consecutive):

    ata1.00: ATAPI: MATSHITADVD-RAM UJ-822S, 1.61, max UDMA/33
    ata1.00: configured for UDMA/33
    scsi 0:0:0:0: CD-ROM            MATSHITA DVD-RAM UJ-822S  1.61 PQ: 0 ANSI: 5
    sr0: scsi3-mmc drive: 24x/24x writer dvd-ram cd/rw xa/form2 cdda tray
    cdrom: Uniform CD-ROM driver Revision: 3.20

    If you don't see something like that, chances are the controller your drive
    is connected to was not recognized or may be not supported at all. If you
    know what driver is needed for the controller, you can try loading it
    manually using modprobe.

  • Check that there is a device node for your optical drive under /dev/. In
    the example above, this would be /dev/sr0. There should also be a /dev/
    cdrom.

  • Use the mount command to check if the optical disc is already mounted; if
    not, try mounting it manually:

    $ mount /dev/hdc /cdrom

    Check if there are any error messages after that command.

  • Check if DMA is currently enabled:

    $ cd /proc/ide/hdc
    $ grep using_dma settings
    using_dma      1       0       1       rw

    A "1" in the first column after using_dma means it is enabled. If it is,
    try disabling it:

    $ echo -n "using_dma:0" >settings

    Make sure that you are in the directory for the device that corresponds to
    your optical drive.

  • If there are any problems during the installation, try checking the
    integrity of the installation media using the option near the bottom of the
    installer's main menu. This option can also be used as a general test if
    the disc can be read reliably.

5.4.2. Cấu hình khởi động

Nếu bạn gặp khó khăn, hạt nhân treo cứng trong tiến trình khởi động, không nhận
diện ngoại vi thật, hay không nhận diện được ổ đĩa, trước tiên bạn cần phải xem
lại các tham số khởi động, như được thảo luận trong Phần 5.3, "Tham số khởi
động".

In some cases, malfunctions can be caused by missing device firmware (see
Phần 2.2, "Thiết bị cần thiết phần vững" and Phần 6.4, "Nạp phần vững bị thiếu"
).

5.4.3. Phần mềm tổng hợp giọng nói

Nếu phần mềm tổng hợp giọng nói không làm việc, nhiều khả năng là có lỗi trong
mạch âm thanh của bạn, thường là do không có trình điều khiển của nó trong
trình cài đặt, hay do nó có tên bộ trộn âm không bình thường, mà được đặt mặc
định là câm. Bạn nên gửi một báo cáo lỗi có bao gồm kết xuất của những lệnh
sau, chạy từ hệ thống Linux có âm thanh làm việc tốt trên cùng máy (ví dụ từ
một đĩa CD)

  • dmesg

  • lspci

  • lsmod

  • amixer

5.4.4. Vấn đề cài đặt 64-bit PC thường

Có một số vấn đề cài đặt thường có thể được giải quyết hay được tránh bằng cách
gởi đối số khởi động riêng cho trình cài đặt.

Nếu màn hình bắt đầu hiển thị ảnh lạ trong khi hạt nhân khởi động, v.d. màn
hình hoàn toàn trắng, hoàn toàn đèn hay có rác điểm ảnh màu sắc, có lẽ hệ thống
chứa thẻ ảnh động không chuyển đổi được sang chế độ bộ đệm khung. Trong trường
hợp này, bạn có thể nhập tham số khởi động fb=false (bộ đệm khung là sai) để
tắt bàn điều khiển vùng đệm khung. Chỉ một bộ ngôn ngữ bị giảm sẽ sẵn sàng
trong tiến trình cài đặt, do tính năng bàn điều khiển bị hạn chế. Xem Phần 5.3,
"Tham số khởi động" để tìm chi tiết.

5.4.4.1. Hệ thống đông đặc trong giai đoạn cấu hình PCMCIA

Some very old laptop models produced by Dell are known to crash when PCMCIA
device detection tries to access some hardware addresses. Other laptops may
display similar problems. If you experience such a problem and you don't need
PCMCIA support during the installation, you can disable PCMCIA using the
hw-detect/start_pcmcia=false boot parameter. You can then configure PCMCIA
after the installation is completed and exclude the resource range causing the
problems.

Hoặc bạn có thể khởi động trình cài đặt trong chế độ nhà chuyên môn. Lúc đó,
bạn sẽ được nhắc nhập các tùy chọn phạm vị tài nguyên cần thiết cho phần cứng
đó. Chẳng hạn, nếu bạn có máy tính xách tay kiểu Dell nêu trên, bạn nên nhập
đoạn exclude port 0x800-0x8ff (loại trừ cổng số 0x800-0x8ff). Cũng có danh sách
một số tùy chọn phạm vị tài nguyên thường trong tiết đoạn thiết lập tài nguyên
hệ thống của tài liệu PCMCIA Thế Nào. Ghi chú rằng bạn cần phải bỏ dấu phẩy,
nếu có, khi nhập giá trị này vào trình cài đặt.

5.4.5. Giải thích thông điệp khởi chạy hạt nhân

Trong tiến trình khởi động, có lẽ bạn thấy nhiều thông điệp dạng không tìm thấy
cái gì , hay không có cái gì, không thể khởi tạo cái gì , ngay cả bản phát hành
trình điều khiển này phụ thuộc vào cái gì . Phần lớn thông điệp này vô hại. Bạn
thấy chúng chỉ vì hạt nhân của hệ thống cài đặt được xây dựng để chạy trên các
máy tính có nhiều thiết bị ngoại vi khác nhau. Không có máy tính riêng lẻ có
tất cả các thiết bị ngoại vi, vì vậy hệ điều hành có thể hiển thị một số thông
điệp lỗi trong khi tìm ngoại vi không có. Có lẽ bạn cũng xem hệ thống tạm ngừng
một chút. Có xảy ra trong khi nó đợi thiết bị đáp ứng, nhưng thiết bị đó không
nằm trên hệ thống của bạn. Nếu tiến trình khởi động hệ thống chạy quá lâu, bạn
có thể tạo một hạt nhân riêng về sau (xem Phần 8.5, "Biên dịch hạt nhân mới").

5.4.6. Thông báo vấn đề cài đặt

If you get through the initial boot phase but cannot complete the install, the
menu option Save debug logs may be helpful. It lets you store system error logs
and configuration information from the installer on a storage medium, or
download them using a web browser. This information may provide clues as to
what went wrong and how to fix it. If you are submitting a bug report, you may
want to attach this information to the bug report.

Thông điệp cài đặt thích hợp khác nằm trong thư mục /var/log/ trong khi cài
đặt, rồi trong thư mục /var/log/installer/ sau khi máy tính đã khởi động vào hệ
thống mới được cài đặt.

5.4.7. Đệ trình báo cáo cài đặt

Nếu bạn vẫn còn gặp khó khăn, xin hãy đệ trình báo cáo cài đặt. Chúng tôi
khuyên bạn gởi một báo cáo cài đặt, thậm chí nếu tiến trình cài đặt là thành
công, để tập hợp càng nhiều thông tin càng có thể về các cấu hình phần cứng
khác nhau. [Dịch giả: nếu bạn gặp khó khăn viết tiếng Anh, bạn viết bằng tiếng
Việt và gởi báo cáo cho Nhóm Việt Hoá Tự Do <vi-VN@googlegroups.com> nhé. Chúng
tôi sẽ dịch cho bạn.]

Ghi chú rằng báo cáo cài đặt của bạn sẽ được xuất bản trong Hệ Thống Theo Dõi
Lỗi Debian (BTS) và được chuyển tiếp cho hộp thư chung công cộng. Hãy đảm bảo
bạn sử dụng một địa chỉ thư điện tử cũng công cộng.

If you have a working Debian system, the easiest way to send an installation
report is to install the installation-report and reportbug packages (apt
install installation-report reportbug), configure reportbug as explained in
Phần 8.4.2, "Gửi thư ra hệ thống", and run the command reportbug
installation-reports.

Alternatively you can use this template when filling out installation reports,
and file the report as a bug report against the installation-reports pseudo
package, by sending it to <submit@bugs.debian.org>.

Package: installation-reports

Boot method: <How did you boot the installer? CD/DVD? USB stick? Network?>
Image version: <Full URL to image you downloaded is best>
Date: <Date and time of the install>

Machine: <Description of machine (eg, IBM Thinkpad R32)>
Processor:
Memory:
Partitions: <df -Tl will do; the raw partition table is preferred>

Output of lspci -knn (or lspci -nn):

Base System Installation Checklist:
[O] = OK, [E] = Error (please elaborate below), [ ] = didn't try it

Initial boot:           [ ]
Detect network card:    [ ]
Configure network:      [ ]
Detect media:           [ ]
Load installer modules: [ ]
Detect hard drives:     [ ]
Partition hard drives:  [ ]
Install base system:    [ ]
Clock/timezone setup:   [ ]
User/password setup:    [ ]
Install tasks:          [ ]
Install boot loader:    [ ]
Overall install:        [ ]

Comments/Problems:

<Description of the install, in prose, and any thoughts, comments
      and ideas you had during the initial install.>

In the bug report, describe what the problem is, including the last visible
kernel messages in the event of a kernel hang. Describe the steps that you did
which brought the system into the problem state.


━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

^[4] The mini ISO image can be downloaded from a Debian mirror as described in
Phần 4.2, "Tải tập tin xuống máy nhân bản Debian". Look for netboot/gtk/
mini.iso.

^[5] With current kernels (2.6.9 or newer) you can use 32 command line options
and 32 environment options. If these numbers are exceeded, the kernel will
panic. Also there is a limit of 255 characters for the whole kernel command
line, everything above this limit may be silently truncated.

Chương 6. Sử dụng trình cài đặt Debian

Mục lục

6.1. Trình cài đặt hoạt động như thế nào

    6.1.1. Using the graphical installer

6.2. Giới thiệu về thành phần
6.3. Sử dụng mỗi thành phần

    6.3.1. Thiết lập trình cài đặt Debian và cấu hình phần cứng
    6.3.2. Thiết lập Người dùng và Mật khẩu
    6.3.3. Cấu hình Đồng hồ và Múi giờ
    6.3.4. Phân vùng và chọn điểm lắp
    6.3.5. Cài đặt Hệ thống Cơ bản
    6.3.6. Cài đặt phần mềm thêm
    6.3.7. Cho hệ thống khả năng khởi động
    6.3.8. Cài đặt xong
    6.3.9. Khắc phục sự số
    6.3.10. Installation over network-console

6.4. Nạp phần vững bị thiếu

    6.4.1. Chuẩn bị vật chứa
    6.4.2. Phần vững và Hệ thống đã Cài đặt
    6.4.3. Completing the Installed System

6.5. Customization

    6.5.1. Installing an alternative init system

6.1. Trình cài đặt hoạt động như thế nào

For this architecture the debian-installer supports two different user
interfaces: a graphical one and a text-based one. The graphical interface is
used by default unless you select an "Install" option in the boot menu. For
more information about booting the graphical installer, please refer to
Phần 5.1.8, "The Graphical Installer".

Trình cài đặt Debian là bao gồm một số thành phần nhằm mục đích đặc biệt, để
thực hiện mỗi công việc cài đặt. Mỗi thành phần thi hành tác vụ riêng của nó,
hỏi người dùng những câu cần thiết. Mỗi câu hỏi được gán ưu tiên, còn ưu tiên
các câu cần hỏi có được đặt vào lúc khởi chạy trình cài đặt.

Khi chạy tiến trình cài đặt mặc định, chỉ hỏi những câu chủ yếu (ưu tiên cao).
Kết quả là tiến trình cài đặt rất tự động, tương tác ít với người dùng. Các
thành phần được chạy tự động theo thứ tự; thành phần nào cần chạy phụ thuộc
chính vào phương pháp cài đặt được dùng, cũng vào phần cứng riêng của bạn.
Trình cài đặt sẽ dùng giá trị mặc định cho mỗi câu chưa hỏi.

Nếu tiến trình cài đặt gặp lỗi, trình cài đặt hiển thị màn hình lỗi, có lẽ cũng
là trình đơn cài đặt để chọn hành động xen kẽ. Còn nếu không gặp lỗi, người
dùng sẽ không bao giờ xem trình đơn cài đặt, họ sẽ đơn giản trả lời câu hỏi về
mỗi thành phần lần lượt. Thông báo lỗi nghiêm trọng có ưu tiên "tới hạn" thì
người dùng sẽ luôn luôn xem.

Some of the defaults that the installer uses can be influenced by passing boot
arguments when debian-installer is started. If, for example, you wish to force
static network configuration (IPv6 autoconfiguration and DHCP are used by
default if available), you could add the boot parameter netcfg/
disable_autoconfig=true. See Phần 5.3.2, "Tham số trình cài đặt Debian" for
available options.

Người dùng thành thạo có thể thấy thoải mái hơn khi dùng giao diện do trình đơn
điều khiển, trong đó người dùng điều khiển mỗi bước thay vì trình cài đặt thực
hiện tự động mỗi bước theo thứ tự. Để tự điều khiển trình cài đặt bằng trình
đơn, bạn hãy thêm đối số khởi động priority=medium (ưu tiên=vừa).

Nếu phần cứng riêng cần thiết bạn gởi tùy chọn cho mô-đun hạt nhân vào lúc cài
đặt, bạn cần phải khởi chạy trình cài đặt trong chế độ "nhà chuyên môn". Làm
như thế bằng cách hoặc nhập lệnh expert (nhà chuyên môn) để khởi chạy trình cài
đặt, hoặc thêm đối số khởi động priority=low (ưu tiên=thấp). Chế độ nhà chuyên
môn cho bạn khả năng điều khiển đầy đủ debian-installer.

In the text-based environment the use of a mouse is not supported. Here are the
keys you can use to navigate within the various dialogs. The Tab or right arrow
keys move "forward", and the Shift+Tab or left arrow keys move "backward"
between displayed buttons and selections. The up and down arrow select
different items within a scrollable list, and also scroll the list itself. In
addition, in long lists, you can type a letter to cause the list to scroll
directly to the section with items starting with the letter you typed and use 
Pg-Up and Pg-Down to scroll the list in sections. The space bar selects an item
such as a checkbox. Use Enter to activate choices.

Nếu một hộp thoại có sẵn trợ giúp thêm thì nó hiển thị một cái nút Trợ giúp. Có
thể truy cập đến thông tin trợ giúp này hoặc bằng cách bấm cái nút đó, hoặc
bằng cách bấm phím chức năng F1.

Các thông điệp lỗi và bản ghi lỗi được chuyển hướng tới bàn giao tiếp thứ tư.
Bạn có thể truy cập đến bàn giao tiếp này bằng cách bấm tổ hợp phím Alt trái+F4
(ấn giữ phím Alt bên trái trong khi bấm phím chức năng F4); còn có thể trở về
tiến trình cài đặt chính bằng tổ hợp phím Alt trái+F1.

Các thông điệp này cũng nằm trong bản ghi hệ thống /var/log/syslog. Một khi cài
đặt xong, bản ghi này được sao chép vào thư mục /var/log/installer/syslog trong
hệ thống mới. Thông điệp cài đặt kiểu khác cũng nằm trong thư mục /var/log/
trong khi cài đặt, rồi trong thư mục /var/log/installer/ sau khi máy tính đã
khởi động vào hệ thống mới cài đặt.

6.1.1. Using the graphical installer

The graphical installer basically works the same as the text-based installer
and thus the rest of this manual can be used to guide you through the
installation process.

If you prefer using the keyboard over the mouse, there are two things you need
to know. To expand a collapsed list (used for example for the selection of
countries within continents), you can use the + and - keys. For questions where
more than one item can be selected (e.g. task selection), you first need to tab
to the Continue button after making your selections; hitting enter will toggle
a selection, not activate Continue.

If a dialog offers additional help information, a Help button will be
displayed. The help information can be accessed either by activating the button
or by pressing the F1 key.

To switch to another console, you will also need to use the Ctrl key, just as
with the X Window System. For example, to switch to VT2 (the first debug shell)
you would use: Ctrl+Left Alt+F2. The graphical installer itself runs on VT5, so
you can use Left Alt+F5 to switch back.

6.2. Giới thiệu về thành phần

Đây là danh sách các thành phần cài đặt, cùng với mô tả ngắn về mục đích của
mỗi điều. Chi tiết về cách sử dụng thành phần riêng nào nằm trong Phần 6.3, "Sử
dụng mỗi thành phần".

main-menu

    Thành phần này hiển thị danh sách các thành phần cho người dùng xem trong
    khi chạy trình cài đặt, rồi khởi chạy mỗi thành phần đã được chọn. Các câu
    hỏi của thành phần « main-menu » được đặt là ưu tiên vừa, vậy nếu bạn đã
    đặt ưu tiên cài đặt cao hay tới hạn (cao là giá trị mặc định), bạn sẽ không
    xem trình đơn. Mặt khác, nếu tiến trình gặp lỗi cần thiết bạn can thiệp, ưu
    tiên của câu hỏi có thể được hạ cấp tạm thời để cho bạn khả năng giải quyết
    vấn đề: trong trường hợp đó, trình đơn có thể xuất hiện.

    Bạn có khả năng tới trình đơn chính bằng cách bấm cái nút Go Back nhiều lần
    để lùi lại hoàn toàn khỏi thành phần đang chạy.

localechooser

    Thành phần này cho bạn khả năng chọn tùy chọn địa phương hoá cho tiến trình
    cài đặt, cũng cho hệ thống sẽ cài đặt: ngôn ngữ, quốc gia và miền địa
    phương (locale). Trình cài đặt sẽ hiển thị thông điệp trong ngôn ngữ đã
    chọn, trừ có bản dịch chưa hoàn toàn sang ngôn ngữ đó, trong trường hợp đó
    một số thông điệp riêng vẫn còn có thể được hiển thị bằng tiếng Anh.

console-setup

    Shows a list of keyboard (layouts), from which the user chooses the one
    which matches his own model.

hw-detect

    Thành phần này phát hiện tự động hậu hết phần cứng của máy tính, gồm thẻ
    mạng, ổ đĩa và PCMCIA.

cdrom-detect

    Looks for and mounts a Debian installation media.

netcfg

    Thành phần này cấu hình các sự kết nối mạng của máy tính để cho nó có khả
    năng liên lạc qua Mạng.

iso-scan

    Tìm kiếm ảnh ISO (tập tin có đuôi .iso) trên đĩa cứng.

choose-mirror

    Thành phần này hiển thị danh sách các máy nhân bản Debian. Vì vậy người
    dùng có dịp chọn nguồn của các gói cài đặt.

cdrom-checker

    Checks integrity of installation media. This way, the user may assure him/
    herself that the installation image was not corrupted.

lowmem

    Thành phần này thử phát hiện hệ thống không có đủ bộ nhớ, rồi thực hiện một
    số việc đặc biệt để gỡ bỏ phần debian-installer không cần thiết ra bộ nhớ
    đó (cũng mất vài tính năng).

anna

    Anna's Not Nearly APT. Installs packages which have been retrieved from the
    chosen mirror or installation media.

user-setup

    Thành phần này thiết lập mật khẩu chủ (root), cũng thêm một người dùng khác
    người chủ.

clock-setup

    Cập nhật đồng hồ hệ thống và xác định nếu đồng hồ được đặt theo UTC (thời
    gian thế giới) hay không.

tzsetup

    Thành phần này chọn múi giờ, dựa vào địa điểm đã chọn trước.

partman

    Thành phần này cho phép người dùng phân vùng đĩa được gắn kết vào hệ thống,
    tạo hệ thống tập tin trên những phân vùng đã chọn, và gắn kết mỗi điều vào
    điểm lắp thích hợp. Cũng gồm có một số tính năng có ích như chế độ tự động
    hoàn toàn và khả năng hỗ trợ LVM (bộ quản lý khối tin hợp lý). Thành phần
    partman là công cụ phân vùng ưa thích trong Debian.

partitioner

    Thành phần này cho người dùng khả năng phân vùng đĩa được gắn kết vào hệ
    thống. Nó chọn chương trình thích hợp với kiến trúc của mỗi máy tính.

partconf

    Thành phần này hiển thị danh sách các phân vùng, cũng tạo hệ thống tập tin
    trên những phân vùng đã chọn, tùy theo những hướng dẫn của người dùng.

partman-lvm

    Thành phần này giúp đỡ người dùng cấu hình LVM (bộ quản lý khối tin hợp
    lý).

partman-md

    Thành phần này cho người dùng khả năng thiết lập RAID kiểu phần mềm. RAID
    phần mềm này thường là tốt hơn các bộ điều khiển RAID IDE (phần cứng giả)
    rẻ nằm trên bo mạch chủ mới hơn.

base-installer

    Thành phần này cài đặt bộ gói cơ bản nhất cho máy tính khả năng hoạt động
    được dưới Debian GNU/Linux khi được khởi động lại.

apt-setup

    Thành phần này cấu hình chương trình « apt », một cách phần lớn tự động,
    dựa vào vật chứa nơi trình cài đặt chạy.

pkgsel

    Thành phần này sử dụng chương trình tasksel để chọn và cài đặt phần mềm
    thêm.

os-prober

    Thành phần này phát hiện hệ thống đã được cài đặt trên máy tính và gởi
    thông tin này cho trình cài đặt bộ nạp khởi động, mà có thể cung cấp cho
    bạn khả năng thêm hệ thống đã có vào trình đơn bắt đầu của bộ nạp khởi
    động. Bằng cách này, vào lúc khởi động người dùng có thể chọn dễ dàng hệ
    điều hành nào cần khởi chạy.

bootloader-installer

    The various bootloader installers each install a boot loader program on the
    hard disk, which is necessary for the computer to start up using Linux
    without using a USB stick or CD-ROM. Many boot loaders allow the user to
    choose an alternate operating system each time the computer boots.

shell

    Thành phần này cho người dùng khả năng thực hiện trình bao từ trình đơn,
    hoặc trong bàn giao tiếp thứ hai.

save-logs

    Provides a way for the user to record information on a USB stick, network,
    hard disk, or other media when trouble is encountered, in order to
    accurately report installer software problems to Debian developers later.

6.3. Sử dụng mỗi thành phần

Trong phần này có diễn tả mỗi thành phần cài đặt một cách chi tiết. Các thành
phần đã được nhóm lại theo giai đoạn riêng dễ hiểu, được trình diễn theo thứ tự
xuất hiện trong tiến trình cài đặt. Ghi chú rằng không phải tất cả các mô-đun
sẽ được dùng trong mọi việc cài đặt; những mô-đun thật sự được dùng phụ thuộc
vào phương pháp cài đặt và phần cứng riêng.

6.3.1. Thiết lập trình cài đặt Debian và cấu hình phần cứng

Giả sử là trình cài đặt Debian vừa mới khởi động, và bạn xem màn hình thứ nhất.
Vào lúc đó, khả năng của debian-installer vẫn còn hơi bị hạn chế. Nó chưa biết
nhiều về phần cứng, về ngôn ngữ ưa thích của bạn, ngay cả về công việc cần thực
hiện. Không có sao đó, vì debian-installer hơi thông minh. Nó có khả năng thăm
dò tự động phần cứng, tìm các thành phần còn lại của nó, và nâng cấp tự nó lên
một hệ thống cài đặt có đủ khả năng. Tuy nhiên, bạn vẫn còn cần phải giúp đỡ
debian-installer tập hợp vài thông tin nó không thể quyết định tự động (v.d.
bằng cách chọn ngôn ngữ ưa thích, bố trí bàn phím thích hợp hay máy nhân bản
riêng trên mạng).

Bạn sẽ thấy biết rằng debian-installer thực hiện việc phát hiện phần cứng vài
lần trong giao đoạn này. Lần đầu tiên nhằm mục đích tìm phần cứng cần thiết để
tải các thành phần cài đặt (v.d. ổ đĩa CD-ROM hay thẻ mạng). Vì không phải tất
cả các trình điều khiển luôn luôn sẵn sàng trong việc chạy đầu tiên này, việc
phát hiện phần cứng cần phải được lặp lại vào điểm sau trong tiến trình.

Trong khi phát hiện phần cứng, debian-installer cũng kiểm tra nếu trình điều
khiển nào cho thiết bị phần cứng trong hệ thống đó cần thiết nạp phần vững
không. Yêu cầu phần vững vẫn còn không sẵn sàng thì trình cài đặt hiển thị một
hộp thoại cho phép nạp phần vững còn thiếu từ một vật chứa rời. Xem Phần 6.4,
"Nạp phần vững bị thiếu" để tìm chi tiết.

6.3.1.1. Kiểm tra bộ nhớ có sẵn / chế độ thiếu bộ nhớ

Một của những hành động thứ nhất của debian-installer là việc kiểm tra số lượng
bộ nhớ có sẵn. Nếu không có đủ bộ nhớ có sẵn, thành phần này sẽ sửa đổi tiến
trình cài đặt để (mong muốn) cho bạn khả năng cài đặt Debian GNU/Linux trên máy
tính của mình.

Để giảm bộ nhớ được chiếm, bộ cài đặt trước tiên sẽ tắt các bản dịch nên chỉ có
khả năng cài đặt bằng tiếng Anh. Tất nhiên, bạn vẫn còn có khả năng chạy hệ
thống đã bản địa hoá sau khi cài đặt xong.

Để giảm bộ nhớ thêm, bộ cài đặt sẽ nạp chỉ những thành phần chủ yếu để chạy
xong tiến trình cài đặt cơ bản. Việc này cũng giảm khả năng của hệ thống cài
đặt. Bạn sẽ có dịp tự nạp các thành phần thêm, nhưng ghi chú rằng mỗi thành
phần bạn chọn sẽ chiếm bộ nhớ thêm thì có thể gây ra tiến trình cài đặt bị lỗi
do hết bộ nhớ.

Nếu bộ cài đặt chạy trong chế độ thiếu bộ nhớ, khuyên bạn tạo một vùng trao đổi
tương đối lớn (64-128MB). Vùng trao đổi này sẽ được dùng như là bộ nhớ ảo thì
tăng số lượng bộ nhớ sẵn sàng cho hệ thống. Bộ cài đặt sẽ kích hoạt vùng trao
đổi càng sớm càng có thể trong tiến trình cài đặt. Ghi chú rằng cách sử dụng
vùng trao đổi nặng sẽ giảm hiệu suất của hệ thống và có thể đưa tới hoạt động
đĩa cao.

Bất chấp những biện pháp này, vẫn còn có thể gặp hệ thống đông đặc, lỗi bất
thường hay tiến trình bị giết bởi hạt nhân do hệ thống hết bộ nhớ (kết quả là
thông điệp "Hết bộ nhớ" trên VT4 và trong bản ghi hệ thống).

Chẳng hạn, người dùng đã thông báo rằng việc tạo một hệ thống tập tin dạng ext3
lớn bị lỗi trong chế độ thiếu bộ nhớ khi không có đủ sức chứa trao đổi. Nếu
vùng trao đổi lớn hơn không quyết định vấn đề này, hãy thử tạo hệ thống tập tin
dạng ext2 (thành phần chủ yếu của bộ cài đặt) thay thế. Vẫn có thể thay đổi
phân vùng ext2 sang ext3 sa khi cài đặt.

Có thể ép buộc trình cài đặt dùng mức bộ nhớ lowmem cao hơn mức dựa vào bộ nhớ
còn rảnh, bằng cách dùng tham số khởi động "lowmem" như được diễn tả trong
Phần 5.3.2, "Tham số trình cài đặt Debian".

6.3.1.2. Đặt tùy chọn địa phương hoá

Trong phần lớn trường hợp, trước tiên bạn sẽ được nhắc chọn các tùy chọn địa
phương hoá cần dùng trong cả hai tiến trình cài đặt và hệ thống được cài đặt.
Những tùy chọn địa phương hoá là ngôn ngữ, nơi ở và miền địa phương.

Ngôn ngữ bạn chọn sẽ được dùng trong phần còn lại của tiến trình cài đặt, miễn
là có sẵn bản dịch của các hộp thoại khác nhau. Nếu chưa có bản dịch sang ngôn
ngữ đã chọn, trình cài đặt sẽ trở về ngôn ngữ mặc định: tiếng Anh.

Vị trí địa lý (trong phần lớn các trường hợp là một quốc gia) sẽ được dùng về
sau trong tiến trình cài đặt để chọn múi giờ đúng và một máy nhân bản Debian
thích hợp với quốc gia đó. Tổ hợp ngôn ngữ và quốc gia thì giúp quyết định miền
địa phương mặc định cho hệ thống của bạn, cũng chọn bố trí bàn phím đúng.

Trước tiên, bạn sẽ được nhắc chọn ngôn ngữ ưa thích. Các tên ngôn ngữ được liệt
kê bằng cả tiếng Anh (bên trái) lẫn tiếng gốc (bên phải); các tên bên phải cũng
được in ra bằng chữ viết đúng của ngôn ngữ đó. Danh sách đó được sắp xếp theo
tên tiếng Anh. Bên trên danh sách có một tùy chọn thêm cho bạn khả năng chọn
miền địa phương "C" thay cho ngôn ngữ riêng. Việc chọn miền địa phương "C" sẽ
gây ra tiến trình cài đặt tiếp tục lại bằng chỉ tiếng Anh; hệ thống đã cài đặt
sẽ không có khả năng hỗ trợ địa phương hoá (không có ngôn ngữ khác v.v.) vì gói
locales sẽ không được cài đặt.

Bước kế tiếp là chọn vị trí địa lý. Nếu bạn đã chọn một ngôn ngữ nhận ra là
ngôn ngữ chính thức của nhiều quốc gia^[6], thì trình cài đặt hiển thị một danh
sách chứa chỉ những quốc gia đó. Để chọn một quốc gia vẫn còn không nằm trên
danh sách đó, hãy chọn mục Khác (tùy chọn cuối cùng). Trình cài đặt sẽ hiển thị
danh sách các lục địa; việc chọn một lục địa riêng thì dẫn tới danh sách các
quốc gia thích hợp ở lục địa đó.

Nếu ngôn ngữ chỉ có một quốc gia liên quan thì một danh sách các quốc gia được
hiển thị cho châu hay vùng chứa quốc gia đó, cũng có quốc gia đó được chọn làm
mặc định. Hãy sử dụng cái nút Lùi để chọn quốc gia trong một châu khác.

Ghi chú

Quan trọng là bạn chọn quốc gia ở, vì nó quyết định múi giờ nào được cấu hình
cho hệ thống được cài đặt.

Nếu bạn đã chọn một tổ hợp ngôn ngữ và quốc gia cho đó không có sẵn một miền
địa phương, và có nhiều miền địa phương cho ngôn ngữ đó, thì trình cài đặt cho
phép bạn chọn miền địa phương nào bạn thích làm miền địa phương mặc định cho hệ
thống được cài đặt^[7]. Trong các trường hợp khác, một miền địa phương mặc định
sẽ được lập dựa vào ngôn ngữ và quốc gia được người dùng chọn.

Bất cứ miền địa phương mặc định nào được chọn như diễn tả trong đoạn văn trước
sẽ cũng sử dụng UTF-8 (Unicode) làm bảng mã ký tự. (Ghi chú : tiếng Việt yêu
cầu Unicode.)

Nếu bạn đang cài đặt ở mức ưu tiên Thấp thì bạn có dịp chọn thêm miền địa
phương, gồm có cái gọi là miền địa phương "thừa tự"^[8], cần tạo ra cho hệ
thống được cài đặt. Chọn thêm miền địa phương ở bước này thì bạn được hỏi miền
địa phương nào nên làm mặc định cho hệ thống được cài đặt.

6.3.1.3. Chọn bàn phím

Bàn phím thường được thiết kế để nhập các ký tự đại diện ngôn ngữ riêng. Hãy
chọn một bố trí bàn phím thích hợp với bàn phím hàng ngày của bạn, hoặc chọn
điều tương tự nếu không có bố trí trùng. Một khi cài đặt xong hệ thống, bạn có
khả năng chọn bố trí bàn phím trong phạm vị sự chọn rộng hơn (chạy tiện ích 
dpkg-reconfigure keyboard-configuration với tư cách người chủ, một khi cài đặt
xong).

Hãy di chuyển vùng tô sáng tới bố trí bàn phím đã muốn, rồi bấm phím Enter.
Dùng các phím mũi tên để di chuyển vùng tô sáng -- chúng nằm tại cùng một vị
trí trên mọi bố trí bàn phím ngôn ngữ quốc gia, vậy chúng không phụ thuộc vào
cấu hình bàn phím.

6.3.1.4. Tìm ảnh ISO cài đặt Debian

Trong tiến trình cài đặt bằng phương pháp hd-media, có một thời điểm khi bạn
cần phải tìm và gắn kết ảnh ISO của trình cài đặt Debian, để lấy các tập tin
cài đặt còn lại. Thành phần iso-scan thực hiện công việc dứt khoát này.

At first, iso-scan automatically mounts all block devices (e.g. partitions and
logical volumes) which have some known filesystem on them and sequentially
searches for filenames ending with .iso (or .ISO for that matter). Beware that
the first attempt scans only files in the root directory and in the first level
of subdirectories (i.e. it finds /whatever.iso, /data/whatever.iso, but not /
data/tmp/whatever.iso). After an iso image has been found, iso-scan checks its
content to determine if the image is a valid Debian iso image or not. In the
former case we are done, in the latter iso-scan seeks for another image.

Trong trường hợp việc thử tìm ảnh ISO cài đặt không phải là thành công, thành
phần iso-scan sẽ hỏi nếu bạn muốn thực hiện việc tìm kiếm tường tận hơn. Việc
tìm kiếm đó không phải chỉ tìm trong những thư mục lên trên: nó thật sự đi qua
toàn bộ hệ thống tập tin.

Nếu thành phần iso-scan không tìm được ảnh ISO cài đặt của bạn, hãy khởi động
lại về hệ điều hành đã có, rồi kiểm tra xem nếu ảnh có tên đúng (kết thúc bằng
.iso), nếu nó nằm trong hệ thống tập tin do debian-installer chấp nhận, và nếu
nó bị hỏng (thẩm tra tổng kiểm checksum). Người dùng UNIX kinh nghiệm có thể
làm như thế, không cần khởi động lại, bằng bàn giao tiếp thứ hai.

Note that the partition (or disk) hosting the ISO image can't be reused during
the installation process as it will be in use by the installer. To work-around
this, and provided that you have enough system memory, the installer can copy
the ISO image into RAM before mounting it. This is controlled by the low
priority iso-scan/copy_iso_to_ram debconf question (it is only asked if the
memory requirement is met).

6.3.1.5. Cấu hình mạng

Khi bạn vào bước này, nếu trình cài đặt phát hiện nhiều thiết bị mạng trong máy
tính, nó sẽ nhắc bạn chọn thiết bị nào là giao diện mạng chính, tức là điều bạn
muốn sử dụng để cài đặt. Các giao diện khác sẽ không được cấu hình vào lúc đó.
Bạn có khả năng cấu hình giao diện thêm một khi cài đặt xong; xem trang hướng
dẫn « man » interfaces(5).

6.3.1.5.1. Automatic network configuration

By default, debian-installer tries to configure your computer's network
automatically as far as possible. If the automatic configuration fails, that
may be caused by many factors ranging from an unplugged network cable to
missing infrastructure for automatic configuration. For further explanation in
case of errors, check the error messages on the fourth console. In any case,
you will be asked if you want to retry, or if you want to perform a manual
setup. Sometimes the network services used for autoconfiguration can be slow in
their responses, so if you are sure everything is in place, simply start the
autoconfiguration attempt again. If autoconfiguration fails repeatedly, you can
instead choose the manual network setup.

6.3.1.5.2. Manual network configuration

The manual network setup in turn asks you a number of questions about your
network, notably IP address, Netmask, Gateway, Name server addresses, and a
Hostname. Moreover, if you have a wireless network interface, you will be asked
to provide your Wireless ESSID ("wireless network name") and a WEP key or WPA/
WPA2 passphrase. Fill in the answers from Phần 3.3, "Thông tin cần thiết".

Ghi chú

Có vài chi tiết kỹ thuật có thể hữu ích: chương trình giả sử địa chỉ IP trên
mạng là giá trị VÀ theo ví trị bit (bitwise AND) của địa chỉ IP của hệ thống và
mặt nạ mạng. Địa chỉ quảng bá mặc định được tính như là HOẶC theo vị trí bit
(bitwise OR) của địa chỉ IP của hệ thống với sự phủ định của mặt nạ mạnh. Nó sẽ
cũng đoán cổng ra của bạn. Không tìm thấy thông tin này thì dùng những giá trị
mặc định đã cung cấp: nếu có thể, bạn cũng có thể sửa đổi giá trị như vậy bằng
cách chỉnh sửa tập tin /etc/network/interfaces một khi hệ thống được cài đặt.

6.3.1.5.3. IPv4 and IPv6

From Debian GNU/Linux 7.0 ("Wheezy") onwards, debian-installer supports IPv6 as
well as the "classic" IPv4. All combinations of IPv4 and IPv6 (IPv4-only,
IPv6-only and dual-stack configurations) are supported.

Autoconfiguration for IPv4 is done via DHCP (Dynamic Host Configuration
Protocol). Autoconfiguration for IPv6 supports stateless autoconfiguration
using NDP (Neighbor Discovery Protocol, including recursive DNS server (RDNSS)
assignment), stateful autoconfiguration via DHCPv6 and mixed stateless/stateful
autoconfiguration (address configuration via NDP, additional parameters via
DHCPv6).

6.3.2. Thiết lập Người dùng và Mật khẩu

Đúng trước khi cấu hình đồng hồ, trình cài đặt sẽ cho phép bạn thiết lập tài
khoản "root" và/hay một tài khoản cho người dùng đầu tiên. Một khi hoàn tất cài
đặt thì cũng có thể tạo tài khoản người dùng bổ sung.

6.3.2.1. Lập mật khẩu chủ

Tài khoản chủ (root) cũng được gọi là siêu người dùng; nó là cách đăng nhập mà
đi qua toàn bộ sự bảo vệ bảo mật trên máy tính. Tài khoản chủ nên được dùng chỉ
để quản trị hệ thống, và trong thời lượng càng ngắn càng có thể.

Mỗi mật khẩu bạn tạo phải chứa ít nhất 6 ký tự (nhiều hơn là mạnh hơn), gồm chữ
cả hoa lẫn thường, cùng với ký tự chấm câu. Hãy rất cẩn thận khi đặt mật khẩu
chủ (root) vì tài khoản đó có nhiều quyền quan trọng. Bạn nên tránh chọn từ nằm
trong bất kỳ từ điển hay thông tin cá nhân có thể được đoán.

Nếu người nào xin mật khẩu chủ của bạn, hãy rất cẩn thận. Bình thường, đừng cho
ai biết mật khẩu chủ, trừ bạn quản lý máy có nhiều quản trị hệ thống.

In case you do not specify a password for the "root" user here, this account
will be disabled but the sudo package will be installed later to enable
administrative tasks to be carried out on the new system. By default, the first
user created on the system will be allowed to use the sudo command to become
root.

6.3.2.2. Tạo người dùng chuẩn

Hệ thống sẽ hỏi nếu bạn muốn tạo một tài khoản người dùng chuẩn tại điểm thời
này. Tài khoản này nên là sự đăng nhập cá nhân chính của bạn. Bạn không nên
dùng tài khoản người chủ để làm việc hàng ngày hay như là sự đăng nhập cá nhân.

Tại sao không? Một lý do là để tránh sử dụng các quyền của người chủ, vì các
quyền này làm cho rất dễ dàng làm hại không thể sửa chữa. Một lý do khác là bạn
có thể bị mắc mưu chạy chương trình Trojan mà nhớ dịp các quyền của siêu người
dùng để hại thậm sự bảo mật của hệ thống bạn một cách bí mật. Bất kỳ cuốn sách
tốt về cách quản lý hệ thống UNIX sẽ diễn tả chủ đề này bằng chi tiết: đề nghị
bạn đọc nó nếu bạn chưa quen với vấn đề này.

Trước tiên, bạn sẽ được nhắc nhập họ tên của người dùng. Sau đó, bạn cần nhập
tên của tài khoản người dùng, như tên của bạn hay tên riêng khác nào (tên của
bạn là giá trị mặc định). Cuối cùng, bạn nên nhập mật khẩu dành cho tài khoản
này.

Nếu tại bất kỳ điểm thời sau khi cài đặt, bạn muốn tạo tài khoản thêm, hãy sử
dụng lệnh adduser (thêm người dùng).

6.3.3. Cấu hình Đồng hồ và Múi giờ

Trước tiên, trình cài đặt sẽ thử kết nối tới một máy phục vụ thời gian trên
Internet (dùng giao thức thời gian NTP) để đặt đúng thời gian của hệ thống.
Không thành công thì trình cài đặt giả sử ngày tháng và thời gian được lấy từ
đồng hồ hệ thống khi khởi động hệ thống cài đặt là đúng. Bạn không thể tự đặt
thời gian hệ thống trong khi cài đặt.

Phụ thuộc vào vị trí được chọn về trước trong tiến trình cài đặt, bạn có thể
xem danh sách các múi giờ thích hợp với vị trí đó đó. Nếu chỗ bạn chỉ có một
múi giờ và bạn đang làm một việc cài đặt mặc định thì trình cài đặt không hỏi
gì và hệ thống giả sử múi giờ đó.

Trong chế độ cấp cao, hoặc khi cài đặt ở mức ưu tiên Vừa, bạn có tuỳ chọn bổ
sung để chọn "Thời gian Thế giới" (UTC) làm múi giờ.

Nếu (vì lý do nào) bạn muốn đặt cho hệ thống đã cài đặt một múi giờ mà không
tương ứng với địa điểm đã chọn, có hai tùy chọn.

 1. Tùy chọn đơn giản nhất là chỉ chọn một múi giờ khác sau khi cài đặt xong và
    bạn đã khởi động hệ thống mới. Câu lệnh để làm như thế là:

    # dpkg-reconfigure tzdata

 2. Hoặc có thể đặt múi giờ ở đầu thật của tiến trình cài đặt, bằng cách gửi
    tham số time/zone=giá_trị khi bạn khởi chạy tiến trình cài đặt. Giá trị nên
    là múi giờ hợp lệ (xem /usr/share/zoneinfo) v.d. Asia/Saigon hay UTC.

Đối với tiến trình tự động cài đặt, cũng có thể đặt múi giờ dùng chức năng chèn
sẵn.

6.3.4. Phân vùng và chọn điểm lắp

Ở thời điểm này, sau khi việc phát hiện phần cứng đã được thực hiện lần cuối
cùng, debian-installer nên có khả năng đầy đủ, được tùy chỉnh thích hợp với sự
cần của người dùng riêng và sẵn sàng làm việc thật. Như tên phần này ngụ ý,
công việc chính của vài thành phần kế tiếp là phân vùng đĩa, tạo hệ thống tập
tin, gán điểm lắp và (tùy chọn) cấu hình các tùy chọn rất liên quan đến nhau
như LVM, thiết bị RAID và thiết bị đã mật mã.

Nếu bạn chưa quen với công việc phân vùng, hoặc chỉ muốn biết thêm, xem Phụ
lục C, Phân vùng cho Debian.

Trước tiên, bạn sẽ nhận dịp phân vùng tự động hoặc toàn bộ đĩa, hoặc sức chứa
còn rảnh có sẵn trên đĩa. Tiến trình này cũng được gọi như là phân vùng "đã
hướng dẫn". Nếu bạn không muốn phân vùng tự động, hãy chọn mục Bằng tay trong
trình đơn.

6.3.4.1. Tùy chọn phân vùng được hỗ trợ

Công cụ phân vùng được dùng trong debian-installer có nhiều chức năng. Nó cho
phép bạn tạo nhiều lược đồ phân vùng khác nhau, dùng các bảng phân vùng, hệ
thống tập tin và thiết bị khối cấp cao khác nhau.

Chính xác những tuỳ chọn sẵn sàng thì phụ thuộc vào kiến trúc, mà cũng vào các
nhân tố khác. Chẳng hạn, trên hệ thống có vùng nhớ nội bộ bị hạn chế, một số
tuỳ chọn nào đó có thể là không sẵn sàng. Giá trị mặc định cũng có thể biến
đổi. Kiểu bảng phân vùng dùng theo mặc định có thể (v.d.) là khác cho đĩa cứng
dung tích lớn sơ với đĩa cứng nhỏ. Một số tuỳ chọn nào đó chỉ có thể được thay
đổi khi cài đặt ở mức ưu tiên Debconf « vừa » hoặc « thấp »; ở mức ưu tiên «
cao » thì dùng giá trị mặc định thích hợp.

Trình cài đặt hỗ trợ nhiều phương pháp khác nhau đối với phân vùng cấp cao và
sử dụng thiết bị lưu trữ, mà trong nhiều trường hợp cũng có thể được sử dụng
với nhau.

  • Quản lý Khối Tin Hợp Lý (LVM)

  • RAID phần mềm

    Hỗ trợ các lớp RAID 0, 1, 4, 5, 6, 10.

  • Mật mã

  • RAID ATA nối tiếp (dùng dmraid)

    Cũng được gọi như là "RAID giả" (fake RAID) hay "BIOS RAID". Hiện thời chỉ
    hỗ trợ RAID ATA nối tiếp (Serial ATA RAID) nếu khả năng hỗ trợ đó được hiệu
    lực khi trình cài đặt được khởi động. Có thêm thông tin trong Wiki của
    chúng ta.

  • Đa đường dẫn (vẫn thực nghiệm)

    Xem Wiki của chúng ta để tìm thông tin. Hiện thời chỉ hỗ trợ chức năng đa
    đường dẫn nếu khả năng hỗ trợ đó được hiệu lực khi trình cài đặt được khởi
    động.

Hỗ trợ những hệ thống tập tin theo đây.

  • ext2, ext3, ext4

    Hệ thống tập tin mặc định được chọn trong phần lớn các trường hợp là ext4;
    đối với phân vùng /boot (khởi động) thì ext2 được chọn theo mặc định khi sử
    dụng chức năng phân vùng đã hướng dẫn.

  • jfs (không phải sẵn sàng trên mọi kiến trúc)

  • xfs (không phải sẵn sàng trên mọi kiến trúc)

  • reiserfs (vẫn tuỳ chọn; không sẵn sàng trên mọi kiến trúc)

    Hỗ trợ hệ thống tập tin Reiser không còn sẵn sàng lại theo mặc định. Khi
    trình cài đặt chạy ở mức ưu tiên Debconf « vừa » hay « thấp » thì cũng có
    thể hiệu lực nó bằng cách chọn thành phần partman-reiserfs. Chỉ hỗ trợ
    phiên bản 3 của hệ thống tập tin đó.

  • qnx4

    Mỗi phân vùng đã tồn tại sẽ được nhân ra, và có thể lập điểm gắn kết cho
    nó. Không thể tạo được phân vùng qnx4 mới.

  • FAT16, FAT32

  • NTFS (chỉ-đọc)

    Đối với phân vùng NTFS đã tồn tại, cũng có thể thay đổi kích cỡ và gán điểm
    lắp. Không thể tạo được phân vùng NTFS mới.

6.3.4.2. Phân vùng hướng dẫn

Nếu bạn chọn tiến trình phân vùng đã hướng dẫn, có lẽ bạn có ba tùy chọn nữa:
tạo phân vùng một cách trực tiếp trên đĩa cứng (phương pháp truyền thống), hoặc
tạo phân vùng bằng khả năng quản lý khối tin hợp lý (LVM), hoặc tạo phân vùng
bằng LVM đã mật mã^[9].

Ghi chú

Tùy chọn sử dụng LVM (đã mật mã) có lẽ không sẵn sàng trên mọi kiến trúc.

Khi sử dụng LVM hoặc LVM đã mật mã, bộ cài đặt sẽ tạo phần lớn phân vùng bên
trong cùng một phân vùng lớn; lợi ích của phương pháp này là các phân vùng bên
trong phân vùng lớn này có thể được thay đổi kích cỡ hơi dễ dàng về sau. Trong
trường hợp LVM đã mật mã, phân vùng lớn sẽ không có khả năng đọc nếu người dùng
không có cụm từ khoá đặc biệt, thì cung cấp bảo mật thêm cho dữ liệu (riêng)
của bạn.

Khi sử dụng LVM đã mật mã, bộ cài đặt sẽ cũng tự động xoá đĩa bằng cách ghi dữ
liệu ngẫu nhiên vào nó. Việc này cải tiến thêm bảo mật (vì nó tạo trường hợp
không thể tìm biết phần đĩa nào hoạt động và đảm bảo mọi vết của bản cài đặt
trước đã được xoá hoàn toàn), nhưng có thể kéo dài một lát phụ thuộc vào kích
cỡ của đĩa.

Ghi chú

Nếu bạn chọn tiến trình phân vùng đã hướng dẫn bằng LVM hoặc LVM đã mật mã, một
số thay đổi trong bảng phân vùng sẽ cần phải được ghi vào đĩa đã chọn trong khi
LVM được thiết lập. Các thay đổi này có kết quả là xoá hết dữ liệu nằm trên đĩa
cứng đã chọn, và bạn không thể hủy bước này. Tuy niên, bộ cài đặt sẽ nhắc bạn
xác nhận các thay đổi này trước khi ghi vào đĩa.

Nếu bạn chọn tiến trình phân vùng theo hướng dẫn (hoặc kiểu truyền thống hoặc
bằng LVM (đã mã hóa)) cho toàn bộ đĩa, trước tiên bạn sẽ được nhắc chọn đĩa bạn
muốn dùng. Hãy kiểm tra xem tất cả các đĩa được liệt kê và, nếu bạn có nhiều
đĩa, hãy chắc rằng bạn đã chọn đúng đĩa. Thứ tự liệt kê chúng có thể khác với
thứ tự bạn đã quen. Kích cỡ của đĩa có thể giúp đỡ bạn nhận diện chúng.

Mọi dữ liệu nằm trên đĩa bạn chọn sẽ bị mất hoàn toàn, nhưng bạn sẽ luôn luôn
được nhắc xác nhận thay đổi trước khi ghi vào đĩa. Nếu bạn đã chọn phương pháp
phân vùng truyền thống, bạn sẽ có khả năng hủy các thay đổi đến ngay khi kết
thúc; còn khi sử dụng LVM (đã mã hóa), không thể thực hiện việc này.

Sau đó, bạn có khả năng chọn trong những giản đồ được liệt kê trong bảng bên
dưới. Mọi giản đồ có thuận và chống, một số điều này được thảo luận trong Phụ
lục C, Phân vùng cho Debian. Nếu bạn chưa chắc, hãy chọn giản đồ thứ nhất. Ghi
nhớ rằng tiến trình phân vùng đã hướng dẫn cần thiết một sức chứa còn rảnh tối
thiểu để thao tác. Nếu bạn không gán cho nó ít nhất khoảng 1 GB sức chứa (phụ
thuộc vào giản đồ đã chọn), tiến trình phân vùng đã hướng dẫn sẽ không thành
công.

┌────────────────────────────────────┬────────────┬───────────────────────────┐
│          Bố trí phân vùng          │  Chỗ tối   │     Phân vùng đã tạo      │
│                                    │   thiểu    │                           │
├────────────────────────────────────┼────────────┼───────────────────────────┤
│Mọi tập tin trên một phân vùng      │600MB       │/, trao đổi                │
├────────────────────────────────────┼────────────┼───────────────────────────┤
│Phân vùng /home riêng               │500MB       │/, /home, trao đổi         │
├────────────────────────────────────┼────────────┼───────────────────────────┤
│Các phân vùng /home, /var, và /tmp  │1GB         │/, /home, /var, /tmp, trao │
│riêng                               │            │đổi                        │
└────────────────────────────────────┴────────────┴───────────────────────────┘

Nếu bạn chọn tiến trình phân vùng đã hướng dẫn bằng LVM (đã mật mã), trình cài
đặt sẽ cũng tạo một phân vùng /boot riêng. Các phân vùng khác, bao gồm phân
vùng trao đổi, sẽ được tạo bên trong phân vùng LVM.

If you have booted in EFI mode then within the guided partitioning setup there
will be an additional partition, formatted as a FAT32 bootable filesystem, for
the EFI boot loader. This partition is known as an EFI System Partition (ESP).
There is also an additional menu item in the formatting menu to manually set up
a partition as an ESP.

Sau khi bạn chọn bố trí, màn hình kế tiếp sẽ hiển thị bảng phân vùng mới, gồm
có thông tin về trạng thái kiểu định dạng và gắn kết của mỗi phân vùng.

Danh sách các phân vùng có thể hình như :

  SCSI1 (0,0,0) (sda) - 6.4 GB WDC AC36400L
        #1 primary   16.4 MB  B f ext2       /boot
        #2 primary  551.0 MB      swap       swap
        #3 primary    5.8 GB      ntfs
           pri/log    8.2 MB      FREE SPACE

  SCSI2 (1,0,0) (sdb) - 80.0 GB ST380021A
        #1 primary   15.9 MB      ext3
        #2 primary  996.0 MB      fat16
        #3 primary    3.9 GB      xfs        /home
        #5 logical    6.0 GB    f ext4       /
        #6 logical    1.0 GB    f ext3       /var
        #7 logical  498.8 MB      ext3

[primary=chính; swap=trao đổi; FREE SPACE=sức chứa còn rảnh; logical=hợp lý
(không phải vật lý)] Mẫu này hiển thị hai đĩa cứng kiểu được chia ra vài phân
vùng; đĩa thứ nhất có sức chứa còn rảnh. Mỗi dòng phân vùng có dạng: số hiệu
phân vùng, kiểu nó, kích cỡ nó, cờ tùy chọn nào, hệ thống tập tin, điểm láp
(nếu có). Ghi chú : thiết lập riêng này không thể được tạo khi dùng khả năng
phân vùng đã hướng dẫn, nhưng nó có phải hiển thị trường hợp khác có thể được
đạt khi tự phân vùng.

Ở đây kết thúc tiến trình phân vùng đã hướng dẫn. Nếu bạn thấy bảng phân vùng
đã tạo ra là ổn định, sau đó bạn có khả năng chọn mục Phân vùng xong và ghi các
thay đổi vào đĩa trong trình đơn, để thực hiện bảng phân vùng mới (như được
diễn tả tại cuối phần này). Còn nếu bạn chưa thỏa chí, bạn có thể chọn mục Hủy
các bước thay đổi phân vùng để chay lại tiến trình phân vùng đã hướng dẫn, hoặc
sửa đổi các thay đổi đã đề nghị (như được diễn tả bên dưới) cho việc tự phân
vùng.

6.3.4.3. Phân vùng bằng tay

Một màn hình tương tự với hình được hiển thị đúng trên đây sẽ được trình bày
nếu bạn chọn phân vùng bằng tay, trừ là bảng phân vùng đã có sẽ được hiển thị
mà không có điểm lắp. Phần còn lại của tiết đoạn này sẽ diễn tả cách thiết lập
bằng tay bảng phân vùng và cách sử dụng phân vùng cho hệ thống Debian mới.

Nếu bạn chọn một đĩa rỗng không có phân vùng, cũng không có sức chứa rảnh, bạn
sẽ được nhắc tạo một bảng phân vùng mới (cần thiết để tạo phân vùng mới). Sau
đó, một dòng mới tên "CHỖ TRỐNG" nên xuất hiện trong bảng, bên dưới tên đĩa đã
chọn.

Nếu bạn chọn một phần sức chứa còn rảnh, bạn sẽ có dịp tạo một phân vùng mới.
Tiến trình sẽ hỏi vài câu về kích cỡ, kiểu (chính hay hợp lý) và vị trí (đầu
hay cuối của sức chứa còn rảnh) của phân vùng mới này. Sau đó, bạn sẽ xem toàn
cảnh chi tiết về phân vùng mới. Thiết lập chính là Dùng làm:, mà quyết định nếu
phân vùng sẽ chứa hệ thống tập tin, được dùng như là vùng trao đổi, RAID phần
mềm, LVM, hệ thống tập tin đã mật mã, hoặc không được dùng bằng cách nào cả.
Các thiết lập khác gồm điểm lắp, các tùy chọn lắp, cờ khả năng khởi động; những
thiết lập được hiển thị phụ thuộc vào mục đích của phân vùng. Nếu bạn không
thích những giá trị mặc định định sẵn, chỉnh sửa nhé. Chẳng hạn, bằng cách chọn
tùy chọn Dùng làm:, bạn có khả năng chọn hệ thống tập tin khác cho phân vùng
này, gồm tùy chọn dùng phân vùng cho vùng trao đổi, RAID phần mềm, LVM, hoặc
không dùng nó bằng cách nào cả. Khi phân vùng mới ổn thỏa, hãy chọn Phân vùng
đã được thiết lập rồi tiến trình sẽ trở về màn hình chính của partman.

Muốn sửa đổi phân vùng này thì đơn giản hãy chọn phân vùng, việc đó hiển thị
trình đơn cấu hình phân vùng. Đây là cùng một màn hình với điều cho khả năng
tạo phân vùng mới, vì thế bạn có thể sửa đổi cùng những tùy chọn. Bạn cũng có
khả năng thay đổi kích cỡ của phân vùng bằng cách chọn mục hiển thị kích cỡ
phân vùng. Những hệ thống tập tin được biết là hoạt động được trong trường hợp
này là ít nhất fat16, fat32, ext2, ext3 và vùng trao đổi. Trình đơn này cũng
cho bạn có khả năng xoá phân vùng.

Hãy kiểm tra xem bạn đã tạo ít nhất hai phân vùng: một điều cho hệ thống tập
tin gốc (mà phải được gắn kết như là /) và điều khác cho bộ nhớ trao đổi. Nếu
bạn quên gắn kết hệ thống tập tin gốc, chương trình partman sẽ không cho phép
bạn tiếp tục, cho đến khi bạn sửa trường hợp này.

If you boot in EFI mode but forget to select and format an EFI System
Partition, partman will detect this and will not let you continue until you
allocate one.

Các khả năng của chương trình partman có thể được kéo dài bằng mô-đun cài đặt,
phụ thuộc vào kiến trúc của hệ thống bạn. Vì vậy nếu bạn không thể xem mọi tính
năng đã diễn tả, hãy kiểm tra xem nếu bạn đã tải mọi mô-đun cần thiết chưa
(v.d. partman-ext3, partman-xfs, hay partman-lvm).

Sau khi bạn thấy trường hợp phân vùng là ổn thỏa, hãy chọn Phân vùng xong và
ghi các thay đổi vào đĩa trong trình đơn phân vùng. Bạn sẽ xem bản tóm tắt các
thay đổi trên đĩa, và được nhắc xác nhận các hệ thống tập tin nên được tạo như
được yêu cầu.

6.3.4.4. Cấu hình thiết bị đa đĩa (RAID phần mềm)

Có nhiều đĩa cứng^[10] trong máy tính thì bạn có thể sử dụng công cụ partman-md
để thiết lập các ổ đĩa bằng một cách tăng hiệu suất và/hay tăng tính đáng tin
cậy của dữ liệu. Kết quả được gọi là Thiết bị Đa Đĩa (hoặc theo biến thể nổi
tiếng nhất RAID phần mềm).

Thiết bị đa đĩa là cơ bản một bộ phân vùng nằm trên nhiều đĩa khác nhau, được
kết hợp với nhau để tạo một thiết bị hợp lý. Vì vậy thiết bị này có thể được
dùng như một phân vùng chuẩn (tức là trong chương trình partman bạn có thể định
dạng nó, gán điểm lắp v.v.).

Lợi ích kết quả cũng phụ thuộc vào loại thiết bị MD được tạo. Hiện thời hỗ trợ
những loại MD:

RAID0

    Mục đích chính là tăng hiệu suất. RAID0 chia tách tất cả các dữ liệu gửi
    đến ra các lát khác nhau, và phân phối chúng một cách đều đặn trên mỗi đĩa
    trong mảng đó. Bố trí này có thể tăng tốc độ của thao tác đọc/ghi, nhưng mà
    nếu chỉ một đĩa thất bại thì bạn mất tất cả (một phần thông tin vẫn còn nằm
    trên các đĩa đang hoạt động, phần khác đã nằm trên đĩa chết).

    Bình thường RAID0 dùng làm một phân vùng để chỉnh sửa ảnh động (một thao
    tác cần rất nhiều tài nguyên).

RAID1

    RAID1 thích hợp với thiết lập quan tâm chính với sự đáng tin cậy. Nó bao
    gồm vài (thường là hai) phân vùng kích cỡ đều mà mỗi phiên bản chứa chính
    xác cùng một tập hợp dữ liệu. Về cơ bản có ba kết quả. Đầu tiên, nếu một
    đĩa thất bại, bạn vẫn còn có dữ liệu trùng trên đĩa còn lại. Thứ hai, bạn
    chỉ có thể sử dụng một phần của khả năng thật (chính xác hơn, phần này là
    kích cỡ của phiên bản nhỏ nhất trong RAID đó). Thứ ba, các thao tác đọc tập
    tin được cân bằng theo trọng tải qua các đĩa, mà có thể tăng hiệu suất trên
    một máy phục vụ (v.d. máy phục vụ tập tin) mà thường phải thực hiện nhiều
    thao tác đọc đĩa hơn ghi.

    Tuỳ chọn bạn cũng có thể gán một đĩa bổ sung trong mảng, để thay thế đĩa
    chết trong trường hợp đó.

RAID5

    RAID5 thoả hiệp hữu ích tốc độ, sự đáng tin cậy và sự thừa dư dữ liệu. Mảng
    kiểu này chia tách tất cả các dữ liệu gửi đến ra các lát, và phân phối
    chúng một cách đều đặn trên tất cả trừ một đĩa ra (tương tự với RAID0).
    Khác với RAID0, mảng RAID5 cũng tính thông tin tính chẵn lẻ, mà được ghi
    vào đĩa còn lại. Đĩa chẵn lẻ không phải tĩnh (có thì được gọi là RAID4),
    nhưng biến đổi định kỳ, để thông tin tính chẵn lẻ được phân phối đều đặn
    trên tất cả các đĩa. Nếu một đĩa thất bại, phần thông tin còn thiếu vẫn có
    thể được tính từ dữ liệu còn lại và tính chẵn lẻ của nó. Mảng RAID5 phải
    bao gồm ít nhất ba phân vùng hoạt động. Tuỳ chọn bạn có thể gán một đĩa bổ
    sung trong mảng, để thay thế đĩa chết trong trường hợp đó.

    Như bạn thấy ở đây, mảng RAID5 có mức tin cậy tương tự với RAID1, còn làm
    ít sự thừa dư hơn. Mặt khác, so với RAID0 nó có thể chạy chậm hơn một ít
    khi ghi dữ liệu, do tính thông tin chẵn lẻ.

RAID6

    Mảng RAID6 tương tự với RAID5 trừ nó sử dụng hai thiết bị chẵn lẻ thay cho
    một.

    Một mảng RAID6 có khả năng phục hồi sau khi hai đĩa thất bại.

RAID10

    Mảng RAID10 kết hợp chức năng chia dữ liệu ra các lát (như RAID0) và bảo
    tồn dữ liệu trùng (như RAID1). Nó tạo n bản sao của dữ liệu gửi đến, và
    phân phối chúng qua các phân vùng khác nhau để mỗi thiết bị chứa nhiều nhất
    một bản sao. Giá trị mặc định của n là 2, nhưng nó có thể được đặt thành
    một số khác trong chế độ cấp cao. Số các phiên bản được dùng phải là ít
    nhất n. Mảng RAID10 có vài bố trí khác nhau để phân phối các bản sao dữ
    liệu. Mặc định là các bản sao ở gần. Bố trí các bản sao ở gần thì phân phối
    tất cả các bản sao theo khoảng cùng một hiệu số trên mọi đĩa. Bố trí các
    bản sao ở xa thì phân phối tất cả các bản sao theo hiệu số khác nhau trên
    mọi đĩa. Bản sao ở hiệu số chỉ sao chép lát dữ liệu, không phải bản sao
    riêng.

    Mảng RAID10 có thể được dùng để gây ra sự đáng tin cậy và sự thừa dư mà
    không cần tính chẵn lẻ.

Để tóm tắt:

┌──────┬────────┬────────┬──────────────────┬─────────────────────────────────┐
│      │Thiết bị│Thiết bị│Vẫn còn hoạt động │                                 │
│ Kiểu │  tối   │phụ tùng│ sau khi đĩa thất │          Chỗ sẵn sàng           │
│      │ thiểu  │        │      bại ?       │                                 │
├──────┼────────┼────────┼──────────────────┼─────────────────────────────────┤
│RAID0 │2       │không   │không             │Kích cỡ của phân vùng nhỏ nhất   │
│      │        │        │                  │được nhân số thiết bị trong RAID │
├──────┼────────┼────────┼──────────────────┼─────────────────────────────────┤
│RAID1 │2       │tùy chọn│có                │Kích cỡ của phân vùng nhỏ nhất   │
│      │        │        │                  │trong RAID                       │
├──────┼────────┼────────┼──────────────────┼─────────────────────────────────┤
│      │        │        │                  │Kích cỡ của phân vùng nhỏ nhất   │
│RAID5 │3       │tùy chọn│có                │nhận lên (số thiết bị trong RAID │
│      │        │        │                  │trừ một)                         │
├──────┼────────┼────────┼──────────────────┼─────────────────────────────────┤
│      │        │        │                  │Kích cỡ của phân vùng nhỏ nhất   │
│RAID6 │4       │tùy chọn│có                │nhận lên (số thiết bị trong RAID │
│      │        │        │                  │trừ hai)                         │
├──────┼────────┼────────┼──────────────────┼─────────────────────────────────┤
│      │        │        │                  │Tổng số các phiên bản chia cho số│
│RAID10│2       │tùy chọn│có                │các bản sao đoạn (mặc định là    │
│      │        │        │                  │hai)                             │
└──────┴────────┴────────┴──────────────────┴─────────────────────────────────┘

Muốn biết thêm về RAID kiểu phần mềm, hãy xem tài liệu RAID phần mềm Thế Nào
Software RAID HOWTO.

Để tạo một thiết bị đa đĩa, bạn cần phải chuẩn bị bằng cách đánh dấu các phân
vùng đã muốn. (Làm như thế trong trình partman, trong trình đơn Thiết lập phân
vùng nơi bạn nên chọn mục Dùng làm: → khối tin vật lý cho RAID.)

Ghi chú

Make sure that the system can be booted with the partitioning scheme you are
planning. In general it will be necessary to create a separate file system for
/boot when using RAID for the root (/) file system. Most boot loaders 
(including grub) do support mirrored (not striped!) RAID1, so using for example
RAID5 for / and RAID1 for /boot can be an option.

Sau đó, bạn nên chọn mục Cấu hình RAID phần mềm trong trình đơn partman chính.
(Trình đơn này sẽ xuất hiện chỉ sau khi bạn đánh dấu ít nhất một phân vùng sẽ
được dùng là khối tin vật lý cho RAID.) Trên màn hình thứ nhất của tiện ích 
partman-md, đơn giản hãy chọn mục Tạo thiết bị đa đĩa (MD). Bạn sẽ xem danh
sách các thiết bị đa đĩa được hỗ trợ, trong đó bạn nên chọn một thiết bị (v.d.
RAID1). Kết quả phụ thuộc vào kiểu thiết bị đa đĩa bạn đã chọn.

  • RAID0 là đơn giản -- bạn sẽ xem danh sách các phân vùng RAID sẵn sàng, và
    công việc duy nhất của bạn là việc chọn những phân vùng sẽ tạo thành thiết
    bị đa đĩa.

  • RAID1 phức tạp hơn một chút. Trước tiên, bạn sẽ được nhắc nhập số các thiết
    bị hoạt động và số các thiết bị bổ sung sẽ cộng lại để làm thiết bị đa đĩa
    (MD). Sau đó, trong danh sách các phân vùng RAID sẵn sàng, bạn cần phải
    chọn những phân vùng nên hoạt động, và những phân vùng là phụ tùng. Số đếm
    phân vùng đã chọn phải bằng với số được cung cấp về trước vài giây. Đừng lo
    lăng: nếu bạn làm lỗi, chọn số phân vùng khác, debian-installer không cho
    phép bạn tiếp tục cho đến khi bạn sửa vấn đề.

  • RAID5 có thủ tục thiết lập tương tự với RAID1, trừ bạn cần phải sử dụng ít
    nhất ba phân vùng hoạt động.

  • RAID6 có thủ tục thiết lập tương tự với RAID1, trừ bạn cần thiết ít nhất 
    bốn phân vùng hoạt động.

  • RAID10 lại có thủ tục thiết lập tương tự với RAID1 trừ trong chế độ cấp
    cao. Trong chế độ cấp cao, debian-installer sẽ nhắc bạn tạo bố trí. Bố trí
    có hai phần khác nhau. Phần trước là kiểu bố trí: n (sao chép ở gần), hay f
    (bản sao ở xa), hay o (sao chép theo hiệu số). Phần sau là số các bản sao
    dữ liệu cần làm. Số này không thể vượt quá số các thiết bị hoạt động, để
    phân phối mỗi bản sao trên một đĩa riêng.

Rất có thể sử dụng đồng thời vài kiểu thiết bị đa đĩa (MD). Chẳng hạn, nếu bạn
có ba đĩa cứng 200 GB cả dành cho thiết bị đa đĩa, mỗi đĩa chứa hai phân vùng
100 GB, trong trường hợp này bạn có khả năng kết hợp phân vùng thứ nhất trên cả
ba đĩa cứng để tạo RAID0 (phân vùng soạn thảo ảnh động 300 GB nhanh) và sử dụng
ba phân vùng khác (2 hoạt động và 1 phụ tùng) như là RAID1 (phân vùng 100 GB
hơi đáng tin cậy cho /home).

Sau khi bạn thiết lập được các thiết bị đa đĩa, bạn có thể Kết thúc tiện ích 
partman-md để lùi lại về trình partman, để tạo hệ thống tập tin trên các thiết
bị đa đĩa mới, và gán cho chúng những thuộc tính thường như điểm lắp.

6.3.4.5. Cấu hình Bộ Quản lý Khối Tin Hợp Lý (LVM)

Nếu bạn làm việc với máy tính tại lớp quản trị hệ thống hay người dùng "cấp cao
", chắc là bạn đã xem trường hợp mà phân vùng nào (thường điều quan trọng nhất)
không có đủ sức chứa còn rảnh, còn phân vùng khác nào được dùng rất ít, nên bạn
phải quản lý trường hợp đó bằng cách di chuyển các thứ, tạo liên kết tượng
trưng v.v.

Để tránh trường hợp như vậy, bạn có thể sử dụng Bộ Quản Lý Khối Tin Hợp Lý
(LVM). Nói đơn giản, bằng LVM bạn có thể kết hợp các phân vùng (khối tin vật lý
trong thuật ngữ LVM) để tạo một đĩa ảo (được gọi như là nhóm khối tin), mà do
đó có thể được chia cho nhiều phân vùng ảo (khối tin hợp lý). Điểm có ích là
khối tin hợp lý (và các nhóm khối tin cơ sở) có thể chiều dài qua vài đĩa vật
lý.

Như thế thì khi bạn thấy biết cần thiết sức chứa thêm cho phân vùng /home 160GB
cũ, bạn có thể thêm đơn giản một đĩa 300GB mới vào máy tính, nối lại nó với
nhóm khối tin tồn tại, rồi thay đổi kích cỡ của khối tin hợp lý chứa hệ thống
tập tin /home và thì đấy -- các người dùng lại có chỗ còn rảnh trên phân vùng
460GB đã gia hạn. (Mẫu này là hơi đơn giản.) Có thông tin chi tiết trong tài
liệu LVM Thế Nào LVM HOWTO.

Tiến trình thiết lập LVM trong debian-installer là hơi đơn giản, hoàn toàn được
hỗ trợ bên trong partman. Đầu tiên, bạn cần phải đánh dấu (những) phân vùng cần
dùng như là khối tin vật lý cho LVM.. (Làm như thế trong trình đơn Thiết lập
phân vùng nơi bạn nên chọn mục Dùng làm: → khối tin vật lý cho LVM.)

Cảnh báo

Be aware: the new LVM setup will destroy all data on all partitions marked with
an LVM type code. So, if you already have an LVM on some of your disks, and
want to install Debian additionally to that machine, the old (already existing)
LVM will be wiped out! The same counts for partitions, which are (for any
reason) misleadingly marked with an LVM type code, but contain something
different (like an encrypted volume). You need to remove such disks from the
system, before performing a new LVM setup!

Khi bạn trở về màn hình partman chính, bạn sẽ xem một tùy chọn mới Cấu hình Bộ
Quản lý Khốí tin Hợp lý. Khi bạn chọn mục đó, tiến trình sẽ nhắc bạn xác nhận
thay đổi nào sắp làm trong bảng phân vùng, sau đó sẽ hiển thị trình đơn cấu
hình LVM. Bên trên trình đơn có hiển thị một bản tóm tắt cấu hình LVM. Trình
đơn chính nó tùy thuộc ngữ cảnh, chỉ hiển thị những hành động hợp lệ. Những
hành động có thể là:

  • Hiển thị chi tiết cấu hình: hiển thị cấu trúc thiết bị LVM, các tên và kích
    cỡ của khối tin hợp lý, v.v.

  • Tạo nhóm khối tin

  • Tạo khối tin hợp lệ

  • Xóa nhóm khối tin

  • Xóa khối tin hợp lệ

  • Kéo dài nhóm khối tin

  • Giảm nhóm khối tin

  • Kết thúc: trở về màn hình partman chính

Hãy sử dụng những tùy chọn trong trình đơn đó để tạo một nhóm khối tin, rồi tạo
các khối tin hợp lý bên trong nó.

Sau khi bạn lùi lại về màn hình partman chính, khối tin hợp lý đã tạo nào sẽ
được hiển thị đúng như phân vùng chuẩn (bạn cũng nên thao tác nó như vậy).

6.3.4.6. Cấu hình khối tin được mật mã

debian-installer cho bạn khả năng thiết lập khối tin được mật mã. Mỗi tập tin
bạn ghi vào phân vùng như vậy được lưu mật mã ngay vào thiết bị đó. Chỉ người
dùng nhập cụm từ mật khẩu được nhập để tạo phân vùng gốc có quyền truy cập dữ
liệu đã mật mã trên nó. Tính năng này bảo vệ dữ liệu nhạy cảm, trong trường hợp
máy tính xách tay hay đĩa cứng bị mất cắp. Kẻ trộm có thể truy cập đĩa cứng một
cách vật lý, nhưng mà nếu ta không biết cụm từ mật khẩu đúng, dữ liệu nằm trên
đĩa cứng sẽ hình như ký tự ngẫu nhiên thôi.

The two most important partitions to encrypt are: the home partition, where
your private data resides, and the swap partition, where sensitive data might
be stored temporarily during operation. Of course, nothing prevents you from
encrypting any other partitions that might be of interest. For example /var
where database servers, mail servers or print servers store their data, or /tmp
which is used by various programs to store potentially interesting temporary
files. Some people may even want to encrypt their whole system. Generally the
only exception here is the /boot partition which must remain unencrypted,
because historically there was no way to load the kernel from an encrypted
partition. (GRUB is now able to do that, but debian-installer currently lacks
native support for encrypted /boot. The setup is therefore covered in a
separate document.)

Ghi chú

Ghi chú rằng phân vùng được mật mã có hiệu suất ít hơn phân vùng không mật mã,
vì dữ liệu cần phải được giải mật mã hay mật mã trong mỗi việc đọc hay ghi. Tác
động hiệu suất phụ thuộc vào tốc độ của CPU, kiểu mật mã và độ dài của khoá.

Để sử dụng khả năng mật mã, bạn cần phải tạo một phân vùng mới bằng cách chọn
một phần sức chứa còn rảnh trong trình đơn phân vùng chính. Hoặc có thể chọn
một phân vùng tồn tại (v.d. một phân vùng chuẩn, một khối tin hợp lý LVM hay
một khối tin RAID). Trong trình đơn Thiết lập phân vùng, bạn cần chọn mục khối
tin vật lý cho sự mật mã tại tùy chọn Dùng làm:. Trình đơn lúc đó thay đổi để
hiển thị vài tùy chọn mật mã cho phân vùng đó.

The encryption method supported by debian-installer is dm-crypt (included in
newer Linux kernels, able to host LVM physical volumes).

Let's have a look at the options available when you select encryption via
Device-mapper (dm-crypt). As always: when in doubt, use the defaults, because
they have been carefully chosen with security in mind.

Mật mã: aes

    Tùy chọn này cho bạn khả năng chọn thuật toán mật mã (cipher) sẽ được dùng
    để mật mã dữ liệu nằm trên phân vùng đó. debian-installer hiện thời hỗ trợ
    những thuật toán mật mã khối này: aes, blowfish, serpent, twofish. Khả năng
    của mỗi thuật toán ở ngoại phạm vị của tài liệu này, nhưng mà thông tin có
    thê giúp đỡ bạn quyết định là trong năm 2000, AES được chọn bởi Viện Tiêu
    Chuẩn và Kỹ Thuật Quốc Gia Mỹ (American National Institute of Standards and
    Technology) là thuật toán mật mã tiêu chuẩn để bảo vệ thông tin nhạy cảm
    trong thế kỷ thứ hai mươi mốt.

Dài khoá:256

    Ở đây bạn có khả năng xác định độ dài của khoá mật mã. Khoá dài hơn thường
    mật mã mạnh hơn. Mặt khác, khoá dài hơn thường cũng giảm hiệu suất. Những
    độ dài khoá sẵn sàng phụ thuộc vào thuật toán mật mã.

Thuật toán IV: xts-plain64

    Thuật toán Véc-tơ sở khởi hay IV được dùng khi mật mã để đảm bảo việc áp
    dụng thuật toán cho cùng một đoạn thô với cùng một khoá sẽ luôn luôn tạo
    đoạn mật mã duy nhất. Mục đích là chặn người tấn công suy luận thông tin
    nào ra mẫu xảy ra nhiều lần trong dữ liệu đã mật mã.

    Trong những xen kẽ được cung cấp, xts-plain64 hiện thời khó nhất bị tấn
    công bằng cách được biết. Hãy dùng xen kẽ khác chỉ khi bạn cần phải chắc là
    tương thích với hệ thống được cài đặt trước mà không có khả năng dùng thuật
    toán mới hơn.

Khoá mật mã: Cụm từ mật khẩu

    Ở đây bạn có thể chọn kiểu khoá mật mã cho phân vùng này.

    Cụm từ mật khẩu

        Khoá mật mã sẽ được tính^[11] dựa vào cụm từ mật khẩu bạn có thể nhập
        vào lúc sau trong tiến trình.

    Khoá ngẫu nhiên

        Một khoá mật mã mới sẽ được tạo ra từ dữ liệu ngẫu nhiên khi nào bạn
        thử lắp phân vùng được mật mã. Tức là khi nào tắt máy tính, nội dung
        của phân vùng này sẽ bị mất khi khoá bị xoá bỏ ra bộ nhớ. (Tất nhiên,
        bạn có thể thử đoán khoá đó, dùng chương trình đoán, sự tấn công sức
        mạnh vũ phu, nhưng mà nếu thuật toán mật mã không có sở đoản chưa được
        biết, sự tấn công kiểu này không thể thành công trong đời sống của
        bạn.)

        Khoá ngẫu nhiên có ích đối với phân vùng trao đổi, vì bạn không cần nhớ
        cụm từ mật khẩu hoặc nhớ xoá sạch thông tin nhạy cảm ra phân vùng trao
        đổi trước khi tắt máy tính. Tuy nhiên, bạn sẽ cũng không có khả năng
        dùng chức năng "ngưng đến đĩa" (suspend-to-disk) do hạt nhân Linux mới
        hơn cung cấp, vì không thể phục hồi dữ liệu được ngưng đã được ghi vào
        phân vùng trao đổi, khi khởi động lại.

Xoá bỏ dữ liệu : có

    Quyết định nếu nội dung của phân vùng này nên được ghi đè bằng dữ liệu ngẫu
    nhiên trước khi thiết lập mật mã. Khuyên bạn dùng tính năng này, nếu không
    thì người tấn công có thể tím biết phần nào của phân vùng đang được dùng
    hay không. Hơn nữa, tính năng này làm cho khó hơn việc phục hồi dữ liệu còn
    lại của bản cài đặt trước.^[12].

Sau khi bạn chọn những tham số thích hợp với những phân vùng đã mật mã, hãy trở
về trình đơn phân vùng chính. Lúc đó, nên có một mục trình đơn mới: Cấu hình
khối tin đã mật mã. Sau khi chọn nó, bạn sẽ được nhắc xác nhận việc xoá bỏ dữ
liệu nằm trên phân vùng nào được đánh dấu để bị xoá sạch, cũng có lẽ một số
hành động khác, như việc ghi một bảng phân vùng mới. Đối với phân vùng lớn, có
thể kéo dài một lát.

Sau đó, bạn sẽ được nhắc nhập một cụm từ mật khẩu cho phân vùng nào được cấu
hình để sử dụng nó. Cụm từ mật khẩu tốt:

  • có độ dài hơn 8 ký tự (dài hơn là mạnh hơn)

  • phối hợp với nhau cả chữ hoa/thường, chữ số và ký tự khác

  • không chứa từ nào nằm trong từ điển, hay từ nào liên quan dễ đến bạn (v.d.
    ngày sinh, sở thích, tên của gia đình hay bạn bè): không chứa từ nào chương
    trình có thể tìm kiếm hoặc người khác có thể đoán.

Cảnh báo

Trước khi nhập cụm từ mật khẩu nào, bạn nên chắc là bàn phím được cấu hình
đúng, để tạo ra những ký tự thích hợp. Nếu chưa chắc, bạn có thể chuyển đổi
sang bàn giao tiếp ảo thứ hai, rồi gõ một số chữ tại dấu nhắc. Sự thử ra này
đảm bảo bạn sẽ không bị ngạc nhiên sau này, chẳng hạn bằng cách thử nhập cụm từ
mật khẩu bằng bố trí bàn phím tiếng Việt, khi bạn đã sử dụng bố trí tiếng Anh
(hay bố trí tiếng Việt khác) để nhập cụm từ mật khẩu gốc trong khi cài đặt. Có
lẽ bạn đã chuyển đổi sang bố trí khác vào lúc nào trong tiến trình cài đặt,
hoặc bố trí thường dùng chưa được thiết lập khi bạn nhập cụm từ mật khẩu cho hệ
thống tập tin gốc. Khuyên bạn luôn luôn kiểm tra xem bố trí bàn phím nào được
dùng, trước khi nhập mật khẩu kiểu nào.

Nếu bạn đã chọn dùng phương pháp khác với cụm từ mật khẩu để tạo những khoá mật
mã, chúng sẽ được tạo ra vào lúc này. Vì hạt nhân có lẽ chưa tập hợp đủ dữ liệu
ngẫu nhiên trong giai đoạn cài đặt sớm này, tiến trình này có thể mất nhiều
thời gian. Bạn có thể tăng tốc độ bằng cách tạo ra dữ liệu ngẫu nhiên: v.d. bấm
phím ngẫu nhiên, hoặc chuyển đổi sang trình bao trên bàn giao tiếp ảo thứ nhất
rồi tạo ra giao thông trên mạng và đĩa (tải về tập tin, nạp tập tin lớn vào /
dev/null). Tiến trình này được lặp lại cho mỗi phân vùng cần mật mã.

After returning to the main partitioning menu, you will see all encrypted
volumes as additional partitions which can be configured in the same way as
ordinary partitions. The following example shows a volume encrypted via
dm-crypt.

Encrypted volume (sda2_crypt) - 115.1 GB Linux device-mapper
     #1 115.1 GB  F ext3

Now is the time to assign mount points to the volumes and optionally change the
file system types if the defaults do not suit you.

Pay attention to the identifiers in parentheses (sda2_crypt in this case) and
the mount points you assigned to each encrypted volume. You will need this
information later when booting the new system. The differences between the
ordinary boot process and the boot process with encryption involved will be
covered later in Phần 7.2, "Gắn kết khối tin đã mật mã".

Một khi bạn thấy sơ đồ phân vùng là ổn thoả, hãy tiếp tục cài đặt.

6.3.5. Cài đặt Hệ thống Cơ bản

Mặc dù giai đoạn này là đơn giản nhất, nó chiếm một phần đáng kể của tiến trình
cài đặt vì nó tải về, thẩm tra và giải nén toàn bộ hệ thống cơ bản. Nếu máy
tính hay sự kết nối mạng của bạn có chạy chậm, giai đoạn này có thể kéo dài một
lát.

Trong khi cài đặt hệ thống cơ bản, các thông điệp về cách giải nén gói và thiết
lập được chuyển tiếp tới thiết bị cuối tty4. Có thể truy cập nó bằng cách bấm
tổ hợp phím Alt trái+F4, và lùi lại về tiến trình cài đặt chính bằng Alt trái+
F1.

Các thông điệp kiểu giải nén/thiết lập được tạo ra trong giải đoạn này cũng
được lưu vào bản ghi hệ thống /var/log/syslog. Bạn vẫn có khả năng kiểm tra
những thông điệp ở đó nếu tiến trình cài đặt được chạy qua bàn giao tiếp nối
tiếp.

Trong khi cài đặt cơ bản, một hạt nhân Linux sẽ được cài đặt. Tại ưu tiên mặc
định, trình cài đặt sẽ chọn cho bạn hạt nhân khớp tốt nhất phần cứng của bạn.
Trong chế độ ưu tiên thấp hơn, bạn có khả năng chọn trong danh sách các hạt
nhân có sẵn.

Khi gói phần mềm được cài đặt dùng hệ thống quản lý gói thì mặc định là nó cũng
cài đặt những gói do gói đó khuyến khích. Các gói khuyến khích không phải cần
thiết cho chức năng lõi của phần mềm được chọn, nhưng mà chúng có phải tăng
cường phần mềm đó thì (theo ý kiến của nhà duy trì gói) bình thường nên được
cài đặt cùng với phần mềm đó.

Ghi chú

Vì lý do kỹ thuật, gói nào được cài đặt trong khi cài đặt hệ thống cơ bản thì
được cài đặt mà không có các gói "Khuyến khích" tương ứng. Quy tắc nêu trên chỉ
có hiệu lực sau thời điểm này trong quá trình cài đặt.

6.3.6. Cài đặt phần mềm thêm

Ở điểm thời này, bạn có một hệ thống có ích nhưng còn bị hạn chế. Phần lớn
người dùng sẽ muốn cài đặt thêm phần mềm vào hệ thống, để điều hưởng tinh nó để
tương thích với những nhu cầu của họ, và trình cài đặt cung cấp khả năng đó.
Bước này có thể mất ngay cả lâu hơn tiến trình cài đặt hệ thống cơ bản nếu máy
tính hay mạng có chạy chậm.

6.3.6.1. Cấu hình apt

One of the tools used to install packages on a Debian GNU/Linux system is the
program apt, from the apt package^[13]. Other front-ends for package
management, like aptitude and synaptic, are also in use. These front-ends are
recommended for new users, since they integrate some additional features
(package searching and status checks) in a nice user interface.

Chương trình apt phải được cấu hình để biết cần lấy gói từ đâu. Kết quả của
việc cấu hình này được ghi vào tập tin /etc/apt/sources.list, và bạn có thể xem
lại nó và sửa đổi nó sau khi cài đặt xong.

Nếu bạn đang cài đặt ở mức ưu tiên mặc định, trình cài đặt sẽ tự động quản lý
phần lớn tiến trình cấu hình, dựa vào phương pháp cài đặt bạn dùng và có thể
dùng các sự chọn bạn đã làm trước. Trong phần lớn trường hợp, trình cài đặt sẽ
tự động thêm một máy nhân bản bảo mật và, nếu bạn đang cài đặt bản phát hành ổn
định, một máy nhân bản cho dịch vụ cập nhật "stable-updates".

Nếu bạn đang cài đặt ở mức ưu tiên thấp hơn (v.d. ở chế độ cấp cao), bạn sẽ có
khả năng tự quyết định thêm. Bạn có thể chọn có nên dùng dịch vụ cập nhật kiểu
bảo mật và/hay stable-updates, hay không, và bạn có thể chọn thêm gói từ phần
kho lưu "contrib" (đã cung cấp) và "non-free" (khác tự do).

6.3.6.1.1. Installing from more than one CD or DVD image

If you are installing from a CD or DVD image that is part of a larger set, the
installer will ask if you want to scan additional installation media. If you
have such additional media available, you probably want to do this so the
installer can use the packages included on them.

If you do not have any additional media, that is no problem: using them is not
required. If you also do not use a network mirror (as explained in the next
section), it can mean that not all packages belonging to the tasks you select
in the next step of the installation can be installed.

Ghi chú

Packages are included on CD and DVD images in the order of their popularity.
This means that for most uses only the first image of a set is needed and that
only very few people actually use any of the packages included on the last
images of a set.

Cũng nghĩa là lãng phí tiền khi tải xuống và chép ra một tập hợp đĩa CD hoàn
toàn, vì phần lớn gói đó vô ích cho bạn. Trong hậu hết trường hợp đều, hữu hiệu
hơn nếu bạn lấy chỉ 3-8 đĩa CD đầu tiên, rồi cài đặt bất ký gói thêm nào cần
thiết từ Internet qua máy nhân bản. Cũng vậy với tập hợp đĩa DVD: đĩa DVD đầu
tiên, hoặc có lẽ hai đĩa DVD đầu tiên, sẽ cung cấp tất cả các gói cần thiết.

If you do scan multiple installation media, the installer will prompt you to
exchange them when it needs packages from one that isn't currently in the
drive. Note that only discs that belong to the same set should be scanned. The
order in which they are scanned does not really matter, but scanning them in
ascending order will reduce the chance of mistakes.

6.3.6.1.2. Sử dụng máy nhân bản mạng

Một câu sẽ được hỏi trong phần lớn tiến trình cài đặt là có nên dùng máy nhân
bản mạng làm nguồn gói, hay không. Trong phần lớn trường hợp, trả lời mặc định
là tốt, nhưng vẫn có một số ngoại lệ.

If you are not installing from a full CD/DVD image, you really should use a
network mirror as otherwise you will end up with only a very minimal system.
However, if you have a limited Internet connection it is best not to select the
desktop task in the next step of the installation.

If you are installing from a single full CD image, using a network mirror is
not required, but is still strongly recommended because a single CD image
contains only a fairly limited number of packages. If you have a limited
Internet connection it may still be best to not select a network mirror here,
but to finish the installation using only what's available on the CD image and
selectively install additional packages after the installation (i.e. after you
have rebooted into the new system).

If you are installing from DVD, any packages needed during the installation
should be present on the first DVD image. Use of a network mirror is optional.

One advantage of adding a network mirror is that updates, that have occurred
since the CD/DVD images were created and have been included in a point release,
will become available for installation, thus extending the life of your CD/DVD
set without compromising the security or stability of the installed system.

In summary: selecting a network mirror is generally a good idea, except if you
do not have a good Internet connection. If the current version of a package is
available from installation media, the installer will always use that. The
amount of data that will be downloaded if you do select a mirror thus depends
on

 1. những tác vụ bạn chọn trong bước tiếp theo của tiến trình cài đặt,

 2. những gói nào cần thiết cho các tác vụ đó,

 3. which of those packages are present on the installation media you have
    scanned, and

 4. whether any updated versions of packages included on the installation media
    are available from a mirror (either a regular package mirror, or a mirror
    for security or stable-updates).

Note that the last point means that, even if you choose not to use a network
mirror, some packages may still be downloaded from the Internet if there is a
security or stable-updates update available for them and those services have
been configured.

6.3.6.1.3. Choosing a network mirror

Unless you chose not to use a network mirror, you will be presented with a list
of network mirrors based upon your country selection earlier in the
installation process. Choosing the offered default is usually fine.

The offered default is deb.debian.org, which is not a mirror itself but will
redirect to a mirror that should be up-to-date and fast. These mirrors support
TLS (https protocol) and IPv6. This service is maintained by the Debian System
Administration (DSA) team.

A mirror can also be specified by hand by choosing "enter information manually"
. You can then specify a mirror host name and an optional port number. This
actually has to be a URL base, i.e. when specifying an IPv6 address, one has to
add square brackets around it, for instance "[2001:db8::1]".

If your computer is on an IPv6-only network (which is probably not the case for
the vast majority of users), using the default mirror for your country might
not work. All the mirrors in the list are reachable via IPv4, but only some of
them can be used via IPv6. As connectivity of individual mirrors can change
over time, this information is not available in the installer. If there is no
IPv6 connectivity for the default mirror for your country, you can either try
some of the other mirrors offered to you or choose the "enter information
manually" option. You can then specify "ftp.ipv6.debian.org" as the mirror
name, which is an alias for a mirror available via IPv6, although it will
probably not be the fastest possible one.

6.3.6.2. Lựa chọn và Cài đặt Phần mềm

Trong tiến trình cài đặt, bạn có dịp chọn phần mềm thêm cần cài đặt. Hơn là
chọn mỗi gói phần mềm riêng trong 87573 gói sẵn sàng, giai đoạn này của tiến
trình cài đặt tập trung vào công việc chọn và cài đặt tập hợp phần mềm định sẵn
để thiết lập nhanh máy tính của bạn để thực hiện nhiều tác vụ khác nhau.

These tasks loosely represent a number of different jobs or things you want to
do with your computer, such as "Desktop environment", "Web server", or "SSH
server"^[14]. Phần D.2, "Sức chứa trên đĩa cần thiết cho công việc" lists the
space requirements for the available tasks.

Một số tác vụ nào đó có thể được chọn sẵn, dựa vào các đặc tính của máy tính
vào đó bạn đang cài đặt hệ thống. Không đồng ý với các sự chọn này thì bạn vẫn
có khả năng bỏ chọn điều nào. Tại điểm thời này, bạn ngay cả có thể chọn không
cài đặt gì cả.

Mẹo

Trong giao diện người dùng chuẩn của trình cài đặt, bạn có thể sử dụng phím dài
để (bỏ) chọn công việc nào.

Ghi chú

The "Desktop environment" task will install a graphical desktop environment.

By default, debian-installer installs the Gnome desktop environment. It is
possible to interactively select a different desktop environment during the
installation. It is also possible to install multiple desktops, but some
combinations of desktop may not be co-installable.

Note that this will only work if the packages needed for the desired desktop
environment are actually available. If you are installing using a single full
CD image, they will possibly need to be downloaded from a network mirror as
they might not be available on the CD image due to its limited amount of space.
Installing any of the available desktop environments this way should work fine
if you are using a DVD image or any other installation method.

The various server tasks will install software roughly as follows. Web server:
apache2; SSH server: openssh.

Công việc "Hệ thống chuẩn" thì cài đặt bất cứ gói nào có mức ưu tiên "chuẩn".
Các gói nào bao gồm rất nhiều tiện ích thường dùng mà bình thường sẵn sàng trên
bất cứ hệ thống Linux/UNIX nào. Không tắt công việc này nếu bạn không biết cách
sử dụng.

Trong khi chọn ngôn ngữ, nếu một miền địa phương mặc định khác với "C" được
chọn (v.d. « vi.UTF-8 ») thì tasksel kiểm tra có công việc địa phương hoá nào
được xác định cho miền địa phương đó (v.d. « Tiếng Việt ») và tự động thử cài
đặt những gói địa phương hoá có liên quan. Gồm có (v.d.) gói chứa danh sách từ
hay phông chữ đặc trưng ngôn ngữ của bạn. Nếu một môi trường làm việc được chọn
thì cũng cài đặt các gói địa phương hoá thích hợp (nếu có).

Một khi chọn các tác vụ, hãy bấm Continue. Tại thời điểm này, chương trình apt
sẽ cài đặt các gói thuộc về những tác vụ đã chọn. Nếu một chưng trình nào đó
cần thêm thông tin từ người dùng, nó sẽ nhắc bạn trong quá trình này.

Ghi chú rằng công việc « Môi trường làm việc » rất lớn. Đặc biệt khi cài đặt từ
đĩa CD-ROM chuẩn cũng với máy nhân bản cho các gói không nằm trên đĩa CD-ROM,
trình cài đặt có thể lấy rất nhiều gói qua mạng. Kết nối Mạng chạy hơi chậm thì
việc này mất nhiều thời gian. Không có tùy chọn dừng chạy tiến trình cài đặt
gói một khi khởi chạy được.

Ngay cả khi các gói nằm trên đĩa CD-ROM, trình cài đặt vẫn còn có thể lấy từ
máy nhân bản nếu máy nhân bản có gói phiên bản mới hơn điều trên đĩa CD-ROM.
Nếu bạn đang cài đặt bản phân phối ổn định (stable), trường hợp này có thể xảy
ra sau khi phân phối bản « điểm » (bản cập nhật bản phân phối ổn định chính).
Còn nếu bạn đang cài đặt bản phân phối thử ra (testing), nó có thể xảy ra nếu
bạn sử dụng ảnh cũ.

6.3.7. Cho hệ thống khả năng khởi động

Cài đặt máy trạm không có đĩa thì rõ ràng không có ích khi khởi động từ đĩa cục
bộ nên bước này sẽ bị bỏ qua.

6.3.7.1. Phát hiện hệ điều hành khác

Trước khi cài đặt bộ nạp khởi động, trình cài đặt sẽ thử dò tìm hệ điều hành
khác được cài đặt trên cùng một máy. Tìm được một hệ điều hành được hỗ trợ thì
nó thông báo cho bạn trong bước cài đặt bộ nạp khởi động, và máy tính cũng được
cấu hình để khởi động hệ điều hành khác đó, thêm vào Debian.

Ghi chú rằng nhiều hệ điều hành khởi động trên cùng một máy chưa được hiểu hoàn
toàn. Cách hỗ trợ tự động khả năng phát hiện và thiết lập bộ tải khởi động để
khởi động hệ điều hành khác có thay đổi theo kiến trúc và ngay cả theo kiến
trúc phụ. Nếu nó không hoạt động được, bạn nên xem tài liệu hướng dẫn sử dụng
bộ nạp khởi động riêng để tìm thông tin thêm.

6.3.7.2. Install the Grub Boot Loader on the drive

The amd64 boot loader is called "grub". Grub is a flexible and robust boot
loader and a good default choice for new users and old hands alike.

By default, grub will be installed on the UEFI partition/the Boot Record of the
primary drive, where it will take over complete control of the boot process. If
you prefer, you can install it elsewhere. See the grub manual for complete
information.

Không muốn cài đặt GRUB thì bấm Go Back để trở về trình đơn chính, và từ đó,
chọn bộ nạp khởi động đã muốn.

6.3.7.3. Tiếp tục không có bộ nạp khởi động

Tùy chọn này có thể được dùng để làm xong tiến trình cài đặt ngay cả khi không
có bộ nạp khởi động cần cài đặt, hoặc vì kiến trúc/kiến trúc phụ không cung
cấp, hoặc vì không muốn nó (v.d. bạn sẽ dùng bộ nạp khởi động đã có).

Nếu bạn định tự cấu hình bộ nạp khởi động, bạn nên kiểm tra xem tên của hạt
nhân đã được cài đặt vào /target/boot. Bạn cũng nên kiểm tra xem nếu thư mục đó
chứa initrd không; nếu có, bạn rất có thể phải báo bộ nạp khởi động sử dụng nó.
Thông tin khác cần thiết là tên đĩa và phân vùng đã chọn cho hệ thống tập tin
/, và nếu bạn đã chọn cài đặt /boot vào phân vùng riêng, tên hệ thống tập tin /
boot.

6.3.8. Cài đặt xong

Đây là bước cuối cùng trong tiến trình cài đặt Debian, trong đó trình cài đặt
sẽ làm bất cứ công việc nào còn lại. Phần lớn là làm sạch sau debian-installer.

6.3.8.1. Đặt đồng hồ hệ thống

Có lẽ trình cài đặt sẽ hỏi bạn nếu đồng hồ của máy tính được đặt thành thời
gian thế giới (UTC) không. Bình thường trình đó tránh hỏi câu này, nếu có thể,
và thử tính biết nếu đồng hồ được đặt thành thời gian thế giới (UTC) dựa vào
thứ như hệ điều hành khác đã được cài đặt.

Ở chế độ nhà chuyên môn, bạn lúc nào cũng có khả năng chọn nếu đồng hồ của máy
tính được đặt thành thời gian thế giới (UTC) không. Hệ thống (cũng) chạy DOS
hay Windows thường được đặt thành giờ cục bộ. Nếu bạn muốn khởi động đôi, hãy
chọn giờ cục bộ hơn UTC.

Ở điểm thời này, debian-installer sẽ cũng thử lưu thời gian hiện thời vào đồng
hồ phần cứng của hệ thống. Việc này sẽ được làm theo hoặc UTC hoặc giờ cục bộ,
phụ thuộc vào sự chọn mới làm.

6.3.8.2. Khởi động lại hệ thống

You will be prompted to remove the boot media (CD, USB stick, etc) that you
used to boot the installer. After that the system will be rebooted into your
new Debian system.

6.3.9. Khắc phục sự số

Những thành phần được liệt kê trong phần này thường không được dùng trong tiến
trình cài đặt, vì chúng đợi phía sau để giúp đỡ người dùng nếu họ gặp khó khăn.

6.3.9.1. Lưu bản ghi cài đặt

Cài đặt thành công thì các tập tin theo dõi được tạo trong tiến trình cài đặt
sẽ được tự động lưu vào thư mục /var/log/installer/ trong hệ thống Debian mới.

Choosing Save debug logs from the main menu allows you to save the log files to
a USB stick, network, hard disk, or other media. This can be useful if you
encounter fatal problems during the installation and wish to study the logs on
another system or attach them to an installation report.

6.3.9.2. Sử dụng trình bao và xem bản ghi

Có vài phương pháp khác nhau cho bạn sử dụng để tuy cấp trình bao trong khi
chạy tiến trình cài đặt. Trên phần lớn hệ thống, nếu bạn không cài đặt qua bàn
giao tiếp nối tiếp, phương pháp dễ nhất là chuyển đổi sang bàn giao tiếp ảo thứ
hai bằng cách bấm tổ hợp phím Alt trái+F2^[15] (trên bàn phím Mac, tổ hợp phím 
option+F2: các máy Mac mới hơn cũng có từ « alt » trên phím option.). Rồi bấm
tổ hợp phím Alt trái+F1 để trở về bộ cài đặt chính nó.

Đối với trình cài đặt đồ họa, xem thêm Phần 6.1.1, "Using the graphical
installer".

Nếu bạn không thể chuyển đổi bàn giao tiếp, trình đơn chính cũng có mục Chạy
trình bao có thể dùng để khởi chạy một trình bao. Bạn có thể tới trình đơn
chính từ phần lớn hộp thoại, bằng cách bấm cái nút Go Back một hay nhiều lần.
Gõ lệnh exit (thoát) để đóng trình bao, và trở về trình cài đặt.

Vào lúc này, bạn được khởi động từ đĩa RAM nên có sẵn một bộ tiện ích UNIX bị
hạn chế để sử dụng. Có thể xem các chương trình sẵn sàng bằng cách chạy lệnh ls
/bin /sbin /usr/bin /usr/sbin (ls = liệt kê) hay help (trợ giúp). Trình bao này
là bộ nhái trình bao Bourne tên ash có một số tính năng tốt đẹp như khả năng tự
động gõ và lược sử.

Để soạn thảo và xem tập tin, hãy dùng trình soạn thảo văn bản nano. Các tập tin
ghi lưu cho hệ thống cài đặt nằm trong thư mục /var/log.

Ghi chú

Mặc dù bạn có thể sử dụng bất cứ lệnh có sẵn trong trình bao, tùy chọn dùng
trình bao chỉ sẵn sàng để giúp đỡ trong trường hợp bị lỗi hay gỡ lỗi.

Việc tự chạy lệnh từ trình bao có thể gây trở ngạy cho tiến trình cài đặt nên
gây ra lỗi hay việc cài đặt chưa hoàn thành. Đặc biệt bạn phải cho phép trình
cài đặt kích hoạt vùng trao đổi, không bao giờ tự làm như thế từ trình bao.

6.3.10. Installation over network-console

Một của những thành phần hay hơn là network-console. Nó cho bạn khả năng làm
phần lớn tiến trình cài đặt qua mạng thông qua SSH. Việc sử dụng mạng ngụ ý là
bạn sẽ phải thực hiện những bước cài đặt đâù tiên từ bàn điều khiển, ít nhất
đến khi thiết lập khả năng chạy mạng (dù bạn có thể tự động hoá phần đó bằng
phần Phần 4.6, "Cài đặt tự động".)

This component is not loaded into the main installation menu by default, so you
have to explicitly ask for it. If you are installing from optical media, you
need to boot with medium priority or otherwise invoke the main installation
menu and choose Load installer components from installation media and from the
list of additional components select network-console: Continue installation
remotely using SSH. Successful load is indicated by a new menu entry called 
Continue installation remotely using SSH.

Sau khi chọn mục nhập mới này, bạn sẽ được nhắc nhập một mật khẩu mới sẽ được
sử dụng để kết nối đến hệ thống cài đặt và để xác nhận nó. Đó là tất cả thôi.
Lúc này bạn nên xem màn hình hướng dẫn bạn đăng nhập từ xa với tư cách là người
dùng installer với mật khẩu mới cung cấp. Một chi tiết quan trọng khác cần thấy
biết trên màn hình này là vân tay của hệ thống này. Bạn cần phải truyền vân tay
này một cách bảo mật cho người sẽ tiếp tục cài đặt từ xa.

Nếu bạn chọn tiếp tục cài đặt cục bộ, vào lúc nào bạn có thể bấm phím Enter, mà
sẽ mang bạn về trình đơn chính nơi bạn có thể chọn thành phần khác.

Tại đầu khác, bạn cần phải cấu hình thiết bị cuối để sử dụng bảng mã UTF-8, vì
hệ thống cài đặt sử dụng đó. Nếu bạn không làm như thế, vẫn còn có thể cài đặt
từ xa, nhưng mà bạn có thể gặp một số đồ tạo tác lạ như viền hộp thoại bị hủy
hay ký tự khác ASCII không thể đọc. Cách kết nối đến hệ thống cài đặt là dễ như
gõ :

$ ssh -l installer máy_cài_đặt

mà máy_cài_đặt là hoặc tên hoặc địa chỉ IP của máy tính đang được cài đặt.
Trước khi thật đăng nhập, vân tay của hệ thống ở xa sẽ được hiển thị, và bạn sẽ
phải xác nhận nếu nó là đúng không.

Ghi chú

Trình phục vụ trình bao bảo mật ssh trong tiến trình cài đặt có dùng một cấu
hình mặc định mà không giữ các gói tin bảo tồn kết nối. Về nguyên tắc, kết nối
đến hệ thống đang được cài đặt nên được giữ mở vô hạn. Tuy nhiên, trong một số
trường hợp (phụ thuộc vào thiết lập mạng cục bộ), kết nối có thể bị mất sau một
giai đoạn hoạt động. Một trường hợp thường gặp vấn đề này là khi có một dạng
NAT (đặt địa chỉ mạng) ở vị trí giữa trình khách và hệ thống đang được cài đặt.
Phụ thuộc vào điểm thời mất kết nối, bạn có thể hay không thể tiếp tục lại tiến
trình cài đặt sau khi tái kết nối.

Có lẽ bạn có thể tránh mất kết nối bằng cách thêm tùy chọn
-o ServerAliveInterval=giá_trị khi khởi chạy kết nối ssh, hoặc bằng cách thêm
tùy chọn đó vào tập tin cấu hình ssh. Tuy nhiên, ghi chú rằng trong một số
trường hợp, việc thêm tùy chọn này cũng có thể gây ra kết nối bị mất (v.d. nếu
các gói tin bảo tồn kết nối được gửi trong khi kết nối bị dừng ngắn, không thì 
ssh phục hồi kết nối) vậy chỉ dùng nó khi cần thiết.

Ghi chú

Nếu bạn cài đặt vào vài máy tính lần lượt, và chúng có cùng một địa chỉ IP hay
tên máy, phần mềm ssh sẽ từ chối kết nối đến máy như vậy. Lý do là nó sẽ có vân
tay khác, mà thường ngụ ý sự tấn công lừa gạt. Nếu bạn có chắc là nó không phải
ngụ ý sự tấn công, bạn sẽ cần phải xoá dòng tương ứng ra tập tin liệt kê các
máy được biết ~/.ssh/known_hosts^[16] rồi thử lại.

Sau khi đăng nhập, bạn sẽ xem màn hình đầu tiên chứa hai khả năng: Khởi chạy
trình đơn và Khởi chạy hệ vỏ. Điều thứ nhất mang bạn tới trình đơn cài đặt
chính, nơi bạn có thể tiếp tục cài đặt như thường. Còn điều thứ hai khởi chạy
một trình bao nơi bạn có thể thẩm tra và có lẽ sửa chữa hệ thống ở xa. Bạn nên
sở khởi chỉ một phiên chạy SSH cho trình đơn cài đặt, nhưng có thể chạy nhiều
phiên chạy cho các trình bao.

Cảnh báo

Sau khi bạn đã khởi chạy tiến trình cài đặt một cách từ xa thông qua SSH. bạn
không nên trở về phiên chạy cài đặt đang chạy trên bàn điều khiển cục bộ. Làm
như thế có thể hỏng cơ sở dữ liệu chứa cấu hình của hệ thống mới, mà lần lượt
có thể gây ra việc cài đặt bị lỗi hay lỗi trong hệ thống đã được cài đặt.

6.4. Nạp phần vững bị thiếu

Như diễn tả trong Phần 2.2, "Thiết bị cần thiết phần vững", một số thiết bị nào
đó cũng yêu cầu nạp phần vững. Trong hậu hết trường hợp, thiết bị sẽ không hoạt
động bằng cách nào cả nếu phần vững không sẵn sàng; đôi khi nó chỉ có chức năng
cơ bản và yêu cầu phần vững để hiệu lực thêm tính năng.

Nếu một trình điều khiển thiết bị yêu cầu phần vững chưa sẵn sàng,
debian-installer sẽ hiển thị một hộp thoại đề xuất nạp phần vững bị thiếu. Bật
tùy chọn này thì debian-installer sẽ quét tất cả các thiết bị sẵn sàng tìm hoặc
tập tin phần vững riêng hoặc gói chứa phần vững. Tìm được thì phần vững được
sao chép vào vị trí đúng (/lib/firmware) và mô-đun trình điều khiển được nạp
lại.

Ghi chú

Which devices are scanned and which file systems are supported depends on the
architecture, the installation method and the stage of the installation.
Especially during the early stages of the installation, loading the firmware is
most likely to succeed from a FAT-formatted USB stick. On i386 and amd64
firmware can also be loaded from an MMC or SD card.

Ghi chú rằng cũng có thể bỏ qua bước nạp phần vững nếu thiết bị vẫn còn chức
năng, hoặc nếu thiết bị không cần trong khi cài đặt.

debian-installer only prompts for firmware needed by kernel modules loaded
during the installation. Not all drivers are included in debian-installer, in
particular radeon is not, so this implies that the capabilities of some devices
may be no different at the end of the installation from what they were at the
beginning. Consequently, some of your hardware may not be being used to its
full potential. If you suspect this is the case, or are just curious, it is not
a bad idea to check the output of the dmesg command on the newly booted system
and search for "firmware".

6.4.1. Chuẩn bị vật chứa

Official installation images do not include non-free firmware. The most common
method to load such firmware is from some removable medium such as a USB stick.
Alternatively, unofficial installation images containing non-free firmware can
be found at https://cdimage.debian.org/cdimage/unofficial/non-free/
cd-including-firmware/. To prepare a USB stick (or other medium like a hard
drive partition), the firmware files or packages must be placed in either the
root directory or a directory named /firmware of the file system on the medium.
The recommended file system to use is FAT as that is most certain to be
supported during the early stages of the installation.

Kho nén chứa các gói hiện thời cho phần vững thường dùng nhất cũng sẵn sàng từ
:

  • https://cdimage.debian.org/cdimage/unofficial/non-free/firmware/

Chỉ nên tải về kho nén cho bản phát hành hiện thời, và giải nén nó vào hệ thống
tập tin trên vật chứa.

Nếu kho nén không chứa phần vững yêu cầu, bạn cũng có thể tải gói phần vững
riêng xuống (phần khác tự do của) kho gói. Toàn cảnh theo đây nên liệt kê phần
lớn các gói phần vững sẵn sàng, nhưng không đảm bảo nó hoàn toàn, và nó cũng có
thể chứa gói khác phần vững:

  • https://packages.debian.org/search?keywords=firmware

Cũng có thể sao chép vào vật chứa mỗi tập tin phần vững riêng. Tập tin riêng
như vậy có thể sẵn sàng từ một hệ thống đã cài đặt trước, hay nhà sản xuất phần
cứng.

6.4.2. Phần vững và Hệ thống đã Cài đặt

Bất cứ phần vững nào được nạp trong khi cài đặt thì được tự động sao chép vào
hệ thống đã cài đặt. Trong phần lớn các trường hợp, thao tác sao chép này sẽ
đảm bảo rằng thiết bị yêu cầu phần vững sẽ cũng hoạt động đúng sau khi khởi
động lại máy vào hệ thống đã cài đặt. Tuy nhiên, nếu hệ thống đã cài đặt có
chạy một phiên bản hạt nhân khác với trình cài đặt, cũng có thể là phần vững
không nạp được do phiên bản bị đối xứng lệch.

Nếu phần vững đã được nạp từ một gói phần vững, debian-installer sẽ cũng cài
đặt gói đó cho hệ thống đã cài đặt, và tự động thêm phần khác tự do của kho gói
vào tập tin danh sách nguồn sources.list của chương trình Apt. Hữu ích vì phần
vững nên được tự động cập nhật khi một phiên bản mới được phát hành.

Nếu bước nạp phần vững bị bỏ qua trong khi cài đặt, thiết bị liên quan rất có
thể không hoạt động với hệ thống đã cài đặt đến khi (gói) phần vững được cài
đặt một cách thủ công.

Ghi chú

Nếu phần vững đã được nạp từ các tập tin phần vững riêng, phần vững được sao
chép vào hệ thống đã cài đặt sẽ không phải được tự động cập nhật nếu gói phần
vững tương ứng (nếu sẵn sàng) không được cài đặt một khi cài đặt xong.

6.4.3. Completing the Installed System

Depending on how the installation was performed, it might be that the need for
some firmware was not detected during installation, that the relevant firmware
was not available, or that one chose not to install some firmware at that time.
In some cases, a successful installation can still end up in a black screen or
a garbled display when rebooting into the installed system. When that happens,
the following workarounds can be tried:

  • Pass the nomodeset option on the kernel command line. This might help boot
    into a "fallback graphics" mode.

  • Use the Ctrl+Alt+F2 key combination to switch to VT2, which might offer a
    functional login prompt.

Once logged in into the installed system, it is possible to automate the
detection of missing firmware, and to perform the required steps to enable them
following this procedure:

 1. Install the isenkram-cli package.

 2. Run the isenkram-autoinstall-firmware command as the "root" user.

Usually, rebooting is the simplest way to make sure all kernel modules are
properly initialized; that's particularly important when one has booted the
system with the nomodeset option as an interim measure.

Ghi chú

Installing firmware packages is very likely to require enabling the non-free
section of the package archive. As of Debian GNU/Linux 11.0, running the 
isenkram-autoinstall-firmware command will do that automatically by creating a
dedicated file (/etc/apt/sources.list.d/isenkram-autoinstall-firmware.list),
pointing at a generic mirror.

6.5. Customization

Using the shell (see Phần 6.3.9.2, "Sử dụng trình bao và xem bản ghi"), the
installation process can be carefully customized, to fit exceptional use cases:

6.5.1. Installing an alternative init system

Debian uses systemd as its default init system. However, other init systems
(such as sysvinit and OpenRC) are supported, and the easiest time to select an
alternative init system is during the installation process. For detailed
instructions on how to do so, please see the Init page on the Debian wiki.


━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

^[6] Nói kỹ thuật, khi một ngôn ngữ thuộc về nhiều miền địa phương có các mã
quốc gia khác nhau.

^[7] Ở mức ưu tiên Vừa và Thấp, bạn lúc nào cũng có dịp chọn miền địa phương đã
muốn trong những điều sẵn sàng cho ngôn ngữ được chọn (nếu có nhiều điều).

^[8] Miền địa phương thừa tự là miền địa phương cũ, sử dụng một bảng mã ký tự
cũ như ISO 8859-1 (dùng bởi các ngôn ngữ vùng Tây Âu) hay EUC-JP (dùng bởi
tiếng Nhật) thay cho UTF-8.

^[9] Bộ cài đặt sẽ mật mã hoá nhóm khối tin LVM bằng một khoá AES 256 bit, và
sử dụng khả năng hỗ trợ "dm-crypt" của hạt nhân.

^[10] Thật là bạn có thể cấu tạo một thiết bị MD ngay cả từ các phân vùng nằm
trên cùng một ổ đĩa vật lý, nhưng bố trí đó không có lợi ích.

^[11] Dùng cụm từ mật khẩu là khoá hiện thời có nghĩa là phân vùng sẽ được
thiết lập bằng LUKS.

^[12] Tuy nhiên, đừng giả sử nhà chuyên môn không thể phục hồi dữ liệu, ngay cả
sau khi vật chứa quang từ bị ghi lại vài lần.

^[13] Note that the program which actually installs the packages is called dpkg
. However, this program is more of a low-level tool. apt is a higher-level
tool, which will invoke dpkg as appropriate. It knows how to retrieve packages
from your installation media, the network, or wherever. It is also able to
automatically install other packages which are required to make the package
you're trying to install work correctly.

^[14] You should know that to present this list, the installer is merely
invoking the tasksel program. It can be run at any time after installation to
install more packages (or remove them), or you can use a more fine-grained tool
such as aptitude. If you are looking for a specific single package, after
installation is complete, simply run aptitude install package, where package is
the name of the package you are looking for.

^[15] Tức là: bấm đồng thời phím sửa đổi Alt bên trái phím dài và phím chức
năng F2.

^[16] Lệnh này sẽ gỡ bỏ mục nhập đã tồn tại đối với một máy: ssh-keygen -R <
tên_máy|địa_chỉ_IP>.

Chương 7. Khởi động vào hệ thống Debian mới

Mục lục

7.1. Giờ phút thử thách
7.2. Gắn kết khối tin đã mật mã

    7.2.1. Giải đáp thắc mắc

7.3. Đăng nhập

7.1. Giờ phút thử thách

Việc khởi động một mình ban đầu của hệ thống là trường hợp do kỹ sư điện tử gọi
"thử thách khói".

If you did a default installation, the first thing you should see when you boot
the system is the menu of the grub bootloader. The first choices in the menu
will be for your new Debian system. If you had any other operating systems on
your computer (like Windows) that were detected by the installation system,
those will be listed lower down in the menu.

Nếu hệ thống không khởi động được, hãy bình tĩnh. Đã chạy thành công tiến trình
cài đặt thì rất có thể là chỉ gặp một lỗi tương đối nhỏ mà ngăn cản hệ thống
khởi động Debian. Trong phần lớn các trường hợp, vấn đề như vậy có thể được sửa
chữa mà không cần chạy lại tiến trình cài đặt. Một lựa chọn sẵn sàng để sửa
chữa vấn đề khởi động là sử dụng chế độ cứu có sẵn của trình cài đặt (xem
Phần 8.6, "Phục hồi hệ thống bị hỏng").

Nếu bạn bắt đầu sử dụng Debian và Linux, thì có thể yêu cầu sự giúp đỡ của
những người dùng có kinh nghiệm nhiều hơn. Để được giúp đỡ trực tiếp trên
Internet, vào kênh IRC #debian hay #debian-boot trên mạng OFTC. Hoặc bạn có thể
hỏi câu trong hộp thư chung debian-user. Bạn cũng có thể gửi một thông báo cài
đặt như được diễn tả trong Phần 5.4.7, "Đệ trình báo cáo cài đặt". Xin hãy kiểm
tra lại bạn đã diễn tả rõ ràng vấn đề, và bao gồm thông điệp nào được hiển thị,
để giúp đỡ người khác chẩn đoán vấn đề. (Viết thông báo lỗi bằng tiếng Việt thì
cũng bao gồm tiêu đề tiếng Anh này: "THIS REPORT IS WRITTEN IN VIETNAMESE" [
thông báo này được viết bằng Tiếng Việt]).

Nếu tiến trình cài đặt đã không phát hiện được hệ điều hành khác nào cũng nằm
trên máy tính đó, hãy gửi một báo cáo cài đặt.

7.2. Gắn kết khối tin đã mật mã

Nếu bạn đã tạo khối tin đã mật mã trong tiến trình cài đặt, cũng đã gán chúng
cho điểm lắp, bạn sẽ được nhắc nập cụm từ mật khẩu dành cho mỗi khối tin trong
khi khởi động.

Đối với phân vùng được mật mã thông qua dm-crypt, tiến trình khởi động sẽ hiển
thị dấu nhắc này:

Starting early crypto disks... phần_crypt(starting)
Enter LUKS passphrase:

(đang khởi động các đĩa mật mã sớm... mật mã [phần] (đang khởi động) Nhập cụm
từ mật khẩu LUKS:) Trên dòng đầu tiên của đoạn này, phần là tên phân vùng cơ
sở, v.d. « sda2 » hoặc « md0 ». Rất có thể là bạn tự hỏi dành cho khối tin nào
bạn thực sự nhập cụm từ mật khẩ nàyu? Nó có liên quan đến phân vùng /home của
bạn? Hoặc đến phân vùng /var? Tất nhiên, nếu bạn có chỉ một khối tin được mật
mã, đơn giản hãy nhập cụm từ mật khẩu bạn đã dùng khi thiết lập khối tin đó.
Còn nếu bạn đã thiết lập nhiều khối tin đã mật mã trong khi cài đặt, bạn cũng
đã ghi nhớ thông tin trong bước cuối cùng của Phần 6.3.4.6, "Cấu hình khối tin
được mật mã" sẽ có ích. Nếu bạn chưa ghi nhớ sự ánh xạ giữa phần_crypt và nhưng
điểm lắp, bạn vẫn còn có thể tìm nó trong tập tin /etc/crypttab và /etc/fstab
của hệ thống mới.

Dấu nhắc có thể có hình khác khi hệ thống tập tin gốc đã mật mã được gắn kết.
Hình này phụ thuộc vào bộ tạo ra initramfs nào được dùng để tạo ra initrd được
dùng lần lượt để khởi động hệ thống đó. Mẫu bên dưới thuộc về initrd được tạo
ra bằng initramfs-tools:

Begin: Mounting root file system... ...
Begin: Running /scripts/local-top ...
Enter LUKS passphrase:
[Bắt đầu : Đang gắn kết hệ thống tập tin gốc ... ...
Bắt đầu : Đang chạy /tập_lệnh/local-top ...
Nhập cụm từ mật khẩu LUKS:]

Không có ký tự nào (ngay cả dấu sao) sẽ được hiển thị trong khi nhập cụm từ mật
khẩu. Nếu bạn nhập sai, bạn có hai lần thử lại để sửa nó. Sau lần thử thứ ba,
tiến trình khởi động sẽ bỏ qua khối tin này, tiếp tục lại gắn kết hệ thống tập
tin tới. Xem Phần 7.2.1, "Giải đáp thắc mắc" để tìm thông tin thêm.

Sau khi nhập tất cả các cụm từ mật khẩu, tiến trình khởi động nên tiếp tục như
bình thường.

7.2.1. Giải đáp thắc mắc

Nếu tiến trình khởi động không thể gắn kết khối tin đã mật mã nào, vì cụm từ
mật khẩu bị nhập sai, bạn sẽ cần phải tự gắn kết mỗi khối tin như vậy sau khi
khởi động. Có vài trường hợp có thể.

  • Trường hợp thứ nhất liên quan đến phân vùng gốc. Khi nó không được gắn kết
    đúng, tiến trình khởi động sẽ tạm dừng lại nên bạn cần phải khởi động lại
    máy tính để thử lại.

  • The easiest case is for encrypted volumes holding data like /home or /srv.
    You can simply mount them manually after the boot.

    Đối với dm-crypt, trường hợp là phức tạp hơn một ít. Trước tiên, bạn cần
    phải đăng ký những khối tin với ứng dụng device mapper bằng cách chạy:

    # /etc/init.d/cryptdisks start

    (đường dẫn; bắt đầu) Tiến trình này sẽ quét mọi khối tin được liệt kê trong
    tập tin /etc/crypttab, và sẽ tạo những thiết bị thích hợp dưới thư mục /dev
    sau khi nhập những cụm từ mật khẩu đúng. (Khối tin đã được đăng ký sẽ bị bỏ
    qua, vì vậy bạn có thể chạy lệnh này vài lần, không có sao.) Sau khi đăng
    ký được, bạn có khả năng đơn giản gắn kết những khối tin bằng cách bình
    thường.

    # mount /điểm_lắp

  • If any volume holding noncritical system files could not be mounted (/usr
    or /var), the system should still boot and you should be able to mount the
    volumes manually like in the previous case. However, you will also need to
    (re)start any services usually running in your default runlevel because it
    is very likely that they were not started. The easiest way is to just
    reboot the computer.

7.3. Đăng nhập

Một khi hệ thống khởi động được, bạn sẽ thấy dấu nhắc đăng nhập. Hãy đăng nhập,
dùng tên đăng nhập cá nhân và mật khẩu bạn đã chọn trong tiến trình cài đặt. Hệ
thống của bạn lúc bây giờ sẵn sàng sử dụng.

Nếu bạn là người mới dùng Debian, khuyên bạn đọc tài liệu hướng dẫn có sẵn liên
quan đến mỗi bước mới. Hiện thời có vài hệ thống tài liệu, cũng có tiến trình
cố gắng hợp nhất những kiểu tài liệu khác nhau. Đây là một số điểm bắt đầu đọc.

Tài liệu hướng dẫn có sẵn với chương trình được cài đặt thì nằm trong /usr/
share/doc/, dưới một thư mục con đặt tên theo gói Debian chứa chương trình đó.
Tuy nhiên, tài liệu hướng dẫn rộng rãi hơn thường được đóng gói một cách riêng
trong gói tài liệu đặc biệt bình thường không phải được cài đặt theo mặc định.
Chẳng hạn, tài liệu hướng dẫn về công cụ quản lý gói apt nằm trong hai gói
riêng apt-doc và apt-howto.

Hơn nữa, có một số thư mục đặc biệt ở trong phân cấp /usr/share/doc/. Những tài
liệu Linux Thế Nào được cài đặt dạng nén .gz vào thư mục /usr/share/doc/HOWTO/
en-txt/. Sau khi cài đặt gói gói dhelp, bạn sẽ tìm thấy một mục lục tài liệu có
khả năng duyệt qua nằm trong /usr/share/doc/HTML/index.html.

Có thể xem dễ dàng các tài liệu này bằng trình duyệt dựa vào văn bản, bằng cách
nhập những lệnh này:

$ cd /usr/share/doc/
$ w3m .

Dấu chấm nằm sau lệnh w3m thì báo nó hiển thị nội dung của thư mục hiện có.

Nếu máy tính có môi trường đồ họa được cài đặt, bạn cũng có khả năng sử dụng
trình duyệt Web để xem tài liệu. Hãy khởi chạy trình duyệt Web từ trình đơn ứng
dụng, rồi gõ địa chỉ /usr/share/doc/ vào thanh địa chỉ.

Bạn cũng có thể gõ info lệnh hay man lệnh để xem tài liệu hướng dẫn về phần lớn
lệnh sẵn sàng ở dấu nhắc lệnh. Việc gõ lệnh help (trợ giúp) sẽ hiển thị trợ
giúp về các lệnh trình bao. Hơn nữa, việc gõ lệnh nào với --help theo sau sẽ
thường hiển thị bản tóm tắt ngắn về cách sử dụng lệnh đó. Nếu kết quả của lệnh
cuộn qua cạnh trên của màn hình, hãy gõ | more sau lệnh đó để dùng chương trình
more để gây ra kết quả tạm dừng trước khi cuộn qua cạnh trên của màn hình. Để
xem danh sách các lệnh sẵn sàng bắt đầu với một chữ nào đó, hãy gõ chữ đó rồi
hai dấu cách kiểu Tab.

Chương 8. Bước kế tiếp và đi đâu vậy

Mục lục

8.1. Tắt hệ thống
8.2. Giới thiệu về Debian

    8.2.1. Hệ thống quản lý gói Debian
    8.2.2. Phần mềm Thêm Hiện có cho Debian
    8.2.3. Quản lý phiên bản ứng dụng
    8.2.4. Quản lý công việc định kỳ

8.3. Thông tin thêm
8.4. Thiết lập thư điện tử trên hệ thống

    8.4.1. Cấu hình thư điện tử mặc định
    8.4.2. Gửi thư ra hệ thống
    8.4.3. Cấu hình tác nhân truyền thư tín Exim4

8.5. Biên dịch hạt nhân mới
8.6. Phục hồi hệ thống bị hỏng

8.1. Tắt hệ thống

Để tắt hệ thống Debian GNU/Linux đang chạy, bạn không nên khởi động lại bằng
cái nút đặt lại trên mặt hoặc về sau máy tính, hoặc đơn giản tắt điện. Hệ thống
Debian GNU/Linux nên được tắt bằng cách được điều khiển, không thì tập tin có
thể bị mất và/hoặc đĩa bị hỏng. Nếu bạn chạy môi trường ở trên (v.d. GNOME,
KDE, Xfce), thường có tùy chọn "Đăng xuất" nằm trong trình đơn ứng dụng mà cho
bạn có khả năng tắt (hoặc khởi động lại) hệ thống.

Alternatively you can press the key combination Ctrl+Alt+Del . If the key
combinations do not work, a last option is to log in as root and type the
necessary commands. Use reboot to reboot the system. Use halt to halt the
system without powering it off ^[17]. To power off the machine, use poweroff or
shutdown -h now. The systemd init system provides additional commands that
perform the same functions; for example systemctl reboot or systemctl poweroff.

8.2. Giới thiệu về Debian

Debian hơi khác với các bản phát hành khác. Thậm chí nếu bạn quen với Linux
trong bản phát hành khác, có vài thông tin cần biết về Debian để giúp đỡ bạn
bảo quản một hệ thống tốt đẹp. Chương này chứa thông tin để giúp đỡ bạn bắt đầu
dùng Debian; nó không phải là trợ lý hướng dẫn về cách sử dụng Debian, chỉ là
một bản tóm tắt rất vắn cho người quá bận thôi.

8.2.1. Hệ thống quản lý gói Debian

Khái niệm quan trọng nhất cần hiểu được là hệ thống gói Debian. Về cơ bản thì
nhiều phần lớn của hệ thống được điều khiển bởi hệ thống quản lý gói này. Những
phần này bao gồm:

  • /usr (trừ /usr/local)

  • /var (bạn có thể tạo thư mục /var/local và hoạt động trong đó một cách an
    toàn)

  • /bin

  • /sbin

  • /lib

Lấy thí dụ, nếu bạn thay thế thư mục /usr/bin/perl, lần kế tiếp nâng cấp gói
perl sẽ ghi đè lên thư mục đó. Nhà chuyên môn có thể khắc phục trường hợp này
bằng cách lập một số gói thành "giữ lại" trong chương trình aptitude.

One of the best installation methods is apt. You can use the command line
version of apt as well as tools like aptitude or synaptic (which are just
graphical frontends for apt). Note that apt will also let you merge main,
contrib, and non-free so you can have restricted packages (strictly speaking
not belonging to Debian) as well as packages from Debian GNU/Linux at the same
time.

8.2.2. Phần mềm Thêm Hiện có cho Debian

Bản cài đặt Debian mặc định chưa cho phép những kho lưu phần mềm chính thức và
không chính thức. Nhiều người tìm thấy trong những kho lưu này phần mềm quan
trọng và họ muốn có. CÓ thể tìm thông tin về các kho lưu thêm này tại trang
Wiki Debian tựa đề Phần mềm Hiện có cho Bản phát hành Ổn định của Debian.

8.2.3. Quản lý phiên bản ứng dụng

Phiên bản ứng dụng khác nhau được quản lý bởi « update-alternatives ». Nếu bạn
có bảo tồn đồng thời nhiều phiên bản khác nhau của cùng một ứng dụng, xem trang
hướng dẫn cho chương trình này, bằng lệnh: « man update-alternatives ».

8.2.4. Quản lý công việc định kỳ

Công việc nào nằm trong phạm vị hoạt động của quản trị hệ thống nên được ghi
vào thư mục /etc, vì chúng là tập tin cấu hình. Nếu bạn tạo công việc định kỳ
(cron) với quyền người chủ (root) cần chạy hàng ngày (daily), hàng tuần
(weekly) hay hàng tháng (monthly), hãy chèn chúng vào /etc/cron.
{daily,weekly,monthly}. Những công việc này được gọi từ /etc/crontab: chúng sẽ
chạy theo thứ tự abc, mà sắp xếp chúng.

Mặt khác, nếu bạn tạo một công việc định kỳ (cron job):

  • cần chạy với tư cách người dùng đặc biệt, hay

  • cần chạy vào lúc đặc biệt hoặc với tần số đặc biệt,

bạn vẫn có khả năng sử dụng hoặc /etc/crontab, hoặc còn tốt hơn, /etc/cron.d/
cái_nào. Những tập tin riêng này cũng có một trường thêm cho phép bạn qui định
tài khoản người dùng dưới đó công việc định kỳ sẽ chạy.

Trong mỗi trường hợp, bạn chỉ hiệu chỉnh những tập tin đó, rồi chương trình
cron sẽ nhận biết chúng một cách tự động. Không cần chạy lệnh đặc biệt nào. Để
tìm thông tin thêm, xem hai trang hướng dẫn cron(8) và crontab(5), và tập tin
Đọc Đi /usr/share/doc/cron/README.Debian.

8.3. Thông tin thêm

Địa chỉ Web Debian chứa rất nhiều tài liệu về Debian. Cụ thể là Hỏi Đáp Debian
GNU/Linux FAQ và tham khảo Debian Reference. Có một bảng liệt kê nhiều tài liệu
hướng dẫn Debian bổ sung nằm tại dự án tài liệu Debian (Debian Documentation
Project). Cộng đồng Debian hỗ trợ với nhau : để đăng ký tham gia một hay nhiều
hộp thư chung Debian, xem trang Mail List Subscription. Cuối cùng nhưng không
kém phần quan trọng là kho lưu hộp thư chung Debian Debian Mailing List
Archives mà chứa thông tin phong phú về Debian.

Để tìm thông tin về chương trình riêng nào, trước tiên bạn hãy thử nhập lệnh
man tên_chương_trình, hoặc info tên_chương_trình.

Cũng có rất nhiều tài liệu hữu ích nằm trong thư mục /usr/share/doc. Cụ thể là
thư mục con Thế Nào /usr/share/doc/HOWTO và Hỏi Đáp /usr/share/doc/FAQ chứa
nhiều thông tin hữu dụng. Để thông báo lỗi, xem /usr/share/doc/debian/bug*. Để
đọc thông tin về vấn đề đặc trưng cho Debian đối với một chương trình riêng,
xem tập tin Đọc Đi /usr/share/doc/(tên_gói)/README.Debian.

Một nguồn thông tin tổng quát về GNU/LInux là dự án tài liệu Debian Linux
Documentation Project. Tại đó, bạn sẽ tìm các tài liệu Thế Nào và liên kết chỉ
đến thông tin rất qúy giá khác về nhiều phần của hệ thống GNU/Linux.

Linux is an implementation of Unix. The Linux Documentation Project (LDP)
collects a number of HOWTOs and online books relating to Linux.

If you are new to Unix, you probably should go out and buy some books and do
some reading. This list of Unix FAQs contains a number of UseNet documents
which provide a nice historical reference.

8.4. Thiết lập thư điện tử trên hệ thống

Thư điện tử đã trở thảnh chủ yếu trong đợi sống hiện đại. Có nhiều tuỳ chọn
thiết lập nó, và một số tiện ích Debian yêu cầu một thiết lập riêng, thì tiến
đoạn này chứa thông tin cơ bản yêu cầu.

Có ba chức năng chính cấu tạo một hệ thống thư điện tử. Điều thứ nhất là Tác
nhân người dùng thư tín (MUA), chương trình người dùng thật sử dụng để viết và
đọc các bài thư. Điều thứ hai là Tác nhân truyền thư tín (MTA) mà truyền các
bài thư từ máy này sang máy khác. Điều thứ ba là Tác nhân phát thư tín (MDA) mà
truyền các bài thư gửi đến vào Hộp Đến của người dùng.

Ba chức năng này có thể được thực hiện bằng chương trình khác nhau, nhưng cũng
có thể được kết hợp trong một hay hai chương trình. Cũng có thể thiết lập
chương trình khác nhau quản lý những chức năng này cho các kiểu thư khác nhau.

Trên hệ thống kiểu Linux và Unix, rất nhiều người đã dùng mutt như là MUA.
Giống như phần lớn chương trình Linux truyền thống, nó dựa vào văn bản. Nó
thường được dùng cùng với exim hay sendmail như là MTA và procmail như là MDA.

With the increasing popularity of graphical desktop systems, the use of
graphical e-mail programs like GNOME's evolution, KDE's kmail or Mozilla's 
thunderbird has becoming more popular. These programs combine the function of a
MUA, MTA and MDA, but can -- and often are -- also be used in combination with
the traditional Linux tools.

8.4.1. Cấu hình thư điện tử mặc định

Even if you are planning to use a graphical mail program, it would be useful,
to have a traditional MTA/MDA installed and correctly set up on your Debian GNU
/Linux system. Reason is that various utilities running on the system^[18] can
send important notices by e-mail to inform the system administrator of
(potential) problems or changes.

For this you can install exim4 and mutt with apt install exim4 mutt. exim4 is a
combination MTA/MDA that is relatively small but very flexible. By default it
will be configured to only handle e-mail local to the system itself and e-mails
addressed to the system administrator (root account) will be delivered to the
regular user account created during the installation^[19].

Khi các thư hệ thống được phát, chúng được thêm vào một tập tin trong /var/mail
/tên_tài_khoản. Có thể đọc các thư này bằng mutt.

8.4.2. Gửi thư ra hệ thống

Như nói trên, hệ thống Debian đã cài đặt chỉ được thiết lập để thao tác các thư
cục bộ với hệ thống, không phải để gửi thư cho người khác, cũng không phải để
nhận thư từ người khác.

Nếu bạn muốn chương trình exim4 quản lý các thư bên ngoài, xem phần phụ kế tiếp
tìm những tùy chọn cấu hình cơ bản. Hãy thử ra việc gửi và nhận thư chạy đúng
không.

Nếu bạn định sử dụng chương trình thư điện tử kiểu đồ họa và sử dụng máy phục
vụ thư tín của nhà cung cấp dịch vụ Mạng (ISP) hay chỗ làm, không cần cấu hình
exim4 để quản lý các thư bên ngoài. Chỉ cần cấu hình chương trình thư đồ họa để
sử dụng những máy phục vụ đúng để gửi và nhận thư điện tử (các hướng dẫn này
nằm ở ngoại phạm vị của sổ tay này).

Tuy nhiên, trong trường hợp đó, bạn có thể cần phải cấu hình một số tiện ích để
gửi đúng thư điện tử. Một tiện ích như vậy là reportbug, một chương trình làm
cho dễ dàng việc thông báo lỗi trong gói Debian. Mặc định là nó chờ đợi gửi thư
báo lỗi bằng exim4.

Để thiết lập đúng reportbug để sử dụng máy phục vụ thư tín bên ngoài, hãy chạy
lệnh cấu hình reportbug --configure và trả lời "không" khi hỏi nếu có sẵn MTA
không. Sau đó, bạn sẽ được nhắc nhập máy phục vụ SMTP (gửi thư) cần dùng để đệ
trình báo cáo lỗi.

8.4.3. Cấu hình tác nhân truyền thư tín Exim4

Muốn hệ thống cũng thao tác các thư điện tử bên ngoài thì cần phải cấu hình lại
gói exim4^[20]:

# dpkg-reconfigure exim4-config

Sau khi nhập lệnh này (dưới người chủ), tiến trình sẽ hỏi nếu bạn muốn chia cấu
hình ra nhiều tập tin nhỏ. Chưa chắc thì bặt tùy chọn mặc định.

Tiếp theo hiển thị vài trường hợp thư tín thường gặp. Hãy chọn điều thích hợp
với những nhu cầu của bạn.

nơi Internet

    Hệ thống của bạn có kết nối đến mạng, và thư tín được gởi và nhận trực tiếp
    bằng SMTP. Trên những màn hình theo sau, bạn sẽ được hỏi vài câu cơ bản,
    như tên thư tín của máy tính này, hay danh sách miền cho chúng bạn chấp
    nhận hay chuyển tiếp lại thư tín.

thư được gởi bởi máy thông minh

    Trong trường hợp này, các thư gửi đi được chuyển tiếp tới máy khác, tên "
    máy khéo", mà gửi thư đó cho đích. Máy khéo cũng thường cất giữ các thư gửi
    đến máy tính của bạn, vậy bạn không cần lên Mạng suốt. Cũng cần tải các thư
    xuống máy khéo bằng chương trình như fetchmail.

    Trong nhiều trường hợp, máy khéo là máy phục vụ thư tín của nhà cung cấp
    dịch vụ Mạng (ISP) thì tùy chọn này rất thích hợp với người dùng quay số.
    Máy khéo cũng có thể là máy phục vụ thư tín ở chỗ làm, hoặc ngay cả một hệ
    thống khác trên cùng mạng.

thư gửi bởi máy khéo; không có thư cục bộ

    Tùy chọn này cơ bản bằng điều trước, trừ hệ thống sẽ không được thiết lập
    để thao tác thư cho miền thư điện tử cục bộ. Các thư trên hệ thống chính nó
    (v.d. cho quản trị hệ thống) vẫn còn sẽ được xử lý.

chỉ phát cục bộ

    Đây là tùy chọn mặc định trong cấu hình hệ thống.

chưa cấu hình

    Hãy chọn điều này chỉ nếu bạn biết chính xác bạn làm gì. Nó sẽ để lại hệ
    thống thư chưa cấu hình: trước khi bạn cấu hình nó, bạn không có khả năng
    gởi hay nhận thư nào, thì có thể mất một số thông điệp quan trong từ tiện
    ích hệ thống.

Nếu không có trường hợp trong những trường hợp này là thích hợp với những nhu
cầu của bạn, hoặc nếu bạn cần một thiết lập chi tiết hơn, cần phải chỉnh sửa
tập tin cấu hình nằm dưới thư mục /etc/exim4 sau khi cài đặt xong. Thông tin
thêm về exim4 nằm dưới thư mục /usr/share/doc/exim4; tập tin Đọc Đi
README.Debian.gz chứa chi tiết thêm về cách thiết lập exim4, và giải thích tìm
tài liệu thêm như thế nào.

Ghi chú rằng việc gửi thư trực tiếp cho Mạng khi bạn không có tên miền chính
thức có thể gây ra thư bị từ chối do biện pháp chống thư rác trên máy phục vụ
nhận thư. Tốt hơn khi dùng máy phục vụ thư tín của nhà cung cấp dịch vụ Mạng
(ISP). Nếu bạn vẫn còn muốn gửi thư một cách trực tiếp, có lẽ bạn muốn sử dụng
một địa chỉ thư điện tử khác với điều được tạo ra theo mặc định. Dùng exim4 như
là MTA, thì có thể làm như thế bằng cách thêm một mục nhập vào tập tin /etc/
email-addresses.

8.5. Biên dịch hạt nhân mới

Why would someone want to compile a new kernel? It is most probably not
necessary since the default kernel shipped with Debian handles almost all
configurations.

If you want to compile your own kernel nevertheless, this is of course possible
and we recommend the use of the "make deb-pkg" target. For more information
read the Debian Linux Kernel Handbook.

8.6. Phục hồi hệ thống bị hỏng

Thỉnh thoảng gặp lỗi nên hệ thống được cài đặt cẩn thận không còn khởi động
được lại. Có lẽ cấu hình bộ nạp khởi động bị hỏng trong khi thử ra sự thay đổi,
hoặc có lẽ một hạt nhân mới cài đặt sẽ không khởi động được, hoặc gì đó rất lạ
đã xảy ra, bạn chưa biết sao. Trong mọi trường hợp đều, bạn cần có hệ thống
hoạt động trong khi sửa điều bị hỏng thì chế độ cứu có ích.

To access rescue mode, select rescue from the boot menu, type rescue at the
boot: prompt, or boot with the rescue/enable=true boot parameter. You'll be
shown the first few screens of the installer, with a note in the corner of the
display to indicate that this is rescue mode, not a full installation. Don't
worry, your system is not about to be overwritten! Rescue mode simply takes
advantage of the hardware detection facilities available in the installer to
ensure that your disks, network devices, and so on are available to you while
repairing your system.

Thay cho công cụ phân vùng, màn hình kế tiếp nên hiển thị danh sách các phân
vùng nằm trong hệ thống, yêu cầu bạn chọn một điều. Bình thường, bạn nên chọn
phân vùng chứa hệ thống tập tin gốc mà bạn cần phải sửa chữa. Bạn có khả năng
chọn phân vùng nằm trên thiết bị kiểu RAID và LVM cũng như điều được tạo trực
tiếp trên đĩa.

Nếu có thể, trình cài đặt lúc bây giờ hiển thị một dấu nhắc trình bao trong hệ
thống tập tin đã chọn, cho bạn thực hiện việc sửa chữa nào yêu cầu. Ví dụ, nếu
bạn cần phải cài đặt lại bộ nạp khởi động GRUB vào mục ghi khởi động cái của
đĩa cứng thứ nhất, bạn có thể gõ câu lệnh grub-install '(hd0)' để làm như thế.

Nếu trình cài đặt không thể chạy trình bao có ích trong hệ thống tập tin gốc đã
chọn, có lẽ vì hệ thống tập tin bị hỏng, nó sẽ hiển thị cảnh báo và đưa ra
trình bao trong môi trường cài đặt thay thế. Môi trường này có thể cung cấp số
công cụ ít hơn, mà thường vẫn còn là đủ để sửa chữa hệ thống. Hệ thống tập tin
gốc mới chọn sẽ được gắn kết vào thư mục /target.

Trong mỗi trường hợp, sau khi bạn thoát khỏi trình bao, hệ thống sẽ khởi động
lại.

Cuối cùng, ghi chú rằng tiến trình sửa chữa hệ thống bị hỏng có thể là khó :
tài liệu hướng dẫn này không phải nhắm diễn tả mọi lỗi có thể hay cách sửa nó.
Nếu bạn gặp lỗi, hãy hỏi nhà chuyên môn.


━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

^[17] Under the SysV init system halt had the same effect as poweroff, but with
systemd as init system (the default since jessie) their effects are different.

^[18] Examples are: cron, quota, logcheck, aide, ...

^[19] The forwarding of mail for root to the regular user account is configured
in /etc/aliases. If no regular user account was created, the mail will of
course be delivered to the root account itself.

^[20] Cũng có thể gỡ bỏ gói exim4 và thay thế bằng MTA/MDA khác.

Phụ lục A. Cài đặt Thế nào

Mục lục

A.1. Chuẩn bị
A.2. Khởi động trình cài đặt

    A.2.1. Optical disc
    A.2.2. Thanh bộ nhớ USB
    A.2.3. Khởi động từ mạng
    A.2.4. Khởi động từ đĩa cứng

A.3. Cài đặt
A.4. Gởi báo cáo cài đặt cho chúng tôi
A.5. Vậy cuối cùng...

Tài liệu này diễn tả cách cài đặt Debian GNU/Linux bullseye dành cho 64-bit PC
(kiến trúc "amd64") bằng debian-installer mới. Nó là sự giải thích nhanh của
tiến trình cài đặt mà nên chứa tất cả thông tin cần thiết để cài đặt trong phần
lớn trường hợp. Khi thông tin thêm có thể là hữu ích, chúng tôi sẽ liên kết đến
sự giải thích chi tiết hơn trong phần tài liệu khác.

A.1. Chuẩn bị

Nếu bạn gặp lỗi trong khi cài đặt, xem Phần 5.4.7, "Đệ trình báo cáo cài đặt"
để tìm thông tin về cách thông báo lỗi. Nếu bạn cần biết gì không nằm trong
phạm vị của tài liệu này, xin hãy hỏi câu hoặc trong hộp thư chung «
debian-boot » (debian-boot@lists.debian.org) hoặc trên IRC (kênh #debian-boot
trên mạng OFTC).

A.2. Khởi động trình cài đặt

The debian-cd team provides builds of installation images using
debian-installer on the Debian CD/DVD page. For more information on where to
get installation images, see Phần 4.1, "Official Debian GNU/Linux installation
images".

Some installation methods require other images than those for optical media.
Phần 4.2.1, "Where to Find Installation Files" explains how to find images on
Debian mirrors.

Những tiết đoạn phụ dưới đây cung cấp chi tiết về ảnh nào bạn nên lấy để thực
hiện mỗi phương pháp cài đặt.

A.2.1. Optical disc

The netinst CD image is a popular image which can be used to install bullseye
with the debian-installer. This installation method is intended to boot from
the image and install additional packages over a network; hence the name "
netinst". The image has the software components needed to run the installer and
the base packages to provide a minimal bullseye system. If you'd rather, you
can get a full size CD/DVD image which will not need the network to install.
You only need the first image of such set.

Download whichever type you prefer and burn it to an optical disc. To boot the
disc, you may need to change your BIOS/UEFI configuration, as explained in
Phần 3.6.1, "Invoking the BIOS/UEFI Set-Up Menu".

A.2.2. Thanh bộ nhớ USB

Cũng có thể cài đặt từ thiết bị lưu trữ USB rời. Chẳng hạn, một dây khoá USB có
thể làm vật chứa cài đặt Debian hữu ích mà bạn có thể mang đến khắp chốn.

The easiest way to prepare your USB memory stick is to download any Debian CD
or DVD image that will fit on it, and write the image directly to the memory
stick. Of course this will destroy anything already on the stick. This works
because Debian CD/DVD images are "isohybrid" images that can boot both from
optical and USB drives.

Có một số phương pháp khác, dẻo hơn, để thiết lập thanh bộ nhớ để dùng
debian-installer, cũng có thể làm cho nó hoạt động được với thanh bộ nhớ nhỏ
hơn. Để tìm chi tiết, xem Phần 4.3, "Chuẩn bị tập tin để khởi động thanh bộ nhớ
USB".

While booting from USB storage is quite common on UEFI systems, this is
somewhat different in the older BIOS world. Some BIOSes can boot USB storage
directly, and some cannot. You may need to configure your BIOS/UEFI to enable "
USB legacy support" or "Legacy support". The boot device selection menu should
show "removable drive" or "USB-HDD" to get it to boot from the USB device. For
helpful hints and details, see Phần 5.1.1, "Khởi động từ thanh bộ nhớ USB".

A.2.3. Khởi động từ mạng

Cũng có thể khởi động debian-installer một cách hoàn toàn từ mạng. Mỗi phương
pháp khởi động từ mạng phụ thuộc vào kiến trúc và thiết lập khởi động mạng
riêng của bạn. Những tập tin nằm trong thư mục netboot/ có thể được dùng để
khởi động debian-installer từ mạng.

Cách thiết lập dễ nhất rất có thể là việc khởi động từ mạng kiểu PXE. Hãy giải
nén (gunzip và bỏ .tar) tập tin netboot/pxeboot.tar.gz vào thư mục /srv/tftp
hoặc nơi nào thích hợp với trình phục vụ tftp của bạn. Thiết lập trình phục vụ
DHCP để gởi tên tập tin pxelinux.0 đến máy khách, và với may mắn, mọi thứ sẽ
hoạt động được. Để tìm chỉ dẫn chi tiết, xem Phần 4.5, "Chuẩn bị tập tin để
khởi động qua mạng TFTP".

A.2.4. Khởi động từ đĩa cứng

It's possible to boot the installer using no removable media, but just an
existing hard disk, which can have a different OS on it. Download hd-media/
initrd.gz, hd-media/vmlinuz, and a Debian CD/DVD image to the top-level
directory of the hard disk. Make sure that the image has a filename ending in
.iso. Now it's just a matter of booting linux with the initrd. Phần 5.1.5,
"Booting from Linux using GRUB" explains one way to do it.

A.3. Cài đặt

Một khi trình cài đặt khởi chạy, bạn sẽ xem màn hình ban đầu. Hãy bấm Enter để
khởi động, hoặc đọc các chỉ dẫn về những phương pháp khởi động và tham số khác
(xem Phần 5.3, "Tham số khởi động").

Sau một thời gian, bạn sẽ được nhắc chọn ngôn ngữ của mình. Hãy sử dụng phím
mũi tên để chọn ngôn ngữ, rồi bấm Enter để tiếp tục. Sau đó, bạn sẽ được nhắc
chọn quốc gia, trong danh sách gồm quốc gia nơi nói ngôn ngữ bạn. Nếu chỗ bạn
không nằm trong danh sách ngắn, có sẵn một danh sách mọi quốc gia trên khắp thế
giới.

Có lẽ bạn sẽ được nhắc xác nhận bố trí bàn phím của mình. Hãy chọn bố trí bàn
phím thích hợp, hoặc chọn điều mặc định nếu bạn chưa chắc.

Now sit back while debian-installer detects some of your hardware, and loads
the rest of the installation image.

Tiếp theo, trình cài đặt sẽ thử phát hiện phần cứng mạng của bạn, để thiết lập
thao tác chạy mạng bằng DHCP. Nếu bạn chưa lên mạng, hoặc không có khả năng
DHCP, bạn sẽ có dịp tự cấu hình mạng.

Setting up the network is followed by the creation of user accounts. By default
you are asked to provide a password for the "root" (administrator) account and
information necessary to create one regular user account. If you do not specify
a password for the "root" user, this account will be disabled but the sudo
package will be installed later to enable administrative tasks to be carried
out on the new system. By default, the first user created on the system will be
allowed to use the sudo command to become root.

Bước tiếp theo là đặt đồng hồ và múi giờ. Tiến trình cài đặt sẽ thử liên lạc
với một máy phục vụ thời gian trên Internet để đảm bảo đồng hồ được đặt đúng.
Múi giờ dựa vào quốc gia được chọn ở một bước trước thì tiến trình cài đặt sẽ
chỉ nhắc bạn chọn thêm nếu quốc gia có nhiều miền thời gian.

Đây là giai đoạn phân vùng đĩa. Trước tiên, bạn sẽ có dịp tự động phân vùng
hoặc một đĩa hoàn toàn, hoặc sức chứa còn rảnh có sẵn trên một đĩa (xem
Phần 6.3.4.2, "Phân vùng hướng dẫn"). Tùy chọn này được khuyến khích cho người
dùng mới hoặc người nào vội vàng. Nếu bạn không muốn tự động phân vùng, hãy
chọn mục Bằng tay trong trình đơn.

Nếu bạn muốn bảo tồn một phân vùng loại DOS hay Windows đã có, hãy rất cẩn thận
khi tự động khởi động. Nếu bạn chọn phân vùng bằng tay, có thể sử dụng trình
cài đặt để thay đổi kích cỡ của phân vùng FAT hay NTFS tồn tại để tạo đủ sức
chứa cho bản cài đặt Debian: đơn giản chọn phân vùng đó rồi ghi rõ kích cỡ mới
cho nó.

Trên màn hình kế tiếp, bạn sẽ xem bảng phân vùng, định dạng phân vùng dự định,
và nơi sẽ gắn kết chúng. Hãy chọn một phân vùng để sửa đổi hoặc xoá. Người dùng
đã tự động phân vùng thì nên có khả năng chỉ chọn mục Phân vùng xong và ghi các
thay đổi vào đĩa trong trình đơn, để sử dụng cấu hình được thiết lập. Ghi nhớ :
cần phải gán ít nhất một phân vùng dành cho chỗ trao đổi (swap space), cũng gắn
kết một phân vùng đến /. Để tìm thêm thông tin về sử dụng công cụ phân vùng như
thế nào, xem Phần 6.3.4, "Phân vùng và chọn điểm lắp"; phụ lục Phụ lục C, Phân
vùng cho Debian chứa thông tin chung hơn về thao tác phân vùng.

Lúc này, debian-installer định dạng các phân vùng của bạn, rồi bắt đầu cài đặt
hệ thống cơ bản, mà có thể hơi lâu. Sau đó, hạt nhân sẽ được cài đặt.

Hệ thống cơ bản được cài đặt trước là một bản cài đặt hoạt đông mà vẫn còn rất
tối thiểu. Để thêm chức năng, bước tiếp theo cho phép bạn cài đặt thêm gói bằng
cách chọn một số « tác vụ ». Trước khi cài đặt gói, cũng cần phải cấu hình
chương trình apt vì nó xác định kho lưu cung cấp các gói phần mềm. Tác vụ "Hệ
thống chuẩn" sẽ được lựa chọn theo mặc định, và bình thường nên được cài đặt.
Cũng lựa chọn tác vụ "Màn hình nền" nếu bạn muốn sử dụng môi trường màn hình
nền đồ họa (v.d. GNOME hay KDE). Xem thêm phần Phần 6.3.6.2, "Lựa chọn và Cài
đặt Phần mềm".

The last step is to install a boot loader. If the installer detects other
operating systems on your computer, it will add them to the boot menu and let
you know. By default GRUB will be installed to the UEFI partition/boot record
of the primary drive, which is generally a good choice. You'll be given the
opportunity to override that choice and install it elsewhere.

debian-installer giờ sẽ báo bạn biết rằng tiến trình cài đặt đã chạy xong. Hãy
gỡ bỏ đĩa CD-ROM hay vật chứa khởi động khác, rồi bấm Enter để khởi động lại
máy tính. Nó nên khởi động vào hệ thống mới cài đặt, và cho phép bạn đăng nhập.
(Xem thêm phần Chương 7, Khởi động vào hệ thống Debian mới.)

Nếu bạn muốn tìm thông tin thêm về tiến trình cài đặt, xem Chương 6, Sử dụng
trình cài đặt Debian.

A.4. Gởi báo cáo cài đặt cho chúng tôi

If you successfully managed an installation with debian-installer, please take
time to provide us with a report. The simplest way to do so is to install the
reportbug package (apt install reportbug), configure reportbug as explained in
Phần 8.4.2, "Gửi thư ra hệ thống", and run reportbug installation-reports.

Nếu bạn chưa cài đặt xong, rất có thể là bạn đã gặp lỗi trong trình cài đặt
Debian. Để cải tiến phần mềm cài đặt, chúng tôi cần phải biết lỗi này: bạn báo
cáo nhé. Bạn có thể thông báo lỗi trong báo cáo cài đặt; nếu tiến trình cài đặt
thất bại hoàn toàn, xem Phần 5.4.6, "Thông báo vấn đề cài đặt".

A.5. Vậy cuối cùng...

Chúng tôi hy vọng tiến trình cài đặt Debian chạy được cho bạn, cũng là bạn tìm
thấy Debian là hữu hiệu. Đề nghị bạn đọc Chương 8, Bước kế tiếp và đi đâu vậy.

Phụ lục B. Tự động hoá việc cài đặt bằng chèn sẵn

Mục lục

B.1. Giới thiệu

    B.1.1. Phương pháp chèn sẵn
    B.1.2. Hạn chế

B.2. Dùng khả năng chèn sẵn

    B.2.1. Tải tập tin định cấu hình sẵn
    B.2.2. Dùng tham số khởi động để chèn sẵn câu hỏi
    B.2.3. Chế độ tự động
    B.2.4. Biệt hiệu có ích khi chèn sẵn
    B.2.5. Examples of boot prompt preseeding
    B.2.6. Dùng máy phục vụ DHCP để xác định tập tin định cấu hình sẵn

B.3. Tạo tập tin định cấu hình sẵn
B.4. Nội dung của tập tin định cấu hình sẵn (cho bullseye)

    B.4.1. Địa phương hoá
    B.4.2. Cấu hình mạng
    B.4.3. Bàn giao tiếp mạng
    B.4.4. Thiết lập máy nhân bản
    B.4.5. Thiết lập tài khoản
    B.4.6. Thiết lập đồng hồ và múi giờ
    B.4.7. Phân vùng
    B.4.8. Cài đặt hệ thống cơ bản
    B.4.9. Thiết lập apt
    B.4.10. Chọn gói phần mềm
    B.4.11. Cài đặt bộ nạp khởi động
    B.4.12. Làm xong tiến trình cài đặt
    B.4.13. Chèn trước gói khác

B.5. Tùy chọn cấp cao

    B.5.1. Chạy lệnh riêng trong khi cài đặt
    B.5.2. Dùng khả năng chèn sẵn để thay đổi giá trị mặc định
    B.5.3. Tải dây chuyền tập tin định cấu hình sẵn

Phụ lục này giải thích phương pháp chèn sẵn thông tin trả lời các câu hỏi trong
debian-installer để tự động hoá tiến trình cài đặt.

Những đoạn cấu hình được dùng trong phụ lục này cũng sẵn sàng dạng tập tin định
cấu hình sẵn ví dụ tại ../example-preseed.txt.

B.1. Giới thiệu

Khả năng chèn sẵn cung cấp phương pháp đặt trả lời những câu được hỏi trong
tiến trình cài đặt, không cần tự nhập mỗi trả lời trong khi cài đặt. Như thế
thì có khả năng tự động hoá hoàn toàn phần lớn kiểu việc cài đặt, ngay cả cung
cấp một số tính năng không sẵn sàng trong tiến trình cài đặt chuẩn.

Không cần chèn sẵn. Nếu bạn dùng một tập tin chèn sẵn còn rỗng, trình cài đặt
sẽ ứng xử đúng như trong một tiến trình cài đặt thông thường bằng tay. Mỗi câu
hỏi bạn chèn sẵn sẽ (nếu bạn đã đặt dữ liệu đúng) sửa đổi bản cài đặt bằng cách
nào so với đường cơ sở đó.

B.1.1. Phương pháp chèn sẵn

Có ba phương pháp có thể dùng để chèn sẵn: initrd, tập tin và mạng. Tiến trình
chèn sẵn initrd sẽ hoạt động được với bất cứ phương pháp cài đặt nào, cũng hỗ
trợ khả năng chèn sẵn số thứ thêm, còn cần thiết bạn chuẩn bị nhiều nhất. Tiến
trình chèn sẵn kiểu tập tin và mạng có thể được dùng với phương pháp cài đặt
khác nhau.

Theo đây có bảng hiển thị phương pháp chèn sẵn nào dùng được với phương pháp
cài đặt nào.

┌─────────────────────────────────────────────┬─────────┬───────────┬─────────┐
│             Phương pháp cài đặt             │ initrd  │  tập tin  │  mạng   │
├─────────────────────────────────────────────┼─────────┼───────────┼─────────┤
│CD/DVD/USB                                   │có       │có         │có^[a]   │
├─────────────────────────────────────────────┼─────────┼───────────┼─────────┤
│khởi động qua mạng                           │có       │không      │có       │
├─────────────────────────────────────────────┼─────────┼───────────┼─────────┤
│kiểu đĩa cứng (gồm thanh USB)                │có       │có         │có^[a]   │
├─────────────────────────────────────────────┴─────────┴───────────┴─────────┤
│^[a] nhưng chỉ nếu bạn có khả năng truy cập mạng, và đặt giá trị preseed/url │
│thích hợp                                                                    │
└─────────────────────────────────────────────────────────────────────────────┘

An important difference between the preseeding methods is the point at which
the preconfiguration file is loaded and processed. For initrd preseeding this
is right at the start of the installation, before the first question is even
asked. Preseeding from the kernel command line happens just after. It is thus
possible to override configuration set in the initrd by editing the kernel
command line (either in the bootloader configuration or manually at boot time
for bootloaders that allow it). For file preseeding this is after the
installation image has been loaded. For network preseeding it is only after the
network has been configured.

Quan trọng

Obviously, any questions that have been processed before the preconfiguration
file is loaded cannot be preseeded (this will include questions that are only
displayed at medium or low priority, like the first hardware detection run). A
not so convenient way to avoid these questions from being asked is to preseed
them through the boot parameters, as described in Phần B.2.2, "Dùng tham số
khởi động để chèn sẵn câu hỏi".

In order to easily avoid the questions that would normally appear before the
preseeding occurs, you can start the installer in "auto" mode. This delays
questions that would normally be asked too early for preseeding (i.e. language,
country and keyboard selection) until after the network comes up, thus allowing
them to be preseeded. It also runs the installation at critical priority, which
avoids many unimportant questions. See Phần B.2.3, "Chế độ tự động" for
details.

B.1.2. Hạn chế

Mặc dù phương pháp này có khả năng chèn sẵn phần lớn câu hỏi được
debian-installer dùng, có một số ngoại lệ quan trọng. Bạn cần phải phân vùng
(lại) toàn bộ đĩa hoặc sử dụng sức chứa còn rảnh trên đĩa; không thể sử dụng
phân vùng đã có.

B.2. Dùng khả năng chèn sẵn

You will first need to create a preconfiguration file and place it in the
location from where you want to use it. Creating the preconfiguration file is
covered later in this appendix. Putting it in the correct location is fairly
straightforward for network preseeding or if you want to read the file off a
usb-stick. If you want to include the file in an installation ISO image, you
will have to remaster the image. How to get the preconfiguration file included
in the initrd is outside the scope of this document; please consult the
developers' documentation for debian-installer.

Bạn có khả năng tạo tập tin cấu hình sẵn riêng dựa vào tập tin cấu hình sẵn mẫu
sẵn sàng tại ../example-preseed.txt. Tập tin mẫu này lần lượt dựa vào những
đoạn cấu hình nằm trong phụ lục này.

B.2.1. Tải tập tin định cấu hình sẵn

Nếu bạn đang dùng khả năng chèn sẵn kiểu initrd, bạn chỉ cần phải chắc là một
tập tin tên preseed.cfg nằm trong thư mục gốc của initrd đó. Trình cài đặt sẽ
kiểm tra tự động nếu có tập tin này không, cũng sẽ tải nó.

Đối với các phương pháp chèn sẵn khác, bạn cần phải báo cho trình cài đặt nên
sử dụng tập tin nào khi khởi động. Bình thường làm như thế bằng cách gửi cho
hạt nhân một tham số khởi động, hoặc bằng tay vào lúc khởi động hoặc bằng cách
chỉnh sửa tập tin cấu hình bộ nạp khởi động (v.d. syslinux.cfg) và thêm tham số
vào kết thúc của (những) dòng phụ thêm cho hạt nhân.

Nếu bạn có phải xác định tập tin cấu hình sẵn trong cấu hình bộ nạp khởi động,
thì cũng có thể sửa đổi cấu hình để tránh yêu cầu bấm phím Enter để khởi động
trình cài đặt. Đối với syslinux có nghĩa là lập thời hạn (timeout) thành 1
trong tập tin syslinux.cfg.

Để chắc là trình cài đặt nhận tập tin cấu hình sẵn đúng, bạn có tùy chọn xác
định tổng kiểm (checksum) cho tập tin đó. Hiện thời nó cần phải là tổng kiểu
md5sum, và nếu được xác định, nó phải khớp với tập tin cấu hình sẵn, nếu không
thì trình cài đặt sẽ từ chối dùng nó.

Boot parameters to specify:
- if you're netbooting:
  preseed/url=http://host/path/to/preseed.cfg
  preseed/url/checksum=5da499872becccfeda2c4872f9171c3d
- or
  preseed/url=tftp://host/path/to/preseed.cfg
  preseed/url/checksum=5da499872becccfeda2c4872f9171c3d

- if you're booting a remastered installation image:
  preseed/file=/cdrom/preseed.cfg
  preseed/file/checksum=5da499872becccfeda2c4872f9171c3d

- if you're installing from USB media (put the preconfiguration file in the
  toplevel directory of the USB stick):
  preseed/file=/hd-media/preseed.cfg
  preseed/file/checksum=5da499872becccfeda2c4872f9171c3d

Ghi chú rằng địa chỉ Mạng preseed/url có thể được thu ngắn thành url, địa chỉ
tập tin preseed/file dạng ngắn là file và địa chỉ tập tin tổng kiểm preseed/
file/checksum thành preseed-md5, khi chúng được dùng làm tham số khởi động.

B.2.2. Dùng tham số khởi động để chèn sẵn câu hỏi

Nếu tập tin cấu hình sẵn không thể được dùng để chèn sẵn một số bước riêng,
tiến trình cài đặt vẫn còn có thể được tự động hoá hoàn toàn, vì bạn còn có khả
năng gửi các giá trị chèn sẵn cho hạt nhân trên dòng lệnh khi khởi động trình
cài đặt.

Các tham số khởi động cũng có thể được dùng nếu bạn không thật muốn sử dụng khả
năng chèn sẵn, nhưng chỉ muốn cung cấp trả lời cho một câu hỏi riêng. Một số
mẫu có ích về trường hợp này nằm trong phần khác của tài liệu này.

Để đặt một giá trị cần sử dụng bên trong debian-installer, chỉ cần gửi
đường_dẫn/đến/biến=giá_trị cho bất cứ biến chèn sẵn nào được liệt kê trong
những mẫu của phụ lục này. Nếu giá trị nào sẽ được dùng để cấu hình gói cho hệ
thống đích, bạn cần phải thêm (vào đầu chuỗi) cái sở hữu (owner)^[21] biến đó
như thế: cái_sở_hữu:đường_dẫn/đến/biến=giá_trị. Không xác định cái sở hữu thì
giá trị cho biến đó sẽ không được sao chép vào cơ sở dữ liệu debconf trong hệ
thống đích nên vô ích trong tiến trình cấu hình gói liên quan.

Bình thường, chèn sẵn một câu hỏi bằng cách này có nghĩa là người dùng sẽ không
được nhắc với câu hỏi đó. Để đặt một giá trị mặc định nào đó cho câu hỏi, nhưng
vẫn còn nhắc người dùng với cau hỏi đó, dùng toán tử "?=" thaycho "=". Xem thêm
Phần B.5.2, "Dùng khả năng chèn sẵn để thay đổi giá trị mặc định".

Ghi chú rằng một số biến thường được đặt tại dấu nhắc khởi động cũng có biệt
hiệu ngắn hơn. Biệt hiệu sẵn sàng thì được dùng trong những mẫu thí dụ trong
phụ lục này, thay cho biến đầy đủ. Thí dụ, biến preseed/url có biệt hiệu url,
và biệt hiệu tasks đại diện tasksel:tasksel/first.

Hai dấu trừ "---" trong những tùy chọn khởi động thì có nghĩa đặc biệt. Các
tham số khởi động xuất hiện sau "---" cuối cùng có thể được sao chép vào cấu
hình của bộ nạp khởi động cho hệ thống đã cài đặt (nếu hỗ trợ bởi bộ cài đặt
cho bộ nạp khởi động đó). Bộ cài đặt sẽ tự động lọc ra bất cứ tùy chọn nào nó
nhận ra.

Ghi chú

Các hạt nhân Linux hiện thời (2.6.9 và sau) chấp nhận số tối đa là 32 tùy chọn
dòng lệnh và 32 biến môi trường, gồm bất cứ tùy chọn nào được thêm theo mặc
định cho bộ cài đặt. Vược quá số này thì hạt nhân không thể phục hồi (sụp đổ).
(Đối với hạt nhân sớm hơn thì số tối đa là nhỏ hơn.)

Đối với phần lớn tiến trình cài đặt, một số tùy chọn mặc định riêng nằm trong
tập tin cấu hình của bộ nạp khởi động, v.d. vga=normal, có thể được gỡ bỏ an
toàn, mà có thể cho bạn có khả năng thêm tùy chọn nữa để chèn sẵn.

Ghi chú

Có lẽ không phải luôn luôn có khả năng xác định giá trị chứa dấu cách cho tham
số khởi động, thậm chí nếu bạn định giới chúng bằng dấu trích dẫn.

B.2.3. Chế độ tự động

There are several features of Debian Installer that combine to allow fairly
simple command lines at the boot prompt to result in arbitrarily complex
customized automatic installs.

This is enabled by using the Automated install boot choice, also called auto
for some architectures or boot methods. In this section, auto is thus not a
parameter, it means selecting that boot choice, and appending the following
boot parameters on the boot prompt. See Phần 5.1.7, "Màn hình khởi động" for
information on how to add a boot parameter.

Để làm rõ ý, ở đây có một số mẫu thí dụ có thể được dùng ở dấu nhắc khởi động:

auto url=autoserver

[auto tự động url địa chỉ URL server máy phục vụ] Mẫu này nhờ máy phục vụ DHCP
hỗ trợ máy tính quyết định giá trị của autoserver bằng DNS, có thể sau khi thêm
miền cục bộ nếu DHCP đã cung cấp. Nếu mẫu này được dùng ở nơi Mạng có miền
mẫu.com có thiết lập DHCP chuẩn, kết quả là tập tin chèn sẵn được lấy từ http:/
/autoserver.mẫu.com/d-i/bullseye/./preseed.cfg.

Phần cuối cùng của địa chỉ đó (d-i/bullseye/./preseed.cfg) được lấy từ giá trị
auto-install/defaultroot. Mặc định là nó gồm thư mục bullseye để cho các phiên
bản sau có khả năng xác định tên mã riêng và cho phép mọi người nâng cấp một
cách được điều khiển. Phần /./ được dùng để ngụ ý một thư mục gốc vào đó các
đường dẫn phụ có thể được neo (để sử dụng trong preseed/include và preseed/
run). Bố trí này cho phép xác định tập tin hoặc dạng địa chỉ Mạng đầy đủ hoặc
đường dẫn bắt đầu với dấu xuyệc / thì được neo, hoặc ngay cả đường dẫn tương
đối với vị trí của tập tin đã lấy cuối cùng. Nó có thể được sử dụng để cấu tạo
các văn lệnh có khả năng di động hơn mà toàn bộ phân cấp văn lệnh có thể được
di chuyển sang vị trí khác, không ngắt nó, chẳng hạn khi sao chép các tập tin
vào thanh USB từ máy phục vụ Mạng. Trong mẫu thí dụ này, nếu tập tin chèn sẵn
đặt biến preseed/run thành giá trị /scripts/late_command.sh thì tập tin sẽ được
lấy từ http://autoserver.example.com/d-i/bullseye/./scripts/late_command.sh.

Nếu không có hạ tầng cơ sở cục bộ kiểu DHCP hay DNS, hoặc nếu bạn không muốn sử
dụng đường dẫn mặc định đến preseed.cfg, bạn vẫn còn có khả năng sử dụng một
địa chỉ Mạng dứt khoát; không sử dụng yếu tố /./ thì nó được neo vào đầu của
đường dẫn (tức là dấu xuyệc / thứ ba trong địa chỉ đó). Ở đây có một mẫu thí dụ
chỉ cần sự hỗ trợ tối thiểu của hạ tầng cơ sở cục bộ :

auto url=http://192.168.1.2/đường_dẫn/đến/tập_tin_chèn_sẵn.của_tôi

Nó hoạt động như thế:

  • địa chỉ Mạng thiếu giao thức thì http được giả sử,

  • phần tên máy không chứa dấu chấm thì miền bắt nguồn từ DHCP được phụ thêm,
    và

  • không có dấu xuyệc / nằm sau tên miền thì đường dẫn mặc định được thêm.

Thêm vào việc xác định địa chỉ Mạng, bạn cũng có khả năng xác định thiết lập
không có tắc động trực tiếp ứng xử của debian-installer chính nó, nhưng vẫn còn
có thể được gửi cho văn lệnh nào được ghi rõ bằng preseed/run trong tập tin
chèn sẵn đã nạp. Hiện thời, mẫu duy nhất của trường hợp này là auto-install/
classes, mà có biệt hiệu là classes. Dùng được như thế:

auto url=mẫu.com classes=hạng_A;hạng_B

Những hạng này có thể, chẳng hạn, ngụ ý kiểu hệ thống cần cài đặt hay bản địa
hoá cần dùng.

Tất nhiên có thể kéo dài khái niệm này, có lẽ bằng cách dùng miền tên
auto-install nên dùng mẫu như auto-install/style để dùng trong văn lệnh. Nếu
bạn muốn làm việc như thế, hãy gửi lá thư cho hộp thư chung khởi động Debian <
debian-boot@lists.debian.org>, để chúng ta tránh sự xung đột giữa các tên miền,
và có thể thêm biệt hiệu cho tham số đó để giúp đỡ bạn.

The auto boot choice is not yet defined on all arches. The same effect may be
achieved by simply adding the two parameters auto=true priority=critical to the
kernel command line. The auto kernel parameter is an alias for auto-install/
enable and setting it to true delays the locale and keyboard questions until
after there has been a chance to preseed them, while priority is an alias for
debconf/priority and setting it to critical stops any questions with a lower
priority from being asked.

Tùy chọn thêm có thể có ích khi cố gắng tự động hoá việc cài đặt chạy với dịch
vụ DHCP là: interface=auto netcfg/dhcp_timeout=60 (giao diện là tự động, thời
hạn netcf/dhcp là 60) mà làm cho máy chọn NIC thứ nhất sẵn sàng và đợi nhiều
thời gian hơn để nhận trả lời cho truy vấn DHCP của nó.

Mẹo

Có một mẫu thí dụ rất chi tiết về cách sử dụng khuôn khổ này, bao gồm các văn
lệnh mẫu, ở địa chi Web của nhà phát triển. Các mẫu ở đó cũng minh họa nhiều
hiệu ứng đẹp có thể được làm khi dùng chức năng chèn sẵn một cách sáng tạo.

B.2.4. Biệt hiệu có ích khi chèn sẵn

Những bí danh theo đây cũng có thể hữu ích khi chèn sẵn (trong chế độ tự động).
Ghi chú rằng đây chỉ là bí danh ngắn mà đại diện tên câu hỏi, và bạn lúc nào
cũng cần ghi rõ một giá trị: v.d. auto=true or interface=eth0.

priority            debconf/priority
fb                  debian-installer/framebuffer
language            debian-installer/language
country             debian-installer/country
locale              debian-installer/locale
theme               debian-installer/theme
auto                auto-install/enable
classes             auto-install/classes
tập tin             preseed/file
url                 preseed/url
domain              netcfg/get_domain
hostname            netcfg/get_hostname
interface           netcfg/choose_interface
protocol            mirror/protocol
suite               mirror/suite
modules             anna/choose_modules
recommends          base-installer/install-recommends
tasks               tasksel:tasksel/first
môi trường làm việc tasksel:tasksel/desktop
dmraid              disk-detect/dmraid/enable
keymap              keyboard-configuration/xkb-keymap
preseed-md5         preseed/file/checksum

B.2.5. Examples of boot prompt preseeding

Here are some examples of how the boot prompt might look like (you will need to
adapt this to your needs; also see Phần 5.1.7, "Màn hình khởi động").

# To set French as language and France as country:
/install.amd/vmlinuz vga=788 initrd=/install.amd/gtk/initrd.gz language=fr country=FR --- quiet
# To set English as language and Germany as country, and use a German keyboard layout:
/install.amd/vmlinuz vga=788 initrd=/install.amd/gtk/initrd.gz language=en country=DE locale=en_US.UTF-8 keymap=de --- quiet
# To install the MATE desktop:
/install.amd/vmlinuz vga=788 initrd=/install.amd/gtk/initrd.gz desktop=mate-desktop --- quiet
# To install the web-server task:
/install.amd/vmlinuz initrd=/install.amd/initrd.gz tasksel:tasksel/first=web-server ---

B.2.6. Dùng máy phục vụ DHCP để xác định tập tin định cấu hình sẵn

Cũng có thể sử dụng dịch vụ DHCP để xác định tập tin cấu hình sẵn cần tải xuống
mạng. Giao thức DHCP cho phép xác định tên tập tin. Bình thường, nó là một tập
tin cần khởi động qua mạng, nhưng nếu nó có vẻ là một địa chỉ URL thì vật chứa
cài đặt cũng hỗ trợ chèn sẵn qua mạng sẽ tải tập tin đó xuống địa chỉ URL được
cung cấp và dùng nó làm một tập tin cấu hình sẵn. Đây là một mẫu thiết lập nó
trong tập tin cấu hình « dhcpd.conf » cho phiên bản 3 của trình phục vụ DHCP
ISC (gói Debian « isc-dhcp-server »).

if substring (option vendor-class-identifier, 0, 3) = "d-i" {
    filename "http://máy/preseed.cfg";
}

Ghi chú rằng mẫu bên trên giới hạn tên tập tin này thành ứng dụng khách DHCP tự
nhận diện là "d-i", vì vậy nó sẽ không có tác động ứng dụng khách DHCP chuẩn,
chỉ trình cài đặt. Bạn cũng có khả năng định dạng đoạn đó là đoạn dòng cho chỉ
một máy riêng, để tránh chèn sẵn mọi việc cài đặt trên mạng đó.

Một phương pháp tốt để dùng chức năng chèn sẵn DHCP là chèn sẵn chỉ những giá
trị đặc trưng cho mạng đó, v.d. máy nhân bản Debian cần dùng. Bằng cách này,
việc cài đặt trên mạng đó sẽ tự động chọn một máy nhân bản hữu ích, còn phần
còn lại của tiến trình cài đặt có thể được thực hiện tương tác. Bạn nên rất cẩn
thận khi dùng chức năng chèn sẵn DHCP để tự động hoá hoàn toàn tiến trình cài
đặt Debian.

B.3. Tạo tập tin định cấu hình sẵn

Tập tin cấu hình sẵn có dạng thức được dùng bởi lệnh debconf-set-selections.
Dạng thức chung của dòng nào nằm trong tập tin cấu hình sẵn là:

<sở hữu> <tên câu hỏi> <kiểu câu hỏi> <giá trị>

The file should start with #_preseed_V1

Ghi nhớ vài quy tắc khi tạo tập tin cấu hình sẵn.

  • Chèn chỉ một dấu cách riêng lẻ giữa « kiểu » và « giá trị »: dấu cách thêm
    nào sẽ được xử lý là phần của giá trị đó.

  • Mỗi dòng có thể được chia ra nhiều dòng bằng cách phụ thêm xuyệc ngược ("\"
    ) là ký tự tiếp tục dòng. Nơi thích hợp để chia dòng ra là nơi nằm sau «
    tên câu hỏi »; còn nơi không thích hợp là nơi giữa « kiểu câu hỏi » và «
    giá trị ». Các dòng bị chia tách sẽ được nối lại thành một dòng riêng lẻ có
    tất cả các khoảng trắng theo sau được co lại thành một dấu cách riêng lẻ.

  • Đối với biến cấu hình debconf (mẫu) nào chỉ được dùng trong trình cài đặt
    chính nó, nên đặt chủ sở hữu thành "d-i"; để chèn sẵn các biến được dùng
    trong hệ thống được cài đặt, nên dùng tên của gói chứa mẫu debconf tương
    ứng. Chỉ những biến có chủ sở hữu khác với "d-i" sẽ được chép đến cơ sở dữ
    liệu debconf cho hệ thống được cài đặt.

  • Phần lớn câu hỏi cần phải được chèn sẵn bằng giá trị tiếng Anh, không phải
    giá trị đã dịch. Tuy nhiên, có một số câu hỏi riêng (v.d. trong partman)
    trong đó cần phải dùng giá trị đã dịch.

  • Một số câu hỏi riêng chấp nhận mã là giá trị, thay cho đoạn tiếng Anh được
    hiển thị trong khi cài đặt.

  • Start with #_preseed_V1

  • A comment consists of a line which starts with a hash character ("#") and
    extends up to the length of that line.

Phương pháp dễ nhất để tạo tập tin cấu hình sẵn là dùng tập tin mẫu được liên
kết trong Phần B.4, "Nội dung của tập tin định cấu hình sẵn (cho bullseye)" như
là cơ bản, rồi thêm từ từ vào nó.

Một phương pháp xen kẽ là tự chạy tiến trình cài đặt, rồi, sau khi khởi động
lại, dùng chức năng debconf-get-selections của gói các tiện ích debconf-utils
để đổ cả cơ sở dữ liệu debconf lẫn cơ sở dữ liệu cdebconf của trình cài đặt đều
vào cùng một tập tin:

$ echo "#_preseed_V1" > file
$ debconf-get-selections --installer >> file
$ debconf-get-selections >> file

Tuy nhiên, tập tin được tạo ra bằng cách này sẽ chứa một số mục riêng không nên
được chèn sẵn; tập tin mẫu cũng là nơi bắt đầu thích hợp hơn với trường hợp của
phần lớn người dùng.

Ghi chú

Phương pháp này nhờ trường hợp rằng, tại kết thúc của tiến trình cài đặt, cơ sở
dữ liệu cdebconf của trình cài đặt được lưu vào hệ thống mới cài đặt trong thư
mục /var/log/installer/cdebconf. Tuy nhiên, vì cơ sở dữ liệu đó có thể chứa
thông tin nhạy cảm, theo mặc định các tập tin đó chỉ cho phép người chủ đọc
thôi.

Thư mục /var/log/installer, cũng là mọi tập tin nằm trong nó sẽ bị xoá bỏ ra hệ
thống của bạn nếu bạn tẩy gói thông báo cài đặt installation-report.

Để kiểm tra giá trị có thể cho câu hỏi, bạn có khả năng sử dụng trình hiệu
chỉnh văn bản nano để xem lại các tập tin nằm trong thư mục /var/lib/cdebconf
trong khi cài đặt. Xem tập tin templates.dat để tìm biểu mẫu thô, còn tập tin
questions.dat để tìm những giá trị hiện thời và các giá trị được gán cho biến.

Trước khi cài đặt, để kiểm tra nếu tập tin cấu hình sẵn có dạng thức hợp lệ
chưa, bạn có thể chạy lệnh debconf-set-selections -c preseed.cfg.

B.4. Nội dung của tập tin định cấu hình sẵn (cho bullseye)

Những đoạn cấu hình được dùng trong phụ lục này cũng sẵn sàng dạng tập tin định
cấu hình sẵn ví dụ tại ../example-preseed.txt.

Ghi chú rằng mẫu này dựa vào tiến trình cài đặt vào kiến trúc kiểu x86 Intel.
Nếu bạn đang cài đặt vào kiến trúc khác, một số phần mẫu (v.d. phần chọn bố trí
bàn phím và phần cài đặt bộ nạp khởi động) có lẽ không phải là thích hợp, cũng
sẽ cần phải được thay thế bằng thiết lập debconf thích hợp với kiến trúc đó.

Có thể tìm thêm chi tiết về cách làm việc thực sự của các thành phần khác nhau
của Trình Cài đặt Debian tại Phần 6.3, "Sử dụng mỗi thành phần".

B.4.1. Địa phương hoá

During a normal install the questions about localization are asked first, so
these values can only be preseeded via the initrd or kernel boot parameter
methods. Auto mode (Phần B.2.3, "Chế độ tự động") includes the setting of
auto-install/enable=true (normally via the auto preseed alias). This delays the
asking of the localisation questions, so that they can be preseeded by any
method.

Miền địa phương (locale) có thể được dùng để xác định cả hai ngôn ngữ và quốc
gia, và có thể là bất cứ tổ hợp nào một ngôn ngữ được debian-installer hỗ trợ
và một quốc gia nhận ra. Nếu tổ hợp này không làm một miền địa phương hợp lệ
thì trình cài đặt tự động chọn một miền địa phương vẫn hợp lệ cho ngôn ngữ đã
chọn. Để chỉ định miền địa phương dưới dạng một tham số khởi động, hãy dùng
locale=vi.

Mặc dù phương pháp này rất dễ sử dụng, nó không cho phép chèn sẵn tất cả các tổ
hợp các ngôn ngữ, quốc gia và miền địa phương^[22]. Cũng có thể ghi rõ từng giá
trị. Hoặc có thể ghi rõ ngôn ngữ và quốc gia dưới dạng tham số khởi động.

# Chỉ chèn sẵn miền địa phương, ngôn ngữ và quốc gia.
d-i debian-installer/locale string vi

# Cũng có thể chèn sẵn từng giá trị riêng, để uyển chuyển hơn.
#d-i debian-installer/language string vi
#d-i debian-installer/country string AU
#d-i debian-installer/locale string vi.UTF-8
# Tuỳ chọn có thể ghi rõ thêm miền địa phương.
#d-i localechooser/supported-locales multiselect vi.UTF-8, en_US.UTF-8

Keyboard configuration consists of selecting a keymap and (for non-latin
keymaps) a toggle key to switch between the non-latin keymap and the US keymap.
Only basic keymap variants are available during installation. Advanced variants
are available only in the installed system, through dpkg-reconfigure
keyboard-configuration.

# Chọn bàn phím.
d-i keyboard-configuration/xkb-keymap select vn
# d-i keyboard-configuration/toggle select No toggling

Để bỏ qua bước cấu hình bàn phím, hãy chèn sẵn keymap bằng skip-config (bỏ qua
cấu hình). Kết quả là bố trí bàn phím của hạt nhân còn lại hoạt động.

B.4.2. Cấu hình mạng

Of course, preseeding the network configuration won't work if you're loading
your preconfiguration file from the network. But it's great when you're booting
from optical disc or USB stick. If you are loading preconfiguration files from
the network, you can pass network config parameters by using kernel boot
parameters.

Nếu bạn cần phải chọn một giao diện riêng khi khởi động qua mạng, trước khi tải
tập tin cấu hình sẵn qua mạng, hãy nhập tham số khởi động như interface=eth1.

Mặc dù thường không thể chèn sẵn cấu hình mạng khi dùng khả năng chèn trước qua
mạng (dùng địa chỉ Mạng "preseed/url"), bạn vẫn còn có khả năng sử dụng dãy câu
lệnh theo đây để chỉnh sửa sự hạn chế này, chẳng hạn nếu bạn muốn đặt một địa
chỉ tĩnh cho giao diện mạng. Dãy câu lệnh này ép buộc cấu hình mạng chạy lại
sau khi nạp tập tin chèn sẵn, bằng cách tạo văn lệnh "preseed/run" chứa những
câu lệnh này:

kill-all-dhcp; netcfg

Theo đây có những biến debconf thích hợp với cấu hình mạng.

# Disable network configuration entirely. This is useful for cdrom
# installations on non-networked devices where the network questions,
# warning and long timeouts are a nuisance.
#d-i netcfg/enable boolean false

# netcfg will choose an interface that has link if possible. This makes it
# skip displaying a list if there is more than one interface.
d-i netcfg/choose_interface select auto

# To pick a particular interface instead:
#d-i netcfg/choose_interface select eth1

# To set a different link detection timeout (default is 3 seconds).
# Values are interpreted as seconds.
#d-i netcfg/link_wait_timeout string 10

# If you have a slow dhcp server and the installer times out waiting for
# it, this might be useful.
#d-i netcfg/dhcp_timeout string 60
#d-i netcfg/dhcpv6_timeout string 60

# Automatic network configuration is the default.
# If you prefer to configure the network manually, uncomment this line and
# the static network configuration below.
#d-i netcfg/disable_autoconfig boolean true

# If you want the preconfiguration file to work on systems both with and
# without a dhcp server, uncomment these lines and the static network
# configuration below.
#d-i netcfg/dhcp_failed note
#d-i netcfg/dhcp_options select Configure network manually

# Static network configuration.
#
# IPv4 example
#d-i netcfg/get_ipaddress string 192.168.1.42
#d-i netcfg/get_netmask string 255.255.255.0
#d-i netcfg/get_gateway string 192.168.1.1
#d-i netcfg/get_nameservers string 192.168.1.1
#d-i netcfg/confirm_static boolean true
#
# IPv6 example
#d-i netcfg/get_ipaddress string fc00::2
#d-i netcfg/get_netmask string ffff:ffff:ffff:ffff::
#d-i netcfg/get_gateway string fc00::1
#d-i netcfg/get_nameservers string fc00::1
#d-i netcfg/confirm_static boolean true

# Any hostname and domain names assigned from dhcp take precedence over
# values set here. However, setting the values still prevents the questions
# from being shown, even if values come from dhcp.
d-i netcfg/get_hostname string unassigned-hostname
d-i netcfg/get_domain string unassigned-domain

# If you want to force a hostname, regardless of what either the DHCP
# server returns or what the reverse DNS entry for the IP is, uncomment
# and adjust the following line.
#d-i netcfg/hostname string somehost

# Disable that annoying WEP key dialog.
d-i netcfg/wireless_wep string
# The wacky dhcp hostname that some ISPs use as a password of sorts.
#d-i netcfg/dhcp_hostname string radish

# If non-free firmware is needed for the network or other hardware, you can
# configure the installer to always try to load it, without prompting. Or
# change to false to disable asking.
#d-i hw-detect/load_firmware boolean true

Ghi chú rằng netcfg sẽ tự động quyết định mặt nạ mạng nếu netcfg/get_netmask
không phải được chèn sẵn. Trong trường hợp này, biến phải được đánh dấu là seen
(được thấy) cho quá trình tự động cài đặt. Tương tự, netcfg sẽ chọn một địa chỉ
thích hợp nếu không đặt netcfg/get_gateway. Như một trường hợp đặc biệt, bạn
cũng có thể đặt netcfg/get_gateway thành "none" (không có) để chỉ định không
nên dùng cổng ra nào.

B.4.3. Bàn giao tiếp mạng

# Dùng thiết lập theo đây nếu bạn muốn sử dụng thành phần
# bàn giao tiếp mạng (network-console) để cài đặt từ xa
# thông qua SSH (trình bao bảo mật). Trường hợp này chỉ hữu ích
# nếu bạn định tự thực hiện phần còn lại của quá trình cài đặt.
#d-i anna/choose_modules string network-console
#d-i network-console/authorized_keys_url string http://10.0.0.1/openssh-key
#d-i network-console/password password r00tme
#d-i network-console/password-again password r00tme

More information related to network-console can be found in Phần 6.3.10,
"Installation over network-console".

B.4.4. Thiết lập máy nhân bản

Phụ thuộc vào phương pháp cài đặt bạn dùng, máy nhân bản có thể được dùng để
tải về thành phần cài đặt thêm, để cài đặt hệ thống cơ bản, và để thiết lập
danh sách các nguồn /etc/apt/sources.list cho hệ thống đã cài đặt.

Tham số mirror/suite xác định bộ phần mềm đối với hệ thống đã cài đặt.

Tham số mirror/udeb/suite quyết định bộ phần mềm đối với thành phần nào thêm
vào trình cài đặt. Nó có ích chỉ nếu thành phần nào tựchật sự được tải về qua
mạng, cũng nên tương ứng với bộ phần mềm được dùng để xây dựng initrd cho
phương pháp cài đặt được dùng. Bình thường, trình cài đặt tự động sử dụng giá
trị đúng thì không nên lập tham số này.

# Mirror protocol:
# If you select ftp, the mirror/country string does not need to be set.
# Default value for the mirror protocol: http.
#d-i mirror/protocol string ftp
d-i mirror/country string manual
d-i mirror/http/hostname string http.us.debian.org
d-i mirror/http/directory string /debian
d-i mirror/http/proxy string

# Suite to install.
#d-i mirror/suite string testing
# Suite to use for loading installer components (optional).
#d-i mirror/udeb/suite string testing

B.4.5. Thiết lập tài khoản

The password for the root account and name and password for a first regular
user's account can be preseeded. For the passwords you can use either clear
text values or crypt(3) hashes.

Cảnh báo

Be aware that preseeding passwords is not completely secure as everyone with
access to the preconfiguration file will have the knowledge of these passwords.
Storing hashed passwords is considered secure unless a weak hashing algorithm
like DES or MD5 is used which allow for bruteforce attacks. Recommended
password hashing algorithms are SHA-256 and SHA512.

# Skip creation of a root account (normal user account will be able to
# use sudo).
#d-i passwd/root-login boolean false
# Alternatively, to skip creation of a normal user account.
#d-i passwd/make-user boolean false

# Root password, either in clear text
#d-i passwd/root-password password r00tme
#d-i passwd/root-password-again password r00tme
# or encrypted using a crypt(3)  hash.
#d-i passwd/root-password-crypted password [crypt(3) hash]

# To create a normal user account.
#d-i passwd/user-fullname string Debian User
#d-i passwd/username string debian
# Normal user's password, either in clear text
#d-i passwd/user-password password insecure
#d-i passwd/user-password-again password insecure
# or encrypted using a crypt(3) hash.
#d-i passwd/user-password-crypted password [crypt(3) hash]
# Create the first user with the specified UID instead of the default.
#d-i passwd/user-uid string 1010

# The user account will be added to some standard initial groups. To
# override that, use this.
#d-i passwd/user-default-groups string audio cdrom video

Biến passwd/root-password-crypted và passwd/user-password-crypted cũng có thể
được chèn trước bằng "!" là giá trị. Trong trường hợp đó, tài khoản tương ứng
bị tắt. Trường hợp này có thể là tiện với tài khoản người chủ, miễn là phương
pháp xen kẽ được thiết lập để cho phép hoạt động quản lý hay đăng nhập người
chủ (thí dụ bằng cách dùng khả năng xác thức khoá SSH hay sudo).

The following command (available from the whois package) can be used to
generate a SHA-512 based crypt(3) hash for a password:

mkpasswd -m sha-512

B.4.6. Thiết lập đồng hồ và múi giờ

# Điều khiển nếu đồng hồ phần cứng được đặt thành UTC không.
d-i clock-setup/utc boolean true

# Bạn có thể đặt điều này thành bất cứ giá trị nào hợp lệ cho $TZ (múi giờ),
# xem nội dung của « /usr/share/zoneinfo/ » để tìm giá trị hợp lệ.
d-i time/zone string Asia/Saigon

# Điều khiển có nên dùng giao thức thời gian NTP
# để đặt đồng hồ trong khi cài đặt hay không.
d-i clock-setup/ntp boolean true
# Máy phục vụ NTP cần dùng. Giá trị mặc định gần lúc nào cũng đúng.
#d-i clock-setup/ntp-server string ntp.example.com

B.4.7. Phân vùng

Sử dụng chức năng chèn sẵn để phân vùng đĩa cứng vẫn bị hạn chế thành khả năng
được hỗ trợ bởi partman-auto. Bạn có thể chọn phân vùng hoặc sức chứa trống
trên đĩa, hoặc một đĩa hoàn toàn. Bố trí của đĩa có thể được quyết định bằng
cách sử dụng một công thức xác định sẵn, một công thức riêng từ một tập tin
công thức, hay một công thức nằm trong tập tin cấu hình sẵn.

Khả năng chèn sẵn thiết lập phân vùng cấp cao dùng RAID, LVM và mật mã cũng
được hỗ trợ, còn không phải với tính linh hoạt đầy đủ có thể làm khi phân vùng
trong một tiến trình cài đặt không chèn sẵn.

Những ví dụ dưới đây chỉ cung cấp thông tin cơ bản về cách sử dụng công thức.
Để tìm thông tin chi tiết, xem hai tập tin partman-auto-recipe.txt và
partman-auto-raid-recipe.txt trong gói debian-installer. Cả hai tập tin này
cũng có sẵn từ the kho nguồn debian-installer. Ghi chú rằng chức năng được hỗ
trợ vẫn có thể thay đổi giữa hai lần phát hành.

Cảnh báo

Việc nhận diện đĩa phụ thuộc vào thứ tự tải trình điều khiển chúng. Nếu có
nhiều đĩa trong hệ thống, hãy chắc là đĩa đúng sẽ được chọn, trước khi dùng khả
năng chèn sẵn.

B.4.7.1. Mẫu phân vùng

# If the system has free space you can choose to only partition that space.
# This is only honoured if partman-auto/method (below) is not set.
#d-i partman-auto/init_automatically_partition select biggest_free

# Alternatively, you may specify a disk to partition. If the system has only
# one disk the installer will default to using that, but otherwise the device
# name must be given in traditional, non-devfs format (so e.g. /dev/sda
# and not e.g. /dev/discs/disc0/disc).
# For example, to use the first SCSI/SATA hard disk:
#d-i partman-auto/disk string /dev/sda
# In addition, you'll need to specify the method to use.
# The presently available methods are:
# - regular: use the usual partition types for your architecture
# - lvm:     use LVM to partition the disk
# - crypto:  use LVM within an encrypted partition
d-i partman-auto/method string lvm

# You can define the amount of space that will be used for the LVM volume
# group. It can either be a size with its unit (eg. 20 GB), a percentage of
# free space or the 'max' keyword.
d-i partman-auto-lvm/guided_size string max

# If one of the disks that are going to be automatically partitioned
# contains an old LVM configuration, the user will normally receive a
# warning. This can be preseeded away...
d-i partman-lvm/device_remove_lvm boolean true
# The same applies to pre-existing software RAID array:
d-i partman-md/device_remove_md boolean true
# And the same goes for the confirmation to write the lvm partitions.
d-i partman-lvm/confirm boolean true
d-i partman-lvm/confirm_nooverwrite boolean true

# You can choose one of the three predefined partitioning recipes:
# - atomic: all files in one partition
# - home:   separate /home partition
# - multi:  separate /home, /var, and /tmp partitions
d-i partman-auto/choose_recipe select atomic

# Or provide a recipe of your own...
# If you have a way to get a recipe file into the d-i environment, you can
# just point at it.
#d-i partman-auto/expert_recipe_file string /hd-media/recipe

# If not, you can put an entire recipe into the preconfiguration file in one
# (logical) line. This example creates a small /boot partition, suitable
# swap, and uses the rest of the space for the root partition:
#d-i partman-auto/expert_recipe string                         \
#      boot-root ::                                            \
#              40 50 100 ext3                                  \
#                      $primary{ } $bootable{ }                \
#                      method{ format } format{ }              \
#                      use_filesystem{ } filesystem{ ext3 }    \
#                      mountpoint{ /boot }                     \
#              .                                               \
#              500 10000 1000000000 ext3                       \
#                      method{ format } format{ }              \
#                      use_filesystem{ } filesystem{ ext3 }    \
#                      mountpoint{ / }                         \
#              .                                               \
#              64 512 300% linux-swap                          \
#                      method{ swap } format{ }                \
#              .

# The full recipe format is documented in the file partman-auto-recipe.txt
# included in the 'debian-installer' package or available from D-I source
# repository. This also documents how to specify settings such as file
# system labels, volume group names and which physical devices to include
# in a volume group.

## Partitioning for EFI
# If your system needs an EFI partition you could add something like
# this to the recipe above, as the first element in the recipe:
#               538 538 1075 free                              \
#                      $iflabel{ gpt }                         \
#                      $reusemethod{ }                         \
#                      method{ efi }                           \
#                      format{ }                               \
#               .                                              \
#
# The fragment above is for the amd64 architecture; the details may be
# different on other architectures. The 'partman-auto' package in the
# D-I source repository may have an example you can follow.

# This makes partman automatically partition without confirmation, provided
# that you told it what to do using one of the methods above.
d-i partman-partitioning/confirm_write_new_label boolean true
d-i partman/choose_partition select finish
d-i partman/confirm boolean true
d-i partman/confirm_nooverwrite boolean true

# Force UEFI booting ('BIOS compatibility' will be lost). Default: false.
#d-i partman-efi/non_efi_system boolean true
# Ensure the partition table is GPT - this is required for EFI
#d-i partman-partitioning/choose_label select gpt
#d-i partman-partitioning/default_label string gpt

# When disk encryption is enabled, skip wiping the partitions beforehand.
#d-i partman-auto-crypto/erase_disks boolean false

B.4.7.2. Phân vùng bằng RAID

Bạn cũng có thể sử dụng chức năng chèn sẵn để thiết lập phân vùng trên mảng
RAID kiểu phần mềm. Có hỗ trợ RAID lớp 0, 1, 5, 6 và 10, thì tạo mảng bị suy
biến và xác định thiết bị bổ sung.

Sử dụng RAID 1 thì bạn có khả năng chèn sẵn bộ nạp khởi động grub để cài đặt
vào mọi thiết bị được dùng trong mảng đó ; xem Phần B.4.11, "Cài đặt bộ nạp
khởi động".

Cảnh báo

Loại chức năng tự động phân vùng này vẫn dễ làm sai. Nó cũng là chức năng hơi
ít thử bởi nhà phát triển debian-installer. trách nhiệm về việc thử và kết hợp
các công thức khác nhau (để hữu ích và không xung đột với nhau) được người dùng
chịu. Xem /var/log/syslog nếu bạn gặp vấn đề.

# Phương pháp nên được đặt thành « raid ».
#d-i partman-auto/method string raid
# Chỉ định những đĩa cần phân vùng.
# Mọi đĩa đều sẽ có cùng một bố trí, do đó phương pháp này
# chỉ có kết quả nếu mọi đĩa đều có cùng một kích cỡ.
#d-i partman-auto/disk string /dev/sda /dev/sdb

# Sau đó thì bạn cần phải chỉ định những phân vùng vật lý cần dùng.
#d-i partman-auto/expert_recipe string \
#      multiraid ::                                         \
#              1000 5000 4000 raid                          \
#                      $primary{ } method{ raid }           \
#              .                                            \
#              64 512 300% raid                             \
#                      method{ raid }                       \
#              .                                            \
#              500 10000 1000000000 raid                    \
#                      method{ raid }                       \
#              .

# Cuối cùng bạn cần phải chỉ định những phân vùng đã xác định trước
# sẽ được dùng trong thiết lập RAID như thế nào.
# Nhớ để sử dụng những số thứ tự phân vùng đúng cho phân vùng hợp lý.
# Hỗ trợ các lớp RAID 0, 1, 5, 6 và 10; các thiết bị định giới bằng dấu băm "#".
# Các tham số :
# <raidtype> <devcount> <sparecount> <fstype> <mountpoint> \
#          <devices> <sparedevices>

#d-i partman-auto-raid/recipe string \
#    1 2 0 ext3 /                    \
#          /dev/sda1#/dev/sdb1       \
#    .                               \
#    1 2 0 swap -                    \
#          /dev/sda5#/dev/sdb5       \
#    .                               \
#    0 2 0 ext3 /home                \
#          /dev/sda6#/dev/sdb6       \
#    .

# Để tìm thêm thông tin, xem tập tin « partman-auto-raid-recipe.txt »
# được bao gồm trong gói « debian-installer » hoặc sẵn sàng từ
# kho lưu mã nguồn trình cài đặt Debian (D-I).

# Đoạn này làm cho partman tự động phân vùng mà không yêu cầu xác nhận.
d-i partman-md/confirm boolean true
d-i partman-partitioning/confirm_write_new_label boolean true
d-i partman/choose_partition select finish
d-i partman/confirm boolean true
d-i partman/confirm_nooverwrite boolean true

B.4.7.3. Điều khiển cách gắn kết phân vùng

Bình thường, hệ thống tập tin được gắn kết dùng một mã nhận diện duy nhất
(UUID) làm khoá; nó cho phép gắn kết hệ thống tập tin một cách đúng ngay cả khi
tên thiết bị thay đổi. Mã UUID vẫn dài và khó đọc thì theo ý kiến của bạn,
trình cài đặt cũng có thể gắn kết hệ thống tập tin dựa vào tên thiết bị truyền
thống, hoặc dựa vào một nhãn được bạn gán. Nếu bạn yêu cầu trình cài đặt gắn
kết theo nhãn thì hệ thống tập tin nào không có nhãn sẽ được gắn kết dùng một
mã UUID.

Thiết bị nào có tên ổn định, v.d. khối tin hợp lý LVM, thì cứ sử dụng tên
truyền thống thay cho mã UUID.

Cảnh báo

Tên thiết bị truyền thống cũng có thể thay đổi phụ thuộc vào thứ tự theo đó hạt
nhân phát hiện các thiết bị trong khi khởi động. Trường hợp này có thể gây ra
gấn kết hệ thống tập tin không đúng. Cũng như vậy, các nhãn có thể xung đột với
nhau nếu bạn cằm vào một đĩa mới hay ổ đĩa USB: có xảy ra thì hệ thống sẽ khởi
chạy một cách ngẫu nhiên.

# Mặc định là gắn kết theo mã UUID, nhưng mà bạn cũng có thể chọn mục
# "traditional" để sử dụng tên thiết bị truyền thống, hoặc "label"
# để thử sử dụng nhãn hệ thống tập tin trước khi phục hồi mã UUID.
#d-i partman/mount_style select uuid

B.4.8. Cài đặt hệ thống cơ bản

Thật sự không thể chèn sẵn nhiều vào giai đoạn cài đặt này. Chỉ hỏi câu về cách
cài đặt hạt nhân.

# Cấu hình APT để không cài đặt các gói khuyến khích theo mặc định.
# Sử dụng tuỳ chọn này cũng có thể gây ra một hệ thống không hoàn chỉnh
# và chỉ người dùng có rất nhiều kinh nghiệm mới nên sử dụng nó.
#d-i base-installer/install-recommends boolean false

# (Siêu) gói ảnh hạt nhân cần cài đặt; có thể dùng « none »
# nếu không cài đặt hạt nhân.
#d-i base-installer/kernel/image string linux-image-686

B.4.9. Thiết lập apt

Tiến trình thiết lập danh sách các nguồn của apt /etc/apt/sources.list và các
tùy chọn cấu hình cơ bản được tự động hoá hoàn toàn, dựa vào phương pháp cài
đặt và trả lời câu hỏi trước. Tùy chọn bạn có khả năng thêm kho phần mềm (cục
bộ) khác.

# Choose, if you want to scan additional installation media
# (default: false).
d-i apt-setup/cdrom/set-first boolean false
# You can choose to install non-free and contrib software.
#d-i apt-setup/non-free boolean true
#d-i apt-setup/contrib boolean true
# Uncomment the following line, if you don't want to have the sources.list
# entry for a DVD/BD installation image active in the installed system
# (entries for netinst or CD images will be disabled anyway, regardless of
# this setting).
#d-i apt-setup/disable-cdrom-entries boolean true
# Uncomment this if you don't want to use a network mirror.
#d-i apt-setup/use_mirror boolean false
# Select which update services to use; define the mirrors to be used.
# Values shown below are the normal defaults.
#d-i apt-setup/services-select multiselect security, updates
#d-i apt-setup/security_host string security.debian.org

# Additional repositories, local[0-9] available
#d-i apt-setup/local0/repository string \
#       http://local.server/debian stable main
#d-i apt-setup/local0/comment string local server
# Enable deb-src lines
#d-i apt-setup/local0/source boolean true
# URL to the public key of the local repository; you must provide a key or
# apt will complain about the unauthenticated repository and so the
# sources.list line will be left commented out.
#d-i apt-setup/local0/key string http://local.server/key
# If the provided key file ends in ".asc" the key file needs to be an
# ASCII-armoured PGP key, if it ends in ".gpg" it needs to use the
# "GPG key public keyring" format, the "keybox database" format is
# currently not supported.

# By default the installer requires that repositories be authenticated
# using a known gpg key. This setting can be used to disable that
# authentication. Warning: Insecure, not recommended.
#d-i debian-installer/allow_unauthenticated boolean true

# Uncomment this to add multiarch configuration for i386
#d-i apt-setup/multiarch string i386


B.4.10. Chọn gói phần mềm

Bạn có khả năng chọn cài đặt bất cứ sự phối hợp công việc nào sẵn sàng. Vào lúc
viết câu này, các công việc sẵn sàng gồm:

  • standard (standard tools)

  • desktop (graphical desktop)

  • gnome-desktop (Gnome desktop)

  • xfce-desktop (XFCE desktop)

  • kde-desktop (KDE Plasma desktop)

  • cinnamon-desktop (Cinnamon desktop)

  • mate-desktop (MATE desktop)

  • lxde-desktop (LXDE desktop)

  • web-server (web server)

  • ssh-server (SSH server)

Bạn cũng có khả năng chọn không cài đặt công việc nào, ép buộc cài đặt một bộ
gói bằng cách khác. Khuyên bạn luôn luôn gồm ít nhất công việc chuẩn.

Or if you don't want the tasksel dialog to be shown at all, preseed pkgsel/
run_tasksel (no packages are installed via tasksel in that case).

Nếu bạn muốn cài đặt một số gói riêng, thêm vào những gói được cài đặt trong
các công việc, bạn có khả năng sử dụng tham số pkgsel/include. Giá trị của tham
số này có thể là danh sách các gói được định giới bằng hoặc dấu phẩy hoặc dấu
cách, cũng dễ dàng dùng trên dòng lệnh.

#tasksel tasksel/first multiselect standard, web-server, kde-desktop

# Or choose to not get the tasksel dialog displayed at all (and don't install
# any packages):
#d-i pkgsel/run_tasksel boolean false

# Individual additional packages to install
#d-i pkgsel/include string openssh-server build-essential
# Whether to upgrade packages after debootstrap.
# Allowed values: none, safe-upgrade, full-upgrade
#d-i pkgsel/upgrade select none

# You can choose, if your system will report back on what software you have
# installed, and what software you use. The default is not to report back,
# but sending reports helps the project determine what software is most
# popular and should be included on the first CD/DVD.
#popularity-contest popularity-contest/participate boolean false

B.4.11. Cài đặt bộ nạp khởi động

# Grub is the boot loader (for x86).

# This is fairly safe to set, it makes grub install automatically to the UEFI
# partition/boot record if no other operating system is detected on the machine.
d-i grub-installer/only_debian boolean true

# This one makes grub-installer install to the UEFI partition/boot record, if
# it also finds some other OS, which is less safe as it might not be able to
# boot that other OS.
d-i grub-installer/with_other_os boolean true

# Due notably to potential USB sticks, the location of the primary drive can
# not be determined safely in general, so this needs to be specified:
#d-i grub-installer/bootdev  string /dev/sda
# To install to the primary device (assuming it is not a USB stick):
#d-i grub-installer/bootdev  string default

# Alternatively, if you want to install to a location other than the UEFI
# parition/boot record, uncomment and edit these lines:
#d-i grub-installer/only_debian boolean false
#d-i grub-installer/with_other_os boolean false
#d-i grub-installer/bootdev  string (hd0,1)
# To install grub to multiple disks:
#d-i grub-installer/bootdev  string (hd0,1) (hd1,1) (hd2,1)

# Optional password for grub, either in clear text
#d-i grub-installer/password password r00tme
#d-i grub-installer/password-again password r00tme
# or encrypted using an MD5 hash, see grub-md5-crypt(8).
#d-i grub-installer/password-crypted password [MD5 hash]

# Use the following option to add additional boot parameters for the
# installed system (if supported by the bootloader installer).
# Note: options passed to the installer will be added automatically.
#d-i debian-installer/add-kernel-opts string nousb

Một mẫu duy nhất MD5 cho grub có thể được tạo dùng grub-md5-crypt, hoặc dùng
câu lệnh từ mẫu thí dụ trong Phần B.4.5, "Thiết lập tài khoản".

B.4.12. Làm xong tiến trình cài đặt

# Trong khi cài đặt từ bàn giao tiếp nối tiếp,
# những bàn giao tiếp ảo bình thường (VT1 đến VT6)
# thông thường bị tắt trong « /etc/inittab ».
# Hãy hủy ghi chú dòng kế tiếp để ngăn cản trường hợp này.
#d-i finish-install/keep-consoles boolean true

# Tránh thông điệp cuối cùng về tiến trình cài đặt hoàn tất.
d-i finish-install/reboot_in_progress note

# Dòng này sẽ ngăn cản trình cài đặt đẩy ra đĩa CD
# trong khi khởi động lại, mà có ích trong
# một số trường hợp riêng.
#d-i cdrom-detect/eject boolean false

# Đây là cách làm cho trình cài đặt tắt khi hoàn tất,
# nhưng không khởi động lại vào hệ thống đã cài đặt.
#d-i debian-installer/exit/halt boolean true
# Cái này sẽ tắt máy thay vào chỉ dừng chạy nó.
#d-i debian-installer/exit/poweroff boolean true

B.4.13. Chèn trước gói khác

# Phụ thuộc vào phần mềm nào bạn chọn cài đặt, hoặc nếu tiến trình
# cài đặt bị lỗi, câu thêm có thể được hỏi. Bạn cũng có khả năng
# chèn sẵn chúng. Để xem danh sách mọi câu có thể được hỏi
# trong tiến trình cài đặt, hãy cài đặt xong, rồi chạy hai lệnh này:
#   debconf-get-selections --installer > file
#   debconf-get-selections >> file

B.5. Tùy chọn cấp cao

B.5.1. Chạy lệnh riêng trong khi cài đặt

Những công cụ chèn sẵn cũng cung cấp một tùy chọn rất mạnh và dẻo : khả năng
chạy lệnh hay văn lệnh tại một số điểm thời riêng trong tiến trình cài đặt.

When the filesystem of the target system is mounted, it is available in /
target. If an installation CD is used, when it is mounted it is available in /
cdrom.

# Tiến trình chèn sẵn trình cài đặt Debian không đảm bảo là an toàn.
# Không có gì trong trình cài đặt mà kiểm tra bắt sự cố gắng tràn bộ đệm
# hoặc cách khác lạm dụng giá trị nằm trong tập tin cấu hình sẵn
# như điều này. Hãy dùng chỉ tập tin cấu hình sẵn có nguồn đáng tin !
# Để chứng minh tình trạng không an toàn của tập tin cấu hình sẵn,
# và vì nó có ích một cách chung, bên dưới có một phương pháp
# tự động chạy bất cứ câu lệnh trình bao nào bên trong trình cài đặt.

# Lệnh đầu tiên này được chạy càng sớm càng có thể, đúng sau khi
# đọc thông tin chèn sẵn.
#d-i preseed/early_command string anna-install some-udeb
# Câu lệnh này được chạy ngay trước khi công cụ phân vùng khởi chạy.
# Nó có thể hữu ích để áp dụng cấu hình chèn sẵn động
# vào chức năng phân vùng mà phụ thuộc vào tình trạng của các đĩa
# (mà có thể không hiện rõ khi preseed/early_command chạy).
#d-i partman/early_command \
#       string debconf-set partman-auto/disk "$(list-devices disk | head -n1)"

# Câu lệnh bên dưới được chạy đúng trước khi cài đặt xong, nhưng khi
# vẫn còn có một thư mục « /target » có ích. Bạn có thể chroot (chuyển đổi
# vị trí của thư mục gốc) sang « /target » và dùng nó một cách trực tiếp,
# hoặc dùng các lệnh « apt-install » (cài đặt bằng apt) và « in-target »
# (trong đích) để cài đặt dễ dàng các gói và chạy câu lệnh trên hệ thống đích.
#d-i preseed/late_command string apt-install zsh; in-target chsh -s /bin/zsh

B.5.2. Dùng khả năng chèn sẵn để thay đổi giá trị mặc định

Có thể dùng khả năng chèn sẵn để thay đổi trả lời mặc định đối với câu hỏi, còn
vẫn nhắc người dùng với câu hỏi đó. Để làm như thế, cờ seen (đã xem) phải được
đặt lại thành "false" (sai) sau khi đặt giá trị cho câu hỏi.

d-i foo/bar string value
d-i foo/bar seen false

Có thể làm cùng kết quả cho tất cả các câu hỏi bằng cách đặt tham số preseed/
interactive=true tại dấu nhắc khởi động. Cũng có thể hữu ích để thử hay gỡ lỗi
tập tin cấu hình sẵn.

Ghi chú rằng chủ sở hữu "d-i" chỉ nên được dùng cho các biến được đặt cho trình
cài đặt chính nó. Đối với biến thuộc về gói được cài đặt vào hệ thống đích, bạn
nên sử dụng tên của gói để thay thế. Xem cước chú về Phần B.2.2, "Dùng tham số
khởi động để chèn sẵn câu hỏi".

Nếu bạn chèn sẵn dùng tham số khởi động, bạn cũng có thể làm cho tiến trình cài
đặt hỏi câu tương ứng bằng cách dùng toán tử "?=", tức là foo/bar?=giá_trị (hay
chủ_sở_hữu:foo/bar?=giá_trị). Nó chỉ có tác động đối với tham số tương ứng với
câu hỏi thật được hiển thị trong khi cài đặt, không phải đối với tham số "nội
bộ".

Để có thêm thông tin gỡ lỗi, hãy dùng tham số khởi động DEBCONF_DEBUG=5. Việc
này sẽ làm cho debconf in thêm rất nhiều chi tiết về các xác lập hiện tại của
từng biến và về tiến trình của nó qua các văn lệnh cài đặt gói.

B.5.3. Tải dây chuyền tập tin định cấu hình sẵn

Có thể gồm một số tập tin cấu hình sẵn khác từ chỉ một tập tin định cấu hình
sẵn có liệt kê chúng. Thiết lập nào nằm trong các tập tin cấu hình sẵn đó sẽ đè
lên thiết lập tồn tại từ tập tin được tải trước. Tính năng này cho khả năng,
lấy thí dụ, để thiết lập mạng chung cho chỗ bạn trong tập tin này, còn để thiết
lập chi tiết hơn cho một số cấu hình riêng trong các tập tin khác.

# Có thể liệt kê nhiều tập tin, định giới bằng dấu cách: tất cả các tập tin
# trong danh sách này sẽ được nạp. Những tập tin được bao gồm
# cũng có thể dùng chỉ thị chèn sẵn/bao gồm riêng.
# Ghi chú rằng nếu tên tập tin là tương đối, nó được lấy từ
# cùng một thư mục với tập tin cấu hình sẵn mà chứa tập tin đó.
#d-i preseed/include string x.cfg

# Trình cài đặt có khả năng (tùy chọn) thẩm tra tổng kiểm (checksum)
# của tập tin cấu hình sẵn, trước khi dùng nó. HIện thời chỉ hỗ trợ
# tổng kiểm kiểu md5sum; hãy liệt kê các tổng md5sum
# theo cùng một thứ tự với danh sách các tập tin cần gồm.
#d-i preseed/include/checksum string 5da499872becccfeda2c4872f9171c3d

# Dẻo hơn, dòng bên dưới chạy lệnh trình bao : xuất tên của
# tập tin cấu hình sẵn thì bao gồm các tập tin đó.
#d-i preseed/include_command \
#      string if [ "`hostname`" = bob ]; then echo bob.cfg; fi

# Dẻo nhất, dòng này tải về chương trình rồi chạy nó. Chương trình
# có khả năng dùng lệnh như « debconf-set » (debconf đặt) để thao tác
# cơ sở dữ liệu cấu hình « debconf ». Có thể liệt kê danh sách các
# văn lệnh, định giới bằng dấu cách.
# Ghi chú rằng nếu tên tập tin là tương đối, nó được lấy từ
# cùng một thư mục với tập tin cấu hình sẵn mà chứa tập tin đó.
#d-i preseed/run string foo.sh

Cũng có thể nạp dây chuyền từ giải đoạn chèn sẵn kiểu initrd hay tập tin, đến
việc chèn sẵn qua mạng, bằng cách đặt preseed/url trong những tập tin sớm hơn.
Sự chọn này sẽ gây ra việc chèn sẵn qua mạng được thực hiện khi mạng trở thành
hoạt động. Hãy làm cẩn thận, vì có hai tiến trình chèn sẵn riêng: chẳng hạn,
bạn có hai dịp chạy lệnh preseed/url, điều thứ hai được tạo một khi mạng trở
thành hoạt động.


━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

^[21] Cái sở hữu giá trị (hay mẫu) kiểu debconf bình thường là tên của gói chứa
mẫu debconf tương ứng. Đối với những biến được dùng trong tiến trình cài đặt
chính nó, cái sở hữu là "d-i". Mỗi mẫu và biến vẫn còn có khả năng thuộc về
nhiều cái sở hữu, mà giúp đỡ quyết định nếu nó có thể được gỡ bỏ ra cơ sở dữ
liệu debconf nếu gói đó bị tẩy.

^[22] Chèn sẵn locale thành en_NL, chẳng hạn, có kết quả là en_US.UTF-8 làm
miền địa phương mặc định cho hệ thống được cài đặt. Nếu (v.d.) người dùng thực
sự muốn sử dụng en_GB.UTF-8 thì phải chèn sẵn từng giá trị.

Phụ lục C. Phân vùng cho Debian

Mục lục

C.1. Chọn phân vùng Debian, lập kích cỡ phân vùng
C.2. Cây thư mục
C.3. Bố trí phân vùng khuyến khích
C.4. Tên thiết bị dưới Linux
C.5. Chương trình tạo phân vùng Debian

    C.5.1. Phân vùng cho 64-bit PC

C.1. Chọn phân vùng Debian, lập kích cỡ phân vùng

Hệ thống GNU/Linux cần thiết ít nhất một phân vùng riêng. Phân vùng đó có thể
chứa toàn bộ hệ điều hành, tất cả các ứng dụng và tập tin cá nhân. Phần lớn
người xem là cũng cần thiết một phân vùng trao đổi. Chỗ "trao đổi" (swap) là
sức chứa hỗn tạp cho hệ điều hành, cho phép hệ thống sử dụng sức chứa trên đĩa
là "bộ nhớ ảo". Bằng cách để chỗ trao đổi trên phân vùng riêng, bạn cho Linux
khả năng rất tận dụng bộ nhớ đó hơn. Có thể ép buộc Linux sử dụng tập tin chuẩn
là chỗ trao đổi, nhưng mà phương pháp đó không khuyến khích.

Phần lớn người cũng chọn cho hệ thống GNU/Linux có hơn số phân vùng tối thiểu.
Có hai lý do bạn có thể muốn chia hệ thống tập tin ra nhiều phân vùng nhỏ hơn.
Lý do thứ nhất là sự an toàn. Nếu cái gì xảy ra để hỏng hệ thống tập tin,
thường chỉ một phân vùng riêng bị hại. Vì vậy bạn cần phải phục hồi (từ bản sao
lưu bạn thường tạo) chỉ một phần của hệ thống. Bạn nên tạo tối thiểu một phân
vùng riêng thường được gọi như là "phân vùng gốc" (root partition), mà chứa
những thành phần chủ yếu nhất của hệ thống. Nếu phân vùng khác nào bị hỏng, bạn
vẫn còn có khả năng khởi động vào GNU/Linux trên phân vùng riêng này, để sửa
chữa hệ thống. Phân vùng gốc này có thể tránh trường hợp mà bạn cần phải cài
đặt lại toàn bộ hệ thống.

Lý do thứ hai thường là quan trọng hơn trong trường hợp kinh doanh, nhưng nó
thật sự phụ thuộc vào cách sử dụng máy tính. Chẳng hạn máy phục vụ thư tín tràn
ngập bởi thư rác có thể chiếm dễ dàng toàn bộ phân vùng. Nếu bạn đã cấu hình
vùng thư tín /var/mail là phân vùng riêng trên máy phục vụ thư tín, phần lớn
của hệ thống còn lại hoạt động được thậm chí nếu nó bị rác tràn.

Mặt không thuận lợi thật duy nhất khi sử dụng phân vùng thêm là thường khó biết
trước các nhu cầu của mình. Nếu bạn cấu hình phân vùng quá nhỏ, bạn sẽ phải
hoặc cài đặt lại hệ thống, hoặc cũng luôn chuyển các thứ ra để tạo chỗ rảnh
trong phân vùng thấp nhỏ đó. Mặt khác, nếu bạn cấu hình phân vùng quá lớn, bạn
sẽ hoài phí sức chứa có thể được tận dụng trên vùng khác. Hiện thời sức chứa
trên đĩa là rẻ, nhưng tại sao xài phí tiền?

C.2. Cây thư mục

Debian GNU/Linux tùy theo Tiêu Chuẩn Phân Cấp Hệ Thống Tập Tin khi đặt tên của
tập tin và thư mục. Tiêu chuẩn này cho người dùng và chương trình phần mềm có
khả năng dự đoán vị trí của tập tin và thư mục. Thư mục cấp gốc được đại diện
đơn giản bằng dấu xuyệc /. Trên cấp gốc, mọi hệ thống Debian chứa những thư mục
này:

┌───────┬──────────────────────────────────────────────┐
│Thư mục│                   Nội dung                   │
├───────┼──────────────────────────────────────────────┤
│bin    │Tập tin nhị phân lệnh chủ yếu                 │
├───────┼──────────────────────────────────────────────┤
│boot   │Tập tin tĩnh của bộ nạp khởi động             │
├───────┼──────────────────────────────────────────────┤
│dev    │Tập tin thiết bị                              │
├───────┼──────────────────────────────────────────────┤
│etc    │Cấu hình hệ thống đặc trưng cho máy           │
├───────┼──────────────────────────────────────────────┤
│home   │Thư mục chính của người dùng                  │
├───────┼──────────────────────────────────────────────┤
│lib    │Thư viện dùng chung và mô-đun hạt nhân chủ yếu│
├───────┼──────────────────────────────────────────────┤
│media  │Chứa điểm lắp cho vật chứa có thể thay thế    │
├───────┼──────────────────────────────────────────────┤
│mnt    │Điểm lắp để gắn kết tạm thời hệ thống tập tin │
├───────┼──────────────────────────────────────────────┤
│proc   │Thư mục ảo cho thông tin hệ thống             │
├───────┼──────────────────────────────────────────────┤
│root   │Thư mục chính của người dùng chủ              │
├───────┼──────────────────────────────────────────────┤
│run    │Run-time variable data                        │
├───────┼──────────────────────────────────────────────┤
│sbin   │Tập tin nhị phân hệ thống chủ yếu             │
├───────┼──────────────────────────────────────────────┤
│sys    │Thư mục ảo cho thông tin hệ thống             │
├───────┼──────────────────────────────────────────────┤
│tmp    │Tập tin tạm thời                              │
├───────┼──────────────────────────────────────────────┤
│usr    │Phân cấp phụ                                  │
├───────┼──────────────────────────────────────────────┤
│var    │Dữ liệu có thể thay đổi                       │
├───────┼──────────────────────────────────────────────┤
│srv    │Dữ liệu cho dịch vụ do hệ thống cung cấp      │
├───────┼──────────────────────────────────────────────┤
│opt    │Gói phần mềm ứng dụng phụ trợ                 │
└───────┴──────────────────────────────────────────────┘

Sau đây có danh sách các sự cân nhắc quan trọng về thư mục và phân vùng. Ghi
chú rằng sức chứa trên đĩa được chiếm có thay đổi nhiều với kiểu cấu hình hệ
thống và mẫu sử dụng riêng. Những sự giới thiệu này là hướng dẫn chung và cung
cấp một điểm bắt đầu khi tạo phân vùng.

  • Thư mục gốc / luôn luôn phải chứa vật lý những thư mục /etc, /bin, /sbin, /
    lib và /dev, nếu không thì bạn không thể khởi động được. Thường cần thiết
    vùng 250-350 MB dành cho phân vùng gốc.

  • Thư mục /usr: chứa mọi chương trình người dùng (/usr/bin), thư viện (/usr/
    lib), tài liệu hướng dẫn (/usr/share/doc), v.v. Đây là phần của hệ thống
    tập tin mà thường chiếm chỗ nhiều nhất. Bạn nên cung cấp cho nó ít nhất 500
    MB sức chứa trên đĩa, cũng tăng số lượng này phụ thuộc vào số và kiểu gói
    phần mềm cần cài đặt. Bản cài đặt chạy trên máy trạm hay máy phục vụ nên
    tính rộng lượng đến 4-6 GB.

  • It is now recommended to have /usr on the root partition /, otherwise it
    could cause some trouble at boot time. This means that you should provide
    at least 600-750MB of disk space for the root partition including /usr, or
    5-6GB for a workstation or a server installation.

  • Thư mục /var: dữ liệu có thể thay đổi, như bài tin, thư điện tử, nơi Mạng,
    co sở dữ liệu, bộ nhớ tạm của hệ thống quản lý gói phần mềm, nằm dưới thư
    mục này. Kích cỡ của thư mục này phụ thuộc nhiều vào cách sử dụng hệ thống,
    nhưng thường được điều khiển bởi những tài nguyên cần thiết cho công cụ
    quản lý gói. Nếu bạn định chạy tiến trình cài đặt đầy đủ, gồm gần mọi thứ
    do Debian cung cấp, trong cùng một phiên chạy, cấp phát 2-3 GB sức chứa
    riêng cho thư mục /var nên là đủ. Còn nếu bạn định chạy tiến trình cài đặt
    từ từ (tức là cài đặt các dịch vụ và tiện ích, rồi các điều nhập thô, rồi X
    v.v.), bạn có thể làm trôi chảy bằng cách gán 300-500 MB riêng. Nếu bạn
    không có nhiều sức chứa còn rảnh trên đĩa, cũng không định chạy tiến trình
    cập nhật hệ thống quan trọng, 30 hay 40 MB có thể là đủ.

  • Thư mục /tmp: dữ liệu tạm thời được tạo bởi chương trình thường nằm trong
    thư mục này. Sức chứa đủ thường là 40-100 MB. Một số ứng dụng -- gồm bộ
    thao tác kho, công cụ tạo đĩa CD/DVD và phần mềm đa phương tiện -- có thể
    dùng thư mục /tmp để cất giữ tạm thời tập tin ảnh. Nếu bạn định sử dụng ứng
    dụng như vậy, bạn nên điều chỉnh sức chứa sẵn sàng trong thư mục /tmp cho
    phù hợp.

  • Thư mục /home: mỗi người dùng sẽ để các dữ liệu cá nhân vào thư mục con của
    thư mục này. Kích cỡ của nó phụ thuộc vào số người dùng sẽ sử dụng hệ thống
    đó và những tập tin nào sẽ được cất giữ trong thư mục của họ. Phụ thuộc vào
    cách sử dụng đã định, bạn nên dành riêng khoảng 100 MB cho mỗi người dùng,
    nhưng thích nghi giá trị này với nhu cầu của bạn. Hãy dành riêng rất nhiều
    sức chứa hơn nếu bạn định lưu nhiều tập tin đa phương tiện (ảnh, âm nhạc,
    phim) vào thư mục chính này.

C.3. Bố trí phân vùng khuyến khích

For new users, personal Debian boxes, home systems, and other single-user
setups, a single / partition (plus swap) is probably the easiest, simplest way
to go. The recommended partition type is ext4.

Còn đối với hệ thống đa người dùng, hay hệ thống có rất nhiều sức chứa trên
đĩa, tốt nhất là để mỗi thư mục /var, /tmp, và /home trên một phân vùng riêng,
khác với phân vùng / (5 phân vùng).

You might need a separate /usr/local partition if you plan to install many
programs that are not part of the Debian distribution. If your machine will be
a mail server, you might need to make /var/mail a separate partition. If you
are setting up a server with lots of user accounts, it's generally good to have
a separate, large /home partition. In general, the partitioning situation
varies from computer to computer depending on its uses.

Đối với hệ thống rất phức tạp, bạn nên xem tài liệu Đa Đĩa Thế Nào Multi Disk
HOWTO. Nó chứa thông tin chi tiết, phần lớn có ích cho nhà cung cấp dịch vụ
Mạng và người thiết lập máy phục vụ.

With respect to the issue of swap partition size, there are many views. One
rule of thumb which works well is to use as much swap as you have system
memory. It also shouldn't be smaller than 512MB, in most cases. Of course,
there are exceptions to these rules.

As an example, an older home machine might have 512MB of RAM and a 20GB SATA
drive on /dev/sda. There might be a 8GB partition for another operating system
on /dev/sda1, a 512MB swap partition on /dev/sda3 and about 11.4GB on /dev/sda2
as the Linux partition.

Để tìm biết sức chứa được chiếm bởi công việc bạn có thể muốn thêm sau khi cài
đặt xong hệ thống, xem Phần D.2, "Sức chứa trên đĩa cần thiết cho công việc".

C.4. Tên thiết bị dưới Linux

Tên của đĩa và phân vùng Linux có thể là khác với hệ điều hành khác. Bạn cần
phải biết những tên bị Linux dùng khi bạn tạo và gắn kết phân vùng. Đây là lược
đồ đặt tên cơ bản:

  • The first hard disk detected is named /dev/sda.

  • The second hard disk detected is named /dev/sdb, and so on.

  • Đĩa CD-ROM SCSI thứ nhất có tên /dev/scd0, cũng được biết như là /dev/sr0.

Những phân vùng nằm trên mỗi đĩa được đại diện bằng cách phụ thêm một số thập
phân vào tên đĩa: sda1 và sda2 đại diện phân vùng thứ nhất và thứ hai của ổ đĩa
SCSI thứ nhất trên hệ thống.

Đây là thí dụ cuộc sống thực. Giả sử bạn có hệ thống với 2 đĩa SCSI, một đĩa
tại địa chỉ SCSI 2 và đĩa khác tại địa chỉ SCSI 4. Đĩa thứ nhất (tại địa chỉ 2)
thì có tên sda, và đĩa thứ hai có tên sdb. Nếu ổ đĩa sda chứa 3 phân vùng,
chúng có tên sda1, sda2 và sda3. Cũng vậy với đĩa sdb và các phân vùng nằm trên
nó.

Ghi chú rằng nếu bạn có hai bộ tiếp hợp mạch nối máy SCSI (tức là bộ điều
khiển), thứ tự các ổ đĩa có thể trở thành khó hiểu. Trong trường hợp này,
phương pháp tốt nhất là theo dõi các thông điệp khởi động, giả sử bạn biết mô
hình và/hay khả năng của các ổ đĩa.

Linux represents the primary partitions as the drive name, plus the numbers 1
through 4. For example, the first primary partition on the first drive is /dev/
sda1. The logical partitions are numbered starting at 5, so the first logical
partition on that same drive is /dev/sda5. Remember that the extended
partition, that is, the primary partition holding the logical partitions, is
not usable by itself.

C.5. Chương trình tạo phân vùng Debian

Vài kiểu chương trình tạo phân vùng đã được làm thích nghi bởi nhà phát triển
Debian để hoạt động được trên nhiều kiểu đĩa cứng và kiến trúc máy tính khác
nhau. Sau đây có danh sách các chương trình thích hợp với kiến trúc của máy
tính này.

partman

    Công cụ tạo phân vùng khuyến khích trong Debian. Chương trình này có nhiều
    khả năng có ích: nó cũng có thể thay đổi kích cỡ của phân vùng, tạo hệ
    thống tập tin ("format" [định dạng] trên hệ điều hành Windows) và gán nó
    vào điểm lắp.

fdisk

    Bộ tạo phân vùng Linux gốc, thích hợp với người dùng rất kinh nghiệm.

    Hãy cẩn thận nếu bạn có phân vùng kiểu FreeBSD tồn tại trên máy tính. Những
    hạt nhân cài đặt chứa khả năng hỗ trợ những phân vùng này, nhưng cách đại
    diện (hay không) của fdisk có thể làm cho tên thiết bị khác biệt. Xem tài
    liệu Linux và FreeBSD Thế Nào Linux+FreeBSD HOWTO.

cfdisk

    Bộ tạo phân vùng đĩa toàn màn hình dễ dàng, thích hợp với phần lớn người.

    Ghi chú rằng chương trình cfdisk không hiểu phân vùng kiểu FreeBSD bằng
    cách nào cả, lại có kết quả là tên thiết bị có thể khác biệt.

Một của những chương trình này sẽ được chạy theo mặc định khi bạn chọn mục
trình đơn Phân vùng đĩa (hay tương tự). Có thể sử dụng công cụ tạo phân vùng
khác từ dòng lệnh trên VT2, nhưng không khuyên bạn làm như thế.

Hãy ghi nhớ cần phải đánh dấu phân vùng khởi động như là "Khởi động được"
(Bootable).

C.5.1. Phân vùng cho 64-bit PC

If you are using a new harddisk (or want to wipe out the whole partition table
of your disk), a new partition table needs to be created. The "Guided
partitioning" does this automatically, but when partitioning manually, move the
selection on the top-level entry of the disk and hit Enter. That will create a
new partition table on that disk. In expert mode, you will then be asked for
the type of the partition table. Default for UEFI-based systems is "gpt", while
for the older BIOS world the default value is "msdos". In a standard priority
installation those defaults will be used automatically.

Ghi chú

When a partition table with type "gpt" was selected (default for UEFI systems),
a free space of 1 MB will automatically get created at the beginning of the
disk. This is intended and required to embed the GRUB2 bootloader.

Nếu bạn có một hệ điều hành khác đã có, v.d. DOS, Windows hay Mac OSX, và bạn
muốn giữ lại hệ điều hành đó trong khi cài đặt Debian, có thể là bạn cần phải
thay đổi kích cỡ của phân vùng chứa nó để giải phóng thêm sức chứa trống trên
đĩa cho bản cài đặt Debian. Trình cài đặt hỗ trợ chức năng thay đổi kích cỡ của
hệ thống tập tin kiểu cả hai FAT và NTFS; khi bạn tới bước phân vùng của tiến
trình cài đặt, hãy bật tùy chọn Bằng tay, sau đó đơn giản chọn một phân vùng
tồn tại và thay đổi kích cỡ của nó.

While modern UEFI systems don't have such limitations as listed below, the old
PC BIOS generally adds additional constraints for disk partitioning. There is a
limit to how many "primary" and "logical" partitions a drive can contain.
Additionally, with pre 1994-98 BIOSes, there are limits to where on the drive
the BIOS can boot from. More information can be found in the Linux Partition
HOWTO, but this section will include a brief overview to help you plan most
situations.

Phân vùng "chính" (primary) là lược đồ phân vùng gốc cho đĩa kiểu PC. Tuy
nhiên, có thể tạo chỉ bốn phân vùng chính. Để vượt qua sự hạn chế này, phân
vùng kiểu "đã mở rộng" (extended) và "hợp lý" (logical) đã được phát minh. Bằng
cách đặt một của những phân vùng chính là phân vùng đã mở rộng, bạn có khả năng
chia nhỏ toàn bộ sức chứa được cấp phát cho phân vùng đó ra nhiều phân vùng hợp
lý. Bạn có thể tạo đến 60 phân vùng hợp lý trong mỗi phân vùng đã mở rộng;
nhưng mà, mỗi đĩa có thể chứa chỉ một phân vùng đã mở rộng thôi.

Linux hạn chế số phân vùng trên mỗi đĩa thành 255 phân vùng trên đĩa kiểu SCSI
(3 phân vùng chính có thể dùng, 252 phân vùng hợp lý) và 63 phân vùng trên đĩa
IDE (3 phân vùng chính có thể dùng, 60 phân vùng hợp lý). Tuy nhiên, hệ thống
Debian GNU/Linux chuẩn cung cấp chỉ 20 thiết bị cho phân vùng, vì vậy bạn không
thể cài đặt trên hơn 20 phân vùng nếu bạn chưa tự tạo một thiết bị dành cho mỗi
phân vùng đó.

Trên một đĩa IDE lớn, nếu bạn không sử dụng khả năng đặt địa chỉ LBA (LBA
addressing), cũng không sử dụng trình điều khiển phủ (overlay drivers, đôi khi
được cung cấp bởi hãng chế tạo đĩa cứng), bạn cần phải để phân vùng khởi động
(phân vùng chứa ảnh hạt nhân) trong 1024 hình trụ đầu của đĩa cứng đó (thường
là vùng khoảng 524 MB, không có khả năng dịch BIOS).

This restriction doesn't apply if you have a BIOS newer than around 1995-98
(depending on the manufacturer) that supports the "Enhanced Disk Drive Support
Specification". Debian's Lilo alternative mbr must use the BIOS to read the
kernel from the disk into RAM. If the BIOS int 0x13 large disk access
extensions are found to be present, they will be utilized. Otherwise, the
legacy disk access interface is used as a fall-back, and it cannot be used to
address any location on the disk higher than the 1023rd cylinder. Once Linux is
booted, no matter what BIOS your computer has, these restrictions no longer
apply, since Linux does not use the BIOS for disk access.

Trên đĩa lớn, bạn có thể cần phải sử dụng kỹ xảo dịch hình trụ, mà bạn có thể
đặt trong chương trình thiết lập BIOS, như LBA (Logical Block Addressing: định
vị khối hợp lý) hay chế độ dịch CHS ("Lớn"). Thông tin thêm về vấn đề đối với
đĩa lớn nằm trong tài liệu đĩa lớn Thế Nào Large Disk HOWTO. Nếu bạn sử dụng
lược đồ dịch hình trụ mà BIOS không hỗ trợ các phần mở rộng truy cập đĩa lớn,
phân vùng khởi động phải nằm trong vùng đại diện đã dịch của hình trụ thứ 1024.

Phương pháp khuyến khích để đạt cấu hình này là tạo một phân vùng nhỏ (25-50 MB
nên là đủ) tại đầu của đĩa, để được dùng là phân vùng khởi động, rồi tạo các
phân vùng khác được muốn trong vùng còn lại. Phân vùng khởi động này cần phải
được gắn kết vào /boot, vì đó là thư mục nơi (các) hạt nhân Linux sẽ được cất
giữ. Cấu hình này sẽ hoạt động được trên mọi hệ thống, bất chấp dùng LBA hay
khả năng dịch CHS đĩa lớn, và bất chấp BIOS hỗ trợ các phần mở rộng truy cấp
đĩa lớn.

Phụ lục D. Thông Tin Linh Tinh

Mục lục

D.1. Thiết bị Linux

    D.1.1. Thiết lập con chuột

D.2. Sức chứa trên đĩa cần thiết cho công việc
D.3. Cài đặt Debian GNU/Linux từ hệ thống UNIX/Linux

    D.3.1. Bắt đầu
    D.3.2. Cài đặt debootstrap
    D.3.3. Chạy debootstrap
    D.3.4. Cấu hình hệ thống cơ bản
    D.3.5. Cài đặt hạt nhân
    D.3.6. Thiết lập bộ nạp khởi động
    D.3.7. Remote access: Installing SSH and setting up access
    D.3.8. Đòn kết liễu

D.4. Cài đặt Debian GNU/Linux qua IP đường song song (PLIP)

    D.4.1. Nhu cầu
    D.4.2. Thiết lập nguồn
    D.4.3. Cài đặt đích

D.5. Cài đặt Debian GNU/Linux dùng PPP qua Ethernet (PPPoE)

D.1. Thiết bị Linux

Trong hệ thống Linux, một số tập tin đặc biệt nằm dưới thư mục /dev. Những tập
tin này được gọi là tập tin thiết bị (device files), có ứng xử khác với tập tin
chuẩn. Kiểu tập tin thiết bị thường nhất thuộc về thiết bị khối và thiết bị ký
tự. Những tập tin này là giao diện với trình điều khiển thật (phần của hạt nhân
Linux) mà lần lượt truy cập phần cứng. Một kiểu tập tin thiết bị khác, ít
thường hơn, có tên pipe (ống dẫn). Những tập tin thiết bị quan trọng nhất được
liệt kê trong các bảng bên dưới.

┌────┬─────────────────────────────────────────────┐
│sda │First hard disk                              │
├────┼─────────────────────────────────────────────┤
│sdb │Second hard disk                             │
├────┼─────────────────────────────────────────────┤
│sda1│Phân vùng thứ nhất nằm trên đĩa cứng thứ nhất│
├────┼─────────────────────────────────────────────┤
│sdb7│Seventh partition of the second hard disk    │
└────┴─────────────────────────────────────────────┘

┌───┬──────────────┐
│sr0│First CD-ROM  │
├───┼──────────────┤
│sr1│Second CD-ROM │
└───┴──────────────┘

┌───────┬──────────────────────────────────────────────────────────┐
│ttyS0  │Cổng nối tiếp 0, COM1 dưới MS-DOS                         │
├───────┼──────────────────────────────────────────────────────────┤
│ttyS1  │Cổng nối tiếp 1, COM2 dưới MS-DOS                         │
├───────┼──────────────────────────────────────────────────────────┤
│psaux  │Thiết bị con chuột PS/2                                   │
├───────┼──────────────────────────────────────────────────────────┤
│gpmdata│Thiết bị giả, dữ liệu lặp lại từ trình nền GPM (con chuột)│
└───────┴──────────────────────────────────────────────────────────┘

┌─────┬───────────────────────────────────────────────────┐
│cdrom│Liên kết tượng trưng đến ổ đĩa CD-ROM              │
├─────┼───────────────────────────────────────────────────┤
│mouse│Liên kết tượng trưng đến tập tin thiết bị con chuột│
└─────┴───────────────────────────────────────────────────┘

┌────┬────────────────────────────────────────────┐
│null│Mọi gì được ghi vào thiết bị này sẽ biến mất│
├────┼────────────────────────────────────────────┤
│zero│Có thể đọc vô hạn số không ra thiết bị này  │
└────┴────────────────────────────────────────────┘

D.1.1. Thiết lập con chuột

Có khả năng sử dụng con chuột trong cả hai bàn giao tiếp Linux (dùng gpm) và
môi trường cửa sổ X. Bình thường, chỉ cần cài đặt gpm và trình phục vụ X chính
nó. Cả hai nên có cấu hình để sử dụng /dev/input/mice làm thiết bị con chuột.
Giao thức con chuột có tên exps2 trong gpm, và tên ExplorerPS/2 trong X. Tập
tin cấu hình riêng từng cái là /etc/gpm.conf và /etc/X11/xorg.conf.

Một số mô-đun hạt nhân cần phải được nạp để làm cho con chuột hoạt động. Trong
phần lớn trường hợp, các mô-đun thích hợp được tự động phát hiện, nhưng đôi khi
không phải đối với con chuột nối tiếp cũ và con chuột mạch nối^[23], mà rất ít
dùng, trừ trên máy tính rất cũ. Bản tóm tắt các mô-đun hạt nhân Linux cần thiết
cho các kiểu con chuột khác nhau :

┌────────┬────────────────────────────────────────────────────────────────────┐
│ Mô-đun │                               Mô tả                                │
├────────┼────────────────────────────────────────────────────────────────────┤
│psmouse │Con chuột PS/2 (nên được tự động phát hiện)                         │
├────────┼────────────────────────────────────────────────────────────────────┤
│usbhid  │Con chuột USB (nên được tự động phát hiện)                          │
├────────┼────────────────────────────────────────────────────────────────────┤
│sermouse│Phần lớn con chuột nối tiếp                                         │
├────────┼────────────────────────────────────────────────────────────────────┤
│logibm  │Con chuột mạch nối được kết nối đến bo mạch điều hợp Logitech       │
├────────┼────────────────────────────────────────────────────────────────────┤
│inport  │Con chuột mạch nối được kết nối đến bo mạch ATI hay Microsoft InPort│
└────────┴────────────────────────────────────────────────────────────────────┘

Để nạp một mô-đun điều khiển con chuột, bạn có thể sử dụng lệnh modconf (từ gói
cùng tên) và tìm trong phân loại kernel/drivers/input/mouse.

D.2. Sức chứa trên đĩa cần thiết cho công việc

Bản cài đặt chuẩn trên máy kiểu amd64, gồm các gói chuẩn và dùng hạt nhân phiên
bản mặc định, chiếm 971 MB sức chứa trên đĩa. Còn một bản cài đặt tối thiểu,
không có công việc "Hệ thống chuẩn" được chọn, chiếm 769 MB.

Quan trọng

Trong cả hai trường hợp, số lượng này là sức chứa thật được dùng trên đĩa sau
khi cài đặt xong và tập tin tạm thời nào được xoá. Số này cũng không tính tài
nguyên thêm được chiếm bởi hệ thống tập tin, chẳng hạn cho các tập tin nhật ký.
Có nghĩa là cần thiết sức chứa nhiều hơn, cả trong khi cài đặt lẫn khi sử dụng
hệ thống hàng ngày.

Theo đây có bảng hiển thị các kích cỡ do trình aptitude thông báo cho những
công việc được liệt kê trong trình "tasksel". Ghi chú rằng một số công việc
riêng có nội dung chung, vì vậy tổng số kích cỡ đã cài đặt của hai công việc
với nhau có thể là nhỏ hơn tổng hai số đó.

By default the installer will install the GNOME desktop environment, but
alternative desktop environments can be selected either by using one of the
special installation images, or by specifying the desired desktop environment
during installation (see Phần 6.3.6.2, "Lựa chọn và Cài đặt Phần mềm").

Ghi chú rằng bạn cần phải cộng các kích cỡ được liệt kê trong bảng này với kích
cỡ của bản cài đặt chuẩn, khi tính kích cỡ của phân vùng. Phần lớn sức chứa
được hiển thị trong cột "Kích cỡ đã cài đặt" sẽ nằm trong thư mục /usr và /lib;
sức chứa trong cột "Kích cỡ tải về" cần thiết (tạm thời) trong thư mục /var.

┌───────────────┬──────────────────┬───────────────┬──────────────────────────┐
│   Công việc   │Kích cỡ đã cài đặt│Kích cỡ tải về │Sức chứa cần thiết để cài │
│               │       (MB)       │     (MB)      │         đặt (MB)         │
├───────────────┼──────────────────┼───────────────┼──────────────────────────┤
│Môi trường làm │                  │               │                          │
│việc           │                  │               │                          │
├───────────────┼──────────────────┼───────────────┼──────────────────────────┤
│  • GNOME (mặc │2790              │786            │3576                      │
│định)          │                  │               │                          │
├───────────────┼──────────────────┼───────────────┼──────────────────────────┤
│  • KDE Plasma │4122              │1212           │5334                      │
├───────────────┼──────────────────┼───────────────┼──────────────────────────┤
│  • Xfce       │2187              │621            │2808                      │
├───────────────┼──────────────────┼───────────────┼──────────────────────────┤
│  • LXDE       │2271              │653            │2924                      │
├───────────────┼──────────────────┼───────────────┼──────────────────────────┤
│  • MATE       │2574              │711            │3285                      │
├───────────────┼──────────────────┼───────────────┼──────────────────────────┤
│  • Cinnamon   │4197              │1251           │5448                      │
├───────────────┼──────────────────┼───────────────┼──────────────────────────┤
│Trình phục vụ  │44                │11             │55                        │
│Web            │                  │               │                          │
├───────────────┼──────────────────┼───────────────┼──────────────────────────┤
│Trình phục vụ  │2                 │0              │2                         │
│SSH            │                  │               │                          │
└───────────────┴──────────────────┴───────────────┴──────────────────────────┘

Nếu bạn cài đặt bằng ngôn ngữ khác tiếng Anh, tasksel có thể tự động cài đặt
một công việc địa phương hoá, nếu có, cho ngôn ngữ của bạn (có một công việc
dành cho tiếng Việt). Sức chứa cần thiết khác biệt giữa những ngôn ngữ khác
nhau; bạn nên tính đến tổng là 350 MB để tải về và cài đặt công việc này.

D.3. Cài đặt Debian GNU/Linux từ hệ thống UNIX/Linux

Phần này diễn tả phương pháp cài đặt Debian GNU/Linux từ một hệ thống UNIX hay
Linux đã có, không cần dùng trình cài đặt dựa vào trình đơn như được diễn tả
trong phần sổ tay còn lại. Tài liệu "cài đặt chéo" Thế Nào này đã được yêu cầu
bởi người dùng chuyển đổi sang Debian GNU/Linux từ hệ thống Red Hat, Mandriva,
và SUSE. Trong phần này giả sử là bạn quen với cách nhập lệnh *nix và cách
duyệt qua hệ thống tập tin. Trong phần này, dấu đồng $ đại diện lệnh cần nhập
vào hệ thống hiện thời của người dùng, còn dấu băm # đại diện lệnh được nhập
vào chroot của Debian.

Một khi cấu hình hệ thống Debian mới một cách thích hợp, bạn có thể nâng cấp
lên nó dữ liệu người dùng tồn tại nào, sau đó tiếp tục làm việc như bình
thường. Vì vậy, tiến trình cài đặt Debian GNU/Linux này "không có thời gian
chết". Nó cũng là một phương pháp thông minh để quản lý phần cứng thường không
hợp tác với vật chứa khác nhau kiểu khởi động hay cài đặt.

Ghi chú

Vì đây phần lớn là một thủ tục làm bằng tay, ghi nhớ rằng bạn sẽ cần phải tự
làm nhiều cấu hình cơ bản, mà yêu cầu bạn quen nhiều với Debian và Linux hơn
khi cài đặt bình thường. Thủ tục này sẽ không làm kết quả là hệ thống trùng với
kết quả của tiến trình cài đặt bình thường. Thủ tục này chỉ diễn tả những bước
cơ bản khi thiết lập hệ thống. Có thể là cần thiết thêm bước cài đặt hay/và cấu
hình.

D.3.1. Bắt đầu

With your current *nix partitioning tools, repartition the hard drive as
needed, creating at least one filesystem plus swap. You need around 769MB of
space available for a console only install, or about 2271MB if you plan to
install X (more if you intend to install desktop environments like GNOME or KDE
Plasma).

Sau đó, hãy tạo hệ thống tập tin trên những phân vùng. Chẳng hạn, để tạo một hệ
thống tập tin kiểu ext3 trên phân vùng /dev/sda6 (phân vùng gốc mẫu):

# mke2fs -j /dev/sda6

Còn để tạo hệ thống tập tin kiểu ext2, chỉ cần bỏ đoạn -j đi.

Sơ khởi và kích hoạt vùng trao đổi (thay thế số thứ tự phân vùng của phân vùng
trao đổi Debian dự định):

# mkswap /dev/sda5
# sync
# swapon /dev/sda5

Lắp một phân vùng như là /mnt/debinst (điểm cài đặt, để làm hệ thống tập tin
gốc (/) trên hệ thống mới). Tên của điểm lắp là tùy ý chặt chẽ: nó được tham
chiếu về sau bên dưới.

# mkdir /mnt/debinst
# mount /dev/sda6 /mnt/debinst

Ghi chú

Nếu bạn muốn đặt phần nào của hệ thống tập tin (v.d. /usr) được gắn kết vào
phân vùng riêng, bạn cần phải tự tạo và gắn kết những thư mục này trước khi
tiếp tục tới giao đoạn kế tiếp.

D.3.2. Cài đặt debootstrap

Tiện ích được dùng bởi trình cài đặt Debian, cũng được thấy là phương pháp
chính thức để cài đặt hệ thống cơ bản Debian, là debootstrap. Nó dùng hai
chương trình wget và ar, nhưng về mặt khác thì phụ thuộc chỉ vào /bin/sh và các
công cụ UNIX/Linux cơ bản^[24]. Chưa có thì cài đặt hai gói wget và ar, sau đó
tải về và cài đặt gói debootstrap.

Hoặc bạn có thể tự cài đặt nó bằng thủ tục theo đây. Tạo một thư mục work vào
đó cần giải nén .deb:

# mkdir work
# cd work

Tập tin nhị phân debootstrap nằm trong kho Debian (hãy chắc là bạn chọn tập tin
thích hợp với kiến trúc của mình). Tải tập tin dạng .deb debootstrap xuống vùng
gộp, sao chép gói đó vào thư mục work, sau đó giải nén các tập tin nhị phân ra
nó. Bạn cần phải có quyền người chủ để cài đặt các tập tin nhị phân này.

# ar -x debootstrap_0.X.X_all.deb
# cd /
# zcat /đường_dẫn_đầy_đủ_đến_work/work/data.tar.gz | tar xv

D.3.3. Chạy debootstrap

Chạy chương trình debootstrap thì có thể tải các tập tin cần thiết một cách
trực tiếp xuống kho lưu. Có thể thay thế chuỗi http.us.debian.org/debian (trong
mẫu bên dưới) bằng bất cứ máy nhân bản kho lưu Debian nào, tốt hơn là một máy
nhân bản ở gần chỗ bạn trên mạng. Các máy nhân bản được liệt kê ở địa chỉ http:
//www.debian.org/mirror/list.

If you have a bullseye Debian GNU/Linux installation image mounted at /cdrom,
you could substitute a file URL instead of the http URL: file:/cdrom/debian/

Substitute one of the following for ARCH in the debootstrap command: amd64,
arm64, armel, armhf, i386, mips64el, mipsel, ppc64el, s390x.

# /usr/sbin/debootstrap --arch ARCH bullseye \
     /mnt/debinst http://ftp.us.debian.org/debian

If the target architecture is different than the host, you should add the
--foreign option.

D.3.4. Cấu hình hệ thống cơ bản

Now you've got a real Debian system, though rather lean, on disk. chroot into
it:

# LANG=C.UTF-8 chroot /mnt/debinst /bin/bash

If the target architecture is different from the host, you will need to first
copy qemu-user-static to the new host:

# cp /usr/bin/qemu-ARCH-static /mnt/debinst/usr/bin
# LANG=C.UTF-8 chroot /mnt/debinst qemu-ARCH-static /bin/bash

After chrooting you may need to set the terminal definition to be compatible
with the Debian base system, for example:

# export TERM=xterm-color

Depending on the value of TERM, you may have to install the ncurses-term
package to get support for it.

If the target architecture is different from the host, you need to finish the
multi-stage boot strap:

/debootstrap/debootstrap --second-stage

D.3.4.1. Tạo tập tin thiết bị

Ở điểm thời này, thư mục /dev/ chỉ chứa các tập tin thiết bị rất cơ bản. Đối
với những bước tiếp theo của tiến trình cài đặt, có thể cần thiết thêm tập tin
thiết bị. Có một số phương pháp khác nhau : phương pháp thích hợp với trường
hợp của bạn thì phụ thuộc vào hệ thống hỗ trợ tiến trình cài đặt, vào kiểu hát
nhân (kiểu mô-đun hay không) và vào bạn định dùng tập tin thiết bị kiểu động
(v.d. dùng udev) hay tĩnh.

Vài tùy chọn sẵn sàng:

  • cài đặt gói makedev, và tạo một tập hợp tập tin thiết bị tĩnh mặc định bằng
    cách dùng (sau khi đã đổi root)

    # apt install makedev
    # mount none /proc -t proc
    # cd /dev
    # MAKEDEV generic

  • tạo bằng tay chỉ một số tập tin thiết bị dứt khoát dùng MAKEDEV

  • bind mount /dev từ hệ thống hỗ trợ ở trên /dev trong hệ thống đích; ghi chú
    rằng những văn lệnh sau khi cài đặt của một số gói có thể thử tạo tập tin
    thiết bị, vì vậy bạn nên dùng tùy chọn này chỉ một cách cẩn thận.

D.3.4.2. Gắn kết phân vùng

You need to create /etc/fstab.

# editor /etc/fstab

Here is a sample you can modify to suit:

# /etc/fstab: static file system information.
#
# file system    mount point   type    options                  dump pass
/dev/XXX         /             ext3    defaults                 0    1
/dev/XXX         /boot         ext3    ro,nosuid,nodev          0    2

/dev/XXX         none          swap    sw                       0    0
proc             /proc         proc    defaults                 0    0

/dev/cdrom       /media/cdrom  iso9660 noauto,ro,user,exec      0    0

/dev/XXX         /tmp          ext3    rw,nosuid,nodev          0    2
/dev/XXX         /var          ext3    rw,nosuid,nodev          0    2
/dev/XXX         /usr          ext3    rw,nodev                 0    2
/dev/XXX         /home         ext3    rw,nosuid,nodev          0    2

Use mount -a to mount all the file systems you have specified in your /etc/
fstab, or, to mount file systems individually, use:

# mount /path   # e.g.: mount /usr

Current Debian systems have mountpoints for removable media under /media, but
keep compatibility symlinks in /. Create these as as needed, for example:

# cd /media
# mkdir cdrom0
# ln -s cdrom0 cdrom
# cd /
# ln -s media/cdrom

You can mount the proc file system multiple times and to arbitrary locations,
though /proc is customary. If you didn't use mount -a, be sure to mount proc
before continuing:

# mount -t proc proc /proc

Sau đó, lệnh liệt kê ls /proc nên hiển thị thư mục khác rỗng. Nếu nó bị lỗi, có
lẽ bạn có khả năng gắn kết proc từ bên ngoài chroot đó.

# mount -t proc proc /mnt/debinst/proc

D.3.4.3. Đặt múi giờ

Setting the third line of the file /etc/adjtime to "UTC" or "LOCAL" determines
whether the system will interpret the hardware clock as being set to UTC
respective local time. The following command allows you to set that.

# editor /etc/adjtime

Here is a sample:

0.0 0 0.0
0
UTC

The following command allows you to choose your timezone.

# dpkg-reconfigure tzdata

D.3.4.4. Cấu hình khả năng chạy mạng

To configure networking, edit /etc/network/interfaces, /etc/resolv.conf, /etc/
hostname and /etc/hosts.

# editor /etc/network/interfaces

Here are some simple examples from /usr/share/doc/ifupdown/examples:

######################################################################
# /etc/network/interfaces -- configuration file for ifup(8), ifdown(8)
# See the interfaces(5) manpage for information on what options are
# available.
######################################################################

# The loopback interface isn't really required any longer, but can be used
# if needed.
#
# auto lo
# iface lo inet loopback

# To use dhcp:
#
# auto eth0
# iface eth0 inet dhcp

# An example static IP setup: (network, broadcast and gateway are optional)
#
# auto eth0
# iface eth0 inet static
#     address 192.168.0.42
#     network 192.168.0.0
#     netmask 255.255.255.0
#     broadcast 192.168.0.255
#     gateway 192.168.0.1

Enter your nameserver(s) and search directives in /etc/resolv.conf:

# editor /etc/resolv.conf

A simple example /etc/resolv.conf:

search example.com
nameserver 10.1.1.36
nameserver 192.168.9.100

Enter your system's host name (2 to 63 characters):

# echo DebianHostName > /etc/hostname

And a basic /etc/hosts with IPv6 support:

127.0.0.1 localhost
127.0.1.1 DebianHostName

# The following lines are desirable for IPv6 capable hosts
::1     ip6-localhost ip6-loopback
fe00::0 ip6-localnet
ff00::0 ip6-mcastprefix
ff02::1 ip6-allnodes
ff02::2 ip6-allrouters
ff02::3 ip6-allhosts

If you have multiple network cards, you should arrange the names of driver
modules in the /etc/modules file into the desired order. Then during boot, each
card will be associated with the interface name (eth0, eth1, etc.) that you
expect.

D.3.4.5. Cấu hình Apt

Debootstrap will have created a very basic /etc/apt/sources.list that will
allow installing additional packages. However, you may want to add some
additional sources, for example for source packages and security updates:

deb-src http://ftp.us.debian.org/debian bullseye main

deb http://security.debian.org/ bullseye-security main
deb-src http://security.debian.org/ bullseye-security main

Make sure to run apt update after you have made changes to the sources list.

D.3.4.6. Cấu hình miền địa phương và bàn phím

To configure your locale settings to use a language other than English, install
the locales support package and configure it. Currently the use of UTF-8
locales is recommended.

# apt install locales
# dpkg-reconfigure locales

To configure your keyboard (if needed):

# apt install console-setup
# dpkg-reconfigure keyboard-configuration

Ghi chú rằng bàn phím không thể được đặt trong khi nằm trong chroot, nhưng sẽ
được cấu hình cho lần khởi động lại kế tiếp.

D.3.5. Cài đặt hạt nhân

Nếu bạn dự định khởi động hệ thống này, bạn rất có thể muốn có một hạt nhân
(kernel) Linux và một bộ nạp khởi động (boot loader). Có thể nhận diện các hạt
nhân đóng gói sẵn bằng lệnh:

# apt search linux-image

Sau đó cài đặt gói hạt nhân đã chọn, dùng tên gói của nó.

# apt install linux-image-arch-etc

D.3.6. Thiết lập bộ nạp khởi động

To make your Debian GNU/Linux system bootable, set up your boot loader to load
the installed kernel with your new root partition. Note that debootstrap does
not install a boot loader, but you can use apt inside your Debian chroot to do
so.

Check info grub for instructions on setting up the bootloader. If you are
keeping the system you used to install Debian, just add an entry for the Debian
install to your existing grub2 grub.cfg.

Installing and setting up grub2 is as easy as:

# apt install grub-pc
# grub-install /dev/sda
# update-grub

The second command will install grub2 (in this case in the MBR of sda). The
last command will create a sane and working /boot/grub/grub.cfg.

Ghi chú rằng ở đây giả sử tập tin thiết bị /dev/sda đã được tạo. Có những
phương pháp khác để cài đặt grub2, nhưng chúng không nằm trong phạm vi của phụ
lục này.

D.3.7. Remote access: Installing SSH and setting up access

In case you can login to the system via console, you can skip this section. If
the system should be accessible via the network later on, you need to install
SSH and set up access.

# apt install ssh

Root login with password is disabled by default, so setting up access can be
done by setting a password and re-enable root login with password:

# passwd
# editor /etc/ssh/sshd_config

This is the option to be enabled:

PermitRootLogin yes

Access can also be set up by adding an ssh key to the root account:

# mkdir /root/.ssh
# cat << EOF > /root/.ssh/authorized_keys
ssh-rsa ....
EOF

Lastly, access can be set up by adding a non-root user and setting a password:

# adduser joe
# passwd joe

D.3.8. Đòn kết liễu

As mentioned earlier, the installed system will be very basic. If you would
like to make the system a bit more mature, there is an easy method to install
all packages with "standard" priority:

# tasksel install standard

Of course, you can also just use apt to install packages individually.

Sau khi cài đặt xong, có rất nhiều gói đã tải về nằm trong thư mục kho lưu /var
/cache/apt/archives/. Vậy bạn có dịp giải phóng thêm chỗ trống trên đĩa bằng
cách chạy lệnh « làm sạch »:

# apt clean

D.4. Cài đặt Debian GNU/Linux qua IP đường song song (PLIP)

Phần này diễn tả phương pháp cài đặt Debian GNU/Linux vào máy tính không có thẻ
Ethernet, chỉ có máy tính cổng ra từ xa được gắn nối bằng cáp Null-Modem (bộ
điều giải không có, cũng được gọi như là cáp Null-Printer, máy in không có).
Máy tính cổng ra nên được kết nối đến một mạng chứa máy nhân bản Debian (v.d.
có kết nối đến Internet).

Mẫu trong phụ lục này sẽ hiển thị phương pháp thiết lập sự kết nối PLIP, dùng
cổng ra được kết nối đến Internet qua sự kết nối quay số (ppp0). Nó sẽ dùng địa
chỉ IP 192.168.0.1 và 192.168.0.2 cho hai giao diện PLIP trên hệ thống đích và
hệ thống nguồn riêng từng cái (những địa chỉ này nên là không dùng bên trong
miền địa chỉ của mạng của bạn).

Sự kết nối PLIP được thiết lập trong khi cài đặt sẽ cũng sẵn sàng sau khi khởi
động lại vào hệ thống đã cài đặt (xem Chương 7, Khởi động vào hệ thống Debian
mới).

Trước khi bắt đầu, bạn cần phải xem cấu hình BIOS (địa chỉ cơ bản IO và IRQ) để
tìm cổng song song của hệ thống cả đích lẫn nguồn. Giá trị thường nhất là io=
0x378, irq=7.

D.4.1. Nhu cầu

  • Máy tính đích, được gọi như là target (đích), vào đó Debian sẽ được cài
    đặt.

  • Vật chứa phần mềm cài đặt hệ thống; xem Phần 2.4, "Vật chứa trình cài đặt".

  • Máy tính khác được kết nối đến Internet, được gọi như là source (nguồn), mà
    sẽ hoạt động là cổng ra.

  • Một cáp Null-Modem DB-25. Xem tài liệu cài đặt PLIP Thế Nào
    PLIP-Install-HOWTO để tìm thông tin thêm về cáp kiểu này, gồm hướng dẫn về
    cách tạo điều riêng.

D.4.2. Thiết lập nguồn

Theo đây có một tập lệnh trình bao là mẫu đơn giản về phương pháp cấu hình máy
tính nguồn như là cổng ra Internet dùng ppp0.

#!/bin/sh

# Gỡ bỏ các mô-đun đang chạy ra hạt nhân để tránh xung đột,
# cũng để tự cấu hình lại.
modprobe -r lp parport_pc
modprobe parport_pc io=0x378 irq=7
modprobe plip

# Cấu hình giao diện PLIP (chọn « plip0 », xem « dmesg | grep plip »)
ifconfig plip0 192.168.0.2 pointopoint 192.168.0.1 netmask 255.255.255.255 up

# Cấu hình cổng ra
modprobe iptable_nat
iptables -t nat -A POSTROUTING -o ppp0 -j MASQUERADE
echo 1 > /proc/sys/net/ipv4/ip_forward

D.4.3. Cài đặt đích

Khởi động vật chứa cài đặt. Cần phải chạy tiến trình cài đặt bằng chế độ nhà
chuyên môn: hãy nhập expert vào dấu nhắc khởi động. Nếu bạn cần đặt tham số cho
mô-đun hạt nhân, cũng cần phải làm như thế tại dấu nhắc khởi động. Chẳng hạn,
để khởi động trình cài đặt và đặt giá trị cho những tùy chọn "io" và "irq" cho
mô-đun partport_pc, hãy nhập dãy dưới vào dấu nhắc khởi động:

expert parport_pc.io=0x378 parport_pc.irq=7

Bên dưới có những trả lời cần nhập trong những giai đoạn khác nhau của tiến
trình cài đặt.

 1. Load installer components from installation media

    Chọn mục plip-modules trong danh sách: nó sẽ làm cho các trình điều khiển
    PLIP sẵn sàng cho hệ thống cài đặt.

 2. Phát hiện phần cứng mạng

      □ Nếu máy đích có phải chứa thẻ mạng, trình cài đặt sẽ hiển thị danh sách
        các mô-đun trình điều khiển cho những thẻ được phát hiện. Nếu bạn muốn
        ép buộc debian-installer dùng PLIP thay thế, bạn cần phải bỏ chọn mọi
        mô-đun trình điều khiển đã liệt kê. Tất nhiên, nếu máy đích không có
        thẻ mạng, trình cài đặt sẽ không hiển thị danh sách này.

      □ Vì chưa phát hiện thẻ mạng, trình cài đặt sẽ nhắc bạn chọn trình điều
        khiển mạng trong danh sách. Hãy chọn mô-đun plip.

 3. Cấu hình mạng

      □ Tự động cấu hình mạng bằng DHCP không? : Không

      □ Địa chỉ IP: 192.168.0.1

      □ Địa chỉ điểm-đến-điểm: 192.168.0.2

      □ Các địa chỉ của máy phục vụ tên: bạn có khả năng nhập cùng những địa
        chỉ được dùng trên máy tính nguồn (xem tập tin cấu hình /etc/
        resolv.conf)

D.5. Cài đặt Debian GNU/Linux dùng PPP qua Ethernet (PPPoE)

Trong một số quốc gia, PPP qua Ethernet (PPPoE) là một giao thức thường dùng
cho kết nối dải sóng rộng (ADSL hay cáp) tới nhà cung cấp dịch vụ Internet
(ISP). Chức năng thiết lập kết nối mạng dùng PPPoE không phải được hỗ trợ theo
mặc định trong trình cài đặt, nhưng dễ làm cho hoạt động. Phần này diễn tả
phương pháp.

Sự kết nối PPPoE được thiết lập trong khi cài đặt sẽ cũng sẵn sàng sau khi khởi
động lại vào hệ thống đã cài đặt (xem Chương 7, Khởi động vào hệ thống Debian
mới).

To have the option of setting up and using PPPoE during the installation, you
will need to install using one of the CD-ROM/DVD images that are available. It
is not supported for other installation methods (e.g. netboot).

Cài đặt qua PPPoE phần lớn là tương tự với các tiến trình cài đặt khác. Những
bước sau diễn tả các sự khác.

  • Khởi chạy trình cài đặt, dùng tham số khởi động modules=ppp-udeb. ^[25].
    Tham số này sẽ đảm bảo tự động nạp và chạy thành phần cần thiết để thiết
    lập PPPoE (ppp-udeb).

  • Hãy theo những bước đầu tiên bình thường của tiến trình cài đặt (chọn ngôn
    ngữ, quốc gia và bàn phím; nạp thêm thành phần cài đặt^[26]).

  • Bước tiếp theo là phát hiện phần cứng chạy mạng, để nhận diện bo mạch
    Ethernet có trong hệ thống.

  • Sau đó, tiến trình thiết lập PPPoE thật được khởi chạy. Trình cài đặt sẽ
    thăm dò tất cả các giao diện Ethernet đã phát hiện để thử tìm bộ tập trung
    PPPoE (một kiểu trình phục vụ mà quản lý các kết nối PPPoE).

    Có lẽ không tìm thấy bộ tập trung lần thử đầu tiên. Trường hợp này có thể
    xảy ra đôi khi trên mạng chạy chậm hay mạng rất bận, hay đối với trình phục
    vụ bị lỗi. Trong phần lớn trường hợp, lần thử thứ hai để phát hiện bộ tập
    trung sẽ chạy thành công; để thử lại, chọn mục Cấu hình và khởi chạy một
    kết nối PPPoE trong trình đơn chính của trình cài đặt.

  • Một khi tìm bộ tập trung, người dùng sẽ được nhắc gõ thông tin đăng nhập
    (tên người dùng và mật khẩu PPPoE).

  • Ở điểm thời này, tiến trình cài đặt sẽ sử dụng thông tin đã cung cấp để
    thiết lập kết nối PPPoE. Cung cấp thông tin đúng thì kết nối PPPoE nên được
    cấu hình và trình cài đặt nên có khả năng sử dụng nó để kết nối tới
    Internet và lấy các gói (nếu cần). Thông tin đăng nhập sai hay gặp lỗi thì
    tiến trình cài đặt sẽ bị dừng chạy, nhưng có thể thử lại tiến trình cấu
    hình bằng cách chọn mục trình đơn Cấu hình và khởi chạy một kết nối PPPoE.


━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

^[23] Con chuột nối tiếp thường có đầu kẹp 9 rỗ hình D; con chuột mạch nối có
đầu kẹp 8 đầu hình tròn, khác với đầu kẹp 6 đầu hình tròn của con chuột PS/2
hay đầu kẹp 4 đầu hình tròn của con chuột ADB.

^[24] Những công cụ này gồm có các tiện ích lõi của GNU và lệnh như sed, grep, 
tar và gzip.

^[25] Xem Phần 5.1.7, "Màn hình khởi động" để tìm thông tin về phương pháp thêm
một tham số khởi động.

^[26] Thành phần ppp-udeb được nạp như một của những thành phần thêm trong bước
này. Muốn cài đặt ở mức ưu tiên vừa hay thấp (chế độ cấp cao) thì bạn cũng có
thể tự chọn ppp-udeb thay vào nhập tham số "modules" tại dấu nhắc khởi động.

Phụ lục E. Linh tinh quản trị

Mục lục

E.1. Về tài liệu này
E.2. Cách đóng góp cho tài liệu này
E.3. Đóng góp chính
E.4. Lời báo nhận thương hiệu

E.1. Về tài liệu này

Sổ tay này đã được tạo dành cho trình cài đặt của bản phát hành Debian tên
Sarge, dựa vào sổ tay cài đặt Woody bằng đĩa mềm khởi động, mà lần lượt dựa vào
những sổ tay cài đặt Debian trước, cũng vào sổ tay phân phối Progeny mà được
phát hành với điều kiện của Giấy Phép Công Cộng GNU (GPL) trong năm 2003.

Tài liệu này được viết bằng mã định dạng XML kiểu DocBook. Các dạng thức xuất
được tạo ra bởi một số chương trình khác nhau, dùng thông tin bắt nguồn từ hai
gói docbook-xml và docbook-xsl.

Để tăng lên khả năng bảo trì của tài liệu này, chúng tôi dùng một số tính năng
XML, như thực thể và thuộc tính tạo hồ sơ riêng. Những điều này đáp ứng một mục
đích giống như mục đích của biến và bộ điều kiện trong ngôn ngữ lập trình. Mã
nguồn XML của tài liệu này chứa thông tin dành cho mỗi kiến trúc riêng -- những
thuộc tính tạo hồ sơ riêng được dùng để đặt một số đoạn nào đó là đặc trưng cho
kiến trúc.

Bản dịch: Nhóm Việt hoá phần mềm tự do <vi-VN@googlegroups.com>.

E.2. Cách đóng góp cho tài liệu này

Nếu bạn gặp khó khăn hoặc muốn đề nghị gì về tài liệu này, vui lòng đệ trình nó
dạng báo cáo lỗi đối với gói installation-guide (sổ tay cài đặt). Xem gói
reportbug (thông báo lỗi) hoặc đọc tài liệu hướng dẫn trực tuyến tại Hệ Thống
Theo Dõi Lỗi Debian. Khuyên bạn cũng kiểm tra các lỗi còn mở đối với
installation-guide xem nếu vấn đề của bạn đã được thông báo chưa. Nếu có, mời
bạn gửi thông tin làm chứng thêm hay thông tin giúp ích cho <SỐ 
@bugs.debian.org>, mà SỐ là số hiệu của lỗi đã được thông báo.

Better yet, get a copy of the DocBook source for this document, and produce
patches against it. The DocBook source can be found at the installation-guide
project on salsa. If you're not familiar with DocBook, don't worry: there is a
simple cheatsheet in the manuals directory that will get you started. It's like
html, but oriented towards the meaning of the text rather than the
presentation. Patches submitted to the debian-boot mailing list (see below) are
welcomed. For instructions on how to check out the sources via git, see README
from the source root directory.

Xin hãy bạn đừng liên lạc trực tiếp với tác giả của tài liệu này. Có một hộp
thư chung thảo luận đặc biệt cho debian-installer, gồm thảo luận sổ tay này.
Hộp đó là <debian-boot@lists.debian.org>. Có chỉ dẫn về đăng ký với hộp đó trên
trang Đăng ký với hộp thư chung Debian, hoặc bạn có thể duyệt qua Kho lưu hộp
thư chung Debian trực tuyến.

E.3. Đóng góp chính

Tài liệu này được viết gốc bởi (tên họ) Bruce Perens, Sven Rudolph, Igor
Grobman, James Treacy và Adam Di Carlo. Sebastian Ley đã viết Tài liệu Cài đặt
Như Thế Nào.

Miroslav Kuře đã diễn tả trong tài liệu phần lớn các chức năng trong bản cài
đặt Debian phiên bản Sarge. Frans Pop là biên tập viên chính và quản trị phát
hành trong khi phát hành phiên bản Etch, Lenny và Squeeze.

Rất nhiều người dùng và nhà phát triển Debian đã đóng góp cho tài liệu này.
Chúng tôi cám ơn đặc biệt Michael Schmitz (hỗ trợ m68k), Frank Neumann (tác giả
gốc của sổ tay cài đặt vào Amiga), Arto Astala, Eric Delaunay/Ben Collins
(thông tin về SPARC), Tapio Lehtonen, và Stéphane Bortzmeyer (rất nhiều lời sửa
đổi), và Pascal Le Bail (thông tin hữu hiệu về cách khởi động từ thanh bộ nhớ
USB).

Chúng tôi đã tìm thấy đoạn và thông tin rất hữu dụng trong tài liệu khởi động
qua mạng Thế Nào (HOWTO) của Jim Mintha (không có địa chỉ Mạng), Hỏi Đáp Debian
, Hỏi Đáp Linux/m68k, Hỏi Đáp Linux cho bộ xử lý SPARC, Hỏi Đáp Linux/Alpha,
trong nhiều điều khác nhau. Mọi người nhờ những nhà bảo trì các nguồn thông tin
phong phú này là sẵn sàng tự do.

Tiết đoạn của sổ tay này về cách cài đặt kiểu chroot (Phần D.3, "Cài đặt Debian
GNU/Linux từ hệ thống UNIX/Linux") bắt nguồn một phần từ tài liệu Tác quyền ©
Karsten M. Self.

Tiết đoạn của sổ tay này về phương pháp cài đặt qua « plip » (Phần D.4, "Cài
đặt Debian GNU/Linux qua IP đường song song (PLIP)") dựa vào tài liệu cài đặt
PLIP thế nào PLIP-Install-HOWTO của Gilles Lamiral.

E.4. Lời báo nhận thương hiệu

Mọi thương hiệu do nhà chủ thương hiệu riêng từng sở hữu.

Phụ lục F. Giấy phép Công cộng GNU

Ghi chú

This is an unofficial translation of the GNU General Public License into
Vietnamese. It was not published by the Free Software Foundation, and does not
legally state the distribution terms for software that uses the GNU GPL -- only
the original English text of the GNU GPL does that. However, we hope that this
translation will help Vietnamese speakers to better understand the GNU GPL.

Đây là một bản dịch tiếng Việt không chính thức của Giấy Phép Công Cộng GNU
(GPL). Nó không được xuất bản bởi Tổ Chức Phần Mềm Tự Do, và không tuyên bố hợp
pháp điều kiện phát hành phần mềm sử dụng GPL -- chỉ có đoạn tiếng Anh gốc của
GPL là hợp pháp. Tuy nhiên, chúng tôi mong muốn bản dịch này sẽ giúp đỡ người
nói tiếng Việt hiểu khá hơn GPL của GNU.

Phiên bản 2, Tháng 06/1991

Bản quyền © năm 1989, 1991 của Tổ chức Phần mềm Tự do.
51 Franklin Street, Fifth Floor, Boston, MA  02110-1301  USA (Mỹ)

Mọi người đều đuợc quyền sao chép và phân phối nguyên văn
tài liệu giấy phép này, nhưng không được phép thay đổi nó.

Lời mở đầu

Giấy phép sử dụng của hầu hết các phần mềm được thiết kế để bạn không được tự
do chia sẻ và thay đổi phần mềm đó. Trái lại, Giấy phép Công cộng GNU dự định
đảm bảo cho bạn được tự do chia sẻ và thay đổi phần mềm một cách tự do, và đảm
bảo phần mềm tự do cho mọi người sử dụng. Giấy phép Công cộng GNU này áp dụng
cho hầu hết những phần mềm của Tổ chức Phần mềm Tự do, và cho bất kỳ chương
trình máy tính nào khác mà tác giả của nó cam kết sử dụng nó. (Một số phần mềm
khác của Tổ chức Phần mềm Tự do dùng Giấy phép Thư viện Công cộng GNU thay
thế.) Bạn cũng có thể áp dụng giấy phép này cho các chương trình do bạn làm ra.

Khi chúng tôi nói về phần mềm tự do, chúng tôi đề cập đến sự tự do sử dụng, chứ
không phải là giá cả. Giấy phép Công cộng GNU của chúng tôi được thiết kế để
đảm bảo bạn có quyền tự do phát hành bản sao của phần mềm tự do (và thu tiền
dịch vụ này nếu muốn), nhận mã nguồn hoặc có khả năng lấy nó nếu bạn muốn, bạn
có thể thay đổi phần mềm hay sử dụng bất kỳ đoạn nào của nó trong chương trình
tự do mới; và để giúp bạn biết rõ là bạn có thể làm những điều này.

Để bảo vệ quyền lợi của bạn, chúng tôi cần đưa ra những hạn chế để cấm bất cứ
ai phủ nhận bạn có những quyền này hay đòi hỏi bạn từ bỏ nó. Những sự hạn chế
này được hiểu là một số trách nhiệm nhất thiết của bạn nếu bạn phát hành bản
sao của phần mềm hoặc sửa đổi nó.

Chẳng hạn, nếu bạn phát hành bản sao của chương trình như vậy, dù là cho không
hay thu tiền, bạn phải trao cho người nhận tất cả những quyền bạn có. Bạn phải
chắc chắn là họ cũng nhận được hay có thể lấy mã nguồn. Và bạn cũng phải cho họ
biết những điều kiện này, để họ biết những quyền của họ.

Chúng tôi bảo vệ các quyền của bạn qua hai bước: (1) bản quyền tác giả của phần
mềm và (2) trao cho bạn giấy phép này để bạn có quyền hợp pháp sao chép, phát
hành và/hay sửa đổi phần mềm.

Hơn nữa, để bảo vệ tác giả và chính chúng tôi, chúng tôi muốn chắc chắn là mọi
người hiểu rằng phần mềm tự do này không có bảo hành. Nếu phần mềm bị sửa đổi
bởi người khác và được phân phát tiếp, chúng tôi muốn người nhận biết rằng cái
mà họ có đó không phải là bản gốc, vì vậy, bất kỳ lỗi nào do người khác gây ra
sẽ không làm mang tiếng đến tác giả gốc.

Cuối cùng, chương trình tự do nào cũng luôn bị đe dọa bởi bằng sáng chế phần
mềm. Chúng tôi muốn tránh nguy cơ việc những người phát hành lại chương trình
tự do sẽ giành bằng sáng chế riêng, sở hữu chương trình đó. Để ngăn ngừa điều
này, chúng tôi đã làm rõ rằng bằng sáng chế phải cấp cho mọi người sử dụng tự
do, hoặc không cấp cho bất kỳ ai hết.

Sau đây là những điều kiện và điều khoản chính xác đối với việc sao chép, phát
hành và sửa đổi.

GIẤY PHÉP CÔNG CỘNG GNU

ĐIỀU KIỆN SAO CHÉP, PHÁT HÀNH VÀ SỬA ĐỔI

0. Giấy phép này áp dụng cho bất kỳ chương trình nào hay sản phẩm nào khác có
thông báo được chèn vào bởi người giữ tác quyền nói rằng nó có thể được phát
hành theo các điều khoản của GPL này. Cụm từ "Chương trình" dưới đây có nghĩa
là bất kỳ chương trình máy tính hay sản phẩm như vậy, và "sản phẩm dựa trên
Chương trình" có nghĩa là Chương trình hay bất kỳ sản phẩm nào bắt nguồn từ nó
dưới luật bản quyền: tức là, sản phẩm chứa Chương trình đó hay một phần của nó,
hoặc đúng nguyên văn hoặc với sự sửa đổi và/hoặc được dịch sang một ngôn ngữ
khác. (Kể từ câu này, việc dịch ngôn ngữ được bao gồm vô hạn trong thuật ngữ "
sự sửa đổi".) Người được cấp Giấy phép được gọi là "bạn".

Những hoạt động khác ngoài sự sao chép, phát hành và sửa đổi không được kiểm
soát bởi Giấy phép này; nó ở ngoài phạm vi của giấy phép này. Hành động chạy
Chương trình không bị hạn chế, và dữ liệu xuất từ Chương trình chỉ bị khống chế
nếu nội dung của nó tạo thành một sản phẩm dựa vào Chương trình (không phụ
thuộc vào việc vận hành Chương trình). Điều đó đúng hay không phụ thuộc vào
điều mà Chương trình tạo ra.

1.Bạn có quyền sao chép và phát hành bản sao đúng nguyên văn của mã nguồn của
Chương trình như bạn đã nhận nó, bằng bất kỳ cách nào, miễn là bạn công bố rõ
ràng và thích đáng trên mỗi bản sao một thông báo tác quyền thích hợp và miễn
trừ bảo hành; giữ nguyên vẹn mọi thông báo liên quan đến Giấy phép này và miễn
trừ bảo hành; và đưa cho những người nhận Chương trình khác một bản sao của
Giấy phép cùng với Chương trình.

Bạn có thể thu phí cho việc gởi bản sao, và bạn có thể tùy ý đề nghị cung cấp
dịch vụ bảo hành có thu phí.

2.Bạn có quyền sửa đổi bản sao của mình hay của Chương trình hoặc đoạn nào của
nó để tạo một sản phẩm dựa vào Chương trình, và sao chép và phát hành sự sửa
đổi hay sản phẩm như vậy theo điều khoản của phần 1 nêu trên, miễn là bạn cũng
tuân theo tất cả các điều kiện sau:

 a. Bạn phải làm cho mỗi tập tin đã sửa đổi chứa thông báo dễ thấy nói rằng bạn
    đã thay đổi tập tin đó và hiển thị ngày tháng của sự thay đổi nào.

 b. Bạn phải làm cho sản phẩm mà bạn phát hành hay xuất bản, toàn bộ hay một
    phần có chứa hay bắt nguồn từ Chương trình hay các phần của nó, được cấp
    toàn bộ miễn phí cho người khác với điều kiện của Giấy phép này.

 c. Nếu chương trình bị sửa đổi có đọc tương tác lệnh khi chạy, bạn phải làm
    nó, khi được khởi chạy bằng cách thông thường nhất qua tương tác như vậy,
    in ra hay hiển thị một lời loan báo gồm có thông báo quyền tác giả thích
    hợp và thông báo không có bảo hành (nếu không, nói rằng bạn cung cấp việc
    bảo hành) và rằng người dùng có quyền phát hành lại chương trình đó với
    những điều kiện này, và thông tin cho người dùng biết cách xem một bản sao
    của Giấy phép này. (Ngoại lệ: nếu Chương trình chính nó là tương tác nhưng
    vốn không in ra lời loan báo như vậy, sản phẩm của bạn dựa vào Chương trình
    không bắt buộc phải in ra lời loan báo như vậy).

Những điều kiện này áp dụng cho toàn bộ sản phẩm bị sửa đổi. Nếu có thể nhận ra
phần riêng của sản phẩm đó không bắt nguồn từ Chương trình, và các phần này có
thể được xem một cách hợp lý là sản phẩm riêng và không phụ thuộc, thì Giấy
phép này, và các điều kiện của nó, không áp dụng cho những phần riêng đó khi
bạn phát hành chúng là sản phẩm riêng. Tuy nhiên, khi bạn phát hành những phần
đó cùng với toàn bộ sản phẩm dựa vào Chương trình, sự phát hành toàn bộ này
phải tuân theo điều kiện của Giấy phép này, cung cấp cho mọi người có quyền bao
trùm toàn bộ sản phẩm, bao quát tất cả mọi phần của nó, bất kể ai đã tạo nó.

Như thế thì phần này không đự định yêu cầu quyền hay không thừa nhận quyền của
bạn về sản phẩm mà toàn bộ là do bạn tạo ra; mà phần này định nói về quyền hạn
trong điều khiển sự phát hành sản phẩm bắt nguồn từ hay sản phẩm hợp tác tập
thể dựa vào Chương trình.

Hơn nữa, việc chứa các sản phẩm khác không dựa vào Chương trình cùng với Chương
trình (hay với sản phẩm dựa vào Chương trình) trên thiết bị lưu trữ hay vật
phát hành không nằm trong phạm vi của Giấy phép này.

3. Bạn có quyền sao chép và phát hành Chương trình (hoặc sản phẩm dựa vào nó,
dưới Phần 2) trong dạng thức mã đối tượng hay tập tin chạy được với điều kiện
của Phần 1 và 2 bên trên, miễn là bạn cũng làm một trong số những việc sau đây:

 a. Kèm theo toàn bộ mã nguồn tương ứng mà máy có thể đọc được, được phát hành
    với điều kiện của Phần 1 và 2 bên trên, trên thiết bị lưu trữ thường dùng
    để trao đổi phần mềm; hay

 b. Kèm theo lời mời ghi trên giấy, hợp lệ trong ít nhất ba năm sau, cung cấp
    cho bất cứ người khác nào, với giá không lớn hơn giá cần thiết để phân phát
    các mã nguồn đó, một bản sao, mà máy có thể đọc được, của toàn bộ mã nguồn
    tương ứng, để được phát hành với điều kiện của Phần 1 và 2 bên trên, trên
    thiết bị lưu trữ thường dùng để trao đổi phần mềm; hay

 c. Kèm theo các thông tin bạn đã nhận về lời mời phát hành mã nguồn tương ứng.
    (Tùy chọn này chỉ được phép khi phát hành không thương mại, và chỉ khi bạn
    đã nhận chương trình trong dạng thức mã đối tượng hay tập tin chạy được
    cùng với lời mời như vậy, tùy theo Phần phụ (b) trên).

Mã nguồn của sản phẩm có nghĩa là dạng thức sản phẩm được ưa thích khi sửa đổi
nó. Đối với sản phẩm là tập tin chạy được, toàn bộ mã nguồn có nghĩa là tất cả
các mã nguồn cho mọi mô-đun đã chứa, cộng với bất cứ tập tin xác định giao diện
tương ứng, cộng với các tập lệnh được dùng để điều khiển tiến trình biên dịch
và cài đặt tập tin chạy được. Tuy nhiên, ngoại lệ đặc biệt là mã nguồn được
phát hành không cần phải bao gồm những gì được phát hành bình thường (trong
dạng thức hoặc nguồn hoặc nhị phân) với các thành phần chính (bộ biên dịch, hạt
nhân v.v.) của hệ điều hành nơi tập tin chạy được hoạt động, trừ khi thành phần
kèm theo cần thiết để chạy tập tin.

Nếu việc phát hành mã chạy được hay mã đối tượng được làm bằng cách trao truy
cập sao chép từ một nơi đã xác định, thì việc trao các truy cập sao chép tương
đương đến mã nguồn đó từ cùng nơi đó được tính là sự phát hành mã nguồn, mặc dù
người khác không bắt buộc phải sao chép mã nguồn cùng với mã đối tượng.

4. Không cho phép bạn sao chép, sửa đổi, cấp giấy phép phụ hay phát hành Chương
trình, trừ với điều kiện được diễn tả dứt khoát trong Giấy phép này. Bất kỳ sự
cố gắng nào trong việc sao chép, sửa đổi, cấp giấy phép phụ hay phát hành
Chương trình bằng cách khác bị bãi bỏ, và sẽ kết thúc các quyền của bạn dưới
Giấy phép này. Tuy nhiên, người khác đã nhận bản sao hay quyền từ bạn dưới Giấy
phép này sẽ không bị ảnh hưởng, miễn là họ tiếp tục tuân theo hoàn toàn.

5. Bạn không bắt buộc phải chấp nhận Giấy phép này, vì bạn chưa ký tên vào nó.
Tuy nhiên, không có gì khác cho phép bạn sửa đổi hay phát hành Chương trình hay
sản phẩm bắt nguồn từ nó. Các hành động này bị pháp luật cấm nếu bạn không chấp
nhận Giấy phép này. Vì vậy, bằng cách sửa đổi hay phát hành Chương trình (hay
sản phẩm dựa vào nó), bạn ngụ ý sự chấp nhận Giấy phép này để làm như thế, gồm
mọi điều kiện sao chép, phát hành hay sửa đổi Chương trình hay sản phẩm dựa vào
nó.

6. Mỗi lần bạn phát hành lại Chương trình (hay sản phẩm dựa vào nó), người nhận
có thể nhận tự động một giấy phép từ người cấp gốc, để sao chép, phát hành hay
sửa đổi Chương trình với điều kiện này. Không cho phép bạn hạn chế thêm cách
người dùng sử dụng các quyền đã được cấp trong Giấy phép này. Bạn cũng không
phải chịu trách nhiệm về việc ép buộc người khác tuân theo điều kiện của Giấy
phép này.

7. Nếu, do kết quả của quyết định của toà án hay các cáo buộc vi phạm bằng sáng
chế hay vì bất cứ lý do nào (không bị giới hạn trong vấn đề bằng sáng chế), bạn
bị ép buộc chấp nhận điều kiện (hoặc vì quyết định của toà án, sự thoả thuận
hoặc cách khác nào) mà mâu thuẫn điều kiện của Giấy phép này, trường hợp này
không miễn cho bạn không phải thỏa mãn điều kiện của Giấy phép này. Nếu bạn
không thể phát hành bằng cách thỏa mãn đồng thời các giao ước của bạn dưới Giấy
phép này và bất kỳ giao ước thích hợp khác, thì kết quả là không cho phép bạn
phát hành Chương trình bằng cách nào cả. Lấy thí dụ, nếu một bằng sáng chế nào
đó không cho phép sự phát hành lại Chương trình một cách miễn tiền bản quyền
phát minh cho mọi người nhận bản sao từ bạn một cách trực tiếp hay gián tiếp,
thì cách duy nhất bạn có thể thỏa cả bằng đó và Giấy phép này là hoàn toàn
không phát hành Chương trình.

Nếu đoạn nào trong phần này được quyết định là không hợp lệ hay không thể được
ép buộc trong bất kỳ trường hợp riêng nào, đoạn còn lại dự định áp dụng được,
và toàn bộ phần dự định áp dụng trong các trường hợp khác.

Không phải là mục đích của phần này để xúi giục bạn vi phạm bằng sáng chế nào
hay lời yêu sách quyền tài sản khác, hoặc để không thừa nhận sự hợp lệ của lời
yêu sách như vậy; phần này có mục đích duy nhất là bảo vệ tình trạng nguyên vẹn
của hệ thống phát hành phần mềm tự do, mà được thực thi bởi các áp dụng giấy
phép công cộng. Nhiều người đã đóng góp rộng lượng cho một phạm vị rộng của các
phần mềm được phát hành qua hệ thống đó, nhờ sự thực thi nền bỉ hệ thống đó:
tùy tác giả / người tặng quyết định nếu họ muốn phát hành phần mềm qua hệ thống
khác nào, và người được cấp Giấy phép không thể điều khiển cách quyết định đó.

Phần này dự định diễn tả rõ ràng hoàn toàn kết quả được hiểu của phần còn lại
của Giấy phép này.

8. Nếu sự phát hành và/hay cách sử dụng Chương trình bị hạn chế trong một số
quốc gia nào đó, hoặc bởi bằng sáng chế hoặc bởi giao diện có bản quyền tác
giả, người giữ tác quyền gốc đã đặt Chương trình dưới Giấy phép này có khả năng
thêm sự hạn chế phát hành địa lý riêng loại trừ những quốc gia đó, để cho phép
phát hành chỉ trong hay giữa các quốc gia không bị loại trừ như thế. Trong
trường hợp như vậy, Giấy phép này hợp nhất sự hạn chế đó như là nó được ghi
trong thân của Giấy phép này.

9. Tổ chức Phần mềm Tự do có thể xuất bản phiên bản đã sửa đổi và/hay mới của
Giấy phép Công cộng GNU. Phiên bản mới như vậy sẽ có tinh thần tương tự với
phiên bản hiện thời, nhưng có thể khác biệt trong chi tiết để giải quyết vấn đề
mới. Mỗi phiên bản được gán một số hiệu phân biệt phiên bản đó. Nếu Chương
trình xác định số phiên bản riêng của Giấy phép này áp dụng cho nó, "và bất kỳ
phiên bản sau nào", bạn có tùy chọn thỏa điều kiện hoặc của phiên bản đó, hoặc
của bất kỳ phiên bản sau nào được xuất bản bởi Tổ chức Phần mềm Tự do. Nếu
Chương trình không xác định số phiên bản riêng của Giấy phép này, bạn có khả
năng chọn bất kỳ phiên bản nào của Giấy phép này đã được xuất bản bởi Tổ chức
Phần mềm Tự do.

10. Nếu bạn muốn hợp nhất phần nào của Chương trình vào chương trình tự do khác
có điều kiện phát hành khác GPL, hãy xin phép tác giả. Đối với phần mềm có bản
quyền tác giả của Tổ chức Phần mềm Tự do, hãy viết thư cho Tổ chức Phần mềm Tự
do : thỉnh thoảng chúng tôi cho phép ngoại lệ trong trường hợp này. Quyết định
của chúng tôi sẽ được hướng dẫn bởi hai mục đích là sự bảo tồn trạng thái tự do
của mọi điều bắt nguồn từ phần mềm tự do của chúng tôi, và sự đẩy mạnh sự chia
sẻ và sử dụng lại phần mềm một cách chung.

KHÔNG BẢO HÀNH

11. VÌ CHƯƠNG TRÌNH ĐÃ ĐƯỢC CẤP PHÉP MIỄN PHÍ, KHÔNG CÓ BẢO HÀNH ĐỐI VỚI CHƯƠNG
TRÌNH NÀY, VỚI ĐIỀU KIỆN ĐƯỢC PHÁP LUẬT CHO PHÉP. TRỪ KHI XÁC ĐỊNH KHÁC BẰNG
TÀI LIỆU GIẤY TỜ, CÁC NGƯỜI GIỮ BẢN QUYỀN TÁC GIẢ VÀ/HAY NGƯỜI KHÁC CUNG CẤP
CHƯƠNG TRÌNH NÀY "NHƯ THẾ", KHÔNG CÓ BẢO HÀNH GÌ CẢ, KHÔNG PHÁT BIỂU NÓ, CŨNG
KHÔNG NGỤ Ý NÓ, GỒM, NHƯNG KHÔNG BỊ HẠN CHẾ BỞI, SỰ BẢO ĐẢM ĐÃ NGỤ Ý TÌNH TRẠNG
CÓ THỂ BÁN ĐƯỢC VÀ SỰ THÍCH HỢP VỚI MỘT MỤC ĐÍCH DỨT KHOÁT. MỌI RỦI RO VỀ CHẤT
LƯỢNG, ĐỘ CHÍNH XÁC VÀ HIỆU SUẤT CỦA CHƯƠNG TRÌNH NÀY BẠN SẼ TỰ CHỊU. NẾU
CHƯƠNG TRÌNH NÀY GÂY RA HƯ HỎNG, BẠN GÁNH VÁC HOÀN TOÀN TRÁCH NGHIỆM TRẢ TIỀN
DỊCH VỤ GIÚP ĐỠ HAY SỪA CHỮA.

12. KHÔNG CÓ TRƯỜNG HỢP NÀO (TRỪ KHI PHÁP LUẬT YÊU CẦU HAY KHI ĐƯỢC THỎA THUẬN
BẰNG TÀI LIỆU GIẤY TỜ) MÀ BẤT KỲ NGƯỜI GIỮ BẢN QUYỀN TÁC GIẢ NÀO, HAY BẤT KỲ
NGƯỜI KHÁC NÀO CÓ THỂ SỬA ĐỔI VÀ/HAY PHÁT HÀNH LẠI CHƯƠNG TRÌNH NHƯ ĐƯỢC PHÉP
BÊN TRÊN, SẼ CÓ TRÁCH NHIỆM VỀ PHÁP LÝ BỒI THƯỜNG, GỒM BẤT KỲ BỒI THƯỜNG KIỂU
TỔNG QUÁT, ĐẶC BIỆT, NGẪU NHIÊN HAY DO HẬU QUẢ DO SỬ DỤNG HAY SỰ KHÔNG CÓ KHẢ
NĂNG SỬ DỤNG CHƯƠNG TRÌNH NÀY (GỒM NHƯNG KHÔNG PHẢI BỊ HẠN THẾ BỞI SỰ MẤT DỮ
LIỆU HAY DỮ LIỆU BỊ LÀM CHO KHÔNG CHÍNH XÁC HAY CÁC MẤT MÁT CỦA BẠN HAY NGƯỜI
KHÁC HAY SỰ KHÔNG HOẠT ĐỘNG ĐƯỢC CHƯƠNG TRÌNH NÀY VỚI CHƯƠNG TRÌNH KHÁC), THẬM
CHÍ NẾU BẠN HAY NGƯỜI KHÁC ĐÃ ĐƯỢC BÁO BIẾT CÓ KHẢ NĂNG THIỆT HẠI NHƯ VẬY.

KẾT THÚC CỦA ĐIỀU KIỆN

Cách áp dụng điều kiện này cho các chương trình mới của bạn

Nếu bạn phát triển chương trình mới, và muốn làm cho nó có ích nhiều nhất cho
mọi người, phương pháp tốt nhất đạt được mục đích này là làm cho nó là phần mềm
tự do mà mọi người có thể phát hành lại và sửa đổi với điều kiện này.

Để làm như thế, hãy đính các thông báo theo đây kèm chương trình. Cách an toàn
nhất là đính chúng vào đầu của mỗi tập tin mã nguồn, để thể hiện cách thông báo
không có bảo hành một cách hữu hiệu nhất; và mỗi tập tin nên chứa ít nhất đoạn 
"Tác quyền" và thông tin chỉ tới nơi tìm được thông báo đầy đủ.

một đoạn ghi tên chương trình và mô tả ngắn.
Tác quyền © năm  tên của tác giả

Chương trình này là phần mềm tự do; bạn có thể phát hành lại nó
và/hoặc sửa đổi nó với điều kiện của Giấy phép Công cộng GNU
như được xuất bản bởi Tổ chức Phần mềm Tự do; hoặc phiên bản 2
của Giấy phép này, hoặc (tùy chọn) bất kỳ phiên bản sau nào.

Chương trình này được phát hành vì mong muốn nó có ích, nhưng
KHÔNG CÓ BẢO HÀNH GÌ CẢ, THẬM CHÍ KHÔNG CÓ BẢO ĐẢM ĐƯỢC NGỤ Ý
KHẢ NĂNG BÁN HAY KHẢ NĂNG LÀM ĐƯỢC VIỆC DỨT KHOÁT.
Xem Giấy phép Công cộng GNU để biết thêm chi tiết.

Bạn đã nhận một bản sao của Giấy phép Công cộng GNU
cùng với chương trình này; nếu không, hãy viết thư cho
Tổ chức Phần mềm Tự do,
Free Software Foundation, Inc.,
 51 Franklin Street, Fifth Floor,
Boston, MA  02110-1301, USA.

Bạn cũng nên thêm thông tin về cách liên lạc với bạn bằng cả thư bưu điện lẫn
thư điện tử.

Nếu chương trình có khả năng tương tác, hãy làm cho nó xuất thông báo ngắn như
sau khi nó khởi chạy trong chế độ tương tác (hãy thay thế mỗi đoạn nằm trong
{dấu ngoặc móc}):

Tên chương trình phiên bản SỐ, Tác quyền © năm  tên của tác giả
Tên chương trình không có bảo hành gì cả;
để xem chi tiết, hãy gõ lệnh show w. Đây là phần mềm tự do,
và bạn có quyền phát hành lại nó với một số điều kiện; hãy gõ
show c để xem chi tiết.

Hai lệnh "show w" và "show c" nên hiển thị các phần thích hợp của Giấy phép
Công cộng GNU. Tất nhiên, bạn có thể chọn lệnh khác thích hợp với chương trình
của mình, ví dụ lệnh trong bàn điều khiển, cú nhắp con chuột hay mục trình đơn.

Bạn cũng nên yêu cầu người chủ của bạn (nếu bạn làm việc lập trình viên trong
một công ty) hay trường học của bạn, nếu có, ký tên vào "đơn từ chối trách
nhiệm tác quyền" về chương trình này, nếu cần. Đây là một mẫu ví dụ : {hãy thay
thế đoạn nằm trong dấu ngoặc móc}

Yoyodyne, Inc., hereby disclaims all copyright interest in the
program Gnomovision (which makes passes at compilers) written
by James Hacker.

signature of Ty Coon, 1 April 1989
Ty Coon, President of Vice

Giấy phép Công cộng GNU này không cho phép ai hợp nhất chương trình của bạn vào
chương trình đã sở hữu. Nếu chương trình của bạn là thư viện trình con, có lẽ
bạn muốn cho phép ứng dụng sở hữu liên kết với thư viện này. Nếu có, bạn hãy sử
dụng Giấy phép Công cộng GNU Phụ (LGPL) thay vào Giấy phép này.

