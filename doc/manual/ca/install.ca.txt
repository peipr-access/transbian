Guia d'instal·lació de Debian GNU/Linux

Dret de reproducció © 2004 - 2021 l'equip de l'instal·lador de Debian

Aquest manual és programari lliure; podeu redistribuir-lo i/o modificar-lo sota
els termes de la Llicència Pública General de GNU publicada per la Free
Software Foundation. Feu un cop d'ull a la llicència a Apèndix F, Llicència
Pública General de GNU.

Versió de construcció d'aquest manual: 20220129~deb11u1.

Resum

Aquest document conté les instruccions d'instal·lació per a la versió 11 del
sistema Debian GNU/Linux (nom en codi «bullseye») per a l'arquitectura 64-bit
PC («amd64»). També conté referències per obtenir més informació i informació
de com aprofitar al màxim el vostre nou sistema Debian.

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

Sumari

Instal·lació de la versió 11 del sistema Debian GNU/Linux per a l'arquitectura
    amd64
1. Benvingut a Debian

    1.1. Què és Debian?
    1.2. Què és GNU/Linux?
    1.3. Què és Debian GNU/Linux?
    1.4. Què és l'instal·lador de Debian?
    1.5. Obtenció de Debian
    1.6. Obtenció de l'última versió d'aquest document
    1.7. Organització d'aquest document
    1.8. Sobre els drets d'autoria i les llicències del programari

2. Requisits del sistema

    2.1. Maquinari suportat

        2.1.1. Arquitectures suportades
        2.1.2. Suport CPU
        2.1.3. Ordinadors portàtils
        2.1.4. Processadors múltiples
        2.1.5. Targetes gràfiques suportades
        2.1.6. Maquinari per a la connexió de xarxes
        2.1.7. Pantalles Braille
        2.1.8. Maquinari de síntesi de veu
        2.1.9. Perifèrics i altre maquinari

    2.2. Dispositius que requereixen microprogramari
    2.3. Compra de maquinari específic per a GNU/Linux

        2.3.1. Eviteu el maquinari propietari o tancat

    2.4. Mitjans d'instal·lació

        2.4.1. CD-ROM/DVD-ROM/BD-ROM
        2.4.2. Dispositiu de memòria USB
        2.4.3. Xarxa
        2.4.4. Disc Dur
        2.4.5. Sistema Un*x o GNU
        2.4.6. Sistemes d'emmagatzemament suportats

    2.5. Requeriments de memòria i espai de disc

3. Abans d'instal·lar Debian GNU/Linux

    3.1. Resum del procés d'instal·lació
    3.2. Feu una còpia de seguretat de les vostres dades!
    3.3. Informació necessària

        3.3.1. Documentació
        3.3.2. Fonts d'informació sobre el maquinari
        3.3.3. Compatibilitat del maquinari
        3.3.4. Configuració de la xarxa

    3.4. Satisfer els requisits mínims de maquinari
    3.5. Pre-particions per a sistemes d'arrencada múltiple
    3.6. Configuració del maquinari i del sistema operatiu prèvia a la
        instal·lació

        3.6.1. Accedir al menú de configuració de la BIOS/UEFI
        3.6.2. Selecció del dispositiu d'arrencada
        3.6.3. Sistemes amb microprogramari UEFI
        3.6.4. Engegada segura («Secure boot»)
        3.6.5. Desactivar l'«arrencada ràpida»/«inici ràpid» de Windows
        3.6.6. Aspectes del maquinari que cal tenir en compte

4. Obtenir el suport d'instal·lació del sistema

    4.1. Imatges oficials d'instal·lació de Debian GNU/Linux
    4.2. Descarregar fitxers de les rèpliques de Debian

        4.2.1. On trobar arxius d'instal·lació

    4.3. Preparació dels fitxers per arrencar amb el llapis de memòria USB

        4.3.1. Preparar una memòria USB fent servir una imatge híbrida de CD/
            DVD
        4.3.2. Copiar manualment els fitxers en la memòria USB
        4.3.3. Còpia dels fitxers -- la manera flexible

    4.4. Preparació dels fitxers per arrencar des del disc dur

        4.4.1. Iniciar la instal·lació des del disc dur amb Linux fent servir 
            GRUB
        4.4.2. Iniciar la instal·lació des del disc dur amb DOS fent servir 
            loadlin

    4.5. Preparació dels fitxers per a l'arrencada en xarxa TFTP

        4.5.1. Configurar un servidor DHCP
        4.5.2. Configurar un servidor BOOTP
        4.5.3. Habilitació del servidor TFTP
        4.5.4. Posar les imatges del TFTP al seu lloc

    4.6. Instal·lació automàtica

        4.6.1. Instal·lació automàtica utilitzant l'instal·lador de Debian

    4.7. Verificant la integritat dels arxius d'instal·lació

5. Arrencada del sistema d'instal·lació

    5.1. Arrencada de l'instal·lador en l'arquitectura 64-bit PC

        5.1.1. Arrencada des d'un llapis USB
        5.1.2. Arrencada des d'un disc òptic (CD/DVD)
        5.1.3. Com arrencar des de Windows
        5.1.4. Arrencar des de DOS fent servir «loadlin»
        5.1.5. Arrencada des de Linux utilitzant GRUB
        5.1.6. Arrencada amb el TFTP
        5.1.7. Pantalla de benvinguda
        5.1.8. L'instal·lador gràfic

    5.2. Accessibilitat

        5.2.1. Instal·lar la interfície d'usuari («front-end»)
        5.2.2. Pantalles braille USB
        5.2.3. Pantalles braille sèrie
        5.2.4. Síntesi de veu per maquinari
        5.2.5. Maquinari de síntesi de veu
        5.2.6. Dispositius de la placa
        5.2.7. Tema d'alt contrast
        5.2.8. Zoom
        5.2.9. Instal·lació expert, mode de recuperació («Rescue»),
            instal·lació automatitzada («Automated»)
        5.2.10. Accessibilitat del sistema instal·lat

    5.3. Paràmetres d'arrencada

        5.3.1. Terminal d'arrencada
        5.3.2. Paràmetres de l'instal·lador Debian
        5.3.3. Utilitzar els paràmetres de l'arrencada per respondre preguntes
        5.3.4. Pas de paràmetres a mòduls del nucli
        5.3.5. Afegir mòduls del nucli a la llista negra

    5.4. Resolució de problemes del procés d'instal·lació

        5.4.1. Fiabilitat dels medis òptics
        5.4.2. Configuració de l'arrencada
        5.4.3. Síntesi de veu per maquinari
        5.4.4. Problemes d'instal·lació usuals en 64-bit PC
        5.4.5. Com interpretar els missatges del nucli durant l'arrencada
        5.4.6. Informar d'errors d'instal·lació
        5.4.7. Emissió d'informes d'error

6. Utilització de l'instal·lador de Debian

    6.1. Com funciona l'instal·lador

        6.1.1. Utilitzar l'instal·lador gràfic

    6.2. Introducció als elements
    6.3. Utilització dels elements individualment

        6.3.1. Configuració de l'instal·lador de Debian i del maquinari
        6.3.2. Configuració d'usuaris i contrasenyes
        6.3.3. Configuració del rellotge i la zona horària
        6.3.4. Realització de particions i selecció de punts de muntatge
        6.3.5. Instal·lació del sistema base
        6.3.6. Instal·lació de programari addicionals
        6.3.7. Com fer el sistema arrencable
        6.3.8. Finalització de la instal·lació
        6.3.9. Resolució de problemes
        6.3.10. Instal·lació a través de la consola de xarxa

    6.4. Carregar microprogramari no inclòs a l'instal·lador

        6.4.1. Preparar un dispositiu
        6.4.2. Microprogramari i el sistema ja instal·lat
        6.4.3. Completar el sistema ja instal·lat

    6.5. Personalització

        6.5.1. Instal·lació d'un "sistema init" alternatiu

7. Arrancada del nou sistema Debian

    7.1. El moment de la veritat
    7.2. Muntar volums xifrats

        7.2.1. Resolució de problemes

    7.3. Iniciar sessió

8. Següents passos i per on seguir

    8.1. Aturar el sistema
    8.2. Orientar-vos a Debian

        8.2.1. El sistema de paquets de Debian
        8.2.2. Programari addicional disponible per a Debian
        8.2.3. Gestió de versions de les aplicacions
        8.2.4. Gestió de tasques amb «cron»

    8.3. Lectura i informació addicional
    8.4. Configuració del vostre sistema per utilitzar el correu electrònic

        8.4.1. Configuració predeterminada del correu electrònic
        8.4.2. Enviar correus fora del sistema
        8.4.3. Configuració de l'agent de transport de correu Exim4

    8.5. Compilar un nou nucli
    8.6. Restauració d'un sistema amb errors

A. Com Instal·lar

    A.1. Preliminars
    A.2. Arrencada de l'instal·lador

        A.2.1. Disc òptic
        A.2.2. Clau de memòria USB
        A.2.3. Arrencada des de la xarxa
        A.2.4. Arrencada des del disc dur

    A.3. Instal·lació
    A.4. Envieu un informe de la instal·lació
    A.5. I finalment...

B. Automatització de la instal·lació fent servir una configuració prèvia

    B.1. Introducció

        B.1.1. Mètodes de configuració prèvia
        B.1.2. Limitacions

    B.2. Utilització de la configuració prèvia

        B.2.1. Càrrega del fitxer de configuració prèvia
        B.2.2. Utilització dels paràmetres d'arrencada per complementar la
            configuració prèvia
        B.2.3. Mode auto
        B.2.4. Àlies útils amb la configuració prèvia
        B.2.5. Exemples de configuració prèvia del menú d'arrencada
        B.2.6. Utilitzar un servidor DHCP per especificar els fitxers de
            configuració prèvia

    B.3. Preparar un fitxer de configuració prèvia
    B.4. Continguts del fitxer de configuració prèvia (per a bullseye)

        B.4.1. Localització
        B.4.2. Configuració de la xarxa
        B.4.3. La consola de xarxa
        B.4.4. Configuració del servidor rèplica
        B.4.5. Configuració de comptes
        B.4.6. Configuració del rellotge i del fus horari
        B.4.7. Fer particions
        B.4.8. Instal·lació del sistema base
        B.4.9. Configuració de l'«apt»
        B.4.10. Selecció de paquets
        B.4.11. Instal·lació del carregador d'arrencada
        B.4.12. Finalització de la instal·lació
        B.4.13. Configuració prèvia d'altres paquets

    B.5. Opcions avançades

        B.5.1. Execució d'ordres personalitzades a la instal·lació
        B.5.2. Ús de la configuració prèvia per canviar els valors
            predeterminats
        B.5.3. Càrrega en cadena de fitxers de configuració prèvia

C. Fer particions per a Debian

    C.1. Com decidir quines particions fer per a Debian i llurs mides
    C.2. L'arbre de directoris
    C.3. Esquema de particions recomanat
    C.4. Noms dels dispositius a Linux
    C.5. Programes per fer particions de Debian

        C.5.1. Fer particions per a 64-bit PC

D. Informació variada

    D.1. Dispositius del Linux

        D.1.1. Configuració del ratolí

    D.2. Espai requerit per a les tasques
    D.3. Instal·lar Debian GNU/Linux des d'un sistema Unix/Linux

        D.3.1. Començar
        D.3.2. Instal·lar debootstrap
        D.3.3. Executar debootstrap
        D.3.4. Configurar el sistema base
        D.3.5. Instal·lar un nucli
        D.3.6. Configuració del carregador d'arrencada
        D.3.7. Accés remot: instal·lar SSH i configurar l'accés
        D.3.8. Retocs finals

    D.4. Instal·lació de Debian GNU/Linux per «Parallel Line IP» (PLIP)

        D.4.1. Requeriments
        D.4.2. Configuració de l'origen
        D.4.3. Instal·lació del destí

    D.5. Instal·lació de Debian GNU/Linux utilitzant PPP sobre Ethernet (PPPoE)

E. Sobre aquest document

    E.1. Quant a aquest document
    E.2. Contribucions a aquest document
    E.3. Contribucions més destacables
    E.4. Nota sobre les marques comercials

F. Llicència Pública General de GNU

Llistat de taules

3.1. Informació sobre el maquinari requerida per a la instal·lació
3.2. Requisits mínims del sistema recomanats

Instal·lació de la versió 11 del sistema Debian GNU/Linux per a l'arquitectura
amd64

Ens alegrem que us hàgiu decidit a provar Debian i estem segurs que trobareu
que la distribució Debian de GNU/Linux és única. Debian GNU/Linux aporta l'alta
qualitat del programari lliure d'arreu del món, integrat en un conjunt
coherent. Creiem que descobrireu que els seus resultats són, veritablement,
quelcom més que la suma dels seus components.

Entenem que molts de vosaltres voleu instal·lar Debian sense haver de llegir
aquest manual, i l'instal·lador de Debian ho contempla. Si no disposeu del
temps necessari per llegir la Guia d'instal·lació, us recomanem que llegiu el
document «Com instal·lar-lo», que us guiarà a través del procés d'instal·lació
bàsic i que fa referència al manual pels temes més avançats o en cas d'error.
El document «Com instal·lar-lo» el podeu trobar a Apèndix A, Com Instal·lar.

Dit això, esperem que disposeu del temps necessari per llegir la major part del
manual ja que, probablement, això us permetrà una instal·lació més
satisfactòria i amb més informació.

Capítol 1. Benvingut a Debian

Sumari

1.1. Què és Debian?
1.2. Què és GNU/Linux?
1.3. Què és Debian GNU/Linux?
1.4. Què és l'instal·lador de Debian?
1.5. Obtenció de Debian
1.6. Obtenció de l'última versió d'aquest document
1.7. Organització d'aquest document
1.8. Sobre els drets d'autoria i les llicències del programari

Aquest capítol proporciona una vista prèvia del projecte Debian i Debian GNU/
Linux. Si ja coneixeu la història del projecte Debian i de la distribució
Debian GNU/Linux, podeu passar tranquil·lament al següent capítol.

1.1. Què és Debian?

Debian és una organització formada únicament per voluntaris i dedicada al
desenvolupament del programari lliure i a la promoció dels ideals de la
comunitat de Programari Lliure. El projecte Debian va començar l'any 1993, quan
n'Ian Murdock va difondre una invitació oberta als desenvolupadors de
programari per contribuir a una distribució de programari completa i coherent,
basada en el relativament nou nucli del Linux. Aquest petit grup d'entusiastes
especialitzats, que originalment va ser patrocinat per la Free Software
Foundation i influenciat per la filosofia GNU, ha crescut amb els anys fins a
esdevenir una organització d'aproximadament 1000 desenvolupadors de Debian.

Els desenvolupadors de Debian estan involucrats en diverses activitats que
inclouen l'administració dels llocs Web i FTP, el disseny gràfic, l'anàlisi
legal de les llicències de programari, la redacció de documentació i,
evidentment, el manteniment de paquets de programari.

Amb l'objectiu de comunicar la nostra filosofia i atreure els desenvolupadors
que creuen en els principis que representa Debian, hem publicat una colla de
documents que estructuren els nostres valors i serveixen de guia sobre què
significa ser un desenvolupador de Debian:

  • El Contracte Social de Debian és una declaració dels compromisos de Debian
    respecte a la comunitat del programari lliure. Qualsevol persona que
    accepti acollir-se al Contracte Social pot convertir-se en un mantenidor.
    Qualsevol mantenidor pot introduir nou programari a Debian -- sempre que
    aquest programari es consideri lliure segons els nostres criteris i el
    paquet segueixi els nostres estàndards de qualitat.

  • Les Directives del Programari Lliure de Debian (DFSG) són una declaració
    clara i concisa del criteris de Debian referents al programari lliure. Les
    DFSG són un document amb molta influència dins el moviment del programari
    lliure, i són la base de la definició de codi obert.

  • El manual de política de Debian és una especificació extensa dels
    estàndards de qualitat del projecte Debian.

Els desenvolupadors de Debian també estan involucrats en d'altres projectes;
alguns d'ells específics de Debian i d'altres relacionats amb parts o amb la
totalitat de la comunitat del Linux. Alguns exemples poden ser:

  • L'estàndard de jerarquia del sistema de fitxers (FHS) és un esforç per
    estandarditzar l'esquema del sistema de fitxers del Linux. L'FHS permetrà
    als desenvolupadors de programari concentrar els seus esforços a dissenyar
    els programes, sense haver de preocupar-se de com s'instal·larà el paquet
    en diferents distribucions de GNU/Linux.

  • El Debian Jr. és un projecte intern que vol assegurar-se que Debian té
    alguna cosa per oferir als usuaris més joves.

Per obtenir informació més general sobre Debian vegeu les PMF de Debian.

1.2. Què és GNU/Linux?

GNU/Linux és un sistema operatiu: una sèrie de programes que us permetran
interactuar amb el vostre ordinador i executar altres programes.

Un sistema operatiu és un conjunt de programes fonamentals necessaris perquè
l'ordinador pugui comunicar-se i rebre instruccions dels usuaris, llegir i
escriure dades al disc dur, a cintes i a impressores, controlar l'ús de la
memòria i executar més programari. La part més important d'un sistema operatiu
és el nucli. En un sistema GNU/Linux, el Linux és el component que fa de nucli.
La resta del sistema està format d'altres programes, molts dels quals han estat
escrits pel o per al projecte GNU. Com que el nucli Linux per si sol no és un
sistema operatiu funcional, preferim utilitzar el terme «GNU/Linux» per
referir-nos al sistema que molta gent acostuma a anomenar «Linux».

GNU/Linux està modelat sobre el sistema operatiu Unix. Des dels seus inicis,
GNU/Linux es va dissenyar per ser un sistema multitasca i multiusuari. Aquestes
característiques són suficients per fer GNU/Linux diferent d'altres sistemes
operatius ben coneguts. Però GNU/Linux és inclús més diferent del que pugueu
imaginar. Contràriament a d'altres sistemes operatius, ningú és propietari de
GNU/Linux. Molta part del seu desenvolupament el realitzen voluntaris que no
cobren per fer-ho.

El desenvolupament del que més endavant seria GNU/Linux començà el 1984, quan
la Free Software Foundation va començar a desenvolupar un sistema operatiu
lliure similar al Unix anomenat GNU.

El projecte GNU ha desenvolupat un ampli conjunt d'eines de programari lliure
per utilitzar amb sistemes operatius Unix (tm) o similars, com GNU/Linux.
Aquestes eines permeten als usuaris realitzar tasques que van des de les més
mundanes (com copiar o suprimir fitxers del sistema) fins a les més complexes
(com escriure i compilar programes o fer edicions sofisticades de documents en
diferents formats).

Tot i que molts grups i persones han contribuït en el desenvolupament de GNU/
Linux, el contribuïdor individual més gran segueix sent la Free Software
Foundation, que ha creat no només la major part de les eines utilitzades a GNU/
Linux, sinó també la filosofia i la comunitat que ha fet que GNU/Linux sigui
possible.

El nucli Linux va aparèixer per primer cop el 1991, quan un estudiant
d'informàtica finlandès anomenat Linus Torvalds va anunciar una primera versió
d'un reemplaçament del nucli del Minix al grup de notícies de Usenet
comp.os.minix. Vegeu la pàgina d'història de Linux, de Linux International.

En Linus Torvalds segueix coordinant el treball de centenars de desenvolupadors
amb l'ajuda d'alguns mantenidors de subsistemes. Hi ha un lloc web oficial per
al nucli Linux. També podeu trobar més informació sobre la llista de correu del
nucli Linux a les PMF de la llista de correu del nucli Linux.

Els usuaris de GNU/Linux tenen una immensa llibertat d'elecció del seu
programari. Per exemple, poden triar entre una dotzena de programes d'intèrpret
d'ordres diferents i bastants escriptoris gràfics. Aquesta llibertat d'elecció
sovint resulta desconcertant pels usuaris d'altres sistemes operatius, els
quals no estan acostumats a pensar en l'intèrpret d'ordres o en l'escriptori
com quelcom que poden canviar.

També és menys probable que GNU/Linux causi una fallada del sistema, és més
capaç d'executar més d'un programa al mateix temps i és més segur que molts
d'altres sistemes operatius. Amb aquests avantatges, Linux és el sistema
operatiu que té un creixement més ràpid en el mercat de servidors. Més
recentment, Linux també ha començat a fer-se popular entre els usuaris
domèstics i de negocis.

1.3. Què és Debian GNU/Linux?

De la combinació de la filosofia i metodologia Debian amb les utilitats de GNU,
el nucli Linux i altre programari lliure, n'esdevé una distribució única
anomenada Debian GNU/Linux. Aquesta distribució es basa en una quantitat enorme
de paquets de programari. Cada paquet de la distribució té executables,
seqüències, documentació, i informació de la configuració, així com un 
mantenidor, que és el principal responsable de mantenir-lo actualitzat,
analitzar i reparar-ne els errors de programació i de comunicar-se amb els
desenvolupadors del paquet de programari. L'enorme quantitat d'usuaris
combinada amb el sistema de seguiment d'errors permet que aquests es localitzin
i depurin ràpidament.

La importància que Debian dóna als detalls ens permet produir una distribució
estable, ampliable i d'alta qualitat. Les instal·lacions poden ser fàcilment
configurades per dur a terme diferents papers, des de muntar tallafocs pels
centres de treball científics a servidors de xarxa d'alta qualitat.

Debian és especialment popular entre els usuaris avançats arran de les seves
excel·lències tècniques i el compromís amb les necessitats i expectatives de la
comunitat Linux. Debian també ha introduït moltes característiques al Linux que
actualment són quotidianes.

Per exemple, Debian va ser la primera distribució de Linux que va incloure un
sistema de gestió de paquets per facilitar la instal·lació i supressió de
programari. També va ser la primera distribució de Linux que es podia
actualitzar sense necessitar la reinstal·lació completa.

Debian continua sent un projecte líder en el desenvolupament de Linux. El seu
procés de desenvolupament és un exemple de com pot arribar a funcionar un model
de desenvolupament de programari lliure -- fins i tot per a tasques complexes
com generar i mantenir un sistema operatiu complet.

La característica que més diferencia Debian de les altres distribucions GNU/
Linux és el seu sistema de manteniment de paquets. Aquestes utilitats donen a
l'administrador d'un sistema Debian el control total sobre els paquets
instal·lats en el sistema, incloent-hi la possibilitat d'instal·lar un únic
paquet o d'actualitzar totalment el sistema operatiu. Els paquets individuals
també es poden actualitzar. En el sistema de manteniment de paquets podeu
establir quin programari us heu compilat i les dependències que té.

Per protegir el sistema contra «cavalls de Troia» i d'altre programari
perjudicial, els servidors de Debian verifiquen que els paquets apujats
procedeixin dels mantenidors de Debian registrats. Els empaquetadors de Debian
també tenen cura de configurar els paquets de forma segura. Quan apareixen
problemes de seguretat als paquets en circulació, les actualitzacions
normalment estan disponibles en poc temps. Amb unes simples opcions
d'actualització de Debian les actualitzacions de seguretat es poden descarregar
i instal·lar automàticament a través d'Internet.

La millor forma d'obtenir ajuda per utilitzar el sistema Debian GNU/Linux i
poder-vos comunicar amb els desenvolupadors de Debian és a través d'algunes
llistes de correu mantingudes pel projecte Debian (en el moment que s'escrivia
aquest document n'hi havia més de 322). La manera més fàcil per subscriure's a
una o més llistes és visitant la Pàgina de subscripció a les llistes de correu
de Debian i emplenar el formulari que hi trobareu.

1.4. Què és l'instal·lador de Debian?

L'instal·lador de Debian, també conegut com «d-i», és el programari per
instal·lar un sistema bàsic i funcional de Debian. Hi ha suport per a una
àmplia gamma de maquinari, com ara dispositius encastats, portàtils,
escriptoris i maquines de servidors, i s'ofereix un gran conjunt de programari
lliure per a molts propòsits.

La instal·lació es porta a terme responent una sèrie de preguntes bàsiques.
També disposeu d'un mode expert que us permet controlar qualsevol aspecte de la
instal·lació i una funcionalitat avançada per a fer instal·lacions
automatitzades. Podeu usar el sistema instal·lat tal qual o amb adaptacions a
mida. La instal·lació es pot fer des de múltiples fonts: USB, CD/DVD/Blu-Raiy o
xarxa. L'instal·lador ofereix la instal·lació traduïda en més de 80 llengües.

L'instal·lador té l'origen en el projecte «boot-floppies», i fou mencionat per
primera vegada per Joey Hess l'any 2000. Des de llavors el sistema
d'instal·lació ha estat desenvolupat contínuament per voluntaris que l'han
millorat i li han afegit noves funcionalitats.

Més informació la trobareu a la plana de l'instal·lador de Debian, a la Wiki i
a la llista de correu debian-boot .

1.5. Obtenció de Debian

Per obtenir informació sobre com baixar Debian GNU/Linux d'Internet o a qui es
poden comprar els mitjans d'instal·lació oficials de Debian vegeu la pàgina web
de distribució. La llista de rèpliques de Debian conté un conjunt complet de
rèpliques oficials de Debian perquè pugueu trobar-hi fàcilment la més propera.

Debian es pot actualitzar fàcilment després de la instal·lació. El procés
d'instal·lació us ajudarà a configurar el sistema de manera que pugueu fer
aquestes actualitzacions, si són necessàries, un cop finalitzada la
instal·lació.

1.6. Obtenció de l'última versió d'aquest document

Aquest document es revisa constantment. Per trobar la informació d'última hora
sobre el llançament 11 del sistema Debian GNU/Linux assegureu-vos de comprovar
les pàgines de Debian 11. Les versions actualitzades d'aquest manual
d'instal·lació estan disponibles a les pàgines oficials del manual
d'instal·lació.

1.7. Organització d'aquest document

Aquest document està pensat per servir de manual per aquells que utilitzin
Debian per primer cop. Intenta fer el mínim de suposicions possibles pel que fa
al nivell dels coneixements. Tot i això, se suposen uns certs coneixements
generals sobre com funciona el maquinari de l'ordinador.

Els usuaris experts també hi poden trobar informació de referència interessant,
incloent-hi l'espai mínim per a la instal·lació, detalls sobre el maquinari
suportat pel sistema d'instal·lació de Debian i d'altres coses. Encoratgem als
usuaris experts a saltar d'una secció a l'altra d'aquest document.

En general, aquest manual s'ha organitzat de forma lineal, portant-vos a través
del procés d'instal·lació des del principi fins al final. A continuació teniu
els passos per a instal·lar Debian GNU/Linux, i les seccions d'aquest document
que s'hi corresponen:

 1. Determineu si el vostre maquinari reuneix els requisits per utilitzar el
    sistema d'instal·lació a Capítol 2, Requisits del sistema.

 2. Feu una còpia de seguretat del vostre sistema, dueu a terme qualsevol
    planificació i configuració del maquinari previs a la instal·lació de
    Debian a Capítol 3, Abans d'instal·lar Debian GNU/Linux. Si esteu preparant
    un sistema d'arrencada múltiple, potser necessitareu preveure espai al disc
    dur per fer-hi les particions que utilitzarà Debian.

 3. A Capítol 4, Obtenir el suport d'instal·lació del sistema, obtindreu els
    fitxers d'instal·lació necessaris per al vostre mètode d'instal·lació.

 4. El proper Capítol 5, Arrencada del sistema d'instal·lació descriu
    l'arrencada del sistema d'instal·lació. Aquest capítol també discuteix els
    procediments de resolució de problemes en cas que en tingueu en aquest pas.

 5. Realitzeu la instal·lació pròpiament dita segons Capítol 6, Utilització de
    l'instal·lador de Debian. Implica la tria de l'idioma, la configuració dels
    mòduls controladors de dispositius, la configuració de la connexió de
    xarxa, de manera que la resta de fitxers de la instal·lació es puguin
    obtenir directament d'un servidor de Debian (si no esteu instal·lant a
    partir d'un conjunt d'imatges d'instal·lació en CD/DVD), el mètode de
    partició de les vostres unitats de disc, la instal·lació del sistema base,
    i la selecció i instal·lació de tasques. (A Apèndix C, Fer particions per a
    Debian trobareu alguna informació sobre com configurar les particions pel
    vostre sistema Debian).

 6. Arrenqueu el nou sistema base instal·lat, a Capítol 7, Arrancada del nou
    sistema Debian.

Un cop tingueu el vostre sistema instal·lat, podeu llegir Capítol 8, Següents
passos i per on seguir. Aquest capítol explica on podeu cercar més informació
sobre Unix i Debian i com reemplaçar el vostre nucli.

Finalment, podeu trobar informació sobre aquest document i com contribuir-hi a
Apèndix E, Sobre aquest document.

1.8. Sobre els drets d'autoria i les llicències del programari

Segur que ja heu llegit alguna cosa sobre les llicències que venen amb la
majoria del programari comercial -- normalment diuen que només podeu utilitzar
una còpia del programari en un únic ordinador. La llicència del sistema Debian
GNU/Linux no és del tot així. Us animem a posar una còpia de Debian GNU/Linux
en cada ordinador de la vostra escola o lloc de treball. Deixeu el vostre mitjà
d'instal·lació als vostres amics i ajudeu-los amb la instal·lació als seus
ordinadors! Podeu fer centenars de còpies i vendre-les -- encara que amb
algunes restriccions. La vostra llibertat per instal·lar i utilitzar el sistema
us la dóna directament Debian al basar-se en programari lliure.

Anomenar-se programari lliure no significa que el programari no tingui drets
d'autor i no vol dir que els mitjans d'instal·lació que contenen aquest
programari hagin de ser distribuïts gratuïtament. Programari lliure, en part,
significa que les llicències dels programes individuals no obliguen a pagar pel
privilegi de distribuir o utilitzar-los. El programari lliure també comporta
que no només qualsevol el pot ampliar, adaptar i modificar, sinó que també en
pot distribuir el resultant dels canvis.

Nota

El projecte Debian, com a concessió pragmàtica cap els seus usuaris, permet que
alguns paquets disponibles no compleixin els nostres criteris per a ser
considerats lliures. Aquests paquets no formen part de la distribució oficial;
tot i això, estan disponibles a les àrees contrib o non-free de les rèpliques
de Debian o en la tercera part dels CD/DVD-ROM; per a més informació sobre la
disposició i el contingut dels arxius, mireu les Debian PMF als «Arxius d'FTP
de Debian».

Molts dels programes del sistema estan sota la llicència Llicència Pública
General de GNU, sovint anomenada «la GPL». La GPL necessita que deixeu el codi
font dels programes sempre disponible quan distribuïu una còpia binària del
programa; amb aquesta condició de la llicència s'assegura que qualsevol usuari
pugui modificar el programari. Arran d'aquesta condició, el codi font^[1] de
tots aquests programes estarà disponible al sistema Debian.

Hi ha algunes formes més de declaracions de drets d'autor i de llicències de
programari utilitzades en els programes de Debian. Podeu trobar els drets
d'autor i les llicències per a cada paquet instal·lat en el vostre sistema
mirant el fitxer /usr/share/doc/nom-paquet/copyright un cop estigui instal·lat.

Per a més informació sobre les llicències i com es decideix si un programari
compleix les característiques per ser inclòs en una distribució oficial de
Debian, mireu els Principis del programari lliure de Debian.

El punt legal més important és que aquest programari no té garanties. Els
programadors que han escrit aquest programari, ho fan per beneficiar a la
comunitat. No es tenen garanties envers un ús concret del programari. Tot i
això, com que el programari és lliure, teniu la possibilitat de modificar-lo
per adaptar-lo a les vostres necessitats -- i gaudir dels beneficis dels canvis
fets per d'altres que han ampliat el programari a la seva manera.


━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

^[1] Per a més informació de com trobar, desempaquetar i construir binaris des
dels paquets font de Debian, mireu les Debian PMF, a «Informació bàsica sobre
el sistema Debian de gestió de paquets».

Capítol 2. Requisits del sistema

Sumari

2.1. Maquinari suportat

    2.1.1. Arquitectures suportades
    2.1.2. Suport CPU
    2.1.3. Ordinadors portàtils
    2.1.4. Processadors múltiples
    2.1.5. Targetes gràfiques suportades
    2.1.6. Maquinari per a la connexió de xarxes
    2.1.7. Pantalles Braille
    2.1.8. Maquinari de síntesi de veu
    2.1.9. Perifèrics i altre maquinari

2.2. Dispositius que requereixen microprogramari
2.3. Compra de maquinari específic per a GNU/Linux

    2.3.1. Eviteu el maquinari propietari o tancat

2.4. Mitjans d'instal·lació

    2.4.1. CD-ROM/DVD-ROM/BD-ROM
    2.4.2. Dispositiu de memòria USB
    2.4.3. Xarxa
    2.4.4. Disc Dur
    2.4.5. Sistema Un*x o GNU
    2.4.6. Sistemes d'emmagatzemament suportats

2.5. Requeriments de memòria i espai de disc

Aquesta secció conté informació sobre quin maquinari necessitareu per començar
amb Debian. També trobareu enllaços a més informació referent al maquinari
suportat per GNU i Linux.

2.1. Maquinari suportat

Debian no imposa cap requeriment més enllà dels necessaris pel nucli Linux i el
conjunt de ferramentes GNU. Per això, qualsevol arquitectura o plataforma per
la qual s'haja portat el nucli Linux, les libc, gcc, etc. i per la qual s'haja
portat Debian, es pot executar Debian. Visiteu la pàgina dels ports https://
www.debian.org/ports/amd64/ per obtenir més detalls dels sistemes on
l'arquitectura 64-bit PC s'ha comprovat amb Debian GNU/Linux.

Més que intentar descriure totes les configuracions diferents del maquinari que
estan separades per 64-bit PC, aquesta secció conté informació general i apunts
d'on trobar més informació.

2.1.1. Arquitectures suportades

Debian GNU/Linux 11 suporta 9 arquitectures principals i diverses variacions de
cada arquitectura conegudes com «sabors».

┌────────────────────────┬───────────┬──────────────────────────┬─────────────┐
│      Arquitectura      │   Nom a   │     Subarquitectura      │    Sabor    │
│                        │  Debian   │                          │             │
├────────────────────────┼───────────┼──────────────────────────┼─────────────┤
│AMD64 & Intel 64        │amd64      │                          │             │
├────────────────────────┼───────────┼──────────────────────────┼─────────────┤
│                        │           │màquines x86              │predeterminat│
│Basada en Intel x86     │i386       │predeterminades           │             │
│                        │           ├──────────────────────────┼─────────────┤
│                        │           │Només dominis Xen PV      │xen          │
├────────────────────────┼───────────┼──────────────────────────┼─────────────┤
│ARM                     │armel      │Marvell Kirkwood i Orion  │marvell      │
├────────────────────────┼───────────┼──────────────────────────┼─────────────┤
│ARM amb maquinari FPU   │armhf      │multiplatform             │armmp        │
├────────────────────────┼───────────┼──────────────────────────┼─────────────┤
│64bit ARM               │arm64      │                          │             │
├────────────────────────┼───────────┼──────────────────────────┼─────────────┤
│                        │           │MIPS Malta                │5kc-malta    │
│64bit MIPS (little      │           ├──────────────────────────┼─────────────┤
│endian)                 │mips64el   │Cavium Octeon             │octeon       │
│                        │           ├──────────────────────────┼─────────────┤
│                        │           │Loongson 3                │loongson-3   │
├────────────────────────┼───────────┼──────────────────────────┼─────────────┤
│                        │           │MIPS Malta                │4kc-malta    │
│32bit MIPS (little      │           ├──────────────────────────┼─────────────┤
│endian)                 │mipsel     │Cavium Octeon             │octeon       │
│                        │           ├──────────────────────────┼─────────────┤
│                        │           │Loongson 3                │loongson-3   │
├────────────────────────┼───────────┼──────────────────────────┼─────────────┤
│Power Systems           │ppc64el    │IBM POWER8 o més actuals  │             │
├────────────────────────┼───────────┼──────────────────────────┼─────────────┤
│IBM S/390 64 bits       │s390x      │IPL de VM-reader i DASD   │genèric      │
└────────────────────────┴───────────┴──────────────────────────┴─────────────┘

Aquest document cobreix la instal·lació per a l'arquitectura 64-bit PC fent
servir el nucli Linux. Si busqueu informació per qualsevol altra arquitectura
suportada per Debian, pegueu una ullada a les pàgines dels ports de Debian.

2.1.2. Suport CPU

Estan suportats tant el processador AMD64 com el Intel 64.

2.1.3. Ordinadors portàtils

Des del punt de vista tècnic, els portàtils son PC normals, i la informació
sobre els PC també és aplicable als portàtils. Actualment, les instal·lacions
en els portàtils funcionen sense més problemes incloent aspectes com la
suspensió automàtica del sistema quan es tanca la tapa i botons específics dels
portàtils com els que desactiven la wifi («mode avió»). De vegades, els
fabricants inclouen maquinari especialitzat o propietari per a algunes funcions
especifiques que poden no estar suportats. Per vore si el vostre ordinador
portàtil funciona correctament amb GNU/Linux, visiteu les pàgines d'ordinadors
portàtils amb Linux.

2.1.4. Processadors múltiples

El suport de processadors múltiples -- també anomenat «multiprocés simètric» o
SMP -- està disponible per aquesta arquitectura. La imatge del nucli estàndard
de Debian 11 s'ha compilat amb suport SMP-alternatives. Açò vol dir que el
nucli detecta el nombre de processadors (o nuclis de processador) i que
automàticament desactivarà l'SMP a sistemes amb un processador.

Originàriament, tenir múltiples processadors en un ordinador era una
característica només dels sistemes servidors d'alta gama, però s'ha tornat més
freqüent en els darrers anys en totes les màquines amb la introducció dels
anomenats processadors «multi-nuclis». Aquests tenen dues o més unitats de
processadors, anomenats «nuclis» en cada xip físic.

2.1.5. Targetes gràfiques suportades

El suport de les interfícies gràfiques a Debian ve determinat pel suport
subjacent que es troba al sistema X11 de X.Org, i també al nucli. La gestió
bàsica dels gràfics està garantida amb el nucli, si l'entorn d'escriptori fa
servir X11. Que es pugui fer servir les característiques de targetes gràfiques
avançades com l'acceleració de maquinari 3D o vídeo accelerat per maquinari,
depèn del maquinari emprat en el sistema i, en alguns casos, de la instal·lació
addicional «blobs» (arxius en format binari) de «microprogramari» («firmware»)
(mireu Secció 2.2, «Dispositius que requereixen microprogramari»).

En els PC moderns, tenir una pantalla gràfica normalment funciona directament.
Per a una gran quantitat de maquinari, l'acceleració 3D també funciona bé a la
primera, però encara hi ha algun maquinari que necessita «blobs» de
microprogramari binari per funcionar bé. En alguns casos hi ha hagut informes
sobre maquinari en què es requeria la instal·lació de microprogramari
addicional de targetes gràfiques fins i tot per a suport gràfic bàsic.

Podeu trobar detalls del maquinari gràfic i dispositius senyaladors suportats a
https://wiki.freedesktop.org/xorg/. Debian 11 ve amb la versió 7.7 de les
X.Org.

2.1.6. Maquinari per a la connexió de xarxes

Pràcticament qualsevol targeta de xarxa (NIC) suportada pel nucli Linux és
també suportada pel sistema d'instal·lació; els controladors modulars s'haurien
de carregar automàticament. Inclou la majoria de targetes PCI/PCI-Express i
PCMCIA/Express a portàtils.

Es dona suport a ISDN però no en el procés d'instal·lació.

2.1.6.1. Targetes de xarxa sense fils

La gestió de xarxes sense fils en general també funciona, i hi ha un nombre
creixent d'adaptadors per a diverses targetes suportades oficialment al nucli
Linux, tot i que moltes requereixen carregar microprogramari.

Si fes falta el microprogramari, l'instal·lador demanarà que el carregueu.
Vegeu Secció 6.4, «Carregar microprogramari no inclòs a l'instal·lador» per a
més informació de com carregar el microprogramari durant la instal·lació.

Els NIC sense fils que no estan suportats pel nucli Linux oficial poden
funcionar correctament amb Debian GNU/Linux, però no estan suportats en el
procés d'instal·lació.

Si hi ha cap problema amb la xarxa sense fils i no hi ha cap altre NIC que
pugueu fer servir durant la instal·lació, encara es possible instal·lar Debian
GNU/Linux utilitzant la imatge completa d'un CD-ROM o DVD. Seleccioneu l'opció
de no configurar la xarxa i instal·leu només aquells paquets que estiguin
disponibles al CD/DVD. Podreu instal·lar el controlador i el microprogramari
que necessiteu quan la instal·lació s'hagi completat (després de reiniciar) i
configurar la xarxa manualment.

En alguns casos, el controlador que necessiteu no estarà disponible en un
paquet Debian. Haureu de cercar si hi ha disponible el codi font a Internet i,
si hi és, compilar-lo. Com fer-ho està fora de l'abast d'aquest manual. Si no
hi ha disponible cap controlador per a Linux, l'últim recurs que teniu és
utilitzar el paquet ndiswrapper, el qual us permet utilitzar-ne un de Windows.

2.1.7. Pantalles Braille

El suport per a terminals braille està determinat pel suport facilitat per
brltty. La majoria de pantalles funcionen sota brltty, connectades via
qualsevol port serie, USB o bluetooth. Els detalls dels dispositius suportats
es poden trobar al lloc web de brltty. Debian GNU/Linux 11 es distribueix amb
brltty versió 6.3.

2.1.8. Maquinari de síntesi de veu

El suport per a maquinari de síntesi de veu es proveït pel paquet speakup.
speakup només suporta targetes integrades i dispositius externs connectats al
port serie (adaptadors USB o serie-a-USB no estan suportats). Els detalls del
maquinari suportat per síntesi de veu es pot trobar al lloc web de speakup.
Debian GNU/Linux 11 es distribueix amb speakup versió 3.1.6.

2.1.9. Perifèrics i altre maquinari

El Linux permet utilitzar una gran varietat de dispositius de maquinari com ara
ratolins, impressores, escànners, PCMCIA/CardBus/ExpressCard i dispositius USB.
De tota manera, la major part d'aquests dispositius no són necessaris durant la
instal·lació del sistema.

El maquinari USB generalment funciona correctament. En només alguns ordinadors
antics, alguns teclats USB necessiten configuració addicional (consulteu
Secció 3.6.6, «Aspectes del maquinari que cal tenir en compte»). En els
ordinadors moderns, els teclats i punters USB funcionen sense precisar cap mena
de configuració específica.

2.2. Dispositius que requereixen microprogramari

A part de la disponibilitat d'un controlador de dispositiu, algun maquinari
també requereix carregar l'anomenat firmware o microprogramari al dispositiu
abans de què esdevingui operatiu. Això és comú en targetes de xarxa
(especialment NIC sense fils), però per exemple alguns dispositius USB o inclús
algunes controladores de discs durs també requereixen microprogramari.

Amb moltes targetes gràfiques, la funcionalitat bàsica està disponible sense
microprogramari addicional, però l'ús de característiques avançades requereix
que s'instal·li un fitxer de microprogramari adequat al sistema. En alguns
casos, una instal·lació amb èxit encara pot acabar en una pantalla negra o
"desgarbada" quan es reinicia al sistema instal·lat. Si això passa, algunes
solucions de es poden intentar per iniciar sessió de totes maneres (vegeu
Secció 6.4.3, «Completar el sistema ja instal·lat»).

En bastants dispositius antics que necessiten microprogramari («firmware») per
a funcionar, el fitxer de microprogramari està ubicat de forma permanent, de
fàbrica, en un xip EEPROM/Flaix del dispositiu. Actualment, la majoria de
dispositius ja no tenen el microprogramari ubicat d'aquesta manera, i el fitxer
de microprogramari es pot descarregar en el dispositiu pel sistema operatiu
cada vegada que el sistema arrenca.

En molts casos el microprogramari no és lliure d'acord amb el criteri emprat
pel projecte Debian GNU/Linux i per tant no es pot incloure en la distribució
principal ni en el sistema d'instal·lació. Si el controlador del dispositiu
està inclòs en la distribució i Debian GNU/Linux pot distribuir legalment el
microprogramari, aquest estarà normalment disponible com un paquet separat a la
secció «non-free» del repositori de la distribució.

No obstant, això no vol dir que aquest maquinari no es pugui emprar durant la
instal·lació. Començant amb Debian GNU/Linux 5.0, debian-installer suporta
carregar fitxers de microprogramari i paquets contenint microprogramari d'un
mitjà extraïble, com un disquet o un llapis USB. Vegeu Secció 6.4, «Carregar
microprogramari no inclòs a l'instal·lador» per a informació detallada de com
carregar fitxers de microprogramari o paquets durant la instal·lació.

Si el debian-installer requereix un fitxer de microprogramari i vostè no
disposa del fitxer o bé no desitja instal·lar un fitxer de microprogramari que
no sigui lliure en el seu sistema, podeu optar per continuar sense carregar el
microprogramari. Hi ha diversos casos en què un dispositiu sol·licita
microprogramari addicional degut a que pot ésser necessari en certes
circumstàncies, però el dispositiu pot funcionar sense ell en molts sistemes
(és el que passa amb algunes targetes de xarxa que fan servir el controlador
tg3).

2.3. Compra de maquinari específic per a GNU/Linux

Hi ha diversos fabricants que venen sistemes amb Debian o altres distribucions
de GNU/Linux preinstal·lades. Potser heu de pagar més per a aquest privilegi,
però així compreu tranquilitat, ja que podeu estar segurs que el maquinari
funciona bé a GNU/Linux.

Si heu de comprar una màquina amb Windows inclòs, llegiu amb cura la llicència
de programari que ve amb el Windows; potser podeu rebutjar la llicència i
obtenir un descompte del fabricant. Cercar «devolució de windows» a Internet us
pot donar informació útil per ajudar-vos en això.

Tant si compreu un sistema amb Linux preinstal·lat com si no, o fins i tot si
compreu un sistema de segona mà, és important que comproveu que el vostre
maquinari funciona amb el nucli Linux. Comproveu si el vostre maquinari està
llistat a les referències anteriors. Feu saber al vostre venedor que voleu
comprar per a un sistema Linux. Recolzeu els fabricants de maquinari que
funciona amb Linux.

2.3.1. Eviteu el maquinari propietari o tancat

Alguns fabricants de maquinari no ens diuen com escriure controladors per al
seu maquinari. Altres no ens permeten l'accés a la documentació sense un acord
de no divulgació que ens impediria alliberar el codi font del dispositiu, que
és una pilar bàsic del programari lliure. Com què no hem tengut accés a
documentació útil sobre aquests dispositius, no poden funcionar amb Linux.

En molts casos hi ha estàndards (o almenys alguns estàndards de fet) que
descriuen com s'ha de comunicar el sistema operatiu i els controladors dels
dispositius per a alguns dispositius. Tots els dispositius que s'ajusten a un
estàndard (encara que sigui de fet) es poden fer servir amb un controlador
genèric de dispositiu i no son necessaris controladors específics. Per a alguns
tipus de maquinari (p. ex. «Dispositius d'interacció humana» USB, és a dir
teclats, punter, etc, i dispositius d'emmagatzemament massiu com és ara disc
USB i lectors de targetes de memòria) això funciona molt bé i pràcticament tots
els dispositius en venta al mercat son compatibles amb l'estàndard.

Per a altres dispositius, com per exemple les impressores, desgraciadament no
és així. Encara que hi ha moltes impressores que poden gestionar-se amb un
petit conjunt de llenguatges de control estàndard (almenys de fet) i poden
funcionar sense problemes en qualsevol sistema operatiu, hi ha alguns models
que només fan servir les ordres de control del fabricant de les quals no hi ha
documentació disponible que es pugui fer servir i per tant, o bé no es poden
fer servir en absolut amb els sistemes operatius lliures o només si es fa
servir el controlador facilitat pel fabricant sense el codi font.

Fins i tot amb un controlador facilitat pel fabricant (sense el codi font) del
maquinari quan es compra el dispositiu, la vida útil del dispositiu està
limitada a la disponibilitat del controlador. Actualment, els cicles de
producció s'ha acurçat i no és estrany que poc després de finalitzar el cicle
de producció, el fabricant no posi a disposició dels usuaris actualitzacions
dels controladors. Si els antics controladors de codi tancat no funcionen
després d'una actualització del sistema, un dispositiu en perfectes condicions
es fa inutilitzable degut a que ja no hi ha suport del controlador i no hi ha
cap opció possible en aquest cas. Per això és recomanable evitar la compra de
maquinari amb controladors de codi tancat en primer lloc, a part del sistema
operatiu amb el qual ho voleu fer servir.

Podeu ajudar a millorar aquesta situació demanant als fabricants que alliberin
la documentació del maquinari amb controladors de codi tancat i d'altres
recursos necessaris per a poder proporcionar controladors de codi lliure per
aquest maquinari.

2.4. Mitjans d'instal·lació

Aquesta secció us ajudarà a determinar quins mitjans podeu utilitzar per
instal·lar Debian. Hi ha un capítol complet dedicat als mitjans consagrats,
Capítol 4, Obtenir el suport d'instal·lació del sistema, que llista els
avantatges i desavantatges de cada un d'ells. Una vegada aplegueu a eixa
secció, segurament voldreu tornar a aquesta pàgina.

2.4.1. CD-ROM/DVD-ROM/BD-ROM

La instal·lació des de discs òptics està suportada per a algunes arquitectures.

En els PC estan suportades les unitats òptiques SATA, IDE/ATAPI, USB i SCSI,
així com els dispositius FireWire compatibles amb els controladors ohci1394 i
sbp2.

2.4.2. Dispositiu de memòria USB

Els discs flaix USB, àlies memòries USB, s'ha convertit amb dispositius
àmpliament utilitzats. Els ordinadors més moderns permeten iniciar el
debian-installer des d'aquests dispositius. Molts ordinadors moderns, i
particularment els portàtils i miniportàtils, no tenen unitat òptica i arrencar
des d'un mitjà USB és el sistema estàndard per a instal·lar-hi els sistemes
operatius.

2.4.3. Xarxa

La xarxa es pot fer servir en la instal·lació per a aconseguir fitxers
necessaris en la instal·lació. Que es faci servir la xarxa o no depèn del
mètode seleccionat per a la instal·lació i de les vostres respostes a certes
preguntes que se us faran durant la instal·lació. El sistema d'instal·lació
admet diversos tipus de connexió a la xarxa (inclosa PPPoE però no ISDN o PPP),
ja sigui via HTTP o FTP. Una vegada la instal·lació està completada, podeu
configurar el vostre sistema per a fer servir ISDN i PPP.

També podeu arrencar el sistema d'instal·lació des de la xarxa sense tenir cap
mitjà local del tipus CD/DVD o memòries USB. Si teniu la infraestructura
necessària per arrencar des de la xarxa (p. ex. teniu en marxa serveis DHCP i
TFTP en la vostra xarxa), llavors teniu un sistema molt ràpid per a la
instal·lació a un gran nombre de màquines. Configurar adequadament la
infraestructura necessària requereix un cert nivell d'experiència tècnica, per
la qual cosa no és un mètode aconsellat als principiants.

La instal·lació sense disc, fent servir l'arrencada per xarxa des d'una xarxa
d'àrea local i fent servir un sistema NFS com a sistema de fitxers local, és
una altra opció.

2.4.4. Disc Dur

Arrencar el sistema d'instal·lació directament des del disc dur és un altra
opció per a moltes arquitectures. Açò requerirà un altre sistema operatiu per
copiar l'instal·lador al disc dur. Aquest mètode només es recomana per als
casos especials en què no hi ha una altra opció viable per a la instal·lació.

2.4.5. Sistema Un*x o GNU

Si esteu executant un altre sistema tipus Unix, podríeu utilitzar-lo per
instal·lar Debian GNU/Linux sense utilitzar el debian-installer com es descriu
a la resta del manual. Aquest tipus de instal·lació és prou normal per a
usuaris amb maquinari no suportat o a màquines que no es poden permetre el
temps d'apagada. Si esteu interessats en aquesta tècnica, passeu a Secció D.3,
«Instal·lar Debian GNU/Linux des d'un sistema Unix/Linux». Aquest mètode es
recomana només a usuaris experts quan no és possible fer-ho d'una altra forma.

2.4.6. Sistemes d'emmagatzemament suportats

L'instal·lador Debian inclou un nucli compilat per maximitzar el nombre de
sistemes en els quals pot funcionar.

Normalment, la instal·lació de Debian inclou el suport per a unitats IDE (també
conegut com PATA), controladors i unitats SATA i SCSI, USB i FireWire. Els
sistemes de fitxers suportats inclouen FAT, les extensions Win-32 FAT (VFAT), i
NTFS.

2.5. Requeriments de memòria i espai de disc

Com a mínim hauríeu de tenir 780MB de memòria i 920MB d'espai disponible al
disc dur per dur a terme una instal·lació normal. Fixeu-vos que aquestes xifres
tiren més aviat a la baixa. Per a estimacions més realistes, vegeu Secció 3.4,
«Satisfer els requisits mínims de maquinari».

L'instal·lador normalment activa automàticament trucs d'estalvi de memòria per
poder funcionar en un sistema de memòria tan baix, però en arquitectures que
són menys provades pot ser que no se'n surtin. No obstant això, es poden
activar manualment afegint els paràmetres d'arrencada lowmem=1 o fins i tot
lowmem=2 (vegeu també Secció 6.3.1.1, «Comprovació de la memòria disponible /
mode poca memòria» u Secció 5.3.2, «Paràmetres de l'instal·lador Debian»).

La instal·lació en sistemes amb poca memòria^[2] o espai en disc disponible
podria ser possible però tan sols és recomanable per a usuaris amb experiència.


━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

^[2] Les imatges d'instal·lació que suporten l'instal·lador gràfic necessiten
més memòria que les imatges que tan sols suporten l'instal·lador en mode text i
no s'haurien d'utilitzar en sistemes amb menys de 780MB de memòria. Si podeu
triar entre arrencar l'instal·lador en mode text i el gràfic, el primer és el
que hauríeu de triar en aquests sistemes.

Capítol 3. Abans d'instal·lar Debian GNU/Linux

Sumari

3.1. Resum del procés d'instal·lació
3.2. Feu una còpia de seguretat de les vostres dades!
3.3. Informació necessària

    3.3.1. Documentació
    3.3.2. Fonts d'informació sobre el maquinari
    3.3.3. Compatibilitat del maquinari
    3.3.4. Configuració de la xarxa

3.4. Satisfer els requisits mínims de maquinari
3.5. Pre-particions per a sistemes d'arrencada múltiple
3.6. Configuració del maquinari i del sistema operatiu prèvia a la instal·lació

    3.6.1. Accedir al menú de configuració de la BIOS/UEFI
    3.6.2. Selecció del dispositiu d'arrencada
    3.6.3. Sistemes amb microprogramari UEFI
    3.6.4. Engegada segura («Secure boot»)
    3.6.5. Desactivar l'«arrencada ràpida»/«inici ràpid» de Windows
    3.6.6. Aspectes del maquinari que cal tenir en compte

Aquest capítol s'ocupa de la preparació per instal·lar Debian abans que
arrenqueu l'instal·lador. Això inclou fer copies de seguretat de la vostres
dades, recollir informació del vostre maquinari i localitzar qualsevol
informació necessària.

3.1. Resum del procés d'instal·lació

D'entrada, una nota sobre les reinstal·lacions. En Debian, és ben rar que es
done la circumstància d'haver de tornar a fer una instal·lació completa del
sistema; la fallada mecànica del disc dur potser siga la causa més comuna.

Nombrosos sistemes operatius d'ús generalitzat poden requerir una instal·lació
completa quan es donen fallades crítiques o quan cal actualitzar-los. Fins i
tot si no cal una instal·lació completament nova, sovint els programes que
empreu s'hauran de tornar a instal·lar perquè funcionin correctament en el nou
sistema operatiu.

Sota Debian GNU/Linux, quan les coses van malament és molt més probable que el
sistema operatiu s'haja de reparar abans que reemplaçar-lo. Les actualitzacions
mai no requereixen una instal·lació completa; sempre podeu actualitzar-hi al
sistema estant. A més, els programes són gairebé sempre compatibles amb les
noves versions del sistema operatiu. Si una nova versió d'un programa requereix
programari nou addicional, el sistema de paquets de Debian garanteix la
identificació i la instal·lació automàtiques del programari que cal. És a dir,
s'ha posat molta cura a evitar la necessitat de tornar a instal·lar, per tant
penseu-hi com a veritable últim recurs. L'instal·lador no s'ha dissenyat per
tornar a fer instal·lacions sobre un sistema ja existent.

Aquí hi ha les instruccions amb els passos que es faran durant el procés
d'instal·lació.

 1. Feu una còpia de seguretat de totes les dades o documents que tingueu al
    disc dur on voleu fer la instal·lació.

 2. Recopileu informació sobre el vostre ordinador i sobre qualsevol
    documentació necessària abans de començar la instal·lació.

 3. Localitzeu i/o descarregueu el programari de l'instal·lador i els fitxers
    de qualsevol controlador o microprogramari que necessite la vostra màquina.

 4. Configureu els mitjans d'arrencada com CDs/DVDs/memòria USB o prepareu la
    infraestructura d'arrencada per xarxa des dels que es pugi iniciar
    l'instal·lador.

 5. Arrenqueu el sistema d'instal·lació.

 6. Seleccioneu la llengua d'instal·lació.

 7. Activeu la connexió ethernet de xarxa, si s'escau.

 8. Si és necessari, redimensionau les particions existents en el disc dur per
    obtenir espai per a la instal·lació.

 9. Construiu i munteu les particions en què s'instal·larà Debian.

10. Superviseu la descàrrega/instal·lació/configuració automàtiques del sistema
    base.

11. Seleccioneu i instal·leu programari addicional.

12. Instal·leu un carregador d'arrencada que puga iniciar Debian GNU/Linux i/o
    un altre sistema que tingueu.

13. Carregueu per primera vegada el sistema acabat d'instal·lar.

Per a 64-bit PC teniu l'opció d'emprar una versió gràfica experimental del
sistema d'instal·lació. Per a més informació referent a aquest instal·lador
gràfic, vegeu Secció 5.1.8, «L'instal·lador gràfic».

Si teniu problemes durant la instal·lació, és útil saber quins paquets s'han
instal·lat i en quins passos. En el drama de la instal·lació, els actors
principals són:

L'instal·lador, el debian-installer, és l'objecte principal d'aquest manual.
Detecta el maquinari i carrega els controladors adients, fa servir el
dhcp-client per establir la connexió de xarxa, executa debootstrap a fi
d'instal·lar els paquets del sistema base i el tasksel amb l'objectiu de
permetre-us instal·lar alguns programes addicionals. N'hi ha més d'actors que
fan papers menors en aquest procés, però el debian-installer ha complert la
seva feina quan carregueu el nou sistema per primera vegada.

Per tal d'adaptar el sistema a les vostres necessitats, tasksel us permetrà
triar entre diferents conjunts de programes relacionats amb una mateixa
finalitat, com ara servidor web o entorn d'escriptori.

Una decisió important en la instal·lació és si instal·lar o no un entorn gràfic
d'escriptori, que inclou l'«X Window System» i un dels entorns gràfics
d'escriptori disponibles. Si escolliu no seleccionar la tasca «Entorn
d'escriptori», tan sols disposareu d'un sistema basat en línia d'ordres,
relativament bàsic. La instal·lació de la tasca d'entorn d'escriptori és
opcional ja que necessita d'una gran quantitat d'espai en disc i perquè alguns
sistemes Debian GNU/Linux són servidors que realment no necessiten una
interfície gràfica d'usuari per fer la seua tasca.

Per tant, tingueu en compte que l'«X Window System» està completament separat
del debian-installer; de fet, és més complicat que aquest. Tant la instal·lació
de l'«X Window System» com els problemes relacionats amb aquest estan fora de
l'abast d'aquest manual.

3.2. Feu una còpia de seguretat de les vostres dades!

Abans de començar, assegureu-vos de fer còpia de tots els fitxers del vostre
sistema. Si és la primera vegada que instal·leu un sistema operatiu no nadiu al
vostre ordinador, és molt probable que necessiteu tornar a partir el vostre
disc per fer espai per a Debian GNU/Linux. Cada vegada que partiu el vostre
disc, us arrisqueu a perdre tot el que hi ha al disc, independentment del
programa que utilitzeu. Els programes utilitzats a la instal·lació de Debian
GNU/Linux són molt segurs i tenen molts anys d'ús, però són també molt potents
i un moviment en fals pot costar-vos car. Encara que feu còpia de tot, aneu amb
compte i penseu les vostres respostes i accions. Dos minuts de pensar poden
estalviar hores de treball innecessari.

Si esteu preparant un sistema multi-arrencada, assegureu-vos de tenir els
mitjans de distribució de qualsevol altre sistema operatiu que tingueu a mà.
Tot i que no és usual, podríeu trobar-vos en la situació d'haver de
reinstal·lar el carregador del sistema operatiu per tornar a fer el sistema
arrencable, o en el pitjor cas, el sistema operatiu complet i les còpies de
seguretat prèvies.

3.3. Informació necessària

3.3.1. Documentació

3.3.1.1. Manual d'instal·lació

El document present, en format ASCII pla, HTML o PDF.

  • install.ca.txt

  • install.ca.html

  • install.ca.pdf

3.3.1.2. Documentació sobre el maquinari

Sol contenir informació d'utilitat per a la configuració i ús del maquinari.

  • Pàgina sobre maquinari de la Wiki de Debian

3.3.2. Fonts d'informació sobre el maquinari

En molts casos, l'instal·lador detectarà automàticament el maquinari. Però en
qualsevol cas, és recomanable que us familiaritzeu amb el maquinari abans de la
instal·lació.

La informació sobre el maquinari es pot obtenir de:

  • Els manuals que acompanyen el dispositiu.

  • Les pantalles de configuració de la BIOS/UEFI. Podeu veure aquestes
    pantalles en iniciar l'ordinador prement una combinació de tecles.
    Consulteu el manual per saber la combinació. Sovint cal prémer la tecla 
    Supr o bé F2, però alguns fabricants fan servir altres tecles o
    combinacions de tecles. Normalment, en arrencar l'ordinador es veu un
    missatge informant de quines són les tecles que cal fer servir.

  • Les caixes i cobertes de cada peça de maquinari.

  • La finestra Sistema del Tauler de Control del Windows.

  • Ordres o eines de sistema d'un altre sistema operatiu, incloent-hi els
    gestors d'arxius, especialment útils com a font d'informació sobre la RAM i
    l'espai del disc dur.

  • L'administrador del sistema o el proveïdor del servei d'internet (ISP).
    Aquestes fonts poden indicar-vos els ajusts que calen per configurar la
    xarxa i el correu electrònic.

Taula 3.1. Informació sobre el maquinari requerida per a la instal·lació

┌────────────────┬──────────────────────────────────────────────────────────┐
│   Maquinari    │               Informació que us pot caldre               │
├────────────────┼──────────────────────────────────────────────────────────┤
│                │Quants en teniu.                                          │
│                ├──────────────────────────────────────────────────────────┤
│                │Quin ordre tenen al sistema.                              │
│                ├──────────────────────────────────────────────────────────┤
│                │Si són IDE (també coneguts com PATA), SATA o SCSI.        │
│Discs durs      ├──────────────────────────────────────────────────────────┤
│                │Quant d'espai lliure hi ha.                               │
│                ├──────────────────────────────────────────────────────────┤
│                │Particions.                                               │
│                ├──────────────────────────────────────────────────────────┤
│                │Particions on hi ha instal·lats altres sistemes operatius.│
├────────────────┼──────────────────────────────────────────────────────────┤
│Xarxa           │Model i fabricant de les interfícies de xarxa disponibles.│
├────────────────┼──────────────────────────────────────────────────────────┤
│Impresora       │Model i fabricant.                                        │
├────────────────┼──────────────────────────────────────────────────────────┤
│Targeta de vídeo│Tipus/model i fabricant.                                  │
└────────────────┴──────────────────────────────────────────────────────────┘


3.3.3. Compatibilitat del maquinari

Molts productes de marca funcionen en Linux sense cap problema. A més, el
suport per a maquinari a Linux millora constantment. Tanmateix, el Linux encara
no treballa amb tants tipus diferents de maquinari com altres sistemes
operatius.

En molts casos, els controladors de Linux no s'escriuen per a determinats «
productes» o «marques» d'un fabricant específic, s'escriuen per a un determinat
maquinari/joc de xips («chipset»). Molts productes/marques aparentment distints
es basen en el mateix disseny; no és estrany que els fabricants de xips
proporcionin els anomenats «dissenys de referència» per a productes basats en
els seus xips que son emprats per a diferents fabricants de dispositius i es
comercialitzen amb diferents noms de productes o marques.

Això té avantatges i desavantatges. Una avantatge és que un controlador d'un
joc de xips treballa amb un conjunt de productes de diferents fabricants,
sempre que aquests es basin en el mateix joc de xips. L'inconvenient és que no
és fàcil saber quin és realment el joc de xips que fa servir un producte/marca
concreta. Malauradament, sovint els fabricants de dispositius canvien el
maquinari base del seu producte sense canviar el nom o, almenys, el número de
versió, i en el cas de tenir dos productes amb el mateix nom de producte/marca
comprats en temps diferents, poden estar basats en jocs de xips diferents i fer
servir dos controladors distints o pot ésser que no hi hagi un controlador per
a totes les variants.

Per a dispositius USB i PCI/PCI-Express/ExpressCard, una manera per a saber en
quin joc de xips es basen és mirar el número identificador. Tots els
dispositius USB/PCI/PCI-Express/ExpressCard tenen l'identificador de «proveïdor
» i «producte» i la seva combinació és la mateixa per a cada producte basat en
els mateix joc de xips.

En els sistemes Linux, aquest codis d'identificació es poden llegir amb l'ordre
lsusb per a dispositius USB i amb l'ordre lspci -nn per a dispositius PCI/
PCI-Express/ExpressCard. El codi d'identificació de producte i fabricant
consisteix en dos nombres hexadecimals, separats per dos punts, com per exemple
«1d6b:0001».

Un exemple de resultat de l'ordre lsusb és: «Bus 001 Device 001: ID 1d6b:0002
Linux Foundation 2.0 root hub», on 1d6b és l'identificador del fabricant i 0002
l'identificador del producte.

Un exemple de resultat de l'ordre lspci -nn per a una targeta ethernet: «
03:00.0 Ethernet controller [0200]: Realtek Semiconductor Co., Ltd. RTL8111/
8168B PCI Express Gigabit Ethernet controller [10ec:8168] (rev 06)». Els
identificadors estan dins dels claudàtors, p. ex. aquí 10ec és el fabricant i
8168 és l'identificador del producte.

Un altra exemple de resultat amb una targeta gràfica: «04:00.0 VGA compatible
controller [0300]: Advanced Micro Devices [AMD] nee ATI RV710 [Radeon HD 4350]
[1002:954f]».

En els sistemes Windows, els codis d'identificació dels dispositius es poden
trobar en l'administrador de dispositius, en la secció «detalls», i el codi de
fabricant té el prefixe «VEN_» i el del producte «DEV_». En els sistemes
Windows 7, heu de seleccionar la propietat «ID del maquinari» en l'apartat
detalls l'administrador de dispositius, degut a que no es mostren per defecte.

Cercant l'identificador del fabricant/producte a internet junt a «Linux» i «
driver» com a paraules clau es pot trobar informació sobre el suport actual per
a un cert joc de xips. Si la cerca no dona resultats útils, es pot cercar pel
nom de codi del joc de xips, que també es pot aconseguir amb les ordres «lsusb»
i «lspci» («RTL8111»/«RTL8168B» a l'exemple de les targetes de xarxa i «RV710»
en el de la targeta gràfica).

3.3.3.1. Prova de la compatibilitat del maquinari amb el sistema en viu
(«Live-System»)

Debian GNU/Linux està disponible en el anomenat «live system» (sistema en viu)
per a algunes arquitectures. El sistema en viu està pre-configurat com a
sistema preparat per a fer servir en un format comprimit que pot ésser arrencat
i usat amb un mitja només de lectura com un CD o DVD. Si es fa servir, la
configuració predeterminada, no fa cap tipus de canvi en l'ordinador. Podeu
canviar la configuració d'usuari i instal·lar programes addicionals des del
sistema en viu, però aquests canvis només es fan a la memòria RAM de
l'ordinador, es a dir, si apagau l'ordinador i tornau a arrencar el sistema en
viu, tots els canvis realitzats s'hauran esborrat i es faran servir els valors
predeterminats. Si voleu saber si el vostre maquinari és compatible amb Debian
GNU/Linux, la manera més senzilla es executar Debian en viu i provar-ho.

El sistemes en viu tenen algunes limitacions. La primera és que tots els canvis
realitzats es mantenen només a la RAM de l'ordinador, només funcionen en
sistemes amb prou RAM com per poder fer-ho, i per això, la instal·lació de
paquets addicionals de programari grans pot fallar degut a manca de capacitat
de la RAM. Una altra limitació afecta a la comprovació de la compatibilitat del
maquinari degut a que el sistema oficial en viu de Debian GNU/Linux només fa
servir programari lliure, no inclou fitxers de microprogramari («firmware»)
privatiu. Els paquets de programari que no és lliure es poden instal·lar
manualment en el sistema, però no s'inclou la detecció automàtica dels fitxers
de microprogramari necessari com en el debian-installer, i la instal·lació dels
components privatius s'ha de fer manualment.

Podeu obtenir més informació sobre les variants disponibles d'imatges en viu de
Debian a Debian Live Images website.

3.3.4. Configuració de la xarxa

Si el vostre ordinador està connectat a una xarxa fixa (una connexió ethernet o
una connexió -- equivalent però no amb una connexió d'accés telefònic/PPP)
administrada per una altra persona, haureu de demanar-li la següent informació:

  • El nom del vostre sistema (podríeu decidir-ho vosaltres mateixos).

  • El nom del vostre domini.

  • L'adreça IP del vostre ordinador.

  • La màscara de xarxa que cal fer servir.

  • L'adreça IP de la porta d'enllaç predeterminada per on conduir el tràfic, 
    si es fa servir una porta d'enllaç.

  • El sistema de la xarxa que es farà servir com a servidor de noms de domini
    o DNS.

Si la xarxa on estau connectats fa servir DHCP («Dynamic Host Configuration
Protocol», protocol de configuració dinàmic d'amfitrió) per a configurar la
xarxa, no necessitareu aquesta informació degut a què el servidor DHCP facilita
directament aquesta informació al vostre ordinador en el procés d'instal·lació.

Si teniu accés a internet per DSL o un cable de mòdem (o sigui, mitjançant una
xarxa de tv per cable) i teniu un encaminador (habitualment configurat pel
vostre proveïdor de telefonia o servei de tv per cable) DHCP està disponible
predeterminadament.

Com a regla general, si feu servir un sistema Windows a la xarxa de casa vostra
i no heu hagut de configurar la xarxa manualment per tenir accés a internet, la
connectivitat amb Debian GNU/Linux també es configurarà automàticament.

Si feu servir una xarxa WLAN/WiFi, també cal saber:

  • L'ESSID («nom de la xarxa») de la xarxa sense fils.

  • La contrasenya WEP o WPA/WPA2 per accedir a la xarxa (si s'escau).

3.4. Satisfer els requisits mínims de maquinari

Un cop hàgiu recollit la informació necessària sobre el maquinari del vostre
ordinador, comproveu que aquest us permet fer el tipus d'instal·lació que
voleu.

Depenent de les vostres necessitats, podeu aconseguir-ho amb menys maquinari
del que es recomana a la taula que trobareu a continuació. De tota manera, la
majoria d'usuaris s'arrisquen a tenir frustracions si ignoren aquests
suggeriments.

Un Pentium 4 a 1GHz és el mínim recomanat per a un sistema d'escriptori.

Taula 3.2. Requisits mínims del sistema recomanats

┌────────────────────┬───────────┬────────────────┬────────┐
│Tipus d'instal·lació│RAM (mínim)│RAM (recomanada)│Disc dur│
├────────────────────┼───────────┼────────────────┼────────┤
│Sense escriptori    │256 MiB    │512 MiB         │2 GiB   │
├────────────────────┼───────────┼────────────────┼────────┤
│Amb escriptori      │1 GiB      │2 GiB           │10 GiB  │
└────────────────────┴───────────┴────────────────┴────────┘


El valor mínim assumeix que la memòria d'intercanvi («swap») serà activada i
una imatge que no sigui «liveCD» serà usada. El valor «Sense escriptori» («No
desktop») assumeix que l'instal·lador sense gràfics (en mode text) serà usat.

Els actuals requeriments mínims de memòria són menors que els indicats a la
taula. Amb la memòria d'intercanvi activada, és possible instal·lar Debian amb
tan sols 350MB. El mateix val pels requeriments d'espai en disc, especialment
si escolliu quines aplicacions voleu instal·lar; podeu trobar informació
addicional sobre els requeriments de disc a la Secció D.2, «Espai requerit per
a les tasques».

És possible executar un entorn gràfic d'escriptori a sistemes més vells o de
gama baixa, però en aquest cas es recomana que instal·leu un gestor de
finestres amb menys requeriments que GNOME o KDE Plasma; les alternatives
passen per utilitzar xfce4, icewm i wmaker, però n'hi d'altres per escollir.

És quasi impossible donar els requeriments d'espai o memòria de forma general
per a una instal·lació de servidor ja que depenen molt de l'ús que se li done.

Recordeu que aquestes mides no inclouen tota la resta de materials que
s'acostumen a trobar, com ara fitxers d'usuaris, correu i dades. Sempre és
millor ser generós quan s'està considerant l'espai per als propis fitxers i
dades.

L'espai de disc que es necessita per a un funcionament suau de Debian GNU/Linux
es té en compte en els requeriments recomanats del sistema. Notablement, la
partició /var conté molta informació d'estat específica de Debian, a més del
contingut habitual, com els fitxers de registre. Els fitxers de l'ordre dpkg
(amb informació de tots els paquets instal·lats) fàcilment poden ocupar 40 MiB.
A més, apt hi posa els paquets descarregats abans d'instal·lar-los. Hauríeu
d'assignar com a mínim 200 MiB per a /var, i molt més si instal·leu un entorn
gràfic d'escriptori.

3.5. Pre-particions per a sistemes d'arrencada múltiple

Quan es parla de fer les particions del vostre disc es refereix al fet de
dividir el vostre disc en seccions. Cada secció és independent de les altres.
És bastant similar a posar murs dins d'una casa; si afegiu mobles a una
habitació, no afectarà a les altres habitacions.

Si ja teniu un sistema operatiu al vostre sistema (Windows 9x, Windows NT/2000/
XP/2003/Vista/7, OS/2, MacOS, Solaris, FreeBSD, ...) i voleu afegir Debian al
mateix disc, necessitareu refer les particions del disc. Debian necessita de
les seves particions pròpies al disc. No es pot instal·lar a particions Windows
o MacOS. Es poden compartir algunes particions amb altres sistemes Unix, però
no es descriu ací. Com a mínim necessitareu una partició dedicada pel sistema
de fitxers arrel de Debian.

Podeu trobar informació de la configuració de la vostra partició utilitzant una
eina de fer particions pel vostre sistema operatiu, com l'administrador de disc
a Windows o l'fdisk a DOS. Les eines de fer particions sempre donen un
mecanisme per mostrar les particions existents sense fer canvis.

En general, canviar una partició que ja conté un sistema de fitxers, suposa
esborrar tota la informació que hi tingui. Així, sempre hauríeu de fer copies
de seguretat abans de tornar a fer particions. Utilitzant l'analogia de la
casa, és millor si canvieu tots els mobles fora de la casa abans de moure una
paret pel risc que hi ha de destruir-ho tot.

Molts sistemes operatius moderns poden moure i canviar la mida d'algunes
particions sense destruir el seu contingut. D'aquest manera es pot obtenir
espai addicional per a altres particions sense perdre dades anteriors. Tot i
què aquesta remodelació funciona en la majoria de casos, canviar la mida de les
particions d'un disc és una acció inevitablement perillosa i només s'ha de fer
després d'haver fet una còpia de seguretat de totes les dades. Per a particions
FAT/FAT32 i NTFS, fetes servir en sistemes DOS i Windows, l'habilitat de moure
i canviar la mida sense pèrdues l'ofereixen tant el debian-installer com
l'administrador integrat de disc del Windows 7.

Per redimensionar, sense perdre dades, una partició FAT o NTFS amb el
debian-installer, accediu a l'etapa de fer les particions, seleccioneu l'opció
de partir manualment, seleccioneu la partició a redimensionar i especifiqueu la
nova mida.

La generació i supressió de particions es pot fer amb el debian-installer o des
d'un sistema operatiu ja instal·lat. Com a regla general, les particions es
generen pel sistema amb el que es faran servir, es a dir, les particions que es
faran servir per Debian GNU/Linux es generen amb el debian-installer i les
particions que es faran servin amb altres sistemes operatius es generen amb
aquests. El debian-installer es capaç de generar particions que no siguin Linux
i les particions generades d'aquesta manera funcionen sense problemes amb
altres sistemes operatius, tot i que hi ha alguns casos rars en què això genera
problemes, de manera que si voleu estar segurs, feu servir les utilitats
natives per a generar particions per a fer servir amb altres sistemes
operatius.

Si aneu a instal·lar més d'un sistema operatiu a la mateixa màquina, hauríeu
d'instal·lar tots els altres sistemes abans de fer la instal·lació de Debian.
La instal·lació del Windows i altres SO destruirà l'arrencada del Debian, o us
animarà a formatar les particions no natives.

Es pot recuperar el sistema després d'una d'aquestes accions, però si
instal·leu primer el sistema nadiu, no patireu aquest problema.

3.6. Configuració del maquinari i del sistema operatiu prèvia a la instal·lació

Aquesta secció explica el procés de configuració prèvia a la instal·lació del
maquinari, si s'escau, que cal fer abans d'instal·lar Debian. Normalment es
tracta de fer comprovacions dels ajusts de la BIOS/UEFI o del microprogramari
del sistema, i de vegades de canviar-los. La «BIOS/UEFI» o «microprogramari» és
el programari bàsic emprat pel maquinari; és absolutament necessari durant el
procés d'arrencada (després d'arrencar l'ordinador).

3.6.1. Accedir al menú de configuració de la BIOS/UEFI

La BIOS/UEFI proveeix les funcions bàsiques que es necessiten per arrencar la
vostra màquina i permetre al vostre sistema operatiu accedir al maquinari. El
vostre sistema proveeix un menú de configuració BIOS/UEFI que s'utilitza per
configurar la BIOS/UEFI. Per accedir al menú de configuració de la BIOS/UEFI
haureu de prémer una o vàries tecles després d'encendre l'ordinador. Sovint és
la tecla Suprimir o F2, però alguns fabricants en fan servir d'altres.
Normalment, en arrencar l'ordinador es veu un missatge informant de quines són
les tecles que cal fer servir.

3.6.2. Selecció del dispositiu d'arrencada

Des del menú de configuració de la BIOS/UEFI, podeu seleccionar els dispositius
i l'ordre de comprovació en iniciar el sistema. Les possibilitats a seleccionar
inclouen els disc durs interns, el lector de CD/DVD-ROM i els dispositius
d'emmagatzemament massiu com a memòries o disc externs USB. Els sistemes més
moderns ofereixen la possibilitat d'activar l'arrencada per xarxa amb PXE.

Depenent dels mitjans d'instal·lació (CD/DVD ROM, memòria USB, inicia des de la
xarxa) que heu triat heu d'habilitar els dispositius apropiats per arrencar si
no estan ja habilitats.

La majoria de versions de la BIOS/UEFI permeten accedir a un menú d'arrencada
on és possible seleccionar el dispositiu d'arrencada de l'ordinador en la
sessió actual. Si aquest opció està disponible, la BIOS/UEFI mostra un missatge
curt del tipus «press F12 for boot menu» quan el sistema arrenca. La tecla que
es fa servir per a accedir en aquest menú canvia d'un sistema a l'altra; les
més usades son F12, F11 i F8. Seleccionant el dispositiu des d'aquest menú no
es canvia l'ordre d'arrencada predeterminat de la BIOS/UEFI, de manera que
podeu arrencar des d'una memòria USB tot i tenir seleccionat un disc dur intern
com a dispositiu primari d'arrencada.

Si la vostra BIOS/UEFI no facilita aquesta opció del menú d'inici per poder
seleccionar a voluntat el dispositiu d'arrencada actual, haureu de canviar la
configuració de la BIOS/UEFI per a fer que el dispositiu des del qual arrencau
el debian-installer sigui el dispositiu primari per arrencar.

Malauradament alguns ordinadors tenen versions de la BIOS/UEFI amb errors.
L'arrencada del debian-installer des d'una memòria USB pot no funcionar encara
que aquesta sigui una opció disponible en el menú de la BIOS/UEFI i la memòria
USB sigui la seleccionada com a dispositiu d'arrencada. En alguns d'aquests
sistemes, l'arrencada amb una memòria USB és impossible; en alguns casos es pot
enganyar al sistema per arrencar-lo des de la memòria USB canviant a la BIOS el
tipus de dispositiu «disc dur USB» o «memòria USB» predeterminat per «USB ZIP»
o «USB CDROM». Més concretament, si feu servir una imatge híbrida CD/DVD en una
memòria USB (llegiu Secció 4.3.1, «Preparar una memòria USB fent servir una
imatge híbrida de CD/DVD»), canviar el tipus de dispositiu a «USB CDROM» ajuda
amb algunes BIOS que no arrenquen des d'una memòria USB en mode de disc dur
USB. Potser necessitareu configurar la BIOS/UEFI perquè activi el «suport per
USB antic».

Si no podeu manipular la BIOS/UEFI per tal d'arrencar directament des d'una
memòria USB teniu l'opció de fer servir una ISO copiada en una memòria USB.
Arrencar el debian-installer fent servir Secció 4.4, «Preparació dels fitxers
per arrencar des del disc dur» i, després de revisar els disc cercant una
imatge ISO, seleccionar el dispositiu USB i la imatge d'instal·lació.

3.6.3. Sistemes amb microprogramari UEFI

UEFI («Unified Extensible Firmware Interface») és un nou tipus de
microprogramari que fan servir molts sistemes moderns i, entre d'altres usos,
reemplaçarà la BIOS dels PC clàssics.

Actualment, la majoria de PC que fan servir UEFI també tenen l'anomenat «
Compatibility Support Module» (CSM) en el microprogramari, que proporciona al
sistema operatiu exactament les mateixes interfícies que el clàssic BIOS de PC,
de manera que el programari escrit per les BIOS de PC funcionen sense canvis.
No obstant això, UEFI està destinat a substituir completament l'antic BIOS
sense ésser totalment compatible i ja hi ha molts sistemes amb UEFI però sense
CSM.

En els sistemes amb UEFI hi ha una sèrie d'aspectes que cal tenir en compte a
l'hora d'instal·lar un sistema operatiu. El mètode de càrrega del sistema
operatiu per part del microprogramari és fonamentalment diferent entre el
clàssic BIOS (o UEFI en mode CSM) i el UEFI nadiu. Una de les diferències més
destacables es el mètode en què es fan les particions en el disc dur. Amb el
clàssic BIOS i amb UEFI en mode CSM es fa servir una taula de particions DOS
mentre que UEFI fa servir un esquema de particions diferent anomenat «GUID
Partition Table» (GPT). En un sol disc, per a raons pràctiques només es pot fer
servir un dels dos sistemes i en el cas d'arrencada múltiple amb diferents
sistemes operatius en només un disc, tots ells han de fer servir el mateix
tipus de taula de particions. L'arrencada des d'un disc amb GPT només és
possible amb mode UEFI nadiu, però l'ús de GPT es fa cada vegada més comú així
com augmenten les mides dels disc, degut a que la taula de particions clàssica
DOS no pot indexar disc de més de 2 terabytes mentre que GPT admet disc de més
capacitat. Una altra diferència important entre els dos sistemes és la ubicació
del codi d'arrencada i el format en què es fa. Per això calen diferents
carregadors d'arrencada per a cada sistema.

Aquesta darrera diferència es torna important per arrencar debian-installer en
sistemes amb UEFI i CSM degut a què debian-installer comprova si s'arrenca en
un sistema amb BIOS o UEFI nadiu i instal·la el carregador adequat. Normalment
funciona correctament però i pot haver problemes en el cas de arrencades
múltiples. En alguns sistemes UEFI amb CSM el mode predeterminat d'arrencada
per a dispositius desmuntables és diferent del que es fa servir actualment amb
els disc durs, de manera que quan s'arrenca l'instal·lador des d'una memòria
USB d'una manera diferent en com s'arrenca un altra sistema operatiu instal·lat
en el disc dur, podria passar que s'instal·li un carregador incorrecte i que el
sistema no arranqui una vegada acabada la instal·lació. Quan s'elegeix el
dispositiu d'arrencada des del menú d'arrencada del microprogramari, alguns
sistemes ofereixen dues opcions separades per a cada dispositiu, de manera que
l'usuari pot elegir si l'arrencada es farà en el mode CSM o UEFI nadiu.

3.6.4. Engegada segura («Secure boot»)

Una altre aspecte lligat a UEFI és l'anomenat mecanisme d'«arrencada segura»
(«secure boot»). L'arrencada segura és una funció d'UEFI amb la qual el
microprogramari només carrega i executa codi signat criptogràficament amb
determinades claus i bloquege qualsevol codi d'arrencada (potencialment
perillós) que no estigui signat o signat amb claus desconegudes. A la pràctica,
l'única clau acceptada de forma predeterminada en molts sistemes UEFI amb
arrencada segura és la clau que Microsoft fa servir per al seu carregador
d'arrencada. Debian inclou un gestor d'arrencada «shim» (que "tradueix" al vol)
signat per Microsoft, de manera que hauria de funcionar correctament en
sistemes amb l'arrencada segura activada.

3.6.5. Desactivar l'«arrencada ràpida»/«inici ràpid» de Windows

Windows ofereix una característica (anomenada «arrencada ràpida» a Windows 8, «
inici ràpid» a Windows 10) per reduir el temps d'arrencada del sistema.
Tècnicament, quan aquesta opció està activada, Windows 8 no s'atura realment ni
arrenca de nou quan es torna a aturar, en canvi fa una cosa semblant a una
suspensió al disc per a reduir el temps d'«arrencada». Mentre el Windows sigui
l'únic sistema operatiu a la màquina no hi ha cap problema, però sí n'hi pot
haver i amb pèrdua de dades en el cas de l'arrencada dual si un altre sistema
operatiu accedeix a un sistema de fitxers als quals accedeix el Windows. En
aquest cas, l'estat real del sistema de fitxers pot ésser diferent a l'estat
conservat per Windows després de l'«arrencada ràpida» i pot ocasionar la
corrupció del sistema d'arxius després de successius accessos d'escriptura. Per
tant, en un sistema d'arrencada dual, per evitar la corrupció del sistema
d'arxius, la característica d'«arrencada ràpida»/«inici ràpid» s'ha de
desactivar a Windows.

A més, el mecanisme d'actualització de Windows (de vegades) ha estat conegut
per rehabilitar automàticament aquesta característica, després que l'usuari
l'hagi inhabilitat prèviament. Se suggereix que es torni a comprovar aquest
paràmetre periòdicament.

També pot ésser necessari desactivar «l'arrencada ràpida» per poder accedir a
la configuració de l'UEFI i poder arrencar un sistema operatiu diferent o
debian-installer. En molts sistemes UEFI, el microprogramari redueix el temps
d'«arrencada» deixant d'inicialitzar el controlador del teclat o els
dispositius USB; en aquests casos, és necessari arrencar el Windows i
desactivar aquesta funcionalitat per a poder canviar l'ordre d'arrencada.

3.6.6. Aspectes del maquinari que cal tenir en compte

Funcionalitats USB de la BIOS i teclats. Si en lloc d'un teclat de tipus PS/2
teniu un model USB, potser haureu d'habilitar l'emulació antiga de teclats en
la configuració de la BIOS por poder fer servir el teclat amb el menú del
carregador d'arrencada, tot i què això no passa amb els ordinadors moderns. Si
el vostre teclat no funciona amb el menú del carregador d'arrencada, consultau
el manual de la placa base i cercau a la BIOS les opcions «Legacy keyboard
emulation» o «USB keyboard support».

Capítol 4. Obtenir el suport d'instal·lació del sistema

Sumari

4.1. Imatges oficials d'instal·lació de Debian GNU/Linux
4.2. Descarregar fitxers de les rèpliques de Debian

    4.2.1. On trobar arxius d'instal·lació

4.3. Preparació dels fitxers per arrencar amb el llapis de memòria USB

    4.3.1. Preparar una memòria USB fent servir una imatge híbrida de CD/DVD
    4.3.2. Copiar manualment els fitxers en la memòria USB
    4.3.3. Còpia dels fitxers -- la manera flexible

4.4. Preparació dels fitxers per arrencar des del disc dur

    4.4.1. Iniciar la instal·lació des del disc dur amb Linux fent servir GRUB
    4.4.2. Iniciar la instal·lació des del disc dur amb DOS fent servir loadlin

4.5. Preparació dels fitxers per a l'arrencada en xarxa TFTP

    4.5.1. Configurar un servidor DHCP
    4.5.2. Configurar un servidor BOOTP
    4.5.3. Habilitació del servidor TFTP
    4.5.4. Posar les imatges del TFTP al seu lloc

4.6. Instal·lació automàtica

    4.6.1. Instal·lació automàtica utilitzant l'instal·lador de Debian

4.7. Verificant la integritat dels arxius d'instal·lació

4.1. Imatges oficials d'instal·lació de Debian GNU/Linux

Sens dubte la manera més senzilla d'instal·lar Debian GNU/Linux és fent servir
un conjunt d'imatges d'instal·lació oficials de Debian. Podeu adquirir-ne un
conjunt de CDs/DVDs a un distribuïdor (vegeu la pàgina de venedors dels CD).
També podeu descarregar les imatges d'instal·lació allotjades a una rèplica de
Debian i fer-vos el vostre lot propi, si teniu una connexió de xarxa ràpida i
una gravadora de CD/DVD (vegeu la pàgina dels CD/DVD de Debian i Debian CD FAQ
per a instruccions detallades). Si ja disposeu dels mitjans òptics
d'instal·lació i podeu arrencar amb ells la vostra màquina, que és el cas en
tots els PCs moderns, podeu anar a Capítol 5, Arrencada del sistema
d'instal·lació. S'ha tingut molta cura a assegurar que els fitxers més
importants siguin a la primera imatge de CD i DVD, de manera que una
instal·lació bàsica d'escriptori es pot fer només amb el primer DVD o - en una
extensió limitada - només amb la primera imatge de CD.

Com què els CD tenen una capacitat limitada pels estàndards actuals, no és
possible instal·lar qualsevol entorn d'escriptori fent servir només el primer
CD; per a alguns entorns d'escriptori la instal·lació amb CD necessita connexió
de xarxa en el procés d'instal·lació per a aconseguir fitxers o CD addicionals.

A més, tingueu en compte: si el medi d'instal·lació que esteu usant no conté
alguns paquets que necessiteu, sempre podeu instal·lar-los a posteriori des del
vostre nou sistema Debian funcionant (un cop la instal·lació hagi acabat). Si
us cal saber en quina imatge d'instal·lació podeu trobar un paquet específic,
visiteu https://cdimage-search.debian.org/.

Si el vostre ordinador no permet l'arrencada usant mitjans òptics (només
rellevant en sistemes molt antics), però teniu un lot de CD/DVD, podeu
utilitzar una estratègia alternativa, com per exemple el disc dur, el llapis
usb, l'arrencada en xarxa, o la càrrega manual del nucli des del disc per
arrencar inicialment l'instal·lador del sistema. Els fitxers que calen per
arrencar d'altres maneres són també al disc; l'estructura de l'arxiu en xarxa
de Debian i la dels directoris al disc és idèntica. Així, quan tot seguit
s'indiquen els camins de fitxers específics que calen per arrencar, cerqueu-los
als mateixos directoris i subdirectoris als vostres mitjans d'instal·lació.

Quan l'instal·lador s'haja arrencat, ja podrà obtenir del disc la resta de
fitxers necessaris.

Si no teniu cap lot de mitjans d'instal·lació, haureu de descarregar els
fitxers del sistema d'instal·lació i posar-los a el disc dur o al llapis usb o
a un ordinador connectat perquè puguen emprar-se per a arrencar l'instal·lador.

4.2. Descarregar fitxers de les rèpliques de Debian

Per trobar la rèplica més pròxima (i possiblement la més ràpida), mireu la
llista de rèpliques de Debian.

4.2.1. On trobar arxius d'instal·lació

Diverses imatges d'instal·lació es poden trobar en cada rèplica de Debian al
directori debian/dists/bullseye/main/installer-amd64/current/images/ -- el
MANIFEST llista cada imatge i el seu propòsit.

4.3. Preparació dels fitxers per arrencar amb el llapis de memòria USB

Per preparar el llapis USB, us recomanem usar un sistema amb GNU/Linux ja
funcionant i que suporti dispositius USB. Els sistemes GNU/Linux actuals
normalment reconeixen automàticament els llapis USB així que es connecten. Si
no és el cas, hauríeu de comprovar que estigui carregat el mòdul «usb-storage»
del nucli. Quan connecteu el llapis USB, aquest estarà representat per un
dispositiu anomenat /dev/sdX, on la «X» és una lletra en minúscules (a-z).
Hauríeu de poder veure de quin dispositiu es tracta més exactament executant
l'ordre lsblk abans i després de connectar-lo (La resposta de dmesg (executat
com a «root») és una manera alternativa. Per escriure-hi, és possible que
calgui desactivar la protecció d'escriptura del llapis USB.

Avís

Els procediments que es descriuen en aquesta secció destruiran tot el que hi
hagi al dispositiu! Assegureu-vos que esteu utilitzant el nom de dispositiu
corresponent al llapis USB. Si utilitzeu un nom de dispositiu incorrecte podeu
arribar a perdre les dades de, per exemple, un disc dur.

4.3.1. Preparar una memòria USB fent servir una imatge híbrida de CD/DVD

Les imatges d'instal·lació de Debian per a aquesta arquitectura es creen amb la
tecnologia isohybrid; això vol dir que es poden escriure directament a una
memòria USB, que resulta ésser un sistema molt senzill d'obtenir un medi
d'instal·lació. Seleccioneu una imatge (ja sigui la d'instal·lació per xarxa,
«netinst», CD o DVD-1) que càpiga a la vostra memòria USB. Vegeu Secció 4.1,
«Imatges oficials d'instal·lació de Debian GNU/Linux» per a obtenir una imatge
d'instal·lació.

Una altra opció, per a memòries USB molt petites, només d'alguns megabits de
capacitat, és descarregar la imatge mini.iso des del directori netboot (a
l'adreça citada a Secció 4.2.1, «On trobar arxius d'instal·lació»).

La imatge d'instal·lació que heu seleccionat es pot escriure directament en la
memòria USB, reemplaçant el seu contingut actual. Per exemple, fent servir un
sistema GNU/Linux ja operatiu, es pot escriure el fitxer d'imatge en una
memòria USB com s'indica a continuació, després d'assegurar-vos que la memòria
USB no està muntada:

# cp debian.iso /dev/sdX
# sync

Informació sobre com fer-ho en altres sistemes operatius es pot trobar a les
Debian CD FAQ.

Important

La imatge s'ha d'escriure en un disc sencer i no en una partició, p. ex. /dev/
sdb and not /dev/sdb1. No faceu servir eines del tipus unetbootin que
modifiquen la imatge.

Important

Escrivint la imatge d'instal·lació en una memòria USB hauria d'ésser suficient
per a la majoria d'usuaris. Les altres opcions descrites a continuació, són més
complexes i van dirigides a aquelles persones amb exigències especials.

La imatge híbrida en una memòria USB no ocupa tota la capacitat disponible, de
manera que pot valer la pena fer servir l'espai lliure per a fitxers de
microprogramari («firmware») o paquets o altres fitxers de la vostra elecció.
Vos pot ésser útil si només disposau d'una memòria USB o bé voleu fer servir la
memòria per altres coses.

Per fer-ho, useu cfdisk o una eina de particionat alternativa per crear una
partició addicional al llapis de memòria. Tot seguit, creeu un sistema de
fitxers (FAT) a la partició, monteu-la i copieu-hi o descomprimiu-hi el
«firmware», per exemple amb:

# mkdosfs -n FIRMWARE /dev/sdX3
# mount /dev/sdX3 /mnt
# cd /mnt
# tar zxvf /directori/de/firmware.tar.gz
# cd /
# umount /mnt

Vigileu que useu el nom de dispositiu correcte del llapis USB. L'ordre mkdosfs
es troba al paquet Debian dosfstools.

Nota

Si heu triat el mini.iso per escriure'l a la memòria USB, la segona partició no
s'ha de generar atès que - molt agradablement - ja hi estarà present.
Desconnectant i tornant a connectar la memòria USB es podrà fer visibles les
dues particions.

4.3.2. Copiar manualment els fitxers en la memòria USB

Abans que la tecnologia «isohybrid» s'utilitzés per a les imatges
d'instal·lació Debian, els mètodes documentats en els capítols següents
s'utilitzaven per preparar mitjans per arrencar des de dispositius USB. Aquests
han estat substituïts per la tècnica de Secció 4.3.1, «Preparar una memòria USB
fent servir una imatge híbrida de CD/DVD», però s'han deixat aquí amb propòsit
informatiu i històric en cas que siguin útils per a algun usuari.

Una alternativa al mètode descrit a Secció 4.3.1, «Preparar una memòria USB
fent servir una imatge híbrida de CD/DVD» és copiar manualment els fitxers de
l'instal·lador, i també una imatge d'instal·lació, al llapis. Fixeu-vos que el
llapis USB ha de tenir una mida mínima de 1 GiB (és possible configurar un
llapis amb menys capacitat usant els arxius del «netboot», com es descriu a la
Secció 4.3.3, «Còpia dels fitxers -- la manera flexible»).

Hi ha un fitxer complet hd-media/boot.img.gz que conté tots el fitxers de
l'instal·lador (incloent el nucli) així com syslinux i el seu fitxer de
configuració.

Nota

Fixeu-vos que, tot i semblar còmode, aquest mètode té un desavantatge: la mida
lògica del dispositiu estarà limitada a 1 GiB, encara que la capacitat del
llapis USB sigui superior. Si voleu utilitzar-lo per a altres propòsits haureu
de tornar a partir el llapis USB i generar nous sistemes de fitxers per
disposar de tota la seva capacitat.

Simplement descomprimiu aquesta imatge directament al llapis USB:

# zcat boot.img.gz > /dev/sdX

Després d'això, munteu el llapis de memòria USB (mount /dev/sdX /mnt), que ara
tindrà un sistema de fitxers FAT, i copieu-hi una imatge ISO Debian («netinst»
o un CD complet; vegeu Secció 4.1, «Imatges oficials d'instal·lació de Debian
GNU/Linux»). Finalment, desmunteu el llapis (umount /mnt) i ja esteu preparats.

4.3.3. Còpia dels fitxers -- la manera flexible

Si voleu més flexibilitat o voleu saber què esteu fent, heu de seguir aquest
mètode per posar els fitxers al vostre llapis. Un avantatge d'utilitzar aquest
mètode és que -- si el llapis USB té prou capacitat -- podreu copiar-hi una
imatge ISO, fins i tot una imatge DVD.

4.3.3.1. Particionar i afegir un gestor d'engegada

Mostrarem com configurar un llapis de memòria per utilitzar la primera partició
d'aquest, en comptes del dispositiu complet.

Per arrencar el nucli després d'arrencar des del llapis USB, posarem un
carregador d'arrencada al llapis. Malgrat que hauria de funcionar qualsevol
carregador, és convenient utilitzar syslinux, ja que utilitza una partició
FAT16 i pot reconfigurar-se editant tan sols un fitxer de text. Qualsevol
sistema operatiu que suporti el sistema de fitxers FAT pot utilitzar-se per
canviar la configuració del carregador d'arrencada.

Primer, necessiteu instal·lar els paquets syslinux i mtools al sistema.

Nota

La major part dels llapis USB venen preconfigurats amb una única partició
FAT16, així que en general no serà necessari tornar a partir o tornar a
formatar-lo. Si heu de fer-ho, utilitzeu el cfdisk o qualsevol altra eina per
fer la partició FAT16 ara^[3], i aleshores generau un MBR fent:

# cat /usr/lib/syslinux/mbr/mbr.bin
>/dev/sdX

Ara, per a generar el sistema de fitxers, feu servir:

# mkdosfs /dev/sdX1

Aneu amb compte d'utilitzar el nom del dispositiu correcte pel vostre llapis
USB. L'ordre mkdosfs és al paquet Debian dosfstools.

Tenint el llapis USB correctament particionat (ara), heu de posar el syslinux a
la partició FAT16 amb:

# syslinux /dev/sdX1

Altra vegada, aneu amb compte i utilitzeu el nom correcte per al dispositiu. La
partició no ha d'estar muntada quan executeu l'ordre syslinux. Aquest
procediment escriu un sector d'arrencada a la partició i genera el fitxer
ldlinux.sys que conté el codi del carregador d'arrencada.

4.3.3.2. Afegir els arxius de l'instal·lador

Hi ha dues variants d'instal·lació diferents per triar aquí: La variant
«hd-media» necessita un fitxer ISO d'instal·lació al llapis per carregar mòduls
d'instal·lació i el sistema base. L'instal·lador «netboot», en canvi, ho
descarregarà tot des d'un mirall Debian.

D'acord amb la vostra tria, heu de descarregar alguns arxius de l'instal·lador
del subdirectori «hd-media» o «netboot» a debian/dists/bullseye/main/
installer-amd64/current/images/ de qualsevol mirall Debian:

  • vmlinuz o linux (imatge del nucli)

  • initrd.gz (imatge inicial del disc RAM)

Podeu escollir entre la versió en mode text de l'instal·lador (els arxius es
poden trobar directament a «hd-media» o «netboot») o en la seua versió gràfica
(busqueu-la en el corresponent subdirectori gtk.

Després munteu la partició (mount /dev/sdX1 /mnt) i copieu els fitxers
descarregats al directori arrel del llapis USB.

A continuació heu de generar un fitxer de text anomenat syslinux.cfg al
directori arrel del llapis com a arxiu de configuració per al «syslinux», que
haurà de contenir com a mínim la línia següent:

default vmlinuz initrd=initrd.gz

Canvieu el nom del binari del nucli per«linux» si heu usat arxius del netboot.

Per a l'instal·lador gràfic (de gtk) haureu d'afegir vga=788 al final de la
línia. Es poden afegir altres paràmetres si fes falta.

Per habilitat l'indicador d'arrencada per a permetre afegir paràmetres
addicionals, afegiu la línia prompt 1.

Si heu utilitzat fitxers de hd-media, ara haureu de copiar el fitxer ISO d'una
imatge d'instal·lació Debian al llapis. (Això no fa falta amb la variant
netboot.)

Podeu emprar una imatge «netinst» o una de CD/DVD complet (vegeu Secció 4.1,
«Imatges oficials d'instal·lació de Debian GNU/Linux»). Assegureu-vos
d'emprar-ne una que hi càpiga. Adoneu-vos que la imatge «netboot mini.iso» no
és vàlida per a aquest propòsit.

Quan esteu llestos, desmunteu el llapis de memòria USB (umount /mnt).

4.4. Preparació dels fitxers per arrencar des del disc dur

L'instal·lador es pot arrencar fent ús de fitxers que són a una partició d'un
disc dur: o bé llançat des d'un altre sistema operatiu, o bé cridant
directament un carregador des de la BIOS. En sistemes UEFI moderns, el nucli es
pot arrencar directament de la partició UEFFI sense necessitat un gestor
d'arranc.

Es pot aconseguir una instal·lació completa amb «xarxa pura» utilitzant aquesta
tècnica. Açò evita tota la confusió de mitjans extraïbles, com trobar i gravar
imatges de CD/DVD.

4.4.1. Iniciar la instal·lació des del disc dur amb Linux fent servir GRUB

Aquesta secció explica com afegir o com reemplaçar una instal·lació existent
utilitzant GRUB.

Al moment d'arrencar, GRUB suporta carregar a memòria no tan sols el nucli,
sinó també una imatge del disc. Aquest disc RAM pot ser utilitzat pel nucli com
el sistema de fitxers arrel.

Copieu els fitxers següents des dels arxius de Debian a un lloc adient al
vostre disc dur, per exemple a /boot/newinstall/.

  • vmlinuz (imatge del nucli)

  • initrd.gz (imatge del disc RAM)

Si voleu utilitzar el disc dur únicament per a l'arrencada i voleu baixar-ho
tot des de la xarxa, hauríeu de baixar el fitxer netboot/debian-installer/amd64
/initrd.gz i el nucli corresponent netboot/debian-installer/amd64/linux. Us
permetrà tornar a partir el disc dur del qual heu arrencat l'instal·lador. Tot
i això, ho hauríeu de fer amb molt de compte.

Si durant la instal·lació preteneu mantenir sense modificacions una partició
existent al disc dur, podeu baixar el fitxer hd-media/initrd.gz i el nucli
hd-media/vmlinuz, i també copiar una imatge d'instal·lació al disc dur
(assegureu-vos que el nom del fitxer acaba amb .iso). En aquest cas
l'instal·lador pot arrencar des del disc dur i instal·lar des de la imatge
d'instal·lació sense necessitar la xarxa.

Finalment, per configurar el carregador continueu a Secció 5.1.5, «Arrencada
des de Linux utilitzant GRUB».

4.4.2. Iniciar la instal·lació des del disc dur amb DOS fent servir loadlin

Aquesta secció explica com preparar el vostre disc dur per a iniciar la
instal·lació des de DOS fent servir loadlin.

Copia els següent directoris des de la imatge d'instal·lació de Debian a c:\.

  • /install.amd (binari del nucli i imatge del disc de memòria)

  • /tools (eina «loadlin»)

4.5. Preparació dels fitxers per a l'arrencada en xarxa TFTP

Si teniu una màquina connectada a una xarxa d'àrea local, podeu arrencar-la des
d'una altra màquina de la xarxa fent servir TFTP. Si voleu arrencar el sistema
d'instal·lació des d'una altra màquina, els fitxers d'arrencada hauran de
col·locar-se a llocs específics d'aquesta, la qual ha de configurar-se a fi de
permetre l'arrencada de la vostra.

Heu d'instal·lar un servidor TFTP, i en nombroses màquines, cal també un
servidor DHCP , o un servidor BOOTP.

BOOTP és un protocol IP que indica a l'ordinador la seua pròpia adreça IP i el
lloc de la xarxa on obtenir la imatge d'arrencada. El DHCP (Protocol de
configuració dinàmica d'ordinadors centrals) és una extensió més flexible, i
compatible, del BOOTP. Alguns sistemes només es poden configurar fent servir el
DHCP.

El protocol de transferència trivial de fitxers (TFTP) s'empra per posar a
disposició del client la imatge d'arrencada. En teoria, es pot usar qualsevol
servidor de qualsevol plataforma que implemente aquests protocols. Els exemples
d'aquesta secció ofereixen instruccions per al SunOS 4.x, el SunOS 5.x (àlies
Solaris) i el GNU/Linux.

Nota

Per a un servidor Debian GNU/Linux es recomana tftpd-hpa. Ha estat escrit pel
mateix autor del carregador d'arrencada syslinux i és per tant el que menys
problemes hauria de donar. Una bona alternativa és atftpd.

4.5.1. Configurar un servidor DHCP

Un servidor que és programari gratuït de DHCP és el dhcpd d'ISC. A Debian GNU/
Linux, es recomana utilitzar el paquet isc-dhcp-server. Hi ha un fitxer
d'exemple de configuració per utilitzar-lo (normalment /etc/dhcpd3/dhcpd.conf):

option domain-name "example.com";
option domain-name-servers ns1.example.com;
option subnet-mask 255.255.255.0;
default-lease-time 600;
max-lease-time 7200;
server-name "servername";

subnet 192.168.1.0 netmask 255.255.255.0 {
  range 192.168.1.200 192.168.1.253;
  option routers 192.168.1.1;
}

host clientname {
  filename "/tftpboot.img";
  server-name "servername";
  next-server servername;
  hardware ethernet 01:23:45:67:89:AB;
  fixed-address 192.168.1.90;
}

En aquest exemple, hi ha un servidor servername que fa tota la feina del
servidor DHCP, servidor de TFTP i passarel·la de xarxa. És quaasi segur que
necessitareu canviar les opcions «domain-name», i també el nom del servidor i
l'adreça màquina del client. L'opció filename hauria de ser el nom del fitxer
que es descarregarà per TFTP.

Després d'editar el fitxer de configuració del dhcpd, reengegueu-lo amb /etc/
init.d/isc-dhcp-server restart.

4.5.1.1. Habilitar l'arrencada amb PXE a la configuració del servidor de DHCP

Aquí teniu un altre exemple de dhcp.conf que fa servir el mètode Pre-boot
Execution Environment (PXE) de TFTP.

option domain-name "example.com";

default-lease-time 600;
max-lease-time 7200;

allow booting;
allow bootp;

# El paràgraf següent necessita modificar per ajustar-lo al vostre cas
subnet 192.168.1.0 netmask 255.255.255.0 {
  range 192.168.1.200 192.168.1.253;
  option broadcast-address 192.168.1.255;
# la adreça de la passarel·la podria ser diferent
# (l'accés a Internet de exemple)
  option routers 192.168.1.1;
# poseu el dns que utilitzeu
  option domain-name-servers 192.168.1.3;
}

group {
  next-server 192.168.1.3;
  host tftpclient {
# adreça màquina del client tftp
  hardware ethernet  00:10:DC:27:6C:15;
  filename "pxelinux.0";
 }
}

Adoneu-vos que en l'arrencada amb PXE, el fitxer client de nom pxelinux.0 és el
carregador de l'arrencada, no una imatge del nucli (vegeu Secció 4.5.4, «Posar
les imatges del TFTP al seu lloc» més endavant).

Si la vostra màquina usa UEFI per engegar, haureu d'especificar un gestor
d'arranc apropiat per a màquines UEFI, per exemple

group {
  next-server 192.168.1.3;
  host tftpclient {
# adreça mac del client tftp
  hardware ethernet  00:10:DC:27:6C:15;
  filename "debian-installer/amd64/bootnetx64.efi";
 }
}

4.5.2. Configurar un servidor BOOTP

Hi ha dos servidors de BOOTP a GNU/Linux. El primér és el bootpd de CMU.
L'altre és també un servidor de DHCP, el dhcpd de ISC. A Debian GNU/Linux són
als paquets bootp i isc-dhcp-server respectivament.

Per fer servir el bootpd de CMU, elimineu el comentari (o bé afegiu) la línia
important al /etc/inetd.conf. A Debian GNU/Linux, podeu executar update-inetd
--enable bootps, i després /etc/init.d/inetd reload per aconseguir-ho. En el
cas que el servidor BOOTP no utilitze Debian, la línia en qüestió seria com
aquesta:

bootps  dgram  udp  wait  root  /usr/sbin/bootpd  bootpd -i -t 120

Ara, podeu generar un fitxer /etc/bootptab. Aquest té el mateix tipus de format
críptic i familiar que els antics fitxers de BSD printcap, termcap, i disktab.
Vegeu la pàgina de manual del bootptab per obtenir més informació. Pel bootpd
de CMU, necessitareu saber l'adreça màquina (MAC) del client. A continuació
teniu exemple de /etc/bootptab:

client:\
  hd=/tftpboot:\
  bf=tftpboot.img:\
  ip=192.168.1.90:\
  sm=255.255.255.0:\
  sa=192.168.1.1:\
  ha=0123456789AB:

Necessitareu canviar al menys l'opció «ha», que especifica l'adreça màquina del
client. L'opció «bf» especifica quin fitxer hauria de descarregar un client via
TFTP; per a més detalls, vegeu Secció 4.5.4, «Posar les imatges del TFTP al seu
lloc».

Per altra banda, configurar el BOOTP amb el dhcpd d'ISC és molt fàcil, ja que
considera els clients BOOTP com un cas un poc especial de clients de DHCP. A
algunes arquitectures necessitareu d'una configuració complexa per arrencar els
clients via BOOTP. Si aquest és el vostre cas, llegiu la secció Secció 4.5.1,
«Configurar un servidor DHCP». Altrament, ho aconseguireu afegint la directiva
allow bootp al bloc de configuració per la xarxa que conté el client al fitxer
/etc/dhcp/dhcpd.conf, i reiniciant el dhcpd amb /etc/init.d/isc-dhcp-server
restart.

4.5.3. Habilitació del servidor TFTP

Per a posar en marxa el servidor TFTP, assegureu-vos primer que teniu activat
el tftpd.

En el cas de tftpd-hpa hi ha dues formes d'executar el servei. Pot ser iniciat
sota demanda pel dimoni inetd del sistema o es pot configurar per a executar
com un dimoni independent. El mètode a emprar és seleccionat en instal·lar el
paquet i pot ser canviat reconfigurant aquest.

Nota

Històricament, els servidors TFTP utilitzen el directori /tftpboot per servir
les imatges. Per altra banda, els paquets de Debian GNU/Linux poden utilitzar
altres directoris per complir amb l'Estàndard de la Jerarquia del Sistema de
Fitxers. Per exemple, el tftpd-hpa utilitza per defecte /srv/tftp. Es possible
que hagueu d'ajustar els exemples de configuració d'aquesta secció en
conseqüència.

Totes les alternatives de l'in.tftpd que hi ha a Debian per defecte haurien
d'enregistrar les peticions TFTP al registre del sistema. Algunes d'elles
suporten un paràmetre -v per mostrar una sortida més detallada. Es recomana que
comproveu aquests missatges registrats en el cas que patiu problemes
d'arrencada com a punt d'inici al diagnòstic de la causa dels problemes.

4.5.4. Posar les imatges del TFTP al seu lloc

Després, col·loqueu la imatge d'arrencada TFTP que us calga, i que figura a
Secció 4.2.1, «On trobar arxius d'instal·lació», al directori d'imatges
d'arrencada del tftpd. Haureu de fer un enllaç des d'aquest fitxer al fitxer
que emprarà el tftpd per arrencar un client determinat. Malauradament, el nom
del fitxer el determina el client TFTP i no hi existeix cap norma ben
establerta.

Per a arrencar amb PXE, només cal l'arxiu tar netboot/netboot.tar.gz.
Extraieu-lo al directori d'imatge d'arrencada del tftpd. Assegureu-vos que el
servidor DHCP està configurat per passar pxelinux.0 al tftpd com a nom del
fitxer d'arrencada. Per a màquines UEFI, necessitareu passar un nom d'imatge
d'arrencada EFI apropiat (com ara /debian-installer/amd64/bootnetx64.efi).

4.6. Instal·lació automàtica

Si heu d'instal·lar a molts ordinadors, és possible fer instal·lacions
completament automatitzades. Els paquets dels que es disposa a Debian per
fer-ho són fai-quickstart (que pot utilitzar un servidor d'instal·lació) i el
mateix instal·lador de Debian. Vegeu la pàgina de FAI per informació més
detallada.

4.6.1. Instal·lació automàtica utilitzant l'instal·lador de Debian

L'instal·lador de Debian suporta l'automatització de la instal·lació utilitzant
fitxers de preconfiguració. Es pot carregar un fitxer de preconfiguració des de
la xarxa o des d'un mitjà extraïble i es fa servir per escriure-hi les
respostes a totes les preguntes fetes en el procés d'instal·lació.

Podeu trobar la documentació completa per a fer precarrega, incloent un exemple
funcional que podeu editar, a Apèndix B, Automatització de la instal·lació fent
servir una configuració prèvia.

4.7. Verificant la integritat dels arxius d'instal·lació

Podeu verificar la integritat dels arxius descarregats amb les sumes de
verificació contingudes als arxius SHA256SUMS o SHA512SUMS dels miralls de
Debian. Podeu trobar-los als mateixos llocs que les pròpies imatges
d'instal·lació. Visiteu els següents llocs:

  • sumes de verificació per a les imatges de CD,

  • sumes de verificació per a les imatges de DVD,

  • sumes de verificació per a les imatges BD,

  • sumes de verificació per a d'altres arxius d'instal·lació.

Per calcular la suma de verificació d'un fitxer d'instal·lació descarregat,
useu

sha256sum filename.iso

o bé

sha512sum filename.iso

i després compareu-ho amb la suma de verificació corresponent a l'arxiu
SHA256SUMS o bé SHA512SUMS.

La Debian CD FAQ té més informació útil sobre aquest tema (com ara el programa
check_debian_iso, per a automatitzar parcialment el procediment anterior), així
com també instruccions, com verificar la integritat dels mateixos arxius de
sumes de verificació.


━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

^[3] Recordeu-vos d'activar l’indicador de partició arrencable «bootable».

Capítol 5. Arrencada del sistema d'instal·lació

Sumari

5.1. Arrencada de l'instal·lador en l'arquitectura 64-bit PC

    5.1.1. Arrencada des d'un llapis USB
    5.1.2. Arrencada des d'un disc òptic (CD/DVD)
    5.1.3. Com arrencar des de Windows
    5.1.4. Arrencar des de DOS fent servir «loadlin»
    5.1.5. Arrencada des de Linux utilitzant GRUB
    5.1.6. Arrencada amb el TFTP
    5.1.7. Pantalla de benvinguda
    5.1.8. L'instal·lador gràfic

5.2. Accessibilitat

    5.2.1. Instal·lar la interfície d'usuari («front-end»)
    5.2.2. Pantalles braille USB
    5.2.3. Pantalles braille sèrie
    5.2.4. Síntesi de veu per maquinari
    5.2.5. Maquinari de síntesi de veu
    5.2.6. Dispositius de la placa
    5.2.7. Tema d'alt contrast
    5.2.8. Zoom
    5.2.9. Instal·lació expert, mode de recuperació («Rescue»), instal·lació
        automatitzada («Automated»)
    5.2.10. Accessibilitat del sistema instal·lat

5.3. Paràmetres d'arrencada

    5.3.1. Terminal d'arrencada
    5.3.2. Paràmetres de l'instal·lador Debian
    5.3.3. Utilitzar els paràmetres de l'arrencada per respondre preguntes
    5.3.4. Pas de paràmetres a mòduls del nucli
    5.3.5. Afegir mòduls del nucli a la llista negra

5.4. Resolució de problemes del procés d'instal·lació

    5.4.1. Fiabilitat dels medis òptics
    5.4.2. Configuració de l'arrencada
    5.4.3. Síntesi de veu per maquinari
    5.4.4. Problemes d'instal·lació usuals en 64-bit PC
    5.4.5. Com interpretar els missatges del nucli durant l'arrencada
    5.4.6. Informar d'errors d'instal·lació
    5.4.7. Emissió d'informes d'error

5.1. Arrencada de l'instal·lador en l'arquitectura 64-bit PC

Avís

Si teniu altres sistemes operatius que voleu mantenir al sistema (configurats
amb arrencada dual), hauríeu d'assegurar-vos que han estat aturats correctament
abans d'arrencar l'instal·lador. Instal·lar un sistema operatiu mentre un altre
està en hibernació (és a dir, ha estat suspès a disc) podria originar pèrdues o
danys en l'estat del sistema operatiu suspès, que podria causar problemes en
reiniciar.

Nota

Per informar-se de com arrencar l'instal·lador gràfic, vegeu Secció 5.1.8,
«L'instal·lador gràfic».

5.1.1. Arrencada des d'un llapis USB

Si el seu ordinador pot arrencar des d'un USB, probablement aquesta és la opció
més fàcil per la instal·lació. Assumint que ho teniu tot preparat (
Secció 3.6.2, «Selecció del dispositiu d'arrencada» i Secció 4.3, «Preparació
dels fitxers per arrencar amb el llapis de memòria USB»), només heu de
connectar la memòria USB en algun dels connectors lliures i reiniciar
l'ordinador. El sistema arrencarà i, llevat que hageu fet servir un mètode
distint per preparar el USB i que no estigui en condicions, se us presentarà el
menú gràfic d'arrencada (en el maquinari que ho suporta). Ara podeu seleccionar
diferents opcions d'instal·ació o només teclejar Intro.

5.1.2. Arrencada des d'un disc òptic (CD/DVD)

Si disposeu d'un conjunt de discos òptics i el vostre ordinador permet arrencar
directament des d'ells, fantàstic! Simplement configureu el sistema perquè
arrenqui des d'un disc òptic tal i com es descriu a Secció 3.6.2, «Selecció del
dispositiu d'arrencada», inseriu el disc, reinicieu l'ordinador i podeu passar
al següent capítol.

Recordeu que alguns dispositius òptics poden necessitar controladors especials
i pot ser que aquests no siguin accessibles en els primers passos de la
instal·lació. Si el mètode estàndard d'arrencada des d'un disc òptic no us
funciona al vostre ordinador, torneu a repassar aquest capítol i pareu atenció
a la utilització de nuclis i mètodes d'instal·lació alternatius que
probablement us funcionin.

Tot i que no pugueu arrencar des d'un disc òptic, probablement podeu
utilitzar-ho per instal·lar els components del sistema Debian i qualsevol
paquet. Heu d'arrencar utilitzant un altre mitjà i quan sigui l'hora
d'instal·lar el sistema operatiu, el sistema base i qualsevol paquet
addicional, enllaceu el sistema d'instal·lació amb el dispositiu òptic.

Si teniu problemes en l'arrencada, vegeu Secció 5.4, «Resolució de problemes
del procés d'instal·lació».

5.1.3. Com arrencar des de Windows

Per iniciar l'instal·lador des de Windows, podeu

  • aconseguiu un mitjà d'instal·lació com es descriu a Secció 4.1, «Imatges
    oficials d'instal·lació de Debian GNU/Linux» o Secció 4.3, «Preparació dels
    fitxers per arrencar amb el llapis de memòria USB» o

  • descarregar l'arxiu executable Windows, disponible a tools/win32-loader/
    stable/win32-loader.exe en els miralls de Debian.

Si utilitzeu un mitjà d'instal·lació òptic, es llançarà un programa
d'instal·lació automàticament quan inseriu el disc. Si el Windows no l'inicia
automàticament, o si esteu utilitzant un llapis de memòria USB, podeu
executar-ho manualment accedint al dispositiu i executant setup.exe.

Després d'iniciar el programa, us faran unes poques qüestions preliminars i el
sistema estarà ja preparat per iniciar l'instal·lador de Debian GNU/Linux.

5.1.4. Arrencar des de DOS fent servir «loadlin»

Arrencada en DOS (no amb Windows). Per això, podeu arrencar des d'un disc de
recuperació o de diagnosi.

Si teniu accés al CD d'instal·lació, canviau l'unitat actual per l'unitat de
CD-ROM, p. ex.

d:

a continuació assegurau-vos que teniu preparat el vostre disc dur així com
s'explica a Secció 4.4.2, «Iniciar la instal·lació des del disc dur amb DOS
fent servir loadlin» i canviau l'unitat actual per aquest si és necessari.

Introduïu el subdirectori per l'opció que desitgeu, p. ex.

cd \install.amd

Si preferiu fer servir l'instal·lador gràfic, introduïu el subdirectori gtk.

cd gtk

A continuació, executeu l'ordre install.bat. Es carregarà el nucli i arrencarà
l'instal·lador del sistema.

5.1.5. Arrencada des de Linux utilitzant GRUB

Per arrencar l'instal·lador des d'un disc dur, primer heu de baixar els fitxers
necessaris tal i com es descriu a Secció 4.4, «Preparació dels fitxers per
arrencar des del disc dur».

Pel GRUB2 nececessitareu configurar dues coses essencials a /boot/grub/
grub.cfg:

  • per carregar l'initrd.gz de l'instal·lador al moment d'engegar;

  • fer que el nucli vmlinuz usi un disc en RAM com a partició arrel.

Una entrada per a l'instal·lador podria ser per exemple:

menuentry 'New Install' {
insmod part_msdos
insmod ext2
set root='(hd0,msdos1)'
linux /boot/newinstall/vmlinuz
initrd /boot/newinstall/initrd.gz
}

5.1.6. Arrencada amb el TFTP

Per arrencar des de la xarxa necessitareu una connexió i un servidor
d'arrencada de xarxa TFTP ( i probablement un servidor DHCP, RARP o BOOTP per a
la configuració automàtica de la xarxa).

El mètode d'instal·lació per suportar l'arrencada de la xarxa es descriu a
Secció 4.5, «Preparació dels fitxers per a l'arrencada en xarxa TFTP».

Hi ha diversos mètodes per a arrencar via TFTP en i386.

5.1.6.1. Targeta de xarxa o placa mare que suporta PXE

És possible que la vostra targeta de xarxa o la placa mare proporcionin la
possibilitat d'arrencada via PXE. Es tracta d'una reimplementació d'Intel (tm)
de l'arrencada via TFTP. Si és el vostre cas, podeu configurar la BIOS/UEFI
perquè arrenqui via la xarxa.

5.1.6.2. Targeta de xarxa («NIC») amb una ROM d'arrencada («BootROM») via xarxa

És possible que la vostra targeta de xarxa proporcioni la possibilitat
d'arrencar via TFTP.

5.1.6.3. Etherboot

El projecte etherboot proporciona disquets d'arrencada i fins hi tot roms
d'arrencada que permeten l'arrencada via TFTP.

5.1.7. Pantalla de benvinguda

Quan arrenqui l'instal·lador us apareixerà una pantalla gràfica amigable
mostrant el logotip de Debian i un menú:

Debian GNU/Linux installer boot menu

Graphical install
Install
Advanced options                            >
Accessible dark contrast installer menu     >
Help
Install with speech synthesis

Nota

Aquesta pantalla gràfica pot tenir un aspecte bastant diferent dependent de com
s'arrenca la vostra màquina (BIOS o UEFI), però hi haurà les mateixes opcions.

Depenent del mètode d'instal·lació que esteu utilitzant, la opció «Graphical
install» podria no estar disponible.

Per a una instal·lació normal, seleccioneu l'entrada «Graphical install» o «
Install» -- ja sigui utilitzant les tecles de desplaçament o escrivint la
primera lletra (ressaltada) -- i prement Intro per l'arrencada de
l'instal·lador. L'entrada «Graphical install» ve seleccionada per defecte.

L'entrada «Advanced options» dóna accés a un segon menú que permet arrencar
l'instal·lador en mode expert, en mode rescat i per instal·lacions
automatitzades.

Si voleu o necessiteu afegir paràmetres d'arrencada a l'instal·lador o al
nucli, premeu Tab. Açò mostrarà l'ordre predeterminat d'arrencada de l'entrada
de menú que tingueu seleccionada i us permetrà afegir opcions addicionals.
Tingueu en compte que la disposició del teclat en aquest punt encara és QWERTY.
Les pantalles d'ajuda (vegeu més avall) us mostren les opcions possibles més
habituals. Premeu Intro per arrencar l'instal·lador amb les vostres opcions; si
premeu Esc tornareu al menú d'arrencada i es desfaran els canvis realitzats.

Si trieu l'entrada «Help» us mostrarà la primera pantalla d'ajuda que dona una
visió general de totes les pantalles d'ajuda. Per a tornar al menú d'arrencada
després de mostrar les pantalles d'ajuda, escriviu «menu» a l'indicador
d'entrada i premeu Intro.. Totes les pantalles d'ajuda tenen un indicador
d'arrencada on podeu escriure l'ordre d'arrencada:

Press F1 for the help index, or ENTER to boot:

En aquest punt podeu prémer Intro per arrencar l'instal·lador amb les opcions
predeterminades, o bé introduir una ordre d'arrencada específica i,
opcionalment, paràmetres d'arrencada addicionals. Podeu trobar alguns
paràmetres d'arrencada prou comuns a les diferents pantalles d'ajuda. Si afegiu
algun paràmetre a la línia d'ordres d'arrencada, recordeu escriure primer el
mètode d'arrencada (per defecte és install) i un espai abans del primer
paràmetre (p.ex, install fb=false).

Nota

En aquest moment, el teclat predeterminat és l'anglès americà. Açò vol dir que
si el vostre teclat té una disposició diferent (específica d'un idioma), els
caràcters que apareixen a la pantalla poden ser diferents dels que esperàveu
escriure. La Wikipedia té un esquema de teclat US que es pot utilitzar com a
referència per trobar les tecles correctes.

Nota

Si utilitzeu un sistema que té la BIOS configurada per utilitzar la consola
sèrie, podria passar que no poguéreu veure la pantalla inicial d'arrencada fins
que no tingueu l'instal·lador arrencat; podria ser que no veiéreu ni el menú
d'arrencada. El mateix pot passar quan esteu arrencant el sistema amb un
dispositiu de gestió remota que done una interfície de text a la consola VGA.
Alguns exemples d'aquests dispositius són la consola text de Compaq «integrated
Lights Out» (iLO) i el «Integrated Remote Assistant» d'HP (IRA).

Per a saltar-vos la pantalla gràfica d'arrencada podeu prémer a cegues Esc per
obtenir un indicador d'arrencada en mode text o (igualment a cegues) prémer «H»
seguit de Intro per seleccionar l'opció «Help» descrita abans. Després d'això
les pulsacions de tecles es mostraran a l'indicador. Per a deshabilitar el
«framebuffer» per a la resta de la instal·lació, haureu d'afegir també vga=
normal fb=false a l'indicador d'arrencada com descriu el text d'ajuda.

5.1.8. L'instal·lador gràfic

La versió gràfica de l'instal·lador només està disponible per a un nombre
limitat d'arquitectures, incloent 64-bit PC. La funcionalitat de l'instal·lador
gràfic és essencialment la mateixa que la versió text de l'instal·lador, però
amb un aspecte diferent; en el fons utilitza els mateixos programes.

Encara que la funcionalitat sigui idèntica, l'instal·lador gràfic té alguns
avantatges significatius. La millora principal és que suporta més idiomes,
concretament aquells que utilitzen jocs de caràcters que no es poden mostrar
amb la interfície «newt». També incorpora certes millores relacionades amb la
usabilitat com l'opció d'utilitzar el ratolí, i en alguns casos també es poden
veure diverses preguntes alhora en una mateixa pantalla.

L'instal·lador gràfic està disponible en totes les imatges de CD/DVD i amb el
mètode d'instal·lació amb mitjans físics. Per arrencar l'instal·lador gràfic
seleccioneu l'opció rellevant al menú d'arrencada. El mode expert i de rescat
de l'instal·lador gràfic es pot seleccionar des del menú «Advanced options».
Els mètodes anteriors d'arrencada installgui, expertgui i rescuegui encara
poden utilitzar-se des de l'indicador d'arrencada que es mostra després de
seleccionar l'opció «Help» al menú d'arrencada.

Hi ha una imatge de l'instal·lador gràfic per arrencar per xarxa. També està
disponible com a imatge ISO «mini» especial^[4], que és útil sobretot per a fer
proves.

Tal i com passa en l'instal·lador de text, és possible afegir paràmetres
d'arrencada quan s'inicia l'instal·lador gràfic.

Nota

L'instal·lador gràfic requereix més memòria que l'instal·lador de text: 810MB.
Si no hi ha prou memòria, passarà a utilitzar la interfície «newt»
automàticament com a alternativa.

Si la quantitat de memòria en el vostre sistema està per sota de 780MB,
l'instal·lador gràfic podria fallar a l'arrencar mentre l'instal·lador de text
encara hauria de funcionar. Es recomana la utilització de l'instal·lador de
text en sistemes amb poca memòria.

5.2. Accessibilitat

Alguns usuaris necessiten funcions específiques degut a, per exemple, alguna
discapacitat visual. Les pantalles braille USB són detectades automàticament,
però la majoria de les altres funcions d'accessibilitat han de ser habilitades
manualment. Als sistemes que ho admeten, el menú d'arrencada emet un xiulet
quan està llest per a rebre pulsacions del teclat. Podeu aleshores afegir
alguns paràmetres d'arrencada per a habilitar les funcions d'accessibilitat
(vegeu també Secció 5.1.7, «Pantalla de benvinguda»). Adoneu-vos que a la
majoria d'arquitectures, el carregador d'arrencada interpreta el vostre teclat
com a QWERTY.

5.2.1. Instal·lar la interfície d'usuari («front-end»)

L'instal·lador Debian admet diverses interfícies d'usuari per a plantejar
preguntes, amb les adaptacions necessàries per garantir l'accessibilitat:
concretament, text fa servir text sense format mentre que newt fa servir
quadres de diàleg basats en text. L'elecció es pot fer en l'indicador
d'arrencada: llegiu la documentació per a DEBIAN_FRONTEND a Secció 5.3.2,
«Paràmetres de l'instal·lador Debian».

Amb la interfície newt (utilitzada majoritàriament amb braille), hom bàsicament
només selecciona respostes amb les tecles de fletxa i prem Intro per validar
l'elecció. Prement Tab o Shift - Tab es pot canviar entre elements de diàleg, i
en particular accedir al botó Ves Enrere, que torna enrere a preguntes
anteriors. Alguns diàlegs contenen caselles de selecció, que es poden activar i
desactivar prement Space.

Amb la interfície text (utilitzada majoritàriament amb veu), hom bàsicament
només selecciona les respostes escrivint-ne el seu número i prem Intro. També
es pot no escriure res i prémer Intro per simplement acceptar el valor per
defecte. Prement < i picant Intro es torna enrere a preguntes anteriors. Davant
d'un conjunt de caselles de selecció (per exemple durant la selecció de
tasques), es pot posar ! per expressar que no es vol seleccionar res.

5.2.2. Pantalles braille USB

Les pantalles braille USB haurien de ser detectades automàticament. S'emprarà
automàticament una versió textual de l'instal·lador i també s'instal·laran
automàticament al sistema de destinació els components necessaris per a emprar
la pantalla braille. Per tant, podeu simplement prémer Intro al menú
d'arrencada. Tan aviat com s'inicie el terminal brltty, podreu escollir una
taula braille entrant al menú de preferències. La documentació sobre les
assignacions de tecles per als dispositius braille es troba disponible al lloc
web de brltty.

5.2.3. Pantalles braille sèrie

Les pantalles braille sèrie no poden ser detectades automàticament de forma
segura (ja que algunes d'elles podrien resultar danyades). Per tant, haureu
d'afegir el paràmetre d'arrencada brltty=controlador,port,taula per a indicar
al terminal brltty quin controlador emprar. Cal que reemplaceu controlador pel
codi de dues lletres corresponent al controlador del vostre terminal (vegeu la
llista de codis de controlador). Cal que reemplaceu port pel nom del port sèrie
on es troba connectada la pantalla; ttyS0 és el valor per defecte. taula és el
nom de la taula braille a emprar (vegeu la llista de codis de taula); la taula
anglesa és el valor predeterminat. Adoneu-vos que podeu canviar la taula més
endavant entrant al menú de preferències. La documentació sobre les
assignacions de tecles per als dispositius braille es troba disponible al lloc
web de brltty.

5.2.4. Síntesi de veu per maquinari

El suport per a la síntesi de parla via programari està disponible a totes les
imatges de l'instal·lador que tenen la versió gràfica de l'instal·lador, com
per exemple les imatges netinst, imatges de CD i DVD, i la variant gtk del
netboot. El suport es pot activar seleccionant-lo al menú d'arrencada escrivint
s Intro. La versió en mode text de l'instal·lador serà seleccionada
automàticament i la síntesi de parla via programari serà automàticament
instal·lada al sistema final.

Si es detecten diverses targetes de so, se us demanarà que premeu Intro quan
sentiu parlar per la targeta de so que desitgeu.

La primera pregunta (el idioma) està escrita en anglès i la resta de la
instal·lació fa servir l'idioma seleccionat al principi (disponible a espeak).

La velocitat de la parla, per defecte, és força baixa. Per accelerar-la, premeu
CapsLock+6. Per alentir-la, premeu CapsLock+5. El volum per defecte hauria de
ser mitjà. Per apujar-lo, premeu CapsLock+2. Per abaixar-lo, premeu CapsLock+1.
Per obtenir més detalls sobre les dreceres de navegació, veieu Speakup guide.
Per simplement acceptar la resposta per defecte a una pregunta, premeu Enter a
l'indicador. Per deixar una resposta en blanc a una pregunta, escriviu ! a
l'indicador. Per tirar enrere a la pregunta anterior, escriviu < a l'indicador.

5.2.5. Maquinari de síntesi de veu

El suport de dispositius de síntesi de veu està disponible a totes les imatges
instal·lables amb instal·lador gràfic, p. ex. totes les imatges instal·lables
per xarxa, CD i DVD i la variant «gtk» d'instal·lació per xarxa. Només heu de
seleccionar l'opció «Instal·lació gràfica» del menú d'arrencada.

Els dispositius de síntesi de veu no es detecten automàticament. Cal que afegiu
el paràmetre d'arrencada speakup.synth=driver per establir speakup al
dispositiu que fareu servir. driver es reemplaça pel codi del vostre dispositiu
(llegiu driver code list). La versió text de l'instal·lador serà la
seleccionada automàticament i s'instal·larà automàticament el controlador del
dispositiu de síntesi de veu en el sistema instal·lat.

5.2.6. Dispositius de la placa

Alguns dispositius d'accessibilitat són de fet plaques que es connecten a dins
la màquina i que llegeixen el text directament de la memòria de vídeo. Per a
fer que funcionen cal que inhabiliteu el «framebuffer» emprant els paràmetres
d'arrencada vga=normal fb=false. Tanmateix, açò reduirà el nombre de llengües
disponibles.

Podeu activar una versió textual del carregador d'inici abans d'afegir els
paràmetres d'arrencada escrivint h Intro.

5.2.7. Tema d'alt contrast

Per a usuaris amb visió limitada, l'instal·lador pot emprar un tema d'alt
contrast que el fa més llegible. Per a habilitar-lo, podeu emprar l'entrada de 
«Accessible alt contrast» del menú de la pantalla d'arrencada amb la tecla de
drecera d, o afegir el paràmetre d'arrencada theme=dark.

5.2.8. Zoom

Per usuaris amb visió limitada, l'instal·lador gràfic disposa d'una funció
d'amplificació bàsica: la combinació de tecles Control++ i Control+- incrementa
o redueix el tamany de la lletra.

5.2.9. Instal·lació expert, mode de recuperació («Rescue»), instal·lació
automatitzada («Automated»)

Les opcions d'instal·lació Expert, Recuperació («Rescue») i Automàtic
(«Automated») també estan disponibles amb el suport d'accesibilitat. Per
accedir-hi, primer cal accedir al submenú «Opcions avançades»(«Advanced
options») des del menú d'arrencada pitjant a. Si feu servir un sistema BIOS (el
menú d'arrencada haurà emès un so només una vegada), caldrà continuar amb Intro
; per a sistemes UEFI (el menú d'arrencada haurà emès un so dues vegades) això
no s'ha de fer. A continuació, per activar el sintetitzador de veu, podeu
prémer s (també seguit de Intro a sistemes amb BIOS, però no a sistemes amb
UEFI). A partir d'aquest punt, es poden fer servir alguns accessos directes: x
per a la instal·lació Expert, r pel mode de recuperació o a per la instal·lació
automàtica. Un cop més, so feu servir un sistema BIOS, cal continuar prement 
Intro.

L'opció de instal·lació automàtica procedeix a instal·lar Debian de forma
totalment automàtica fent servir la configuració prèvia, la informació de la
qual cal introduir-la després d'haver activat les funcions d'accessibilitat.
Aquesta possibilitat està documentada a la secció Apèndix B, Automatització de
la instal·lació fent servir una configuració prèvia.

5.2.10. Accessibilitat del sistema instal·lat

La documentació sobre accessibilitat del sistema instal·lat està disponible a
Pàgina wiki d'accessibilitat a Debian.

5.3. Paràmetres d'arrencada

Els paràmetres d'arrencada són paràmetres del nucli Linux que es fan servir per
garantir que els dispositius perifèrics siguin tractats apropiadament. En la
majoria de casos, el nucli recull informació dels perifèrics automàticament.
Tot i així, en alguns casos caldrà que ajudeu una mica al nucli.

Si aquesta és la primera vegada que inicieu el sistema, seleccionau els
paràmetres d'inici predeterminats (p. ex. no seleccioneu «definir paràmetres»)
i comprovau si tot funciona correctament. Probablement serà així. En cas
contrari, podeu reiniciar a continuació i cercar els paràmetres específics que
informaran al vostre sistema sobre el vostre maquinari.

La informació sobre molts dels paràmetres d'arrencada es pot consultar a Linux
BootPrompt HOWTO, incloent informació sobre maquinari complicat. Aquesta secció
només inclou un esbós dels paràmetres més importants. Alguns dels problemes més
habituals s'inclouen a la secció Secció 5.4, «Resolució de problemes del procés
d'instal·lació».

5.3.1. Terminal d'arrencada

Si esteu arrencant amb una terminal sèrie, generalment el nucli ho detecta
automàticament. Si teniu una targeta de vídeo («framebuffer») i un teclat
connectat a l'ordinador que voleu arrencar amb la terminal sèrie, heu de passar
l'argument console=dispositiu al nucli, on dispositiu és un dispositiu sèrie de
l'ordinador, que sol ésser alguna cosa com ara ttyS0.

Haureu d'especificar els paràmetres del port sèrie, com la velocitat i la
paritat, per exemple console=ttyS0,9600n8; altres velocitats típiques són 57600
o 115200. Assegurau-vos que escriviu aquesta opció després de «---», de manera
que serà copiat a la configuració del carregador d'arrencada per al sistema
instal·lat (sempre que sigui compatible amb el programa l'instal·lador del
carregador d'arrencada).

Per tal d'assegurar que el terminal usat per l'instal·lador coincideix amb el
vostre emulador de terminal, s'ha d'afegir el paràmetre TERM=type. Teniu
present que l'instal·lador només admet els següents tipus de terminal: linux,
bterm, ansi, vt102 i dumb. L'opció predeterminada per al terminal sèrie al
debian-installer és vt102. Si feu servir una terminal IPMI o una eina de
virtualització que no preveu la conversió en aquest tipus de terminal per sí
mateix, p. ex. QEMU/KVM, pot iniciar-ho en una sessió screen. Que es faci
efectivament la traducció en el tipus de terminal screen és molt semblant al
tipus vt102.

5.3.2. Paràmetres de l'instal·lador Debian

El sistema d'instal·lació reconeix molts paràmetres d'arrencada addicionals ^
[5] que poden ésser útils.

Alguns paràmetres tenen un «format curt» que ajuda a evitar les limitacions de
les opcions de la línia d'ordres del nucli i facilita l'escriptura dels
paràmetres. Si un paràmetre té un format curt, aquest es presenta llistat entre
parèntesi després de l'opció (normal) llarga. Els exemples d'aquest manual fan
servir, preferentment, la forma abreujada.

debconf/priority (priority)

    Aquest paràmetre definirà la prioritat més alta dels missatges a mostrar.

    La instal·lació predeterminada utilitza priority=high. En aquest cas es
    mostraran els missatges amb prioritat alta («high») i crítica («critical»),
    però s'anul·laran els missatges amb prioritat mitjana («medium») i baixa
    («low»). Si l'instal·lador detecta algun problema, ajustarà la prioritat en
    funció de les necessitats que n'esdevinguin.

    Si utilitzeu el paràmetre d'arrencada priority=medium, se us mostrarà el
    menú d'instal·lació i disposareu de més control sobre la instal·lació. Quan
    s'utilitza el paràmetre priority=low es mostraran tots els missatges (és
    equivalent al mètode d'arrencada expert). En el cas de priority=critical,
    el sistema d'instal·lació mostrarà únicament els missatges crítics i
    procurarà fer la feina correctament sense mostrar missatges.

DEBIAN_FRONTEND

    Aquest paràmetre d'arrencada defineix el tipus d'interfície d'usuari
    utilitzat per l'instal·lador. Els possibles paràmetres de configuració
    actuals són:

      □ DEBIAN_FRONTEND=noninteractive

      □ DEBIAN_FRONTEND=text

      □ DEBIAN_FRONTEND=newt

      □ DEBIAN_FRONTEND=gtk

    El tipus predeterminat és DEBIAN_FRONTEND=newt. En el cas de les
    instal·lacions mitjançant de la consola sèrie s'acostuma a utilitzar
    DEBIAN_FRONTEND=text. Alguns mitjans d'instal·lació especialitzats només
    disposen d'una selecció limitada d'interfícies, però newt i text estan
    disponibles en la majoria de mitjans d'instal·lació. En les arquitectures
    que ho admeten, l'instal·lador gràfic fa servir la interfície gtk.

BOOT_DEBUG

    Establint aquest paràmetre d'arrencada a 2 induirà el procés d'arrencada de
    l'instal·lador a mostrar més missatges. Establint-lo a 3 farà disponible en
    punts estratègics del procés d'arrencada intèrprets de depuració (sortiu
    dels intèrprets per a continuar amb el procés d'arrencada).

    BOOT_DEBUG=0

        És el valor predeterminat.

    BOOT_DEBUG=1

        Més missatges de l'habitual.

    BOOT_DEBUG=2

        Molta informació de depuració.

    BOOT_DEBUG=3

        Durant el procés d'arrencada s'executen diversos intèrprets d'ordres
        que permeten una depuració més detallada. Per continuar l'arrencada
        haureu de sortir de l'intèrpret d'ordres.

log_host, log_port

    Fa que l'instal·lador enviï missatges de registre a un sistema de registre
    de missatges remot d'un servidor i port específics o bé a un fitxer local.
    Si no s'especifica, el port predeterminat per al sistema de registre
    estàndard és 514.

lowmem

    Es pot emprar per a forçar l'instal·lador a un nivell més gran de poca
    memòria del que l'instal·lador assigna per defecte basat en la memòria
    disponible. Els valors possibles són 1 i 2. Vegeu també Secció 6.3.1.1,
    «Comprovació de la memòria disponible / mode poca memòria».

noshell

    Evita que l'instal·lador òbriga intèrprets interactius als terminals 2 i 3.
    Açò és útil per a instal·lacions desateses on la seguretat física siga
    limitada.

debian-installer/«framebuffer» (fb)

    Algunes arquitectures utilitzen el «framebuffer» del nucli per oferir la
    instal·lació en diferents idiomes. Si el «framebuffer» us provoca errors al
    sistema, podeu deshabilitar la característica utilitzant els paràmetres vga
    =normal fb=false. Els símptomes del problema són missatges d'error
    referents a «bterm» o «bogl», una pantalla en blanc o que es quedi congelat
    durant uns quants minuts després d'iniciar la instal·lació.

debian-installer/theme (theme)

    El tema determina l'aparença de la interfície d'usuari (colors, icones,
    etc.). Els temes disponibles varien segons la interfície. Actualment
    ambdues interfícies, «newt» i «gtk», (a banda de l'aparença per defecte)
    tenen només disponible un tema addicional anomenat «fosc» («dark»),
    dissenyat per a usuaris amb visió limitada. Podeu establir aquest tema
    arrencant amb theme=fosc (per a això també hi ha la drecera de teclat d al
    menú d'engegada).

netcfg/disable_autoconfig

    El debian-installer procura, per defecte, configurar la xarxa
    automàticament utilitzant el DHCP. Si la configuració es realitza
    correctament no podreu revisar-ne i modificar-ne els paràmetres obtinguts.
    L'accés a la configuració manual de la xarxa només es donarà quan falli la
    configuració per DHCP.

    Si en la vostra xarxa local disposeu d'un servidor de DHCP però no el voleu
    utilitzar, perquè per exemple us retorna respostes incorrectes, podeu
    evitar-ho i introduir la informació manualment utilitzant el paràmetre
    netfcg/disable_autoconfig=true.

hw-detect/start_pcmcia

    Si us causa problemes i per evitar que s'iniciïn els serveis PCMCIA trieu
    false. Aquest comportament s'ha detectat en alguns ordinadors portàtils.

disk-detect/dmraid/enable (dmraid)

    Establiu-ho a true per habilitar el suport a l'instal·lador per a discs
    Serial ATA RAID (anomenats també ATA RAID, BIOS RAID o RAID falsos).
    Tingueu en compte, que de moment, aquest suport és experimental. Podeu
    trobar informació addicional al wiki de l'instal·lador de Debian.

preseed/url (url)

    Especifica la URL que enllaça a un fitxer de preconfiguració a baixar i
    utilitzar per automatitzar la instal·lació. Per a més informació vegeu
    Secció 4.6, «Instal·lació automàtica».

preseed/file (file)

    Especifica el camí que enllaça a un fitxer de preconfiguració a carregar
    per automatitzar la instal·lació. Per a més informació vegeu Secció 4.6,
    «Instal·lació automàtica».

preseed/interactive

    Per mostrar les qüestions encara que estiguin preconfigurades, establiu el
    paràmetre a true. Pot ser útil per provar o depurar un fitxer de
    preconfiguració. Fixeu-vos que això no afectarà els paràmetres d'arrencada
    que hagueu passat, tot i que per a aquests podeu utilitzar una sintaxi
    especial. Per a més detalls, vegeu Secció B.5.2, «Ús de la configuració
    prèvia per canviar els valors predeterminats».

auto-install/enable (auto)

    És possible retardar les qüestions que normalment es plantegen abans de la
    preconfiguració fins després de la configuració de la xarxa. Per a més
    informació quant a l'automatització d'instal·lacions, vegeu Secció B.2.3,
    «Mode auto».

finish-install/keep-consoles

    A instal·lacions des de la consola sèrie o de gestió, les consoles virtuals
    (VT1 a VT6) es deshabiliten normalment al fitxer /etc/inittab. Poseu-ho a
    true per evitar-ho.

cdrom-detect/eject

    De manera predeterminada, abans de reiniciar, debian-installer expulsa
    automàticament els medis òptics emprats durant la instal·lació. Això pot
    ser innecessari si el sistema no arrenca automàticament des d'aquests
    medis. En alguns casos pot ser, fins i tot, no desitjat per exemple, si la
    unitat òptica no pot reinserir el medi automàticament i l'usuari no està
    allà per a fer-ho manualment. Moltes unitats de tipus càrrega per ranura,
    línia fina o «caddy» no poden recarregar el medi automàticament.

    Establiu-ho a false per a deshabilitar l'expulsió automàtica i tingueu
    present que pot ser que hàgiu d'assegurar-vos que el sistema no arrenca
    automàticament de la unitat òptica després de la instal·lació inicial.

base-installer/install-recommends (recommends)

    Si establiu aquesta opció a false, es configurarà el sistema de gestió de
    paquets per a no instal·lar automàticament els paquets recomanats («
    Recommends»), tant durant la instal·lació com al propi sistema instal·lat.
    Vegeu també Secció 6.3.5, «Instal·lació del sistema base».

    Adoneu-vos que aquesta opció resulta en un sistema més lleuger, però també
    en la mancança de funcions que normalment esperaríeu que hi foren
    disponibles. Potser necessitareu instal·lar manualment alguns dels paquets
    recomanats per a obtenir tota la funcionalitat que desitgeu. Per tant,
    aquesta opció només hauria de ser emprada per usuaris molt experimentats.

debian-installer/allow_unauthenticated

    Per omissió, l'instal·lador requereix repositoris autenticats amb una clau
    gpg coneguda. Establiu el paràmetre a true per desactivar l'autenticació. 
    Avís: aquesta opció és insegura i no es recomana utilitzar-la.

rescue/enable

    Establiu-ho a true per entrar en mode de rescat en comptes de realitzar una
    instal·lació normal. Vegeu Secció 8.6, «Restauració d'un sistema amb
    errors».

5.3.3. Utilitzar els paràmetres de l'arrencada per respondre preguntes

És possible establir un valor en l'indicador de l'arrencada per a pràcticament
qualsevol de les qüestions que es plategen durant el procés d'instal·lació,
encara que això només és útil en casos determinats. Les instruccions generals
per fer-ho les podeu trobar a Secció B.2.2, «Utilització dels paràmetres
d'arrencada per complementar la configuració prèvia». A continuació podeu veure
alguns exemples concrets.

debian-installer/language (language), debian-installer/country (country), 
    debian-installer/locale (locale)

    Hi ha dues formes d'indicar l'idioma, país i usos locals a emprar per a la
    instal·lació i pel propi sistema instal·lat.

    La primera i més fàcil és indicar només el paràmetre locale. L'idioma i el
    país es derivaran del seu valor. Per exemple, podeu emprar locale=ca_ES per
    a escollir el català com a idioma i Espanya com a país (s'emprarà
    ca_ES.UTF-8 com a «locale» predeterminada del sistema instal·lat). Aquesta
    forma té la limitació de que no permet especificar totes les combinacions
    d'idioma, país i usos locals.

    La segona opció, més flexible, és especificar language (idioma) i country
    (país) per separat. En aquest cas podeu especificar un locale opcional que
    s'emprarà com a «locale» predeterminada al sistema instal·lat. Per exemple:
    language=ca country=AD locale=ca_ES.UTF-8.

anna/choose_modules (modules)

    Es pot utilitzar per carregar automàticament components de l'instal·lador
    que no es carreguen per omissió. Alguns exemples de components opcionals
    que us poden ser útils són openssh-client-udeb (que us permetrà emprar
    l'ordre scp durant la instal·lació) i ppp-udeb (vegeu Secció D.5,
    «Instal·lació de Debian GNU/Linux utilitzant PPP sobre Ethernet (PPPoE)»).

netcfg/disable_autoconfig

    Establiu-lo a true si voleu desactivar l'autoconfiguració IPv6 i DHCP i
    forçar la configuració de la xarxa utilitzant adreçament estàtic.

mirror/protocol (protocol)

    Per omissió, l'instal·lador utilitzarà el protocol HTTP per descarregar
    fitxers de les rèpliques de Debian i no és possible canviar-ho a FTP durant
    les instal·lacions amb prioritat normal. Si establiu aquest paràmetre a ftp
    , forçareu que l'instal·lador utilitzi aquest protocol. Tingueu en compte
    que no podreu seleccionar una rèplica FTP de la llista, haureu d'introduir
    el nom del servidor manualment.

tasksel:tasksel/first (tasks)

    Es pot utilitzar per seleccionar tasques que no estan disponibles des de la
    llista de tasques interactiva, com per exemple kde-desktop. Per a
    informació addicional, vegeu Secció 6.3.6.2, «Selecció i instal·lació de
    programari».

5.3.4. Pas de paràmetres a mòduls del nucli

Si els controladors estan compilats al nucli, és possible passar paràmetres tal
i com es descriu a la pròpia documentació del nucli. Tanmateix, si els
controladors estan compilats com a mòduls, no és possible passar paràmetres de
la forma habitual, ja que durant el procés d'instal·lació aquests no es
carreguen igual que en un sistema ja instal·lat. Haureu d'utilitzar una sintaxi
especial, reconeguda per l'instal·lador, que assegurarà que els paràmetres es
desen als fitxers de configuració corresponents i per tant que els mòduls
tindran disponible aquesta informació quan es carreguin. Els paràmetres també
es propagaran automàticament a la configuració del sistema instal·lat.

Fixeu-vos que ara es força estrany haver de passar paràmetres als mòduls. En la
majoria de casos el nucli podrà detectar el maquinari present al sistema i
establir uns bons paràmetres predeterminats. Tanmateix, en algunes situacions
encara pot ser necessari establir els paràmetres manualment.

La sintaxi utilitzada per establir els paràmetres dels mòduls és la següent:

nom_del_mòdul.nom_del_paràmetre=valor

Si necessiteu passar diversos paràmetres al mateix o a diferents mòduls,
simplement repetiu això. Per exemple, per fer que una antiga targeta de xarxa
3Com utilitzi el connector BNC (coaxial) i l'IRQ 10, hauríeu de passar:

3c509.xcvr=3 3c509.irq=10

5.3.5. Afegir mòduls del nucli a la llista negra

De vegades pot ser necessari afegir un mòdul en una llista negra per evitar que
el nucli i «udev» el carreguin automàticament. Per exemple, un motiu per voler
fer això seria un mòdul en particular que causi problemes amb els components
del vostre equip. El nucli de vegades també llista dos controladors diferents
pel mateix dispositiu. Això pot provocar que el dispositiu no funcioni
correctament si hi ha conflictes entre els controladors, o si es carrega primer
el controlador que no toca.

Podeu afegir un mòdul a la llista negra emprant la sintaxi següent:
nom_del_mòdul.blacklist=yes. D'aquesta manera s'afegirà el mòdul a /etc/
modprobe.d/blacklist.local, tant durant la instal·lació com en el sistema
instal·lat.

Tot i així, fixeu-vos que és possible que el sistema d'instal·lació carregui un
d'aquests mòduls igualment. Podeu evitar-ho si executeu la instal·lació en mode
expert i desseleccioneu el mòdul de la llista que es mostra durant les etapes
de detecció de maquinari.

5.4. Resolució de problemes del procés d'instal·lació

5.4.1. Fiabilitat dels medis òptics

De vegades, especialment amb unitats velles, l'instal·lador podria no arrencar
des d'un disc òptic. L'instal·lador podria -- inclús després d'arrencar
correctament des d'aquest disc -- fallar en el reconeixement del disc o donar
errors mentre l'està llegint durant la instal·lació.

Aquests problemes són deguts a diferents causes. Tan sols podem llistar alguns
dels problemes coneguts i donar suggeriments de com podeu tractar-los. La resta
és cosa vostra.

Hi ha dues coses molt senzilles que podeu provar.

  • Si el disc no arrenca, comproveu que s'ha inserit correctament i que no
    està brut.

  • Si l'instal·lador no reconeix el disc, proveu d'executar l'opció Detecta i
    munta el mitjà d'instal·lació altra vegada. Alguns problemes de DMA
    associats a algunes unitats de CD-ROM velles es resolen d'aquesta manera.

Si no funciona, aleshores proveu els suggeriments que teniu a la subsecció de
baix. Quasi tots, però no tots, els suggeriments discutits són vàlids per
CD-ROM i DVD.

Si no podeu aconseguir que la instal·lació funcione des del disc òptic, proveu
un dels altres mètodes d'instal·lació que hi ha.

5.4.1.1. Problemes usuals

  • Algunes unitats de CD-ROM velles no suporten la lectura de discs que es van
    gravar a altes velocitats utilitzant una gravadora de CD moderna.

  • Algunes unitats de CD-ROM velles no funcionen correctament si està activat
    l'«accés directe a memòria» (DMA).

5.4.1.2. Com investigar i potser resoldre alguns problemes

Si el disc òptic falla a l'arrencar, proveu els següents suggeriments.

  • Comproveu que la vostra BIOS/UEFI suporta l'arrencada des de disc òptic
    (només és un problema en sistemes molt antics) i que arrencar des d'aquest
    mitjà està activat a la BIOS/UEFI.

  • Si heu descarregat una imatge iso, comproveu que l'md5sum d'aquesta imatge
    coincideix amb el que estigui al fitxer MD5SUMS de la imatge, que hauria
    d'estar al mateix lloc d'on vàreu descarregar la imatge.

    $ md5sum debian-testing-i386-netinst.iso
    a20391b12f7ff22ef705cee4059c6b92  debian-testing-i386-netinst.iso

    A continuació, comproveu que l'md5sum del disc que heu gravat també
    coincideix. L'ordre següent hauria de funcionar. Utilitza la mida de la
    imatge per llegir el nombre correcte de bytes del disc.

    $ dd if=/dev/cdrom | \
    > head -c `stat --format=%s debian-testing-i386-netinst.iso` | \
    > md5sum
    a20391b12f7ff22ef705cee4059c6b92  -
    262668+0 records in
    262668+0 records out
    134486016 bytes (134 MB) copied, 97.474 seconds, 1.4 MB/s

Si després d'arrencar l'instal·lador correctament, el disc no és detectat,
tornar a provar podria resoldre el problema. Si teniu més d'una unitat òptica,
proveu de canviar el disc a una altra unitat. Si no funciona o si el disc es
reconeix però dona errors quan està llegint-lo, proveu els suggeriments que
teniu a continuació. Es necessita algun coneixement bàsic de Linux per fer-ho.
Per executar qualsevol de les ordres, primer hauríeu de canviar a la segona
consola virtual (VT2) i activar l'intèrpret d'ordres.

  • Canvieu al VT4 o mireu els continguts del fitxer /var/log/syslog (utilitzeu
    el nano com a editor) per comprovar qualsevol missatge d'error específic.
    Després, comproveu la sortida del l'ordre dmesg.

  • Mireu en la sortida de dmesg si s'ha reconegut la vostra unitat òptica.
    Hauríeu de veure alguna cosa semblant (les línies no han de estar
    obligatòriament de forma consecutiva):

    ata1.00: ATAPI: MATSHITADVD-RAM UJ-822S, 1.61, max UDMA/33
    ata1.00: configured for UDMA/33
    scsi 0:0:0:0: CD-ROM            MATSHITA DVD-RAM UJ-822S  1.61 PQ: 0 ANSI: 5
    sr0: scsi3-mmc drive: 24x/24x writer dvd-ram cd/rw xa/form2 cdda tray
    cdrom: Uniform CD-ROM driver Revision: 3.20

    Si no veieu res de semblant, les opcions són que no es reconega o no estiga
    suportada la controladora a la que està connectat la vostra unitat. Si
    sabeu quin controlador fa falta per a la controladora, podríeu provar de
    carregar-lo manualment amb l'ordre modprobe.

  • Comproveu que hi ha un node de dispositiu per a la vostra unitat òptica a /
    dev/. En els exemples de baix, açò seria el /dev/sr0. Hauria d'estar també
    el /dev/cdrom.

  • Utilitzeu l'ordre mount per comprovar si el disc òptic ja està muntat; si
    no ho està, proveu de muntar-lo manualment:

    $ mount /dev/hdc /cdrom

    Mireu si s'ha produït algun missatge d'error després d'executar l'ordre.

  • Comproveu si el DMA està activat:

    $ cd /proc/ide/hdc
    $ grep using_dma settings
    using_dma      1       0       1       rw

    Un «1» a la primera columna després de using_dma vol dir que està activat.
    Si ho està, proveu de desactivar-lo:

    $ echo -n "using_dma:0" >settings

    Comproveu que esteu en el directori del dispositiu que es correspon a la
    vostra unitat òptica.

  • Si hi ha algun problema a la instal·lació, proveu de comprovar la
    integritat dels mitjans d'instal·lació fent ús de l'opció que hi ha quasi
    al final del menú principal de l'instal·lador. Aquesta opció es pot
    utilitzar com una comprovació general de si disc es pot llegir amb
    confiança.

5.4.2. Configuració de l'arrencada

Si teniu problemes i el nucli es penja durant l'arrencada, no reconeix els
perifèrics o les unitats no es reconeixen com cal, primer de tot comprovau els
paràmetres d'arrencada, tal com s'indica a Secció 5.3, «Paràmetres d'arrencada»
.

En molts casos, el funcionament incorrecte por ésser causat per què el
dispositiu no disposa de microprogramari («firmware») (llegiu Secció 2.2,
«Dispositius que requereixen microprogramari» i Secció 6.4, «Carregar
microprogramari no inclòs a l'instal·lador»).

5.4.3. Síntesi de veu per maquinari

Si el programari de síntesi de veu no funciona, probablement és una errada de
la targeta de so, habitualment degut a que el gestor de la targeta no està
inclòs en l'instal·lador o bé perquè té uns noms de nivells del mesclador poc
habituals que s'estableixen a «silenciat» per defecte. En aquest cas, enviau un
informe d'error incloent la sortida de les ordres següents executats en la
mateixa màquina des d'un sistema Linux que se sap que te el sistema de so
funcional (p. ex. amb un CD en viu).

  • dmesg

  • lspci

  • lsmod

  • amixer

5.4.4. Problemes d'instal·lació usuals en 64-bit PC

Hi ha alguns problemes usuals en la instal·lació que es poden solucionar o
evitar indicant certs paràmetres d'arrencada a l'instal·lador.

Si la pantalla comença a comportar-se de manera estranya mentre s'arrenca el
nucli, per exemple es posa blanca, negra, o mostra un batibull de píxels
colorejats, potser la targeta de vídeo és problemàtica i no fa com cal la
commutació al «framebuffer». Podeu emprar el paràmetre d'arrencada fb=false per
a deshabilitar la consola del «framebuffer». A causa de les limitacions de la
funcionalitat de la consola, únicament hi haurà a l'abast un nombre reduït
d'idiomes per a la instal·lació. Consulteu Secció 5.3, «Paràmetres d'arrencada»
per als detalls.

5.4.4.1. Bloqueig del sistema durant la configuració del PCMCIA

Alguns models de portàtil de Dell peten quan la detecció de dispositius PCMCIA
tracta d'accedir a algunes adreces de maquinari. Altres portàtils tenen
problemes semblants. Si teniu un problema com aquest i no us cal la
funcionalitat PCMCIA durant la instal·lació, podeu deshabilitar-la amb el
paràmetre d'arrencada hw-detect/start_pcmcia=false. Podeu configurar-la després
de la instal·lació i excloure el rang de recursos que causa problemes.

També podeu arrencar l'instal·lador en mode expert. Haureu d'introduir les
opcions del rang de recursos que calen per al maquinari. Per exemple, si teniu
un portàtil Dell dels esmentats abans, heu d'introduir exclude port 0x800-0x8ff
. Hi ha una llista d'opcions usuals del rang de recursos a la secció
Configuració dels recursos del sistema del COM ES FA el PCMCIA (en anglès).
Tingueu en compte que s'han d'ometre les comes quan introduïu aquest valor a
l'instal·lador.

5.4.5. Com interpretar els missatges del nucli durant l'arrencada

Durant la seqüència d'arrencada, podeu veure nombrosos missatges del tipus
can't find quelcom, o quelcom not present, can't initialize quelcom, o fins i
tot this driver release depends on quelcom. No us heu de preocupar per la
majoria d'aquests missatges. Els veieu perquè el nucli del sistema
d'instal·lació s'ha fet perquè funcione a ordinadors amb molts dispositius
perifèrics diferents. Òbviament, cap ordinador té tots els dispositius
possibles, per tant el sistema operatiu potser es queixarà en cercar perifèrics
que no hi ha. Potser veureu també que el sistema fa una pausa momentània. Això
ocorre quan s'espera la resposta d'un dispositiu i aquest no hi és. Si trobeu
que hi triga massa, podeu fer-vos després un nucli a mida (vegeu Secció 8.5,
«Compilar un nou nucli»).

5.4.6. Informar d'errors d'instal·lació

Si aconseguiu completar la fase inicial d'arrencada però no podeu completar la
instal·lació, l'opció Desa els registres de depuració podria ser d'utilitat. Us
permet desar els registres d'error del sistema i informació sobre la
configuració de l'instal·lador en un mitjà d'emmagatzemament, o bé
descarregar-los utilitzant un navegador web. Aquesta informació pot
proporcionar-vos pistes sobre què ha anat malament i com arreglar-ho. Si aneu a
enviar un informe d'error, podeu afegir-hi aquesta informació.

Podeu trobar altres missatges d'instal·lació pertinents a /var/log/ durant la
instal·lació, i a /var/log/installer/ després que l'ordinador s'haja arrencat
en el sistema ja instal·lat.

5.4.7. Emissió d'informes d'error

Si encara teniu problemes, podeu enviar un informe d'instal·lació. Us animem a
enviar també informes en cas que la instal·lació haja reeixit, per poder
disposar de la major quantitat d'informació possible sobre el major nombre de
configuracions de maquinari.

Fixeu-vos que el vostre informe d'instal·lació es publicarà al Sistema de
seguiment d'errors de Debian (BTS) i s'enviarà a una llista de correu pública.
Assegureu-vos d'utilitzar una adreça de correu que no us importe fer pública.

Si teniu un sistema Debian en funcionament, la manera més fàcil d'emetre un
informe d'instal·lació és instal·lar els paquets installation-report i
reportbug (apt-get install installation-report reportbug) i configurar
reportbug tal com s'explica a Secció 8.4.2, «Enviar correus fora del sistema»,
executant l'ordre reportbug installation-reports.

De forma alternativa, podeu utilitzar aquesta plantilla per als informes
d'instal·lació i enviar-lo com un informe d'error al pseudopaquet
installation-reports, enviant-lo a <submit@bugs.debian.org> (en anglès):

Package: installation-reports

Boot method: <How did you boot the installer? CD/DVD? USB stick? Network?>
Image version: <Full URL to image you downloaded is best>
Date: <Date and time of the install>

Machine: <Description of machine (eg, IBM Thinkpad R32)>
Processor:
Memory:
Partitions: <df -Tl will do; the raw partition table is preferred>

Output of lspci -knn (or lspci -nn):

Base System Installation Checklist:
[O] = OK, [E] = Error (please elaborate below), [ ] = didn't try it

Initial boot:           [ ]
Detect network card:    [ ]
Configure network:      [ ]
Detect media:           [ ]
Load installer modules: [ ]
Detect hard drives:     [ ]
Partition hard drives:  [ ]
Install base system:    [ ]
Clock/timezone setup:   [ ]
User/password setup:    [ ]
Install tasks:          [ ]
Install boot loader:    [ ]
Overall install:        [ ]

Comments/Problems:

< Aquí descriviu (en anglés) la instal·lació, amb totes les vostres impressions, comentaris
     i idees que heu tengut durant el procés d'instal·lació.>

En l'informe d'error, descriviu quin és el problema, incloent els darrers
missatges visibles del nucli en el cas que el nucli s'hagi penjat. Descriviu
cada una de les passes que heu fet fins arribar a la situació problemàtica.


━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

^[4] La imatge ISO mini es pot descarregar des d'una de les rèpliques de Debian
tal i com es descriu a Secció 4.2, «Descarregar fitxers de les rèpliques de
Debian». Busqueu netboot/gtk/mini.iso.

^[5] Per als nuclis actuals ((2.6.9 o posterior) podeu fer servir 32 opcions
d'ordres i 32 opcions d'entorns. Si es sobrepassen aquestes quantitats, el
nucli pot fallar. També hi ha un límit de 256 caràcters per a tota la línia
d'ordres del nucli, tot el que excedeixi aquest límit es pot truncar
silenciosament.

Capítol 6. Utilització de l'instal·lador de Debian

Sumari

6.1. Com funciona l'instal·lador

    6.1.1. Utilitzar l'instal·lador gràfic

6.2. Introducció als elements
6.3. Utilització dels elements individualment

    6.3.1. Configuració de l'instal·lador de Debian i del maquinari
    6.3.2. Configuració d'usuaris i contrasenyes
    6.3.3. Configuració del rellotge i la zona horària
    6.3.4. Realització de particions i selecció de punts de muntatge
    6.3.5. Instal·lació del sistema base
    6.3.6. Instal·lació de programari addicionals
    6.3.7. Com fer el sistema arrencable
    6.3.8. Finalització de la instal·lació
    6.3.9. Resolució de problemes
    6.3.10. Instal·lació a través de la consola de xarxa

6.4. Carregar microprogramari no inclòs a l'instal·lador

    6.4.1. Preparar un dispositiu
    6.4.2. Microprogramari i el sistema ja instal·lat
    6.4.3. Completar el sistema ja instal·lat

6.5. Personalització

    6.5.1. Instal·lació d'un "sistema init" alternatiu

6.1. Com funciona l'instal·lador

En aquesta arquitectura el debian-installer suporta dues interfícies d'usuari
diferents: una en mode gràfic i l'altra en mode text. La interfície gràfica és
la que s'utilitza per defecte excepte si seleccioneu l'opció «Install» al menú
d'arrencada. Per a més informació per engegar amb l'instal·lador gràfic vegeu
Secció 5.1.8, «L'instal·lador gràfic».

L'instal·lador de Debian és un conjunt d'elements amb objectius específics que
realitzen cada una de les tasques de la instal·lació. Cada element executa la
seva tasca, preguntant a l'usuari les qüestions necessàries per realitzar-la.
Les preguntes tenen assignades prioritats, i la prioritat de les preguntes que
s'han de fer s'estableix quan s'inicia l'instal·lador.

Quan s'executa una instal·lació predeterminada només es fan les preguntes
essencials (d'alta prioritat). En aquest cas és un procés d'instal·lació
altament automatitzat amb poca interacció de l'usuari. Els elements s'executen
automàticament en una seqüència, la selecció dels elements que s'executen depèn
principalment del mètode d'instal·lació que utilitzeu i del vostre maquinari.
L'instal·lador utilitzarà valors predeterminats per a les preguntes que no es
facin.

Si hi hagués un problema, l'usuari veuria una pantalla d'error i potser es
mostraria el menú d'instal·lació perquè seleccionés alguna acció alternativa.
Si no hi ha problemes, l'usuari mai veurà el menú d'instal·lació, sinó que
simplement haurà de contestar les preguntes de cada element. Les notificacions
d'errors greus tenen una prioritat «critica» de manera que sempre es notifiqui
a l'usuari.

Alguns dels valors predeterminats que utilitza l'instal·lador es poden canviar
passant-li arguments d'arrencada quan s'inicia el debian-installer. Per
exemple, si voleu forçar una configuració de xarxa estàtica (el DHCP s'utilitza
de manera predeterminada si està disponible), podeu afegir el paràmetre
d'arrencada netcfg/disable_autoconfig=true. Podeu veure les opcions disponibles
a Secció 5.3.2, «Paràmetres de l'instal·lador Debian».

Els usuaris avançats es poden sentir més còmodes amb una interfície conduïda a
través de menús, on l'usuari controla cada pas en comptes de deixar que
l'instal·lador els realitzi automàticament en una seqüència. Per utilitzar
l'instal·lador de forma manual, a través de menús, afegiu l'argument
d'arrencada priority=medium.

Si el vostre maquinari necessita que passeu opcions als mòduls del nucli a mida
que es van instal·lant, necessitareu iniciar l'instal·lador en mode «expert».
Aquesta opció es pot activar utilitzant l'ordre expert per arrencar
l'instal·lador o bé afegint l'argument d'arrencada priority=low. El mode expert
us proporciona control total sobre el debian-installer.

El ratolí no és funcional en l'entorn basat en mode text. Aquí teniu les tecles
que podeu utilitzar per navegar pels diversos diàlegs. El Tab o la tecla de
cursor a la dreta mouen «endavant», i les Maj+Tab o el cursor a l'esquerra
mouen «endarrere» entre els botons i seleccions que es mostren. Les tecles de
cursor amunt i avall seleccionen diferents elements en una llista desplaçable,
i també desplacen la mateixa llista. A més, en llistes llargues, podeu teclejar
una lletra per fer que la llista es desplaci directament a la secció que tingui
elements que comencin amb aquesta lletra i utilitzar Re Pàg i Av Pàg per
desplaçar la llista per seccions. La barra espaiadora selecciona un objecte com
un quadre de verificació. Utilitzeu la tecla Intro per activar les eleccions.

Alguns diàlegs ofereixen informació addicional d'ajuda. Açò s'indicarà mostrant
a l'última línia de la pantalla que podeu accedir a la informació d'ajuda
prement la tecla F1.

Els missatges d'error i els registres es redirigeixen a la quarta consola.
Podeu accedir a aquesta consola prement Alt esquerra+F4 (manteniu premuda l'Alt
esquerra mentre premeu la tecla de funció F4); torneu al procés principal de
l'instal·lador amb Alt esquerra+F1.

També podeu trobar aquests missatges a /var/log/syslog. Després de la
instal·lació, aquest registre es copia a /var/log/installer/syslog del nou
sistema. Altres missatges de la instal·lació es poden trobar a /var/log/ durant
la instal·lació i a /var/log/installer/ després que l'ordinador s'hagi iniciat
amb el sistema instal·lat.

6.1.1. Utilitzar l'instal·lador gràfic

Tal i com ja s'ha dit anteriorment, l'instal·lador gràfic funciona ben bé de la
mateixa manera que l'instal·lador de text, i per tant la resta del manual es
igualment vàlid com a guia del procés d'instal·lació.

Si preferiu utilitzar el teclat en comptes del ratolí, hi ha un parell de coses
que hauríeu de saber. Per expandir una llista (s'utilitza per exemple en la
selecció de països dins dels continents), podeu utilitzar les tecles + i -. Per
a preguntes en que hi ha més d'un element seleccionable (p. ex. la selecció de
tasques), després de realitzar la selecció oportuna, haureu de tabular fins al
botó Continua prémer la tecla de retorn directament no activarà Continua sinó
que commutarà la selecció.

Si un diàleg ofereix informació addicional d'ajuda, es mostrarà un botó Ajuda.
Podeu accedir a la informació d'ajuda prement bé el botó o bé la tecla F1.

Per canviar a una altra consola, també necessitareu utilitzar la tecla Ctrl,
tal i com es fa al sistema de finestres X («X Window System»). Per exemple, per
canviar a VT2 (el primer intèrpret d'ordres de depuració) haureu d'utilitzar: 
Ctrl+Alt Esquerra+F2. L'instal·lador gràfic s'executa a VT5, per tant podeu
emprar Alt Esquerra+F5 per tornar-hi.

6.2. Introducció als elements

Aquí hi ha una llista dels elements de l'instal·lador amb una breu descripció
de la tasca de cada element. Els detalls que podeu necessitar per saber com
utilitzar un element en particular els podeu trobar a Secció 6.3, «Utilització
dels elements individualment».

main-menu

    Mostra la llista d'elements durant l'operació de l'instal·lador i inicia un
    element quan se selecciona. Les preguntes del menú principal tenen
    assignada una prioritat mitjana; si la vostra prioritat està definida a
    alta o crítica (alta és el valor predeterminat), no veureu el menú. D'altra
    banda, si hi hagués un error que requerís la vostra intervenció, la
    prioritat de les qüestions es pot baixar temporalment per permetre resoldre
    el problema i, en aquest cas, pot aparèixer el menú.

    Podeu arribar al menú principal seleccionant el botó Vés enrere
    repetidament, per retrocedir tot el camí fet per l'element en execució.

localechooser

    Permet a l'usuari seleccionar les opcions de localització per a la
    instal·lació i el sistema instal·lat: idioma, país i usos locals
    («locales»). L'instal·lador mostrarà els missatges en l'idioma seleccionat,
    en el cas que la traducció per aquest idioma no sigui completa, alguns
    missatges pot ser que es mostrin en anglès.

console-setup

    Mostra una llista de (distribucions de) teclats dels quals l'usuari tria el
    que es correspon amb el seu model.

hw-detect

    Detecta automàticament la major part de maquinari del sistema, incloent
    targetes de xarxa, unitats de disc i PCMCIA.

cdrom-detect

    Cerca i munta un mitjà d'instal·lació de Debian.

netcfg

    Configura les connexions de xarxa de l'ordinador perquè es pugui comunicar
    a través d'Internet.

iso-scan

    Cerca imatges ISO (fitxers .iso), que poden ésser a un disc dur.

choose-mirror

    Presenta una llista de rèpliques de l'arxiu de Debian. L'usuari pot triar
    la font dels seus paquets d'instal·lació.

cdrom-checker

    Comprova la integritat d'un mitjà d'instal·lació. D'aquesta manera,
    l'usuari pot estar segur que la imatge d'instal·lació no està corrompuda.

lowmem

    El «lowmem» (poca memòria) intenta detectar sistemes amb poca memòria, en
    aquest cas realitza diversos trucs per treure parts innecessàries del
    debian-installer de la memòria (a canvi de perdre algunes funcions).

anna

    «Anna's Not Nearly APT» (l'Anna quasi no és l'APT). Instal·la paquets que
    s'han obtingut de la rèplica triada o del mitjà d'instal·lació.

user-setup

    Estableix la contrasenya de root, i afegeix un usuari normal.

clock-setup

    Actualitza el rellotge del sistema i determina si aquest està en UTC o no.

tzsetup

    Tria la zona horària, a partir de la ubicació seleccionada abans.

partman

    Permet a l'usuari fer particions als discs adjunts al sistema, generar
    sistemes de fitxers a les particions seleccionades, i adjuntar-los als
    punts de muntatge. També s'inclouen funcions interessants com un mode
    completament automàtic i suport per LVM. Aquesta és l'eina de gestió de
    particions preferida a Debian.

partitioner

    Permet a l'usuari fer particions als discs adjunts al sistema. S'elegeix un
    programa de particions apropiat per a l'arquitectura del vostre ordinador.

partconf

    Visualitza una llista de particions i genera sistemes de fitxers a les
    particions seleccionades segons les instruccions de l'usuari.

partman-lvm

    Ajuda a l'usuari a configurar el LVM («Logical Volume Manager», gestor de
    volums lògics).

partman-md

    Permet a l'usuari configurar el programari RAID («Redundant Array of
    Inexpensive Disks», matriu redundant de discs barats). Aquest programari
    RAID normalment és superior als barats controladors RAID IDE
    (pseudomaquinari) que es troben a les plaques bases més noves.

base-installer

    Instal·la el conjunt de paquets més bàsics que permetin a l'ordinador
    funcionar sota Debian GNU/Linux quan es reiniciï.

apt-setup

    Configura «apt», gairebé automàticament, a partir del mitjà d'instal·lació
    que s'estigui fent servir.

pkgsel

    Utilitza tasksel per seleccionar i instal·lar programari addicional.

os-prober

    Detecta els sistemes operatius instal·lats actualment a l'ordinador i passa
    aquesta informació a l'instal·lador del carregador d'arrencada
    («bootloader-installer»), que pot oferir la capacitat d'afegir els sistemes
    operatius detectats al menú d'inici del carregador d'arrencada. D'aquesta
    manera, l'usuari pot triar fàcilment, durant l'arrencada, quin sistema
    operatiu iniciar.

bootloader-installer

    Cadascun dels instal·ladors de carregadors d'arrencada instal·la un
    programa al disc dur, que és necessari perquè l'ordinador pugui arrencar
    usant Linux sense utilitzar un llapis de memòria o CD-ROM. Molts
    carregadors d'arrencada permeten a l'usuari triar un sistema operatiu
    alternatiu cada vegada que s'arrenca l'ordinador.

shell

    Permet a l'usuari executar un intèrpret d'ordres des del menú o en una
    segona consola.

save-logs

    Proporciona un mètode perquè l'usuari pugui registrar informació en llapis
    USB, xarxa, disc dur o altres medis quan es troba algun problema.
    Posteriorment i de forma acurada, pot informar als desenvolupadors de
    Debian dels problemes amb el programari d'instal·lació.

6.3. Utilització dels elements individualment

En aquesta secció descriurem detalladament cada element de l'instal·lador. Els
elements s'han agrupat en fases que els usuaris haurien de reconèixer. Es
presenten en l'ordre que apareixen durant la instal·lació. Recordeu que en cada
instal·lació no s'utilitzaran tots els mòduls, els que realment s'utilitzen
depenen del mètode d'instal·lació que s'utilitza i del maquinari.

6.3.1. Configuració de l'instal·lador de Debian i del maquinari

Suposem que l'instal·lador de Debian ha arrencat i que esteu davant la primera
pantalla. En aquesta fase, les capacitats del debian-installer encara són
bastant limitades. Desconeix la major part de característiques del maquinari,
idioma preferit, o fins i tot quina tasca ha de realitzar. No us preocupeu, el
debian-installer és bastant llest i pot enquestar automàticament el vostre
maquinari, localitzar la resta dels seus elements i actualitzar-se a un sistema
d'instal·lació capaç. Tot i això encara caldrà ajudar el debian-installer amb
alguna informació que no pot determinar automàticament (com la selecció de
l'idioma preferit, l'esquema del teclat o la rèplica de xarxa a utilitzar).

Notareu que en aquesta fase el debian-installer realitza la detecció de
maquinari diverses vegades. El primer cop l'objectiu és, específicament, el
maquinari necessari per carregar els elements de l'instal·lador (p. ex. el
CD-ROM o la targeta de xarxa). Com que no tots els controladors estan
disponibles en aquesta primera execució, és necessari repetir la detecció de
maquinari posteriorment.

Durant la detecció de maquinari, el debian-installer comprova si algun dels
dispositius del sistema necessita carregar algun microprogramari. Si es
sol·licita un microprogramari que no està disponible, es mostrarà un diàleg que
permet carregar el microprogramari des d'una unitat extraïble. Vegeu
Secció 6.4, «Carregar microprogramari no inclòs a l'instal·lador» per a més
detalls.

6.3.1.1. Comprovació de la memòria disponible / mode poca memòria

Una de les primeres coses que fa el debian-installer és comprovar la memòria
disponible. Si la memòria disponible és limitada, aquest component realitzarà
algunes modificacions en el procés d'instal·lació que us haurien de permetre
instal·lar Debian GNU/Linux al sistema.

La primera mesura que es pren per reduir el consum de memòria per part de
l'instal·lador és inhabilitar les traduccions, de manera que el procés només es
podrà seguir en anglès. Evidentment, encara podreu afegir la traducció al
vostre idioma al sistema després que la instal·lació s'hagi completat.

Si això no és suficient, l'instal·lador encara reduirà més el consum de memòria
carregant només els components essencials per completar la instal·lació bàsica.
Això redueix la funcionalitat del sistema d'instal·lació. Tindreu l'oportunitat
de carregar components addicionals manualment, però haureu d'anar amb compte
perquè cada component que seleccioneu utilitzarà més memòria i, per tant, també
hi haurà més possibilitats que el procés falli.

Si l'instal·lador funciona en mode poca memòria, és recomanable generar una
partició d'intercanvi relativament gran (64-128 MiB). La partició d'intercanvi
s'utilitzarà com a memòria virtual, incrementant així la quantitat de memòria
disponible per al sistema. L'instal·lador activarà la partició d'intercanvi tan
aviat com sigui possible en el procés d'instal·lació. Fixeu-vos que un ús
excessiu de la memòria d'intercanvi pot reduir el rendiment del sistema i
augmentar l'activitat del disc.

Malgrat totes aquestes mesures, encara és possible que el sistema es bloquegi,
que es produeixin errors inesperats, o que el nucli mati processos si es queda
sense memòria (fet que resultarà en missatges de «Out of memory» mostrats a VT4
i al registre del sistema).

Per exemple, s'ha pogut comprovar que la generació d'un sistema de fitxers ext3
gran falla en mode poca memòria quan no hi ha prou espai d'intercanvi. Si més
memòria d'intercanvi no ajuda a solucionar-ho, podeu provar a generar el
sistema de fitxers com a ext2 (que és un component essencial de
l'instal·lador). És possible passar particions ext2 a ext3 després de la
instal·lació.

Hi ha la possibilitat de forçar l'instal·lador a emprar un valor més gran per
«lowmem» ("poca memòria") al basat en la memòria disponible usant el paràmetre
d'arrencada «lowmem» com es descriu a Secció 5.3.2, «Paràmetres de
l'instal·lador Debian».

6.3.1.2. Selecció de les opcions de localització

En la majoria dels casos, les primeres qüestions que us apareixeran faran
referència a les opcions de localització a utilitzar en la instal·lació i pel
sistema instal·lat. Les opcions de localització consisteixen en l'idioma, la
ubicació i els usos locals («locales»).

L'idioma seleccionat s'utilitzarà en la resta del procés d'instal·lació, a
condició que existeixi una traducció dels diferents quadres de diàleg. En cas
de no existir una traducció de l'idioma seleccionat, l'instal·lador utilitzarà
la versió en l'anglès.

La ubicació geogràfica seleccionada (sovint un país) s'utilitzarà posteriorment
en el procés d'instal·lació per seleccionar el fus horari correcte i una
rèplica de Debian apropiada pel país indicat. L'idioma i el país s'utilitzaran
per ajudar a determinar els usos locals («locale») predeterminats del sistema i
definir la distribució correcta del teclat.

Primer se us demanarà que seleccioneu el vostre idioma preferit. Els noms dels
idiomes estan llistats en anglès (banda esquerra) i en el propi idioma (banda
dreta); els noms de la banda dreta es mostren utilitzant la tipografia pròpia
de l'idioma. La llista està ordenada en funció dels noms en anglès. Al
capdamunt de la llista hi ha una opció extra que permet seleccionar els usos
locals («locale») «C» en comptes d'un idioma. Si seleccioneu els usos locals
(«locale») «C» la instal·lació es realitzarà en anglès; el sistema instal·lat
no disposarà del suport per a la localització, ja que el paquet locales no
estarà instal·lat.

A continuació se vos demanarà que escolliu una ubicació geogràfica. Si havíeu
escollit un idioma reconegut com a oficial a més d'un país^[6], se us mostrarà
una llista amb tan sols eixos països. Per seleccionar un país que no és a la
llista, trieu l'opció altra (l'última opció). Us trobareu aleshores amb una
llista de continents; seleccionat el continent, arribareu a una llista amb els
països rellevants del continent.

Si l'idioma tan sols té un país associat amb ell, es mostrarà una llista de
països del continent o regió on es troba el país, que estarà marcat per
defecte. Empreu l'opció Enrere per a escollir un país d’un altre continent.

Nota

És important que escolliu el país on viviu o on vos trobeu perquè determina el
fus horari que es configurarà al sistema instal·lat.

Si heu escollit una combinació d'idioma i país per al qual no hi ha cap
«locale» definit, i existeixen múltiples «locales» per a l'idioma,
l'instal·lador vos permetrà escollir quin d'aquests «locales» preferiu com a
«locale» predeterminat del sistema instal·lat^[7]. A la resta dels casos
s'escollirà un «locale» predeterminat basat en l'idioma i país escollits.

Tot «locale» predeterminat escollit com es descriu al paràgraf de dalt emprarà
UTF-8 com a codificació de caràcters.

Si esteu instal·lant amb una prioritat baixa, se vos donarà l'opció d'escollir
«locales» addicionals, incloent els anomenats «locales» «tradicionals» ^[8], a
generar per al sistema instal·lat. En aquest cas, se vos preguntarà quin dels
«locales» escollits voleu que siga el «locale» predeterminat per al sistema
instal·lat.

6.3.1.3. Selecció d'un teclat

Els teclats acostumen a estar adaptats als caràcters utilitzats en un idioma.
Seleccioneu un format idoni al teclat que esteu utilitzant o un de similar en
cas de que no aparegui. Una vegada instal·lat el sistema podreu seleccionar-ne
un entre un rang de possibilitats més gran (un cop finalitzada la instal·lació
executeu l'ordre dpkg-reconfigure keyboard-configuration com a superusuari).

Moveu el ressaltat al teclat que voleu utilitzar i premeu Intro. Utilitzeu el
cursor del teclat per moure el -- ressaltat; tots els formats de teclat de tots
els idiomes situen el cursor en la mateixa ubicació i, per tant, són
independents a la configuració del teclat.

6.3.1.4. Cerca de la imatge ISO de l'instal·lador de Debian

Quan instal·leu segons el mètode hd-media, hi haurà un moment en què
necessitareu trobar i muntar la imatge ISO de l'instal·lador de Debian per tal
d'obtenir la resta de fitxers de la instal·lació. Això és exactament el que fa
el component iso-scan.

Al principi, l'iso-scan munta automàticament tots els dispositius de bloc (p.
ex. particions i volums lògics) que tinguin algun sistema de fitxers conegut i
cerca de forma seqüencial noms de fitxer acabats en .iso (o, per aquest
propòsit, .ISO). Pareu atenció en què el primer intent només analitza fitxers
en el directori arrel i en el primer nivell de subdirectoris (p. ex. troba /
qualsevol_cosa.iso i /data/qualsevol_cosa.iso, però no /data/tmp/qualsevol_cosa
.iso). Després que hagi trobat una imatge iso, l'iso-scan comprova el seu
contingut per determinar si la imatge és una imatge iso de Debian vàlida o no.
En el primer cas hem acabat, en el segon l'iso-scan cerca una altra imatge.

En el cas que l'intent previ per trobar una imatge iso de l'instal·lador falli,
l'iso-scan us preguntarà si voleu realitzar una cerca més exhaustiva. En aquest
cas, no es mira només els directoris superiors, sinó que es recorre el sistema
de fitxers complet.

Si l'iso-scan no localitza la imatge iso de l'instal·lador, torneu a arrencar
al vostre sistema operatiu original i comproveu si la imatge té un nom correcte
(acabat en .iso), si es troba en un sistema de fitxers que el debian-installer
pugui reconèixer, i si no és corrupte (verifiqueu la suma de comprovació). Els
usuaris de Unix experimentats poden fer-ho des de la segona consola, sense
tornar a arrencar.

Adoneu-vos-en que la partició (o disc) que conté la imatge ISO no pot ser
reutilitzada durant el procés d'instal·lació ja que estarà sent usada per
l'instal·lador. Per evitar-ho, i sempre que tingueu prou memòria al sistema,
l'instal·lador pot copiar la imatge ISO a la RAM abans de muntar-la. Això és
controlat per la pregunta debconf de baixa prioritat iso-scan/copy_iso_to_ram
(només es demana si el requeriment de memòria es compleix).

6.3.1.5. Configuració de la xarxa

Quan entreu en aquest pas, si el sistema detecta que teniu més d'un dispositiu
de xarxa, se us demanarà que elegiu quin dispositiu serà la vostra interfície
de xarxa primària, és a dir, la que voleu utilitzar per a la instal·lació. Les
altres interfícies no es configuraran en aquest moment. Podeu configurar les
altres interfícies un cop hagi finalitzat la instal·lació; vegeu la pàgina de
manual interfaces(5).

6.3.1.5.1. Configuració automàtica de la xarxa

De manera predeterminada, el debian-installer intenta configurar la xarxa del
vostre ordinador automàticament via DHCP. Si la prova té èxit, ja estareu. Si
la prova falla es pot deure a molts factors, des d'un cable de xarxa
desconnectat, fins a una mala configuració del DHCP. O potser no disposeu d'un
servidor DHCP a la vostra xarxa local. Per a més explicacions comproveu els
missatges d'error a la quarta consola. En qualsevol cas, se us preguntarà si ho
voleu tornar a intentar, o si voleu realitzar una configuració manual. Els
servidors DHCP de vegades són realment lents en les seves respostes; per tant,
si esteu segurs que tot és correcte, intenteu-ho de nou. Si l'autoconfiguració
falla repetidament, podeu provar a configurar la xarxa manualment.

6.3.1.5.2. Configuració manual de la xarxa

La configuració manual de la xarxa us plantejarà algunes qüestions sobre la
vostra xarxa, notablement l'adreça IP, la màscara de la subxarxa, la
passarel·la, l'adreça del servidor de noms, i un nom per a l'ordinador. A més,
si teniu una interfície de xarxa sense fils, se us demanarà que indiqueu el
vostre Wireless ESSID («el nom de la xarxa sense fils») i una clau WEP o clau
WPA/WPA2. Ompliu-ho amb les respostes de la Secció 3.3, «Informació necessària»
.

Nota

Alguns detalls tècnics que podeu, o no, trobar útils: el programa suposa que
l'adreça IP de la xarxa és l'AND bit a bit de la IP del vostre sistema i la
màscara. L'adreça de difusió es calcularà com l'OR bit a bit de l'adreça IP del
vostre sistema amb la negació bit a bit de la màscara. També endevinarà la
passarel·la. Si no podeu trobar alguna d'aquestes respostes, utilitzeu les
propostes predeterminades -- si és necessari, podeu canviar-les un cop el
sistema s'hagi instal·lat editant el fitxer /etc/network/interfaces.

6.3.1.5.3. IPv4 i IPv6

Des de Debian GNU/Linux 7.0 («Wheezy») i posteriors, debian-installer admet
IPv6 a més de la «clàssica» IPv4. Totes les combinacions de IPv4 i IPv6 (només
IPv4, només IPv6 i ambdues) són compatibles.

L'autoconfiguració per IPv4 es fa amb DHCP («Dynamic Host Configuration
Protocol» protocol de configuració dinàmica de servidor). L'autoconfiguració de
IPv6 admet la configuració dinàmica sense estat fent servir NDP («Neighbor
Discovery Protocol», protocol de descobriment de veïns, incloent l'assignació
recursiva del servidor DNS (RDNSS)), autoconfiguració amb estat mitjançant
DHCPv6 i l'autoconfiguració mixta amb i sense estat (configuració d'adreces
mitjançant NDP i paràmetres addicionals mitjançant DHCPv6).

6.3.2. Configuració d'usuaris i contrasenyes

Després d'instal·lar el sistema base, l'instal·lador us permetrà configurar el
compte de superusuari «root» i/o un compte per al primer usuari. Altres usuaris
es poden generar després que la instal·lació s'hagi acabat.

6.3.2.1. Establir la contrasenya del Root

El compte root, també anomenat super usuari, és un accés que es bota totes les
proteccions de seguretat al vostre sistema. El compte root tan sòls s'hauria
d'utilitzar per administrar el sistema i el mínim temps possible.

Qualsevol contrasenya que creeu ha de contenir al menys 6 caràcters, i hauria
de contenir majúscules i minúscules, així com signes de puntuació. Eviteu
paraules de diccionari o utilitzar informació personal que es pugui endevinar.

Si algú us demana alguna vegada la vostra contrasenya de root, sigueu
extremadament cautelosos. No hauríeu de donar mai la vostra contrasenya de
root, a no ser que estigueu administrant una màquina amb més d'un
administrador.

En cas que no especifiqueu una clau per a l'usuari «root» en aquest punt, el
compte quedarà desactivat però el paquet sudo serà instal·lat posteriorment per
poder dur a terme tasques administratives en el nou sistema. Per defecte, el
primer usuari creat al sistema tindrà permès usar la comanda sudo per esdevenir
root.

6.3.2.2. Crear un usuari normal

El sistema us demanarà si voleu generar un compte d'usuari normal en aquest
punt. Aquest compte hauria de ser el vostra accés personal principal. No
hauríeu d'utilitzar el compte de root per l'ús diari o pel vostre accés
personal.

Per que no? Bé, una raó per evitar utilitzar els privilegis de root és que és
molt fàcil fer desperfectes irreparables com a root. Un altra raó és que us
podrien enganyar per executar un programa tipus Cavall de Troia -- que és un
programa que utilitza els poders de super usuari per comprometre la seguretat
del vostre sistema sense que us en adoneu. Qualsevol bon llibre d'administració
de sistemes Unix tractarà aquest assumpte amb més detall -- considereu llegir
algun d'aquests si açò és nou per a vosaltres.

Primer vos preguntarà pel nom complet de l'usuari. Aleshores us preguntarà pel
nom del compte de l'usuari; normalment el vostre nom o quelcom paregut serà
prou i serà el que de fet estarà per defecte. A l'últim pas, ús demanarà una
contrasenya per a aquest compte.

Si en qualsevol punt després de la instal·lació voleu generar un altre compte,
utilitzeu l'ordre adduser.

6.3.3. Configuració del rellotge i la zona horària

En primer lloc l'instal·lador intentarà connectar-se a un servidor d'hora
d'Internet (utilitzant el protocol NTP) per tal de fitxar l'hora del sistema
correctament. Si no ho aconsegueix, assumirà que l'hora i data obtingudes del
rellotge del sistema en el moment d'arrencar l'instal·lador són correctes. No
és possible establir l'hora del sistema manualment durant el procés
d'instal·lació.

Depenent de la localització seleccionada anteriorment durant el procés
d'instal·lació, pot ser que se us mostri una llista de zones horàries
rellevants a aquesta localització. Si la vostra localització només en té una i
esteu realitzant una instal·lació predeterminada, no se us preguntarà res i el
sistema assumirà aquesta zona horària.

Al mode expert o quan instal·leu amb prioritat mitjana, tindreu l'opció
addicional d'escollir el «Temps Universal Coordinat» (UTC) com a zona horària.

Si per algun motiu voleu establir una zona horària que no coincideixi amb la
localització seleccionada, hi ha dues opcions.

 1. L'opció més fàcil és seleccionar simplement un fus horari diferent una
    vegada s'ha completat la instal·lació i s'ha arrencat el nou sistema.
    L'ordre per fer-ho és:

    # dpkg-reconfigure tzdata

 2. Alternativament, la zona horària es pot establir al principi de la
    instal·lació passant el paràmetre time/zone=valor quan arrenqueu el sistema
    d'instal·lació. El valor hauria de ser un fus horari vàlid, per exemple
    Europe/London o UTC.

Per instal·lacions automatitzades, podeu establir el fus horari a qualsevol
valor mitjançant una configuració prèvia.

6.3.4. Realització de particions i selecció de punts de muntatge

En aquest instant, després de l'última execució de la detecció de maquinari, el
debian-installer hauria d'estar a plena potència, adaptat a les necessitats de
l'usuari i preparat per fer la feina real. Tal i com indica el títol d'aquesta
secció, la tasca principal dels pròxims elements és fer les particions als
vostres discs, generar els sistemes de fitxers, assignar els punts de muntatges
i, opcionalment, configurar opcions estretament relacionades com dispositius
RAID, LVM o xifrats.

Si no esteu convençuts de com fer particions o simplement voleu obtenir més
informació, vegeu Apèndix C, Fer particions per a Debian.

Primer podreu fer particions automàticament de la unitat sencera o l'espai
lliure corresponent. Aquesta opció s'anomena fer particions de forma «guiada».
Si no voleu fer particions de forma automàtica escolliu l'opció Manual del
menú.

6.3.4.1. Opcions per a la generació de particions

L'eina de partició emprada per debian-installer és bastant versàtil. Permet
generar molts esquemes de partició diferents fent servir diverses taules de
particions, sistemes de fitxers i dispositius de blocs avançats.

Les opcions disponibles, de fet, depenen principalment de l'arquitectura, però
també d'altres factors. Per exemple, en sistemes amb una memòria interna
limitada algunes opcions no estan disponibles. Els valors per defecte també
varien. El tipus de taula de particions emprada per defecte pot diferir per
exemple entre discs de gran capacitat i altres de més menuts. Algunes opcions
només poden ser canviades en instal·lar amb un nivell mitjà o baix de prioritat
del sistema de configuració de Debian («debconf») amb prioritats majors
s'empraran valors per defecte adequats.

L’instal·lador ofereix diverses formes de generació avançada de particions i ús
de dispositius d'emmagatzematge, que sovint poder ser combinats.

  • Gestor de volums lògics (LVM)

  • RAID per programari

    S'admeten els nivells de RAID 0, 1, 4, 5, 6 i 10.

  • Xifrat

  • RAID d'ATA sèrie (emprant dmraid)

    També anomenat «RAID fals» o «RAID de BIOS». De moment, la funció de RAID
    d'ATA sèrie només està disponible si s'habilita en arrencar l'instal·lador.
    Podeu trobar més informació al nostre wiki.

  • Multipath (experimental)

    Vegeu el nostre wiki per a més informació. De moment, la funció «multipath»
    només està disponible si s'habilita en arrencar l'instal·lador.

S'admeten els sistemes de fitxers següents.

  • ext2, ext3, ext4

    El sistema de fitxers escollit per defecte en la majora dels casos és ext4;
    per a la partició /boot s'escollirà ext2 per defecte en generar les
    particions de forma guiada.

  • jfs (no disponible en totes les arquitectures)

  • xfs (no disponible en totes les arquitectures)

  • reiserfs (opcional; no disponible en totes les arquitectures)

    El sistema de fitxers Reiser ja no està disponible per defecte. Quan
    l'instal·lador funciona amb una prioritat mitjana o baixa del sistema de
    configuració Debian («debconf»), podeu habilitar-lo escollint el component
    partman-reiserfs. Només s'admet la versió 3 del protocol.

  • qnx4

    Se'n reconeixen les particions existents i és possible assignar-lis punts
    de muntatge. No es poden generar noves particions qnx4.

  • FAT16, FAT32

  • NTFS (només lectura)

    Es pot canviar la mida de les particions NTFS existents i és possible
    assignar-lis punts de muntatge. No es poden generar noves particions NTFS.

6.3.4.2. Fer particions de forma guiada

Si escolliu fer les particions de forma guiada podreu triar entre tres opcions:
generar les particions al disc directament (mètode clàssic), generar-les
mitjançant l'Administrador de Volums Lògics (LVM), o generar-les utilitzant LVM
xifrat.^[9].

Nota

L'opció d'utilitzar LVM (xifrat) pot no estar disponible a totes les
arquitectures.

Quan s'utilitza LVM o LVM xifrat, l'instal·lador generarà la major part de les
particions dins una gran partició; l'avantatge d'aquest mètode és que més
endavant podreu canviar la mida de les particions que estan dins d'aquesta gran
partició de forma relativament senzilla. En el cas d'LVM xifrat, no es podrà
llegir la partició gran sense conèixer una frase clau especial, proporcionant
així certa seguretat extra per a les vostres dades personals.

Quan s'utilitza LVM xifrat, l'instal·lador també esborra automàticament el disc
escrivint-hi dades aleatòries. Això millora encara més la seguretat (ja que
d'aquesta manera és impossible dir quines parts del disc s'estan utilitzant, i
a més també s'esborren restes d'instal·lacions anteriors), però pot trigar
temps segons la mida del disc dur.

Nota

Si trieu fer particions de forma guiada amb LVM o LVM xifrat, s'hauran
d'escriure alguns canvis a la taula de particions del disc seleccionat mentre
es configura LVM. Aquests canvis esborraran efectivament tota informació que hi
hagi al disc dur seleccionat, i no serà possible desfer-ho més endavant.
Tanmateix, l'instal·lador us demanarà una confirmació dels canvis abans de
fer-los efectius definitivament.

Si trieu fer particions de forma guiada (ja sigui en format clàssic o amb LVM,
xifrat o no), per a un disc sencer, primer haureu de seleccionar el disc que
voleu utilitzar. Comproveu que apareixen tots els discs i, si en teniu més
d'un, assegureu-vos de seleccionar el correcte. L'ordre en què es llisten pot
variar respecte el que esteu acostumats a veure. La mida dels discs pot ajudar
a identificar-los.

Les dades que tingueu al disc seleccionat es perdran, però l'instal·lador
sempre demanarà confirmació dels canvis proposats abans d'escriure res al disc.
Si heu seleccionat el mètode de fer particions clàssic, podreu desfer els
canvis fins al final; si utilitzeu LVM (xifrat), això no serà possible.

A continuació, podreu triar entre els esquemes llistats a la taula que hi ha a
continuació. Tots els esquemes tenen els seus pros i contres, alguns dels quals
podeu veure en detall a Apèndix C, Fer particions per a Debian. Si no n'esteu
segurs, escolliu la primera opció. Heu de tenir present que fer particions de
forma guiada precisa d'un mínim d'espai lliure amb el qual treballar. Si no li
assigneu un mínim d'1 GiB d'espai (en funció de l'esquema escollit), es
produirà un error.

┌─────────────────────────────────────────┬──────────┬────────────────────────┐
│          Esquema de particions          │  Espai   │  Particions generades  │
│                                         │  mínim   │                        │
├─────────────────────────────────────────┼──────────┼────────────────────────┤
│Tots els fitxers en una partició         │600MB     │/, swap                 │
├─────────────────────────────────────────┼──────────┼────────────────────────┤
│Partició /home separada                  │500MB     │/, /home, swap          │
├─────────────────────────────────────────┼──────────┼────────────────────────┤
│Particions separades /home, /usr, /var i │1GB       │/, /home, /var, /tmp,   │
│/tmp                                     │          │swap                    │
└─────────────────────────────────────────┴──────────┴────────────────────────┘

Si escolliu fer particions de forma guiada utilitzant LVM (xifrat),
l'instal·lador també crearà una partició /boot separada. Les altres particions,
inclosa la d'intercanvi (swap), es crearan dins la partició LVM.

Si escolliu fer particions de forma guiada en un sistema IA-64 hi haurà una
partició addicional, formatada amb un sistema de fitxers arrencable FAT16, pel
carregador d'arrencada EFI. També hi ha un opció addicional del menú de
formatat per configurar manualment una partició com a partició d'arrencada EFI.

Després de la selecció d'un esquema, la pantalla següent mostrarà la nova taula
de particions, on s'inclourà informació respecte a si es formataran, i com, les
particions i on es muntaran.

La llista de particions hauria de ser similar a:

  SCSI1 (0,0,0) (sda) - 6.4 GB WDC AC36400L
        #1 primary   16.4 MB  B f ext2       /boot
        #2 primary  551.0 MB      swap       swap
        #3 primary    5.8 GB      ntfs
           pri/log    8.2 MB      FREE SPACE

  SCSI2 (1,0,0) (sdb) - 80.0 GB ST380021A
        #1 primary   15.9 MB      ext3
        #2 primary  996.0 MB      fat16
        #3 primary    3.9 GB      xfs        /home
        #5 logical    6.0 GB    f ext4       /
        #6 logical    1.0 GB    f ext3       /var
        #7 logical  498.8 MB      ext3

L'exemple mostra dos discs durs dividits en múltiples particions; el primer
disc disposa d'espai lliure. Cada línia de partició disposa del número de
partició, el tipus, mida, senyaladors opcionals, sistema de fitxers i punt de
muntatge (si n'hi ha). Avís: aquesta configuració particular no es pot generar
fent les particions de forma guiada però mostra les possibles variacions que es
poden aconseguir fent les particions manualment.

En aquest punt finalitza la partició guiada. Si la taula de particions generada
satisfà les vostres necessitats podeu escollir l'opció de menú Finalitza la
partició i escriu els canvis al disc per desar la nova taula de particions (tal
i com es descriu al final d'aquesta secció). Si no satisfà les vostres
necessitats podeu escollir l'opció Desfés els canvis a les particions i
executar el partit guiat altra vegada, o modificar els canvis proposats tal i
com es descriu a continuació per fer les particions manualment.

6.3.4.3. Fer particions de forma manual

En cas d'escollir de fer les particions de forma manual us apareixerà una
pantalla similar a la mostrada anteriorment, exceptuant que es mostrarà la
taula de particions actual i sense els punts de muntatges. El mètode per
configurar manualment la taula de particions i la utilització de les particions
per part de Debian es descriurà al llarg de la resta de la secció.

Si escolliu un disc nou sense particions o espai lliure, se us oferirà la
possibilitat de generar una nova taula de particions (és necessària per generar
noves particions). Posteriorment hauria d'aparèixer una nova línia sota el disc
seleccionat amb el títol «ESPAI LLIURE».

Si seleccioneu l'espai lliure tindreu l'oportunitat de generar una nova
partició. Haureu de contestar a una sèrie de qüestions ràpides referents a la
mida, tipus (primària o lògica) i la ubicació (al principi o al final de
l'espai lliure). Posteriorment se us presentarà la informació referent a la
nova partició. El paràmetre principal és Utilitza-ho com a:, que determina si
la partició tindrà un sistema de fitxers o si s'utilitzarà per a memòria
d'intercanvi, RAID per software, LVM, un sistema de fitxers xifrat, o fins i
tot deixar-la sense utilitzar. Altres opcions inclouen el punt de muntatge,
opcions del muntatge i senyaladors d'arrencada; aquells que es mostraran
depenen de com s'usarà la partició. Podeu modificar lliurement els valors
predeterminats en funció de les vostres necessitats. P. ex. seleccionant
l'opció Utilitza-ho com a:, podeu seleccionar un sistema de fitxers diferent
per aquesta partició, incloent opcions per usar la partició com a memòria
d'intercanvi («swap»), RAID per software, LVM, o simplement no usar-la. Un cop
la nova partició satisfaci les vostres necessitats seleccioneu l'opció S'ha
finalitzat la configuració de la partició i retorneu a la pantalla principal
del partman.

Si voleu modificar alguna característica de la partició seleccioneu-la i
accedireu al menú de configuració de la partició. Com que és la mateixa
pantalla que la utilitzada en la generació de noves particions, podreu
modificar-ne les mateixes característiques. Una característica que probablement
no sigui evident en un primer moment és la possibilitat de modificar la mida de
la partició seleccionant l'element que mostra la mida de la partició. Els
sistemes de fitxers que s'han comprovat que funcionen són, com a mínim, fat16,
fat32, ext2, ext3 i swap. Aquest menú també us permet suprimir una partició.

Assegureu-vos de generar un mínim de dues particions: una pel sistema de
fitxers root (que s'ha de muntar com a /) i una pel swap. Si us oblideu de
muntar el sistema de fitxers root, el partman no us deixarà continuar fins que
no solucioneu el problema.

Si us heu oblidat de seleccionar i formatar una partició d'arrencada EFI, el 
partman ho detectarà i no us deixarà continuar fins que no n'assigneu una.

Les possibilitats del partman es poden ampliar a través dels mòduls de
l'instal·lador, però dependran de l'arquitectura del sistema. Si no teniu accés
a totes les possibilitats que esperàveu comproveu que heu carregat tots els
mòduls necessaris (p. ex. partman-ext3, partman-xfs, o partman-lvm).

Un cop la partició satisfaci les vostres necessitats, seleccioneu l'opció de
partició Finalitza la partició i escriu els canvis al disc. Se us presentarà un
resum dels canvis realitzats als disc i se us demanarà que confirmeu la
generació dels sistemes de fitxers tal i com els heu sol·licitat.

6.3.4.4. Configuració de dispositius de discs múltiples (RAID de programari)

Si teniu més d'un disc dur^[10] en el vostre ordinador, podeu utilitzar el 
partman-md per configurar els vostres discs per obtenir un millor rendiment i/o
més seguretat en les vostres dades. El resultat s'anomena dispositiu de discs
múltiples (MD) (o la seva variant més coneguda, RAID de programari).

Els MD són bàsicament un grapat de particions localitzades a diversos discs i
que es combinen juntes per formar un dispositiu lògic. Aquest dispositiu es pot
utilitzar llavors com una partició ordinària (p. ex. en el partman la podeu
formatar, assignar-li un punt de muntatge, etc.).

Els beneficis que això aporta depèn del tipus de dispositiu MD que genereu.
Actualment se suporten:

RAID0

    S'enfoca principalment al rendiment. El RAID0 reparteix totes les dades
    entrants en bandes i les distribueix de la mateixa manera sobre cada disc
    de la matriu. Això pot augmentar la velocitat de les operacions de lectura/
    escriptura, però quan un dels discs falla, ho perdreu tot (part de la
    informació encara és al disc/s sa, l'altra part era al disc que ha fallat).

    L'ús típic del RAID0 és una partició per edició de vídeo.

RAID1

    És adequat per a les configuracions on la fiabilitat és la primera
    preocupació. Consisteix en diverses (usualment dues) particions de la
    mateixa mida en les quals es desen les mateixes dades. Això significa
    essencialment tres coses. La primera, que si un dels discs falla, encara
    teniu les dades repetides en els discs restants. La segona, que només podeu
    utilitzar una fracció de la capacitat disponible (més precisament, la mida
    de la partició més petita del RAID). La tercera, que les lectures als
    fitxers s'equilibren entre els discs, cosa que pot augmentar el rendiment
    en un servidor, com un servidor de fitxers, que tendeix a carregar-se amb
    més lectures que no pas escriptures.

    Opcionalment podeu tenir un disc de recanvi en la matriu que agafaria el
    lloc del disc espatllat en cas de fallida.

RAID5

    És un bon compromís entre velocitat, rendiment i redundància de les dades.
    El RAID5 reparteix totes les dades entrants en bandes i les distribueix
    equitativament entre tots els discs excepte un (similar al RAID0). A
    diferència del RAID0, el RAID5 també calcula informació de paritat, que
    s'escriu en el disc restant. El disc de paritat no és estàtic (això seria
    l'anomenat RAID4), sinó que canvia periòdicament, de manera que la
    informació de paritat es distribueixi equitativament entre tots els discs.
    Quan un dels discs falla, la part d'informació que falta es pot calcular a
    partir de les dades restants i de la seva paritat. El RAID5 ha de consistir
    en almenys tres particions actives. Opcionalment podeu tenir un disc de
    recanvi en la matriu, el qual agafaria el lloc del disc espatllat en cas de
    fallida.

    Com podeu veure, el RAID5 té un grau de rendiment similar al RAID1 però
    aconsegueix menys redundància. Per altra banda, pot resultar una mica més
    lent en les operacions d'escriptura que no pas el RAID0 degut al càlcul de
    la informació de paritat.

RAID6

    És similar a RAID5 excepte pel fet que utilitza dos dispositius de paritat
    en comptes d'un.

    Un RAID6 pot sobreviure fins a dues fallades de disc.

RAID10

    RAID10 combina la segmentació (com RAID0) i la rèplica (com RAID1). Genera
    n còpies de les dades d'entrada i les distribueix en diverses particions de
    forma que cap de les còpies es trobi al mateix dispositiu. El valor
    predeterminat de n és 2, però això es pot canviar en mode expert. El nombre
    de particions utilitzades ha de ser n com a mínim. RAID10 té diferents
    formats per distribuir les còpies. Per defecte farà còpies properes
    («near»). Això vol dir que totes les còpies es troben aproximadament a la
    mateixa posició en tots els discs. Les còpies allunyades («far») disposen
    les còpies en diferents posicions. Les còpies desplaçades («offset») copien
    el segment, no fan les còpies individualment.

    RAID10 es pot utilitzar per aconseguir fiabilitat i redundància sense
    l'inconvenient d'haver de calcular la paritat.

Per resumir-ho:

┌──────┬───────────┬──────────┬────────────┬──────────────────────────────────┐
│      │Dispositius│Dispositiu│ Sobreviu a │                                  │
│Tipus │  mínims   │de recanvi│una fallida │         Espai disponible         │
│      │           │          │  de disc?  │                                  │
├──────┼───────────┼──────────┼────────────┼──────────────────────────────────┤
│      │           │          │            │Mida de la partició més petita    │
│RAID0 │2          │no        │no          │multiplicada pel nombre de        │
│      │           │          │            │dispositius en el RAID            │
├──────┼───────────┼──────────┼────────────┼──────────────────────────────────┤
│RAID1 │2          │opcional  │sí          │Mida de la partició més petita en │
│      │           │          │            │el RAID                           │
├──────┼───────────┼──────────┼────────────┼──────────────────────────────────┤
│      │           │          │            │Mida de la partició més petita    │
│RAID5 │3          │opcional  │sí          │multiplicada pel nombre de        │
│      │           │          │            │dispositius en el RAID menys ú    │
├──────┼───────────┼──────────┼────────────┼──────────────────────────────────┤
│      │           │          │            │Mida de la partició més petita    │
│RAID6 │4          │opcional  │sí          │multiplicada pel nombre de        │
│      │           │          │            │dispositius en RAID menys dos     │
├──────┼───────────┼──────────┼────────────┼──────────────────────────────────┤
│      │           │          │            │El total de totes les particions  │
│RAID10│2          │opcional  │sí          │dividit pel nombre de còpies (per │
│      │           │          │            │omissió és dos)                   │
└──────┴───────────┴──────────┴────────────┴──────────────────────────────────┘

Si voleu conèixer més sobre el RAID de programari, doneu un cop d'ull al COM ES
FA del RAID de programari.

Per generar un dispositiu MD, necessiteu tenir les particions de què desitgeu
que consti marcades per a ser usades en un RAID. (Això és fa amb partman en el
menú Paràmetres de la partició on hauríeu de seleccionar Utilitza-ho com: → 
volum físic per a RAID).

Nota

Assegureu-vos que el sistema de fitxers es pot arrencar amb l'esquema de
partició que esteu planejant. En general, si voleu fer servir RAID per al
sistema de fitxers arrel (/), serà necessari generar un sistema de fitxers
separat per a /boot. La majoria de gestors d'arrencada (incloent «grub»)
suporten RAID1 en mirall (no en bandes!), per tant, una opció és usar RAID5 per
a / i RAID1 per a /boot.

A continuació, hauríeu d'escollir Configura el RAID de programari del menú
principal del partman. (El menú tan sols apareixerà després de marcar als menús
una partició per utilitzar-la com volum físic per al RAID.) A la primera
pantalla del partman-md seleccioneu Crea dispositius MD. Se us presentarà una
llista dels tipus de dispositius MD suportats, dels quals n'haureu d'escollir
un (p. ex. RAID1). El que segueixi dependrà del tipus de MD que seleccioneu.

  • El RAID0 és senzill -- se us proporcionarà una llista de les particions
    RAID disponibles i la vostra única tasca serà seleccionar la partició que
    formarà el MD.

  • El RAID1 és una mica més delicat. Primer, se us demanarà que introduïu el
    nombre de dispositius actius i el nombre de dispositius de recanvi que
    formaran el MD. A continuació, necessitareu seleccionar d'una llista de les
    particions RAID disponibles aquelles que seran actives i aquelles que
    serviran de recanvi. El compte de particions seleccionades ha de ser igual
    al nombre proporcionat prèviament. Però no us preocupeu. Si cometeu un
    error i seleccioneu un nombre diferent de particions, el debian-installer
    no us permetrà continuar fins que ho corregiu.

  • El RAID5 té un procediment de configuració similar al RAID1 amb l'excepció
    que necessitareu utilitzar almenys tres particions actives.

  • RAID6 també té un procediment de configuració similar a RAID1 amb
    l'excepció que necessitareu com a mínim quatre particions actives.

  • RAID10 també és semblant excepte si ho feu en mode expert. En mode expert,
    el debian-installer sol·licitarà quina ha de ser la disposició de les
    còpies. El format té dues parts. La primera és el tipus: n (per còpies
    properes o near), f (per còpies allunyades o far), o o (per còpies
    desplaçades o offset). La segona part és el nombre de còpies de les dades
    que voleu fer. Caldrà que hi hagi com a mínim tants dispositius actius com
    còpies, de manera que totes les còpies puguin distribuir-se en discs
    diferents.

És perfectament possible tenir diversos tipus de MD a la vegada. Per exemple,
si teniu tres discs durs de 200 GiB dedicats a MD, i cadascun conté dues
particions de 100 GiB, podeu combinar les primeres particions dels tres discs
en un RAID0 (partició ràpida de 300 GiB per a edició de vídeo) i utilitzar les
altres tres particions (2 actives i 1 de recanvi) per a un RAID1 (una partició
bastant fiable de 100 GiB pel /home).

Després que hàgiu configurat els dispositius MD al vostre gust, podeu
seleccionar Finalitza el partman-md per retornar al partman per generar els
sistemes de fitxers en els nous dispositius MD i assignar-lis els atributs
usuals com els punts de muntatge.

6.3.4.5. Configurar el Gestor de Volums Lògics (LVM)

Si esteu utilitzant l'ordinador com a administrador de sistemes o usuari «
avançat», segur que us heu trobat en la situació que alguna partició del disc
(normalment la més important) ha exhaurit tot l'espai lliure, mentre que
d'altres particions estan molt poc utilitzades i heu hagut de reconduir la
situació movent continguts, creant enllaços simbòlics, etc.

Per evitar la situació descrita anteriorment podeu utilitzar el Gestor de
Volums Lògics (LVM). Resumit d'una manera fàcil, amb LVM podeu combinar
particions (anomenades volums físics en l'entorn de LVM) per formar un disc
virtual (anomenat grup de volums), que es pot dividir en particions virtuals (
volums lògics). La característica interessant és que els volums lògics (i per
descomptat els grups de volums associats) es poden expandir a través de
múltiples discs físics.

En cas d'adonar-vos que necessiteu més espai per a l'antiga partició /home de
160 GiB, podeu afegir un nou disc de 300 GiB i ajuntar-lo al grup de volums i
seguidament redimensionar el volum lògic que disposa el sistema de fitxers /
home i per art de màgia -- els usuaris disposaran de més espai en la seva nova
partició de 460 GiB. Aquest exemple està un pèl massa simplificat. Llegiu el
document LVM HOWTO si encara no ho heu fet.

La configuració d'LVM al debian-installer és prou senzilla i està completament
suportada dins del partman. Primer, heu de marcar les particions que voleu
utilitzar com volums físics per LVM. Açò es fa al menú Paràmetres de la
partició on hauríeu de seleccionar Utilitza-ho com a: → volum físic per a LVM.

Avís

Aneu amb compte: la nova configuració LVM destruirà totes les dades en totes
les particions marcades amb un codi de tipus LVM. Així, si ja teniu un LVM en
algun dels discos, i voleu instal·lar Debian addicionalment a la màquina,
l'antiga (ja preexistent) LVM serà esborrada! El mateix passa amb les
particions, que estiguin (per motiu que sigui) marcades amb un codi de tipus
LVM, però continguin qualsevol cosa diferent (com ara un volum xifrat). Cal que
retireu aquests discos del sistema abans de realitzar una nova configuració
LVM!

Quan torneu a la pantalla principal de partman, voreu una opció nova Configura
el gestor de volums lògics. En seleccionar-la, primer se us demanarà que
confirmeu els canvis pendents a la taula de particions (si n'hi ha) i després
es mostrarà el menú de configuració d'LVM. A la part superior del menú es
mostra un resum de la configuració d'LVM. El menú en sí mateix és sensible al
context i tan sols mostra les accions vàlides. Les possibles accions són:

  • Mostra els detalls de la configuració: mostra l'estructura del dispositiu
    LVM, noms i mides dels volums lògics i més

  • Genera un grup de volums

  • Genera volums lògics

  • Suprimeix el grup de volums

  • Suprimeix el volum lògic

  • Estén grup de volums

  • Redueix el grup de volums

  • Finalitza: torna a la pantalla principal de partman

Utilitzeu les opcions d'aquest menú per generar primer un grup de volums i
després generar volums lògics dins d'aquest.

Després de tornar a la pantalla principal de partman, qualsevol volum lògic es
mostrarà de la mateixa forma que les particions normals (i les podreu tractar
com a tals).

6.3.4.6. Configuració de volums xifrats

El debian-installer permet preparar particions xifrades. Cada fitxer que
escriviu a estes particions és immediatament desat al dispositiu de forma
xifrada. L'accés a les dades xifrades és possible tan sols després d'introduir
la contrasenya utilitzada quan la partició xifrada es va generar originalment.
Aquesta característica és útil per protegir dades sensibles en el cas de que us
roben el vostre portàtil o disc dur. El lladre podrà tenir accés físic al disc
dur, però sense conèixer la contrasenya correcta, les dades al disc dur es
mostraran com caràcters aleatoris.

Les dues particions més importants a xifrar són: la partició d'usuari (home),
on són les vostres dades privades, i la partició d'intercanvi, on les dades
sensibles es podrien emmagatzemar temporalment durant l'operació. Per suposat,
res impedeix que xifreu qualsevol altra partició que tingueu interès. Per
exemple /var on els servidors de base de dades, servidors de correu o servidors
d'impressió emmagatzemen les seves dades, o /tmp que utilitzen alguns programes
per emmagatzemar fitxers temporals interessants. Algunes persones voldran
inclús xifrar tot el sistema complet. Sovint l'única excepció aquí és la
partició /boot que ha de ser no xifrada, ja que històricament no hi havia forma
de carregar un nucli des d'una partició xifrada. (El GRUB és ara capaç de
fer-ho, però el debian-installer actualment no ofereix suport nadiu per a un /
boot xifrat. Aquesta configuració es troba explicada en un document separat.)

Nota

Adoneu-vos que el rendiment de les particions xifrades serà menor que les no
xifrades per la necessitat de xifrar i desxifrar les dades per a cada lectura o
escriptura. L'impacte en el rendiment depèn de la velocitat de la vostra CPU,
el xifrat escollit i la longitud de la clau.

Per utilitzar el xifrat, heu de generar una partició nova seleccionant algun
espai lliure al menú principal de fer particions. Altra opció és escollir una
partició existent (p. ex. una partició normal, un volum lògic LVM o un volum
RAID). Al menú Paràmetres de fer particions, necessitareu seleccionar volum
físic per a xifrar a l'opció Utilitzar com. Aleshores el menú canviarà per
incloure algunes opcions de criptografia per a la partició.

El mètode de xifrat suportat pel debian-installer és dm-crypt (inclòs als nous
nuclis Linux, capaços de contenir volums físics LVM).

Primer, mireu les opcions disponibles quan seleccioneu xifrar mitjançant
Device-mapper (dm-crypt). Com sempre, quan dubteu, utilitzeu l'opció
predeterminada, ja que es van escollir amb molta cura amb la seguretat en ment.

Xifrat: aes

    Aquesta opció permet seleccionar l'algorisme de xifrat (cipher) que serà
    utilitzat per xifrar les dades a la partició. En aquest moment el
    debian-installer suporta els xifrats: aes, blowfish, serpent i twofish.
    Està més enllà de l'abast d'aquest document discutir les qualitats dels
    diferents algorismes, per altra banda, podria ajudar en la vostra decisió
    saber que al 2000, AES fou escollit pel Institut Nacional Americà
    d'estàndards i Tecnologia com l'algorisme de xifrat estàndard per protegir
    informació sensible al segle XXI.

Mida de la Clau: 256

    Ací podeu especificar la longitud de la clau de xifrat. Amb una mida de la
    clau gran, la força del xifrat augmenta generalment. Per altra banda,
    incrementar la mida de la clau normalment té un impacte negatiu pel que fa
    al rendiment. Les mides per la clau disponibles varien depenent del xifrat.

Algorisme IV: xts-plain64

    El Vector d'Inicialització o algorisme IV s'utilitza al xifratge per
    assegurar que l'aplicació del xifrat al mateix text en clar amb la mateixa
    clau sempre produeix un únic text xifrat. La idea és previndre l'atac de
    deduir informació de plantilles repetides a les dades xifrades.

    De les alternatives proporcionades, la predeterminada xts-plain64 és en
    aquest moment la menys vulnerable a atacs coneguts. Utilitzeu altres
    alternatives tan sols quan necessiteu assegurar la compatibilitat amb un
    sistema prèviament instal·lat que no pot utilitzar algorismes nous.

Clau de xifrat: Contrasenya

    Ací podeu escollir el tipus de clau de xifrat per a aquesta partició.

    Contrasenya

        La clau de xifrat serà computada^[11] en base a la contrasenya que us
        permetrà entrar després en el procés.

    Clau aleatòria

        Es generarà una nova clau de xifrat des de dades aleatòries cada vegada
        que proveu d'accedir a la partició xifrada. En altres paraules: cada
        vegada que tanqueu, el contingut de la partició es perdrà ja que la
        clau s'esborra de la memòria. (Per suposat, podeu intentar de
        aconseguir la clau amb un atac de força bruta, però a no ser que
        l'algorisme de xifrat tinga una debilitat, no és pot aconseguir en tota
        la nostra vida completa.)

        Les claus aleatòries són útils per a particions d'intercanvi ja que no
        necessiteu molestar-vos en recordar la contrasenya o esborrar
        informació sensible de la partició d'intercanvi abans d'apagar el
        vostre ordinador. Per altra banda, això significa també que no podreu
        utilitzar la funcionalitat «suspendre a disc» que donen els nous nuclis
        ja que serà impossible (a les arrencades següents) recuperar les dades
        suspeses escrites a la partició d'intercanvi.

Esborrar dades: sí

    Determina si el contingut d'aquesta partició ha de ser sobreescrit amb
    dades aleatòries abans de configurar el xifrat. Açò es recomana ja que
    d'altra manera seria possible per a un atacant diferenciar quines parts de
    la partició estan en ús i quines no. Addicionalment, açò farà més difícil
    recuperar qualsevol residu de dades d'instal·lacions prèvies^[12].

Després de seleccionar els paràmetres desitjats per les vostres particions
xifrades, tornau al menú principal de fer particions. Allí hauríeu de trobar
ara un nou element del menú que es diu Configurar volums xifrats. Després de
seleccionar-lo, se us preguntarà confirmació per esborrar les dades de les
particions marcades per esborrar i possiblement altres accions com escriure una
nova taula de particions. Per a grans particions, açò podria tardar un temps.

A continuació se us demanarà d'introduir una contrasenya per a particions
configurades per utilitzar-la. Bones contrasenyes haurien de tenir més de 8
caràcters, mescla de lletres, nombres i altes caràcters i no hauria de contenir
paraules comuns al diccionari o informació fàcilment associada amb tu (com
aniversaris, aficions, noms de mascotes, noms de familiars o parents, etc.).

Avís

Abans d'introduir cap contrasenya, hauríeu d'assegurar-vos que el vostre teclat
està correctament configurat i que genera els caràcters esperats. Si no esteu
segurs, canvieu a una segona consola virtual i escriviu alguna cosa a
l'indicador del sistema. Açò assegurarà que després no tindreu sorpreses, p.
ex. escollint introduir una contrasenya utilitzant una disposició de teclat
«qwerty» quan heu utilitzat una disposició «azerty» a la instal·lació. Aquesta
situació pot tenir diverses causes. Pot ser vau canviar a un altra disposició
de teclat al llarg de la instal·lació, o la disposició de teclat seleccionada
no s'hauria configurat quan esteu introduint la contrasenya pel sistema de
fitxers arrel.

Si trieu utilitzar altres mètodes apart d'una contrasenya per generar claus de
xifrat, es generarà ara. Com que el nucli no ha recollit suficient entropia en
aquest punt de la instal·lació, el procés pot ser molt llarg. Podeu accelerar
el procés generant entropia: p. ex. prement tecles aleatòriament, o canviat a
una segona consola virtual i generant algun tràfic de xarxa i tràfic de disc
(descarregant fitxers, alimentant amb grans fitxers a /dev/null, etc.). Açò es
repetirà per a cada partició per xifrar-se.

Després de tornar al menú principal de fer particions, voreu tots els volums
xifrats com particions addicionals que es poden configurar de la mateixa forma
que les particions normals. L'exemple següent mostra un volum xifrat amb
«dm-crypt».

Encrypted volume (sda2_crypt) - 115.1 GB Linux device-mapper
     #1 115.1 GB  F ext3

Ara és el moment d'assignar punts de muntatge als volums i opcionalment canviar
els tipus de sistema de fitxers si el tipus predeterminat no us convé.

Fixeu-vos en els identificadors entre parèntesis (sda2_crypt en aquest cas) i
els punts de muntatge que heu assignat a cada volum xifrat. Necessitareu
aquesta informació després quan arrenqueu el nou sistema. Les diferències entre
el procés d'arrencada normal i el d'arrencada amb xifrat es descriuen més
endavant a la Secció 7.2, «Muntar volums xifrats».

Quant estigueu satisfets amb l'esquema de particions, continueu amb la
instal·lació.

6.3.5. Instal·lació del sistema base

Encara que aquesta fase és la menys problemàtica consumeix una part important
del temps de la instal·lació, ja que es baixa, verifica i desempaqueta el
sistema base complet. Si teniu un ordinador o una connexió de xarxa lents pot
portar el seu temps.

Al llarg de la instal·lació del sistema base, els missatges del desempaquetat
dels paquets i de la instal·lació es redirigeixen a tty4. Podeu accedir a
aquesta terminal prement Alt esquerra+F4; torneu al procés principal de
l'instal·lador amb Alt esquerra+F1.

Els missatges de desempaquetat i configuració que genera la instal·lació del
sistema base es desen a /var/log/syslog. Podeu comprovar-los allà, si la
instal·lació es realitza a través d'una consola sèrie.

Com a part de la instal·lació, s'instal·larà un nucli del Linux. A la prioritat
predeterminada, l'instal·lador elegirà aquell que es correspongui millor amb el
maquinari. En modes de prioritat més baixa, podreu elegir a partir d'una llista
dels nuclis disponibles.

Quan el sistema de gestió de paquets instal·le el programari, inclourà per
defecte també els paquets recomanats per aquest. Els paquets recomanats no són
estrictament necessaris per al funcionament essencial del programari escollit,
però el milloren i normalment haurien, en l'opinió dels mantenidors dels seus
paquets, de ser instal·lats amb aquests.

Nota

Per motius tècnics, la instal·lació dels paquets del sistema base no inclou la
de llurs paquets «Recomanats». Les indicacions de dalt només s'aplicaran a
partir d'aquest punt del procés d'instal·lació.

6.3.6. Instal·lació de programari addicionals

En aquest punt disposareu d'un sistema usable però limitat. La majoria
d'usuaris prefereixen instal·lar programari addicional al sistema per tal
d'adaptar-lo a les seves necessitats, i és possible fer-ho amb l'instal·lador.
Aquest pas pot portar encara més temps que la instal·lació del sistema base si
teniu una màquina o connexió de xarxa lenta.

6.3.6.1. Configuració de l'apt

Una de les eines més utilitzades per a instal·lar paquets en sistemes Debian
GNU/Linux és un programa anomenat apt, que forma part del paquet apt^[13].
Altres entorns per a la gestió de paquets, com l'aptitude i el synaptic també
s'utilitzen. Aquests entorns són més recomanables per a usuaris novells, ja que
integren algunes característiques addicionals (cerca de paquets i comprovacions
del seu estat) amb una interfície d'usuari més agradable.

L'apt s'ha de configurar per saber d'on obtenir els paquets. El resultat
d'aquesta configuració s'escriu al fitxer /etc/apt/sources.list. Podeu
examinar-lo i editar-lo al vostre gust després de completar la instal·lació.

Si esteu instal·lant amb la prioritat predeterminada, l'instal·lador
s'encarregarà de bona part de la configuració automàticament, depenent del
mètode d'instal·lació i possiblement aprofitant les opcions indicades
anteriorment durant la instal·lació. En la majoria de casos l'instal·lador
afegirà una rèplica de seguretat i, si esteu instal·lant una distribució
estable, una rèplica del servei d'actualitzacions («stable-updates»).

Si instal·leu amb una prioritat més baixa (p. ex. en mode expert), podreu
prendre més decisions. Podreu triar si voleu utilitzar els serveis
d'actualitzacions de seguretat i/o serveix d'actualitzacions estables
(«stable-updates»), o si voleu afegir paquets de les seccions «contrib» i «
non-free» de l'arxiu.

6.3.6.1.1. Instal·lar des de més d'una imatge de CD o DVD

Si esteu instal·lant des d'una imatge de CD o DVD que és part d'un joc més
gran, l'instal·lador us preguntarà si voleu afegir nous mitjans d'instal·lació.
Si teniu aquests mitjans addicionals a mà, possiblement voldreu fer-ho per tal
que l'instal·lador pugui utilitzar-ne els paquets continguts.

Si no teniu cap mitjà addicional, això no és un problema: no es requereix la
seua utilització. Si tampoc utilitzeu una rèplica de xarxa (com s'explica en la
pròxima secció), això pot implicar que no tots els paquets que pertanyen a les
tasques que seleccioneu al pròxim pas de la instal·lació podran instal·lar-se.

Nota

Els paquets estan inclosos a les imatges de CD i DVD ordenats per la seua
popularitat. Açò vol dir que per a la major part d'usos tan sols es necessita
la primera imatge del conjunt i que molt poca gent utilitza qualsevol dels
paquets inclosos en les darreres imatges del joc.

Això també vol dir que comprar o descarregar i cremar un joc complet de CD és
malbaratar els diners ja que mai els utilitzareu. En la major part dels casos
la millor opció és descarregar només dels primers 3 a 8 CD i instal·lar la
resta dels paquets que necessiteu d'Internet utilitzant una rèplica. El mateix
és valid pels DVD: el primer DVD o potser els dos primers DVD cobreixen la
majoria de les necessitats.

Si afegiu múltiples mitjans d'instal·lació, l'instal·lador us demanarà
intercanviar-los quan necessite paquets d'un diferent al que estigui actualment
a la unitat de disc. Tingueu en compte que tan sols es poden utilitzar discos
que corresponguin al mateix joc. L'ordre en què es processen no té importància,
però fer-ho en ordre ascendent reduirà les possibilitats d'error.

6.3.6.1.2. Utilitzar una rèplica de xarxa

Una pregunta que es farà en la majoria de les instal·lacions és si s'ha
d'utilitzar o no una rèplica de xarxa com a origen dels paquets. La resposta
predeterminada normalment serà correcta, però hi ha certes excepcions.

Si no esteu instal·lant des d'una imatge de CD/DVD completa, hauríeu de fer
servir una rèplica de xarxa; altrament acabareu amb un sistema molt mínim.
Tanmateix, si teniu una connexió a Internet limitada, és millor que no
seleccioneu la tasca escriptori en el següent pas de la instal·lació.

Si instal·leu des d'una sola imatge completa de CD no és necessari utilitzar
una rèplica de xarxa, però és molt recomanable ja que un sola imatge de CD
només conté un nombre molt limitat de paquets. Si teniu una connexió d'Internet
limitada, potser la millor opció és encara no triar una rèplica de xarxa ací, i
acabar la instal·lació tan sols amb el que disposeu a la imatge de CD i
instal·lar de forma selectiva els paquets addicionals després de la
instal·lació (és a dir, després d'haver reiniciat el nou sistema).

Si esteu instal·lant des d'un DVD, qualsevol paquet necessari per a la
instal·lació hauria de trobar-se al primer DVD. L'ús d'una rèplica de xarxa és
opcional.

Un dels avantatges d'afegir una rèplica de xarxa és que les actualitzacions que
s'hagen produït des de que es van generar les imatges de CD/DVD i que s'han
inclòs en un nou llançament, també estaran disponibles per a la instal·lació;
açò allarga la vida del vostre joc de CD/DVD sense comprometre la seguretat o
la estabilitat del sistema instal·lat.

Resumint: seleccionar una rèplica de xarxa és normalment una molt bona idea,
excepte si no teniu una bona connexió a Internet. Si la versió actual d'un
paquet es troba als mitjans d'instal·lació, l'instal·lador sempre la
utilitzarà. La quantitat de dades que es descarregarà si seleccioneu una
rèplica depèn de

 1. les tasques que seleccioneu en el pròxim pas de la instal·lació,

 2. quins paquets fan falta per a eixes tasques,

 3. quins d'eixos paquets estan presents als mitjans d'instal·lació que heu
    afegit, i

 4. si qualsevol versió dels paquets inclosos als mitjans d'instal·lació estan
    a la rèplica (tant en una rèplica de paquets normals, en una rèplica de
    seguretat o a les actualitzacions estables («stable-updates»).

Tingueu en compte que l'últim punt vol dir que, encara que no trieu fer servir
una rèplica de xarxa, alguns paquets encara es descarregaran des d'Internet si
hi ha actualitzacions de seguretat o estables («stable-updates») disponibles i
aquests serveis s'han configurat.

6.3.6.1.3. Seleccionar una rèplica de xarxa

Tret que hàgiu optat per no fer servir una rèplica de xarxa, se vos presentarà
una llista de rèpliques de xarxa basada en la selecció de país feta durant la
instal·lació. Seleccionar l'opció predeterminada sol ésser una bona opció.

El valor per defecte és deb.debian.org, que no és un mirall en si, sinó que
redirigirà cal a un mirall que hauria d'estar actualitzat i ser ràpid. Aquests
miralls suporten TLS (protocol https) i IPv6. Aquest servei és mantingut per
l'equip d'Administradors de Sistema de Debian (en anglès «Debian System
Administration» o DSA).

La rèplica també es pot especificar manualment seleccionant «escriure la
informació manualment». Heu d'especificar el nom del servidor de la rèplica i
un número de port opcional. Això cal que sigui una URL base, és a dir, quan
s'especifica una adreça IPv6 cal posar-la a l'interior de claudàtors, per
exemple «[2001:db8::1]».

Si el vostre ordinador forma part d'una xarxa que només fa servir IPv6 (que no
és el més probable per a la majoria d'usuaris), fer servir el servidor
predeterminat per al vostre país no funcionarà correctament. Totes les
rèpliques de la llista són accessibles amb IPv4, però només algunes ho son
mitjançant IPv6. Com que la connectivitat de cada rèplica canvia amb el temps,
aquesta informació no està disponible per a l'instal·lador. En el cas que no
sigui possible connectar mitjançant IPv6 amb la rèplica del vostre país, podeu
seleccionar altres rèpliques o bé seleccionar l'opció «escriure la informació
manualment». Podeu especificar «ftp.ipv6.debian.org» com a nom de la rèplica,
que és àlies per una rèplica accessible mitjançant IPv6, tot i què probablement
no és la més ràpida.

6.3.6.2. Selecció i instal·lació de programari

Al llarg del procés d'instal·lació, tindreu l'oportunitat de seleccionar
programari addicional per a instal·lar. En comptes d'escollir paquets de
programari individualment d'entre els 87573 que hi ha disponibles, aquesta fase
del procés d'instal·lació es centra en seleccionar i instal·lar col·leccions
predefinides de programes per configurar de forma ràpida el vostre ordinador
per fer tasques diverses.

Aquestes tasques representen de forma aproximada un nombre de feines o coses
diferents que podeu voler fer amb el vostre ordinador, com «Entorn d'escriptori
», «Servidor Web» o «Servidor SSH»^[14]. La Secció D.2, «Espai requerit per a
les tasques» llista els requeriments d'espai de les tasques disponibles.

Algunes tasques poden estar preseleccionades basant-se en les característiques
de l'ordinador on esteu instal·lant. Si no esteu d'acord amb aquestes
seleccions, podeu desseleccionar les tasques. Fins i tot podeu optar per no
instal·lar cap tasca en aquest punt.

Suggeriment

En la interfície d'usuari estàndard de l'instal·lador, podeu emprar la barra
espaiadora per a canviar l'estat de selecció d'una tasca.

Nota

L'opció «Entorn d'escriptori» instal·larà un entorn d'escriptori gràfic.

L'opció predeterminada per a debian-installer instal·la l'escriptori Gnome . És
possible seleccionar una altra opció d'escriptori en el procés d'instal·lació.
També podeu instal·lar més d'un entorn d'escriptori, però algunes opcions no es
poden instal·lar simultàniament.

D'altra banda, tan sols funcionarà si els paquets que calen per a l'entorn
d'escriptori desitjat estan disponibles. Si esteu fent la instal·lació
utilitzant una imatge completa del CD, aleshores necessitareu descarregar-los
des d'una rèplica, ja que poden no estan inclosos a la imatge de CD degut a la
seva quantitat limitada d'espai. Instal·lar així qualsevol dels entorns
d'escriptori disponibles hauria d'anar bé si esteu usant una imatge de DVD o
qualsevol altre mètode d'instal·lació.

Les diferents tasques de servidor instal·laran el programari més o menys
d'aquesta manera. Servidor web: apache2; Servidor SSH: openssh.

La tasca «Sistema estàndard» instal·larà tots els paquets que tinguen una
prioritat «estàndard». Açò inclou moltes utilitats comunes que es solen trobar
a qualsevol sistema Linux o Unix. Hauríeu de mantenir seleccionada aquesta
tasca excepte si sabeu el que feu i voleu un sistema realment mínim.

Si durant la selecció d'idioma heu escollit una configuració d'usos locals
(«locale») predeterminat diferent de «C», tasksel comprovarà si hi ha tasques
de localització definides per a aquests usos locals i provarà d'instal·lar
automàticament els paquets de localització rellevants. Açò inclou, per exemple,
els paquets que continguen llistes de paraules o tipus de lletra especials per
al vostre idioma. Si heu seleccionat un entorn d'escriptori, també
n'instal·larà els paquets de localització apropiats (si n'hi ha).

Una vegada seleccionades les tasques desitjades, premeu el botó Continua. En
aquest punt, l'apt instal·larà els paquets necessaris per a les tasques
seleccionades. Si algun programa en particular necessita més informació per
part de l'usuari, aquesta es sol·licitarà durant el procés d'instal·lació.

Heu de ser conscients que, especialment, la tasca d'escriptori és molt gran.
Sobretot si esteu instal·lant des d'un CD-ROM normal en combinació amb una
rèplica pels paquets que no estan al CD-ROM, l'instal·lador podria descarregar
molts paquets des de la xarxa. Si teniu una connexió a Internet relativament
lenta, pot trigar molt de temps. No es podrà cancel·lar la instal·lació de
paquets una vegada s'hagi començat.

Inclús quan els paquets estan inclosos al CD-ROM, l'instal·lador pot ser que
encara els descarregue de la rèplica si la versió que hi ha disponible és més
recent que la inclosa al CD-ROM. Si esteu instal·lant la distribució «stable»,
açò pot passar després del llançament d'una revisió (una actualització de la
distribució estable); si esteu instal·lant la distribució «testing» açò passarà
si esteu utilitzant una imatge vella.

6.3.7. Com fer el sistema arrencable

Si esteu instal·lant una estació de treball sense disc, arrencar des del disc
local és, evidentment, una opció sense sentit i s'ometrà aquest pas.

6.3.7.1. Detecció d'altres sistemes operatius

Previ a la instal·lació del carregador d'arrencada l'instal·lador intentarà
detectar d'altres sistemes operatius instal·lats a la màquina. Si detecta un
sistema operatiu suportat se us informarà en el pas d'instal·lació del
carregador d'arrencada i l'ordinador es configurarà per arrencar-lo
addicionalment a Debian.

Recordeu que l'arrencada de múltiples sistemes operatius en una sola màquina
continua sent una qüestió de màgia negra. El suport automàtic de detecció i
configuració dels carregadors d'arrencada per arrencar d'altres sistemes
operatius varia en funció de l'arquitectura i inclús subarquitectura. Si no us
funciona hauríeu de cercar més informació a la documentació del gestor
d'arrencada.

6.3.7.2. Instal·lació del carregador d'arrencada grub al dispositiu

El carregador d'arrencada de amd64 s'anomena «grub». El «grub» és un carregador
d'arrencada robust i flexible i una bona opció tant per als usuaris nouvinguts
com per als experimentats.

El «grub» s'instal·larà per defecte a la partició UEFI o al registre
d'arrencada del disc principal, on agafarà el control del procés d'arrencada.
Si ho preferiu, el podeu instal·lar a un altre lloc. Per a més informació vegeu
el manual del «grub».

Si no voleu instal·lar el «grub», utilitzeu el botó Vés enrere per tornar al
menú principal i des d'allà seleccioneu el carregador d'arrencada que voleu
utilitzar.

6.3.7.3. Continuar sense el carregador d'arrencada

Aquesta opció es pot utilitzar per finalitzar la instal·lació tot i no
instal·lar un carregador d'arrencada, ja sigui perquè l'arquitectura/
subarquitectura no en proporciona cap, o perquè no us és necessari (p. ex.
utilitzareu el carregador d'arrencada existent).

Si preteneu configurar manualment el carregador d'arrencada, hauríeu de
comprovar el nom del nucli instal·lat a /target/boot. També hauríeu de
comprovar si hi ha el fitxer initrd i, si és el cas, probablement indicar-li al
carregador d'arrencada. Informació addicional que us farà falta correspon al
disc i partició que heu seleccionat anteriorment pel sistema de fitxers / i, en
el cas d'escollir instal·lar el /boot en una partició separada, el sistema de
fitxers /boot.

6.3.8. Finalització de la instal·lació

Aquest és l'últim punt en el procés d'instal·lació durant el qual
l'instal·lador farà tasques d'última hora. Principalment, netejar el que ha
deixat el debian-installer.

6.3.8.1. Configuració del rellotge del sistema

L'instal·lador pot preguntar-vos si el rellotge està en UTC. Normalment aquesta
pregunta s'evita si és possible i l'instal·lador intenta resoldre si el
rellotge està en UTC basant-se en paràmetres com altres sistemes operatius
instal·lats.

En mode expert sempre podreu escollir si el rellotge està en UTC o no. Els
sistemes que (també) tenen Dos o Windows normalment estan configurats a hora
local. Si voleu arrencada dual, seleccioneu hora local en comptes d'UTC.

En aquest punt el debian-installer també intentarà fixar l'hora actual al
rellotge de l'ordinador. Això es farà utilitzant UTC o l'hora local, depenent
de l'opció seleccionada.

6.3.8.2. Arrencada del sistema

Se us indicarà que extragueu el mitjà d'instal·lació (CD, llapis USB, etc.) que
heu fet servir per arrencar l'instal·lador. Després d'això el sistema arrencarà
el nou sistema Debian.

6.3.9. Resolució de problemes

Els components llistats en aquesta secció no estan normalment involucrats en el
procès d'instal·lació, però esperen en segon pla per ajudar a l'usuari si es
produeix algun error.

6.3.9.1. Desar els registres de la instal·lació

Si la instal·lació resulta reeixida, els fitxers de registre creats durant el
procés d'instal·lació es desaran automàticament a /var/log/installer/ en el nou
sistema Debian.

Si elegiu Desa els registres de depuració des del menú principal, podreu desar
els fitxers de registre en un llapis USB, xarxa, disc dur o altres medis. Això
pot ser útil si trobeu problemes fatals durant la instal·lació i desitgeu
estudiar els registres en un altre sistema, o adjuntar-los a un informe
d'instal·lació.

6.3.9.2. Utilització de l'intèrpret d'ordres i visualització dels fitxers de
registre

Hi ha diversos mètodes que podeu utilitzar per obtenir un intèrpret d'ordres
mentre executeu l'instal·lador. En la majoria de sistemes, i si no esteu
instal·lant sobre consola sèrie, el més fàcil és canviar a la segona consola
virtual prement Alt Esquerra+F2^[15] (en un teclat Mac, Option+F2). Utilitzeu 
Alt Esquerra+F1 per tornar a l'instal·lador.

Per a l'instal·lador gràfic vegeu també Secció 6.1.1, «Utilitzar l'instal·lador
gràfic».

Si no podeu canviar de consola, també teniu l'opció Executa un intèrpret
d'ordres al menú principal, que serveix precisament per a iniciar un intèrpret
d'ordres. Podeu tornar al menú principal des de la major part dels quadres de
diàleg emprant el botó Vés enrere una o més vegades. Introduïu exit per tancar
l'intèrpret i tornar a l'instal·lador.

En aquest moment heu arrencat des del disc RAM, per tant el conjunt d'utilitats
Linux que teniu disponibles és limitat. Podeu veure els programes a que hi ha
amb l'ordre ls /bin /sbin /usr/bin /usr/sbin o bé teclejant help. L'intèrpret
d'ordres és un clon de Bourne shell anomenat ash i disposa d'algunes
característiques molt pràctiques, com l'autocompleció i l'historial.

Per editar i veure fitxers, utilitzeu l'editor de text nano. Podeu trobar els
fitxers de registre del sistema d'instal·lació al directori /var/log.

Nota

Encara que des d'un intèrpret podeu fer pràcticament qualsevol cosa que les
ordres us permetin, aquesta opció està disponible només per si alguna cosa surt
malament o per a depuració.

Fer coses manualment des de l'intèrpret pot interferir en el procés
d'instal·lació, i això pot produir errors o acabar en una instal·lació
incompleta. En particular, hauríeu de deixar sempre que sigui l'instal·lador
qui activi la partició d'intercanvi i no fer-ho vosaltres manualment.

6.3.10. Instal·lació a través de la consola de xarxa

Un dels components més interessants és network-console. Permet realitzar una
bona part de la instal·lació per xarxa, via SSH. L'ús de la xarxa implica que
haureu de seguir els primers passos de la instal·lació des de la consola,
almenys fins a tenir configurada la xarxa (tot i que podeu automatitzar també
aquesta part, Secció 4.6, «Instal·lació automàtica»).

Aquest component no es carrega al menú principal de la instal·lació
predeterminada; s'ha de fer explícitament. Si esteu instal·lant des d'un mitjà
òptic, haureu d'arrencar amb prioritat mitjana o bé triar Carrega components de
l'instal·lador des d'un mitjà òptic al menú principal d'instal·lació, i
seleccionar network-console: Continua la instal·lació remotament utilitzant SSH
a la llista de components addicionals. Si la càrrega acaba correctament
s'indicarà amb una nova entrada al menú amb el títol Continua la instal·lació
remotament utilitzant SSH.

Després de seleccionar aquesta nova entrada, haureu d'introduir una contrasenya
nova, que s'utilitzarà per connectar al sistema d'instal·lació i per a la seva
confirmació. Això és tot. A continuació veureu una pantalla d'entrada que us
instruirà a entrar remotament com a usuari installer i la contrasenya que
acabeu de proporcionar. Un altre detall important que s'ha de tenir en compte
en aquest punt és l'empremta digital del sistema. Caldrà transferir-la de
manera segura a la persona encarregada de continuar amb la instal·lació remota.

Si decidiu continuar la instal·lació localment, sempre podeu prémer Intro, que
us tornarà al menú principal, on novament podreu seleccionar un altre
component.

Tornem ara a l'altra banda del cable. En primer lloc, és necessari que
configureu el vostre terminal per a UTF-8, ja que aquesta és la codificació que
utilitza el sistema d'instal·lació. Si no ho feu, la instal·lació remota encara
serà possible, però segurament certs diàlegs o caràcters no es visualitzaran
correctament. Establir una connexió amb el sistema d'instal·lació és tan fàcil
com teclejar:

$ ssh -l installer ordinador_a_instal·lar

On ordinador_a_instal·lar és el nom o l'adreça IP de l'ordinador que s'està
instal·lant. Abans de fer l'entrada de debò, es mostrarà l'empremta digital del
sistema remot, i haureu de confirmar que és correcta.

Nota

El servidor ssh de l'instal·lador no envia paquets «keep-alive» ("mantén-te
viu" en anglès) en la seva configuració predeterminada. En principi una
connexió al sistema que s'està instal·lant hauria de mantenir-se oberta
indefinidament. Tanmateix, en certes situacions -- depenent de la configuració
de la xarxa local -- és possible que es perdi la connexió després d'un cert
període d'inactivitat. Un cas típic en què això pot passar és quan hi ha algun
tipus de NAT («Network Address Translation», traducció de l'adreça de xarxa)
entre el client i el sistema que s'està instal·lant. Depenent del punt de la
instal·lació en què es perdi la connexió, podreu continuar o no després de
tornar a connectar.

Podeu evitar aquest tipus de desconnexions afegint l'opció
-o ServerAliveInterval=valor quan comenceu la connexió ssh, o afegint la
mateixa opció al fitxer de configuració de l'ssh. Fixeu-vos, però, que en
alguns casos afegir aquesta opció també pot causar la pèrdua de la connexió
(per exemple, si els paquets «keep-alive» ("mantén-te viu" en anglès) s'envien
durant un breu tall de la xarxa, del qual ssh s'hauria recuperat altrament),
així que només s'hauria d'utilitzar quan sigui necessari.

Nota

Si instal·leu molts ordinadors alhora i, casualment tenen la mateixa adreça IP
o el mateix nom, ssh rebutjarà la connexió. El problema és que hi haurà
empremtes digitals diferents per a un mateix identificador, fet que normalment
s'interpreta com un atac. Si esteu segurs que no és el cas, esborreu la línia
corresponent del fitxer ~/.ssh/known_hosts^[16] i torneu a intentar-ho.

Després d'entrar, veureu la pantalla inicial, des d'on teniu dues possibilitats
anomenades Inicia el menú i Inicia un intèrpret d'ordres. La primera us durà al
menú principal de l'instal·lador, on podreu continuar la instal·lació
normalment. L'altra, iniciarà un intèrpret d'ordres des del que podreu
examinar, i potser arreglar, el sistema remot. Només hauríeu de començar una
sessió SSH per al menú d'instal·lació, però podeu iniciar més intèrprets
d'ordres.

Avís

Després d'iniciar la instal·lació remotament sobre SSH, no hauríeu de tornar a
la sessió que hi ha a la consola local. Podria corrompre's la base de dades que
manté la configuració del nou sistema. Això pot provocar alhora problemes al
sistema instal·lat, o fins i tot que la instal·lació no finalitzi correctament.

6.4. Carregar microprogramari no inclòs a l'instal·lador

Tal i com es descriu a Secció 2.2, «Dispositius que requereixen
microprogramari», alguns dispositius necessiten carregar un determinat
microprogramari. En la majoria de casos el dispositiu no funcionarà si el
microprogramari no està disponible; en altres, la funcionalitat bàsica no es
veurà afectada i només serà necessari carregar el microprogramari per activar
funcions addicionals.

Si un controlador de dispositiu sol·licita un microprogramari que no està
disponible, el debian-installer mostrarà un diàleg que us oferirà la
possibilitat de carregar-lo. Si seleccioneu aquesta opció, l'instal·lador
analitzarà els dispositius disponibles buscant possibles fitxers o paquets de
microprogramari. Si es troba el microprogramari, aquest es copiarà a la
ubicació pertinent (/lib/firmware) i es tornarà a carregar el controlador de
dispositiu corresponent.

Nota

Es podran analitzar uns dispositius i sistemes de fitxers o uns altres depenent
de l'arquitectura, el mètode d'instal·lació i la fase en què us trobeu. És més
fàcil carregar microprogramari des d'un llapis USB formatat amb FAT,
especialment durant les etapes inicials de la instal·lació. En i386 i amd64 el
microprogramari també es pot carregar des de targetes MMC o SD.

Tingueu en compte que és possible ometre aquest pas si sabeu que el dispositiu
pot funcionar sense el microprogramari, o si el dispositiu no és necessari
durant la instal·lació.

debian-installer només demana pel microprogramari («firmware») necessari pels
mòduls del nucli carregats en el procès d'instal·lació. No estan inclosos tots
els dispositius en el debian-installer, en particular les targetes i
processadors gràfics («radeon»), la qual cosa implica que les capacitats
d'alguns dispositius no siguin les mateixes al final i al principi de la
instal·lació. Com a conseqüència, pot ésser que algun dispositiu no es faci
servir al cent per cent de les seves possibilitats. Si pensau que això és el
cas, o només per curiositat, no és una mala idea comprovar la sortida de
l'ordre dmesg en un sistema arrencat per primera vegada i cercar la paraula
«firmware».

6.4.1. Preparar un dispositiu

Les imatges d'instal·lació oficials no inclouen microprogramari que no sigui
lliure. El mètode més freqüent per a carregar el microprogramari és des de
mitjans extraïbles com una memòria USB. Com a alternativa, hi ha preparades
imatges d'instal·lació no oficials que contenen microprogramari privatiu a
https://cdimage.debian.org/cdimage/unofficial/non-free/cd-including-firmware/.
Per a preparar una memòria USB (o un altre tipus de mitjà com una partició a un
disc dur), els fitxers de microprogramari s'han d'ubicar o bé al directori
arrel o bé en un directori anomenat /firmware dins el sistema de fitxers del
dispositiu. El sistema de fitxers recomanat és FAT, ja que és més probable que
funcioni durant les etapes inicials de la instal·lació.

Podeu trobar arxius tar i fitxers zip amb els paquets actuals per als
microprogramaris més habituals a la URL següent:

  • https://cdimage.debian.org/cdimage/unofficial/non-free/firmware/

Simplement descarregueu l'arxiu tar o el fitxer zip per a la versió
corresponent i descomprimiu-lo al sistema de fitxers del dispositiu desitjat.

Si el microprogramari que us cal no està inclòs a l'arxiu tar, també podeu
descarregar-vos paquets específics de l'arxiu (secció privativa, «non-free»).
La llista que hi ha a continuació mostra la major part dels paquets de
microprogramari, però no es garanteix que el seu funcionament sigui complet i a
més pot contenir paquets que no siguin exclusivament de microprogramari:

  • https://packages.debian.org/search?keywords=firmware

També és possible copiar els fitxers de microprogramari per separat directament
al dispositiu. Aquests fitxers els podeu obtenir, per exemple, d'altres
sistemes ja instal·lats o del fabricant del maquinari.

6.4.2. Microprogramari i el sistema ja instal·lat

Qualsevol microprogramari carregat durant el procés d'instal·lació serà copiat
automàticament al sistema instal·lat. En la majoria de casos això assegurarà
que aquells dispositius que requereixen el microprogramari també funcionin
després de tornar a arrencar utilitzant el sistema que acabeu d'instal·lar.
Tanmateix, si el sistema instal·lat utilitza una versió del nucli diferent a la
de l'instal·lador, hi ha la possibilitat que el microprogramari no es pugui
carregar per problemes de versions.

Si el microprogramari havia estat carregat utilitzant un paquet, el
debian-installer també instal·larà aquest paquet al sistema i afegirà
automàticament la secció «non-free» de l'arxiu de paquets al fitxer
sources.list de l'APT. Això té l'avantatge que el microprogramari
s'actualitzarà automàticament si hi ha disponible una nova versió.

Si ometeu la càrrega de microprogramari durant la instal·lació, el dispositiu
afectat segurament no funcionarà fins que instal·leu manualment el
microprogramari (o el seu paquet).

Nota

Si la càrrega del microprogramari es va dur a terme utilitzant fitxers, el
microprogramari copiat no s'actualitzarà automàticament a menys que instal·leu
el paquet de microprogramari corresponent (si està disponible) després de
completar la instal·lació.

6.4.3. Completar el sistema ja instal·lat

Depenent de com es va dur a terme la instal·lació, podria ser que la necessitat
d'algun microprogramari no es detectés durant la instal·lació, que el
microprogramari pertinent no estés disponible, o que es decidís no instal·lar
algun microprogramari en aquell moment. En alguns casos, una instal·lació amb
èxit encara pot acabar en una pantalla negra o "desgarbada" quan es reinicia al
sistema instal·lat. Quan això passa, es poden provar les següents solucions:

  • Afegiu l'opció nomodeset a la línia de comandes del nucli. Això pot
    facilitar l'arrencada en mode «gràfic alternatiu».

  • Useu la combinació de tecles Ctrl+Alt+F2 per saltar al VT2, que podria
    oferir una entrada funcional de sessió.

Un cop iniciada la sessió al sistema instal·lat, és possible automatitzar la
detecció del microprogramari que manca, i realitzar els passos necessaris per
habilitar-los, seguint aquest procediment:

 1. Instal·leu del paquet isenkram-cli.

 2. Executeu la comanda isenkram-autoinstall-firmware com a usuari «root».

Normalment, el fet de reiniciar és la manera més senzilla d'assegurar que tots
els mòduls del nucli estan correctament inicialitzats; això és particularment
important quan s'ha arrencat el sistema amb l'opció nomodeset com a mesura
provisional.

Nota

És molt probable que la instal·lació de paquets de microprogramari requereixi
habilitar la secció no lliure de l'arxiu de paquets. A partir de Debian GNU/
Linux 11.0, executar l'ordre isenkram-autoinstall-firmware ho farà
automàticament creant un fitxer dedicat (/etc/apt/sources.list.d/
isenkram-autoinstall-firmware.list), apuntant a una rèplica de paquets
genèrica.

6.5. Personalització

Utilitzant l'intèrpret d'ordres (vegeu Secció 6.3.9.2, «Utilització de
l'intèrpret d'ordres i visualització dels fitxers de registre»), el procés
d'instal·lació es pot personalitzar acuradament per ajustar-se a casos d'ús
excepcionals:

6.5.1. Instal·lació d'un "sistema init" alternatiu

Debian utilitza systemd com el seu sistema d'inici predeterminat. No obstant
això, altres sistemes d'inici (com ara sysvinit i OpenRC) són compatibles, i el
moment més fàcil per seleccionar un sistema d'inici alternatiu és durant el
procés d'instal·lació. Per obtenir instruccions detallades sobre com fer-ho,
vegeu la pàgina init a la wiki de Debian.


━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

^[6] En termes tècnics: en cas que hi hagi múltiples usos locals («locales»)
per l'idioma amb diferents codis de país.

^[7] Amb la prioritat mitjana i baixa sempre podreu escollir el vostre «locale»
preferit entre aquells disponibles per a l'idioma escollit (si n'hi ha més
d'un).

^[8] Els «locales» tradicionals són aquells que no empren UTF-8, sinó un dels
estàndards més antics per a la codificació de caràcters com ISO 8859-1 (emprat
pels idiomes de l'Europa occidental) o EUC-JP (emprat pel Japonés).

^[9] L'instal·lador xifrarà el grup de volums LVM utilitzant una clau AES de
256 bits, i aprofitant el suport per a «dm-crypt» del nucli.

^[10] Per ser honests, podeu construir un dispositiu de discs múltiples (MD)
fins i tot a partir de particions en un mateix dispositiu físic, però això no
us aportarà cap benefici.

^[11] Utilitzar una contrasenya com a clau significa en aquest moment que la
partició es prepararà utilitzant LUKS.

^[12] Es creu que els de les agències amb tres lletres poden recuperar les
dades inclòs després de vàries reescriptures a mitjans magnetoòptics.

^[13] Fixeu-vos que el programa que realment instal·la els paquets és dpkg.
Tanmateix, aquesta és una eina de més baix nivell. L'apt és una eina de més alt
nivell que invoca dpkg com correspon. Permet obtenir paquets del mitjà
d'instal·lació, de la xarxa, o de qualsevol altre lloc. També facilita la
instal·lació automàtica de les anomenades dependències, altres paquets que fan
falta per a que el que estigueu instal·lant funcioni correctament.

^[14] Hauríeu de saber que per mostrar aquesta llista, l'instal·lador tan sols
executa el programa tasksel. Es pot executar en qualsevol moment després de la
instal·lació per instal·lar (o esborrar) més paquets, o podeu utilitzar eines
més acurades com l'aptitude. Si esteu buscant un paquet específic, executeu
aptitude install paquet, on paquet és el nom del paquet que us interessa.

^[15] És a dir: premeu la tecla Alt que hi ha a la part esquerra de la barra
espaiadora i la tecla de funció F2 al mateix temps.

^[16] L'ordre següent esborrarà una entrada existent corresponent a un
ordinador: ssh-keygen -R <nom|adreça IP>.

Capítol 7. Arrancada del nou sistema Debian

Sumari

7.1. El moment de la veritat
7.2. Muntar volums xifrats

    7.2.1. Resolució de problemes

7.3. Iniciar sessió

7.1. El moment de la veritat

La primera arrencada del vostre sistema pels seus propis mitjans és el que els
enginyers electrònics anomenen la «prova de foc».

Si heu realitzat una instal·lació predeterminada, el primer que hauríeu de
veure en arrencar el sistema és el menú del carregador de l'arrencada grub. Les
primeres opcions al menú seran per al nou sistema Debian. Si es detecten altres
sistemes operatius durant el procés d'instal·lació (com ara Windows), es
llistaran en el menú a continuació de les entrades dedicades a Debian.

Si el sistema no s'inicialitza correctament, no us preocupeu. Si la
instal·lació ha finalitzat amb èxit, és molt probable que només sigui un
problema menor que estigui dificultant l'arrencada de Debian. En la majoria de
casos, aquest tipus de problemes es poden solucionar sense repetir la
instal·lació. Una opció per solucionar els problemes és utilitzar el mode
rescat integrat en l'instal·lador (vegeu Secció 8.6, «Restauració d'un sistema
amb errors»).

Si sou nou a Debian i Linux, tal vegada necessiteu l'ajuda d'usuaris més
experimentats. Per a ajuda en línia podeu provar els canals d'IRC #debian o #
debian-boot a la xarxa OFTC. Alternativament podeu preguntar a la llista de
correu debian-user. També podeu enviar un informe d'instal·lació tal i com es
descriu a la Secció 5.4.7, «Emissió d'informes d'error». Assegureu-vos de
descriure clarament la situació i d'incloure tots els missatges mostrats que
puguin ser d'ajuda als demés a l'hora de diagnosticar el problema.

Si teníeu altres sistemes operatius instal·lats a la màquina i no s'han
detectat correctament, envieu també un informe d'instal·lació.

7.2. Muntar volums xifrats

Si heu generat volums xifrats a la instal·lació i els heu assignat punts de
muntatge, se us preguntarà que introduïu la contrasenya per cada volum a
l'arrencada.

A les particions xifrades amb «dm-crypt» se us mostrarà l'indicador següent a
l'arrencada:

Arrancant els primers discs xifrats... part_crypt (s'està començant)
Introduïu la contrasenya LUKS:

A la primera línia de l'indicador, part és el nom de la partició subjacent, p.
ex. sda2 o md0. Us preguntareu probablement quin és el volum pel qual esteu
introduint ara la contrasenya. És la que es refereix al vostre /home? O a /var?
Per suposat, si xifreu tan sols un volum, és fàcil tan sols donant la paraula
de pas que heu utilitzat quan heu configurat el volum. Si heu configurat més
d'un volum xifrat a la instal·lació, us seran útils les notes que heu escrit a
l'últim pas de Secció 6.3.4.6, «Configuració de volums xifrats». Si no vàreu
fer una nota del mapatge dels part_crypt i els punt de muntatge abans, encara
podeu trobar-ho a /etc/crypttab i a /etc/fstab del vostre nou sistema.

L'indicador es pot mostrar diferent quan està muntat el sistema de fitxers
arrel xifrat. Açò depèn de quin generador de «initramfs» es va utilitzar per
generar el «initrd» utilitzat per arrencar el sistema. L'exemple de baix és per
un «initrd» generat amb initramfs-tools:

Begin: Muntant el sistema de fitxers arrel... ...
Begin: Executant /scripts/local-top ...
Introduïu la contrasenya LUKS:

No es mostrarà cap caràcter (ni asteriscs) mentre introduïu la contrasenya. Si
introduïu una contrasenya incorrecta, tindreu dos intents més per corregir-ho.
Després del tercer intent, el procés d'arrencada obviarà aquest volum i
continuarà per muntar el pròxim sistema de fitxers. Vegeu Secció 7.2.1,
«Resolució de problemes» per obtenir més informació.

Després d'introduir totes les contrasenyes l'arrencada hauria de continuar de
forma normal.

7.2.1. Resolució de problemes

Si algun volum xifrat no s'ha pogut muntar degut a que s'ha introduït una
contrasenya incorrecta, haureu de muntar-los manualment després de l'arrencada.
Hi ha casos diferents.

  • El primer cas fa referència a la partició arrel. Quan no es munta
    correctament, el procés d'arrencada s'aturarà i haureu de reiniciar
    l'ordinador per provar altra vegada.

  • El cas més senzill és per volums xifrats que contenen dades com és /home o
    /srv. Podeu muntar-lo manualment després de l'arrencada.

    Per «dm-crypt» açò és una mica més difícil. Primer necessitareu registrar
    els volums amb «device mapper» executant:

    # /etc/init.d/cryptdisks start

    Açò cercarà a tots els volums anomenats a /etc/crypttab i generarà els
    dispositius apropiats al directori /dev després d'introduir les
    contrasenyes correctes. (Als volums ja registrats no ho farà, així que
    podeu repetir aquesta ordre més vegades sense preocupar-vos). Després d'un
    registre correcte podeu muntar els volums de la forma habitual:

    # mount /mount_point

  • Si qualsevol volum que continga sistemes de fitxers no crítics no és muntat
    (/usr o /var), el sistema encara podria arrencar i hauríeu de ser capaços
    de muntar els volums manualment com al cas anterior. Però, necessitareu
    tornar a iniciar alguns serveis que s'executen al vostre nivell d'execució
    per defecte ja que és molt probable que no s'haja iniciat. La forma més
    senzilla d'aconseguir-ho és reiniciant l'ordinador.

7.3. Iniciar sessió

Una vegada arrenqui el sistema, veureu un indicador d'inici de sessió
(«login»). Identificau-vos utilitzant el nom d'usuari personal i la contrasenya
seleccionada durant el procés d'instal·lació. El vostre sistema ja està a punt
per a ser utilitzat.

Si sou un usuari nou, tal vegada us interessi explorar la documentació que ja
està instal·lada en el sistema quan comenceu a utilitzar-lo. Actualment hi ha
diversos sistemes de documentació, i s'està treballant en integrar-los. A
continuació teniu alguns punts de partida.

La documentació que acompanya als programes que teniu instal·lats és a /usr/
share/doc/, sota un subdirectori que s'anomena com el programa (o, per ser més
precisos, com el nom del paquet Debian que conté el programa). Tanmateix,
sovint es pot trobar documentació mes àmplia empaquetada per separat en paquets
especials que normalment no s'instal·len. Per exemple, la documentació sobre
l'eina d'administració de paquets apt es pot trobar als paquets apt-doc o
apt-howto.

Addicionalment, hi ha alguns directoris especials dins de la jerarquia de /usr/
share/doc/. Els COM ES FA de Linux s'instal·len en format .gz (comprimits), a /
usr/share/doc/HOWTO/en-txt/. Després d'instal·lar dhelp, trobareu un índex
navegable de la documentació a /usr/share/doc/HTML/index.html.

Una manera senzilla de veure aquests documents utilitzant un navegador en mode
text és introduir les ordres següents:

$ cd /usr/share/doc/
$ w3m .

El punt després de l'ordre w3m indica que es mostrin els continguts del
directori actual.

Si teniu un entorn gràfic d'escriptori instal·lat, també podeu utilitzar el seu
navegador web. Executeu el navegador des del menú d'aplicacions i introduïu /
usr/share/doc/ a la barra d'adreces.

També podeu teclejar info ordre o man ordre per veure la documentació de la
major part d'ordres disponibles a la línia d'ordres. Teclejant help es mostrarà
l'ajuda sobre les ordres de l'intèrpret. I si es tecleja una ordre seguida de
--help es visualitzarà normalment un resum curt de la forma d'ús del programa.
Si el resultat d'una ordre es desplaça més enllà de la part superior de la
pantalla, teclegeu | more després de l'ordre per fer que els resultats s'aturin
abans de desplaçar-se fora de la pantalla. Per veure una llista de totes les
ordres disponibles que comencen amb una certa lletra, teclegeu la lletra i
després dos tabuladors.

Capítol 8. Següents passos i per on seguir

Sumari

8.1. Aturar el sistema
8.2. Orientar-vos a Debian

    8.2.1. El sistema de paquets de Debian
    8.2.2. Programari addicional disponible per a Debian
    8.2.3. Gestió de versions de les aplicacions
    8.2.4. Gestió de tasques amb «cron»

8.3. Lectura i informació addicional
8.4. Configuració del vostre sistema per utilitzar el correu electrònic

    8.4.1. Configuració predeterminada del correu electrònic
    8.4.2. Enviar correus fora del sistema
    8.4.3. Configuració de l'agent de transport de correu Exim4

8.5. Compilar un nou nucli
8.6. Restauració d'un sistema amb errors

8.1. Aturar el sistema

Per aturar un sistema Debian GNU/Linux, ni heu de reiniciar prement el botó de
reiniciar l'ordinador, ni heu de prémer el botó d'apagar. Per evitar que es
perdin fitxers o es produeixin errors al disc hauríeu d'aturar-lo de manera
controlada. Si utilitzeu un entorn d'escriptori, és comú tenir a l'abast
l'opció «Surt» al menú que us permet apagar (o reiniciar) el sistema.

De forma opcional podeu utilitzar la combinació de tecles Ctrl+Alt+Del . Si la
combinació de tecles no funciona, la darrera opció és entrar com a superusuari
i escriure una de les ordres d'aturada. Feu servir l'ordre reboot per a
reiniciar el sistema. halt per a aturar-ho sense apagar-ho ^[17]. Per a apagar
el sistema, feu servir l'ordre poweroff o shutdown -h now. El sistema d'inici
«systemd» aporta ordres addicionals per a les mateixes funcions: per exemple 
systemctl reboot o systemctl poweroff.

8.2. Orientar-vos a Debian

Debian és una mica diferent d'altres distribucions. Fins i tot si esteu
familiaritzats amb altres distribucions Linux, hi ha coses que hauríeu de saber
sobre Debian, i que us poden ajudar a mantenir el vostre sistema en bon estat i
net. Aquest capítol conté material d'ajuda per orientar-vos; no pretén ser un
tutorial sobre com usar Debian, sinó un breu cop d'ull al sistema per als més
apressats.

8.2.1. El sistema de paquets de Debian

El concepte més important que heu de comprendre és el sistema d'empaquetament
de Debian. Essencialment, considereu que la major part del vostre sistema està
sota el control del sistema de paquets. Això inclou:

  • /usr (excloent /usr/local)

  • /var (podeu generar /var/local sense risc)

  • /bin

  • /sbin

  • /lib

Per exemple, si reemplaceu /usr/bin/perl, funcionarà, però si aleshores
actualitzeu el vostre paquet perl, el fitxer que hi havia serà reemplaçat de
nou. Els més experts ho podeu evitar posant els paquets a «hold» (mantenir) amb
l'aptitude.

Un dels millors mètodes d'instal·lació és «apt». Podeu usar la versió de línia
d'ordres apt, o bé eines com ara aptitude o synaptic (que són bàsicament
interfícies gràfiques d'apt). Noteu que «apt» també us deixarà combinar «main»,
«contrib» i «non-free» de tal manera que podeu tenir paquets amb restriccions
(que estrictament parlant no pertanyen a Debian) així com paquets de Debian GNU
/Linux al mateix temps.

8.2.2. Programari addicional disponible per a Debian

Hi ha repositoris de programari oficials i no oficials que no estan disponibles
predeterminadament a la instal·lació de Debian. Contenen programari que podeu
considerar important i que esperau tenir. La informació sobre aquests
repositoris addicionals està disponible a la pàgina de Debian The Software
Available for Debian's Stable Release.

8.2.3. Gestió de versions de les aplicacions

Les versions alternatives de les aplicacions es gestionen mitjançant
«update-alternatives». Si manteniu múltiples versions dels vostres programes,
llegiu la pàgina del manual de «update-alternatives».

8.2.4. Gestió de tasques amb «cron»

Qualsevol tasca sota la supervisió de l'administrador del sistema ha d'estar a
/etc, on hi ha els fitxers de configuració. Si teniu una tasca «cron» com a
«root», podeu posar-la a /etc/cron.{daily,weekly,monthly} segons si voleu que
sigui diària, setmanal o mensual. Aquestes tasques seran invocades des de /etc/
crontab, i executades per ordre alfabètic.

D'altra banda, si teniu una tasca que s'ha d'executar (a) com a un usuari en
concret o (b) en un moment específic o amb una freqüència establerta, podeu
usar /etc/crontab, o encara millor, /etc/cron.d/qualsevol_cosa. Aquests fitxers
tenen un camp addicional que permet definir el compte d'usuari amb què
s'executarà la tasca.

En qualsevol cas, simplement editeu els fitxers i cron se n'adonarà
automàticament. No hi ha cap necessitat d'executar ordres especials. Per a més
informació, consulteu cron(8), crontab(5), i /usr/share/doc/cron/README.Debian.

8.3. Lectura i informació addicional

La pàgina web de Debian té una gran quantitat de documentació sobre Debian. A
destacar, Debian GNU/Linux PMF i la referència de Debian. Hi ha disponible un
índex de més documentació sobre Debian en el projecte de documentació de Debian
. La comunitat de Debian és autosuficient; si us voleu subscriure a una o més
llistes de correu, mireu la pàgina de subscripció a les llistes de correu. I
per últim, però no menys important, els arxius de les llistes de correu de
Debian contenen informació molt valuosa sobre Debian.

Si necessiteu informació sobre algun programa en concret, en primer lloc
intenteu fer man programa, o bé info programa.

També hi ha molta documentació útil a /usr/share/doc. En concret, /usr/share/
doc/HOWTO i /usr/share/doc/FAQ contenen informació d'interès general. Per
enviar informes d'errors, mireu /usr/share/doc/debian/bug*. Si voleu saber més
sobre les característiques específiques dels programes a Debian, consulteu /usr
/share/doc/(nom del paquet)/README.Debian.

Una bona font d'informació sobre GNU/Linux en general és el Projecte de
documentació de Linux. Allà hi trobareu els COM ES FA i enllaços a d'altres
llocs amb informació sobre les diferents parts d'un sistema GNU/Linux.

Linux és una implementació d'Unix. El Projecte de Documentació de Linux (LDP)
recopila un nombre considerable de HOWTOs i llibres en línia relacionats amb
Linux.

Si sou nou a Unix, probablement hauríeu de sortir a comprar alguns llibres i
llegir una mica. La llista de PMF de Unix, que conté alguns documents de
UseNet, és una bona referència històrica.

8.4. Configuració del vostre sistema per utilitzar el correu electrònic

Avui en dia, el correu electrònic és una part important de la vida de la gent.
Com que hi ha moltes formes de configurar-lo, i que fer-ho és important per
algunes utilitats de Debian, provarem de cobrir les parts més bàsiques en
aquesta secció.

Un sistema de correu té tres components bàsics pel seu funcionament. En primer
lloc tenim l'Agent de correu d'usuari (MUA) que s'utilitza per escriure i
llegir els correus. Després tenim l'agent de transferència de correu (MTA) que
s'encarrega de la transferència dels missatges des d'un ordinador a un altre. I
per acabar tenim l'agent de lliurament de correu (MDA) que s'encarrega de
lliurar el correu entrant a la safata d'entrada de l'usuari.

Aquestes tres funcions les poden dur a terme programes separats, però també es
poden combinar en un o dos programes. També és possible tenir un tractament
diferent d'aquestes funcions pels diferents tipus de correu.

A Linux i als sistemes Unix el mutt històricament ha estat un MUA molt conegut.
Com la major part dels programes de Linux tradicionals, està basat en text.
Sovint s'utilitza en combinació amb l'exim o el sendmail com a MTA i el 
procmail com a MDA.

Amb l'increment de popularitat dels entorns gràfics d'escriptori, l'ús de
programes de correu electrònic gràfics com l'evolution de GNOME, el kmail de
KDE, o el thunderbird de Mozilla s'ha fet més popular. Aquests programes
combinen les funcions de MUA, MTA i MDA, però poden -- i sovint -- també
s'utilitzen en combinació amb les eines de Linux tradicionals.

8.4.1. Configuració predeterminada del correu electrònic

Encara que esteu pensant d'utilitzar un programa gràfic pel correu, seria útil
que també tingueu correctament instal·lat i configurat al vostre sistema un MTA
/MDA tradicional al vostre sistema Debian GNU/Linux. La raó és que algunes
utilitats importants al sistema^[18] poden enviar informacions importants per
correu per informar a l'administrador del sistema de problemes (en potència) o
de canvis.

Per això podeu instal·lar exim4 i el mutt amb apt install exim4 mutt. L'exim4
és una combinació de MTA/MDA que és relativament menuda i però molt flexible.
Per defecte tan sols es configurarà per que tracte amb el correu local del
mateix sistema i els correus que van dirigits a l'administrador del sistema (al
compte root) els lliurà al compte d'usuari que es va generar a la instal·lació^
[19].

Quan els correus del sistema es reparteixen, s'afegeixen a un fitxer que és a /
var/mail/nom_del_compte. Els correus es poden llegir utilitzant el mutt.

8.4.2. Enviar correus fora del sistema

Com s'ha dit abans, l'instal·lador de Debian està configurat per tractar amb el
correu local del sistema, no per enviar correu a altres ni per rebren d'altres.

Si preferiríeu que l'exim4 controle el correu extern, adreceu-vos a la
subsecció següent per veure les opcions bàsiques de configuració que hi ha la
vostre abast. Assegureu-vos de comprovar que el correu s'envia i es rep
correctament.

Si esteu provant d'utilitzar un programa gràfic per al correu i utilitzeu el
servidor de correu del vostre proveïdor de serveis Internet (ISP) o de la
vostra empresa, no necessiteu configurar l'exim4 per a que es faci càrrec del
correu electrònic. Tan sols configureu el vostre programa de correu gràfic
favorit per que utilitze els servidors correctes i envie i reba el correu (el
com fer-ho està fora de l'abast d'aquest manual).

Per altra banda, en eixe cas potser necessitaríeu configurar les utilitats de
forma individual per enviar correus. Una d'aquestes utilitats és el reportbug,
un programa que facilita l'enviament d'informes d'error contra els paquets de
Debian. Per defecte espera poder utilitzar l'exim4 per enviar els informes
d'error.

Per configurar correctament el reportbug per a que utilitze un servidor de
correu extern, executeu l'ordre reportbug --configure i responeu «no» a la
pregunta de si teniu un MTA a l'abast. Haureu de preguntar quin és el servidor
SMTP que podeu utilitzar per enviar informes d'error.

8.4.3. Configuració de l'agent de transport de correu Exim4

Si voleu que el vostre sistema també es faça càrrec del correu extern,
necessitareu reconfigurar el paquet exim4^[20]:

# dpkg-reconfigure exim4-config

Després d'executar eixa ordre (com a «root»), haureu de respondre si voleu
dividir la configuració en fitxers menuts. Si no esteu segurs, seleccioneu
l'opció predeterminada.

A continuació es mostraran alguns escenaris comuns per al correu. Escolliu el
que més s'aprope a les vostres necessitats.

lloc d'internet

    El vostre sistema està connectat a una xarxa i el vostre correu s'envia i
    es rep directament amb SMTP. A les pantalles següents us faran unes poques
    preguntes, com el nom del correu de la vostra màquina, o una llista de
    dominis pels quals acceptar o reenviar correu.

correu enviat a través de l'smarthost

    En aquest escenari el vostre correu sortint es reenvia a un altra màquina,
    que es diu un «smarthost», que mira d'enviar els missatges a la seva
    destinació. L'smarthost normalment també emmagatzema el correu entrant al
    vostre ordinador, de forma que no necessitareu estar permanentment en
    línia. Això vol dir també que haureu de descarregar el vostre correu des de
    l'smarthost amb programes del tipus fetchmail.

    En moltes ocasions l'smarthost serà el servidor de correu del vostre ISP,
    que és una opció molt vàlida per a usuaris que fan ús del marcatge. També
    podria ser un servidor de correu d'empresa o inclús un altre sistema a la
    vostra xarxa.

enviament a través de l'smarthost; no hi ha correu local

    Aquesta opció és bàsicament la mateixa que l'anterior excepte que el
    sistema no es configurarà per a que gestione el correu per al domini de
    correu local. El correu del sistema mateix (p.ex. per l'administrador del
    sistema) encara es gestionarà.

només enviament local

    Aquesta és l'opció que està configurada per defecte al vostre sistema.

no el configures ara mateix

    Escolliu aquesta si esteu absolutament convençuts de que sabeu el que esteu
    fent. Açò deixarà el vostre sistema amb el correu sense configurar -- fins
    que el configureu, no podreu enviar o rebre cap correu i estareu perdent
    alguns missatges importants de les utilitats del vostre sistema.

Si cap d'aquests escenaris s'ajusta a les vostres necessitats, o si necessiteu
una configuració més acurada, haureu d'editar els fitxers de configuració que
hi ha al directori /etc/exim4 després de completar la instal·lació. Podeu
trobar més informació de l'exim4 a /usr/share/doc/exim4; el fitxer
README.Debian.gz conté alguns detalls per a la configuració de l'exim4 i
explica on trobar documentació addicional.

Adoneu-vos que enviar directament correu a Internet quan no disposeu d'un
domini oficial, pot resultar en que el vostre correu sigui rebutjat com a
mesura contra el correu brossa als servidors que el reben. És preferible fer ús
del servidor de correu del vostre ISP. Si encara voleu enviar correu de forma
directa, podriu utilitzar una adreça de correu diferent a la que es genera per
defecte. Si utilitzeu com MTA l'exim4, açò és possible afegint una entrada a l'
/etc/email-addresses.

8.5. Compilar un nou nucli

Per què voldria hom compilar un nou nucli? Probablement no és necessari atès
que el nucli per defecte que duu Debian gestiona gairebé totes les
configuracions.

Si malgrat això voleu compilar el nucli, això és evidentment possible i us
recomanem l'ús de l'objectiu «make deb-pkg». Per a més informació llegiu el
Manual del nucli Linux de Debian.

8.6. Restauració d'un sistema amb errors

En alguns casos, les coses no acaben de funcionar correctament, i el sistema
que curosament heu instal·lat no arrenca. Probablement el carregador
d'arrencada no s'hagi executat correctament durant la comprovació d'un canvi, o
potser el nucli instal·lat no s'arrenqui, o potser els raigs còsmics hagin
afectat el disc i hagin alterat un bit del fitxer /sbin/init. Independentment
de l'origen de l'error, necessiteu un sistema per treballar mentre no
solucioneu el problema; en aquesta situació el mode de rescat us pot ser útil.

Per accedir al mode de rescat, seleccioneu rescue al menú d'engegada, escriviu
rescue a l'indicador boot: o arrenqueu amb el paràmetre d'arrencada rescue/
enable=true. Us apareixeran les primeres pantalles de l'instal·lador amb una
nota a la cantonada indicant que l'esteu executant en el mode de rescat i no
realitzant una instal·lació completa. No us preocupeu, no se us sobreescriurà
el sistema! El mode de rescat aprofita les facilitats de detecció de maquinari
disponibles en l'instal·lador per assegurar que disposeu dels discs,
dispositius de xarxa i similars durant la reparació del sistema.

En comptes de l'eina de fer particions, us hauria d'aparèixer una llista de
particions del sistema i demanar-vos que n'escolliu una. En la majoria dels
casos hauríeu de seleccionar la partició que contingui el sistema de fitxers
arrel que voleu reparar. Us seria possible seleccionar les particions en els
dispositius RAID i LVM i les creades directament als discs.

L'instal·lador intentarà donar-vos accés a l'indicador de l'intèrpret d'ordres
del sistema de fitxers seleccionat amb el qual podeu reparar el sistema. Per
exemple, si heu de tornar a instal·lar el carregador d'arrencada GRUB al
registre d'arrencada del primer disc dur, podríeu utilitzar l'ordre
grub-install '(hd0)'.

Si l'instal·lador no pot executar un intèrpret d'ordres en el sistema de
fitxers arrel que heu seleccionat, pot ser que el primer contingui errors, en
aquest cas mostrarà un avís i us permetrà utilitzar un intèrpret d'ordres en
l'entorn de l'instal·lador. En aquest entorn no disposareu de tantes eines,
però segurament seran suficient per solucionar l'error del sistema. L'arrel del
sistema de fitxers que heu seleccionat es muntarà al directori /target.

En qualsevol cas, un cop sortiu de la línia d'ordres el sistema es reiniciarà.

Com apunt final, recordeu que la reparació d'un sistema amb errors pot ser
difícil, i que aquest manual no pretén endinsar-se en totes les possibles
causes o solucions. Si teniu problemes, consulteu un expert.


━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

^[17] Amb el sistema d'inici «SysV», l'ordre halt obté el mateix resultat que
l'ordre poweroff, però si el sistema d'inici és «systemd» (el predeterminat per
a Jessie) el resultat és distint.

^[18] Alguns exemples són: cron, quota, logcheck, aide, ...

^[19] El reenviament de correu pel «root» a un dels comptes d'usuari s'ha
configurat a l'/etc/aliases. Si no hi ha cap compte d'usuari normal preparat,
aleshores el correu s'enviarà al compte del «root» mateix.

^[20] Per suposat, també podeu esborrar l'exim4 i reemplaçar-lo per qualsevol
MTA/MDA alternatiu.

Apèndix A. Com Instal·lar

Sumari

A.1. Preliminars
A.2. Arrencada de l'instal·lador

    A.2.1. Disc òptic
    A.2.2. Clau de memòria USB
    A.2.3. Arrencada des de la xarxa
    A.2.4. Arrencada des del disc dur

A.3. Instal·lació
A.4. Envieu un informe de la instal·lació
A.5. I finalment...

Aquest document descriu com instal·lar Debian GNU/Linux bullseye per 64-bit PC
(«amd64») amb el nou debian-installer. És un passeig ràpid pel procés
d'instal·lació el qual hauria de contenir tota la informació que necessiteu per
a la majoria d'instal·lacions. Quan sigui necessària mes informació us remetrem
a explicacions més detallades a altres parts d'aquest document.

A.1. Preliminars

Si trobeu errors al llarg de la instal·lació per favor dirigiu-vos a la
Secció 5.4.7, «Emissió d'informes d'error» per consultar la informació de com
informar-ho. Si teniu preguntes les quals no estan respostes a aquest document,
informeu a la llista de correu debian-boot (debian-boot@lists.debian.org) o
pregunteu al IRC (#debian-boot a la xarxa de OFTC).

A.2. Arrencada de l'instal·lador

L'equip de debian-cd construeix imatges d'instal·lació que utilitzen el
debian-installer a la pàgina de Debian CD/DVD. Si voleu trobar més informació
d'on descarregar-se les imatges d'instal·lació, mireu Secció 4.1, «Imatges
oficials d'instal·lació de Debian GNU/Linux».

Alguns mètodes d'instal·lació requereixen d'altres imatges a més de les dels
mitjans òptics A la Secció 4.2.1, «On trobar arxius d'instal·lació» s'explica
com podeu trobar imatges a rèpliques de Debian.

Les següents subseccions us donaran detalls de quines imatges necessiteu
aconseguir per a cada mecanisme d'instal·lació.

A.2.1. Disc òptic

La imatge CD d'instal·lació per xarxa («netinst») és una imatge popular per a
instal·lar bullseye amb debian-installer. Aquesta mètode d'instal·lació s'ha
fet amb la intenció d'arrencar des de la imatge i instal·lar els paquets
addicionals fent ús d'una xarxa, d'aquí el nom «netinst». En aquesta imatge
estan inclosos els components necessaris per executar l'instal·lador i els
paquets bàsics per a tenir el sistema mínim de bullseye. Si voleu, podeu
aconseguir una imatge completa en CD/DVD amb la qual no necessiteu la xarxa per
fer la instal·lació. Tan sols necessiteu la primera imatge del conjunt.

Descarregueu la que preferiu i graveu-la en un disc òptic. Per arrencar el
disc, necessiteu canviar la configuració de la vostra BIOS/UEFI, com s'explica
a la Secció 3.6.1, «Accedir al menú de configuració de la BIOS/UEFI».

A.2.2. Clau de memòria USB

També podeu instal·lar des d'una clau de memòria USB. Per exemple un clauer USB
pot ser un mitjà d'instal·lació de Debian molt còmode per portar per tot arreu.

La manera més fàcil de preparar la vostra memòria USB és baixar les imatges de
Debian en CD o DVD que voleu posar-hi i escriure-les directament en la memòria.
Per suposat, les dades anteriors disponibles a la memòria es perdran. Això
funciona degut a què les imatges en CD/DVD de Debian són imatges «ISO híbrides»
que poden arrencar des d'un dispositiu de òptic o USB.

Hi ha formes més flexibles per preparar un llapis de memòria per fer ús del
debian-installer, i també és possible que funcioni amb llapis de memòria mes
petits. Per més detalls, podeu mirar Secció 4.3, «Preparació dels fitxers per
arrencar amb el llapis de memòria USB».

Tot i que engegar des d'un dispositiu USB és força usual en sistemes UEFI, això
és diferents en el món més antic de les BIOS. Algunes BIOS poden arrencar
directament des de dispositius USB, però d'altres no. Pot ser que hagueu de
configurar la vostra BIOS/UEFI perquè arrenque des del «USB legacy support
(suport antic USB)» o «Legacy support (suport antic)». El menú de selecció de
dispositius d'arrencada hauria de mostrar «disc extraïble» o «USB-HDD» per fer
que arrenque des del dispositiu USB. Podeu trobar ajudes i detalls a
Secció 5.1.1, «Arrencada des d'un llapis USB».

A.2.3. Arrencada des de la xarxa

També és possible arrencar el debian-installer completament des de la xarxa. Hi
ha diferents mètodes per arrencar per xarxa depenent de la vostra arquitectura
i configuració d'arrencada de xarxa. Els fitxers que podeu trobar a netboot/
poden utilitzar-se per arrencar de la xarxa el debian-installer.

La manera més fàcil per configurar-ho és probablement l'arrencada amb PXE.
Desempaqueteu amb el tar el fitxer netboot/pxeboot.tar.gz a /srv/tftp o a un
altre lloc al vostre servidor tftp. Configureu el vostre servidor DHCP per que
envie als clients el fitxer pxelinux.0, i amb una mica de sort tot anirà be. Si
voleu instruccions més detallades, mireu Secció 4.5, «Preparació dels fitxers
per a l'arrencada en xarxa TFTP».

A.2.4. Arrencada des del disc dur

Es possible arrencar l'instal·lador sense fer ús d'un dispositiu extraïble, tan
sols tenint un disc dur, que pot contenir un sistema operatiu diferent.
Descarregueu hd-media/initrd.gz, hd-media/vmlinuz, i la imatge d'un CD/DVD de
Debian al directori principal del vostre disc dur. Assegureu-vos de que la
imatge tengui el nom acabat amb .iso. Ara tan sols us queda arrencar el linux
amb el «initrd». A la Secció 5.1.5, «Arrencada des de Linux utilitzant GRUB»
s'explica com fer-ho.

A.3. Instal·lació

Una vegada l'instal·lador ha començat, voreu la pantalla de benvinguda. Premeu 
Intro per arrencar, o llegiu les instruccions per seleccionar altres mètodes i
paràmetres (vegeu la Secció 5.3, «Paràmetres d'arrencada»).

Al cap d'una mica se us demanarà que seleccioneu el vostre idioma. Feu ús de
les fletxes per seleccionar un idioma i premeu Intro per continuar. A
continuació se us preguntarà el vostre país, amb les eleccions possibles
s'inclourà una llista de països on es parla el vostre idioma. Si no es troba a
la llista curta, també disposeu d'una llista amb tots els països del mon.

És possible que necessiteu confirmar el vostre tipus de teclat. Escolliu el
valor per defecte a no ser que en conegueu un millor.

Ara seieu mentre el debian-installer detecta el vostre maquinari, i carrega la
resta de components des de la imatge d'instal·lació.

Després l'instal·lador intentarà detectar el vostre maquinari de xarxa i
configurar la xarxa mitjançant DHCP. Si no esteu en xarxa o no disposeu de
DHCP, aleshores podreu configurar manualment la xarxa.

Després de configurar la xarxa, es configuren els comptes d'usuari. Per omissió
s'haurà d'indicar la contrasenya del compte «root» (administrador) i la
informació necessària per generar un compte d'usuari normal. Si no especificau
una contrasenya per al compte «root» aquest quedarà desactivat però més
endavant s'instal·larà el paquet sudo per a permetre que es puguin dur a terme
les tasques administratives en el nou sistema. Per omissió, es permetrà al
primer usuari creat al sistema emprar l'ordre sudo per convertir-se en root.

El proper pas configura el rellotge i el fus horari. L'instal·lador intentarà
connectar-se a un servidor d'hora d'Internet per assegurar que l'hora del
rellotge és correcta. El fus horari dependrà del país seleccionat anteriorment
i l'instal·lador només demanarà triar-ne un si el país té diverses zones.

Aquest és el moment de fer particions als vostres discs. Primer tindreu
l'oportunitat de triar si fer particions automàticament al disc sencer, o a
l'espai buit disponible (vegeu Secció 6.3.4.2, «Fer particions de forma guiada»
). Es recomana aquesta darrera opció si sou nous usuaris o si teniu pressa. Si
no voleu fer particions automàticament, trieu Manual des del menú.

Si teniu una partició amb DOS o Windows que voleu conservar, aneu amb molt de
compte amb la partició automàtica. Si seleccioneu fer particions manualment,
podeu fer ús de l'instal·lador per canviar el tamany d'una partició FAT o NTFS
per fer espai per a la instal·lació de Debian: seleccioneu la partició i
especifiqueu el nou tamany.

A la pròxima pantalla voreu la vostra taula de particions, com seran formatades
les particions i on es muntaran. Seleccioneu una partició per modificar-la o
esborrar-la. Si heu partit automàticament, tan sols podreu escollir Finalitza
la partició i escriu els canvis al disc al menú, per utilitzar les opcions que
heu triat. Recordeu d'assignar al menys una partició d'intercanvi i muntar una
partició a /. Per a informació més detallada sobre com utilitzar el partidor,
referiu-vos a Secció 6.3.4, «Realització de particions i selecció de punts de
muntatge»; a l'appendix Apèndix C, Fer particions per a Debian també hi
trobareu informació general sobre el procés de partició.

Ara el debian-installer formata les vostres particions i comença a instal·lar
el sistema base, la qual cosa tardarà una mica. Desprès s'instal·larà el nucli.

El sistema base que heu instal·lat ja es pot utilitzar, però encara és una
instal·lació molt mínima. Per tenir un sistema més funcional, el següent pas us
permetrà instal·lar paquets addicionals tot i seleccionant tasques. Abans de
poder instal·lar paquets, s'ha de configurar l'apt, ja que és allà on es
defineix d'on s'obtindran els paquets. La tasca «Sistema estàndard» serà
seleccionada per defecte i normalment s'hauria d'instal·lar. Seleccioneu també
la tasca «Entorn d'escriptori» si voleu un escriptori gràfic després de
completar el procés d'instal·lació. Vegeu Secció 6.3.6.2, «Selecció i
instal·lació de programari» per a informació addicional.

L'últim pas és la instal·lació del gestor d'arrencada. Si l'instal·lador
detecta altres sistemes operatius al vostre ordinador, els afegirà al menú
d'arrencada i ho farà saber. Per defecte, el GRUB s'instal·larà al sector
d'arrencada o a la partició UEFI del vostre primer disc dur, cosa que
normalment serà una bona elecció. Podreu canviar-lo i instal·lar-lo a un altre
lloc si ho desitgeu.

El debian-installer ús notificarà que la instal·lació s'ha finalitzat. Traieu
el cdrom o qualsevol mitjà d'arrencada que hajau utilitzat i premeu Intro per
arrencar de nou la màquina. Ara hauria d'iniciar-se el sistema acabat
d'instal·lar, i us hauria de permetre l'entrada. Això s'explica en detall a
Capítol 7, Arrancada del nou sistema Debian.

Si necessiteu més informació del procés d'instal·lació, vegeu el Capítol 6, 
Utilització de l'instal·lador de Debian.

A.4. Envieu un informe de la instal·lació

Si heu fet la instal·lació amb èxit fent ús del debian-installer, preneu-vos
una mica de temps per enviar-nos un informe. La manera més senzilla de fer-ho
és instal·lant el paquet reportbug (aptitude install reportbug), configurar el
reportbug com s'explica a Secció 8.4.2, «Enviar correus fora del sistema», i
executar reportbug installation-reports.

Si no heu aconseguit completar la instal·lació o heu trobat algun altre
problema, probablement heu trobat una errada al debian-installer. Per poder
millorar l'instal·lador, és necessari que ens en assabentem, així que
preneu-vos un temps per informar del problema. Podeu fer ús d'un informe
d'instal·lació per informar-lo; si la instal·lació falla completament, mireu la
Secció 5.4.6, «Informar d'errors d'instal·lació».

A.5. I finalment...

Esperem que la vostra instal·lació de Debian sigui satisfactòria i que trobeu
Debian d'utilitat. Ara és possible que vulgueu llegir Capítol 8, Següents
passos i per on seguir.

Apèndix B. Automatització de la instal·lació fent servir una configuració
prèvia

Sumari

B.1. Introducció

    B.1.1. Mètodes de configuració prèvia
    B.1.2. Limitacions

B.2. Utilització de la configuració prèvia

    B.2.1. Càrrega del fitxer de configuració prèvia
    B.2.2. Utilització dels paràmetres d'arrencada per complementar la
        configuració prèvia
    B.2.3. Mode auto
    B.2.4. Àlies útils amb la configuració prèvia
    B.2.5. Exemples de configuració prèvia del menú d'arrencada
    B.2.6. Utilitzar un servidor DHCP per especificar els fitxers de
        configuració prèvia

B.3. Preparar un fitxer de configuració prèvia
B.4. Continguts del fitxer de configuració prèvia (per a bullseye)

    B.4.1. Localització
    B.4.2. Configuració de la xarxa
    B.4.3. La consola de xarxa
    B.4.4. Configuració del servidor rèplica
    B.4.5. Configuració de comptes
    B.4.6. Configuració del rellotge i del fus horari
    B.4.7. Fer particions
    B.4.8. Instal·lació del sistema base
    B.4.9. Configuració de l'«apt»
    B.4.10. Selecció de paquets
    B.4.11. Instal·lació del carregador d'arrencada
    B.4.12. Finalització de la instal·lació
    B.4.13. Configuració prèvia d'altres paquets

B.5. Opcions avançades

    B.5.1. Execució d'ordres personalitzades a la instal·lació
    B.5.2. Ús de la configuració prèvia per canviar els valors predeterminats
    B.5.3. Càrrega en cadena de fitxers de configuració prèvia

Aquest apèndix explica com preparar les respostes de la configuració prèvia a
les preguntes del debian-installer per automatitzar la instal·lació.

Els fragments de configuració emprats a aquest apèndix també són a l'abast com
a exemple de fitxer de configuració prèvia a ../example-preseed.txt.

B.1. Introducció

La configuració prèvia proporciona una manera de respondre les preguntes de la
instal·lació sense haver d'introduir manualment les respostes en el moment en
que s'instal·la. Això fa possible l'automatització de la majoria de tipus
d'instal·lació i fins i tot presenta algunes funcionalitats no disponibles
durant les instal·lacions normals.

La configuració prèvia no és un requeriment. Si empreu un fitxer buit de
configuració prèvia, l'instal·lador es comportarà de la mateixa manera que en
una instal·lació manual normal. Cada pregunta que configureu prèviament
modificarà (si ho feu correctament) la instal·lació d'alguna manera partint
d'aquesta base.

B.1.1. Mètodes de configuració prèvia

N'hi ha tres: initrd, fitxer i xarxa. El d'«initrd» funciona amb qualsevol
mètode d'instal·lació i permet la configuració prèvia de més coses, però
requereix la preparació més acurada. Els de fitxer i xarxa es poden fer servir
amb diferents mètodes d'instal·lació.

La taula següent mostra els mètodes de configuració prèvia que es poden fer
servir amb els diferents mètodes d'instal·lació.

┌───────────────────────────────────────────────────┬────────┬─────┬──────────┐
│               Mètode d'instal·lació               │ initrd │file │ network  │
├───────────────────────────────────────────────────┼────────┼─────┼──────────┤
│CD/DVD/USB                                         │sí      │sí   │sí^[a]    │
├───────────────────────────────────────────────────┼────────┼─────┼──────────┤
│netboot                                            │sí      │no   │sí        │
├───────────────────────────────────────────────────┼────────┼─────┼──────────┤
│hd-media (incloent-hi memòries USB)                │sí      │sí   │sí^[a]    │
├───────────────────────────────────────────────────┴────────┴─────┴──────────┤
│^[a] però tan sols si teniu accés a la xarxa, i li doneu el valor apropiat a │
│preseed/url                                                                  │
└─────────────────────────────────────────────────────────────────────────────┘

Una diferència important entre els mètodes de configuració prèvia és el punt en
què es carrega i es processa el fitxer de configuració prèvia. En el cas de
l'«initrd» això té lloc just al principi de la instal·lació, abans que ni tan
sols es faça la primera pregunta. La configuració prèvia des de la línia
d'ordres del nucli passa just després. Per tant, és possible anul·lar la
configuració preestablerta a «initrd» editant la línia d'ordres del nucli ( ja
sigui en la configuració del gestor d'arrencada o manualment en el moment de
l'arrencada per a carregadors d'arrencada que ho permetin). En el cas del
fitxer, té lloc després que s'haja carregat la imatge d'instal·lació. En el cas
de la xarxa, després que aquesta s'haja configurat.

Important

Òbviament, qualsevol pregunta que haja estat processada abans de carregar la
configuració prèvia no es pot incloure en aquesta (açò inclourà les preguntes
que tan sols es mostren amb prioritat baixa o mitjana, com la detecció inicial
del maquinari). Una manera no tan convenient d'evitar aquestes preguntes és la
configuració prèvia mitjançant els paràmetres d'arrencada, com a descriu a
Secció B.2.2, «Utilització dels paràmetres d'arrencada per complementar la
configuració prèvia».

Per evitar les preguntes que normalment apareixen abans de fer la configuració
prèvia, podeu arrencar l'instal·lador en mode «auto». Açò endarrereix les
preguntes que es farien massa d'hora per ser configurades prèviament (p. ex.
idioma, país i selecció de teclat) fins que la xarxa estigui disponible, i és
possible fer la configuració prèvia. També executa la instal·lació amb
prioritat crítica, que evita moltes preguntes sense importància. Trobareu més
detalls a Secció B.2.3, «Mode auto».

B.1.2. Limitacions

Tot i que la majoria de preguntes emprades pel debian-installer poden
configurar-se prèviament fent servir aquest mètode, hi algunes excepcions
remarcables. Cal (tornar a) partir un disc sencer o emprar-ne l'espai lliure
disponible; no es poden emprar particions ja existents.

B.2. Utilització de la configuració prèvia

Primer de tot heu de preparar un fitxer de configuració prèvia i posar-lo al
lloc des d'on voleu fer-lo servir. La preparació de fitxers de configuració
prèvia es tractarà després. Col·locar-los correctament és fàcil en el cas de la
configuració per xarxa o si voleu llegir el fitxer des d'una memòria USB. Si
voleu incloure el fitxer en una imatge ISO d'instal·lació, heu de regenerar la
imatge. El procediment per incloure el fitxer a l'«initrd» no s'explica aquí;
consulteu la documentació per als desenvolupadors del debian-installer.

Teniu a l'abast un exemple de fitxer de configuració prèvia que podeu emprar
com a base per al vostre a ../example-preseed.txt. Aquest fitxer es basa en els
fragments de configuració inclosos en aquest apèndix.

B.2.1. Càrrega del fitxer de configuració prèvia

Si esteu emprant una configuració prèvia de l'«initrd», només heu
d'assegurar-vos que hi haja un fitxer preseed.cfg inclòs al directori arrel de
l'«initrd». L'instal·lador comprovarà automàticament si aquest fitxer és
present i el carregarà.

En els altres mètodes de configuració prèvia heu de dir-li a l'instal·lador el
fitxer que s'usarà quan l'arrenqueu. Això es fa normalment indicant al nucli un
paràmetre d'arrencada, bé manualment en el moment d'arrencar o bé editant el
fitxer de configuració del carregador (p. ex. syslinux.cfg) i afegint-hi el
paràmetre al final de la (les) línia (línies) addicionals per al nucli.més
opcions per la configuració prèvia

Si especifiqueu el fitxer a la configuració del carregador, podeu modificar la
configuració prèvia per no haver de prémer enter per arrencar l'instal·lador. 
En el «syslinux» això vol dir ajustar el temps d'espera (timeout) a 1, a
syslinux.cfg.

Per assegurar-vos que l'instal·lador obté el fitxer de configuració prèvia
correcte, podeu especificar-ne una suma de verificació. Actualment ha de ser
una «md5sum», i si l'especifiqueu ha de correspondre al fitxer de
preconfiguració, altrament l'instal·lador no voldrà fer-la servir.

Paràmetres d'arrencada que cal especificar:
- si esteu arrencant en xarxa:
  preseed/url=http://host/path/to/preseed.cfg
  preseed/url/checksum=5da499872becccfeda2c4872f9171c3d
- o
  preseed/url=tftp://host/path/to/preseed.cfg
  preseed/url/checksum=5da499872becccfeda2c4872f9171c3d

- si esteu arrencant amb una imatge d'instal.lació reconfigurada:
  preseed/file=/cdrom/preseed.cfg
  preseed/file/checksum=5da499872becccfeda2c4872f9171c3d

- si esteu instal·lant des d'un dispositiu USB (poseu el  fitxer
  de preconfiguració al directori principal de la memòria USB):
  preseed/file=/hd-media/preseed.cfg
  preseed/file/checksum=5da499872becccfeda2c4872f9171c3d

Adoneu-vos que preseed/url pot escurçar-se a tan sols url, preseed/file a file
i preseed/file/checksum a preseed-md5 quan són passats com a paràmetres
d'arrencada.

B.2.2. Utilització dels paràmetres d'arrencada per complementar la configuració
prèvia

Si no es pot utilitzar un fitxer de preconfiguració per fer la configuració
prèvia per alguns passos, la instal·lació encara es pot automatitzar
completament, ja que podeu passar valors de la configuració prèvia a línia
d'ordres quan està arrencant l'instal·lador.

També podeu utilitzar els paràmetres d'arrencada si no voleu utilitzar la
configuració prèvia, però voleu donar una resposta a una pregunta específica.
Hi ha alguns exemples on açò pot ser útil, documentats per tot arreu en aquest
manual.

Per donar un valor que s'utilitze dins el debian-installer, passeu ruta/a/la/
variable=valor per qualsevol de les variables que es poden configurar
prèviament que són als exemples en aquest apèndix. Si un valor s'utilitza per
configurar paquets al sistema destí, necessitareu afegir abans el propietari^
[21] de la variable com propietari:ruta/a/la/variable=valor. Si no especifiqueu
el propietari, el valor de la variable no es copiarà a la base de dades debconf
en el sistema destí i no s'utilitzarà a la configuració del paquet rellevant.

Normalment, la preconfiguració d'una pregunta d'aquesta manera, implicarà que
la pregunta no es farà. Per donar un valor específic per a una pregunta, però
fer que encara es faça la pregunta, utilitzeu «?=» en comptes de «=» com a
operador. Vegeu Secció B.5.2, «Ús de la configuració prèvia per canviar els
valors predeterminats».

Adoneu-vos que algunes variables a les que es dona valors freqüentment a
l'indicador de l'arrencada tenen una forma curta. Si hi ha una forma curta,
s'utilitzarà en els exemples d'aquest apèndix en comptes de la variable
completa. Per exemple, la variable preseed/url te com a forma curta url. Un
altre exemple és la forma curta tasks, que es tradueix a tasksel:tasksel/first
.

Un «---» a les opcions d'arrencada té un significat especial. Els paràmetres
del nucli que apareixen després de l'últim «---» es poden copiar al carregador
d'arrencada del sistema instal·lat (si ho suporta l'instal·lador del carregador
d'arrencada). L'instal·lador automàticament filtrarà qualsevol opció (com les
opcions preconfigurades) que reconegui.

Nota

Els nuclis actuals (2.6.9 i posteriors) accepten un màxim de 32 opcions a la
línia d'ordres i 32 opcions d'entorn, que inclou qualsevol opció afegida per
defecte per l'instal·lador. Si es superen aquestes quantitats, el nucli farà un
«pànic» (petarà). (Als nuclis anteriors, aquestes quantitats eren inferiors).

A quasi totes les instal·lacions es poden esborrar amb seguretat algunes de les
opcions per defecte en el fitxer de configuració del carregador d'arrencada,
com vga=normal, que us permetrà que afegiu més opcions per a la configuració
prèvia.

Nota

No sempre és possible passar valors amb espais als paràmetres d'arrencada,
encara que els delimiteu amb cometes.

B.2.3. Mode auto

Hi ha algunes característiques de l'instal·lador de Debian que combinen la
simplicitat de la línia d'ordres de l'indicador d'arrencada per aconseguir unes
instal·lacions automàtiques personalitzades arbitràriament complexes.

Això és possible fent servir l'opció d'arrencada Instal·lació automàtica, també
anomenada auto per algunes arquitectures o mètodes d'arrencada. En aquesta
secció , auto no és paràmetre, es refereix a seleccionar aquesta opció
d'arrencada, i afegir els següents paràmetres d'arrencada en l'indicador
d'arrencada. Vegeu Secció 5.1.7, «Pantalla de benvinguda» per obtenir
informació sobre com afegir un paràmetre d'arrencada.

Per il·lustrar-ho, ací teniu alguns exemples que es poden utilitzar a
l'indicador de l'arrencada:

auto url=autoserver

Aquesta part dona per suposat que hi ha un servidor DHCP que posarà la màquina
en un punt on el autoserver es pot resoldre per DNS, pot ser després d'afegir
el domini local si s'ha proporcionat per DHCP. Si es fa a un lloc on el domini
és exemple.com, i té una configuració ben pensada, podria donar com a resultat
que el fitxer de configuració prèvia es trobe a http://autoserver.example.com/
d-i/bullseye/./preseed.cfg.

L'última part de l'adreça (d-i/bullseye/./preseed.cfg) s'agafa d'auto-install/
defaultroot. Per defecte açò inclou el directori bullseye per que permeti que
les futures versions donen el seu nom codi propi i permeti que la gent migre
d'una forma controlada. El /./ s'utilitza per indicar un origen al qual les
rutes subsegüents es referiran (per utilitzar en «preseed/include» i «preseed/
run»). Açò es pot utilitzar per construir uns guions més portables de forma que
una estructura completa de guions es pugui moure a una nova localització sense
trencar-la, per exemple copiant els fitxers a un llapis USB quan s'inicia des
d'un servidor web. En aquest exemple, si el fitxer de configuració prèvia dona
el valor /scripts/late_command.sh a preseed/run aleshores el fitxer es
descarregarà des de http://autoserver.example.com/d-i/bullseye/./scripts/
late_command.sh.

Si no hi ha cap servidor DHCP o infraestructura DNS, o si no voleu utilitzar la
ruta per defecte a preseed.cfg, encara podeu utilitzar una adreça explícita, i
si no utilitzeu l'element /./ es referirà a l'inici de la ruta (es a dir, el
tercer / a la URL). Ací hi ha un exemple que necessita d'un suport mínim de la
infraestructura local de la xarxa:

auto url=http://192.168.1.2/ruta/al/fitxer.configuració.previa

Aquesta és la manera per a què funcioni:

  • si la URL no conté un protocol, es suposa http,

  • si la secció «hostname» no té períodes, té el domini derivat del DHCP
    afegit, i

  • si no hi ha cap / després del «hostname», aleshores s'afegeix la ruta per
    defecte.

Addicionalment a especificar la url, podeu també donar els paràmetres que no
afecten directament el comportament del debian-installer, però que es poden
passar a traves dels guions donats utilitzant preseed/run al fitxer de
configuració prèvia carregat. En aquest moment, l'únic exemple d'aquest és
auto-install/classes, que té d'àlies classes. Açò es pot utilitzar així:

auto url=example.com classes=classe_A;classe_B

Les classes podrien per exemple indicar el tipus de sistema que s'instal·larà o
la localització a utilitzar.

Per suposat, es pot estendre aquest concepte, i si ho feu, és raonable que
s'utilitze l'espai de noms «auto-install» per fer-ho. Així que hauríeu de tenir
quelcom de l'estil auto-install/style que s'utilitza aleshores als vostres
guions. Si creieu que necessiteu fer-ho, digeu-ho a la llista de correu <
debian-boot@lists.debian.org> de forma que ens sigui possible evitar conflictes
a l'espai de noms, i pot ser afegir un àlies del paràmetre per a vosaltres.

L'etiqueta d'arrencada auto no està definida a tots els llocs. El mateix efecte
es pot aconseguir afegint dos paràmetres auto=true priority=critical a la línia
d'ordres del nucli. El paràmetre auto és un àlies d'auto-install/enable i
establir-lo a true posposa les preguntes sobre la configuració local («locale»)
i del teclat fins que es tingui oportunitat de fer la configuració prèvia
d'aquestes, mentre priority és un àlies per debconf/priority i donant-li el
valor critical evita que es faci qualsevol pregunta amb una prioritat més
baixa.

Les opcions addicionals que poden interessar mentre s'intenta automatitzar una
instal·lació que faci ús de DHCP són: interface=auto netcfg/dhcp_timeout=60 que
fa que la màquina agafe el primer NIC i espere a aconseguir una resposta a la
seva petició DHCP.

Suggeriment

Podeu trobar un exemple detallat de com utilitzar aquest entorn, incloent
guions i classes d'exemple, a la pàgina del seu desenvolupador. Els exemples
disponibles també mostren altres usos positius que es poden aconseguir
mitjançant l'ús creatiu del sistema de preconfiguració.

B.2.4. Àlies útils amb la configuració prèvia

Els àlies que hi ha a continuació poden ser útils quan s'utilitza la
configuració prèvia (mode auto). Adoneu-vos que es tracta d'àlies curts per a
noms de preguntes, i que sempre cal que especifiqueu també un valor: per
exemple, auto=true o interface=eth0.

priority    debconf/priority
fb          debian-installer/framebuffer
language    debian-installer/language
country     debian-installer/country
locale      debian-installer/locale
theme       debian-installer/theme
auto        auto-install/enable
classes     auto-install/classes
file        preseed/file
url         preseed/url
domain      netcfg/get_domain
hostname    netcfg/get_hostname
interface   netcfg/choose_interface
protocol    mirror/protocol
suite       mirror/suite
modules     anna/choose_modules
recommends  base-installer/install-recommends
tasks       tasksel:tasksel/first
desktop     tasksel:tasksel/desktop
dmraid      disk-detect/dmraid/enable
keymap      keyboard-configuration/xkb-keymap
preseed-md5 preseed/file/checksum

B.2.5. Exemples de configuració prèvia del menú d'arrencada

Aquí teniu alguns exemples de com el menú d'arrencada pot mostrar-se (us caldrà
adaptar-ho a les vostres necessitats ; també vegeu Secció 5.1.7, «Pantalla de
benvinguda»).

# Per posar el francès com a idioma i França com a país:
/install.amd/vmlinuz vga=788 initrd=/install.amd/gtk/initrd.gz language=fr country=FR --- quiet
# Per posar l'anglès com a idioma i Alemanya com a país, i usar la distribució de teclat alemanya:
/install.amd/vmlinuz vga=788 initrd=/install.amd/gtk/initrd.gz language=en country=DE locale=en_US.UTF-8 keymap=de --- quiet
# Per instal·lar l'escriptori MATE:
/install.amd/vmlinuz vga=788 initrd=/install.amd/gtk/initrd.gz desktop=mate-desktop --- quiet
# Per instal·lar la tasca de servidor web:
/install.amd/vmlinuz initrd=/install.amd/initrd.gz tasksel:tasksel/first=web-server ---

B.2.6. Utilitzar un servidor DHCP per especificar els fitxers de configuració
prèvia

També és possible fer servir DHCP per especificar un fitxer de configuració
prèvia i descarregar-lo des de la xarxa. DHCP permet especificar un nom de
fitxer. Normalment s'indiquen fitxers per a arrencar la màquina per xarxa, però
si es tracta d'una URL, aleshores els mitjans d'instal·lació que suporten
configuracions prèvies per xarxa es descarregaran el fitxer i l'utilitzaran per
a la configuració. A continuació teniu un exemple de com s'ha de configurar el
fitxer «dhcpd.conf» per a la versió 3 del servidor DHCP del ISC (el paquet
«isc-dhcp-server» a Debian).

if substring (option vendor-class-identifier, 0, 3) = "d-i" {
  filename "http://host/preseed.cfg";
}

Tingueu en compte que l'exemple anterior limita el fitxer a clients DHCP que
s'identifiquin com «d-i», i per tant no afectarà a la resta de clients DHCP,
només al instal·lador. També podeu indicar un text per a una màquina en
particular de manera que no afecti a la resta d'instal·lacions de la vostra
xarxa.

Una bona manera d'usar la configuració prèvia amb DHCP és fer-ho només per a
valors específics de la xarxa, com el servidor rèplica que es vol utilitzar.
Així totes les instal·lacions de la xarxa seleccionaran una rèplica adequada
automàticament, però la resta de la instal·lació es podrà fer interactivament.
Si voleu fer instal·lacions automatitzades completes de Debian fent servir
configuracions prèvies i DHCP haureu d'anar amb més cura.

B.3. Preparar un fitxer de configuració prèvia

El fitxer de configuració prèvia és en el format emprat per l'ordre 
debconf-set-selections. El format general d'una línia a un fitxer de
configuració prèvia és:

<propietari> <nom de la pregunta> <tipus de pregunta> <valor>

Cal que el fitxer comenci amb #_preseed_V1

Hi ha algunes regles que s'han de tenir en compte quan s'escriu un fitxer de
configuració prèvia.

  • Poseu tan sols un espai o un tabulador entre tipus i valor: qualsevol espai
    addicional s'interpretarà que pertany al valor.

  • Una línia es pot dividir en vàries afegint una barra invertida («\») com a
    caràcter per continuar. Un bon lloc per dividir una línia és després del
    nom de la pregunta; un lloc dolent és entre un tipus i un valor.

  • Les variables «debconf» («templates» o plantilles) utilitzades pel mateix
    instal·lador haurien de tenir «d-i» com a propietari; per donar valor a les
    variables utilitzades en el sistema instal·lat, s'ha d'utilitzar el nom del
    paquet que conté la plantilla «debconf» corresponent. Tan sols les
    variables diferents de «d-i» es propagaran a la base de dades «debconf» del
    sistema instal·lat.

  • La major part de les preguntes s'han d'omplir utilitzant els valors vàlids
    (en anglès) i no amb valors traduïts. Però, hi ha algunes preguntes (per
    exemple al partman) on s'han d'utilitzar valors traduïts.

  • Algunes preguntes agafen un codi com a valor en comptes del text anglès que
    es mostra a la instal·lació.

  • Començar amb #_preseed_V1

  • Un comentari consisteix en una línia que comença amb un caràcter de
    sostingut («#») i que arriba fins al final de la línia.

La manera més fàcil de preparar un fitxer de configuració prèvia és utilitzar
el fitxer d'exemple enllaçat a Secció B.4, «Continguts del fitxer de
configuració prèvia (per a bullseye)» com a base i continuar la feina des
d'allí.

Un mètode alternatiu és fer la instal·lació manual, i després, quan es
reinicie, utilitzar l'ordre debconf-get-selections del paquet debconf-utils per
bolcar la base de dades de «debconf» i la base de dades «cdebconf» de
l'instal·lador a un únic fitxer:

$ echo "#_preseed_V1" > file
$ debconf-get-selections --installer >> file
$ debconf-get-selections >> file

Per altra banda, un fitxer generat d'aquesta manera tindrà alguns elements que
no es poden configurar prèviament, i el fitxer d'exemple és el millor lloc per
on començar per la majoria d'usuaris.

Nota

Aquest mètode utilitza el fet de que, al final la instal·lació, la base de
dades «cdebconf» de l'instal·lador es guarda al sistema instal·lat a /var/log/
installer/cdebconf. Però, com que la base de dades pot contenir informació
sensible, aquests fitxers tan sols els pot llegir el superusuari.

El directori /var/log/installer i tots els seus fitxers s'esborraran del vostre
sistema si purgueu el paquet installation-report.

Per comprovar els possibles valors per a les preguntes, podeu utilitzar l'ordre
nano per examinar els fitxers /var/lib/cdebconf mentre la instal·lació s'està
realitzant. Vegeu templates.dat per a les plantilles i questions.dat per als
valors assignats a les variables.

Per comprovar si el format del vostre fitxer de configuració prèvia és vàlid
abans de fer una instal·lació, podeu utilitzar l'ordre debconf-set-selections
-c preseed.cfg.

B.4. Continguts del fitxer de configuració prèvia (per a bullseye)

Els fragments de configuració emprats a aquest apèndix també són a l'abast com
a exemple de fitxer de configuració prèvia a ../example-preseed.txt.

Tingueu en compte que aquest exemple es basa en una instal·lació per a una
arquitectura Intel x86. Si l'arquitectura és diferent, alguns dels exemples
(com la selecció del teclat i la instal·lació del carregador) poden no ser
adients i hauran de substituir-se per paràmetres de configuració adequats a
l'arquitectura en qüestió.

Els detalls del funcionament dels components de l'instal·lador Debian estan a
la Secció 6.3, «Utilització dels elements individualment».

B.4.1. Localització

En una instal·lació normal, les preguntes sobre la localització es fan primer,
de manera que aquestes valors només es poden configurar prèviament mitjançant
les mètodes dels paràmetres d'arrencada d'«initrd» o del nucli. El mode
automàtic (Secció B.2.3, «Mode auto») inclou la configuració de auto-install/
enable=true (normalment mitjançant l'àlies auto de la configuració prèvia).
Això retarda la presentació de les preguntes sobre localització, de manera que
es poden configurar prèviament mitjançant qualsevol mètode.

Es pot fer servir el «locale» per especificar tant la llengua com el país; pot
estar format per qualsevol combinació d'una llengua disponible al
debian-installer i un país reconegut. Si la combinació no és un «locale» vàlid,
l'instal·lador seleccionarà automàticament un «locale» vàlid amb l'idioma
triat. Per especificar el «locale» com un paràmetre d'arrencada, empreu locale=
ca_ES.

Tot i que aquest mètode és molt fàcil d'emprar, no permet la configuració
prèvia de totes les combinacions possibles d'idioma, país i «locale»^[22]. Per
tant, podeu establir un configuració prèvia individual per a cada valor. També
podeu especificar l'idioma i el país com a paràmetres d'arrencada.

# La configuració prèvia només del «locale» estableix idioma, país i «locale».
d-i debian-installer/locale string ca_ES

# També podeu configurar-los individualment per a major flexibilitat.
#d-i debian-installer/language string ca
#d-i debian-installer/country string ES
#d-i debian-installer/locale string ca_AD.UTF-8
# Podeu especificar altres «locales» a generar.
#d-i localechooser/supported-locales multiselect en_US.UTF-8, nl_NL.UTF-8

La configuració del teclat consisteix en la selecció del mapa de tecles i (per
a teclats no llatins) una tecla per canviar entre el mapa de tecles no llati i
el mapa de tecles US. Només les variants bàsiques estan disponibles en la
instal·lació. Les variants avançades només estan disponibles en el sistema
instal·lat, mitjançant l'ordre dpkg-reconfigure keyboard-configuration.

# Selecció del teclat.
d-i keyboard-configuration/xkb-keymap select es
# d-i keyboard-configuration/toggle select No toggling

Per a ometre la configuració prèvia del teclat, empreu keymap amb skip-config.
Això farà que romanga actiu el mapa de teclat del nucli.

B.4.2. Configuració de la xarxa

Sens dubte, la configuració prèvia de la xarxa no funcionarà si carregueu el
fitxer de configuració des de la xarxa. Però va molt bé si esteu carregant-lo
des d'un disc òptic o d'una memòria USB. Si ho feu des de la xarxa, podeu
indicar-li al nucli els paràmetres d'arrencada de configuració de la xarxa.

Si necessiteu seleccionar una interfície en concret per tal d'arrencar per
xarxa abans de carregar un fitxer de configuració prèvia des de la xarxa, useu
un paràmetre d'arrencada com interface=eth1.

Malgrat que normalment la configuració prèvia de la xarxa no es possible quan
s'està utilitzant una configuració prèvia (utilitzant «preseed/url»), en aquest
cas podeu utilitzar el procediment per evitar-ho, per exemple si voleu
configurar una adreça estàtica per a la interfície de xarxa. Aquest procediment
és per forçar que la configuració de xarxa s'execute altra vegada després de
haver carregat el fitxer de preconfiguració escrivint un guió «preseed/run» amb
les ordres següents:

kill-all-dhcp; netcfg

Les variables de «debconf» següents són rellevants per a configuracions de
xarxa.

# Inhabilita completament la configuració de la xarxa. Açò és útil per a
# instal·lacions de CD-ROM en dispositius sense connexió on les preguntes
# sobre la xarxa, els avisos i els temps d'espera resulten molests.
#d-i netcfg/enable boolean false

# Si és possible, el netcfg escollirà una interfície que tinga un enllaç.
# El següent evita que es mostre una llista si hi ha més d'una interfície.
d-i netcfg/choose_interface select auto

# Si voleu seleccionar una interfície concreta:
#d-i netcfg/choose_interface select eth1

# Per establir un temps d'espera d'enllaç diferent (el valor predeterminat és
# 3 segons). Els valors s'interpreten com a segons.
#d-i netcfg/link_wait_timeout string 10

# Si teniu un servidor dhcp lent i l'instal·lador finalitza l'espera, això
# us pot ser d'utilitat.
#d-i netcfg/dhcp_timeout string 60
#d-i netcfg/dhcpv6_timeout string 60

# Per defecte, la configuració de la xarxa es fa automàticament.
# Si preferiu configurar la xarxa a mà, tragueu-li el comentari a aquesta
# línia i la configuració de la xarxa estàtica que hi ha a continuació.
#d-i netcfg/disable_autoconfig boolean true

# Si voleu que el fitxer de configuració prèvia funcioni en sistemes amb i
# sense servidor dhcp, tragueu-li el comentari a aquestes línies i la
# configuració de la xarxa estàtica que hi ha a continuació.
#d-i netcfg/dhcp_failed note
#d-i netcfg/dhcp_options select Configure network manually

# Configuració de la xarxa estàtica.
#
# IPv4 example
#d-i netcfg/get_ipaddress string 192.168.1.42
#d-i netcfg/get_netmask string 255.255.255.0
#d-i netcfg/get_gateway string 192.168.1.1
#d-i netcfg/get_nameservers string 192.168.1.1
#d-i netcfg/confirm_static boolean true
#
# IPv6 example
#d-i netcfg/get_ipaddress string fc00::2
#d-i netcfg/get_netmask string ffff:ffff:ffff:ffff::
#d-i netcfg/get_gateway string fc00::1
#d-i netcfg/get_nameservers string fc00::1
#d-i netcfg/confirm_static boolean true

# Qualsevol nom d'ordinador principal i de domini assignats amb el dhcp tenen
# preferència sobre els valors indicats aquí. Tanmateix, establir aquests
# encara evitarà que es mostren qüestions fins i tot si els valors provenen
# del dhcp.
d-i netcfg/get_hostname string unassigned-hostname
d-i netcfg/get_domain string unassigned-domain

# Si voleu forçar un nom de màquina, independentment de qualsevol dels retornats
# pel servidor DHCP o l'entrada DNS inversa per a la IP, tragueu-li el comentari
# i ajustau la següent línia.
#d-i netcfg/hostname string somehost

# Per deshabilitar el molest diàleg sobre la clau WEP.
d-i netcfg/wireless_wep string
# El fastigós nom del servidor dhcp que alguns ISP empren com a contrasenya.
#d-i netcfg/dhcp_hostname string radish

# Si necessiteu microprogramari no lliure (non-free) per fer funcionar la
# xarxa o altres components, podeu configurar l'instal·lador perquè intenti
# carregar-lo sempre, sense preguntar-ho. O es pot canviar a «false» per
# desactivar la pregunta.
#d-i hw-detect/load_firmware boolean true

Fixeu-vos que netcfg determinarà automàticament la màscara de la xarxa si no
heu configurat netcfg/get_netmask prèviament. En aquest cas, en instal·lacions
automàtiques, s'ha de marcar la variable com a seen. De forma similar, netcfg
triarà una adreça apropiada si no definiu netcfg/get_gateway. Excepcionalment
podeu definir netcfg/get_gateway com a «none» per indicar que no s'hauria
d'utilitzar cap passarel·la.

B.4.3. La consola de xarxa

# Feu servir els paràmetres següents si voleu emprar el component
# «network-console» per a instal·lar remotament mitjançant SSH. Açò només té
# sentit si voleu continuar amb la instal·lació de forma manual.
#d-i anna/choose_modules string network-console
#d-i network-console/authorized_keys_url string http://10.0.0.1/openssh-key
#d-i network-console/password password r00tme
#d-i network-console/password-again password r00tme

Informació addicional relativa a la consola de xarxa la trobareu a
Secció 6.3.10, «Instal·lació a través de la consola de xarxa».

B.4.4. Configuració del servidor rèplica

Segons el mètode d'instal·lació, un servidor rèplica es pot emprar per a
descarregar components addicionals de l'instal·lador, per instal·lar el sistema
base, i per a configurar el fitxer /etc/apt/sources.list del sistema
instal·lat.

El paràmetre mirror/suite determina el conjunt de programes del sistema.

El paràmetre mirror/udeb/suite determina el conjunt de components addicionals
que emprarà l'instal·lador. Això només és útil si els components es
descarreguen realment des de la xarxa i han de correspondre amb el conjunt
d'eines emprat per construir l'«initrd» per al mètode d'instal·lació emprat en
la instal·lació. Normalment l'instal·lador escollirà automàticament el valor
correcte i no hauria de ser necessari establir aquest paràmetre.

# Protocol del mirall:
# Si seleccioneu ftp, no cal definir la cadena mirror/country.
# Valor per defecte pel protocol del mirall: http.
#d-i mirror/protocol string ftp
d-i mirror/country string manual
d-i mirror/http/hostname string ftp.es.debian.org
d-i mirror/http/directory string /debian
d-i mirror/http/proxy string

# Conjunt de programes que s'instal·larà.
#d-i mirror/suite string testing
# Conjunt de programes que s'emprarà per a carregar components de l'instal·lador
# (opcional).
#d-i mirror/udeb/suite string testing

B.4.5. Configuració de comptes

Es poden configurar prèviament el compte del superusuari i el nom i la
contrasenya d'un usuari ordinari. Les contrasenyes es poden indicar bé de
manera explícita o bé en forma de resums MD5.

Avís

Sigueu conscients que la configuració prèvia de contrasenyes no és completament
segura ja que qualsevol persona amb accés al fitxer de configuració prèvia les
podrà saber. L'emmagatzematge de contrasenyes amb una funció resum es considera
segura a menys que es faci servir un algorisme feble com DES o MD5, que
permeten atacs per força bruta. Els algorismes de funció resum recomanats son
SHA-256 i SHA512.

# No generar el compte de superusuari (l'usuari normal haurà de ser capaç
# d'utilitzar «sudo»).
#d-i passwd/root-login boolean false
# De forma alternativa, per no generar el compte d'usuari normal.
#d-i passwd/make-user boolean false

# Contrasenya de superusuari, ben explícita
#d-i passwd/root-password password r00tme
#d-i passwd/root-password-again password r00tme
# o bé xifrada fent servir una funció resum crypt(3).
#d-i passwd/root-password-crypted password [crypt(3) hash]

# Per generar un compte d'usuari normal.
#d-i passwd/user-fullname string Usuari de Debian
#d-i passwd/username string debian
# Contrasenya de l'usuari normal, bé explícita
#d-i passwd/user-password password insecure
#d-i passwd/user-password-again password insecure
# o bé xifrada fent servir un capolament crypt(3).
#d-i passwd/user-password-crypted password [crypt(3) hash]
# Genera el primer usuari amb el UID donat en comptes del predeterminat.
#d-i passwd/user-uid string 1010

# El compte d'usuari s'afegirà a algun dels grups estàndard inicials. Per
# a substituir-ho, utilitzeu açò.
#d-i passwd/user-default-groups string audio cdrom video

Les variables passwd/root-password-crypted i passwd/user-password-crypted també
es poden configurar prèviament posant «!» com a valor. En aquest cas, el compte
corresponent es deshabilitarà. Això pot ser convenient per al compte de
superusuari en cas que, evidentment, s'haja establert un altre mètode per
permetre les tasques d'administració o per entrar com a superusuari (per
exemple fent servir l'autenticació de la clau SSH o el sudo).

La següent ordre (disponible al paquet whois) es pot fer servir per generar una
contrasenya SHA-512 basada en la funció resum «crypt(3)»:

mkpasswd -m sha-512

B.4.6. Configuració del rellotge i del fus horari

# Controla si el rellotge està o no fixat a UTC.
d-i clock-setup/utc boolean true

# Podeu donar-li qualsevol valor vàlid per $TZ; vegeu el contingut de
# /usr/share/zoneinfo/ per als valors vàlids.
d-i time/zone string US/Eastern

# Controla si s'utilitza NTP per posar en hora el rellotge a la instal·lació.
d-i clock-setup/ntp boolean true
# Quin servidor d'NTP s'utilitzarà. El que hi ha per defecte quasi sempre és bo.
#d-i clock-setup/ntp-server string ntp.example.com

B.4.7. Fer particions

La configuració prèvia per fer particions de discs durs està limitada per les
possibilitats oferides pel partman-auto. Podeu o bé partir l'espai lliure
existent al disc o bé el disc sencer. La distribució del disc es pot determinar
fent servir una recepta definida prèviament, una de personalitzada procedent
d'un fitxer recepta, o una inclosa dins els fitxers de configuració prèvia.

Es poden generar configuracions prèvies amb RAID, LVM i xifrat, però no amb
tota la flexibilitat possible de creació de particions que ofereix una
instal·lació no preconfigurada.

Els exemples de sota només proporcionen informació bàsica de l'ús de receptes.
Per a una informació detallada consulteu els fitxers partman-auto-recipe.txt i
partman-auto-raid-recipe.txt, inclosos al paquet debian-installer. Tots dos
fitxers també es troben disponibles al repositori de fonts de debian-installer.
Adoneu-vos que la funcionalitat disponible pot canviar d'una versió a una
altra.

Avís

La identificació dels discs depèn de l'ordre en què es carreguen llurs
controladors. Si el sistema té més d'un disc, assegureu-vos que se seleccione
el correcte abans d'utilitzar la configuració prèvia.

B.4.7.1. Exemple de particions

# Si el sistema té espai lliure podeu fer la partició només d'aquest espai.
# Això només passarà si «partman-auto/method» no està habilitat (a sota).
#d-i partman-auto/init_automatically_partition select biggest_free

# També podeu especificar el disc que es partirà. Si el sistema només té
# un disc, l'instal·lador l'emprarà per defecte, altrament cal que indiqueu
# el dispositiu en el format tradicional, no en el de «devfs» (per exemple,
# «/dev/sda» en lloc de «/dev/discs/disc0/disc»).
# Per exemple, per emprar el primer disc SCSI/SATA:
#d-i partman-auto/disk string /dev/sda
# Addicionalment, haureu d'especificar el mètode a utilitzar.
# Els mètodes disponibles actualment són:
# - regular: empra el tipus de partició típics de l'arquitectura
# - lvm:     empra LVM per a partir el disc
# - crypto:  empra LVM a dins d'una partició xifrada
d-i partman-auto/method string lvm

# Podeu definit la quantitat d'espai que s'usarà per al grup del volum
# LVM. Pot ser o bé la mida amb la unitat (p.ex. 20 GB), un percentatge de
# l'espai lliure o la paraula clau 'max'.
d-i partman-auto-lvm/guided_size string max

# Si un dels discs que s'ha de partir automàticament conté una
# configuració LVM antiga, l'usuari rebrà un avís. Això es pot
# desactivar amb una configuració prèvia...
d-i partman-lvm/device_remove_lvm boolean true
# El mateix és aplicable a RAID per programari ja existent:
d-i partman-md/device_remove_md boolean true
# I el mateix per a la confirmació d'escriptura a particions «lvm».
d-i partman-lvm/confirm boolean true
d-i partman-lvm/confirm_nooverwrite boolean true

# Podeu triar un dels tres tipus de partició predefinits:
# - atomic: tots els fitxers en una partició
# - home:   partició «/home» separada
# - multi:  particions «/home», «/usr», «/var» i «/tmp» separades
d-i partman-auto/choose_recipe select atomic

# O indicar-ne una pròpia...
# Si podeu obtenir un fitxer de recepta per a l'entorn de l'instal·lador,
# podeu simplement apuntar-hi.
#d-i partman-auto/expert_recipe_file string /hd-media/recipe

# Si no, podeu posar una recepta sencera en una línia (lògica). Aquest exemple
# genera una petita partició «/boot», un espai d'intercanvi adient, i empra la
# resta de l'espai per a la partició arrel:
#d-i partman-auto/expert_recipe string                         \
#      boot-root ::                                            \
#              40 50 100 ext3                                  \
#                      $primary{ } $bootable{ }                \
#                      method{ format } format{ }              \
#                      use_filesystem{ } filesystem{ ext3 }    \
#                      mountpoint{ /boot }                     \
#              .                                               \
#              500 10000 1000000000 ext3                       \
#                      method{ format } format{ }              \
#                      use_filesystem{ } filesystem{ ext3 }    \
#                      mountpoint{ / }                         \
#              .                                               \
#              64 512 300% linux-swap                          \
#                      method{ swap } format{ }                \
#              .

# El format complet de les receptes es troba documentat al fitxer
# «partman-auto-recipe.txt» inclós al paquet «debian-installer» i disponible
# al repositori de fonts de l'instal·lador. També s'hi documenta com
# especificar paràmetres com etiquetes per als sistemes de fitxers, noms
# per als grups de volum i quins dispositius incloure en un grup de volum.

## Particionar per a EFI
# Si el vostre sistema necessita una partició EFI podeu afegir quelcom semblant
# a això a la recepta anterior, com el primer element de la recepta:
#               538 538 1075 free                              \
#                      $iflabel{ gpt }                         \
#                      $reusemethod{ }                         \
#                      method{ efi }                           \
#                      format{ }                               \
#               .                                              \
#
# El fragment anterior és per a l'arquitectura amd64; els detalls poden ser
# diferents en altres arquitectures. El paquet 'partman-auto' del repositori
# font del D-I pot tenir algun exemple a seguir.

# Això fa que el «partman» particioni automàticament sense demanar confirmació,
# amb la condició que haguéssiu dit d'utilitzar un dels mètodes de dalt.
d-i partman-partitioning/confirm_write_new_label boolean true
d-i partman/choose_partition select finish
d-i partman/confirm boolean true
d-i partman/confirm_nooverwrite boolean true

# Forçar l'engegada UEFI (la 'compatibilitat BIOS' es perdrà). Per defecte: false.
#d-i partman-efi/non_efi_system boolean true
# Assegurar que la taula de particions és GPT - això és requerit per EFI
#d-i partman-partitioning/choose_label select gpt
#d-i partman-partitioning/default_label string gpt

# Quan s'habilita el xifrat de disc, ometi esborrar les particions per endavant.
#d-i partman-auto-crypto/erase_disks boolean false

B.4.7.2. Fer particions amb RAID

També podeu utilitzar la configuració prèvia per configurar les particions a
una matriu RAID per programari. Els nivells de RAID suportats són 0, 1, 5, 6 i
10, creant matrius degradades i especificant els dispositius de reemplaçament.

Si esteu fent ús de RAID 1, podeu fer la configuració prèvia de «grub» per
instal·lar tots els dispositius que s'utilitzen a la matriu; vegeu
Secció B.4.11, «Instal·lació del carregador d'arrencada».

Avís

És molt fàcil equivocar-se en aquest tipus de partició automatitzada. A més es
tracta d'una funcionalitat que no rep molta atenció per part dels
desenvolupadors del debian-installer. La responsabilitat d'aconseguir les
receptes correctes (de forma que tinguin sentit i no entren en conflicte) recau
en l'usuari. Comproveu el fitxer /var/log/syslog si teniu algun problema.

# A «method» se li hauria de donar el valor "raid".
#d-i partman-auto/method string raid
# Especifica quins discs s'han de partir. Tots acabaran amb la
# mateixa disposició, per tant tan sols funcionarà si els discs tenen
# la mateixa mida.
#d-i partman-auto/disk string /dev/sda /dev/sdb

# A continuació necessiteu especificar quines particions físiques
# s'utilitzaran.
#d-i partman-auto/expert_recipe string \
#      multiraid ::                                         \
#              1000 5000 4000 raid                          \
#                      $primary{ } method{ raid }           \
#              .                                            \
#              64 512 300% raid                             \
#                      method{ raid }                       \
#              .                                            \
#              500 10000 1000000000 raid                    \
#                      method{ raid }                       \
#              .

# Per acabar necessiteu especificar com s'utilitzaran les particions
# prèviament definides a la configuració del RAID. Recordeu d'utilitzar
# els números de partició correctes per particions lògiques. S'admeten
# els nivells RAID 0, 1, 5, 6 i 10, separant-ne els dispositius amb «#».
# Els paràmetres són:
# <raidtype> <devcount> <sparecount> <fstype> <mountpoint> \
#          <devices> <sparedevices>

#d-i partman-auto-raid/recipe string \
#    1 2 0 ext3 /                    \
#          /dev/sda1#/dev/sdb1       \
#    .                               \
#    1 2 0 swap -                    \
#          /dev/sda5#/dev/sdb5       \
#    .                               \
#    0 2 0 ext3 /home                \
#          /dev/sda6#/dev/sdb6       \
#    .

# Per a més informació vegeu el fitxer «partman-auto-raid-recipe.txt»
# inclós al paquet «debian-installer» i disponible al repositori de fonts
# de l'instal·lador.

# Açò fa que el «partman» particioni automàticament sense demanar confirmació.
d-i partman-md/confirm boolean true
d-i partman-partitioning/confirm_write_new_label boolean true
d-i partman/choose_partition select finish
d-i partman/confirm boolean true
d-i partman/confirm_nooverwrite boolean true

B.4.7.3. Com controlar el muntatge de les particions

Normalment, els sistemes de fitxers es munten emprant un identificador
universalment únic (UUID) com a clau, el que permet que siguen muntats
correctament encara que canvien els seus noms de dispositiu. Els UUID són
llargs i difícils de llegir, així que l'instal·lador vos permet muntar els
sistemes de fitxers basant-se en noms de dispositiu tradicionals o en etiquetes
que els assigneu. Si demaneu a l'instal·lador que munte per etiquetes, els
sistemes de fitxers que no en tinguen seran muntats pel seu UUID.

Els dispositius amb noms estables, com els volums lògics LVM, continuaran
emprant llurs noms tradicionals en lloc de l'UUID.

Avís

Els noms tradicionals de dispositiu poden canviar amb l'ordre en què el nucli
descobreix els dispositius en arrencar, causant que es munte el sistema de
fitxers que no toca. De forma similar, es possible que les etiquetes
coincidesquen en connectar un disc nou o una unitat USB, i aleshores el
comportament del vostre sistema en arrencar serà aleatori.

# Per defecte es munta per UUID, però també podeu escollir «traditional»
# per a emprar noms tradicionals de dispositiu, o «label» per a provar amb
# les etiquetes dels sistemes de fitxers abans de recórrer a llurs UUID.
#d-i partman/mount_style select uuid

B.4.8. Instal·lació del sistema base

No hi ha moltes coses que es puguin configurar prèviament en aquesta etapa de
la instal·lació. Les úniques preguntes que hi ha fan referència a la
instal·lació del nucli.

# Configura APT per a no instal·lar per defecte els paquets recomanats.
# L'ús d'aquesta opció pot resultar en un sistema incomplet i només ha de
# ser emprada per usuaris molt experimentats.
#d-i base-installer/install-recommends boolean false

# El (meta) paquet de la imatge del nucli a instal·lar; es pot utilitzar
# "none" si no es vol instal·lar cap nucli.
#d-i base-installer/kernel/image string linux-image-686

B.4.9. Configuració de l'«apt»

La configuració del fitxer /etc/apt/sources.list i les opcions bàsiques de
configuració estan completament automatitzades segons el mètode d'instal·lació
emprat i les respostes a les preguntes prèvies. Opcionalment podeu afegir
altres repositoris (locals).

# Choose, if you want to scan additional installation media
# (default: false).
d-i apt-setup/cdrom/set-first boolean false
# You can choose to install non-free and contrib software.
#d-i apt-setup/non-free boolean true
#d-i apt-setup/contrib boolean true
# Uncomment the following line, if you don't want to have the sources.list
# entry for a DVD/BD installation image active in the installed system
# (entries for netinst or CD images will be disabled anyway, regardless of
# this setting).
#d-i apt-setup/disable-cdrom-entries boolean true
# Uncomment this if you don't want to use a network mirror.
#d-i apt-setup/use_mirror boolean false
# Select which update services to use; define the mirrors to be used.
# Values shown below are the normal defaults.
#d-i apt-setup/services-select multiselect security, updates
#d-i apt-setup/security_host string security.debian.org

# Additional repositories, local[0-9] available
#d-i apt-setup/local0/repository string \
#       http://local.server/debian stable main
#d-i apt-setup/local0/comment string local server
# Enable deb-src lines
#d-i apt-setup/local0/source boolean true
# URL to the public key of the local repository; you must provide a key or
# apt will complain about the unauthenticated repository and so the
# sources.list line will be left commented out.
#d-i apt-setup/local0/key string http://local.server/key
# If the provided key file ends in ".asc" the key file needs to be an
# ASCII-armoured PGP key, if it ends in ".gpg" it needs to use the
# "GPG key public keyring" format, the "keybox database" format is
# currently not supported.

# By default the installer requires that repositories be authenticated
# using a known gpg key. This setting can be used to disable that
# authentication. Warning: Insecure, not recommended.
#d-i debian-installer/allow_unauthenticated boolean true

# Uncomment this to add multiarch configuration for i386
#d-i apt-setup/multiarch string i386


B.4.10. Selecció de paquets

Podeu instal·lar qualsevol combinació de tasques que hi haja a l'abast. En
aquest moment les tasques que hi ha són:

  • standard (eines estàndard)

  • desktop (escriptori gràfic)

  • gnome-desktop (escriptori Gnome)

  • xfce-desktop (escriptori XFCE)

  • kde-desktop (escriptori KDE Plasma)

  • cinnamon-desktop (escriptori Cinnamon)

  • mate-desktop (escriptori MATE)

  • lxde-desktop (escriptori LXDE)

  • web-server (servidor web)

  • ssh-server (SSH server)

Podeu també no instal·lar cap tasca i forçar la instal·lació d'un conjunt de
paquets d'alguna altra manera. És recomanable incloure sempre la tasca standard
.

O en el cas que no vulgueu que es mostri el diàleg del tasksel, afegiu pkgsel/
run_tasksel al «preseed» (en aquest cas, no s'instal·larà cap paquet via
tasksel).

Si voleu instal·lar alguns paquets de forma individual a més a més dels
instal·lats per tasques, podeu utilitzar el paràmetre pkgsel/include. El valor
d'aquest paràmetre pot ser una llista de paquets separats o bé per comes o bé
per espais, que el podeu utilitzar de forma senzilla a la línia d'ordres del
nucli.

#tasksel tasksel/first multiselect standard, web-server, kde-desktop

# O opteu perquè no es mostri el diàleg del tasksel (i que no
# s'instal·li cap paquet):
#d-i pkgsel/run_tasksel boolean false

# Paquets addicionals per instal·lar individualment
#d-i pkgsel/include string openssh-server build-essential
# Actualització dels paquets després del debootstrap.
# Valors permesos: none, safe-upgrade, full-upgrade
#d-i pkgsel/upgrade select none

# Podeu triar si el vostre sistema enviarà informes sobre el programari
# que heu instal·lat, i els programes que feu servir. Per defecte no
# s'envia res, però fer-ho ajuda al projecte a determinar quins programes
# són els més populars i que s'haurien d'incloure al primer CD/DVD.
#popularity-contest popularity-contest/participate boolean false

B.4.11. Instal·lació del carregador d'arrencada

# El Grub és el carregador predeterminat (per a x86). 

# Això, que és força segur de fer, fa que el «grub» s'instal·li automàticament a
# la partició UEFI/sector d'arrencada si no es detecta cap altre sistema
# operatiu a la màquina.
d-i grub-installer/only_debian boolean true

# Aquesta fa que «grub-installer» instal·li a la partició UEFI/sector
# d'arrencada, si també troba algun altre SO, que és menys segur, ja que
# podria no ser capaç d'arrencar l'altre SO.
d-i grub-installer/with_other_os boolean true

# Donada la notable intencionalitat de les memòries USB, la localització de
# la unitat principal no es pot determinar amb seguretat en general, per això
# cal especificar el següent:
#d-i grub-installer/bootdev  string /dev/sda
# Per instal·lar en el primer dispositiu (assumint que no és una memòria USB):
#d-i grub-installer/bootdev  string default

# Com alternativa, si voleu instal·lar-lo a un lloc diferent de la partició
# UEFI/sector d'arrencada, elimineu el comentari i editeu aquestes línies:
#d-i grub-installer/only_debian boolean false
#d-i grub-installer/with_other_os boolean false
#d-i grub-installer/bootdev  string (hd0,1)
# Per instal·lar el «grub» a més d'un disc:
#d-i grub-installer/bootdev  string (hd0,1) (hd1,1) (hd2,1)

# Contrasenya opcional pel «grub», en text pla
#d-i grub-installer/password password r00tme
#d-i grub-installer/password-again password r00tme
# o utilitzant xifrat amb una funció resum MD5, vegeu «grub-md5-crypt(8)».
#d-i grub-installer/password-crypted password [MD5 hash]

# Empreu l'opció següent per a afegir paràmetres d'arrencada addicionals
# per al sistema instal·lat (si l'instal·lador del carregador els admet).
# Nota: s'hi afegiran automàticament les opcions passades a l'instal·lador.
#d-i debian-installer/add-kernel-opts string nousb

Un resum MD5 per a una contrasenya de grub es pot generar utilitzant 
grub-md5-crypt, o utilitzant l'exemple que hi ha a Secció B.4.5, «Configuració
de comptes».

B.4.12. Finalització de la instal·lació

# Durant la instal·lació des de consola sèrie, les consoles virtuals habituals
# (VT1-VT6) normalment queden inhabilitades a «/etc/inittab». Descomenteu la
# línia següent per evitar-ho.
#d-i finish-install/keep-consoles boolean true

# Evita el darrer missatge de la instal·lació que apareix indicant-ne l'estat
# complet.
d-i finish-install/reboot_in_progress note

# Això evita que l'instal·lador expulse el CD quan es torna a arrencar, la
# qual cosa és útil en algunes situacions.
#d-i cdrom-detect/eject boolean false

# Açò farà que l'instal·lador aturi la màquina quan acabe, però que no es
# reinicie al sistema instal·lat.
#d-i debian-installer/exit/halt boolean true
# Això apagarà la màquina del tot en comptes de només aturar-la.
#d-i debian-installer/exit/poweroff boolean true

B.4.13. Configuració prèvia d'altres paquets

# Segons el programari instal·lat, o si les coses van malament durant el
# procés d'instal·lació, és possible rebre preguntes sobre altres qüestions.
# També podeu fer-ne una configuració prèvia. Per obtenir una llista de
# totes les preguntes que es poden fer durant la instal·lació, feu una
# instal·lació, i després executeu aquestes ordres:
#   debconf-get-selections --installer > file
#   debconf-get-selections >> file

B.5. Opcions avançades

B.5.1. Execució d'ordres personalitzades a la instal·lació

Una opció molt potent i flexible oferta per les eines de preconfiguració és la
possibilitat d'executar ordres o guions en alguns punts de la instal·lació.

Quan el sistema d'arxius del sistema objectiu està muntat, està disponible a /
target. Si s'ha fet servir un CD d'instal·lació, quan està muntat està
disponible a /cdrom.

# Necessàriament, la configuració prèvia de l'instal·lador del Debian no pot
# ser segura. No hi ha res que comprove els intents de sobreeiximent de
# memòria intermèdia o d'altres abusos sobre els valors d'un fitxer de
# configuració prèvia com el present. Feu servir només aquests fitxers si
# provenen de llocs de confiança! Per raons de control, i perquè és útil
# en general, aquí teniu una manera d'executar de forma automàtica
# qualsevol ordre de l'interpret que vulgueu dins l'instal·lador.

# Aquesta primera ordre s'executa tan prompte com es pot, tot just després
# de llegir el fitxer de configuració prèvia.
#d-i preseed/early_command string anna-install some-udeb
# Aquesta ordre s'executa just abans d'iniciar l'eina de fer particions.
# Pot ser útil per a aplicar dinàmicament una configuració prèvia de l'eina
# que depenga de l'estat dels discs (que potser no estiguen encara visibles
# en executar «preseed/early_command»).
#d-i partman/early_command \
#       string debconf-set partman-auto/disk "$(list-devices disk | head -n1)"
# Aquesta s'executa just abans que finalitzi la instal·lació, però
# quan encara es pot usar un directori de destí «/target». Podeu fer «chroot»
# sobre «/target» i usar-lo directament, o fer servir les ordres «apt-install»
# i «in-target» per instal·lar paquets fàcilment i executar ordres al
# sistema de destinació.
#d-i preseed/late_command string apt-install zsh; in-target chsh -s /bin/zsh

B.5.2. Ús de la configuració prèvia per canviar els valors predeterminats

És pot utilitzar la configuració prèvia per canviar la resposta predeterminada
a una pregunta, però que encara es faci la pregunta. Per fer açò l'indicador
seen s'ha de posar a «false» després de donar-li el valor a una pregunta.

d-i foo/bar string value
d-i foo/bar seen false

Podeu assolir el mateix efecte per a totes les preguntes si establiu el
paràmetre preseed/interactive=true a l'indicador d'arrencada. També pot ser
útil per provar o depurar el vostre fitxer de preconfiguració.

Adoneu-vos que el propietari «d-i» només s'ha d'emprar per a variables a usar
pel propi instal·lador. Per a variables corresponents als paquets instal·lats
al sistema de destinació cal que empreu el nom del paquet. Vegeu la nota al peu
de Secció B.2.2, «Utilització dels paràmetres d'arrencada per complementar la
configuració prèvia».

Si esteu preconfigurant mitjançant els paràmetres d'arrencada, podeu fer que
l'instal·lador pregunti una qüestió en concret utilitzant l'operador «?=», p.
ex. foo/bar?=valor (o propietari:foo/bar?=valor). Tingueu en compte que això
només afectarà els paràmetres corresponents a les preguntes que realment es
mostren durant el procés d'instal·lació, i no als paràmetres «interns».

Per a més informació sobre la depuració, feu servir el paràmetre d'arrencada
DEBCONF_DEBUG=5. D'aquesta manera, debconf imprimirà més detalls sobre la
configuració actual de cada variable i sobre el seu progrés mitjançant els
guions d'instal·lació de cada paquet.

B.5.3. Càrrega en cadena de fitxers de configuració prèvia

En un fitxer de configuració prèvia se'n poden incloure d'altres. Qualsevol
paràmetre d'aquests fitxers prevaldrà sobre els dels fitxers carregats primer.
Això fa possible, per exemple, indicar la configuració general de la xarxa a un
fitxer i els paràmetres més específics a altres.

# Es pot incloure més d'un fitxer, separat per espais; es carregaran tots.
# Els fitxers inclosos poden tenir directrius de configuració prèvia pròpies
# o bé incloure fitxers amb d'altres. Tingueu en compte que si els noms de
# fitxer són relatius, s'agafen del mateix directori que el del fitxer que
# els inclou.
#d-i preseed/include string x.cfg

# L'instal·lador pot comprovar sumes de verificació de fitxers de configuració
# prèvia abans de fer-los servir. Actualment sols es pot emprar «md5sums»,
# llistau els «md5sums» en el mateix ordre que la llista de fitxers que s'ha
# d'incloure.
#d-i preseed/include/checksum string 5da499872becccfeda2c4872f9171c3d

# Més flexible que això és el següent, que executa una ordre al intèrpret i,
# si s'obté algun nom de fitxer de configuració prèvia, s'hi inclou.
#d-i preseed/include_command \
#      string if [ "`hostname`" = bob ]; then echo bob.cfg; fi

# El més flexible de tots, açò descarrega un programa i l'executa.
# El programa pot utilitzar ordres com «debconf-set» per manipular la base
# de dades «debconf». Es pot llistar més d'un guió, separat per espais.
# Adoneu-vos que si els noms de fitxers són relatius, s'agafen
# del mateix directori que el fitxer de preconfiguració que els executa.
#d-i preseed/run string foo.sh

És possible l'encadenament des de l'«initrd» o de la fase de configuració
prèvia amb fitxer, a una configuració prèvia en xarxa donant el valor a
«preseed/url» en els fitxers anteriors. Açò farà que la configuració prèvia de
la xarxa es realitze quan la xarxa s'aixeque. Necessiteu anar en compte quan ho
feu, ja que hi ha dues formes diferents de fer la configuració prèvia, que vol
dir per exemple que tindreu l'oportunitat d'executar l'ordre «preseed/early»,
la segona que es du a terme després d'aixecar la xarxa.


━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

^[21] Normalment, el propietari d'una variable «debconf» (o una plantilla) és
el nom del paquet que conté la plantilla «debconf» que es correspon a la
plantilla «debconf» corresponent. Per a les variables utilitzades en
l'instal·lador en sí mateix, el propietari és «d-i». Les plantilles i variables
poden tenir més d'un propietari que ajuden a determinar si es poden esborrar de
la base de dades «debconf» quan el paquet s'esborre completament.

^[22] Per exemple, configurar prèviament locale a ca_ES convertiria ca_ES.UTF-8
en el «locale» per defecte del sistema instal·lat. Si per exemple preferiu
ca_AD.UTF-8 al seu lloc, haureu d'establir una configuració prèvia individual
per a cada valor.

Apèndix C. Fer particions per a Debian

Sumari

C.1. Com decidir quines particions fer per a Debian i llurs mides
C.2. L'arbre de directoris
C.3. Esquema de particions recomanat
C.4. Noms dels dispositius a Linux
C.5. Programes per fer particions de Debian

    C.5.1. Fer particions per a 64-bit PC

C.1. Com decidir quines particions fer per a Debian i llurs mides

Com a mínim imprescindible, GNU/Linux necessita una partició pròpia. Podeu
tenir una única partició que contingui tot el sistema operatiu, les aplicacions
i els vostres fitxers personals. Molta gent pensa que també és necessària una
altra partició per a l'intercanvi de memòria, però això no és cert del tot. La
partició d'intercanvi o «swap» és un espai reservat per al sistema operatiu, i
que permet utilitzar el disc com si es tractés de «memòria virtual». Si poseu
l'espai d'intercanvi en una altra partició independent, Linux pot fer-ne un ús
molt més eficient. Es pot fer servir un fitxer normal per a l'intercanvi, però
no és recomanable.

Tanmateix, la majoria de la gent prefereix assignar a GNU/Linux més particions
de les estrictament necessàries. Hi ha dos motius pels que us pot interessar
dividir el sistema de fitxers en unes quantes particions més petites. El primer
és per seguretat. Si passa res que malmeti el sistema de fitxers, generalment
només afectarà una partició. D'aquesta manera només caldrà restaurar una part
del sistema (a partir de les còpies de seguretat que aneu fent meticulosament).
Almenys seria bo considerar tenir el que normalment es coneix com «partició
arrel». Aquesta conté els components més essencials del sistema. Si qualsevol
de les altres particions queda malmesa, encara podreu arrencar GNU/Linux per
arreglar el sistema. Això us pot estalviar haver de reinstal·lar-ho tot de nou.

El segon motiu generalment és més important en un entorn professional, però en
realitat dependrà de l'ús que feu de la màquina. Per exemple, un servidor que
rep molt correu no desitjat pot omplir fàcilment una partició. Si teniu /var/
mail en una partició separada al servidor de correu, la major part del sistema
continuarà funcionant.

L'únic inconvenient real de fer servir més particions és que sovint és difícil
saber d'entrada quines necessitats tindreu. Si feu una partició massa petita,
llavors o reinstal·leu el sistema o no parareu de moure coses d'una banda a
l'altra per fer lloc a la partició infradimensionada. D'altra banda, si feu la
partició massa gran estareu malbaratant espai que es podria fer servir per a
alguna altra cosa. És cert que l'espai de disc és barat avui en dia, però tot i
així, per què llançar els diners?

C.2. L'arbre de directoris

Debian GNU/Linux s'adhereix a la Filesystem Hierarchy Standard (Jerarquia
estàndard del sistema de fitxers) per a anomenar directoris i fitxers. Aquest
estàndard permet tant a usuaris com a programes predir la ubicació dels fitxers
i directoris. El directori arrel es representa per una barra /. A partir de
l'arrel, tots els sistemes Debian inclouen aquests directoris:

┌─────────┬──────────────────────────────────────────────────────┐
│Directori│                      Contingut                       │
├─────────┼──────────────────────────────────────────────────────┤
│bin      │Binaris d'ordres essencials                           │
├─────────┼──────────────────────────────────────────────────────┤
│boot     │Fitxers estàtics del carregador d'arrencada           │
├─────────┼──────────────────────────────────────────────────────┤
│dev      │Fitxers de dispositiu                                 │
├─────────┼──────────────────────────────────────────────────────┤
│etc      │Configuració del sistema específica de la màquina     │
├─────────┼──────────────────────────────────────────────────────┤
│home     │Directoris dels usuaris                               │
├─────────┼──────────────────────────────────────────────────────┤
│lib      │Biblioteques compartides essencials i mòduls del nucli│
├─────────┼──────────────────────────────────────────────────────┤
│media    │Punts de muntatge per a dispositius extraïbles        │
├─────────┼──────────────────────────────────────────────────────┤
│mnt      │Muntatge temporal de sistemes de fitxers              │
├─────────┼──────────────────────────────────────────────────────┤
│proc     │Directori virtual per a informació del sistema        │
├─────────┼──────────────────────────────────────────────────────┤
│root     │Directori principal de l'usuari root                  │
├─────────┼──────────────────────────────────────────────────────┤
│run      │Dades variables en temps d'execució                   │
├─────────┼──────────────────────────────────────────────────────┤
│sbin     │Binaris essencials del sistema                        │
├─────────┼──────────────────────────────────────────────────────┤
│sys      │Directori virtual per a informació del sistema        │
├─────────┼──────────────────────────────────────────────────────┤
│tmp      │Fitxers temporals                                     │
├─────────┼──────────────────────────────────────────────────────┤
│usr      │Jerarquia secundària                                  │
├─────────┼──────────────────────────────────────────────────────┤
│var      │Dades variables                                       │
├─────────┼──────────────────────────────────────────────────────┤
│srv      │Dades pels serveis facilitats pel sistema             │
├─────────┼──────────────────────────────────────────────────────┤
│opt      │Aplicacions de programari addicionals                 │
└─────────┴──────────────────────────────────────────────────────┘

A continuació teniu una llista de consideracions importants pel que fa a
directoris i particions. Tingueu en compte que l'ús del disc pot variar molt
segons la configuració del sistema. Aquestes recomanacions són més aviat
generals i proporcionen un bon punt de partida per a fer particions.

  • La partició arrel / sempre ha de contenir físicament /etc, /bin, /sbin, /
    lib i /dev; altrament no podreu arrencar. Normalment calen 250-350 MiB per
    a la partició arrel.

  • /usr: conté tots els programes d'usuari (/usr/bin), biblioteques (/usr/
    lib), documentació (/usr/share/doc), etc. Aquesta és la part del sistema de
    fitxers que generalment ocupa més. Li hauríeu de concedir com a mínim 500
    MiB d'espai en disc. Aquesta mida s'ha d'incrementar depenent del nombre i
    el tipus de paquets que planegeu instal·lar. Una estació de treball potent
    o un servidor poden dedicar-li 4-6 GiB.

  • Ara es recomana tenir /usr a la partició arrel /, d'altre manera podria
    ocasionar problemes en l'arrencada. Això significa que cal reservar almenys
    600-750MB d'espai de disc per a la partició arrel incloent /usr, o 5-6GB
    per a una màquina de treball o una instal·lació de servidor.

  • /var: les dades variables, com ara articles de grups de discussió, correus
    electrònics, pàgines web, bases de dades, la memòria cau del sistema de
    paquets, etc., aniran a parar a aquest directori. La seva mida dependrà en
    bona part de l'ús que doneu al sistema, però per a la majoria de gent, el
    que marcarà la mida serà la sobrecàrrega produïda pel sistema
    d'administració de paquets. Si penseu fer una instal·lació completa de
    gairebé tot allò que Debian pot oferir, tot en una sola sessió, n'hi hauria
    d'haver prou amb reservar 2 o 3 GiB d'espai per a /var. Si penseu fer la
    instal·lació per parts (és a dir, instal·lar els serveis i utilitats,
    després les eines de text, llavors X...), us en podeu sortir amb 300-500
    MiB. Si aneu més justos de disc i no penseu fer actualitzacions importants,
    passareu amb només 30 o 40 MiB.

  • /tmp: les dades temporals generades pels programes segurament aniran a
    parar a aquest directori. 40-100 MiB haurien de ser suficients. Algunes
    aplicacions, com ara eines de manipulació de fitxers, autoria de CD/DVD, o
    altre programari multimèdia, poden fer servir /tmp per emmagatzemar fitxers
    imatge. Si teniu intenció de fer servir aquest tipus d'aplicacions, és
    recomanable ajustar l'espai disponible a /tmp convenientment.

  • /home: tot usuari deixa les seves dades en un subdirectori d'aquest
    directori. La seva mida dependrà del nombre d'usuaris que tingui el
    sistema, i dels fitxers que s'hi hagin d'emmagatzemar. Segons l'ús planejat
    per a la màquina s'haurien de reservar uns 100 MiB per a cada usuari,
    adaptant aquest valor a les vostres necessitats particulars. Reserveu molt
    més espai si teniu previst desar molts fitxers multimèdia (imatges, MP3,
    pel·lícules) als vostres directoris personals.

C.3. Esquema de particions recomanat

Per a usuaris novells, màquines Debian personals, sistemes domèstics i altres
instal·lacions monousuari, el més fàcil i probablement més simple serà fer una
única partició / (més la d'intercanvi). El tipus de partició recomanat és ext4.

En sistemes multiusuari amb molt espai de disc, és millor col·locar /var,/tmp,
i /home cadascun a la seva pròpia partició, i separats de la partició /.

Podríeu necessitar una partició a part per /usr/local si penseu instal·lar
molts programes que no formen part de la distribució Debian. Si la vostra
màquina ha de ser un servidor de correu, potser caldria fer una partició a part
per a /var/mail. Si esteu instal·lant un servidor amb molts comptes d'usuari,
és bo tenir una partició gran independent per a /home. En general, l'esquema de
particions varia d'una màquina a una altra, depenent de per a què es faci
servir.

Per a sistemes més complexos llegiu el Multi Disk HOWTO. Aquesta secció tracta
més en profunditat aquest tema, pot interessar especialment a proveïdors
d'internet i a persones que es dediquin a configurar servidors.

Pel que fa a la mida de la partició d'intercanvi, hi ha molts punts de vista
diferents. Un heurisme que va prou bé és fer-la tan gran com la memòria del
sistema. Però en la majoria de casos no hauria de ser inferior a 512 MiB. És
clar que hi ha excepcions a la regla.

Com a exemple, una antiga màquina domèstica podria tenir 512 MiB de RAM i un
disc SATA de 20 GiB a /dev/sda. Podria haver-hi una partició de 8 GiB per a un
altre sistema operatiu a /dev/sda1, una partició d'intercanvi de 512 MiB a /dev
/sda3 i la resta, aproximadament 11,5 GiB a /dev/sda2, com a partició Linux.

Per tenir una idea de l'espai que ocupen altres paquets que us poden interessar
una vegada la instal·lació del sistema ha estat completada, llegiu Secció D.2,
«Espai requerit per a les tasques».

C.4. Noms dels dispositius a Linux

Els noms dels discs i particions a Linux poden ser diferents que en altres
sistemes operatius. Necessiteu saber els noms que utilitza Linux quan genereu i
monteu particions. Aquest és l'esquema bàsic de noms:

  • El primer disc dur s'anomena /dev/sda.

  • El segon disc dur s'anomena /dev/sdb, i així successivament.

  • El primer CD-ROM SCSI s'anomena /dev/scd0, també conegut com a /dev/sr0.

Les particions en cada disc es representen afegint un número decimal al nom del
disc: sda1 i sda2 representen la primera i segona partició del primer disc SCSI
del vostre sistema.

Ací teniu un exemple real. Assumim que teniu un sistema amb dos discs SCSI, un
a l'adreça SCSI 2 i l'altre a l'adreça SCSI 4. El primer disc (a l'adreça 2)
s'anomena sda, i el segon sdb. Si la unitat sda té tres particions, aquestes
s'anomenaran sda1, sda2 i sda3. La mateixa lògica s'aplica també al disc sdb i
les seues particions.

Teniu en compte que si teniu dos adaptadors de bus SCSI (és a dir,
controladores), l'ordre de les unitats pot ser confús. La millor solució en
aquest cas és estar atent als missatges d'arrencada, assumint que sabeu els
models de les unitats i/o les seues capacitats.

Linux representa les particions primàries fent servir el nom del disc, més els
números 1 al 4. Per exemple, la primera partició primària al primer disc és /
dev/sda1. Les particions lògiques s'enumeren començant pel 5; així la primera
partició lògica en aquest mateix disc és /dev/sda5. Recordeu que la partició
estesa, que és la que integra les particions lògiques, no es pot utilitzar.

C.5. Programes per fer particions de Debian

Els desenvolupadors de Debian han adaptat nombroses varietats de programes per
fer particions a fi que funcionen en diversos tipus de discs durs i
arquitectures d'ordinador. Tot seguit hi ha una llista dels programes adients
per a la vostra arquitectura.

partman

    És l'eina de Debian recomanada per fer particions. Aquesta navalla suïssa
    també pot redimensionar particions, generar sistemes de fitxers («formatar»
    en terminologia de Windows) i associar-los a punts de muntatge.

fdisk

    És el partidor de discs original del Linux, adequat per als experts.

    Aneu amb compte si teniu particions de FreeBSD. Els nuclis d'instal·lació
    permeten l'ús d'aquestes particions, però la manera com l'fdisk els
    representa (o no) pot fer que els noms de dispositiu diferisquen. Vegeu el
    COM ES FA Linux+FreeBSD.

cfdisk

    És un partidor de discs d'ús senzill, apte per a tothom.

    Tingueu en compte que el cfdisk no reconeix particions FreeBSD en absolut i
    que, novament, els noms de dispositiu poden diferir.

Un d'aquests programes s'executarà de manera predeterminada quan seleccioneu 
Parteix els dics (o paregut). Es podria utilitzar una eina de fer particions
des de la línia d'ordres al VT2, malgrat que no es recomana.

Recordeu que heu de marcar la partició d'arrencada com a «Arrencable».

C.5.1. Fer particions per a 64-bit PC

Si esteu utilitzant un disc dur nou (o voleu esborrar tota la taula de
particions del vostre disc), cal crear una taula de particions nova. El «
Particionat Guiat» ho fa automàticament, però quan es particiona manualment,
moveu la selecció a l'entrada de nivell superior del disc i premeu Intro. Això
crearà una taula de particions nova en aquest disc. En mode expert, se us
demanarà el tipus de la taula de particions. El valor per defecte per als
sistemes basats en UEFI és «gpt», mentre que per al món BIOS més antic el valor
per defecte és «msdos». En una instal·lació de prioritat estàndard, aquests
valors predeterminats s'usaran automàticament.

Nota

Quan s'ha seleccionat una taula de particions de tipus «gpt» (per defecte en
els sistemes UEFI), es crearà automàticament un espai lliure d'1 MB al
començament del disc. Això està pensat i requerit per incrustar el gestor
d'arrencada GRUB2.

Si teniu instal·lat un altre sistema operatiu com el DOS o el Windows i el
voleu conservar, potser hàgeu de redimensionar-ne la partició a fi d'alliberar
espai per a la instal·lació de Debian. L'instal·lador pot redimensionar tant
els sistemes de fitxers FAT com els NTFS; quan arribeu al moment de partir,
escolliu l'opció Manual, seleccioneu una partició existent i li canvieu la
mida.

Mentre que els sistemes UEFI moderns no tenen les limitacions com es mostren
més avall, normalment la BIOS del PC posa restriccions al fer particions al
disc. El nombre de particions «primàries» i «lògiques» que pot contenir una
unitat és limitat. A més a més, les BIOS anteriors a 1994-98 tenen límits quant
al lloc de la unitat des del qual es pot arrencar. Hi ha més informació al
Linux Partition HOWTO, però aquesta secció inclou també un breu resum, útil en
la majoria de situacions.

Les particions «primàries» constitueixen l'esquema original de fer particions
dels discs de PC. Tanmateix, només n'hi pot haver quatre. Per evitar això, es
van inventar les particions «estesa» i «lògica». Si configureu una partició
primària com a estesa, podeu subdividir-ne l'espai en particions lògiques. Es
poden crear fins a 60 particions lògiques per partició estesa; amb tot, només
podeu tenir una partició estesa per cada unitat física.

El Linux limita les particions per unitat física a 255 en discs SCSI (3 de
primàries, 252 de lògiques), i a 63 en una unitat IDE (3 de primàries, 60 de
lògiques). Tanmateix el sistema Debian GNU/Linux normal només proporciona 20
dispositius per a particions, de manera que no podreu instal·lar-ne més de 20
si abans no prepareu manualment dispositius per a elles.

Si teniu un disc IDE gran i no esteu fent servir ni l'adreçament LBA ni
controladors superposats (de vegades proporcionats pels fabricants), aleshores
la partició d'arrencada (la que conté la imatge del nucli) s'ha de col·locar
dins els primers 1024 cilindres del disc (normalment uns 524 MiB, sense
traducció de la BIOS).

Aquesta restricció no s'aplica si la BIOS és posterior a 1995-1998 (segons el
fabricant) i conté l'«Especificació de funcionalitat millorada d'unitats de
disc». La comanda mbr de la versió del Lilo de DebianTant ha d'emprar la BIOS
per traslladar el nucli del disc a la RAM. Si es troben a la BIOS les
extensions int 0x13 d'accés a discs grans, s'empraran. Si no, es farà servir la
interfície antiga d'accés al disc, i no es podrà emprar per adreçar-se a cap
lloc del disc superior al cilindre 1023è. Una vegada s'ha arrencat el Linux,
independentment de la BIOS de l'ordinador, aquestes restriccions ja no
s'apliquen, car el Linux no fa servir la BIOS per accedir al disc.

Si teniu un disc gran, potser us caldrà emprar tècniques de traducció de
cilindres, que podeu emprar des del programa de configuració de la BIOS, com
ara l'LBA (Adreçament de blocs lògics) o el mode de traducció CHS («Gran»).
Trobareu més informació sobre discs grans al Large Disk HOWTO. Si esteu fent
servir un esquema de traducció de cilindres i la BIOS no permet l'ús
d'extensions d'accés a discs grans, aleshores la partició d'arrencada ha
d'ajustar-se a la representació traduïda del cilindre 1024è.

La manera recomanada de fer això és generar una partició petita (25-50 MiB són
prou) al principi del disc, a fi d'emprar-la com a partició d'arrencada, i
després generar les particions que vulgueu a l'espai restant. Aquesta partició
d'arrencada s'ha de muntar a /boot, car aquest és el directori d'emmagatzematge
del(s) nucli(s) del Linux. Aquesta configuració funciona en qualsevol sistema,
independentment de si es fa servir l'LBA o la traducció CHS de discs grans, i
independentment també de si la BIOS permet l'ús d'extensions d'accés a discs
grans.

Apèndix D. Informació variada

Sumari

D.1. Dispositius del Linux

    D.1.1. Configuració del ratolí

D.2. Espai requerit per a les tasques
D.3. Instal·lar Debian GNU/Linux des d'un sistema Unix/Linux

    D.3.1. Començar
    D.3.2. Instal·lar debootstrap
    D.3.3. Executar debootstrap
    D.3.4. Configurar el sistema base
    D.3.5. Instal·lar un nucli
    D.3.6. Configuració del carregador d'arrencada
    D.3.7. Accés remot: instal·lar SSH i configurar l'accés
    D.3.8. Retocs finals

D.4. Instal·lació de Debian GNU/Linux per «Parallel Line IP» (PLIP)

    D.4.1. Requeriments
    D.4.2. Configuració de l'origen
    D.4.3. Instal·lació del destí

D.5. Instal·lació de Debian GNU/Linux utilitzant PPP sobre Ethernet (PPPoE)

D.1. Dispositius del Linux

En el Linux teniu diversos fitxers especials que podeu trobar al directori /
dev. Aquests fitxers s'anomenen fitxers de dispositiu i no es comporten com
fitxers normals. Els tipus més comuns de fitxers de dispositiu són els de bloc
i els de caràcter. Aquests fitxers actuen d'interfície amb el controlador real
(que forma part del nucli de Linux) que és el que accedeix al maquinari. Un
altre tipus de fitxer de dispositiu menys habitual és el que s'anomena pipe.
Podeu vore els fitxers de dispositiu més important a la taula de baix.

┌────┬────────────────────────────────────┐
│sda │Disc dur al primer port (Mestre)    │
├────┼────────────────────────────────────┤
│sdb │Segon disc dur                      │
├────┼────────────────────────────────────┤
│sda1│Primera partició del primer disc dur│
├────┼────────────────────────────────────┤
│sdb7│Setene partició del segon disc dur  │
└────┴────────────────────────────────────┘

┌───┬──────────────┐
│sr0│Primer CD-ROM │
├───┼──────────────┤
│sr1│Segon CD-ROM  │
└───┴──────────────┘

┌───────┬─────────────────────────────────────────────────────────────────────┐
│ttyS0  │Port sèrie 0, COM1 sota l'MS-DOS                                     │
├───────┼─────────────────────────────────────────────────────────────────────┤
│ttyS1  │Port sèrie 1, COM2 sota l'MS-DOS                                     │
├───────┼─────────────────────────────────────────────────────────────────────┤
│psaux  │dispositiu de ratolí PS/2                                            │
├───────┼─────────────────────────────────────────────────────────────────────┤
│gpmdata│Pseudodispositiu, repetidor de dades procedents del dimoni GPM       │
│       │(ratolí)                                                             │
└───────┴─────────────────────────────────────────────────────────────────────┘

┌─────┬──────────────────────────────────────────────────┐
│cdrom│Enllaç simbòlic a la unitat de CD-ROM             │
├─────┼──────────────────────────────────────────────────┤
│mouse│Enllaç simbòlic al fitxer de dispositiu del ratolí│
└─────┴──────────────────────────────────────────────────┘

┌────┬────────────────────────────────────────────────────────┐
│null│Qualsevol cosa escrita a aquest dispositiu desapareixerà│
├────┼────────────────────────────────────────────────────────┤
│zero│Aquest dispositiu produeix sempre zeros                 │
└────┴────────────────────────────────────────────────────────┘

D.1.1. Configuració del ratolí

El ratolí pot emprar-se tant a la consola del Linux (amb el «gpm») com a
l'entorn de finestres X. Normalment, només cal instal·lar el gpm i el servidor
X. Ambdós s'han de configurar per fer servir /dev/input/mice com al dispositiu
de ratolí. El nom correcte del protocol del ratolí a «gpm» és exps2, i a X
ExplorerPS/2. Els fitxers de configuració són /etc/gpm.conf i /etc/X11/
xorg.conf, respectivament.

Cal carregar certs mòduls del nucli per a fer funcionar el ratolí. En alguns
casos, es detecta automàticament els mòduls correctes, però no sempre per als
antics ratolins sèrie i de tipus «bus»^[23], actualment només en ús en equips
antics. A continuació es resum els mòduls del nucli Linux necessaris per a
diferents tipus de ratolins:

┌────────┬───────────────────────────────────────────────────────────┐
│ Mòdul  │                        Descripció                         │
├────────┼───────────────────────────────────────────────────────────┤
│psmouse │ratolí PS/2 (autodetectat)                                 │
├────────┼───────────────────────────────────────────────────────────┤
│usbhid  │ratolí USB (autodetectat)                                  │
├────────┼───────────────────────────────────────────────────────────┤
│sermouse│La majoria de ratolins sèrie                               │
├────────┼───────────────────────────────────────────────────────────┤
│logibm  │Ratolí «bus» connectat amb una targeta Logitech            │
├────────┼───────────────────────────────────────────────────────────┤
│inport  │Ratolí «bus» connectat a una targeta ATI o Microsoft InPort│
└────────┴───────────────────────────────────────────────────────────┘

Per a carregar un mòdul controlador del ratolí, podeu fer servir l'ordre 
modconf (del paquet del mateix nom) i mirar en la categoria kernel/drivers/
input/mouse.

D.2. Espai requerit per a les tasques

Una instal·lació estàndard per a l'arquitectura «amd64» amb el nucli 2.6,
incloent-hi tots els paquets estàndard, requereix 971 MiB d'espai de disc. Una
instal·lació bàsica mínima, amb la tasca «Sistema estàndard» no seleccionada,
ocuparà 769 MiB.

Important

En els dos casos és l'espai en disc utilitzat després d'acabar la instal·lació
i esborrar tots els fitxers temporals. Açò també te en compte les necessitats
del sistema de fitxers, per exemple els fitxers de «journal». Açò vol dir que
farà falta prou més espai al disc durant la instal·lació i per l'ús normal del
sistema.

La següent taula enumera les mides indicades per l'«aptitude» que calen per a
les tasques llistades en el «tasksel». Tingueu en compte que algunes d'aquestes
comparteixen components, per tant la mida total de la instal·lació conjunta de
dues d'elles pot resultar inferior al total de la suma indicat.

Per defecte s'instal·larà l'entorn d'escriptori GNOME, però podeu escollir un
entorn d'escriptori alternatiu emprant una de les imatges d'instal·lació
especials, o especificant l'entorn d'escriptori desitjat durant la instal·lació
(vegeu Secció 6.3.6.2, «Selecció i instal·lació de programari»).

Tingueu en compte que cal afegir les mides de la taula a la de la instal·lació
estàndard a l'hora de determinar la mida de les particions. La major part de la
mida identificada com a «Mida de la instal·lació» la faran servir /usr i /lib;
la mida identificada com a «Mida de la descàrrega» cal tenir-la a l'abast
(temporalment) a /var.

┌──────────────┬──────────────────┬────────────────┬──────────────────────────┐
│    Tasca     │    Mida de la    │   Mida de la   │ Espai requerit per a la  │
│              │instal·lació (MiB)│descàrrega (MiB)│    instal·lació (MiB)    │
├──────────────┼──────────────────┼────────────────┼──────────────────────────┤
│Entorn        │                  │                │                          │
│d'escriptori  │                  │                │                          │
├──────────────┼──────────────────┼────────────────┼──────────────────────────┤
│  • GNOME (per│2790              │786             │3576                      │
│defecte)      │                  │                │                          │
├──────────────┼──────────────────┼────────────────┼──────────────────────────┤
│  • KDE Plasma│4122              │1212            │5334                      │
├──────────────┼──────────────────┼────────────────┼──────────────────────────┤
│  • Xfce      │2187              │621             │2808                      │
├──────────────┼──────────────────┼────────────────┼──────────────────────────┤
│  • LXDE      │2271              │653             │2924                      │
├──────────────┼──────────────────┼────────────────┼──────────────────────────┤
│  • MATE      │2574              │711             │3285                      │
├──────────────┼──────────────────┼────────────────┼──────────────────────────┤
│  • Cinnamon  │4197              │1251            │5448                      │
├──────────────┼──────────────────┼────────────────┼──────────────────────────┤
│Servidor web  │44                │11              │55                        │
├──────────────┼──────────────────┼────────────────┼──────────────────────────┤
│Servidor de   │2                 │0               │2                         │
│SSH           │                  │                │                          │
└──────────────┴──────────────────┴────────────────┴──────────────────────────┘

Si la llengua emprada no és l'anglès, el tasksel potser instal·larà
automàticament una tasca de localització si n'hi ha cap a l'abast per a la
vostra llengua. Les necessitats d'espai canvien segons la llengua; heu de
reservar uns 350 MiB en total per a la descàrrega i la instal·lació.

D.3. Instal·lar Debian GNU/Linux des d'un sistema Unix/Linux

Aquesta secció explica com instal·lar Debian GNU/Linux des d'un Unix o Linux,
sense utilitzar el sistema de menús de l'instal·lador com s'explica a tot
aquest manual. Aquest COM ES FA d'«instal·lació creuada» l'han demanat usuaris
de Red Hat, Mandriva i SuSE que migren a Debian GNU/Linux. En aquesta secció es
pressuposa una certa familiaritat amb la introducció d'ordres «*nix» i la
navegació pel sistema de fitxers. En aquesta secció, $ significa que l'ordre
s'ha d'introduir al sistema actual de l'usuari, i # significa que l'ordre s'ha
d'introduir al «chroot» de Debian.

Una vegada tingueu configurat el sistema Debian a la vostra mida, podreu migrar
totes les dades existents (si n'hi ha alguna) i continuar treballant. Aquesta
és, per tant una instal·lació Debian GNU/Linux amb «sense temps d'inactivitat».
També és una manera intel·ligent de treballar amb maquinari que d'altra manera
no funciona bé amb diferents arrencades o mitjans d'instal·lació.

Nota

Ja que aquesta és principalment una tasca manual, heu de considerar que haureu
de fer moltes configuracions bàsiques del sistema, que requeriran més
coneixement en general sobre Debian i Linux que el necessari per a realitzar
una instal·lació regular. No espereu que aquest procediment resulti en un
sistema idèntic al que obtindríeu amb una instal·lació regular. També heu de
tenir en compte que aquest procediment només descriu els passos bàsics per a
configurar el sistema. Pot ser que siguin necessaris passos addicionals
d'instal·lació i/o configuració.

D.3.1. Començar

Amb les actuals eines «*nix», es necessita tornar a partir el disc, preparant
al menys un sistema de fitxers i una partició d'intercanvi. Necessitareu al
menys 769 MiB d'espai per una instal·lació de consola, o bé al menys 2271 MiB
si voleu instal·lar X (més si intenteu instal·lar algun entorn d'escriptori com
el GNOME o el KDE Plasma).

A continuació, genereu sistemes de fitxers a les vostres particions. Per
exemple, per generar un sistema de fitxers «ext3» a la partició /dev/sda6 (que
és el nostre exemple per la partició arrel):

# mke2fs -j /dev/sda6

Si voleu generar un sistema de fitxers «ext2», ometeu -j.

Inicialitzeu i activeu l'intercanvi (substituïu el número de la partició per la
vostra partició d'intercanvi de Debian):

# mkswap /dev/sda5
# sync
# swapon /dev/sda5

Munteu la partició a /mnt/debinst (el lloc d'instal·lació, per ser l'arrel (/)
del sistema de fitxers del nou sistema). El punt de muntatge és arbitrari, i
se'n farà ús després.

# mkdir /mnt/debinst
# mount /dev/sda6 /mnt/debinst

Nota

Si voleu tenir parts del vostre sistema de fitxers (p. ex. «/usr») muntats en
particions separades, haureu de generar i muntar aquests directoris manualment
abans de procedir amb la següent fase.

D.3.2. Instal·lar debootstrap

L'eina que utilitza l'instal·lador de Debian, i que es reconeix oficialment com
la manera d'instal·lar un sistema base de Debian, és debootstrap. Fa ús de wget
i ar, i per altra part tan sols depèn de /bin/sh i eines Unix/Linux bàsiques^
[24]. Instal·leu wget i ar si no hi són ara al vostre sistema, i descarregueu i
instal·leu debootstrap.

Podeu també utilitzar el procediment següent per fer la instal·lació de forma
manual. Genereu un directori de treball per extreure els «.deb» dins:

# mkdir work
# cd work

El binari de debootstrap el podeu trobar a l'arxiu de Debian (assegureu-vos de
seleccionar l'arxiu correcte per la vostra arquitectura). Descarregueu el
«.deb» debootstrap del repositori, copieu el paquet al directori i extraieu-ne
els fitxers. Necessitareu tenir privilegis de «root» per instal·lar els
fitxers.

# ar -x debootstrap_0.X.X_all.deb
# cd /
# zcat /full-path-to-work/work/data.tar.gz | tar xv

D.3.3. Executar debootstrap

Podeu descarregar els fitxers que necessiteu del debootstrap directament de
l'arxiu quan l'executeu. Podeu substituir ftp.es.debian.org/debian per
qualsevol rèplica de l'arxiu a l'ordre de l'exemple de baix, preferiblement per
un que estigui a prop vostre. Teniu una llista de les rèpliques a http://
www.debian.org/mirror/list.

Si teniu una imatge d'instal·lació de Debian GNU/Linux bullseye muntada a /
cdrom, podeu substituir l'adreça del http per: file:/cdrom/debian/

Substituïu una de les següents per ARCH a l'ordre debootstrap: amd64, arm64,
armel, armhf, i386, mips64el, mipsel, ppc64el, s390x.

# /usr/sbin/debootstrap --arch ARCH bullseye \
     /mnt/debinst http://ftp.es.debian.org/debian

Si l'arquitectura destí és diferent de la de la màquina, haureu d'afegir
l'opció --foreign.

D.3.4. Configurar el sistema base

Ara ja teniu un sistema Debian real al disc, això si, molt petit. Feu chroot:

# LANG=C.UTF-8 chroot /mnt/debinst /bin/bash

Si l'arquitectura de destí és diferent a la de l'hoste, primer haureu de copiar
«qemu-user-static» al nou hoste:

# cp /usr/bin/qemu-ARCH-static /mnt/debinst/usr/bin
# LANG=C.UTF-8 chroot /mnt/debinst qemu-ARCH-static /bin/bash

Després d'entrar al «chroot» podríeu necessitar ajustar la definició del
terminal per a que sigui compatible amb el sistema Debian base, per exemple:

# export TERM=xterm-color

Depenent del valor de «TERM», haureu d'instal·lar el paquet ncurses-term per a
tenir suport per a ell.

Si l'arquitectura objectiu és diferent de a la de l'hoste, necessitau acabar el
procés multietapa d'arrencada:

/debootstrap/debootstrap --second-stage

D.3.4.1. Generar fitxers de dispositiu

En aquest punt /dev/ només conté fitxers de dispositiu molt bàsics. Per als
següents passos de la instal·lació pot ser que es requereixin fitxers de
dispositiu addicionals. Hi ha diferents maneres d'assolir això, i el mètode que
hauríeu d'emprar depèn del sistema hoste que esteu usant per a fer la
instal·lació, de si fareu servir o no un nucli modular, i de si penseu usar
fitxers de dispositiu estàtics o dinàmics (p. ex. usant udev) per al nou
sistema.

Algunes de les opcions disponibles són:

  • instal·lar el paquet «makedev» i generar un conjunt de fitxers de
    dispositiu estàtic fent servir (abans de fer «chroot»)

    # apt install makedev
    # mount none /proc -t proc
    # cd /dev
    # MAKEDEV generic

  • només generar manualment dispositius de fitxer fent servir MAKEDEV

  • muntar vinculantment («bind mount») «/dev» des del vostre sistema hoste a
    sobre de «/dev» al sistema destí; tingueu en compte que els guions
    «postinst» d'alguns paquets poden intentar crear fitxers de dispositiu, per
    tant aquest opció s'ha d'utilitzar amb cura.

D.3.4.2. Muntatge de les particions

Necessitareu generar el fitxer /etc/fstab.

# editor /etc/fstab

Aquest és un exemple que podeu modificar per a que s'ajuste a les vostres
necessitats:

# /etc/fstab: informació estàtica del sistema de fitxers.
#
# s. fitxers    punt muntatge  tipus   opcions                  dump passades
/dev/XXX         /             ext3    defaults                 0    1
/dev/XXX         /boot         ext3    ro,nosuid,nodev          0    2

/dev/XXX         none          swap    sw                       0    0
proc             /proc         proc    defaults                 0    0

/dev/cdrom       /media/cdrom  iso9660 noauto,ro,user,exec      0    0

/dev/XXX         /tmp          ext3    rw,nosuid,nodev          0    2
/dev/XXX         /var          ext3    rw,nosuid,nodev          0    2
/dev/XXX         /usr          ext3    rw,nodev                 0    2
/dev/XXX         /home         ext3    rw,nosuid,nodev          0    2

Utilitzeu mount -a per muntar tots els sistemes de fitxers que heu especificat
al vostre /etc/fstab, o bé munteu cada sistema de fitxers de forma individual:

# mount /path   # ex.: mount /usr

Els sistemes Debian tenen punts de muntatge pels dispositius extraïbles a /
media, però manté enllaços per raons de compatibilitat a /. Podeu generar
aquests si els necessiteu, per exemple:

# cd /media
# mkdir cdrom0
# ln -s cdrom0 cdrom
# cd /
# ln -s media/cdrom

Podeu muntar el sistema de fitxers «proc» vàries vegades i a llocs arbitraris,
però s'espera tenir el /proc. Si no utilitzeu mount -a, assegureu-vos de muntar
«proc» abans de continuar:

# mount -t proc proc /proc

L'ordre ls /proc ha de mostrar ara un directori no buit. Si això fallés, podeu
provar de muntar «proc» des de fora del «chroot»:

# mount -t proc proc /mnt/debinst/proc

D.3.4.3. Configurar la zona horària

Posant la tercera línia del fitxer /etc/adjtime a «UTC» o «LOCAL» determina si
el sistema interpretarà que el rellotge intern està en UTC o en horari local.
L'ordre següent permetrà configurar i triar la vostra zona horària.

# editor /etc/adjtime

Això és un exemple:

0.0 0 0.0
0
UTC

La següent ordre vos ajudarà a seleccionar la vostra franja horària.

# dpkg-reconfigure tzdata

D.3.4.4. Configurar la xarxa

Per configurar la xarxa, editeu /etc/network/interfaces, /etc/resolv.conf, /etc
/hostname i /etc/hosts.

# editor /etc/network/interfaces

Ací teniu alguns exemples senzills de /usr/share/doc/ifupdown/examples:

######################################################################
# /etc/network/interfaces -- fitxer de configuració per ifup(8), ifdown(8)
# Llegiu la pàgina del manual de «interfaces(5)» per veure quines
# opcions teniu al vostre abast.
######################################################################

# La interfície «loopback» ja no és realment necessària, però es pot emprar
# si és necessari.
#
# auto lo
# iface lo inet loopback

# Per utilitzar «dhcp»:
#
# auto eth0
# iface eth0 inet dhcp

# Un exemple de configuració amb IP estàtica («network», «broadcast» i
# «gateway» són opcionals):
#
# auto eth0
# iface eth0 inet static
#     address 192.168.0.42
#     network 192.168.0.0
#     netmask 255.255.255.0
#     broadcast 192.168.0.255
#     gateway 192.168.0.1

Introduïu el nom del(s) vostre(s) servidor(s) de noms a /etc/resolv.conf:

# editor /etc/resolv.conf

Un exemple senzill de /etc/resolv.conf:

search example.com
nameserver 10.1.1.36
nameserver 192.168.9.100

Introduïu el nom del vostre sistema (de 2 a 63 caràcters):

# echo DebianHostName > /etc/hostname

I un fitxer /etc/hosts bàsic amb suport IPv6:

127.0.0.1 localhost
127.0.1.1 DebianHostName

# Les línies següents són les desitjables per a màquines amb suport IPv6
::1     ip6-localhost ip6-loopback
fe00::0 ip6-localnet
ff00::0 ip6-mcastprefix
ff02::1 ip6-allnodes
ff02::2 ip6-allrouters
ff02::3 ip6-allhosts

Si teniu vàries targetes de xarxa, ordeneu els noms dels mòduls dels
controladors al fitxer /etc/modules amb l'ordre desitjat. A l'arrencada, cada
targeta s'associarà amb el nom de la interfície («eth0», «eth1», etc.) que
esperàveu.

D.3.4.5. Configurar Apt

El «debootstrap» haurà generat un fitxer /etc/apt/sources.list molt bàsic que
permetrà instal·lar paquets addicionals. Per altra banda, potser voldreu afegir
alguns fonts addicionals, per exemple per al codi font dels paquets i les
actualitzacions de seguretat:

deb-src http://ftp.es.debian.org/debian bullseye main

deb http://security.debian.org/ bullseye-security main
deb-src http://security.debian.org/ bullseye-security main

Recordeu d'executar apt update després de fer els canvis a la llista de fonts.

D.3.4.6. Configurar el teclat i els paràmetres locals («locales»)

Per configurar els vostres paràmetres locals per utilitzar un idioma que no
sigui l'anglès, instal·leu el paquet de suport locales i configureu-lo. En
aquest moment es recomana utilitzar els «locales» amb UTF-8.

# aptitude install locales
# dpkg-reconfigure locales

Per configurar el vostre teclat (si fa falta):

# apt install console-setup
# dpkg-reconfigure keyboard-configuration

El canvi en la configuració del teclat no serà efectiu mentre esteu al
«chroot», sinó que estarà configurat en reiniciar de nou.

D.3.5. Instal·lar un nucli

Si intenteu arrencar aquest sistema, probablement voldreu un nucli Linux i un
carregador d'arrencada. Identifiqueu si hi ha algun nucli pre-empaquetat amb:

# apt search linux-image

Ara instal·lau el paquet corresponent al nucli que desitjau fent servir el seu
nom de paquet.

# apt install linux-image-arch-etc

D.3.6. Configuració del carregador d'arrencada

Per aconseguir que el vostre sistema Debian GNU/Linux arrenqui, configureu el
carregador d'arrencada per a que carregui el nucli instal·lat a la partició.
Fixeu-vos que debootstrap no instal·la cap carregador d'arrencada, encara que
podeu utilitzar l'apt dins el «chroot» per tal de fer-ho.

Comproveu amb info grub per tenir més informació de com configurar el
carregador d'arrencada. Si voleu mantenir el sistema que heu usat per a
instal·lar Debian, simplement afegiu una entrada per a la instal·lació de
Debian al vostre fitxer ja existent de grub2 grub.cfg.

Instal·lar i configurar el grub2 és tan fàcil com:

# apt install grub-pc
# grub-install /dev/sda
# update-grub

La segona ordre instal·larà el grub2 (en aquest cas al MBR de sda). L'última
ordre prepararà un fitxer correcte i funcional a /boot/grub/grub.cfg.

Tingueu en compte que això assumeix que s'ha generat un fitxer de dispositiu /
dev/sda. Hi ha mètodes alternatius per instal·lar grub2, però aquests estan
fora l'abast d'aquest apèndix.

D.3.7. Accés remot: instal·lar SSH i configurar l'accés

Si podeu accedir al sistema des de la consola, podeu botar aquesta secció. Si
el sistema ha d'ésser accessible des de la xarxa més endavant, és necessari
instal·lar SSH i configurar l'accés.

# apt install ssh

La identificació com a administrador amb contrasenya està desactivada per
defecte, de manera que la configuració de l'accés es pot fer establint una
contrasenya i activant la identificació del compte d'administració amb
contrasenya:

# passwd
# editor /etc/ssh/sshd_config

Aquesta opció està activada:

PermitRootLogin yes

També es pot configurar l'accés posant una contrasenya SSH al compte
d'administració:

# mkdir /root/.ssh
# cat << EOF > /root/.ssh/authorized_keys
ssh-rsa ....
EOF

Finalment, l'accés es pot configurar donant d'alta un usuari i assignant-li una
contrasenya:

# adduser joe
# passwd joe

D.3.8. Retocs finals

Com ja s'ha dit abans, el sistema instal·lat serà molt bàsic. Si us agradaria
tenir un sistema més madur, hi ha un mètode fàcil per instal·lar tots els
paquets de prioritat «standard»:

# tasksel install standard

Per suposat, podeu utilitzar l'apt per instal·lar paquets de forma individual.

Després de la instal·lació hi ha un munt de paquets descarregats a /var/cache/
apt/archives/. Podeu alliberar espai al disc executant:

# apt clean

D.4. Instal·lació de Debian GNU/Linux per «Parallel Line IP» (PLIP)

Aquesta secció explica com instal·lar Debian GNU/Linux en un ordinador sense
una targeta Ethernet, però amb un ordinador passarel·la remot adjunt per mitjà
d'un cable «Null-Modem» (també anomenat cable «Null-Printer»). És recomanable
que l'ordinador passarel·la estigui connectat a una xarxa que tingui una
rèplica de Debian (per exemple, a Internet).

En l'exemple d'aquest apèndix configurarem una connexió PLIP utilitzant una
passarel·la connectada a Internet a través d'una connexió de marcatge directe
(ppp0). Farem servir les adreces IP 192.168.0.1 i 192.168.0.2 per a les
interfícies PLIP del sistema destí i origen respectivament (és recomanable que
aquestes adreces no s'utilitzin dins l'espai d'adreces de la vostra xarxa).

La connexió PLIP configurada durant la instal·lació romandrà disponible després
d'arrencar el sistema instal·lat (consulteu Capítol 7, Arrancada del nou
sistema Debian).

Abans de començar, necessitareu comprovar la configuració de la BIOS (adreces
base IO i IRQ) per als ports paral·lels dels sistemes origen i destí. Els
valors més habituals són io=0x378, irq=7.

D.4.1. Requeriments

  • Un ordinador destí, anomenat destí, on s'instal·larà el sistema Debian.

  • Suports d'instal·lació del sistema, consulteu Secció 2.4, «Mitjans
    d'instal·lació».

  • Un altre ordinador connectat a Internet, anomenat origen, que farà de
    passarel·la.

  • Un cable «Null-Modem DB-25». Consulteu el PLIP-Install-HOWTO per a més
    informació sobre aquest cable i instruccions de com elaborar-ne el vostre
    propi.

D.4.2. Configuració de l'origen

La següent seqüència d'intèrpret d'ordres és un exemple simple de com
configurar l'ordinador origen com a passarel·la cap a Internet fent servir
«ppp0».

#!/bin/sh

# Eliminem els mòduls que s'executen al nucli per evitar conflictes i per a
# tornar-los a configurar manualment.
modprobe -r lp parport_pc
modprobe parport_pc io=0x378 irq=7
modprobe plip

# Configurem la interfície PLIP (en aquest cas «plip0», vegeu «dmesg | grep plip»)
ifconfig plip0 192.168.0.2 pointopoint 192.168.0.1 netmask 255.255.255.255 up

# Configurem la passarel·la
modprobe iptable_nat
iptables -t nat -A POSTROUTING -o ppp0 -j MASQUERADE
echo 1 > /proc/sys/net/ipv4/ip_forward

D.4.3. Instal·lació del destí

Arrenqueu el suport d'instal·lació. És necessari executar la instal·lació en
mode expert; introduïu expert a l'indicador d'arrencada. Si necessiteu establir
paràmetres per mòduls del nucli, ho necessitareu també a l'indicador d'ordres
de l'arrencada. Per exemple, per arrencar l'instal·lador i establir els valors
de les opcions «io» i «irq» del mòdul «parport_pc», introduïu a l'indicador
d'ordres de l'arrencada:

expert parport_pc.io=0x378 parport_pc.irq=7

A continuació hi ha les respostes recomanades de diverses fases de la
instal·lació.

 1. Carrega els components de l'instal·lador des del medi d'instal·lació

    Seleccioneu l'opció plip-modules de la llista; això farà disponibles els
    controladors de PLIP al sistema d'instal·lació.

 2. Detecta el maquinari de xarxa

      □ Si el destí té una targeta de xarxa, es mostrarà una llista dels
        controladors per a les targetes detectades. Si voleu imposar que el
        debian-installer utilitzi PLIP, heu de desseleccionar tots els mòduls
        llistats. Òbviament, si l'ordinador destí no té cap targeta de xarxa,
        l'instal·lador no mostrarà aquesta llista.

      □ Com que anteriorment no s'ha detectat/seleccionat cap xarxa,
        l'instal·lador us demanarà que seleccioneu un controlador de xarxa
        d'una llista. Seleccioneu el mòdul plip.

 3. Configuració de la xarxa

      □ Configuració automàtica de la xarxa amb DHCP: No

      □ Adreça IP: 192.168.0.1

      □ Adreça punt a punt: 192.168.0.2

      □ Adreces dels servidors de noms: podeu introduir les mateixes adreces
        que les utilitzades a l'origen (vegeu /etc/resolv.conf)

D.5. Instal·lació de Debian GNU/Linux utilitzant PPP sobre Ethernet (PPPoE)

En alguns països el PPP sobre Ethernet (PPPoE) és un protocol comú per a les
connexions de banda ampla (ADSL o cable) als proveïdors de serveis d'internet.
La configuració de la connexió de xarxa utilitzant PPPoE no està suportada per
defecte a l'instal·lador, però es pot fer funcionar de forma molt senzilla.
Aquesta secció explica com fer-ho.

La connexió PPPoE feta a la instal·lació estarà també disponible després de
reiniciar al sistema que heu instal·lat (vegeu Capítol 7, Arrancada del nou
sistema Debian).

Per tenir l'opció de configurar i utilitzar PPPoE a la instal·lació,
necessitareu instal·lar utilitzant una de les imatges de CD-ROM/DVD de les que
podeu disposar. No hi ha suport per altres mètodes d'instal·lació (com per
exemple netboot).

Instal·lar amb PPPoE és casi el mateix que qualsevol altra instal·lació. Els
passos següents mostren les diferències.

  • Arrenqueu l'instal·lador utilitzant el paràmetre d'arrencada modules=
    ppp-udeb^[25]. Açò assegurarà que el component responsable de la
    configuració del PPPoE (ppp-udeb) es carregarà i executarà automàticament.

  • Seguiu els passos inicials normals de la instal·lació (selecció de la
    llengua, país i teclat i la càrrega de components addicionals^[26]).

  • El pas següent és la detecció del maquinari de xarxa, per poder identificar
    qualsevol targeta Ethernet present al sistema.

  • Desprès d'açò s'iniciarà la configuració del PPPoE. L'instal·lador provarà
    tots els dispositius Ethernet detectats per poder trobar un concentrador
    PPPoE (un tipus de servidor que controla connexions de tipus PPPoE).

    És possible que no es trobe el concentrador al primer intent. Açò pot
    passar de vegades a xarxes carregades o lentes o amb servidors defectuosos.
    En molts casos un segon intent per detectar el concentrador serà suficient;
    per tornar a intentar-ho, seleccioneu Configurar i iniciar una connexió
    PPPoE des del menú principal de l'instal·lador.

  • Després de trobar un concentrador, es demanarà a l'usuari que escrigui la
    informació d'accés (l'usuari i la contrasenya del PPPoE).

  • En aquest punt l'instal·lador utilitzarà la informació que es done per
    establir la connexió PPPoE. Si s'ha donat la informació correcta, la
    connexió PPPoE s'hauria de configurar i l'instal·lador hauria de ser capaç
    d'utilitzar la connexió a Internet i descarregar els paquets (si fa falta).
    Si la informació de connexió és incorrecta, o apareix algun error,
    l'instal·lador s'aturarà però la configuració es pot tornar a intentar
    seleccionant altra vegada l'entrada del menú Configurar i iniciar una
    connexió PPPoE.


━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

^[23] Els ratolins sèrie tenen un connector en D de 9 forats; els ratolins de
«bus» tenen 8 agulles i son redons, cal no confondre'ls amb connector redó de 6
agulles del ratolí PS/2 o amb el connector redó de 4 agulles del ratolí ADB.

^[24] Això inclou les utilitats base de GNU i ordres com sed, grep, tar i gzip.

^[25] Vegeu Secció 5.1.7, «Pantalla de benvinguda» per a obtenir informació
sobre com afegir un paràmetre d'arrencada.

^[26] El component ppp-udeb es carrega com qualsevol dels components
addicionals en aquest pas. Si voleu instal·lar amb prioritat mitjana o baixa
(mode expert), podeu seleccionar manualment el ppp-udeb en comptes d'introduir
el paràmetre «modules» a l'indicador de l'arrencada.

Apèndix E. Sobre aquest document

Sumari

E.1. Quant a aquest document
E.2. Contribucions a aquest document
E.3. Contribucions més destacables
E.4. Nota sobre les marques comercials

E.1. Quant a aquest document

Aquest manual de l'instal·lador de Debian Sarge està basat en el manual
d'instal·lació de Debian Woody per a disquets, el qual, al seu torn, es basà en
anteriors manuals d'instal·lació de Debian i en el manual de la distribució
Progeny, que fou publicat sota la llicència GPL en 2003.

Aquest document està escrit en DocBook XML. Els formats finals els han generat
diversos programes tot fent servir la informació dels paquets docbook-xml i
docbook-xsl.

A fi de fer aquest document més fàcil de gestionar, s'han emprat un seguit de
funcionalitats XML, tals com les entitats i els atributs de perfil. Aquests
tenen un paper anàleg al de les variables i els condicionals dels llenguatges
de programació. El fitxer font XML d'aquest document conté informació sobre
cada arquitectura -- els atributs de perfil s'han emprat per especificar certes
parts del text com a pròpies de cada arquitectura.

Han contribuït en aquesta traducció Guillem Jover <guillem@debian.org>
(2004-2008, 2010-2011, 2017), Joan Queralt (2004), Aleix Badia i Bosch <
a.badia@callusdigital.org> (2004-2005), Miguel Gea Milvaques <
xerakko@debian.org> (2004-2008), Jordà Polo <jorda@ettin.org> (2005-2008),
Jordi Mallach <jordi@debian.org> > (2005), Albert Gasset Romo <
albert.gasset@gmail.com> (2005), Joan Sanz <joansanzrab@gmail.com> (2005-2006),
Juan Andres Gimeno Crespo <juagicre@fiv.upv.es> (2005), Miquel Oliete <
ktalanet@yahoo.es> (2005), Orestes Mas <orestes@tsc.upc.es> (2005), Steve
Langasek <vorlon@debian.org> (2006-2007), David Aguilera <dvd1985@gmail.com>
(2007), Ivan Vilata i Balaguer <ivan@selidor.net> (2010), Hector Oron <
hector.oron@gmail.com> (2010), Conxa Trallero <ctrallero@ub.edu> (2010),
Innocent De Marchi <tangram.peces@gmail.com> (2017), algú altre <
dmanye@gmail.com> (2021) i les persones que col·laboren a la llista de
traducció al català.

E.2. Contribucions a aquest document

Si teniu cap problema o suggeriment quant a aquest document, podeu enviar-los
com un informe d'error del paquet installation-guide. Vegeu el paquet reportbug
o llegiu la documentació en línia del sistema de seguiment d'errors de Debian.
És convenient que comproveu els errors actuals de installation-guide per veure
si ja s'ha informat del vostre problema. En aquest cas, podeu confirmar-lo o
també aportar-hi més informació a <XXXX@bugs.debian.org>, on XXXX és el número
de l'error ja notificat.

O millor encara, obteniu una còpia de la font DocBook del document i feu-ne
pedaços de correcció. Trobareu la font al project installation-guide a salsa.
Si no esteu familiaritzats amb DocBook, no us amoïneu: hi ha un document
introductori breu al directori de manuals que us servirà per poder posar-vos a
treballar. És com l'html, però s'empra per a indicar el significat del text,
més que no pas la seua presentació visual. També podeu enviar pedaços a la
llista de correu de debian-boot (vegeu abaix). Hi ha instruccions sobre com
obtenir les fonts a través de git al README del directori arrel de les fonts.

No tracteu de posar-vos directament en contacte amb els autors d'aquest
document. Hi ha una llista de correu de debian-installer, que inclou les
discussions sobre el manual. La llista de correu és <
debian-boot@lists.debian.org>. Les instruccions per subscriure-vos-hi són a la
pàgina subscripció a les llistes de correu de Debian; també podeu examinar en
línia els arxius de les llistes de correu de Debian.

E.3. Contribucions més destacables

Aquest document fou escrit originalment per Bruce Perens, Sven Rudolph, Igor
Grobman, James Treacy, i Adam Di Carlo. Sebastian Ley va escriure el COM ES FA
d'instal·lació.

Miroslav Kuře ha escrit abundant documentació sobre les funcionalitats noves de
l'instal·lador de Debian Sarge.

Molts i molts usuaris i desenvolupadors de Debian hi han contribuït. S'ha de
fer menció especial de Michael Schmitz (suport del m68k), Frank Neumann (autor
original del manual d'instal·lació d'Amiga), Arto Astala, Eric Delaunay/Ben
Collins (informació sobre SPARC), Tapio Lehtonen, i Stéphane Bortzmeyer per
llurs nombrosos textos i addicions. Hem d'agrair a Pascal Le Bail la informació
sobre l'arrencada des de memòries USB.

Hi ha textos i informació excel·lents al COM ES FA de Jim Mintha sobre
arrencada en xarxa (no hi ha cap URL a l'abast), a PMF de Debian, a PMF de
Linux/m68k, a PMF de Linux per a processadors SPARC, i a PMF de Linux/Alpha,
entre d'altres. Hem d'expressar el nostre reconeixement envers els responsables
de totes aquestes fonts d'informació, per posar-les a disposició lliure i per
llur qualitat.

La secció del manual sobre instal·lacions amb «chroot» (Secció D.3, «Instal·lar
Debian GNU/Linux des d'un sistema Unix/Linux») procedeix, en part, de documents
propietat de Karsten M. Self.

La secció del manual sobre instal·lacions de «plip» (Secció D.4, «Instal·lació
de Debian GNU/Linux per «Parallel Line IP» (PLIP)») està basada en el
PLIP-Install-HOWTO, a cura de Gilles Lamiral.

E.4. Nota sobre les marques comercials

Totes les marques comercials pertanyen a llurs propietaris comercials
respectius.

Apèndix F. Llicència Pública General de GNU

Nota

This is an unofficial translation of the GNU General Public License into
Catalan. It was not published by the Free Software Foundation, and does not
legally state the distribution terms for software that uses the GNU GPL -- only
the original English text of the GNU GPL does that. However, we hope that this
translation will help Catalan speakers understand the GNU GPL better.

Ve't aquí una traducció no oficial al català de la llicència pública general
(GPL) de GNU. No ha estat publicada per la Free Software Foundation (fundació
per al programari lliure), i no defineix legalment els termes de distribució
del programari que utilitza la GPL de GNU -- només el text original en anglès
ho fa. Tot i això, esperem que aquesta traducció ajudi els catalanoparlants a
entendre millor la GPL de GNU.

Versió 2, Juny de 1991

Copyright (C) 1989, 1991 Free Software Foundation, Inc.
51 Franklin St, Fifth Floor, Boston, MA 02110-1301, USA.

Es permet que tothom faci còpies literals d'aquest document
de llicència i les distribueixi, però no és permès modificar-lo.

F.1. Preambul

Les llicències de la major part de programari estan pensades per prendre-us la
llibertat de compartir-lo i modificar-lo. Contràriament, la Llicència pública
general de GNU pretén garantir-vos la llibertat de compartir i modificar el
programari lliure -- assegurar-se que el programari sigui lliure per a tots els
seus usuaris i usuàries. Aquesta Llicència pública general de GNU afecta la
majoria del programari de la Free Software Foundation (fundació pel programari
lliure) i a qualsevol altre programa els autors o autores del qual decideixin
usar-la (algun altre programari de la Free Software Foundation, en canvi, està
protegit per la Llicència pública general per a biblioteques de GNU [N. de T.:
aquesta llicència, la LGPL, és la que actualment la FSF anomena Llicència
pública menys general]). També podeu aplicar-la als vostres programes.

Quan parlem de programari lliure («free software») ens referim a la llibertat,
no al preu [N. de T.: en català no hi ha l'ambigüitat que hi ha en anglès]. Les
nostres llicències públiques generals estan pensades per assegurar que tingueu
la llibertat de distribuir còpies del programari lliure (i cobrar per aquest
servei si així ho voleu), que rebeu el codi font o que el pugueu rebre si el
voleu, que pugueu modificar el programari o fer-ne servir parts en programes
lliures nous; i que sapigueu que podeu fer aquestes coses.

Per protegir els vostres drets, hem d'imposar restriccions que prohibeixin a
tothom denegar-vos aquests drets o demanar-vos que hi renuncieu. Aquestes
restriccions suposen algunes responsabilitats per a vós si distribuïu còpies
del programari o si el modifiqueu.

Per exemple, si distribuïu còpies d'un d'aquests programes, tant si és de franc
com per un preu, heu de donar als destinataris els mateixos drets que teniu
vós. Us heu d'assegurar que també ells rebin o puguin obtenir el codi font. I
els heu de fer saber aquests termes per tal que coneguin els seus drets.

Protegim els vostres drets en dos passos: (1) Ens reservem el copyright del
programari, i (2) us oferim aquesta llicència que us dóna permís legal per
copiar, distribuir i/o modificar el programari.

A més a més, per protegir-nos i protegir l'autor o autora, volem estar segurs
que tothom entén que no hi ha cap garantia per a aquest programari lliure. Si
algú modifica el programari i el passa, volem que els destinataris sàpiguen que
el que tenen no és l'original, per tal que qualsevol problema que haguessin
pogut introduir terceres persones no repercuteixi en la reputació de l'autor o
autora original.

Finalment, qualsevol programa lliure està constantment amenaçat per les patents
de programari. Volem evitar el perill de que els re-distribuïdors d'un programa
lliure acabin obtenint llicències de patents, i de resultes el programa
esdevingui propietat exclusiva d'algú. Per evitar-ho, he deixat clar que de
qualsevol patent se n'han d'emetre llicències per a tothom o no emetre'n cap.

Les condicions exactes per a la còpia, distribució i modificació són les
següents.

F.2. LLICÈNCIA PUBLICA GENERAL DE GNU

TERMES I CONDICIONS PER A LA CÒPIA, DISTRIBUCIÓ I MODIFICACIÓ

0. Aquesta llicència afecta a qualsevol programa o altra obra que contingui un
avís del posseïdor del copyright que digui que es pot distribuir sota els
termes d'aquesta llicència pública general. D'ara endavant, el «programa» es
refereix a aquest programa o obra, i una «obra basada en el programa» voldrà
dir el programa o qualsevol obra derivada segons la llei de copyright: és a dir
una obra que contingui el programa o alguna part d'ell, ja sigui literalment o
amb modificacions o bé traduït a altres llengües. (Per això mateix, les
traduccions s'inclouen sense cap limitació en el terme «modificació»). Ens
referim a Cada beneficiari de la llicència com a «vós».

Les activitats que no siguin còpia, distribució o modificació no estan
contemplades en aquesta llicència, queden fora del seu àmbit. No es restringeix
l'acte d'executar el programa, i la sortida del programa queda contemplada
només si el seu contingut constitueix una obra basada en el programa
(independentment de que s'hagi creat executant el programa). Que aquest sigui
el cas o no depèn de què faci el programa.

1. Podeu copiar i distribuir còpies literals del codi font del programa tal i
com el rebeu, en qualsevol mitjà, sempre i quan publiqueu en cada còpia, de
manera adient i ben visible, una nota de copyright i una renúncia de garantia;
manteniu intactes tots els avisos que fan referència a aquesta llicència i a
l'absència de garanties de cap mena; i lliureu a qualsevol altre destinatari
del programa una còpia d'aquesta llicència juntament amb el programa.

Podeu cobrar un preu per l'acte físic de trametre una còpia i podeu, si així ho
voleu, oferir alguna garantia a canvi d'un preu.

2. Podeu modificar la còpia o còpies del programa o qualsevol tros, tot fornint
una obra basada en el programa, i podeu copiar i distribuir aquestes
modificacions o obres sota els termes de la Secció 1 anterior, sempre i quan
també compliu les següents condicions:

 a. Heu de fer que els fitxers modificats portin indicacions ben visibles que
    diguin que heu modificat els fitxers i la data de la modificació.

 b. Heu d'atorgar gratuïtament a totes les terceres parts els termes d'aquesta
    mateixa llicència sobre la totalitat de qualsevol obra que distribuïu o
    publiqueu, que completament o en part contingui o sigui un derivat del
    programa o qualsevol part d'aquest.

 c. Si el programa modificat normalment llegeix instruccions interactivament
    quan s'executa, heu de fer que quan s'arrenqui per a aquest ús interactiu
    de la manera més habitual, imprimeixi o mostri un missatge que inclogui una
    nota de copyright adient i un avís de que no hi ha garantia (o, si de cas,
    que digui que la garantia l'oferiu vós mateix) i que els usuaris poden
    redistribuir el programa sota aquestes condicions, i que indiqui a l'usuari
    o usuària com veure una còpia d'aquesta llicència. (Excepció: si el mateix
    programa és interactiu però normalment no escriu un missatge d'aquesta
    mena, la vostra obra basada en el programa tampoc cal que l'escrigui).

Aquests requeriments afecten a l'obra modificada com un tot. Si hi ha parts
identificables que no estan derivades del programa, i es poden considerar
raonablement com a obres independents i separades en si mateixes, aleshores
aquesta llicència i els seus termes no s'apliquen a aquelles parts quan les
distribuïu com a obres separades. Però quan distribuïu aquestes mateixes parts
integrades en un tot que sigui una obra basada en el programa, la distribució
del tot s'ha de fer d'acord amb els termes d'aquesta llicència, i els permisos
atorgats a altres beneficiaris abasten el tot sencer i, per tant, totes i
cadascuna de les parts, independentment de qui les hagi escrites.

Així doncs, la intenció d'aquesta secció no és reclamar o disputar-vos cap dret
a codi que hagueu escrit del tot vós mateix. La intenció és més aviat exercir
el dret a controlar la distribució d'obres derivades o col·lectives basades en
el programa.

A més a més, la simple agregació amb el programa (o amb una obra basada en el
programa) d'altres obres no basades en el programa en un volum d'un mitjà
d'emmagatzemament o de distribució no posa aquestes altres obres sota l'àmbit
de la llicència.

3. Podeu copiar i distribuir el programa (o una obra basada en el programa,
segons la secció 2) en forma executable o de codi objecte d'acord amb els
termes de les Seccions 1 i 2 anteriors, sempre i quan també feu una de les
coses següents:

 a. L'acompanyeu amb el codi font complet corresponent, capaç de ser llegit per
    un ordinador i en un mitjà utilitzat habitualment per a l'intercanvi de
    programari; o

 b. L'acompanyeu amb un oferiment per escrit, amb validesa com a mínim fins al
    cap de tres anys, de subministrar a tota tercera part, i per un preu no
    superior al que us costi físicament realitzar la distribució, el codi font
    complet corresponent, que es distribuirà d'acord amb els termes de les
    seccions 1 i 2 anteriors en un mitjà utilitzat habitualment per a
    l'intercanvi de programari; o,

 c. L'acompanyeu amb la informació que hagueu rebut de l'oferiment de
    distribuir el codi font corresponent (Aquesta alternativa només és permesa
    per a la distribució no comercial i només si heu rebut el programa en forma
    executable o de codi objecte amb aquest oferiment, d'acord amb la subsecció
    b anterior).

El codi font per a una obra vol dir la forma preferida de l'obra per tal de
fer-hi modificacions. Per una obra executable, el codi font complet vol dir tot
el codi font per tots els mòduls que conté, més tots els fitxers de definició
d'interfícies associats si s'escau, més els scripts que es facin servir per
controlar la compilació i la instal·lació de l'executable si s'escau.
Tanmateix, fent una excepció especial, el codi font que es distribueixi no cal
que inclogui res del que normalment es distribueixi (sia en forma binària o de
codi font) amb els components principals (compilador, nucli o similars) del
sistema operatiu en què s'executa el programa, tret que el component en qüestió
acompanyi l'executable.

Si la distribució de l'executable consisteix en donar accés per copiar-lo d'un
lloc determinat, aleshores serveix com a distribució del codi font el fet de
donar un accés equivalent per copiar el codi font, encara que les terceres
parts no estiguin obligades a copiar el codi font en copiar el codi objecte.

4. No podeu copiar, modificar, reemetre llicències, o distribuir el programa si
no és de la forma expressa que atorga aquesta Llicència. Qualsevol altre intent
de copiar, modificar, reemetre llicències, o distribuir el programa és il·lícit
i finalitzarà automàticament els drets que hagueu obtingut d'aquesta llicència.
Tanmateix, les parts que hagin rebut de vós còpies o drets d'acord amb aquesta
llicència no veuran les seves llicències finalitzades mentre segueixin
observant-les estrictament.

5. No esteu obligat a acceptar aquesta llicència, donat que no l'heu signada.
Tanmateix, no hi ha cap altra opció que us doni permís per modificar o
distribuir el programa o les seves obres derivades. Aquestes accions queden
prohibides per la llei si no accepteu aquesta llicència. Així doncs, en
modificar o distribuir el programa o les seves obres derivades, esteu indicant
que accepteu aquesta llicència per fer-ho, i tots els seus termes i condicions
per copiar, distribuir o modificar el programa o obres basades en ell.

6. Cada cop que distribuïu el programa (o qualsevol obra basada en el
programa), el destinatari rep automàticament, de qui va emetre la llicència
originàriament, una llicència per copiar, distribuir o modificar el programa
sotmesa a aquests termes i condicions. No podeu imposar cap més restricció a
l'exercici dels drets que aquí es confereixen. No sou responsable de fer
complir aquesta llicència a terceres parts.

7. Si, a conseqüència d'una decisió judicial, una demanda per infracció d'una
patent o per qualsevol altra raó (no exclusivament relacionada amb patents), se
us imposen condicions (tant si és per ordre judicial, acord, o el que sigui)
que contradiuen les condicions d'aquesta llicència, no quedeu excusat de les
condicions d'aquesta llicència. Si no us és possible distribuir de manera que
satisfeu alhora les obligacions que us imposa aquesta llicència i qualsevol
altra obligació pertinent, aleshores resulta que no podeu distribuir el
programa en absolut. Per exemple, si una llicència de patent no permetés
redistribuir gratuïtament el programa a aquells que hagin rebut còpies de vós
directament o indirecta, aleshores la única manera en què podríeu satisfer tant
això com aquesta llicència seria abstenir-vos completament de distribuir el
programa.

Si qualsevol fragment d'aquesta secció quedés invalidat o no es pogués fer
complir en qualsevol circumstància particular, la intenció és que s'apliqui el
balanç de la secció, i que s'apliqui la secció en la seva totalitat en altres
circumstàncies.

El propòsit d'aquesta secció no és induir-vos a infringir cap patent ni cap
altre requeriment del dret a la propietat, o a discutir-ne la validesa; l'únic
propòsit d'aquesta secció és protegir la integritat del sistema de distribució
de programari lliure, que s'implementa amb pràctiques de llicència pública.
Molta gent ha fet generoses contribucions a l'ampli ventall de programari
distribuït per aquest sistema refiant-se de l'aplicació consistent del sistema;
li pertoca a l'autor, autora o donant decidir si vol distribuir programari per
algun altre sistema, i un beneficiari de la llicència no pot imposar aquesta
opció.

Aquesta secció pretén deixar del tot clar el que es considera una conseqüència
de la resta de la llicència.

8. Si hi ha països que restringeixen la distribució o l'ús del programari, ja
sigui per patents o per interfícies sota copyright, el posseïdor del copyright
original que posi el programa sota aquesta llicència pot afegir limitacions
geogràfiques explícites que excloguin aquests països, de manera que la
distribució només quedi permesa dintre dels països no exclosos, o entre ells.
En tal cas, aquesta llicència incorpora la limitació com si estigués escrita en
el text de la llicència.

9. La Free Software Foundation (Fundació per al programari lliure) pot publicar
versions revisades o noves de la llicència pública general de tant en tant.
Aquestes versions noves seran semblants en esperit a la versió present, però
poden diferir en detalls per tractar nous neguits o problemes. Cada versió rep
un número de versió distintiu. Si el programa especifica un número de versió
d'aquesta llicència que li és aplicable i «qualsevol versió posterior», teniu
l'opció de seguir els termes i condicions de la versió especificada o de
qualsevol versió publicada posteriorment per la Free Software Foundation. Si el
programa no especifica un número de versió d'aquesta llicència, podeu triar
qualsevol versió que hagi publicat la Free Software Foundation en qualsevol
data.

10. Si voleu incorporar parts del programa en altres programes lliures les
condicions de distribució dels quals són diferents, escriviu a l'autor per
demanar-li permís. Per al programari que està sota copyright de la Free
Software Foundation, escriviu a la Free Software Foundation; de vegades fem
excepcions per permetre-ho. Prendrem la nostra decisió guiats pels dos
objectius de mantenir la condició de lliure de tots els derivats del nostre
programari lliure i de promoure la compartició i la reutilització del
programari en general.

ABSÈNCIA DE GARANTIES

11. COM QUE LA LLICÈNCIA DEL PROGRAMA ÉS GRATUÏTA, NO HI HA GARANTIA PER AL
PROGRAMA, EN LA MESURA QUE HO PERMETI LA LLEI APLICABLE. EXCEPTE EL QUE
ALTRAMENT ES DIGUI PER ESCRIT, ELS POSSEÏDORS DEL COPYRIGHT I/O ALTRES PARTS
SUBMINISTREN EL PROGRAMA «TAL QUAL» SENSE CAP MENA DE GARANTIA, NI EXPLÍCITA NI
IMPLÍCITA, INCLOSES, ENTRE ALTRES, LES GARANTIES IMPLÍCITES DE
COMERCIALITZABILITAT I APTITUD PER A PROPÒSITS DETERMINATS. TOT EL RISC PEL QUE
FA A LA QUALITAT I RENDIMENT DEL PROGRAMA ÉS VOSTRE. EN CAS QUE EL PROGRAMA
RESULTÉS DEFECTUÓS, VÓS ASSUMIU TOT EL COST D'ASSISTÈNCIA, REPARACIÓ O
CORRECCIÓ.

12. EL POSSEÏDOR DEL COPYRIGHT, O QUALSEVOL ALTRA PART QUE PUGUI MODIFICAR O
REDISTRIBUIR EL PROGRAMA TAL I COM ES PERMET MÉS AMUNT NO US HAURÀ DE RESPONDRE
EN CAP CAS, TRET DEL QUE REQUEREIXI LA LLEI APLICABLE O ELS ACORDS PER ESCRIT,
PER PERJUDICIS, INCLOSOS ELS INCIDENTALS, DERIVATS, ESPECIALS O GENERALS QUE ES
DERIVIN DE L'ÚS O DE LA IMPOSSIBILITAT D'ÚS DEL PROGRAMA (INCLOSES ENTRE
D'ALTRES LES PÈRDUES DE DADES, LES DADES QUE EL PROGRAMA HAGI MALMÈS, LES
PÈRDUES QUE US HAGI PROVOCAT A VÓS O A TERCERS O LA IMPOSSIBILITAT DE QUE EL
PROGRAMA FUNCIONI AMB QUALSEVOL ALTRE PROGRAMA), FINS I TOT SI AQUEST POSSEÏDOR
O ALTRA PART HA ESTAT ADVERTIDA DE LA POSSIBILITAT D'AQUESTS PERJUDICIS.

FINAL DELS TERMES I CONDICIONS

F.3. Com podeu aplicar aquests termes als vostres programes nous

Si desenvolupeu un programa nou, i voleu que tingui l'ús més gran possible per
part del públic, la millor manera d'aconseguir-ho és fer-lo programari lliure
que tothom podrà redistribuir i modificar d'acord amb aquests termes.

Per fer-ho, afegiu els avisos següents al programa. El més segur és posar-los
al començament de cada fitxer font per transmetre de la manera més efectiva
l'exclusió de garanties; i cada fitxer hauria de portar com a mínim la línia de
«copyright» i un apuntador que indiqui on es pot trobar la nota sencera.

Una línia amb el nom del programa i una idea de què fa.
 Copyright (C) any i nom de l'autor o autora

Aquest programa és lliure; el podeu redistribuir i/o modificar d'acord
amb els termes de la Llicència pública general de GNU tal i com la publica
la Free Software Foundation; tant se val la versió 2 de la Llicència com
(si ho preferiu) qualsevol versió posterior.

Aquest programa es distribueix amb l'esperança que serà útil,
però SENSE CAP GARANTIA; ni tan sols amb la garantia de
COMERCIALITZABILITAT O APTITUD PER A PROPÒSITS DETERMINATS.
Vegeu la Llicència general pública de GNU per a més detalls.

Hauríeu d'haver rebut una còpia de la llicència pública general de GNU
amb aquest programa; si no, escriviu a la Free Software Foundation,
Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.

Poseu-hi la informació que calgui per contactar amb vós per correu electrònic i
de paper.

Si el programa és interactiu, feu-lo treure una breu nota com aquesta quan
arrenca en mode interactiu:

Gnomovisió versió 69, Copyright (C) any i nom de l'autor o autora
El Gnomovisió va SENSE CAP MENA DE GARANTIA; per saber-ne els detalls
piqueu mostra w. Això és programari lliure, i se us convida
a redistribuir-lo d'acord amb certes condicions; piqueu mostra c
per saber-ne els detalls.

Les instruccions hipotètiques «mostra g» i «mostra c» haurien de mostrar les
parts escaients de la llicència pública general. Naturalment, les instruccions
poden tenir altres noms que no siguin «mostra g» i «mostra c» -- fins i tot
podrien ser pics amb el ratolí o opcions de menú, o el que li vagi bé al vostre
programa.

També hauríeu d'aconseguir que l'empresari per qui treballeu (si treballeu de
programador) o la vostra escola, si és el cas, signin una «renúncia de
copyright» pel programa, si s'escau. Aquí teniu un exemple, canvieu-hi els
noms:

Ioiodina, S.A., per la present renuncia a tot interès en el copyright
del programa Gnomovisió (que fa l'aleta als compiladors) escrit
pel Jordi Pica Codi

signat per Mag Nat, 28 de
desembre de 1989 Mag Nat, Vici-President

Aquesta Llicència pública general no us permet incorporar el vostre programa en
programes de propietat. Si el vostre programa és una biblioteca de subrutines,
potser trobeu més útil permetre enllaçar (link) aplicacions de propietat amb la
biblioteca. Si és això el que voleu, feu servir la Llicència pública general
per a biblioteques de GNU per comptes d'aquesta llicència.

