<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>B.4. Contenidos del fichero de preconfiguración (para bullseye)</title>
<link rel="stylesheet" type="text/css" href="install.css">
<meta name="generator" content="DocBook XSL Stylesheets Vsnapshot">
<link rel="home" href="index.html" title="Guía Debian GNU/Linux de instalación">
<link rel="up" href="apb.html" title="Apéndice B. Instalar automáticamente utilizando preconfiguración">
<link rel="prev" href="apbs03.html" title="B.3. Crear un fichero de preconfiguración">
<link rel="next" href="apbs05.html" title="B.5. Opciones avanzadas">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<div class="navheader">
<table width="100%" summary="Navigation header">
<tr><th colspan="3" align="center">B.4. Contenidos del fichero de preconfiguración (para bullseye)</th></tr>
<tr>
<td width="20%" align="left">
<a accesskey="p" href="apbs03.html"><img src="images/prev.png" alt="Anterior"></a> </td>
<th width="60%" align="center">Apéndice B. Instalar automáticamente utilizando preconfiguración</th>
<td width="20%" align="right"> <a accesskey="n" href="apbs05.html"><img src="images/next.png" alt="Siguiente"></a>
</td>
</tr>
</table>
<hr>
</div>
<div class="sect1">
<div class="titlepage"><div><div><h2 class="title">
<a name="preseed-contents"></a>B.4. Contenidos del fichero de preconfiguración (para bullseye)</h2></div></div></div>
<p>Los fragmentos de configuración que se utilizan en este apéndice están también disponibles como un fichero de preconfiguración de ejemplo en <span class="phrase"><a class="ulink" href="../example-preseed.txt" target="_top">../example-preseed.txt</a></span>. </p>
<p>Tenga en cuenta que este ejemplo está basado en una instalación para la arquitectura Intel x86. Si está instalando en otra arquitectura no serán relevantes algunos de los ejemplos (como la selección de teclado o la instalación del cargador) y tendrá que reemplazarlos por los valores de debconf más apropiados a su arquitectura. </p>
<p>Para más detalles sobre el funcionamiento de los componentes del instalador de Debian, consulte <a class="xref" href="ch06s03.html" title="6.3. Uso de componentes individuales">Sección 6.3, “Uso de componentes individuales”</a>. </p>
<div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="preseed-l10n"></a>B.4.1. Localización</h3></div></div></div>
<p>En una instalación convencional, las preguntas sobre la localización se realizan en primer lugar, por lo que estos valores solo se pueden usar en la preconfiguración a través de initrd o utilizando los parámetros de arranque del núcleo. El modo automático (<a class="xref" href="apbs02.html#preseed-auto" title="B.2.3. Modo «auto»">Sección B.2.3, “Modo «auto»”</a>) incluye el ajuste de <code class="literal">auto-install/enable=true</code> (normalmente a través del alias de preconfiguración <code class="literal">auto</code>). Esta opción permite retrasar las preguntas sobre la localización, para que se puedan preconfigurar desde cualquier método. </p>
<p>Definir la configuración regional («locale») se puede utilizar para especificar tanto el idioma como el país y puede usarse cualquier combinación de idioma y país reconocido permitidos por <code class="classname">debian-installer</code>. Si la combinación no constituye una configuración regional válida, el instalador seleccionará automáticamente una válida para el idioma seleccionado. Puede utilizar <strong class="userinput"><code>locale=<em class="replaceable"><code>es_ES</code></em></code></strong>. para especificar la localización como un parámetro de arranque. </p>
<p>Aunque este método es muy fácil de usar, no permite la preconfiguración de todas las combinaciones posibles de idioma, país y configuración regional («locale»)<a href="#ftn.idm3690" class="footnote" name="idm3690"><sup class="footnote">[22]</sup></a>. Así que, de forma alternativa, puede preconfigurar los valores individualmente. El país y el idioma también se pueden definir como parámetros de arranque. </p>
<div class="informalexample"><pre class="screen"># Configuración de localización para el idioma, país y «locale».
d-i debian-installer/locale string es_ES

# Puede preconfigurar los valores de forma individual para una mayor flexiblidad.
#d-i debian-installer/language string en
#d-i debian-installer/country string NL
#d-i debian-installer/locale string en_GB.UTF-8
# Opcionalmente, especifique las «locales» adicionales a generar.
#d-i localechooser/supported-locales multiselect en_US.UTF-8, nl_NL.UTF-8
</pre></div>
<p>

</p>
<p>La configuración del teclado consiste en seleccionar un mapa de teclado y para (para mapas de teclado no latinos) un interruptor de conmutación para cambiar entre el mapa de teclado no latino y el mapa de teclado para América del Norte. Durante la instalación, solo están disponibles los mapas de teclado básicos. Las variantes más avanzadas solo están disponibles en un sistema instalado, mediante la orden <span class="command"><strong>dpkg-reconfigure keyboard-configuration</strong></span>. </p>
<div class="informalexample"><pre class="screen"># Selección de teclado.
d-i keyboard-configuration/xkb-keymap select es
# d-i keyboard-configuration/toggle select No toggling
</pre></div>
<p>

</p>
<p>Para omitir la configuración del teclado preconfigure <code class="classname">keymap</code> con <strong class="userinput"><code>skip-config</code></strong>. Esto hará que el mapa de teclado del núcleo permanezca activo. </p>
</div>
<div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="preseed-network"></a>B.4.2. Configuración de red</h3></div></div></div>
<p>Por supuesto, la preconfiguración de la tarjeta de red no funcionará si está obteniendo el fichero de preconfiguración desde la red. Pero esta opción es muy cómoda cuando está arrancando desde un disco óptico o memoria USB. Si carga ficheros de preconfiguración desde la red, puede introducir los parámetros de configuración de la red a través de parámetros de arranque del núcleo. </p>
<p>Use un parámetro de arranque similar a <strong class="userinput"><code>interface=<em class="replaceable"><code>eth1</code></em></code></strong> si tiene que escoger una interfaz particular durante el arranque vía red antes de cargar el fichero de preconfiguración de la red. </p>
<p>Aunque generalmente no es posible preconfigurar la red cuando se hace la preconfiguración a través de una red (usando <span class="quote">“<span class="quote">preseed/url</span>”</span>), puede utilizar este truco para evitar esto si, por ejemplo, quiere configurar una dirección estática para la interfaz de red. El truco es obligar a que la configuración de red se ejecute de nuevo después de haber cargado el fichero de preconfiguración creando un guión <span class="quote">“<span class="quote">preseed/run</span>”</span> con las siguientes órdenes: </p>
<div class="informalexample"><pre class="screen">kill-all-dhcp; netcfg
</pre></div>
<p>

</p>
<p>Las siguientes variables de debconf son relevantes para la configuración de la red. </p>
<div class="informalexample"><pre class="screen"># Deshabilitar completamente la configuración de red. Es útil para
# instalaciones desde cdrom o dispositivos que no están en red, para
# los cuales las preguntas y advertencias de red así como los tiempos
# de espera serían molestos.
#d-i netcfg/enable boolean false

# netcfg escogerá la interfaz que tiene enlace si puede. Esto hace que no
# muestre la lista si hay más de un interfaz.
d-i netcfg/choose_interface select auto

# Escoger una interfaz específica en lugar de la encontrada:
#d-i netcfg/choose_interface select eth1

# Para definir un tiempo de espera de detección de enlace distinto (por
# omisión, 3 segundos).
# Los valores se interpretan como segundos.
#d-i netcfg/link_wait_timeout string 10

# Si tienes un servidor de DHCP lento y el instalador expira intentando
# conectarse a él, esto puede serle útil.
#d-i netcfg/dhcp_timeout string 60
#d-i netcfg/dhcpv6_timeout string 60

# La configuración automática de la red es la predeterminada.
# Si prefiere configurar la red de forma manual, descomente esta línea
# y la configuración de red estática más abajo.
#d-i netcfg/disable_autoconfig boolean true

# Si quieres que el fichero de preconfiguración funcione tanto en
# sistemas con un servidor de DHCP como en los que no lo tienen,
# descomenta estas líneas y añade la configuración estática de red
# a continuación.
#d-i netcfg/dhcp_failed note
#d-i netcfg/dhcp_options select Configure network manually

# Configuración estática de red
#
#Ejemplo IPv4
#d-i netcfg/get_ipaddress string 192.168.1.42
#d-i netcfg/get_netmask string 255.255.255.0
#d-i netcfg/get_gateway string 192.168.1.1
#d-i netcfg/get_nameservers string 192.168.1.1
#d-i netcfg/confirm_static boolean true
#
# Ejemplo IPv6
#d-i netcfg/get_ipaddress string fc00::2
#d-i netcfg/get_netmask string ffff:ffff:ffff:ffff::
#d-i netcfg/get_gateway string fc00::1
#d-i netcfg/get_nameservers string fc00::1
#d-i netcfg/confirm_static boolean true

# Cualquier nombre de host y de dominio que se obtengan por DHCP se utilizan
# antes que los valores aquí definidos. Por otra parte, definir los valores
# impide que se muestren las preguntas, incluso si los valores provienen
# de DHCP.
d-i netcfg/get_hostname string unassigned-hostname
d-i netcfg/get_domain string unassigned-domain

# Si deseas forzar un nombre de host, sin importar lo que devuelva
# el servidor DHCP, o cual es la entrada DNS inversa para la IP, descomenta
# y ajuste la siguiente línea.
#d-i netcfg/hostname string somehost

# Desactivar el molesto diálogo de clave WEP.
d-i netcfg/wireless_wep string
# El nombre de servidor raro que algunos ISP utilizan como una especie de
# contraseña
#d-i netcfg/dhcp_hostname string radish

# Si se requiere firmware no libre para la red o para otro dispositivo,
# puedes configurar el instalador para que siempre intente cargarlo, sin
# preguntar. O cambiar a false para inhibir la pregunta.
#d-i hw-detect/load_firmware boolean true
</pre></div>
<p>Tenga en cuenta que <span class="command"><strong>netcfg</strong></span> determinará automáticamente la máscara de red si no se preconfigura <code class="classname">netcfg/get_netmask</code>. En tal caso, la variable tiene que marcarse como <code class="literal">seen</code> en el caso de las instalaciones automáticas. De la misma forma, <span class="command"><strong>netcfg</strong></span> elegirá una dirección apropiada si <code class="classname">netcfg/get_gateway</code> no ha sido establecida. La excepción es definir <code class="classname">netcfg/get_gateway</code> como <span class="quote">“<span class="quote">none</span>”</span> para especificar que no se debería usar puerta de enlace alguna. </p>
</div>
<div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="preseed-network-console"></a>B.4.3. Consola de red</h3></div></div></div>
<div class="informalexample"><pre class="screen"># Use los siguientes parámetros si desea hacer uso del componente
# network-console (consola de red) para instalaciones remotas vía SSH. 
# Sólo tiene sentido si desea hacer el resto de la instalación
# manualmente
#d-i anna/choose_modules string network-console
#d-i network-console/authorized_keys_url string http://10.0.0.1/openssh-key
#d-i network-console/password password r00tme
#d-i network-console/password-again password r00tme
</pre></div>
<p>Puedes encontrar más información sobre la consola de red en <a class="xref" href="ch06s03.html#network-console" title="6.3.10. Instalación a través de la red-consola">Sección 6.3.10, “Instalación a través de la red-consola”</a>. </p>
</div>
<div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="preseed-mirror"></a>B.4.4. Configuración de la réplica</h3></div></div></div>
<p>Dependiendo del método de instalación que utilice se utilizará una réplica tanto para descargar componentes adicionales del instalador como para instalar el sistema base y para configurar <code class="filename">/etc/apt/sources.list</code> en el sistema instalado. </p>
<p>El parámetro <code class="classname">mirror/suite</code> determina la publicación que utiliza el sistema instalado. </p>
<p>El parámetro <code class="classname">mirror/udeb/suite</code> determina la publicación de los componentes adicionales del instalador. Sólo es necesario establecer este valor si se llegan a descargar componentes a través de la red y debería coincidir con el valor que se utilizó para construir la imagen de arranque «initrd» para el método de instalación utilizado. Habitualmente, el instalador usará automáticamente el valor adecuado y no debería existir la necesidad de configurar esto. </p>
<div class="informalexample"><pre class="screen"># No tienes que definir la cadena mirror/country si seleccionas ftp.
# Valor predeterminado para el protocolo del espejo: http.
#d-i mirror/protocol string ftp
d-i mirror/country string manual
d-i mirror/http/hostname string ftp.es.debian.org
d-i mirror/http/directory string /debian
d-i mirror/http/proxy string

# Programas a instalar.
#d-i mirror/suite string testing
# Conjunto de programas a utilizar para descargar componentes de instalación
# (opcional)
#d-i mirror/udeb/suite string testing
</pre></div>
</div>
<div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="preseed-account"></a>B.4.5. Configuración de cuentas de usuario</h3></div></div></div>
<p>Puede preconfigurar la contraseña para la cuenta del superusuario (<span class="quote">“<span class="quote">root</span>”</span>) y el nombre y la contraseña de la primera cuenta de usuario normal. Para las contraseñas se pueden utilizar tanto <span class="emphasis"><em>hashes</em></span> crypt(3) como valores en texto plano . </p>
<div class="warning"><table border="0" summary="Warning">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Aviso]" src="images/warning.png"></td>
<th align="left">Aviso</th>
</tr>
<tr><td align="left" valign="top"><p>Tenga en cuenta que la preconfiguración de la contraseña no es un proceso seguro dado que cualquiera que pueda acceder a los ficheros de preconfiguración podrá conocer las contraseñas. Se considera seguro almacenar las contraseñas en hashes salvo que se utilice un algoritmo de hashes débil como DES o MD5, susceptibles a ataques de fuerza bruta. Los algoritmos de hashes recomendados para las contraseñas son SHA-256 y SHA512. </p></td></tr>
</table></div>
<div class="informalexample"><pre class="screen"># Omite crear una cuenta de superusuario (la cuenta del usuario normal
# podrá utilizar sudo).
#d-i passwd/root-login boolean false
# Igualmente, se puede omitir la creación de una cuenta de un usuario
# normal.
#d-i passwd/make-user boolean false

# Contraseña del superusuario, bien en texto en claro
#d-i passwd/root-password password r00tme
#d-i passwd/root-password-again password r00tme
# o cifrada utilizando un hash crypt(3)
#d-i passwd/root-password-crypted password [crypt(3) hash]

# Para crear una cuenta de un usuario:
#d-i passwd/user-fullname string Debian User
#d-i passwd/username string debian
# Contraseña del usuario normal, bien en texto en claro:
#d-i passwd/user-password password insecure
#d-i passwd/user-password-again password insecure
# o cifrada utilizando un hash crypt(3).
#d-i passwd/user-password-crypted password [crypt(3) hash]
# Crea el primer usuario con el UID especificado en lugar del
# predeterminado.
#d-i passwd/user-uid string 1010

# La cuenta de usuario se añadirá a ciertos grupos comunes iniciales. 
# Para cambiarlos, use lo siguiente:
#d-i passwd/user-default-groups string audio cdrom video
</pre></div>
<p>También se pueden preconfigurar las variables <code class="classname">passwd/root-password-crypted</code> y <code class="classname">passwd/user-password-crypted</code> utilizando como valor <span class="quote">“<span class="quote">!</span>”</span>. Si hace esto para cualquiera de las dos cuentas ésta se deshabilitará. Esto puede ser de ayuda para el caso de la cuenta de superusuario, siempre que tenga un mecanismo alternativo para poder llevar a cabo tareas de administración o acceder como superusuario (como por ejemplo, la utilización de autenticación mediante clave SSH o <span class="command"><strong>sudo</strong></span>). </p>
<p>Puede usar la siguiente orden (disponible en el paquete <code class="classname">whois</code>) para generar una hash crypt(3) basado en SHA-512 para una contraseña: </p>
<div class="informalexample"><pre class="screen">mkpasswd -m sha-512
</pre></div>
<p>

</p>
</div>
<div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="preseed-time"></a>B.4.6. Configuración del reloj y zona horaria</h3></div></div></div>
<div class="informalexample"><pre class="screen"># Controla si el reloj del sistema debe establecerse a UTC.
d-i clock-setup/utc boolean true

# Puede establecer esto a cualquier valor válido para $TZ;
# consulte los contenidos de /usr/share/zoneinfo/ para hallar
# valores válidos.
d-i time/zone string US/Eastern

# Controla si se usará NTP para establecer el reloj durante la
# instalación
d-i clock-setup/ntp boolean true
# Servidores NTP a usar. El predeterminado es casi siempre
# el mejor.
#d-i clock-setup/ntp-server string ntp.example.com
</pre></div>
</div>
<div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="preseed-partman"></a>B.4.7. Particionado</h3></div></div></div>
<p>La utilización de la preconfiguración para particionar el disco duro está limitada a lo que <code class="classname">partman-auto</code> puede permitir. Puede elegir o bien particionar el espacio libre en el disco o todo el disco. La distribución del disco puede basarse en una receta existente o utilizar una receta de un fichero o una receta incluida en el fichero de preconfiguración. Actualmente no es posible utilizar la preconfiguración para particionar más de un disco. </p>
<p>Es posible preconfigurar un particionado usando RAID, LVM y cifrado, pero no con toda la flexibilidad ofrecida al realizar una instalación sin preconfiguración. </p>
<p>Los ejemplos a continuación sólo ofrecen información básica sobre el uso de recetas. Para una información detallada consulte los ficheros <code class="filename">partman-auto-recipe.txt</code> y <code class="filename">partman-auto-raid-recipe.txt</code>, incluidos en el paquete <code class="classname">debian-installer</code>. Ambos ficheros también están disponibles desde el <a class="ulink" href="https://salsa.debian.org/installer-team/debian-installer/tree/master/doc/devel" target="_top">repositorio de fuentes de <code class="classname">debian-installer</code></a>. Tenga en cuenta que la funcionalidad permitida puede variar entre diferentes publicaciones. </p>
<div class="warning"><table border="0" summary="Warning">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Aviso]" src="images/warning.png"></td>
<th align="left">Aviso</th>
</tr>
<tr><td align="left" valign="top"><p>La identificación de los discos depende del orden en el que se cargaron las unidades. Asegúrese de utilizar el disco correcto antes de configurarlo si el sistema tiene más de un disco. </p></td></tr>
</table></div>
<div class="sect3">
<div class="titlepage"><div><div><h4 class="title">
<a name="preseed-partman-example"></a>B.4.7.1. Ejemplo de particionado</h4></div></div></div>
<div class="informalexample"><pre class="screen"># Si el sistema tiene espacio libre puede elegir particionar solamente
# este espacio. Se prestará atención a este parámetro solamente
# si no se ha definido partman-auto/method (más abajo). 
#d-i partman-auto/init_automatically_partition select biggest_free
# También puede especificar un disco a particionar. Si el sistema
# solo tiene un disco, el instalador lo seleccionará de manera 
# predeterminada, de lo contrario debe indicar el nombre del dispositivo 
# en formato tradicional (no devfs), p. ej., /dev/sda en lugar de 
# p. ej., /dev/discs/disc0/disc).
# Por ejemplo, si quiere usar el primer disco duro SCSI/SATA:
#d-i partman-auto/disk string /dev/sda
# Además, debe especificar el método a utilizar.
# Los métodos disponibles actualmente son:
# - regular: usa el tipo de partición habitual para su arquitectura
# - lvm:     usa LVM para particionar el disco
# - crypto:  usa LVM dentro de una partición cifrada
d-i partman-auto/method string lvm
# Puede definir la cantidad de espacio que se utilizará para el grupo del 
# volumen LVM. Puede elegir entre indicar el tamaño y la unidad (p. ej., 20 GB), 
# porcentaje de espacio disponible o la palabra clave 'max'.
d-i partman-auto-lvm/guided_size string max
# Si alguno de los discos que va a ser automáticamente particionado
# contiene una configuración antigua de LVM, se le presentará un
# aviso al usuario. Puede preconfigurarse para que no aparezca:
d-i partman-lvm/device_remove_lvm boolean true
# De la misma forma para «arrays» RAID por software preexistentes:
d-i partman-md/device_remove_md boolean true
# Y lo mismo pasa con la confirmación para escribir las particiones
# lvm.
d-i partman-lvm/confirm boolean true
d-i partman-lvm/confirm_nooverwrite boolean true
# Puede elegir cualquiera de las tres recetas de particionado
# predefinidas:
# - atomic: todos los ficheros en una partición
# - home:   separa la partición /home
# - multi:  separar las particiones /home, /var y /tmp
d-i partman-auto/choose_recipe select atomic
# O indicar su propia receta...
# Si tiene una forma de colocar el fichero de receta dentro del entorno
# del d-i, simplemente puede direccionarlo a éste.
#d-i partman-auto/expert_recipe_file string /hd-media/recipe
# Si no, puede colocar la receta completa en el fichero de
# preconfiguración en una única línea (lógica).
# Este ejemplo crea una pequeña partición /boot, una
# partición de intercambio apropiada y usa el resto del espacio para
# la partición raíz:
#d-i partman-auto/expert_recipe string                         \
#      boot-root ::                                            \
#              40 50 100 ext3                                  \
#                      $primary{ } $bootable{ }                \
#                      method{ format } format{ }              \
#                      use_filesystem{ } filesystem{ ext3 }    \
#                      mountpoint{ /boot }                     \
#              .                                               \
#              500 10000 1000000000 ext3                       \
#                      method{ format } format{ }              \
#                      use_filesystem{ } filesystem{ ext3 }    \
#                      mountpoint{ / }                         \
#              .                                               \
#              64 512 300% linux-swap                          \
#                      method{ swap } format{ }                \
#              .
# El formato completo de la receta se documenta en el fichero
# «partman-auto-recipe.txt», incluido en el paquete 'debian-installer' o
# en el repositorio de fuentes del instalador de Debian.
# También documenta cómo definir opciones tales como las etiquetas del
# sistema de ficheros, nombres del grupo de volúmenes y qué dispositivos
# físicos incluir en un grupo de volúmenes.
## Particionado para EFI
# Si el sistema necesita una partición EFI, puede añadir algo como esto
# a la receta anterior, como primer elemento de la receta:
#               538 538 1075 free                              \
#                      $iflabel{ gpt }                         \
#                      $reusemethod{ }                         \
#                      method{ efi }                           \
#                      format{ }                               \
#               .                                              \
#
# El fragmento anterior es para la arquitectura amd64; los detalles podrían
# ser diferentes en otras arquitecturas. El paquete 'partman-auto' disponible
# en el repositorio fuente D-I puede contener algún ejemplo que pueda seguir.
# La siguiente receta hace que «partman» particione automáticamente el
# espacio sin confirmación, en caso de que usted haya indicado qué hacer
# mediante uno de los métodos mencionados anteriormente.
d-i partman-partitioning/confirm_write_new_label boolean true
d-i partman/choose_partition select finish
d-i partman/confirm boolean true
d-i partman/confirm_nooverwrite boolean true
# Forzar el arranque UEFI (se perderá el modo de 'compatibilidad con BIOS'). 
# Predeterminado: false.
#d-i partman-efi/non_efi_system boolean true
# Asegurarse de que la tabla de particiones es GPT - requerido para EFI
#d-i partman-partitioning/choose_label select gpt
#d-i partman-partitioning/default_label string gpt
# Cuando esté habilitado el cifrado del disco, omitir el borrado seguro 
# de las particiones de antemano.
#d-i partman-auto-crypto/erase_disks boolean false
</pre></div>
</div>
<div class="sect3">
<div class="titlepage"><div><div><h4 class="title">
<a name="preseed-partman-raid"></a>B.4.7.2. Particionar usando RAID</h4></div></div></div>
<p>También puede utilizar la preconfiguración para configurar las particiones en arreglos RAID por software. Se puede utilizar para niveles RAID 0, 1 y 5, 6 y 10 creando arreglos degradados y especificando dispositivos libres. </p>
<p>Puede configurar grub para que se instale en todos los dispositivos utilizados en el arreglo si está utilizando RAID 1, consulte <a class="xref" href="apbs04.html#preseed-bootloader" title="B.4.11. Instalación del cargador de arranque">Sección B.4.11, “Instalación del cargador de arranque”</a>. </p>
<div class="warning"><table border="0" summary="Warning">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Aviso]" src="images/warning.png"></td>
<th align="left">Aviso</th>
</tr>
<tr><td align="left" valign="top"><p>Es fácil equivocarse en este tipo de particionado automático. También es una funcionalidad que es poco probada por los desarrolladores del <code class="classname">debian-installer</code>. El usuario es responsable de aplicar bien las posibles recetas (de forma que tengan sentido y no entren en conflicto). Si tiene problemas compruebe <code class="filename">/var/log/syslog</code>. </p></td></tr>
</table></div>
<div class="informalexample"><pre class="screen"># AVISO: esta opción es de calidad beta y debería utilizarse con
# cuidado.
# Debería definirse el como «raid».
#d-i partman-auto/method string raid
# Especificar los discos a particionar. Deberían tener la misma
# distribución por lo que esto sólo funcionará si los discos son del
# mismo tamaño.
#d-i partman-auto/disk string /dev/sda /dev/sdb
# A continuación, tiene que especificar las particiones físicas que se
# utilizarán.
#d-i partman-auto/expert_recipe string \
#      multiraid ::                                         \
#              1000 5000 4000 raid                          \
#                      $primary{ } method{ raid }           \
#              .                                            \
#              64 512 300% raid                             \
#                      method{ raid }                       \
#              .                                            \
#              500 10000 1000000000 raid                    \
#                      method{ raid }                       \
#              .
# Por último, tiene que especificar cómo van a utilizarse las
# particiones antes definidas en la configuración RAID. Recuerde que
# tiene que utilizar los números de partición correctos para las
# particiones lógicas. Se permiten los niveles RAID 0, 1, 5, 6 y 10:
# los dispositivos se separan mediante «#».
# Los parámetros son
# &lt;raidtype&gt; &lt;devcount&gt; &lt;sparecount&gt; &lt;fstype&gt; &lt;mountpoint&gt; \
#          &lt;devices&gt; &lt;sparedevices&gt;
# Se soportan los niveles RAID 0, 1 y 5,6 y 10; los dispositivos se separan
# con "#"
#d-i partman-auto-raid/recipe string \
#    1 2 0 ext3 /                    \
#          /dev/sda1#/dev/sdb1       \
#    .                               \
#    1 2 0 swap -                    \
#          /dev/sda5#/dev/sdb5       \
#    .                               \
#    0 2 0 ext3 /home                \
#          /dev/sda6#/dev/sdb6       \
#    .
# Para información adicional, consulte el fichero «partman-auto-raid-recipe.txt»
# incluido en el paquete debian-installer, o a través del repositorio de fuentes
# del instalador de Debian.
# Esto hace que partman particione de forma automática sin
# confirmación.
d-i partman-md/confirm boolean true
d-i partman-partitioning/confirm_write_new_label boolean true
d-i partman/choose_partition select finish
d-i partman/confirm boolean true
d-i partman/confirm_nooverwrite boolean true
</pre></div>
</div>
<div class="sect3">
<div class="titlepage"><div><div><h4 class="title">
<a name="preseed-partman-mount-styles"></a>B.4.7.3. Controlar como se montan las particiones</h4></div></div></div>
<p>Usualmente los sistemas de ficheros se montan con el identificador único universal (UUID) como clave; esto permite montarlos adecuadamente a pesar de que el nombre del dispositivo cambie. Los identificadores UUID son largos y difíciles de leer, así que si prefiere, el instalador puede montar los sistemas de ficheros basado en los nombres tradicionales de los dispositivos o basado en una etiqueta asignada por usted. Si se especifica montaje por etiqueta, cualquier sistema de ficheros sin etiqueta se montará a partir del UUID. </p>
<p>Los dispositivos con nombres estables, tales como los volúmenes lógicos LVM continuarán usando sus nombres tradicionales en lugar de los UUID. </p>
<div class="warning"><table border="0" summary="Warning">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Aviso]" src="images/warning.png"></td>
<th align="left">Aviso</th>
</tr>
<tr><td align="left" valign="top"><p>Los nombres de dispositivos tradicionales pueden cambiar basados en el orden en el cual el núcleo los descubra al momento del arranque, lo que puede causar un montaje erróneo de los sistemas de ficheros. De la misma forma, las etiquetas pueden descoordinarse si conecta un nuevo disco o unidad USB. Su sistema se comportará aleatoriamente en el momento del arranque si sucede esto. </p></td></tr>
</table></div>
<div class="informalexample"><pre class="screen"># De forma predeterminada se montará por UUID, pero puede elegir 
# "traditional" para usar nombres de dispositivos tradicionales, o
# "label" para intentar con etiquetas de sistemas de ficheros antes
# de usar el identificador UUID.
#d-i partman/mount_style select uuid
</pre></div>
</div>
</div>
<div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="preseed-base-installer"></a>B.4.8. Configuración del sistema base</h3></div></div></div>
<p>No hay mucho que se pueda preconfigurar en esta etapa de la instalación. La única pregunta concerniente a la instalación se refiere al núcleo. </p>
<div class="informalexample"><pre class="screen"># Configure APT para que no instale paquetes recomendados por omisión.
# El uso de esta opción puede resultar en un sistema incompleto, y por ello
# sólo lo deberían usar usuarios experimentados.
#d-i base-installer/install-recommends boolean false

# El (meta) paquete de imagen de núcleo que instalar; se puede utilizar
# «none» si no se va a instalar ningún núcleo.
#d-i base-installer/kernel/image string linux-image-686
</pre></div>
</div>
<div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="preseed-apt"></a>B.4.9. Configuración de APT</h3></div></div></div>
<p>Tanto la configuración de <code class="filename">/etc/apt/sources.list</code> como las opciones de configuraciones básicas se automatizan completamente de acuerdo al método de instalación y las respuestas a preguntas anteriores. De forma opcional, puede añadir otros repositorios (locales). </p>
<div class="informalexample"><pre class="screen"># Choose, if you want to scan additional installation media
# (default: false).
d-i apt-setup/cdrom/set-first boolean false
# You can choose to install non-free and contrib software.
#d-i apt-setup/non-free boolean true
#d-i apt-setup/contrib boolean true
# Uncomment the following line, if you don't want to have the sources.list
# entry for a DVD/BD installation image active in the installed system
# (entries for netinst or CD images will be disabled anyway, regardless of
# this setting).
#d-i apt-setup/disable-cdrom-entries boolean true
# Uncomment this if you don't want to use a network mirror.
#d-i apt-setup/use_mirror boolean false
# Select which update services to use; define the mirrors to be used.
# Values shown below are the normal defaults.
#d-i apt-setup/services-select multiselect security, updates
#d-i apt-setup/security_host string security.debian.org

# Additional repositories, local[0-9] available
#d-i apt-setup/local0/repository string \
#       http://local.server/debian stable main
#d-i apt-setup/local0/comment string local server
# Enable deb-src lines
#d-i apt-setup/local0/source boolean true
# URL to the public key of the local repository; you must provide a key or
# apt will complain about the unauthenticated repository and so the
# sources.list line will be left commented out.
#d-i apt-setup/local0/key string http://local.server/key
# If the provided key file ends in ".asc" the key file needs to be an
# ASCII-armoured PGP key, if it ends in ".gpg" it needs to use the
# "GPG key public keyring" format, the "keybox database" format is
# currently not supported.

# By default the installer requires that repositories be authenticated
# using a known gpg key. This setting can be used to disable that
# authentication. Warning: Insecure, not recommended.
#d-i debian-installer/allow_unauthenticated boolean true

# Uncomment this to add multiarch configuration for i386
#d-i apt-setup/multiarch string i386

</pre></div>
</div>
<div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="preseed-pkgsel"></a>B.4.10. Selección de paquetes</h3></div></div></div>
<p>Puede elegir la instalación de cualquier combinación de las tareas que están disponibles. Las tareas disponibles en el momento de escribir estas líneas incluyen: </p>
<div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem"><p><strong class="userinput"><code>standard</code></strong> (herramientas estándar) </p></li>
<li class="listitem"><p><strong class="userinput"><code>desktop</code></strong> (escritorio gráfico) </p></li>
<li class="listitem"><p><strong class="userinput"><code>gnome-desktop</code></strong> (escritorio Gnome) </p></li>
<li class="listitem"><p><strong class="userinput"><code>xfce-desktop</code></strong> (escritorio XFCE) </p></li>
<li class="listitem"><p><strong class="userinput"><code>kde-desktop</code></strong> (escritorio KDE Plasma) </p></li>
<li class="listitem"><p><strong class="userinput"><code>cinnamon-desktop</code></strong> (escritorio Cinnamon) </p></li>
<li class="listitem"><p><strong class="userinput"><code>mate-desktop</code></strong> (escritorio MATE) </p></li>
<li class="listitem"><p><strong class="userinput"><code>lxde-desktop</code></strong> (escritorio LXDE) </p></li>
<li class="listitem"><p><strong class="userinput"><code>web-server</code></strong> (servidor web) </p></li>
<li class="listitem"><p><strong class="userinput"><code>ssh-server</code></strong> (servidor SSH) </p></li>
</ul></div>
<p>También puede no seleccionar ninguna tarea y forzar la instalación de un conjunto de paquetes de alguna otra forma. Le recomendamos que siempre introduzca la tarea <strong class="userinput"><code>Sistema estándar</code></strong>. </p>
<p>O si no quieres que se muestre el diálogo tasksel en absoluto, preconfigura <code class="classname">pkgsel/run_tasksel</code> (en ese caso no se instala ningún paquete a través de tasksel). </p>
<p>Puede utilizar el parámetro <code class="classname">pkgsel/include</code> para instalar paquetes individuales además de los paquetes que las tareas instalan. Este parámetro toma valores que pueden estar separados por comas o por espacios, de forma que se puede utilizar fácilmente en la línea de órdenes del núcleo. </p>
<div class="informalexample"><pre class="screen">#tasksel tasksel/first multiselect standard, web-server, kde-desktop

# Or choose to not get the tasksel dialog displayed at all (and don't install
# any packages):
#d-i pkgsel/run_tasksel boolean false

# Individual additional packages to install
#d-i pkgsel/include string openssh-server build-essential
# Whether to upgrade packages after debootstrap.
# Allowed values: none, safe-upgrade, full-upgrade
#d-i pkgsel/upgrade select none

# You can choose, if your system will report back on what software you have
# installed, and what software you use. The default is not to report back,
# but sending reports helps the project determine what software is most
# popular and should be included on the first CD/DVD.
#popularity-contest popularity-contest/participate boolean false
</pre></div>
</div>
<div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="preseed-bootloader"></a>B.4.11. Instalación del cargador de arranque</h3></div></div></div>
<div class="informalexample"><pre class="screen"><span class="phrase"># Grub es el gestor de arranque predeterminado (para la arquitectura x86).</span>

# Esta es una configuración adecuada y segura, hace que grub se instale
# automáticamente en la partición/sector de arranque (UEFI) si no se detecta otro
# sistema operativo en la máquina.
d-i grub-installer/only_debian boolean true

# Lo siguiente hace que «grub-installer» se instale en la partición/sector de arranque
# (UEFI) en caso de que se encuentre instalado otro sistema operativo.
# Esto es menos seguro puesto que podría hacer que el otro sistema operativo
# no se pudiera arrancar.
d-i grub-installer/with_other_os boolean true

# Debido principalmente al uso de memorias USB, no siempre se puede determinar 
# con seguridad la unidad de disco principal, por lo que necesita especificar lo siguiente:
#d-i grub-installer/bootdev  string /dev/sda
# Para instalar el cargador arranque en la unidad de disco principal (asumiendo que no sea una memoria USB):
#d-i grub-installer/bootdev  string default

# Alternativamente, descomente y edite estas líneas
# si desea instalar en una ubicación distinta a la partición/sector de arranque UEFI:
#d-i grub-installer/only_debian boolean false
#d-i grub-installer/with_other_os boolean false
#d-i grub-installer/bootdev  string (hd0,1)
# Para instalar grub en múltiples discos:
#d-i grub-installer/bootdev  string (hd0,1) (hd1,1) (hd2,1)

# Contraseña opcional para grub, bien sea en texto plano
#d-i grub-installer/password password r00tme
#d-i grub-installer/password-again password r00tme
# o cifrada usando un hash MD5, consulte grub-md5-crypt(8).
#d-i grub-installer/password-crypted password [MD5 hash]

# Use la siguiente opción para añadir parámetros de arranque 
# opcionales para el sistema instalado (en caso de que el
# gestor de arranque del instalador lo permita).
# Nota: Las opciones que se pasen al instalador se añadirán
# automáticamente.
#d-i debian-installer/add-kernel-opts string nousb
</pre></div>
<p>Se puede generar un hash MD5 para una contraseña <code class="classname">grub</code> usando <span class="command"><strong>grub-md5-crypt</strong></span>, o usando el comando del ejemplo en <a class="xref" href="apbs04.html#preseed-account" title="B.4.5. Configuración de cuentas de usuario">Sección B.4.5, “Configuración de cuentas de usuario”</a>. </p>
</div>
<div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="preseed-finish"></a>B.4.12. Finalizar la instalación</h3></div></div></div>
<div class="informalexample"><pre class="screen"># En instalaciones desde la consola serial, las consolas virtuales usuales
# (VT1-VT6) están deshabilitadas normalmente en «/etc/inittab». Descomente
# la siguiente línea para evitar este comportamiento:
#d-i finish-install/keep-consoles boolean true

# Omitir el mensaje final sobre la finalización de la instalación.
d-i finish-install/reboot_in_progress note

# Esta opción impedirá que el instalador expulse el CD durante
# el reinicio, y puede ser útil en algunas circunstancias:
#d-i cdrom-detect/eject boolean false

# Para hacer que el sistema se detenga cuando termine la instalación en
# lugar de reiniciar al sistema instalado:
#d-i debian-installer/exit/halt boolean true
# Para apagar la máquina en lugar de detenerla:
#d-i debian-installer/exit/poweroff boolean true
</pre></div>
</div>
<div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="preseed-other"></a>B.4.13. Preconfiguración de otros paquetes</h3></div></div></div>
<div class="informalexample"><pre class="screen"># Dependiendo del software que elija instalar, o si las cosas no salen
# bien durante el proceso de instalación, es posible que se formulen
# otra preguntas. Por supuesto también puede preconfigurar éstas.
# Para obtener una lista de cada pregunta posible que podría llegar a ser
# formulada durante una instalación puede hacer una instalación y
# ejecutar estas órdenes:
#   debconf-get-selections --installer &gt; fichero
#   debconf-get-selections &gt;&gt; fichero
</pre></div>
</div>
<div class="footnotes">
<br><hr width="100" align="left">
<div id="ftn.idm3690" class="footnote"><p><a href="#idm3690" class="para"><sup class="para">[22] </sup></a> Preconfigurar <code class="literal">locale</code> como <strong class="userinput"><code>en_NL</code></strong> resultaría, en <code class="literal">en_US.UTF-8</code> como la configuración regional por omisión en el sistema instalado. Si prefiere, por ejemplo. <code class="literal">en_GB.UTF-8</code>, tendrá que preconfigurar los valores de forma individual. </p></div>
</div>
</div>
<div class="navfooter">
<hr>
<table width="100%" summary="Navigation footer">
<tr>
<td width="40%" align="left">
<a accesskey="p" href="apbs03.html"><img src="images/prev.png" alt="Anterior"></a> </td>
<td width="20%" align="center"><a accesskey="u" href="apb.html"><img src="images/up.png" alt="Subir"></a></td>
<td width="40%" align="right"> <a accesskey="n" href="apbs05.html"><img src="images/next.png" alt="Siguiente"></a>
</td>
</tr>
<tr>
<td width="40%" align="left" valign="top">B.3. Crear un fichero de preconfiguración </td>
<td width="20%" align="center"><a accesskey="h" href="index.html"><img src="images/home.png" alt="Inicio"></a></td>
<td width="40%" align="right" valign="top"> B.5. Opciones avanzadas</td>
</tr>
</table>
</div>
</body>
</html>
