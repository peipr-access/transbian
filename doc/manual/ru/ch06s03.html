<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>6.3. Применение отдельных компонент</title>
<link rel="stylesheet" type="text/css" href="install.css">
<meta name="generator" content="DocBook XSL Stylesheets Vsnapshot">
<link rel="home" href="index.html" title="Руководство по установке Debian GNU/Linux">
<link rel="up" href="ch06.html" title="Глава 6. Использование программы установки Debian">
<link rel="prev" href="ch06s02.html" title="6.2. Описание компонент">
<link rel="next" href="ch06s04.html" title="6.4. Загрузка отсутствующих микропрограмм">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<div class="navheader">
<table width="100%" summary="Navigation header">
<tr><th colspan="3" align="center">6.3. Применение отдельных компонент</th></tr>
<tr>
<td width="20%" align="left">
<a accesskey="p" href="ch06s02.html"><img src="images/prev.png" alt="Пред."></a> </td>
<th width="60%" align="center">Глава 6. Использование программы установки Debian</th>
<td width="20%" align="right"> <a accesskey="n" href="ch06s04.html"><img src="images/next.png" alt="След."></a>
</td>
</tr>
</table>
<hr>
</div>
<div class="sect1">
<div class="titlepage"><div><div><h2 class="title">
<a name="module-details"></a>6.3. Применение отдельных компонент</h2></div></div></div>
<p>В этом разделе мы подробно опишем каждую компоненту программы установки. Компоненты собраны в понятные пользователю группы и расположены в порядке использования во время установки. Обратите внимание, что в зависимости от метода установки и вашей аппаратуры некоторые модули могут не использоваться. </p>
<div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="di-setup"></a>6.3.1. Настройка программы установки Debian и оборудования</h3></div></div></div>
<p>Давайте представим, что программа установки Debian загрузилась и вы видите её первый экран. В этот момент возможности <code class="classname">debian-installer</code> всё ещё немного ограничены. Она многого не знает о вашем оборудовании, предпочитаемом языке или даже о задачах, которые она должна выполнить. Не беспокойтесь. Поскольку <code class="classname">debian-installer</code> немножко умная, она может автоматически определить ваше оборудование, найти свои остальные компоненты и обновить себя до очень умелой системы установки. Однако, вы должны помочь <code class="classname">debian-installer</code> некоторой информацией, которую она не сможет определить автоматически (например, выбрать предпочитаемый вами язык, раскладку клавиатуры или необходимый сетевой сервер-зеркало). </p>
<p>Заметим, что <code class="classname">debian-installer</code> выполняет <em class="firstterm">определение оборудования</em> несколько раз во время установки. На первом этапе определяется оборудование, необходимое для загрузки компонент программы установки (т.е. ваш CD-ROM или сетевая карта). Поскольку не все драйверы могут быть доступны во время этого первого запуска, определение оборудования надо будет повторить позже по ходу установки. </p>
<p>Во время определения оборудования <code class="classname">debian-installer</code> проверяет необходимость загрузки микропрограмм в драйверы устройств. Если микропрограмма требуется, но недоступна, выводится диалоговое окно, которое позволяет загрузить отсутствующую микропрограмму со сменного носителя. Подробней см. <a class="xref" href="ch06s04.html" title="6.4. Загрузка отсутствующих микропрограмм">Раздел 6.4, «Загрузка отсутствующих микропрограмм»</a>. </p>
<div class="sect3">
<div class="titlepage"><div><div><h4 class="title">
<a name="lowmem"></a>6.3.1.1. Определение доступной памяти / режим с малым потреблением памяти</h4></div></div></div>
<p>Одну из первых вещей, которую делает <code class="classname">debian-installer</code>, это проверка размера доступной памяти. Если размер ограничен, то эта компонента делает некоторые изменения процесса установки, которые, будем надеяться, позволят установить Debian GNU/Linux на вашу машину. </p>
<p>Первое, что делается для уменьшения потребления памяти программой установки — это выключение переводов в интерфейсе, то есть установка будет производится на английском языке. Конечно, вы сможете выполнить локализацию системы после завершения установки. </p>
<p>Если этого окажется недостаточно, программа установки дальше станет уменьшать потребление памяти загружая только компоненты, которые необходимы для выполнения базовой установки. Это уменьшает функциональность системы установки. Вам будет предоставлена возможность загрузить дополнительные компоненты вручную, но вы должны понимать, что каждая выбранная вами компонента использует память, и это может привести к неудачному завершению установки. </p>
<p>При работе программы установки в режиме с малым потреблением памяти  рекомендуется создать относительно большой раздел подкачки (64–128МБ). Раздел подкачки будет использован в качестве виртуальной памяти, и это увеличит количество доступной памяти системы. Программа установки активирует раздел подкачки сразу как только это станет возможно в процессе установки. Заметим, что интенсивное использование раздела подкачки уменьшит производительность системы и может привести к большой нагрузке на диск. </p>
<p>Несмотря на все старания, система всё равно может повиснуть, могут произойти неожиданные ошибки или процессы могут быть завершены ядром из-за нехватки памяти в системе (вы увидите сообщения <span class="quote">«<span class="quote">Out of memory</span>»</span> на VT4 и в syslog). </p>
<p>Например, были отчёты об установке, что не удавалось создать большую файловую систему в режиме с малым потреблением памяти, если было недостаточно пространства подкачки. Если увеличение размера подкачки не помогает, попробуйте вместо неё создать файловую систему ext2 (которая является обязательной компонентой программы установки). После установки возможно изменить раздел ext2 на ext3. </p>
<p>Возможно заставить программу установки использовать более высокий уровень для lowmem чем значение, рассчитываемое из количества доступной оперативной памяти, с помощью загрузочного параметра <span class="quote">«<span class="quote">lowmem</span>»</span> как это описано в <a class="xref" href="ch05s03.html#installer-args" title="5.3.2. Параметры программы установки Debian">Раздел 5.3.2, «Параметры программы установки Debian»</a>. </p>
</div>
<div class="sect3">
<div class="titlepage"><div><div><h4 class="title">
<a name="localechooser"></a>6.3.1.2. Выбор параметров локализации</h4></div></div></div>
<p>В большинстве случаев сначала вас попросят указать параметры локализации, которые будут использованы в программе установки и в устанавливаемой системе. В параметры локализации входят язык, расположение и локали. </p>
<p>Выбранный язык будет использован в процессе установки, предлагая переводы различных диалогов если возможно. Если перевод для выбранного языка недоступен, по умолчанию используется английский язык. </p>
<p>Указанное значение географического расположения (в большинстве случаев — страны) будет использовано позднее в процессе установки для выбора правильного часового пояса и подходящего для страны сервера-зеркала Debian. Значения страны и языка будут использованы вместе для настройки локали вашей системы и выборе правильной раскладки клавиатуры. </p>
<p>Сначала вас попросят выбрать предпочитаемый язык. Названия языков написаны на английском(слева) и на самом языке (справа); названия справа также показаны в правильном написании для этого языка. Список отсортирован по английским названиям. Вверху списка есть дополнительный пункт, который вместо языка позволяет выбрать <span class="quote">«<span class="quote">C</span>»</span> локаль. При выборе <span class="quote">«<span class="quote">C</span>»</span> локали установка будет производиться на английском; установленная система не будет иметь поддержку локализации, так как пакет <code class="classname">locales</code> в данном случае установлен не будет. </p>
<p>Далее вас попросят указать географическое расположение. Если вы выбрали язык, на котором говорят более чем в одной стране<a href="#ftn.idm2013" class="footnote" name="idm2013"><sup class="footnote">[6]</sup></a>, вам будет показан список только этих стран. Чтобы указать страну не из списка, выберите <span class="guimenuitem">другая</span> (последний пункт). Далее вам будет предложен список континентов; при выборе определённого континента будет показан список стран, которые на нём расположены. </p>
<p>Если с языком связана только одна страна, то будет показан список стран континента или региона, на котором находится страна, и по умолчанию будет выбрана эта страна. Нажмите <span class="guibutton">Вернуться</span>, для выбора стран другого континента. </p>
<div class="note"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Примечание]" src="images/note.png"></td>
<th align="left">Примечание</th>
</tr>
<tr><td align="left" valign="top"><p>Очень важно выбрать страну вашего проживания или нахождения, так как по ней определяется часовой пояс, который будет настроен в установленной системе. </p></td></tr>
</table></div>
<p>Если вы выберете комбинацию языка и страны, для которой нет локали и есть несколько локалей для этого языка, то программа установки предложит вам выбрать желаемую локаль по умолчанию для устанавливаемой системы<a href="#ftn.idm2021" class="footnote" name="idm2021"><sup class="footnote">[7]</sup></a>.Во всех других случаях локаль по умолчанию будет выбрана на основе языка и страны. </p>
<p>В любой выбранной локали по умолчанию, как описано в предыдущем параграфе, будет использована кодировка символов <em class="firstterm">UTF-8</em>. </p>
<p>Если вы производите установку с низким приоритетом, то вас попросят выбрать дополнительные локали, включая так называемые <span class="quote">«<span class="quote">старые</span>»</span> локали<a href="#ftn.idm2027" class="footnote" name="idm2027"><sup class="footnote">[8]</sup></a> для их генерации в установленной системе; если вы что-то выберете, то вас попросят выбрать локаль по умолчанию для устанавливаемой системы. </p>
</div>
<div class="sect3">
<div class="titlepage"><div><div><h4 class="title">
<a name="kbd-chooser"></a>6.3.1.3. Выбор клавиатуры</h4></div></div></div>
<p>Клавиатуры часто приспосабливают к алфавиту определённого языка. Выберите раскладку, которая подходит к вашей клавиатуре, или выберите наиболее подходящую, если таковой не имеется. После завершения установки вы сможете выбрать раскладку из большего количества вариантов (запустите <span class="command"><strong>kbd-config</strong></span> с правами суперпользователя после завершения установки). </p>
<p>Выберите нужную клавиатуру и нажмите <span class="keycap"><strong>Enter</strong></span>. Для перемещения используйте клавиши стрелок — они находятся в одном и том же месте во всех национальных клавиатурных раскладках, поэтому не зависят от конфигурации клавиатуры. </p>
</div>
<div class="sect3">
<div class="titlepage"><div><div><h4 class="title">
<a name="iso-scan"></a>6.3.1.4. Поиск образа ISO программы установки Debian</h4></div></div></div>
<p>Если установка производится с помощью метода <span class="emphasis"><em>hd-media</em></span>, настанет момент, когда вам нужно будет найти и смонтировать ISO-образ программы установки Debian, чтобы получить оставшиеся файлы установки. Для этого существует компонента <span class="command"><strong>iso-scan</strong></span>. </p>
<p>Сначала <span class="command"><strong>iso-scan</strong></span> автоматически смонтирует все блочные устройства (например, разделы и логические тома), на которых есть распознанная файловая система, и последовательно будет искать на них файлы с именами, оканчивающимися на <code class="filename">.iso</code> (или <code class="filename">.ISO</code>, это важно). Обратите внимание, ищутся файлы только в корневом каталоге и подкаталогах первого уровня (то есть найдутся файлы <code class="filename">/<em class="replaceable"><code>имя</code></em>.iso</code>, <code class="filename">/data/<em class="replaceable"><code>имя</code></em>.iso</code>, но не <code class="filename">/data/tmp/<em class="replaceable"><code>имя</code></em>.iso</code>). После нахождения iso-образа, <span class="command"><strong>iso-scan</strong></span> проверит его содержимое чтобы выяснить, является ли образ правильным iso-образом Debian или нет. В первом случае поиск завершается, в последнем <span class="command"><strong>iso-scan</strong></span> будет искать другой образ. </p>
<p>Если найти ISO-образ с программой установки не удалось, <span class="command"><strong>iso-scan</strong></span> спросит, хотите ли вы чтобы был выполнен более тщательный поиск. В этом случае будет произведён поиск по всей файловой системе. </p>
<p>Если <span class="command"><strong>iso-scan</strong></span> не нашла ISO образ программы установки, перезагрузитесь в первоначальную операционную систему и проверьте правильность имени (должно оканчиваться на <code class="filename">.iso</code>), если файл находится на распознаваемой <code class="classname">debian-installer</code> файловой системе, и что образ не повреждён (проверьте контрольную сумму). Опытные пользователи Unix могут это сделать со второй консоли без перезагрузки. </p>
<p>Заметим, что раздел (или диск), хранящий под образ ISO, не может быть использован во время процесса установки, так как занят программой установки. Чтобы это обойти, и если у вас есть достаточно системной памяти, то программа установки может скопировать образ ISO в RAM перед монтированием. Этим управляет вопрос debconf низкого уровня <code class="literal">iso-scan/copy_iso_to_ram</code> (он задаётся, только если имеется требуемое количество памяти). </p>
</div>
<div class="sect3">
<div class="titlepage"><div><div><h4 class="title">
<a name="netcfg"></a>6.3.1.5. Настройка сети</h4></div></div></div>
<p>Если в начале этого шага система обнаруживает, что имеется более одного сетевого устройства, то вас попросят указать, какое устройство будет <span class="emphasis"><em>первичным</em></span> сетевым интерфейсом, то есть какое устройство будет использовано для установки системы. Другие интерфейсы останутся ненастроенными. Вы сможете настроить дополнительные интерфейсы после завершения установки; смотрите страницу руководства <span class="citerefentry"><span class="refentrytitle">interfaces</span>(5)</span>. </p>
<div class="sect4">
<div class="titlepage"><div><div><h5 class="title">
<a name="netcfg-automatic"></a>6.3.1.5.1. Автоматическая настройка сети</h5></div></div></div>
<p>По умолчанию, <code class="classname">debian-installer</code> пытается настроить сетевой интерфейс вашего компьютера автоматически. Если это сделать не удаётся, то это могло произойти по многим причинам, начиная от не подключённого сетевого кабеля и кончая неправильной настройкой инфраструктуры автоматической настройки. Для выяснения причины посмотрите сообщения об ошибках на четвёртой консоли. В любом случае вас спросят, не хотите ли вы попробовать ещё раз, или хотите выполнить настройку вручную. Иногда сетевые службы автоматической настройки очень медленно отвечают, поэтому если вы уверены, что всё в порядке, попробуйте ещё раз. Если автоматическая настройка завершается с ошибкой постоянно, то вместо неё выберите настройку сети вручную. </p>
</div>
<div class="sect4">
<div class="titlepage"><div><div><h5 class="title">
<a name="netcfg-manual"></a>6.3.1.5.2. Настройка сети вручную</h5></div></div></div>
<p>При ручной настройке сети вам зададут несколько вопросов о вашей сети, а именно про <code class="computeroutput">IP-адрес</code>, <code class="computeroutput">маску сети</code>, <code class="computeroutput">шлюз</code>, <code class="computeroutput">адреса серверов определения имён</code> и <code class="computeroutput">имени машины</code>. Кроме того, если используется интерфейс беспроводной сети, то вас попросят ввести личный <code class="computeroutput">Wireless ESSID</code> и <code class="computeroutput">ключ WEP</code> или <code class="computeroutput">ключевую фразу WPA/WPA2</code>. Введите ответы из <a class="xref" href="ch03s03.html" title="3.3. Информация, которая понадобится">Раздел 3.3, «Информация, которая понадобится»</a>. </p>
<div class="note"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Примечание]" src="images/note.png"></td>
<th align="left">Примечание</th>
</tr>
<tr><td align="left" valign="top"><p>Некоторые настройки иногда легко, но не всегда, определить вручную: программа предполагает, что IP-адрес сети вычисляется с помощью операции побитового И над IP-адресом системы и маской сети. Широковещательный адрес по умолчанию вычисляется с помощью операции побитового ИЛИ над IP-адресом системы и инверсной маской сети. Также угадывается шлюз. Если вы не можете найти какой-нибудь ответ, используйте предлагаемые системой — если нужно, вы можете изменить их сразу после установки системы, отредактировав <code class="filename">/etc/network/interfaces</code>. </p></td></tr>
</table></div>
</div>
<div class="sect4">
<div class="titlepage"><div><div><h5 class="title">
<a name="netcfg-ipv4-ipv6"></a>6.3.1.5.3. IPv4 и IPv6</h5></div></div></div>
<p>Начиная с Debian GNU/Linux 7.0 (<span class="quote">«<span class="quote">Wheezy</span>»</span>), <code class="classname">debian-installer</code> также поддерживает IPv6 (помимо <span class="quote">«<span class="quote">классического</span>»</span> IPv4). Поддерживаются все комбинации IPv4 и IPv6 (только IPv4, только IPv6 и обе адресации одновременно). </p>
<p>Автоматическая настройка IPv4 выполняется с помощью DHCP (протокола динамической настройки узла). Автоматическая настройка IPv6 поддерживает настройку без сохранения состояния (stateless) с помощью NDP (протокол обнаружения соседей, включающий назначение рекурсивного сервера DNS (RDNSS)), настройку с сохранением состояния с помощью DHCPv6 и смешанную автоматическую настройку без сохранения/с сохранением состояния (настройка адреса с помощью NDP, дополнительные параметры с помощью DHCPv6). </p>
</div>
</div>
</div>
<div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="di-user-setup"></a>6.3.2. Добавление пользователей и паролей</h3></div></div></div>
<p>Перед настройкой часов, программа установки предложит вам настроить учётную запись <span class="quote">«<span class="quote">root</span>»</span> и/или учётную запись для первого пользователя. Дополнительные учётные записи можно будет создать после завершения установки. </p>
<div class="sect3">
<div class="titlepage"><div><div><h4 class="title">
<a name="user-setup-root"></a>6.3.2.1. Установка пароля суперпользователя (root)</h4></div></div></div>
<p>Учётная запись <span class="emphasis"><em>root</em></span> также называемая <span class="emphasis"><em>суперпользовательской</em></span> — это учётная запись, для которой нет никаких преград в вашей системе. Учётная запись root должна использоваться только для администрирования системы и как можно меньшее время. </p>
<p>Любой создаваемый вами пароль должен состоять как минимум из 6 символов и содержать заглавные и строчные буквы, а также знаки препинания. Уделите побольше внимания при установке пароля root, поскольку эта самая мощная учётная запись. Избегайте слов из словаря или использования любой персональной информации, которую можно угадать. </p>
<p>Если кто-то говорит вам, что ему нужен ваш пароль root, будьте очень осторожны. Обычно нет необходимости давать свой пароль root кому-либо, если только вы не администрируете машину вместе с другими системными администраторами. </p>
<p>Если здесь вы не зададите пароль пользователю <span class="quote">«<span class="quote">root</span>»</span>, то эта учётная запись блокируется, но при этом позднее будет установлен пакет <span class="command"><strong>sudo</strong></span>, позволяющий выполнять задачи администрирования в новой системе. По умолчанию, первому созданному пользователю в системе будет разрешено использовать команду <span class="command"><strong>sudo</strong></span> для получения прав root. </p>
</div>
<div class="sect3">
<div class="titlepage"><div><div><h4 class="title">
<a name="make-normal-user"></a>6.3.2.2. Создание учётной записи обычного пользователя</h4></div></div></div>
<p>Система спросит вас, желаете ли вы сейчас создать учётную запись для обычного пользователя. Эта учётная запись должна использоваться в качестве вашей основной рабочей учётной записи. Вы <span class="emphasis"><em>не должны</em></span> использовать учётную запись root в повседневной работе или в качестве персональной учётной записи. </p>
<p>Почему не должны? Одна из причин, по которой следует избегать использования привилегий root это то, что в качестве root можно очень легко сделать необратимые повреждения. Другая причина: вас могут обманом заставить запустить программу <span class="emphasis"><em>троянского коня</em></span> — это программа, которая воспользуется преимуществами ваших возможностей суперпользователя, чтобы скомпрометировать систему. В любой хорошей книге по системному администрированию Unix эта тема рассматривается подробно — прочтите одну из них, если это для вас в новинку. </p>
<p>Сначала вас попросят ввести полное имя пользователя. Затем спросят имя пользовательской учётной записи; в общем случае, ваше имя или что-то похожее вполне подойдёт. И, наконец, вас попросят ввести пароль учётной записи. </p>
<p>Если в любой момент после установки вы захотите создать ещё одну учётную запись, воспользуйтесь командой <span class="command"><strong>adduser</strong></span>. </p>
</div>
</div>
<div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="clock-setup"></a>6.3.3. Настройка времени и часового пояса</h3></div></div></div>
<p>Сначала программа установки попытается подключиться к серверу времени в Интернете (по протоколу <em class="firstterm">NTP</em>), чтобы выставить правильное системное время. Если это не удаётся, то программа установки будет считать правильными время и дату, полученные с системных часов при загрузке программы установки. В процессе установки невозможно выставить системное время вручную. </p>
<p>В зависимости от места, выбранного ранее в процессе установки, вам может быть показан список часовых поясов, возможных в вашей географической точке. Если в вашей местности только один часовой пояс и вы выполняете установку по умолчанию, то вопрос задан не будет и система выберет этот часовой пояс. </p>
<p>В экспертном режиме или при установке со средним приоритетом вам будет предложено выбрать <span class="quote">«<span class="quote">Универсальное координированное время </span>»</span> (UTC) в качестве часового пояса. </p>
<p>Если по какой-то причине вы хотите установить часовой пояс для устанавливаемой системы, который <span class="emphasis"><em>не</em></span> является правильным в выбранном местонахождении, то есть два способа сделать это. </p>
<div class="orderedlist"><ol class="orderedlist" type="1">
<li class="listitem">
<p>Простой способ: выберите другой часовой пояс после завершения установки и загрузки в новую систему. Это можно сделать с помощью следующей команды: </p>
<div class="informalexample"><pre class="screen"># dpkg-reconfigure tzdata
</pre></div>
<p>

</p>
</li>
<li class="listitem"><p>Второй способ: часовой пояс может быть задан при загрузке программы установки с помощью параметра <strong class="userinput"><code>time/zone=<em class="replaceable"><code>значение</code></em></code></strong>. Значение должно быть правильным часовым поясом, например <strong class="userinput"><code>Europe/London</code></strong> или <strong class="userinput"><code>UTC</code></strong>. </p></li>
</ol></div>
<p>Для автоматизации установки часовой пояс может быть задан в файле ответов. </p>
</div>
<div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="di-partition"></a>6.3.4. Разметка разделов и выбор точек монтирования</h3></div></div></div>
<p>После того как определение оборудования было выполнено в последний раз, <code class="classname">debian-installer</code> должен быть во всей своей красе, подстроенный под нужды пользователя и готовый к выполнению кое-какой настоящей работы. Как написано в заголовке раздела, основной задачей нескольких следующих компонент будет разметка дисков, создание файловых систем, назначение точек монтирования и, возможно, настройка RAID, LVM или шифрованных устройств. </p>
<p>Если вы плохо знакомы с процедурой разметки, или просто хотите знать детали процесса, смотрите <a class="xref" href="apc.html" title="Приложение C. Разметка дисков в Debian">Приложение C, <i>Разметка дисков в Debian</i></a>. </p>
<p>Сначала вам предложат автоматическую разметку или всего диска или только имеющего на нём свободного места. Это так называемая <span class="quote">«<span class="quote">направляющая</span>»</span> разметка. Если вы не хотите использовать авторазметку, выберите в меню <span class="guimenuitem">Вручную</span>. </p>
<div class="sect3">
<div class="titlepage"><div><div><h4 class="title">
<a name="partman-fs"></a>6.3.4.1. Поддерживаемые параметры разметки</h4></div></div></div>
<p>Программа разметки <code class="classname">debian-installer</code> довольно универсальна. Она позволяет создать много различных схем разметки используя различные таблицы разделов, файловые системы и расширенные блочные устройства. </p>
<p>Список доступных параметров зависит, в основном, от архитектуры, но есть и другие факторы. Например, на системах с ограниченной внутренней памятью доступны не все параметры. Параметры по умолчанию также могут различаться. Тип таблицы разделов, используемый по умолчанию, может, например, отличаться на дисках большого объёма по сравнению с дисками малого объёма. Некоторые параметры можно изменять только при установке со средним или низким приоритетом debconf; чем выше приоритет, тем более целесообразные настройки по умолчанию будут использоваться. </p>
<p>Программа установки поддерживает различные виды расширенных настроек и использование устройств хранения, которые во многих случаях можно использовать совместно. </p>
<div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem"><p>
    <span class="emphasis"><em>Управление логическими томами (LVM)</em></span>
  </p></li>
<li class="listitem">
<p>
    <span class="emphasis"><em>Программный RAID</em></span>
  </p>
<p>Поддерживается RAID 0, 1, 4, 5, 6 и 10 уровня. </p>
</li>
<li class="listitem"><p>
    <span class="emphasis"><em>Шифрование</em></span>
  </p></li>
<li class="listitem">
<p><span class="emphasis"><em>Serial ATA RAID</em></span> (с помощью <code class="classname">dmraid</code>) </p>
<p>Так называемый <span class="quote">«<span class="quote">фиктивный RAID</span>»</span> или <span class="quote">«<span class="quote">BIOS RAID</span>»</span>. Поддержка для Serial ATA RAID доступна только если её включить при запуске программы установки. Дополнительная информация в <a class="ulink" href="https://wiki.debian.org/DebianInstaller/SataRaid" target="_top">вики</a>. </p>
</li>
<li class="listitem">
<p><span class="emphasis"><em>Многолучевое устройство</em></span> (экспериментальная поддержка) </p>
<p>Смотрите описание в <a class="ulink" href="https://wiki.debian.org/DebianInstaller/MultipathSupport" target="_top">вики</a>. Поддержка многолучевых устройств доступна только если её включить при запуске программы установки. </p>
</li>
</ul></div>
<p>

</p>
<p>Поддерживаются следующие файловые системы. </p>
<div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem">
<p> <span class="emphasis"><em>ext2</em></span>, <span class="phrase"><span class="emphasis"><em>ext3</em></span>,</span> <span class="phrase"><span class="emphasis"><em>ext4</em></span></span> </p>
<p>В большинстве случаев файловой системой по умолчанию выбирается ext4; при использовании направляющей разметки для разделов <code class="filename">/boot</code> будет выбрана ext2. </p>
</li>
<li class="listitem"><p><span class="emphasis"><em>jfs</em></span> (недоступна на всех архитектурах) </p></li>
<li class="listitem"><p><span class="emphasis"><em>xfs</em></span> (недоступна на всех архитектурах) </p></li>
<li class="listitem">
<p><span class="emphasis"><em>reiserfs</em></span> (по выбору; недоступна на всех архитектурах) </p>
<p>Поддержка файловой системы Reiser по умолчанию более недоступна. При запуске программы установки со средним или низким приоритетом debconf, её можно включить выбрав компонент <code class="classname">partman-reiserfs</code>. Поддерживается файловая система только третьей версии. </p>
</li>
<li class="listitem">
<p>
    <span class="emphasis"><em>qnx4</em></span>
  </p>
<p>Существующие разделы будут распознаны и их можно смонтировать. Создание новых разделов с qnx4 не поддерживается. </p>
</li>
<li class="listitem"><p><span class="emphasis"><em>FAT16</em></span>, <span class="emphasis"><em>FAT32</em></span> </p></li>
<li class="listitem">
<p><span class="emphasis"><em>NTFS</em></span> (только на чтение) </p>
<p>Существующие разделы NTFS будут распознаны и их можно смонтировать. Создание новых разделов с NTFS не поддерживается. </p>
</li>
</ul></div>
<p>

</p>
</div>
<div class="sect3">
<div class="titlepage"><div><div><h4 class="title">
<a name="partman-auto"></a>6.3.4.2. Направляющая разметка</h4></div></div></div>
<p>Если вы выбрали направляющую разметку, то есть два пути: создавать разделы непосредственно на жёстком диске (классический метод), создавать их с помощью управления логическими томами (LVM) или создавать, используя LVM с шифрованием<a href="#ftn.idm2214" class="footnote" name="idm2214"><sup class="footnote">[9]</sup></a>. </p>
<div class="note"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Примечание]" src="images/note.png"></td>
<th align="left">Примечание</th>
</tr>
<tr><td align="left" valign="top"><p>LVM или LVM с шифрованием может быть недоступно на некоторых архитектурах. </p></td></tr>
</table></div>
<p>При использовании LVM или LVM c шифрованием, программа установки создаст большинство разделов внутри одного большого раздела; преимущество этого метода в том, что у разделов внутри этого большого раздела можно легко изменить размеры позже. При использовании LVM с шифрованием большой раздел будет недоступен без специальной ключевой фразы, предоставляя тем самым дополнительную безопасность вашим (личным) данным. </p>
<p>При использовании шифрованных LVM, программа установки также автоматически стирает диск, записывая на него произвольные данные. Это способствует усилению безопасности (так как это делает невозможным определить какие части диска используются и этим также стираются предыдущие следы установок), но это занимает некоторое время в зависимости от размера диска. </p>
<div class="note"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Примечание]" src="images/note.png"></td>
<th align="left">Примечание</th>
</tr>
<tr><td align="left" valign="top"><p>При использовании направляющей разметки с LVM или LVM c шифрованием, перед тем как приступить к настройке LVM, нужно произвести запись на выбранный диск. Эти изменения сотрут все имеющиеся данные на выбранном жёстком диске и их больше нельзя будет восстановить. Однако программа установки перед записью на диск попросит вас подтвердить выполнение этих изменений. </p></td></tr>
</table></div>
<p>Если вы выбрали направляющую разметку<span class="phrase"> (или классическую, или использующую LVM (с шифрованием))</span> всего диска, то сначала вас попросят выбрать диск, который нужно использовать. Убедитесь, что предложены все имеющиеся диски, и если их несколько, правильно укажите нужный. Порядок в списке предлагаемых дисков может быть отличным от того, какой вы использовали ранее. Идентифицировать диски вам поможет их показанный размер. </p>
<p>Любые данные на выбранном диске впоследствии будут уничтожены, но перед любой операцией записи на диск у вас попросят подтверждения. <span class="phrase">Если выбран классический метод разметки, то вы можете отменить любые изменения даже в самом конце; при использовании LVM (с шифрованием) это невозможно.</span> </p>
<p>Далее вам предложат выбрать одну из схем, описанных в таблице ниже. Любая схема имеет свои "за" и "против", некоторые обсуждаются в <a class="xref" href="apc.html" title="Приложение C. Разметка дисков в Debian">Приложение C, <i>Разметка дисков в Debian</i></a>. Если вы не знаете что выбрать, выберите первую. Помните, что для работы направляющей разметки требуется определённое минимальное количество свободного места с которым можно работать. Если вы не выделите по крайней мере около 1ГБ (зависит от выбранной схемы), направляющая разметка завершится неудачно. </p>
<div class="informaltable"><table class="informaltable" border="1">
<colgroup>
<col>
<col>
<col>
</colgroup>
<thead><tr>
<th>Схема разметки</th>
<th>Минимальное пространство</th>
<th>Создаваемые разделы</th>
</tr></thead>
<tbody>
<tr>
<td>Все файлы на одном разделе</td>
<td>600МБ</td>
<td>
<code class="filename">/</code>, swap</td>
</tr>
<tr>
<td>Отдельный раздел /home</td>
<td>500МБ</td>
<td>
<code class="filename">/</code>, <code class="filename">/home</code>, swap </td>
</tr>
<tr>
<td>Отдельные разделы /home, /var и /tmp</td>
<td>1ГБ</td>
<td>
<code class="filename">/</code>, <code class="filename">/home</code>, <code class="filename">/var</code>, <code class="filename">/tmp</code>, swap </td>
</tr>
</tbody>
</table></div>
<p>Если вы выбрали направляющую разметку с использованием LVM (с шифрованием), то программа установки также создаст отдельный раздел <code class="filename">/boot</code>. Остальные разделы, включая раздел подкачки, будут созданы внутри раздела LVM. </p>
<p>Если вы загрузились в режиме EFI, то в направляющей разметке будет создан дополнительный раздел, отформатированный как загружаемая файловая система FAT32, под системный загрузчик EFI. Этот раздел называется EFI System Partition (ESP). Также, в меню форматирования есть дополнительный пункт для ручной настройки раздела в качестве ESP. </p>
<p>После выбора схемы, следующий экран покажет только что созданную таблицу разделов, включая информацию будут ли и как форматироваться разделы и куда они будут смонтированы. </p>
<p>Список разделов может выглядеть так: </p>
<div class="informalexample"><pre class="screen">
  SCSI1 (0,0,0) (sda) - 6.4 GB WDC AC36400L
        #1 primary   16.4 MB  B f ext2       /boot
        #2 primary  551.0 MB      swap       swap
        #3 primary    5.8 GB      ntfs
           pri/log    8.2 MB      FREE SPACE

  SCSI2 (1,0,0) (sdb) - 80.0 GB ST380021A
        #1 primary   15.9 MB      ext3
        #2 primary  996.0 MB      fat16
        #3 primary    3.9 GB      xfs        /home
        #5 logical    6.0 GB    f ext4       /
        #6 logical    1.0 GB    f ext3       /var
        #7 logical  498.8 MB      ext3
</pre></div>
<p> Здесь показаны два жёстких диска, разделённые на несколько разделов; на первом диске осталось немного свободного места. Каждая строка раздела содержит номер раздела, тип, размер, необязательные флаги, файловую систему и точку монтирования (если есть). Замечание: такая настройка не может быть создана с помощью направляющей разметки, это просто пример, созданный с помощью разметки вручную. </p>
<p>На этом направляющая разметка завершена. Если вам нравится сгенерированная таблица разделов, то вы можете выбрать <span class="guimenuitem">Закончить разметку и записать изменения на диск</span> из меню для создания новой таблицы разделов (как описано в конце этого раздела). Если результат вам не нравится, то можно выбрать <span class="guimenuitem">Отменить изменение разделов</span> и запустить направляющую разметку снова или изменить предложенные изменения вручную, как описано ниже. </p>
</div>
<div class="sect3">
<div class="titlepage"><div><div><h4 class="title">
<a name="partman-manual"></a>6.3.4.3. Разметка вручную</h4></div></div></div>
<p>При ручной разметке появляется похожий экран, за исключением того, что отображается существующая таблица разделов и нет точек монтирования. Далее описано как вручную редактировать таблицу разделов и как использовать эти разделы в Debian. </p>
<p>Если вы выбрали чистый диск, на котором нет ни разделов ни свободного места, то вам предложат создать новую таблицу разделов (это необходимо для создания новых разделов). После этого, на выбранном диске должна появиться новая строка <span class="quote">«<span class="quote">СВОБОДНОЕ МЕСТО</span>»</span>. </p>
<p>Если вы выберете свободное пространство, вам предложат создать новый раздел. Вы должны ответить на несколько коротких вопросов о размере, типе (первичный или логический) и местоположении (в начале или конце свободного пространства). После этого, вам покажут предлагаемые параметры нового раздела. Основным параметром является <span class="guimenuitem">Использовать как:</span>, который определяет, будет ли на разделе файловая система или он будет использован как раздел подкачки, <span class="phrase">программный RAID, LVM, будет содержать шифрованную файловую систему</span> или не будет использован вовсе.Другие настройки задают точку и параметры монтирования, флаг загрузки; список показываемых параметров зависит от того, как будет использоваться раздел. Если вам не нравятся значения по умолчанию, измените их как хотите. Например, в параметре <span class="guimenuitem">Использовать как:</span>, вы можете выбрать другую файловую систему, поменять параметры для раздела подкачки, <span class="phrase">программного RAID, LVM</span> или совсем его не использовать. Когда вы настроите новый раздел, выберите <span class="guimenuitem">Закончить с разделом</span> и вы вернётесь обратно в главное меню <span class="command"><strong>partman</strong></span>. </p>
<p>Если вы решили, что хотите что-то изменить в разделе, просто выберите раздел и попадёте обратно в меню настройки раздела. Так как это тоже самое меню что и для создания раздела, вы можете изменить тот же набор параметров. Одна вещь, которая может показаться, на первый взгляд, не очевидной: вы можете изменить размер раздела, выбрав элемент, отображающий размер раздела. Это работает, как минимум, на файловых системах fat16, fat32, ext2, ext3 и с разделом подкачки. Также, из этого меню можно удалить раздел. </p>
<p>Убедитесь, что создали, по крайнем мере, два раздела: один для <span class="emphasis"><em>корневой</em></span> файловой системы (который должен быть смонтирован как <code class="filename">/</code>) и один раздел <span class="emphasis"><em>подкачки</em></span>. Если вы забыли указать точку монтирования корневой файловой системы, <span class="command"><strong>partman</strong></span> не разрешит вам продолжить, пока вы не исправите ошибку. </p>
<p>Если вы загрузились в режиме EFI, но забыли выбрать и отформатировать системный раздел EFI, <span class="command"><strong>partman</strong></span> обнаружит это и не разрешит вам продолжить, пока вы не создадите такой раздел. </p>
<p>Возможности <span class="command"><strong>partman</strong></span> могут быть расширены модулями программы установки, но это зависит от архитектуры компьютера. Поэтому, если вы не найдёте всех обещанных свойств, проверьте, загрузили ли вы все требуемые модули (например, <code class="filename">partman-ext3</code>, <code class="filename">partman-xfs</code> или <code class="filename">partman-lvm</code>). </p>
<p>Для завершения работы по разметке, выберите <span class="guimenuitem">Закончить разметку и записать изменения на диск</span> из меню разметки. Вам покажут отчёт об изменениях, которые будут произведены на диске и попросят подтвердить, что все представленные файловые системы должны быть созданы. </p>
</div>
<div class="sect3">
<div class="titlepage"><div><div><h4 class="title">
<a name="partman-md"></a>6.3.4.4. Настройка устройств Multidisk (программный RAID)</h4></div></div></div>
<p>Если у вас более одного жёсткого диска<a href="#ftn.idm2296" class="footnote" name="idm2296"><sup class="footnote">[10]</sup></a> в компьютере, то можно воспользоваться программой <span class="command"><strong>partman-md</strong></span> для увеличения производительности дисков и/или повышения надёжности хранения данных. В результате получается так называемое <em class="firstterm">устройство Multidisk</em> (или другое, более известное название, <em class="firstterm">программный RAID</em>). </p>
<p>Основу MD составляют группы разделов, расположенные на различных дисках и объединённые вместе в <span class="emphasis"><em>логическое</em></span> устройство. Затем это устройство можно использовать как обычный раздел (то есть в <span class="command"><strong>partman</strong></span> вы можете отформатировать его, назначить ему точку монтирования и т.д.). </p>
<p>Получаемые преимущества зависят от типа создаваемого MD устройства. В данный момент поддерживаются: </p>
<div class="variablelist"><dl class="variablelist">
<dt><span class="term">RAID0</span></dt>
<dd>
<p> Применяется где нужна производительность. RAID0 разбивает все входящие данные на <em class="firstterm">полосы</em> и равномерно распределяет их по дискам в массиве. Это может увеличить скорость операций чтения/записи, но если один из дисков сломается, вы потеряете <span class="emphasis"><em>всё</em></span> (часть информации всё ещё на исправных дисках(е), другая часть <span class="emphasis"><em>хранилась</em></span> на сломавшемся диске). </p>
<p> Обычно, разделы RAID0 используют при редактировании видео. </p>
</dd>
<dt><span class="term">RAID1</span></dt>
<dd>
<p> Используется там, где надёжность превыше всего. Он состоит из нескольких (обычно двух) одинаковых по размеру разделов, и на каждом разделе хранятся одинаковые данные. В сущности, это означает три вещи. Первое: если один из дисков сломается, вы не теряете данные, так как они продублированы на оставшихся дисках. Второе: вам доступна только часть имеющегося объёма (более точно, размер самого маленького раздела в RAID). Третье: нагрузка при чтении файла сбалансированно распределяется по всем дискам, что может повысить производительность, например, файлового сервера, на котором операций чтения больше чем операций записи. </p>
<p> Также, вы можете иметь в массиве запасной диск, который включится в работу в случае неисправности одного из дисков. </p>
</dd>
<dt><span class="term">RAID5</span></dt>
<dd>
<p> Хороший компромисс между скоростью, надёжностью и избыточностью. RAID5 разделяет все входящие данные на полосы и распределяет их пропорционально на все диски кроме одного (как и RAID0). В отличие от RAID0, RAID5 вычисляет <em class="firstterm">контрольную сумму</em>, которую записывает на оставшийся диск. Диск с контрольной суммой не статичен (тогда это был бы RAID4), а периодически изменяется, так что контрольная сумма распределяется по всем дискам. Когда один из дисков ломается, потерянную часть информации можно вычислить из оставшихся данных и её контрольной суммы. RAID5 должен состоять, как минимум из трёх активных разделов. Также, вы можете иметь в массиве запасной диск, который включится в работу в случае неисправности одного из дисков. </p>
<p> Как видите, RAID5 имеет немного надёжности от RAID1, но это достигается с меньшей избыточностью. С другой стороны, он немного медленнее на операциях записи, чем RAID0 из-за вычислений контрольной суммы. </p>
</dd>
<dt><span class="term">RAID6</span></dt>
<dd>
<p> Подобен RAID5, но контрольная сумма хранится на двух дисках, а не на одном. </p>
<p> Массив RAID6 останется рабочим даже после выхода из строя сразу двух дисков. </p>
</dd>
<dt><span class="term">RAID10</span></dt>
<dd>
<p> В RAID10 используется чередование (как в RAID0) и зеркалирование (как в RAID1). В нём создаётся <em class="replaceable"><code>n</code></em> копий входящих данных, которые распределяются между разделами так, что все копии одинаковых данных хранятся на разных устройствах. По умолчанию <em class="replaceable"><code>n</code></em> равно 2, но в режиме эксперта это можно изменить. Число задействованных разделов должно быть как минимум <em class="replaceable"><code>n</code></em>. В RAID10 есть различные схемы распределения копий. По умолчанию используется схема близкого (near) распределения. При этом все одинаковые копии располагаются на дисках по одинаковому смещению. Далёкие (far) копии имеют разные смещения на дисках. Смещение копий относится ко всей полосе, а не к отдельной копии. </p>
<p> RAID10 может использоваться для достижения надёжности и избыточности без трат на подсчёты контрольных сумм. </p>
</dd>
</dl></div>
<p> Итог: </p>
<div class="informaltable"><table class="informaltable" border="1">
<colgroup>
<col>
<col>
<col>
<col>
<col>
</colgroup>
<thead><tr>
<th>Тип</th>
<th>Минимум устройств</th>
<th>Запасное устройство</th>
<th>Сохранятся ли данные при отказе диска?</th>
<th>Доступное пространство</th>
</tr></thead>
<tbody>
<tr>
<td>RAID0</td>
<td>2</td>
<td>нет</td>
<td>нет</td>
<td>Размер самого маленького раздела умноженный на число устройств в RAID</td>
</tr>
<tr>
<td>RAID1</td>
<td>2</td>
<td>необязательно</td>
<td>да</td>
<td>Размер самого маленького раздела в RAID</td>
</tr>
<tr>
<td>RAID5</td>
<td>3</td>
<td>необязательно</td>
<td>да</td>
<td>Размер самого маленького раздела умноженный на (число устройств в RAID минус один) </td>
</tr>
<tr>
<td>RAID6</td>
<td>4</td>
<td>необязательно</td>
<td>да</td>
<td>Размер самого маленького раздела умноженный на (число устройств в RAID минус два) </td>
</tr>
<tr>
<td>RAID10</td>
<td>2</td>
<td>необязательно</td>
<td>да</td>
<td>Общее количество всех разделов, поделённое на число полос копий (по умолчанию два) </td>
</tr>
</tbody>
</table></div>
<p>

</p>
<p>Если вы хотите узнать больше о программном RAID, смотрите <a class="ulink" href="http://www.tldp.org/HOWTO/Software-RAID-HOWTO.html" target="_top">Software RAID HOWTO</a>. </p>
<p>Для создания MD устройства нужно пометить желаемые разделы как используемые в RAID. (Это делается в <span class="command"><strong>partman</strong></span> из меню <span class="guimenu">Настройки раздела</span>, где вы должны выбрать <span class="guimenu">Использовать как:</span> → <span class="guimenuitem">Использовать раздел как устройство RAID</span>.) </p>
<div class="note"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Примечание]" src="images/note.png"></td>
<th align="left">Примечание</th>
</tr>
<tr><td align="left" valign="top"><p>Make sure that the system can be booted with the partitioning scheme you are planning. In general it will be necessary to create a separate file system for <code class="filename">/boot</code> when using RAID for the root (<code class="filename">/</code>) file system. Most boot loaders <span class="phrase">(including grub)</span> do support mirrored (not striped!) RAID1, so using for example RAID5 for <code class="filename">/</code> and RAID1 for <code class="filename">/boot</code> can be an option. </p></td></tr>
</table></div>
<p>Далее, вы должны выбрать <span class="guimenuitem">Настройка программного RAID</span> из главного меню <span class="command"><strong>partman</strong></span>. (Меню появится только после того как вы отметите хотя бы один раздел используемый как <span class="guimenuitem">физический том для RAID</span>.)На первом экране <span class="command"><strong>partman-md</strong></span> просто выберите <span class="guimenuitem">Создать MD устройство</span>. Вам будет предложен список поддерживаемых типов MD устройств, из которого вы должны выбрать один (например, RAID1). Дальнейшие действия зависят от типа выбранного MD. </p>
<div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem"><p>RAID0 очень прост — вам предложат список доступных разделов RAID, а вашей задачей будет выбор разделов, из которых вы хотите сформировать MD. </p></li>
<li class="listitem"><p>С RAID1 немного сложнее. Во-первых, вас попросят ввести количество активных устройств и количество запасных устройств, из которых будет формироваться MD. Далее, вам потребуется выбрать из списка доступных разделов RAID те, которые будут активными и затем, те которые будут запасными. Число выбранных разделов должно быть равно числу, введённому несколькими секундами ранее. Не волнуйтесь. Если вы ошибётесь и выберете неверное число разделов, <code class="classname">debian-installer</code> не позволит вам продолжить, пока вы не исправите ошибку. </p></li>
<li class="listitem"><p>Создание RAID5 напоминает процедуру RAID1 за исключением того, что вам нужно использовать как минимум <span class="emphasis"><em>три</em></span> активных раздела. </p></li>
<li class="listitem"><p>Создание RAID6 напоминает процедуру RAID1 за исключением того, что вам нужно использовать как минимум <span class="emphasis"><em>четыре</em></span> активных раздела. </p></li>
<li class="listitem"><p>Создание RAID10 также похоже на процедуру создания RAID1, если это происходит не в режиме эксперта. В экспертном режиме <code class="classname">debian-installer</code> попросит указать схему распределения. В схеме задаётся два параметра. Первый — это тип схемы. Его значение может быть <code class="literal">n</code> (для близких копий), <code class="literal">f</code> (для далёких копий), или <code class="literal">o</code> (смещение копий). Вторым параметром задаётся число копий с данными. Оно должно быть равно, как минимум, числу активных дисков, чтобы было возможно распределить все копии по разным дискам. </p></li>
</ul></div>
<p>Можно иметь несколько типов MD одновременно. Например, если вы имеете три жёстких диска по 200 ГБ выделенных под MD, каждый из которых разбит на два 100 ГБ раздела, можно объединить первые разделы трёх дисков в RAID0 (быстрый 300 ГБ раздел для редактирования видео) и использовать оставшиеся три раздела (2 активных и 1 запасной) для RAID1 (вполне надёжный 100 ГБ раздел для <code class="filename">/home</code>). </p>
<p>После настройки MD устройств в соответствии с вашими желаниями, вы можете выбрать <span class="guimenuitem">Закончить</span> <span class="command"><strong>partman-md</strong></span> и вернуться в <span class="command"><strong>partman</strong></span>, чтобы создать файловые системы на новых MD устройствах и назначить им обычные атрибуты типа точек монтирования. </p>
</div>
<div class="sect3">
<div class="titlepage"><div><div><h4 class="title">
<a name="partman-lvm"></a>6.3.4.5. Настройка менеджера логических томов (LVM)</h4></div></div></div>
<p>Если вы работаете с компьютером на уровне системного администратора или <span class="quote">«<span class="quote">продвинутого</span>»</span> пользователя, то, определённо, попадали в ситуацию, когда на дисковом разделе (обычно на самом важном) заканчивалось место, а соседний раздел был почти пуст и вы выбирались из этой ситуации переносом данных с одного раздела на другой, созданием символических ссылок и т.д. </p>
<p>Чтобы избежать описанной ситуации вы можете воспользоваться менеджером логических томов (LVM). Проще говоря, с помощью LVM вы можете объединить разделы (<em class="firstterm">физические тома</em> в терминах LVM) в виртуальный диск (так называемую <em class="firstterm">группу томов</em>), который затем можно поделить на виртуальные разделы (<em class="firstterm">логические тома</em>). Выгода в том, что логические тома (и, конечно, содержащие их группы томов) можно распределить по нескольким физическим дискам. </p>
<p>Теперь, когда вы поняли, что вам нужно ещё место на имеющемся 160ГБ <code class="filename">/home</code> разделе, вы можете просто добавить новый 300ГБ диск в компьютер, объединить его с существующей группой томов и затем изменить размер логического тома, который содержит файловую систему с <code class="filename">/home</code> и вуаля, ваши пользователи имеют дополнительное место на новом 460ГБ разделе. Этот пример, конечно, сильно упрощён. Дополнительную информацию вы найдёте в <a class="ulink" href="http://www.tldp.org/HOWTO/LVM-HOWTO.html" target="_top">LVM HOWTO</a>. </p>
<p>Настройка LVM в <code class="classname">debian-installer</code> очень проста и полностью поддерживается <span class="command"><strong>partman</strong></span> Во-первых, отметьте раздел(ы), которые будут использоваться в качестве физических томов LVM. Это делается с в меню <span class="guimenu">Настройки раздела</span>, где вы должны выбрать <span class="guimenu">Использовать как:</span> → <span class="guimenuitem">физический том для LVM</span>. </p>
<div class="warning"><table border="0" summary="Warning">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Предупреждение]" src="images/warning.png"></td>
<th align="left">Предупреждение</th>
</tr>
<tr><td align="left" valign="top"><p>Внимание: настройка нового LVM уничтожит все данные на всех разделах, помеченных кодом с типом LVM. Поэтому, если у вас уже есть LVM на каких-то дисках, и вы хотите дополнительно установить Debian на эту машину, то старый (существующий) LVM будет стёрт! Это же относится и к разделам, которые (по какой-то причине) обманчиво помечены кодом с типом LVM, но содержат что-то другое (например, зашифрованный том). Вам необходимо удалить такие диски из-системы до выполнения новой настройки нового LVM! </p></td></tr>
</table></div>
<p>После того как вы вернётесь в главное меню <span class="command"><strong>partman</strong></span>, вы увидите новый пункт <span class="guimenuitem">Настройка менеджера логических томов (LVM)</span>. Выбрав его, сначала вас попросят подтвердить сделанные изменения (если есть) в таблице разделов, а затем будет показано меню настройки LVM. Сверху меню кратно показана настройка LVM. Сам состав меню зависит от выбранных настроек и содержит только допустимые действия. Возможные действия: </p>
<div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem"><p><span class="guimenuitem">Показать настройку подробней</span>: показывает структуру LVM устройства, имена и размеры логических томов и т.д. </p></li>
<li class="listitem"><p>
    <span class="guimenuitem">Создать группу томов</span>
  </p></li>
<li class="listitem"><p>
    <span class="guimenuitem">Создание логических томов</span>
  </p></li>
<li class="listitem"><p>
    <span class="guimenuitem">Удалить группу томов</span>
  </p></li>
<li class="listitem"><p>
    <span class="guimenuitem">Удаление логических томов</span>
  </p></li>
<li class="listitem"><p>
    <span class="guimenuitem">Расширить группу томов</span>
  </p></li>
<li class="listitem"><p>
    <span class="guimenuitem">Уменьшить группу томов</span>
  </p></li>
<li class="listitem"><p><span class="guimenuitem">Закончить</span>: вернуться в главное меню <span class="command"><strong>partman</strong></span> </p></li>
</ul></div>
<p>

</p>
<p>С помощью этого меню сначала создайте логическую группу, а затем внутри неё логические тома. </p>
<p>После возвращения в главное меню <span class="command"><strong>partman</strong></span>, вы должны увидеть все созданные логические тома, как обычные разделы (и настраиваются они одинаково). </p>
</div>
<div class="sect3">
<div class="titlepage"><div><div><h4 class="title">
<a name="partman-crypto"></a>6.3.4.6. Настройка шифрованных томов</h4></div></div></div>
<p><code class="classname">debian-installer</code> позволяет настраивать шифрованные разделы. Каждый файл, записываемый на такой раздел, немедленно сохраняется на устройстве в шифрованном виде. Доступ к шифрованным данным разрешается только после ввода <em class="firstterm">ключевой фразы</em>, которая задаётся при создании шифрованного раздела. Эта возможность полезна для защиты конфиденциальных данных на ноутбуке или жёстком диске при краже. Вор может получить физический доступ к жёсткому диску, но не зная правильной ключевой фразы, данные на диске выглядят как случайный набор символов. </p>
<p>The two most important partitions to encrypt are: the home partition, where your private data resides, and the swap partition, where sensitive data might be stored temporarily during operation. Of course, nothing prevents you from encrypting any other partitions that might be of interest. For example <code class="filename">/var</code> where database servers, mail servers or print servers store their data, or <code class="filename">/tmp</code> which is used by various programs to store potentially interesting temporary files. Some people may even want to encrypt their whole system. Generally the only exception here is the <code class="filename">/boot</code> partition which must remain unencrypted, because historically there was no way to load the kernel from an encrypted partition. (GRUB is now able to do that, but <code class="classname">debian-installer</code> currently lacks native support for encrypted <code class="filename">/boot</code>. The setup is therefore covered in a <a class="ulink" href="https://cryptsetup-team.pages.debian.net/cryptsetup/encrypted-boot.html" target="_top">separate document</a>.) </p>
<div class="note"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Примечание]" src="images/note.png"></td>
<th align="left">Примечание</th>
</tr>
<tr><td align="left" valign="top"><p>Заметим, что производительность шифрованных разделов будет меньше чем не шифрованных, так как при каждом чтении и записи данных происходит шифрование и дешифрование. Производительность зависит от быстродействия процессора, выбранного алгоритма шифрования и длины ключа. </p></td></tr>
</table></div>
<p>Для использования шифрования создайте новый раздел выделив свободное пространство в главном меню разметки. Также можно выбрать уже существующий раздел (например, обычный раздел, логический том LVM или том RAID). В меню <span class="guimenu">Настройки раздела</span> для <span class="guimenu">Использовать как:</span> нужно выбрать <span class="guimenuitem">физический том для шифрования</span>. После этого в меню для раздела появятся несколько параметров шифрования. </p>
<p>Поддерживаемый <code class="classname">debian-installer</code> метод шифрования: <em class="firstterm">dm-crypt</em> (включён в новых ядрах Linux, доступен для физических томов LVM узла). </p>
<p>Давайте рассмотрим возможные параметры, если в качестве метода шифрования выбран <strong class="userinput"><code>Device-mapper (dm-crypt)</code></strong>. Как и всегда: если не знаете, используйте значения по умолчанию, так как они вдумчиво выбирались исходя из соображений безопасности. </p>
<div class="variablelist"><dl class="variablelist">
<dt><span class="term">Шифрование: <strong class="userinput"><code>aes</code></strong></span></dt>
<dd><p>Этот параметр позволяет выбрать алгоритм шифрования (<em class="firstterm">шифр</em>), который будет использоваться для шифрования данных раздела. <code class="classname">debian-installer</code> поддерживает следующие блочные шифры: <em class="firstterm">aes</em>, <em class="firstterm">blowfish</em>, <em class="firstterm">serpent</em> и <em class="firstterm">twofish</em>. Здесь не будет обсуждаться стойкость этих алгоритмов, однако, при выборе вам наверно будет небезынтересно узнать, что в 2000 году <span class="emphasis"><em>AES</em></span> был выбран Национальным Институтом Стандартизации США в качестве стандартного алгоритма шифрования для защиты конфиденциальной информации в 21-ом веке. </p></dd>
<dt><span class="term">Размер ключа: <strong class="userinput"><code>256</code></strong></span></dt>
<dd><p>Здесь вы можете указать длину ключа шифрования. С увеличением размера ключа стойкость шифрования обычно усиливается. С другой стороны, увеличение длины ключа обычно негативно сказывается на производительности. Допустимые размеры ключа зависят от шифра. </p></dd>
<dt><span class="term">IV алгоритм: <strong class="userinput"><code>xts-plain64</code></strong></span></dt>
<dd>
<p><em class="firstterm">Вектор инициализации</em> или <em class="firstterm">IV</em> алгоритм используется в криптографии для того, чтобы при шифровании одного и того же <em class="firstterm">обычного текста</em> одинаковым ключом всегда получался уникальный <em class="firstterm">шифрованный текст</em>. Это было введено для того, чтобы при взломе шифра предотвратить нахождение повторяющихся участков в шифрованных данных. </p>
<p>Из предлагаемых возможностей, значение по умолчанию <strong class="userinput"><code>xts-plain64</code></strong> является на сегодняшний момент наименее уязвимым к известным атакам. Используйте альтернативы только когда это нужно для совместимости с раннее установленной системой, в которой невозможно задействовать новые алгоритмы. </p>
</dd>
<dt><span class="term">Ключ шифрования: <strong class="userinput"><code>ключевая фраза</code></strong></span></dt>
<dd>
<p>Здесь можно ввести тип ключа шифрования для этого раздела. </p>
<div class="variablelist"><dl class="variablelist">
<dt><span class="term">Ключевая фраза</span></dt>
<dd><p>Ключ шифрования будет создан<a href="#ftn.idm2539" class="footnote" name="idm2539"><sup class="footnote">[11]</sup></a> на основе ключевой фразы, которую вы сможете ввести позже. </p></dd>
<dt><span class="term">Произвольный ключ</span></dt>
<dd>
<p>Новый ключ шифрования будет генерироваться из произвольных данных всякий раз при монтировании раздела. Другими словами: при каждом выключении машины содержимое раздела теряется, так как ключ удаляется из памяти. (Естественно, вы можете попробовать найти ключ перебором всех вариантов, но если в алгоритме шифрования нет неизвестных уязвимостей, это недостижимо за нашу продолжительность жизни.) </p>
<p>Произвольные ключи полезны для разделов подкачки, так как вам не нужно запоминать ключевую фразу из вычищать конфиденциальную информацию из раздела подкачки перед выключением компьютера. Однако, это также означает, что вы <span class="emphasis"><em>не</em></span> сможете использовать функцию <span class="quote">«<span class="quote">suspend-to-disk</span>»</span> из новых ядер Linux, так как невозможно (во время последующей загрузки) восстановить приостановленные данные записанные в раздел подкачки. </p>
</dd>
</dl></div>
<p>

</p>
</dd>
<dt><span class="term">Стереть данные: <strong class="userinput"><code>да</code></strong></span></dt>
<dd><p>Задаёт, нужно ли перезаписать содержимое раздела произвольными данными перед настройкой шифрования. Это рекомендуется делать, так как иначе это может позволить злоумышленнику разгадать какие части раздела используются, а какие нет. Также, это усложнит процесс восстановления любых оставшихся от предыдущей установки данных<a href="#ftn.idm2554" class="footnote" name="idm2554"><sup class="footnote">[12]</sup></a>. </p></dd>
</dl></div>
<p>

</p>
<p>После выбора желаемых параметров для шифруемых разделов, вернитесь обратно в главное меню разметки. Там должен появиться новый пункт <span class="guimenu">Настроить шифрование для томов</span>. После того как вы его выберете, вас попросят подтвердить удаление данных на разделах, помеченных на стирании и возможно, другие действия, типа записи новой таблицы разделов. Для огромных разделов это может занять некоторое время. </p>
<p>Затем вас попросят ввести ключевую фразу для разделов, настроенные на её использование. Хорошие ключевые фразы должны быть больше 8 знаков, должны содержать вперемешку буквы, числа и другие символы и не должны содержать общеупотребительных словарных слов или информации, которая как-то относится к вам лично (например, дни рождения, хобби, имена домашних животных, имена родственников и тому подобное). </p>
<div class="warning"><table border="0" summary="Warning">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Предупреждение]" src="images/warning.png"></td>
<th align="left">Предупреждение</th>
</tr>
<tr><td align="left" valign="top"><p>Перед вводом ключевых фраз вы должны убедиться, что клавиатура настроена правильно и генерирует ожидаемые символы. Если вы не уверены, можно переключиться на вторую виртуальную консоль и попробовать ввести текст. Это застрахует вас от неожиданностей в последствии, например, если вы вводите ключевую фразу на клавиатуре с раскладкой qwerty, а во время установки вы использовали раскладку azerty. Такая ситуация может случиться по нескольким причинам. Вы могли переключиться на другую раскладку клавиатуры во время установки, или выбранная раскладка ещё не активирована ко времени ввода ключевой фразы для корневой файловой системы. </p></td></tr>
</table></div>
<p>Если для создания ключей шифрования вы выбрали использование методов без ключевой фразы, то они будут сгенерированы. Так как ядро могло не собрать достаточное количество энтропии на данной ранней стадии установки, процесс может занять продолжительное время. Вы можете ускорить процесс генерации энтропии: например, нажимая произвольные клавиши, или переключиться в оболочку командной строки на второй виртуальной консоли и создать некоторый обмен данными по сети или с диском (загрузив какие-то файлы, скопировать большие файлы в <code class="filename">/dev/null</code> и т.д.). Это нужно сделать для каждого шифруемого раздела. </p>
<p>После возвращения в главное меню разметки, вы увидите все шифрованные тома как дополнительные разделы, которые можно настраивать как обычные разделы. В следующем примере показан том, зашифрованный с помощью dm-crypt </p>
<div class="informalexample"><pre class="screen">
Encrypted volume (<em class="replaceable"><code>sda2_crypt</code></em>) - 115.1 GB Linux device-mapper
     #1 115.1 GB  F ext3
</pre></div>
<p>Теперь можно назначить точки монтирования и изменить тип файловых систем, если значения по умолчанию чем-то не устраивают. </p>
<p>Запишите где-нибудь информацию о соответствии идентификаторов в скобках (<em class="replaceable"><code>sda2_crypt</code></em> в данном случае) и точках монтирования, которые вы назначили шифрованным томам. Эти данные вам потребуются позже при загрузки новой системы. Различия между обычным процессом загрузки и загрузки с шифрованием описаны далее в <a class="xref" href="ch07s02.html" title="7.2. Монтирование шифрованных томов">Раздел 7.2, «Монтирование шифрованных томов»</a>. </p>
<p>После того как вас полностью устроит схема разметки, продолжайте установку. </p>
</div>
</div>
<div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="di-install-base"></a>6.3.5. Установка базовой системы</h3></div></div></div>
<p>Хотя эта стадия наименее проблематична, она занимает наибольшую часть времени установки, потому что загружается, проверяется и распаковывается вся базовая система. Если у вас медленный компьютер или сетевое соединение, это может занять определённое время. </p>
<p>Во время установки базовой системы сообщения о распаковке и настройке пакетов переправляются на <strong class="userinput"><code>tty4</code></strong>. Вы можете перейти на этот терминал, нажав <span class="keycap"><strong>левый Alt</strong></span>+<span class="keycap"><strong>F4</strong></span>; чтобы вернуться обратно в основной процесс установки нажмите <span class="keycap"><strong>левый Alt</strong></span>+<span class="keycap"><strong>F1</strong></span>. </p>
<p>Сообщения распаковки/настройки во время этого этапа сохраняются в файле <code class="filename">/var/log/syslog</code>. Вы можете посмотреть их, если установка выполняется через консоль на последовательном порту. </p>
<p>В одной из частей установки выполняется установка ядра Linux. С приоритетом по умолчанию программа установки выберет ядро наиболее подходящее для вашего оборудования. В режимах с низким приоритетом, это предложат сделать вам из списка доступных ядер. </p>
<p>При установке пакетов с помощью системы управления пакетами по умолчанию также производится установка пакетов, рекомендуемых устанавливаемыми пакетами. Рекомендуемые пакеты не требуются для работоспособности основных возможностей выбранного ПО, но они добавляют новые возможности этому ПО и должны, по мнению сопровождающих, обычно устанавливаться вместе с этим ПО. </p>
<div class="note"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Примечание]" src="images/note.png"></td>
<th align="left">Примечание</th>
</tr>
<tr><td align="left" valign="top"><p>По техническим причинам, пакеты, устанавливаемые во время установки базовой системы, устанавливаются без их <span class="quote">«<span class="quote">Рекомендуемых</span>»</span> пакетов. Правило, описанное выше, действует только после данного этапа процесса установки. </p></td></tr>
</table></div>
</div>
<div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="di-install-software"></a>6.3.6. Установка дополнительного программного обеспечения</h3></div></div></div>
<p>На этом этапе уже есть рабочая, но ограниченная по возможностям система. Большинство пользователей хотело бы добавить дополнительное программное обеспечение в систему, чтобы решать свои задачи, и программа установки позволяет это сделать. Этот этап может продлиться дольше чем установка базовой системы, если у вас медленный компьютер или соединение с сетью. </p>
<div class="sect3">
<div class="titlepage"><div><div><h4 class="title">
<a name="apt-setup"></a>6.3.6.1. Настройка apt</h4></div></div></div>
<p>One of the tools used to install packages on a Debian GNU/Linux system is the program <span class="command"><strong>apt</strong></span>, from the <code class="classname">apt</code> package<a href="#ftn.idm2597" class="footnote" name="idm2597"><sup class="footnote">[13]</sup></a>. Other front-ends for package management, like <span class="command"><strong>aptitude</strong></span> and <span class="command"><strong>synaptic</strong></span>, are also in use. These front-ends are recommended for new users, since they integrate some additional features (package searching and status checks) in a nice user interface. </p>
<p>Пакету <span class="command"><strong>apt</strong></span> нужно указать откуда получать пакеты. Результат настройки сохраняется в файле <code class="filename">/etc/apt/sources.list</code>. Вы можете проверить и изменить его по желаю после завершения установки. </p>
<p>Если вы выполняете установку с приоритетом по умолчанию, то программа установки выполнит большую часть настройки автоматически, основываясь на используемом методе установки и, возможно, на ответах, указанных вами ранее. В большинстве случаев программа установки автоматически добавит зеркало безопасности и, если вы используете стабильный дистрибутив, зеркало сервиса <span class="quote">«<span class="quote">stable-updates</span>»</span>. </p>
<p>Если вы производите установку с низким приоритетом (например, в экспертном режиме), то вы сможете принять больше решений самостоятельно. Вы сможете выбрать использовать ли сервисы обновлений безопасности и/или stable-updates, а также добавлять ли секции пакетов <span class="quote">«<span class="quote">contrib</span>»</span> и <span class="quote">«<span class="quote">non-free</span>»</span>. </p>
<div class="sect4">
<div class="titlepage"><div><div><h5 class="title">
<a name="apt-setup-cdset"></a>6.3.6.1.1. Installing from more than one CD or DVD image</h5></div></div></div>
<p>If you are installing from a CD or DVD image that is part of a larger set, the installer will ask if you want to scan additional installation media. If you have such additional media available, you probably want to do this so the installer can use the packages included on them. </p>
<p>If you do not have any additional media, that is no problem: using them is not required. If you also do not use a network mirror (as explained in the next section), it can mean that not all packages belonging to the tasks you select in the next step of the installation can be installed. </p>
<div class="note"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Примечание]" src="images/note.png"></td>
<th align="left">Примечание</th>
</tr>
<tr><td align="left" valign="top">
<p>Packages are included on CD and DVD images in the order of their popularity. This means that for most uses only the first image of a set is needed and that only very few people actually use any of the packages included on the last images of a set. </p>
<p>Это также означает, что покупка или загрузка и прожиг полного набора CD пустая трата денег, так как большинство дисков просто не будут использоваться. В большинстве случаев достаточно получить только первые от 3 до 8 CD, а устанавливать нужные дополнительные пакеты можно из Интернет с сервера-зеркала. Тоже касается и DVD наборов: первого DVD или, может быть, первых двух DVD хватит для большинства задач. </p>
</td></tr>
</table></div>
<p>If you do scan multiple installation media, the installer will prompt you to exchange them when it needs packages from one that isn't currently in the drive. Note that only discs that belong to the same set should be scanned. The order in which they are scanned does not really matter, but scanning them in ascending order will reduce the chance of mistakes. </p>
</div>
<div class="sect4">
<div class="titlepage"><div><div><h5 class="title">
<a name="apt-setup-mirror"></a>6.3.6.1.2. Использование сетевого сервера-зеркала пакетов</h5></div></div></div>
<p>Один из часто задаваемых вопросов: использовать или нет сетевой сервер-зеркало в качестве источника пакетов. В большинстве случаев значение ответа по умолчанию вполне приемлемо, но не всегда. </p>
<p>If you are <span class="emphasis"><em>not</em></span> installing from a full CD/DVD image, you really should use a network mirror as otherwise you will end up with only a very minimal system. However, if you have a limited Internet connection it is best <span class="emphasis"><em>not</em></span> to select the <code class="literal">desktop</code> task in the next step of the installation. </p>
<p>If you are installing from a single full CD image, using a network mirror is not required, but is still strongly recommended because a single CD image contains only a fairly limited number of packages. If you have a limited Internet connection it may still be best to <span class="emphasis"><em>not</em></span> select a network mirror here, but to finish the installation using only what's available on the CD image and selectively install additional packages after the installation (i.e. after you have rebooted into the new system). </p>
<p>If you are installing from DVD, any packages needed during the installation should be present on the first DVD image. Use of a network mirror is optional. </p>
<p>One advantage of adding a network mirror is that updates, that have occurred since the CD/DVD images were created and have been included in a point release, will become available for installation, thus extending the life of your CD/DVD set without compromising the security or stability of the installed system. </p>
<p>In summary: selecting a network mirror is generally a good idea, except if you do not have a good Internet connection. If the current version of a package is available from installation media, the installer will always use that. The amount of data that will be downloaded if you do select a mirror thus depends on </p>
<div class="orderedlist"><ol class="orderedlist" type="1">
<li class="listitem"><p>задач, которые вы выберете на следующем этапе установки, </p></li>
<li class="listitem"><p>пакетов, которые необходимы для этих задач, </p></li>
<li class="listitem"><p>which of those packages are present on the installation media you have scanned, and </p></li>
<li class="listitem"><p>whether any updated versions of packages included on the installation media are available from a mirror (either a regular package mirror, or a mirror for security or stable-updates). </p></li>
</ol></div>
<p>

</p>
<p>Заметим, что даже если вы выберете не использовать сетевое зеркало, некоторые пакеты могут всё равно быть скачаны из Интернет, если для них есть, согласно сервису безопасности или stable-updates, новые версии, и если эти были сервисы настроены. </p>
</div>
<div class="sect4">
<div class="titlepage"><div><div><h5 class="title">
<a name="apt-setup-mirror-selection"></a>6.3.6.1.3. Выбор сетевого сервера-зеркала пакетов</h5></div></div></div>
<p>Unless you chose not to use a network mirror, you will be presented with a list of network mirrors based upon your country selection earlier in the installation process. Choosing the offered default is usually fine. </p>
<p>The offered default is deb.debian.org, which is not a mirror itself but will redirect to a mirror that should be up-to-date and fast. These mirrors support TLS (https protocol) and IPv6. This service is maintained by the Debian System Administration (DSA) team. </p>
<p>A mirror can also be specified by hand by choosing <span class="quote">«<span class="quote">enter information manually</span>»</span> . You can then specify a mirror host name and an optional port number. This actually has to be a URL base, i.e. when specifying an IPv6 address, one has to add square brackets around it, for instance <span class="quote">«<span class="quote">[2001:db8::1]</span>»</span>. </p>
<p>Если ваш компьютер имеет только адрес IPv6 (что, вероятно, не так, для подавляющего большинства пользователей), указанное по умолчанию зеркало для вашей страны может не работать. Все зеркала из списка доступны по адресам IPv4, и только некоторые из них имеют адреса IPv6. Доступность отдельных зеркал может с течением времени меняться, эта информация недоступна программе установки. Если для вашей страны зеркало по умолчанию недоступно через IPv6, то вы можете попробовать другое зеркало или <span class="quote">«<span class="quote">ввести информацию вручную</span>»</span>. При этом в качестве имени зеркала вы можете указать <span class="quote">«<span class="quote">ftp.ipv6.debian.org</span>»</span>, которое является псевдонимом зеркала, доступного по IPv6, хотя оно не будет таким быстрым. </p>
</div>
</div>
<div class="sect3">
<div class="titlepage"><div><div><h4 class="title">
<a name="pkgsel"></a>6.3.6.2. Выбор и установка программного обеспечения</h4></div></div></div>
<p>Во время процесса установки вам будет предложено выбрать дополнительное программное обеспечение для установки. Вместо выбора каждой программы из <span class="phrase">87573</span>
   
   
   
   
   
   
   
   
    доступных пакетов, этот этап позволяет сосредоточиться на выборе и установке заранее подготовленных наборов ПО, чтобы быстро настроить компьютер на выполнение определённых задач. </p>
<p>These tasks loosely represent a number of different jobs or things you want to do with your computer, such as <span class="quote">«<span class="quote">Desktop environment</span>»</span>, <span class="quote">«<span class="quote">Web server</span>»</span>, or <span class="quote">«<span class="quote">SSH server</span>»</span><a href="#ftn.idm2660" class="footnote" name="idm2660"><sup class="footnote">[14]</sup></a>. <a class="xref" href="apds02.html" title="D.2. Дисковое пространство, необходимое для задач">Раздел D.2, «Дисковое пространство, необходимое для задач»</a> lists the space requirements for the available tasks. </p>
<p>Некоторые задачи могут быть уже выбраны в зависимости от характеристик компьютера на который производится установка. Если вы не согласны с таким выбором, то можете отменить лишние задачи. Вы даже можете вообще ничего не устанавливать с помощью задач. </p>
<div class="tip"><table border="0" summary="Tip">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Подсказка]" src="images/tip.png"></td>
<th align="left">Подсказка</th>
</tr>
<tr><td align="left" valign="top"><p>В стандартном пользовательском интерфейсе программы установки для выбора/отмены задач используется клавиша пробел. </p></td></tr>
</table></div>
<div class="note"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Примечание]" src="images/note.png"></td>
<th align="left">Примечание</th>
</tr>
<tr><td align="left" valign="top">
<p>По задаче <span class="quote">«<span class="quote">Окружение рабочего стола</span>»</span> будет установлено графическое окружение рабочего стола. </p>
<p>По умолчанию <code class="classname">debian-installer</code> устанавливает окружение рабочего стола <span class="phrase">Gnome</span> . Во время установки возможно выбрать другое окружение рабочего стола. Также возможно установить несколько окружений, но некоторые комбинации не могут быть установлены одновременно. </p>
<p>Note that this will only work if the packages needed for the desired desktop environment are actually available. If you are installing using a single full CD image, they will possibly need to be downloaded from a network mirror as they might not be available on the CD image due to its limited amount of space. Installing any of the available desktop environments this way should work fine if you are using a DVD image or any other installation method. </p>
</td></tr>
</table></div>
<p>The various server tasks will install software roughly as follows. Web server: <code class="classname">apache2</code>; SSH server: <code class="classname">openssh</code>. </p>
<p>По задаче <span class="quote">«<span class="quote">Стандартная система</span>»</span> установятся все пакеты с приоритетом <span class="quote">«<span class="quote">стандарт</span>»</span>. Сюда входит множество общих утилит, которые есть в любой Linux или Unix системе. Вы должны оставить эту задачу выбранной, если вы новичок и не хотите получить действительно минимально работоспособную систему. </p>
<p>Если в следствии выбора языка локаль по умолчанию стала отличаться от локали <span class="quote">«<span class="quote">C</span>»</span>, то <span class="command"><strong>tasksel</strong></span> проверит, определены ли какие-либо задачи локализации для этой локали, и автоматически попытается установить подходящие пакеты локализации. Например, к таким пакетам относятся пакеты со словарями или специальными шрифтами для вашего языка. Если выбрана установка окружения рабочего стола, то также будут установлены соответствующие пакеты локализации (если есть). </p>
<p>После выбора задач нажмите <span class="guibutton">Continue</span>. Теперь <span class="command"><strong>apt</strong></span> начнёт установку пакетов, которые являются частью указанных задач. Если какой-то программе нужна дополнительная информация от пользователя, то она задаст её во время данного процесса. </p>
<p>Хотим сообщить, что есть очень большие задачи, особенно Рабочий стол. Если установка происходит с обычного CD-ROM и с зеркала пакетов, которых нет на CD-ROM, то программе установки может потребоваться получить много пакетов из сети. Если у вас медленное соединение с интернет, то это займёт много времени. После начала установки пакетов её никак нельзя прервать. </p>
<p>Даже если пакеты есть на CD-ROM, программа установки всё равно может скачивать пакеты с зеркала, если на зеркале есть более новая версия пакета, чем на CD-ROM. Если вы устанавливаете стабильную версию дистрибутива, такое может происходить после обновления выпуска (обновление первого стабильного выпуска); если вы устанавливаете тестируемую версию, то это может происходить, если у вас устаревший образ. </p>
</div>
</div>
<div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="di-make-bootable"></a>6.3.7. Установка и настройка системного загрузчика</h3></div></div></div>
<p>Если вы выполняете установку на бездисковую рабочую станцию, очевидно, что загрузка с локального диска не нужна, и этот шаг можно пропустить.  </p>
<div class="sect3">
<div class="titlepage"><div><div><h4 class="title">
<a name="os-prober"></a>6.3.7.1. Обнаружение операционных систем</h4></div></div></div>
<p>Перед установкой системного загрузчика программа установки попытается обнаружить другие операционные системы, установленные на машине. Если она обнаружит поддерживаемую операционную систему, то это будет отражено на этапе установки системного загрузчика, и компьютер сможет загружать эту операционную систему в дополнении к Debian. </p>
<p>Надо заметить, что загрузка множества операционных систем на одной машине всё ещё напоминает чёрную магию. Автоматическая поддержка обнаружения и настройки системных загрузчиков на загрузку различных операционных систем различается на разных архитектурах и даже субархитектурах. Более подробную информацию можно найти в документации по менеджеру загрузки. </p>
</div>
<div class="sect3">
<div class="titlepage"><div><div><h4 class="title">
<a name="idm2699"></a>6.3.7.2. Install the <span class="command"><strong>Grub</strong></span> Boot Loader on the drive</h4></div></div></div>
<p>The amd64 boot loader is called <span class="quote">«<span class="quote">grub</span>»</span>. Grub is a flexible and robust boot loader and a good default choice for new users and old hands alike. </p>
<p>By default, grub will be installed on the UEFI partition/the Boot Record of the primary drive, where it will take over complete control of the boot process. If you prefer, you can install it elsewhere. See the grub manual for complete information. </p>
<p>Если вы не хотите устанавливать grub, нажмите кнопку <span class="guibutton">Go Back</span>, чтобы перейти в главное меню, и там выберите системный загрузчик, который вы хотите использовать. </p>
</div>
<div class="sect3">
<div class="titlepage"><div><div><h4 class="title">
<a name="nobootloader"></a>6.3.7.3. Продолжение без системного загрузчика</h4></div></div></div>
<p>Эта опция может быть использована для завершения установки без установки системного загрузчика, если для этой архитектуры/субархитектуры его не существует или потому что, он вам не нужен (например, чтобы использовать существующий системный загрузчик). </p>
<p>Если вы планируете настройку системного загрузчика вручную, то должны узнать имя файла устанавливаемого ядра, которое лежит в каталоге <code class="filename">/target/boot</code>. Также, проверьте существование каталога <em class="firstterm">initrd</em>; если он есть, то вероятно нужно указать это в системном загрузчике, чтобы он использовал его. Ещё вам потребуется знать диск и раздел, который выбран в качестве <code class="filename">/</code> файловой системы и, если вы выбрали установку с отдельным разделом <code class="filename">/boot</code>, то также и раздел файловой системы с <code class="filename">/boot</code>. </p>
</div>
</div>
<div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="di-finish"></a>6.3.8. Завершение установки</h3></div></div></div>
<p>Это последний этап установки Debian в процессе которого программа установки выполнит ещё пару действий. В основном, это уборка за <code class="classname">debian-installer</code>. </p>
<div class="sect3">
<div class="titlepage"><div><div><h4 class="title">
<a name="system-clock"></a>6.3.8.1. Настройка системного времени</h4></div></div></div>
<p>Программа установки может спросить вас показывают ли часы компьютера время по Гринвичу (UTC). Обычно этот вопрос, если возможно, не задаётся и программа установки решает, что часы показывают время по Гринвичу, если на машине не установлено других операционных систем. </p>
<p>В экспертном режиме вы всегда можете выбрать установлены ли часы по Гринвичу или нет.  <span class="phrase">В системах, которые (также) работают под Dos или Windows, часы обычно настроены на местное время. Если хотите использовать мультизагрузку, выберите местное время вместо UTC.</span> </p>
<p>На этом этапе <code class="classname">debian-installer</code> попытается сохранить текущее время в аппаратных часах системы. Оно будет выставлено в UTC или местном времени, в зависимости от выбора, который вы недавно делали. </p>
</div>
<div class="sect3">
<div class="titlepage"><div><div><h4 class="title">
<a name="finish-install"></a>6.3.8.2. Перезагрузка системы</h4></div></div></div>
<p>You will be prompted to remove the boot media (CD, USB stick, etc) that you used to boot the installer. After that the system will be rebooted into your new Debian system. </p>
</div>
</div>
<div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="di-miscellaneous"></a>6.3.9. Устранение проблем</h3></div></div></div>
<p>Перечисленные в этом разделе компоненты обычно не используются в процессе установки, но они готовы прийти на помощь пользователю в случае, если что-то пойдёт не так. </p>
<div class="sect3">
<div class="titlepage"><div><div><h4 class="title">
<a name="save-logs"></a>6.3.9.1. Сохранение протокола установки</h4></div></div></div>
<p>Если установка прошла успешно, файлы протокола установки, созданные во время процесса установки, будут автоматически записаны в <code class="filename">/var/log/installer/</code> в новой системе Debian. </p>
<p>Choosing <span class="guimenuitem">Save debug logs</span> from the main menu allows you to save the log files to a USB stick, network, hard disk, or other media. This can be useful if you encounter fatal problems during the installation and wish to study the logs on another system or attach them to an installation report. </p>
</div>
<div class="sect3">
<div class="titlepage"><div><div><h4 class="title">
<a name="shell"></a>6.3.9.2. Использование командной строки и просмотр журнальных файлов</h4></div></div></div>
<p>Есть несколько способов перейти в оболочку командной строки во время выполнения установки. На большинстве систем, и если вы не производите установку с консоли на последовательном порту, самый простой метод — это переключиться на вторую <span class="emphasis"><em>виртуальную консоль</em></span> нажав <span class="keycap"><strong>левый Alt</strong></span>+<span class="keycap"><strong>F2</strong></span><a href="#ftn.idm2746" class="footnote" name="idm2746"><sup class="footnote">[15]</sup></a> (на клавиатуре Mac: <span class="keycap"><strong>Option</strong></span>+<span class="keycap"><strong>F2</strong></span>). Чтобы вернуться обратно в программу установки используйте <span class="keycap"><strong>левый Alt</strong></span>+<span class="keycap"><strong>F1</strong></span>. </p>
<p>Описание программы установки с графическим интерфейсом смотрите в <a class="xref" href="ch06s01.html#gtk-using" title="6.1.1. Использование программы установки с графическим интерфейсом">Раздел 6.1.1, «Использование программы установки с графическим интерфейсом»</a>. </p>
<p>Если вы не можете переключаться между консолями, также есть пункт в меню <span class="guimenuitem">Запуск оболочки</span>, который запускает оболочку. Чтобы из большинства диалогов попасть обратно в главное меню нажмите кнопку <span class="guibutton">Go Back</span> один или несколько раз. Чтобы вернуться обратно в программу установки, введите <strong class="userinput"><code>exit</code></strong> для завершения оболочки. </p>
<p>В данный момент вы загрузились с RAM диска и имеете ограниченный набор Unix утилит. Вы можете выяснить какие утилиты доступны с помощью команды <span class="command"><strong>ls /bin /sbin /usr/bin /usr/sbin</strong></span> или набрав <span class="command"><strong>help</strong></span>. Клон Bourne оболочки командной строки называется <span class="command"><strong>ash</strong></span> и имеет некоторые полезные свойства,такие как автодополнение и история команд. </p>
<p>Для редактирования и просмотра файлов имеется текстовый редактор <span class="command"><strong>nano</strong></span>. Журнальные файлы системы установки можно найти в каталоге <code class="filename">/var/log</code>. </p>
<div class="note"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Примечание]" src="images/note.png"></td>
<th align="left">Примечание</th>
</tr>
<tr><td align="left" valign="top">
<p>Хотя вы и можете делать в оболочке в помощью команд всё что угодно, не забывайте, что оболочка, прежде всего, предназначалась для отладки и если что-то заработает неправильно. </p>
<p>Выполнение команд в оболочке может повлиять на процесс установки и привести к ошибкам или неполной установке. В частности, вы всегда должны позволить программе установки активировать раздел подкачки и не выполнять это самостоятельно из оболочки командной строки. </p>
</td></tr>
</table></div>
</div>
</div>
<div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="network-console"></a>6.3.10. Installation over network-console</h3></div></div></div>
<p>Одной из наиболее интересных компонент является <em class="firstterm">network-console</em>. Она позволяет выполнить огромную часть процесса установки через сеть по протоколу SSH. Чтобы использовать сеть, вам нужно выполнить первые шаги установки из консоли, по крайней мере настройку сети. (Хотя вы можете автоматизировать и эту часть с помощью <a class="xref" href="ch04s06.html" title="4.6. Автоматическая установка">Раздел 4.6, «Автоматическая установка»</a>.) </p>
<p>This component is not loaded into the main installation menu by default, so you have to explicitly ask for it. If you are installing from optical media, you need to boot with medium priority or otherwise invoke the main installation menu and choose <span class="guimenuitem">Load installer components from installation media</span> and from the list of additional components select <span class="guimenuitem">network-console: Continue installation remotely using SSH</span>. Successful load is indicated by a new menu entry called <span class="guimenuitem">Continue installation remotely using SSH</span>. </p>
<p>Далее <span class="phrase">после выбора данного пункта</span>  попросят ввести новый пароль и его подтверждение для подключения к устанавливаемой системе. Это всё. Теперь вы должны увидеть инструкции по удалённому подключению в качестве пользователя <span class="emphasis"><em>installer</em></span> с только что введённым паролем. Также здесь будет показан отпечаток (fingerprint) системы. Вам нужно передать этот отпечаток безопасным образом человеку, который будет продолжать установку удалённо. </p>
<p>Если вы решите продолжить установку локально, то всегда можете нажать клавишу <span class="keycap"><strong>Enter</strong></span> и вернуться обратно в меню чтобы выбрать другую компоненту. </p>
<p>Теперь давайте перейдём на другую сторону соединения. Здесь вам потребуется настроить терминал для работы с кодировкой UTF-8, потому что её использует устанавливаемая система. Если вы не можете этого сделать, удалённая установка всё ещё возможна, но в этом случае вы будете наблюдать на экране странные закорючки вместо границ окон и не-ascii символов. Чтобы установить соединение с удалённой системой просто наберите: </p>
<div class="informalexample"><pre class="screen">
<code class="prompt">$</code> <strong class="userinput"><code>ssh -l installer <em class="replaceable"><code>install_host</code></em></code></strong>
</pre></div>
<p> где <em class="replaceable"><code>install_host</code></em> это имя или IP-адрес компьютера с запущенной программой установки. Перед приглашением в систему будет показан идентификатор машины (fingerprint), чтобы вы смогли убедиться, что это именно тот компьютер. </p>
<div class="note"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Примечание]" src="images/note.png"></td>
<th align="left">Примечание</th>
</tr>
<tr><td align="left" valign="top">
<p>Сервер <span class="command"><strong>ssh</strong></span> из программы установки использует настройки по умолчанию, то есть не отправляет пакеты keep-alive. В принципе, соединение с системой, будучи установленным, должно сохраняться открытым бесконечно. Однако, в некоторых ситуациях — в зависимости настроек вашей локальной сети — соединение может быть потеряно после некоторого периода неактивности. Одним из случаев когда это случается — использование одной из форм трансляции сетевых адресов (NAT) где-то между клиентом и устанавливаемой системой. В зависимости от этапа установки, при котором было разорвано соединение, вы не всегда сможете продолжить установку после переподключения. </p>
<p>Чтобы избежать потери подключения, добавьте параметр <strong class="userinput"><code>-o ServerAliveInterval=<em class="replaceable"><code>значение</code></em></code></strong> при запуске соединения <span class="command"><strong>ssh</strong></span>, или добавьте этот параметр в свой файл настройки <span class="command"><strong>ssh</strong></span>. Заметим однако, что в некоторых случаях добавление этого параметра вообще <span class="emphasis"><em>может приводить</em></span> к потере соединения (например, если пакеты keep-alive посылались во время краткосрочных проблем в сети, хотя без параметра <span class="command"><strong>ssh</strong></span> сам бы восстановился), поэтому используйте это только когда очень нужно. </p>
</td></tr>
</table></div>
<div class="note"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Примечание]" src="images/note.png"></td>
<th align="left">Примечание</th>
</tr>
<tr><td align="left" valign="top"><p>Если вы производите установку на несколько компьютеров последовательно и так получилось, что они имеют одинаковый IP-адрес или имя, то <span class="command"><strong>ssh</strong></span> не будет подключаться к таким машинам. Причина в том, что они имеют разные отпечатки, что обычно указывает на атаку подмены. Если вы уверены, что это не так, то вам нужно удалить соответствующую строку из <code class="filename">~/.ssh/known_hosts</code><a href="#ftn.idm2808" class="footnote" name="idm2808"><sup class="footnote">[16]</sup></a> и попробовать подключиться ещё раз. </p></td></tr>
</table></div>
<p>После регистрации на удалённой системе вам предложат два варианта:<span class="guimenuitem">Start menu</span> и <span class="guimenuitem">Start shell</span>. Выбрав первый, вы попадёте в главное меню программы установки, откуда можно продолжить установку как обычно. Во втором варианте запускается оболочка командной строки, из которой можно проверить и возможно, что-то исправить на удалённой системе. Разрешается запускать только одну сессию SSH для установочного меню и несколько для оболочки командной строки. </p>
<div class="warning"><table border="0" summary="Warning">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Предупреждение]" src="images/warning.png"></td>
<th align="left">Предупреждение</th>
</tr>
<tr><td align="left" valign="top"><p>После запуска установки через SSH, вы не должны возвращаться к установке с консоли, так как это может привести к порче базы данных, которая содержит настройки новой системы. Это, в свою очередь, может привести к неудачному завершению установки или проблемам в установленной системой. </p></td></tr>
</table></div>
</div>
<div class="footnotes">
<br><hr width="100" align="left">
<div id="ftn.idm2013" class="footnote"><p><a href="#idm2013" class="para"><sup class="para">[6] </sup></a> Технически говоря: когда для языка существует несколько локалей с различными кодами стран. </p></div>
<div id="ftn.idm2021" class="footnote"><p><a href="#idm2021" class="para"><sup class="para">[7] </sup></a> Установив средний или низкий приоритет, вы всегда можете выбрать предпочитаемую локаль из тех, что доступны для выбранного языка (если есть больше одной). </p></div>
<div id="ftn.idm2027" class="footnote"><p><a href="#idm2027" class="para"><sup class="para">[8] </sup></a>Старые локали — это локали, не использующие UTF-8, с устаревшей стандартной символьной кодировкой, например ISO 8859-1 (используется для западно-европейских языков) или EUC-JP (используется для японского языка). </p></div>
<div id="ftn.idm2214" class="footnote"><p><a href="#idm2214" class="para"><sup class="para">[9] </sup></a>Программа установки шифрует групповые тома LVM 256-битным ключом AES и использует поддержку <span class="quote">«<span class="quote">dm-crypt</span>»</span> в ядре. </p></div>
<div id="ftn.idm2296" class="footnote"><p><a href="#idm2296" class="para"><sup class="para">[10] </sup></a> Если честно, вы можете собрать MD устройство даже из обычных разделов, расположенных на одном физическом жёстком диске, но это не даст никакой выгоды. </p></div>
<div id="ftn.idm2539" class="footnote"><p><a href="#idm2539" class="para"><sup class="para">[11] </sup></a> Использование ключевой фразы в качестве ключа означает, что раздел будет настроен с помощью <a class="ulink" href="https://gitlab.com/cryptsetup/cryptsetup" target="_top">LUKS</a>. </p></div>
<div id="ftn.idm2554" class="footnote"><p><a href="#idm2554" class="para"><sup class="para">[12] </sup></a> Однако, есть мнение, что ребята из служб на три буквы могут восстанавливать данные даже после их неоднократной перезаписи на магнитооптических носителях. </p></div>
<div id="ftn.idm2597" class="footnote"><p><a href="#idm2597" class="para"><sup class="para">[13] </sup></a> Note that the program which actually installs the packages is called <span class="command"><strong>dpkg</strong></span>. However, this program is more of a low-level tool. <span class="command"><strong>apt</strong></span> is a higher-level tool, which will invoke <span class="command"><strong>dpkg</strong></span> as appropriate. It knows how to retrieve packages from your installation media, the network, or wherever. It is also able to automatically install other packages which are required to make the package you're trying to install work correctly. </p></div>
<div id="ftn.idm2660" class="footnote"><p><a href="#idm2660" class="para"><sup class="para">[14] </sup></a> You should know that to present this list, the installer is merely invoking the <span class="command"><strong>tasksel</strong></span> program. It can be run at any time after installation to install more packages (or remove them), or you can use a more fine-grained tool such as <span class="command"><strong>aptitude</strong></span>. If you are looking for a specific single package, after installation is complete, simply run <strong class="userinput"><code>aptitude install <em class="replaceable"><code>package</code></em></code></strong>, where <em class="replaceable"><code>package</code></em> is the name of the package you are looking for. </p></div>
<div id="ftn.idm2746" class="footnote"><p><a href="#idm2746" class="para"><sup class="para">[15] </sup></a> То есть: нажмите клавишу <span class="keycap"><strong>Alt</strong></span> с левой стороны от клавиши <span class="keycap"><strong>пробел</strong></span> и функциональную клавишу <span class="keycap"><strong>F2</strong></span> одновременно. </p></div>
<div id="ftn.idm2808" class="footnote"><p><a href="#idm2808" class="para"><sup class="para">[16] </sup></a> Для удаления существующей записи об узле можно воспользоваться командой: <span class="command"><strong>ssh-keygen -R &lt;<em class="replaceable"><code>имя_узла</code></em>|<em class="replaceable"><code>IP-адрес</code></em>&gt;</strong></span>. </p></div>
</div>
</div>
<div class="navfooter">
<hr>
<table width="100%" summary="Navigation footer">
<tr>
<td width="40%" align="left">
<a accesskey="p" href="ch06s02.html"><img src="images/prev.png" alt="Пред."></a> </td>
<td width="20%" align="center"><a accesskey="u" href="ch06.html"><img src="images/up.png" alt="Наверх"></a></td>
<td width="40%" align="right"> <a accesskey="n" href="ch06s04.html"><img src="images/next.png" alt="След."></a>
</td>
</tr>
<tr>
<td width="40%" align="left" valign="top">6.2. Описание компонент </td>
<td width="20%" align="center"><a accesskey="h" href="index.html"><img src="images/home.png" alt="Начало"></a></td>
<td width="40%" align="right" valign="top"> 6.4. Загрузка отсутствующих микропрограмм</td>
</tr>
</table>
</div>
</body>
</html>
