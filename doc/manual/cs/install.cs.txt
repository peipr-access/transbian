Debian GNU/Linux -- instalační příručka

Copyright © 2004 - 2021 tým okolo instalačního programu Debianu

Tento manuál je volně šiřitelný; můžete ho distribuovat nebo pozměnit za
podmínek uvedených v licenci GNU General Public Licence. Text licence naleznete
v F - "Český překlad GNU General Public License".

Build version of this manual: 20220129~deb11u1.

Abstrakt

Dokument obsahuje návod na instalaci systému Debian GNU/Linux 11 (kódové
označení "bullseye"), pro počítače 64-bit PC ("amd64"). Kromě návodu zde
naleznete odkazy na další dokumentaci, která vám pomůže s detailnějším
nastavením a vyladěním nového systému.

Varování

Tento překlad instalační příručky není aktuální a momentálně na něm nikdo
nepracuje. Při čtení tedy mějte na paměti, že může obsahovat zastaralé nebo
mylné informace. Jste-li na pochybách, konzultujte anglickou verzi. Můžete-li
nám pomoci s překladem, kontaktujte prosím <debian-boot@lists.debian.org> nebo
českou překladatelskou diskusní skupinu debian-l10n-czech. Děkujeme.

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

Obsah

Instalace systému Debian GNU/Linux 11 na architektuře amd64
1. Vítejte v Debianu

    1.1. Co je Debian?
    1.2. Co je GNU/Linux?
    1.3. Co je Debian GNU/Linux?
    1.4. What is the Debian Installer?
    1.5. Získání Debianu
    1.6. Získání nejnovější verze této příručky
    1.7. Organizace příručky
    1.8. O licenčních ujednáních

2. Požadavky na počítač

    2.1. Podporovaná zařízení

        2.1.1. Podporované počítačové architektury
        2.1.2. Podporované procesory
        2.1.3. Notebooky
        2.1.4. Víceprocesorové systémy
        2.1.5. Podpora grafických karet
        2.1.6. Hardware pro připojení k síti
        2.1.7. Braillovy řádky
        2.1.8. Hardwarová syntéza hlasu
        2.1.9. Ostatní zařízení

    2.2. Ovladače vyžadující firmware
    2.3. Hardware určený pro GNU/Linux

        2.3.1. Vyvarujte se uzavřených technologií

    2.4. Instalační média

        2.4.1. CD-ROM/DVD-ROM/BD-ROM
        2.4.2. USB Memory Stick
        2.4.3. Síť
        2.4.4. Pevný disk
        2.4.5. Un*x nebo systém GNU
        2.4.6. Podporovaná datová média

    2.5. Požadavky na operační paměť a diskový prostor

3. Než začnete s instalací

    3.1. Přehled instalačního procesu
    3.2. Zálohujte si svá data!
    3.3. Dále budete potřebovat

        3.3.1. Dokumentace
        3.3.2. Hledání zdrojů informací o hardwaru
        3.3.3. Hardwarová kompatibilita
        3.3.4. Nastavení sítě

    3.4. Splnění minimálních hardwarových požadavků
    3.5. Předrozdělení disku pro více operačních systémů
    3.6. Než začnete s instalací ...

        3.6.1. Invoking the BIOS/UEFI Set-Up Menu
        3.6.2. Výběr zaváděcího zařízení
        3.6.3. Systémy s firmwarem UEFI
        3.6.4. Secure boot
        3.6.5. Disabling the Windows "fast boot"/"fast startup" feature
        3.6.6. Různé hardwarové problémy

4. Získání instalačních médií

    4.1. Official Debian GNU/Linux installation images
    4.2. Stažení souborů ze zrcadel Debianu

        4.2.1. Where to Find Installation Files

    4.3. Příprava souborů pro zavedení z USB zařízení

        4.3.1. Preparing a USB stick using a hybrid CD/DVD image
        4.3.2. Ruční kopírování souborů
        4.3.3. Ruční kopírování souborů -- pružná cesta

    4.4. Příprava souborů pro zavedení z pevného disku

        4.4.1. Hard disk installer booting from Linux using GRUB
        4.4.2. Zavedení instalačního systému programem loadlin

    4.5. Příprava souborů pro zavedení ze sítě pomocí TFTP

        4.5.1. Nastavení DHCP serveru
        4.5.2. Nastavení BOOTP serveru
        4.5.3. Povolení TFTP serveru
        4.5.4. Přesun TFTP obrazů na místo

    4.6. Automatická Instalace

        4.6.1. Automatic Installation Using the Debian Installer

    4.7. Verifying the integrity of installation files

5. Zavedení instalačního systému

    5.1. Zavedení instalátoru na 64-bit PC

        5.1.1. Zavedení z USB "klíčenky"
        5.1.2. Booting from optical disc (CD/DVD)
        5.1.3. Zavedení z Windows
        5.1.4. Zavedení z DOSu pomocí loadlin
        5.1.5. Booting from Linux using GRUB
        5.1.6. Zavedení z TFTP
        5.1.7. Zaváděcí obrazovka
        5.1.8. Grafický instalátor

    5.2. Zpřístupnění

        5.2.1. Uživatelské rozhraní instalačního systému
        5.2.2. Braillův řádek připojený na USB
        5.2.3. Braillův řádek připojený na sériový port
        5.2.4. Softwarová syntéza hlasu
        5.2.5. Hardwarová syntéza hlasu
        5.2.6. Zařízení připojená rovnou na sběrnici
        5.2.7. Kontrastní téma
        5.2.8. Změna velikosti písma
        5.2.9. Záchranný režim, expertní a automatizované instalace
        5.2.10. Zpřístupnění v nainstalovaném systému

    5.3. Zaváděcí parametry

        5.3.1. Zavěděcí konzole
        5.3.2. Parametry instalačního programu
        5.3.3. Použití zaváděcích parametrů pro zodpovězení otázek
        5.3.4. Předávání parametrů jaderným modulům
        5.3.5. Zapsání jaderných modulů na černou listinu

    5.4. Problémy s instalačním systémem

        5.4.1. Reliability of optical media
        5.4.2. Zaváděcí konfigurace
        5.4.3. Softwarová syntéza hlasu
        5.4.4. Běžné instalační problémy na 64-bit PC
        5.4.5. Význam hlášek při zavádění jádra
        5.4.6. Hlášení problémů s instalací
        5.4.7. Pošlete nám zprávu o instalaci

6. Používáme instalační program Debianu

    6.1. Základní principy

        6.1.1. Používání grafického instalátoru

    6.2. Úvod do komponent
    6.3. Použití jednotlivých komponent

        6.3.1. Nastavení instalačního programu a rozpoznání hardwaru
        6.3.2. Nastavení uživatelů a hesel
        6.3.3. Nastavení hodin a časového pásma
        6.3.4. Rozdělení disku a výběr přípojných bodů
        6.3.5. Instalace základního systému
        6.3.6. Instalace dodatečného softwaru
        6.3.7. Nastavení zavádění systému
        6.3.8. Dokončení instalace
        6.3.9. Řešení problémů
        6.3.10. Installation over network-console

    6.4. Nahrání chybějícího firmwaru

        6.4.1. Příprava média
        6.4.2. Firmware a instalovaný systém
        6.4.3. Completing the Installed System

    6.5. Customization

        6.5.1. Installing an alternative init system

7. Zavedení vašeho nového systému

    7.1. Okamžik pravdy
    7.2. Připojení zašifrovaných svazků

        7.2.1. Řešení problémů

    7.3. Přihlášení do systému

8. Co dál?

    8.1. Vypínání systému
    8.2. Orientace v Debianu

        8.2.1. Balíčkovací systém Debianu
        8.2.2. Další software pro Debian
        8.2.3. Správa různých verzí programů
        8.2.4. Správa Cronu

    8.3. Další dokumentace
    8.4. Nastavení poštovního systému

        8.4.1. Výchozí nastavení pošty
        8.4.2. Odesílání pošty mimo systém
        8.4.3. Nastavení poštovního serveru Exim4

    8.5. Kompilace nového jádra
    8.6. Obnovení poškozeného systému

A. Jak na instalaci

    A.1. Příprava
    A.2. Zavedení instalačního programu

        A.2.1. Optical disc
        A.2.2. USB Memory Stick
        A.2.3. Zavedení ze sítě
        A.2.4. Zavedení z pevného disku

    A.3. Instalace
    A.4. Pošlete nám zprávu o instalaci
    A.5. A na závěr...

B. Automatizování instalací pomocí přednastavení

    B.1. Úvod

        B.1.1. Způsoby přednastavení
        B.1.2. Omezení

    B.2. Použití

        B.2.1. Nahrání souboru s přednastavením
        B.2.2. Použití zaváděcích parametrů jako formy přednastavení
        B.2.3. Automatický režim
        B.2.4. Užitečné aliasy
        B.2.5. Examples of boot prompt preseeding
        B.2.6. Použití DHCP serveru pro určení souboru s přednastavením

    B.3. Vytvoření souboru s přednastavením
    B.4. Obsah souboru s přednastavením (pro bullseye)

        B.4.1. Lokalizace
        B.4.2. Nastavení sítě
        B.4.3. Síťová konzole
        B.4.4. Nastavení zrcadla
        B.4.5. Nastavení účtů
        B.4.6. Nastavení hodin a časového pásma
        B.4.7. Rozdělení disku
        B.4.8. Instalace základního systému
        B.4.9. Nastavení APT
        B.4.10. Výběr balíků
        B.4.11. Instalace zavaděče
        B.4.12. Dokončení instalace
        B.4.13. Přednastavení ostatních balíků

    B.5. Pokročilé možnosti

        B.5.1. Spouštění vlastních příkazů během instalace
        B.5.2. Použití přednastavení pro změnu výchozích hodnot
        B.5.3. Zřetězené nahrávání souborů s přednastavením

C. Poznámky k rozdělování disku

    C.1. Počet a velikost oblastí
    C.2. Strom adresářů
    C.3. Doporučené rozdělení disku
    C.4. Jak Linux pojmenovává pevné disky
    C.5. Dělící programy v Debianu

        C.5.1. Dělení disku na 64-bit PC

D. Co se jinam nevešlo

    D.1. Zařízení v Linuxu

        D.1.1. Nastavení myši

    D.2. Místo potřebné pro úlohy
    D.3. Jak nainstalovat Debian GNU/Linux ze stávajícího unixového/linuxového
        systému

        D.3.1. Přípravné práce
        D.3.2. Instalace balíku debootstrap
        D.3.3. Spuštění debootstrapu
        D.3.4. Nastavení základního systému
        D.3.5. Instalace jádra
        D.3.6. Nastavení zavaděče
        D.3.7. Vzdálený přístup: Instalace SSH a nastavení přístupu
        D.3.8. Závěrečné kroky

    D.4. Jak nainstalovat Debian GNU/Linux přes paralelní port (PLIP)

        D.4.1. Požadavky
        D.4.2. Nastavení stroje earthsimulator
        D.4.3. Instalace na nahepc

    D.5. Jak nainstalovat Debian GNU/Linux pomocí PPP přes Ethernet (PPPoE)

E. Administrivia

    E.1. O tomto dokumentu
    E.2. Jak přispět k tomuto návodu
    E.3. Hlavní spoluautoři
    E.4. Ochranné známky

F. Český překlad GNU General Public License

Seznam tabulek

3.1. Hardwarové informace užitečné pro instalaci
3.2. Doporučené minimální požadavky

Instalace systému Debian GNU/Linux 11 na architektuře amd64

Jsme potěšeni, že jste se rozhodli vyzkoušet právě Debian. Poznáte, že je mezi
distribucemi operačních systémů zcela výjimečný. Debian GNU/Linux přináší
kvalitní svobodný software z celého světa a spojuje jej do koherentního celku.
Věříme, že zjistíte, že i zde platí pravidlo synergie: přínos softwaru v
distribuci Debian je mnohem vyšší než celkový přínos samostatných programů.

Chápeme, že mnoho čtenářů bude chtít přeskočit tuto příručku a začít rovnou s
instalací (a instalační program se snaží, aby to bylo možné). Pokud tedy nemáte
čas číst celou instalační příručku, přečtěte si alespoň krátký dokument nazvaný
"Jak na instalaci", který vás provede základní instalací. Pro případ, že se
něco pokazí, nebo pro popis složitějších technik, v něm naleznete odkazy do
této instalační příručky. Krátký dokument se nalézá v A - "Jak na instalaci".

Ve světle řečeného doufáme, že si naleznete čas přečíst většinu této příručky,
protože získáte nejen zajímavé informace, ale také budete mít z instalace lepší
zážitek.

Kapitola 1. Vítejte v Debianu

Obsah

1.1. Co je Debian?
1.2. Co je GNU/Linux?
1.3. Co je Debian GNU/Linux?
1.4. What is the Debian Installer?
1.5. Získání Debianu
1.6. Získání nejnovější verze této příručky
1.7. Organizace příručky
1.8. O licenčních ujednáních

V této kapitole se stručně seznámíte s historií projektu Debian a s distribucí
Debian GNU/Linux. Pokud jste nedočkaví a chcete přejít rovnou k instalaci,
přeskočte klidně na následující kapitolu.

1.1. Co je Debian?

Debian je výhradně dobrovolnická organizace věnující se vývoji svobodného
softwaru a šíření myšlenek Free Software Foundation. Debian vznikl v roce 1993,
když se Ian Murdock rozhodl vytvořit kompletní a jednotnou softwarovou
distribuci založenou na relativně novém jádře Linux. Ian rozeslal otevřenou
výzvu softwarovým vývojářům, kteří by chtěli k projektu přispívat. Relativně
malá skupina zasvěcených nadšenců, původně financovaná Free Software Foundation
a ovlivněna filosofií GNU, se během let rozrostla do organizace sestávající z
asi 1000 vývojářů.

Vývojáři jsou zapojeni do mnoha aktivit zahrnujících správu služeb WWW a FTP,
vytváření grafického designu, právní analýzy softwarových licencí, psaní
dokumentace a samozřejmě správu softwarových balíků.

V zájmu sdělování své filosofie a přilákání vývojářů, kteří věří tomu, co
Debian reprezentuje, jsme publikovali množství dokumentů, které vysvětlují naše
hodnoty a slouží jako návody těm, kteří se chtějí stát debianími vývojáři.

  • Novým vývojářem se může stát kdokoli, kdo souhlasí se závazky plynoucími z
    Debian Social Contract. Každý vývojář může k distribuci připojit další
    softwarový balík za předpokladu, že program je podle našich kritérií volně
    šiřitelný a balík splňuje naše standardy kvality.

  • Dokument Debian Free Software Guidelines je jasný a výstižný souhrn
    kritérií, která Debian klade na svobodný software. Tento dokument má ve
    světě svobodného softwaru velký vliv a je základem pro The Open Source
    Definition.

  • Debian má rozsáhlé specifikace standardů kvality obsažené v Debian Policy
    Manual. Dokument určuje podmínky, které musí splňovat každý balík v naší
    distribuci.

Vývojáři Debianu jsou rovněž zainteresováni v řadě dalších projektů, z nichž
některé úzce souvisí přímo s Debianem, jiné se dotýkají celé linuxové komunity.
Například:

  • Projekt Filesystem Hierarchy Standard (FHS) se snaží standardizovat
    umístění souborů v linuxovém systému. Softwaroví vývojáři se tak budou moci
    plně koncentrovat na vývoj svých programů a nebudou se muset dále starat o
    to, zda jejich balík bude fungovat na jiné distribuci GNU/Linuxu.

  • Debian Jr. je interní projekt Debianu zaměřený především na naše nejmenší
    uživatele.

Pokud se chcete o Debianu dozvědět víc, podívejte se na Debian FAQ.

1.2. Co je GNU/Linux?

GNU/Linux je operační systém, což je skupina programů, které vám mimo jiné
umožňují komunikovat s počítačem a spouštět další programy.

Operační systém se skládá z řady základních programů, které potřebuje každý
počítač, aby byl vůbec schopen pracovat s různými periferiemi (např. pracovat s
daty na discích a páskách, obsluhovat tiskárny, přidělovat paměť, ...),
komunikovat s uživatelem a spouštět programy. Nejdůležitější částí operačního
systému je jádro, což je v systému GNU/Linux právě Linux. Zbytek systému okolo
jádra je tvořen nejrůznějšími programy, z nichž spousta byla napsána v rámci
projektu GNU. Protože jádro samotné netvoří funkční operační systém,
preferujeme pro označení takovýchto systémů termín "GNU/Linux". (Lidé obvykle
říkají "Linux", ale mají tím na mysli GNU/Linux.)

GNU/Linux is modelled on the Unix operating system. From the start, GNU/Linux
was designed to be a multi-tasking, multi-user system. These facts are enough
to make GNU/Linux different from other well-known operating systems. However,
GNU/Linux is even more different than you might imagine. In contrast to other
operating systems, nobody owns GNU/Linux. Much of its development is done by
unpaid volunteers.

Počátky toho, co se později stalo GNU/Linuxem, sahají do roku 1984, když Free
Software Foundation zahájila vývoj svobodného operačního systému podobného
Unixu nazvaného GNU.

The GNU Project has developed a comprehensive set of free software tools for
use with Unix (tm) and Unix-like operating systems such as GNU/Linux. These
tools enable users to perform tasks ranging from the mundane (such as copying
or removing files from the system) to the arcane (such as writing and compiling
programs or doing sophisticated editing in a variety of document formats).

While many groups and individuals have contributed to GNU/Linux, the largest
single contributor is still the Free Software Foundation, which created not
only most of the tools used in GNU/Linux, but also the philosophy and the
community that made GNU/Linux possible.

První linuxové jádro se objevilo v roce 1991 a napsal jej Fin Linus Torvalds,
tehdejší student Helsinské univerzity, jako náhradu za Minix (viz Historie
Linuxu).

Nyní na jádře aktivně pracuje několik stovek lidí z celého světa a Linus
koordinuje vývoj za pomoci několika správců jednotlivých podsystémů. Jádro
Linux má své vlastní webové stránky. Informace o konferenci linux-kernel můžete
najít na stránce linux-kernel mailing list FAQ.

GNU/Linux users have immense freedom of choice in their software. For example,
they can choose from a dozen different command line shells and several
graphical desktops. This selection is often bewildering to users of other
operating systems, who are not used to thinking of the command line or desktop
as something that they can change.

GNU/Linux is also less likely to crash, better able to run more than one
program at the same time, and more secure than many operating systems. With
these advantages, Linux is the fastest growing operating system in the server
market. More recently, Linux has begun to be popular among home and business
users as well.

1.3. Co je Debian GNU/Linux?

Kombinace filosofie a metodologie Debianu spolu s nástroji GNU, jádrem Linux a
dalším svobodným softwarem vyústila do unikátní softwarové distribuce, která je
známá pod názvem Debian GNU/Linux. Distribuci Debian tvoří množství
softwarových balíků. Jednotlivé balíky sestávají ze spustitelných souborů,
skriptů, dokumentace a konfiguračních souborů. Každý balík má svého správce,
který za něj zodpovídá (udržuje balík aktuální, sleduje hlášení o chybách a
komunikuje s autorem, jehož software balíčkuje). Díky poměrně velké základně
uživatelů v kombinaci se systémem hlášení chyb bývají problémy v balících
nalezeny a odstraněny velice rychle.

Debian's attention to detail allows us to produce a high-quality, stable, and
scalable distribution. Installations can be easily configured to serve many
roles, from stripped-down firewalls to desktop scientific workstations to
high-end network servers.

Debian je obzvláště populární mezi pokročilými uživateli, kteří si cení jeho
stabilitu, technickou preciznost a přizpůsobitelnost. Systém může vystupovat v
různých rolích -- od minimalistického firewallu přes vědeckou pracovní stanici
až po vysoce výkonný síťový server. Během vývoje distribuce vzniklo mnoho
průkopnických myšlenek, které jsou dnes považovány za zcela samozřejmé.

Debian byl například první linuxovou distribucí, která obsahovala systém pro
správu balíků, čímž se stala instalace programů triviální záležitostí. Debian
byl také první linuxovou distribucí, kterou jste mohli aktualizovat bez
přeinstalování celého systému.

I dnes si Debian zachovává některé unikátní vlastnosti. Například jeho vývojový
proces je ukázkou toho, že model otevřeného vývoje může fungovat i pro tak
rozsáhlý projekt, jako je vývoj a údržba kompletního operačního systému.

Vlastnost, kterou se Debian nejvíc odlišuje od ostatních linuxových distribucí,
je jeho systém pro správu balíků. Tento soubor nástrojů dává administrátorovi
systému Debian úplnou kontrolu nad balíky, ze kterých se systém skládá.
Umožňuje mu například automatickou aktualizaci celé distribuce nebo naopak
označení balíků, které by neměly být aktualizovány. Dokonce je možné upozornit
systém na vlastní přeložené balíky a určit, jaké jsou závislosti mezi nimi a
oficiálními balíky.

Aby byl váš systém ochráněn před trojskými koňmi a jinými zlovolnými programy,
debianí servery automaticky ověřují, že balíky přicházejí do distribuce od
jejich skutečných správců. Debianí vývojáři rovněž usilují o to, aby byly
programy nakonfigurovány bezpečně již při standardním nastavení. Jestliže se u
distribuovaných balíků vyskytnou bezpečnostní problémy, jsou záhy k dispozici
jejich opravy, které si můžete pomocí jednoduchých aktualizačních nástrojů
automaticky stahovat a instalovat přes Internet.

Pokud chcete získat podporu pro svůj systém s Debian GNU/Linuxem, nebo jen
chcete komunikovat s vývojáři distribuce, můžete tak učinit pomocí více jak 322
diskusních klubů, které Debian spravuje. Pro přihlášení do některého z nich
stačí vyplnit formulář na přihlašovací stránce.

1.4. What is the Debian Installer?

Debian Installer, also known as "d-i", is the software system to install a
basic working Debian system. A wide range of hardware such as embedded devices,
laptops, desktops and server machines is supported and a large set of free
software for many purposes is offered.

The installation is conducted by answering a basic set of questions. Also
available are an expert mode that allows to control every aspect of the
installation and an advanced feature to perform automated installations. The
installed system can be used as is or further customized. The installation can
be performed from a multitude of sources: USB, CD/DVD/Blu-Ray or the network.
The installer supports localized installations in more than 80 languages.

The installer has its origin in the boot-floppies project, and it was first
mentioned by Joey Hess in 2000. Since then the installation system has been
continuously developed by volunteers improving and adding more features.

More information can be found on the Debian Installer page, on the Wiki and on
the debian-boot mailing list.

1.5. Získání Debianu

For information on how to download Debian GNU/Linux from the Internet or from
whom official Debian installation media can be purchased, see the distribution
web page. The list of Debian mirrors contains a full set of official Debian
mirrors, so you can easily find the nearest one.

Aktualizace Debianu je velmi jednoduchá, protože systém je navržený tak, aby
jej nebylo třeba přeinstalovávat. S prvotním nastavením systému pro budoucí
aktualizace vám pomůže instalační program.

1.6. Získání nejnovější verze této příručky

Tato příručka je živý dokument -- stále se mění, aktualizuje a zlepšuje.
Nejčerstvější informace o systému Debian GNU/Linux verze 11, které se objevily
až po oficiálním vydání, můžete najít na stránkách pro Debian 11. Aktualizovaná
verze této příručky je rovněž k dispozici na stránkách oficiálního instalačního
manuálu.

1.7. Organizace příručky

Tato příručka si klade za cíl sloužit jako manuál pro nové uživatele Debianu a
od čtenáře neočekává žádné speciální znalosti a zkušenosti. Předpokládá však,
že máte obecnou představu o tom, jak funguje váš hardware.

Také uživatelé-experti mohou v tomto dokumentu najít zajímavé informace jako
např. velikost minimální instalace, detaily týkající se hardwaru podporovaného
instalačním systémem Debianu apod. Zkušeným uživatelům doporučujeme některé
pasáže přeskočit.

Obecně lze říct, že je tento dokument pojat přímočaře a provede vás instalačním
procesem krok za krokem. Následující seznam zachycuje jednotlivé kroky
instalace a kapitoly, které se jimi zabývají.

 1. Zjištění, zda-li vaše hardwarová konfigurace umožňuje instalaci systému,
    viz 2 - "Požadavky na počítač".

 2. Záloha dat, naplánování instalace a konfigurace hardwaru předcházející
    instalaci systému, viz 3 - "Než začnete s instalací". Jestliže se chystáte
    instalovat na pevný disk s více operačními systémy, budete možná muset pro
    Debian vytvořit místo na diskovou oblast.

 3. Získání potřebných instalačních souborů pro zvolenou metodu instalace, viz
    4 - "Získání instalačních médií".

 4. 5 - "Zavedení instalačního systému" popisuje zavedení instalačního systému.
    Zde také naleznete různé rady jak postupovat, pokud zavedení systému selže.

 5. Perform the actual installation according to 6 - "Používáme instalační
    program Debianu". This involves choosing your language, configuring
    peripheral driver modules, configuring your network connection, so that
    remaining installation files can be obtained directly from a Debian server
    (if you are not installing from a set of CD/DVD installation images),
    partitioning your hard drives and installation of a base system, then
    selection and installation of tasks. (Some background about setting up the
    partitions for your Debian system is explained in C - "Poznámky k
    rozdělování disku".)

 6. Zavedení nově nainstalovaného systému, viz 7 - "Zavedení vašeho nového
    systému".

Jakmile nainstalujete systém, měli byste si přečíst 8 - "Co dál?". Tato
kapitola vysvětluje, kam se máte podívat po dalších informacích o Unixu a
Debianu a jak aktualizovat jádro systému.

Konečně informace o tomto dokumentu a způsobu, jak do něj přispět, obsahuje E -
"Administrivia".

1.8. O licenčních ujednáních

Licenční podmínky většiny programů opravňují k používání programu pouze na
jednom počítači. Debian GNU/Linux taková omezení nemá. Budeme rádi, pokud ho
nainstalujete na další počítače ve škole či zaměstnání, zapůjčíte známým a
pomůžete jim s instalací. Můžete dokonce vyrobit tisíce kopií a prodávat je.
Stačí dodržet jistá pravidla. To všechno je možné díky tomu, že Debian je
založen na svobodném softwaru.

Calling software free doesn't mean that the software isn't copyrighted, and it
doesn't mean that installation media containing that software must be
distributed at no charge. Free software, in part, means that the licenses of
individual programs do not require you to pay for the privilege of distributing
or using those programs. Free software also means that not only may anyone
extend, adapt, and modify the software, but that they may distribute the
results of their work as well.

Poznámka

Poznamenejme, že jako pragmatický ústupek svým uživatelům, balíčkují debianí
vývojáři i software, který nesplňuje naši definici svobodného software. Tyto
balíky nejsou součástí oficiální distribuce a jsou dostupné pouze v částech
debianích zrcadel nazvaných contrib a non-free, případně na CD/DVD vyráběných
třetími stranami. Obsah a struktura zrcadel jsou popsány v Debian FAQ pod
názvem "The Debian FTP archives".

Many of the programs in the system are licensed under the GNU General Public
License, often simply referred to as "the GPL". The GPL requires you to make
the source code of the programs available whenever you distribute a binary copy
of the program; that provision of the license ensures that any user will be
able to modify the software. Because of this provision, the source code^[1] for
all such programs is available in the Debian system.

Některé programy v Debianu používají i jiná licenční ujednání. Autorská práva a
licenční ujednání ke každému balíku lze nalézt v souboru /usr/share/doc/
jméno-balíku/copyright .

Pokud se chcete dozvědět více o licencích a o tom, co Debian pokládá za
svobodný software, podívejte se na Debian Free Software Guidelines.

Nejdůležitější právní poznámka je, že tento software je bez jakékoliv záruky.
Programátoři, kteří vytvořili tento software, to udělali pro prospěch celé
komunity. Nezaručujeme, že software se bude hodit pro dané účely. Na druhou
stranu, jelikož se jedná o svobodný software, můžete jej měnit tak, aby
odpovídal vašim potřebám -- a využívat kódu ostatních, kteří stejným způsobem
rozšiřují tento software.


━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

^[1] For information on how to locate, unpack, and build binaries from Debian
source packages, see the Debian FAQ, under "Basics of the Debian Package
Management System".

Kapitola 2. Požadavky na počítač

Obsah

2.1. Podporovaná zařízení

    2.1.1. Podporované počítačové architektury
    2.1.2. Podporované procesory
    2.1.3. Notebooky
    2.1.4. Víceprocesorové systémy
    2.1.5. Podpora grafických karet
    2.1.6. Hardware pro připojení k síti
    2.1.7. Braillovy řádky
    2.1.8. Hardwarová syntéza hlasu
    2.1.9. Ostatní zařízení

2.2. Ovladače vyžadující firmware
2.3. Hardware určený pro GNU/Linux

    2.3.1. Vyvarujte se uzavřených technologií

2.4. Instalační média

    2.4.1. CD-ROM/DVD-ROM/BD-ROM
    2.4.2. USB Memory Stick
    2.4.3. Síť
    2.4.4. Pevný disk
    2.4.5. Un*x nebo systém GNU
    2.4.6. Podporovaná datová média

2.5. Požadavky na operační paměť a diskový prostor

V této kapitole se dozvíte informace o hardwarových požadavcích distribuce a
také zde naleznete odkazy na další informace o zařízeních podporovaných jádrem
Linux a GNU programy.

2.1. Podporovaná zařízení

Debian neklade na hardware jiná omezení než ta, která jsou dána jádrem Linuxu
nebo kFreeBSD a programy GNU. Tedy na libovolné počítačové architektuře, na
kterou bylo přeneseno jádro Linuxu nebo kFreeBSD, knihovna libc, překladač gcc
atd., a pro kterou existuje port Debianu, můžete Debian nainstalovat. Viz
stránka s porty (https://www.debian.org/ports/amd64/).

Než abychom se snažili popsat všechny podporované konfigurace hardwaru pro
architekturu 64-bit PC, zaměříme se spíše na obecné informace a uvedeme odkazy
na doplňující dokumentaci.

2.1.1. Podporované počítačové architektury

Debian GNU/Linux 11 podporuje 9 hlavních počítačových architektur a několik
jejich variant, někdy označované jako "příchutě".

┌───────────────────────────┬────────────────┬─────────────────────┬──────────┐
│       Architektura        │   Označení v   │   Podarchitektura   │ Varianta │
│                           │    Debianu     │                     │          │
├───────────────────────────┼────────────────┼─────────────────────┼──────────┤
│AMD64 & Intel 64           │amd64           │                     │          │
├───────────────────────────┼────────────────┼─────────────────────┼──────────┤
│                           │                │standardní počítače  │výchozí   │
│založené na Intel x86      │i386            │x86                  │          │
│                           │                ├─────────────────────┼──────────┤
│                           │                │Xen PV               │xen       │
├───────────────────────────┼────────────────┼─────────────────────┼──────────┤
│ARM                        │armel           │Marvell Kirkwood a   │marvell   │
│                           │                │Orion                │          │
├───────────────────────────┼────────────────┼─────────────────────┼──────────┤
│ARM s hardwarovým FPU      │armhf           │multiplatformní      │armmp     │
├───────────────────────────┼────────────────┼─────────────────────┼──────────┤
│64 bitové ARM              │arm64           │                     │          │
├───────────────────────────┼────────────────┼─────────────────────┼──────────┤
│                           │                │MIPS Malta           │5kc-malta │
│64 bitové MIPS             │                ├─────────────────────┼──────────┤
│(little-endian)            │mips64el        │Cavium Octeon        │octeon    │
│                           │                ├─────────────────────┼──────────┤
│                           │                │Loongson 3           │loongson-3│
├───────────────────────────┼────────────────┼─────────────────────┼──────────┤
│                           │                │MIPS Malta           │4kc-malta │
│32 bitové MIPS             │                ├─────────────────────┼──────────┤
│(little-endian)            │mipsel          │Cavium Octeon        │octeon    │
│                           │                ├─────────────────────┼──────────┤
│                           │                │Loongson 3           │loongson-3│
├───────────────────────────┼────────────────┼─────────────────────┼──────────┤
│Power Systems              │ppc64el         │IBM POWER8 nebo      │          │
│                           │                │novější              │          │
├───────────────────────────┼────────────────┼─────────────────────┼──────────┤
│64 bitové IBM S/390        │s390x           │IPL z VM-reader a    │generic   │
│                           │                │DASD                 │          │
└───────────────────────────┴────────────────┴─────────────────────┴──────────┘

Tato verze dokumentu se zabývá instalací Debianu s jádrem Linux na architektuře
64-bit PC. Pro ostatní podporované architektury jsou návody na stránkách
Debian-Ports.

2.1.2. Podporované procesory

Podporovány jsou jak procesory AMD64, tak Intel 64.

2.1.3. Notebooky

Z technického pohledu jsou notebooky obyčejné počítače, tudíž se na ně vztahuje
vše napsané o stolních systémech. V dnešní době funguje většina notebooků bez
problémů, od automatického uspávání po zavření víka, až po speciální tlačítka
pro vypnutí Wi-Fi ("režim v letadle"). Jestliže notebook obsahuje nestandardní
nebo proprietární hardwarové prvky, je možné že tyto speciální funkce nebudou
fungovat. Na stránce Linux a notebooky zjistíte, zda na vašem notebooku GNU/
Linux poběží.

2.1.4. Víceprocesorové systémy

Tato architektura umožňuje využití více procesorů -- tzv. symetrický
multiprocesing (SMP). Standardní jádro v distribuci Debian GNU/Linux 11 bylo
sestaveno s podporou SMP-alternatives, což znamená, že jádro samo rozpozná
počet procesorů (nebo procesorových jader) a na jednoprocesorových počítačích
podporu SMP automaticky vypne.

Více procesorů v počítači bylo původně doménou výkonných serverů, ale s
uvedením konceptu vícejádrových procesorů, kdy jeden fyzický čip obsahuje
několik procesorových jednotek, tzv. "jader", se s nimi dnes setkáváme
prakticky všude.

2.1.5. Podpora grafických karet

Debian's support for graphical interfaces is determined by the underlying
support found in X.Org's X11 system, and the kernel. Basic framebuffer graphics
is provided by the kernel, whilst desktop environments use X11. Whether
advanced graphics card features such as 3D-hardware acceleration or
hardware-accelerated video are available, depends on the actual graphics
hardware used in the system and in some cases on the installation of additional
"firmware" blobs (see 2.2 - "Ovladače vyžadující firmware").

On modern PCs, having a graphical display usually works out of the box. For
quite a lot of hardware, 3D acceleration also works well out of the box, but
there is still some hardware that needs binary firmware blobs to work well. In
some cases there have been reports about hardware on which installation of
additional graphics card firmware was required even for basic graphics support.

Podrobnosti o podporovaných grafických kartách a ukazovacích zařízeních
naleznete na https://wiki.freedesktop.org/xorg/. Debian GNU/Linux 11 je dodáván
se systémem X.Org verze 7.7.

2.1.6. Hardware pro připojení k síti

Libovolná síťová karta (NIC) podporovaná jádrem Linux by měla být podporována i
instalačním systémem. Ovladače by se měly zavádět automaticky. To zahrnuje
většinu PCI/PCI-Express karet včetně notebookových PCMCIA/Express Cards.

ISDN je podporováno, ale ne během instalace.

2.1.6.1. Bezdrátové síťové karty

Bezdrátové síťové karty jsou obecně podporovány, nicméně mnoho bezdrátových
síťových adaptérů vyžaduje (nesvobodný) firmware.

Jestliže je vyžadován firmware, instalační systém vás během instalace vyzve k
jeho nahrání. Více informací o nahrávání firmware během instalace naleznete v
části 6.4 - "Nahrání chybějícího firmwaru".

Síťové karty, které nejsou podporovány oficiálním jádrem, lze obvykle pod
Debianem zprovoznit, avšak nejsou podporovány během instalace.

Jestliže bezdrátová karta zlobí a pro instalaci nemůžete použít jinou síťovou
kartu, stále lze pro instalaci Debianu použít obraz velkého CD nebo DVD. V
takovém případě přeskočte konfiguraci sítě a instalujte pouze balíky z CD nebo
DVD. Potřebný ovladač pak můžete spolu s firmwarem doinstalovat po dokončení
instalace a následném restartu do nového systému.

Pokud ovladač pro kartu existuje, ale není dostupný jako debianí balík, můžete
si stáhnout z Internetu jeho zdrojové kódy a následně zkompilovat, což však
přesahuje rozsah této příručky. Neexistuje-li svobodný ovladač, je vaší
poslední možností balík ndiswrapper, který umí použít ovladače z Windows.

2.1.7. Braillovy řádky

Podpora braillových řádků se odvíjí od jejich podpory v brltty. Měla by
fungovat většina řádků připojených přes sériový port, USB nebo bluetooth.
Podrobnosti o podporovaných zařízeních naleznete na webových stránkách brltty.
Debian GNU/Linux 11 obsahuje brltty verze 6.3.

2.1.8. Hardwarová syntéza hlasu

Podpora pro hardwarovou syntézu hlasu se odvíjí od jejich podpory v balíku
speakup. speakup podporuje pouze integrované karty a externí zařízení připojená
k sériovému portu. USB zařízení, zařízení připojená přes sériové-USB převodníky
nebo přes PCI nejsou podporována. Podrobnosti o podporovaných zařízeních pro
hardwarovou syntézu hlasu naleznete na webových stránkách speakupu. Debian GNU/
Linux 11 obsahuje speakup verze 3.1.6.

2.1.9. Ostatní zařízení

Linux umožňuje používat nejrůznější hardwarové vybavení jako myši, tiskárny,
scannery, televizní karty a zařízení PCMCIA/CardBus/ExpressCard a USB. Většina
z nich však není pro instalaci nutná.

Některé USB klávesnice mohou na starých počítačích vyžadovat speciální
nastavení (viz 3.6.6 - "Různé hardwarové problémy"), ale na soudobých
počítačích pracují USB myši a klávesnice bez dalšího nastavovaní.

2.2. Ovladače vyžadující firmware

Besides the availability of a device driver, some hardware also requires
so-called firmware or microcode to be loaded into the device before it can
become operational. This is most common for network interface cards (especially
wireless NICs), but for example some USB devices and even some hard disk
controllers also require firmware.

With many graphics cards, basic functionality is available without additional
firmware, but the use of advanced features requires an appropriate firmware
file to be installed in the system. In some cases, a successful installation
can still end up in a black screen or garbled display when rebooting into the
installed system. If that happens, some workarounds can be tried to log in
anyway (see 6.4.3 - "Completing the Installed System").

Ve starších zařízeních býval firmware nahrán permanentně v EEPROM nebo Flash
paměti zařízení přímo od výrobce. To už se dnes příliš nenosí a proto je nutné
soubor s firmwarem do zařízení nahrát při každém startu počítače. Naštěstí to
nemusíme dělat ručně, ale postará se o to operační systém.

Ve většině případů je firmware dle definice Debianu nesvobodný a tudíž jej
nelze zařadit ani do distribuce, ani do instalačního systému. Jestliže je
ovladač samotný součástí Debianu a firmware je možno legálně distribuovat, je
možné, že ho naleznete jako samostatný balík v sekci non-free.

Naštěstí to neznamená, že takový hardware nemůžete pro instalaci použít.
Počínaje Debianem 5.0 podporuje debian-installer nahrávání firmwaru z výměnných
médií, jako jsou diskety nebo USB klíčenky. Tomuto tématu se podrobněji věnuje
kapitola 6.4 - "Nahrání chybějícího firmwaru".

Pokud se instalační systém zeptá na soubor s firmwarem pro nějaké zařízení a vy
zrovna firmware nemáte, nebo nechcete do systému instalovat nesvobodný balík,
můžete zkusit pokračovat i bez firmware. Je docela možné, že zařízení bude
fungovat, pouze nebudou dostupné některé pokročilé funkce (toto je případ
některých síťových karet s ovladačem tg3).

2.3. Hardware určený pro GNU/Linux

V současnosti již někteří prodejci dodávají počítače s nainstalovaným Debianem,
případně jinou distribucí GNU/Linuxu. Patrně si za tuto výhodu něco připlatíte,
ale zbavíte se starostí, poněvadž máte jistotu, že hardware počítače je se
systémem GNU/Linux plně kompatibilní.

Budete-li nuceni zakoupit počítač se systémem Windows, přečtěte si pozorně
jejich licenci, jestli můžete software odmítnout a zda vám budou vráceny
peníze. Více najdete na Internetu, když budete hledat klíčová slova "Windows
refund".

Ať už zakoupíte počítač se systémem GNU/Linux nebo bez něj, je důležité se
přesvědčit, že je hardware podporován jádrem operačního systému. Zkontrolujte
si, jestli jsou všechna zařízení v počítači uvedena ve výše zmíněných odkazech
jako podporovaná. Při nákupu se netajte tím, že kupujete počítač, na kterém
poběží Linux. Dejte přednost zboží, jehož výrobci Linux podporují.

2.3.1. Vyvarujte se uzavřených technologií

Někteří výrobci hardwaru nám neposkytují informace potřebné k napsání ovladačů
pro Linux, případně požadují podepsat smlouvu o uchování těchto informací v
tajnosti před třetími osobami, což znemožňuje uveřejnění zdrojového kódu pro
takový ovladač. Z důvodu nedostupnosti dokumentace pro tento hardware
neexistují ovladače pro Linux.

V mnoha případech existují standardy (nebo alespoň nepsané standardy), které
popisují, jak má operační systém komunikovat s určitou skupinou zařízení.
Všechna zařízení, která takový (nepsaný) standard dodržují, mohou být
obsluhována jediným společným ovladačem. Konkrétním příkladem skupin zařízení,
kde to funguje extrémně dobře, jsou třeba USB Human Interface Devices
(klávesnice, myši, herní ovladače) nebo USB Mass Storage Devices (USB klíčenky
a čtečky paměťových karet), kde prakticky každé zařízení na trhu odpovídá
standardům.

Naproti tomu třeba v oblasti tiskáren je situace výrazně horší. I když existují
tiskárny, které se dají ovládat několika (více či méně) standardními ovládacími
jazyky a tudíž je lze zprovoznit v téměř libovolném operačním systému, existuje
dost modelů, které rozumí pouze proprietárním příkazům, ke kterým neexistuje
žádná dostupná dokumentace. Takové tiskárny se ve svobodných operačních
systémech buď nedají používat vůbec, nebo pouze s uzavřeným ovladačem od
výrobce.

V případě existence uzavřeného ovladače od výrobce mějte na paměti, že
praktická životnost takového zařízení je omezena na dobu, po kterou je dostupný
ovladač. Se zkracováním životního cyklu výrobku není neobvyklé, že výrobce
přestane aktualizovat ovladač krátce po ukončení výroby daného zařízení. Pokud
po aktualizaci systému přestane uzavřený ovladač fungovat, stává se tím jinak
funkční zařízení hromadou nepoužitelného šrotu. Takovému hardwaru je dobré se
zdaleka vyhnout a to bez ohledu na operační systém, se kterým chcete zařízení
provozovat.

Pomoci můžete tím, že výrobce uzavřeného hardwaru požádáte o uvolnění nezbytné
dokumentace, podle které můžeme napsat svobodné ovladače pro jejich hardware.

2.4. Instalační média

Tato podkapitola popisuje různé druhy instalačních médií, která můžete použít
pro instalaci Debianu. Výhody a nevýhody jednotlivých médií pak podrobněji
rozebírá kapitola 4 - "Získání instalačních médií".

2.4.1. CD-ROM/DVD-ROM/BD-ROM

Installation from optical disc is supported for most architectures.

On PCs SATA, IDE/ATAPI, USB and SCSI optical drives are supported, as are
FireWire devices that are supported by the ohci1394 and sbp2 drivers.

2.4.2. USB Memory Stick

USB flash disks a.k.a. USB memory sticks have become a commonly used and cheap
storage device. Most modern computer systems also allow booting the
debian-installer from such a stick. Many modern computer systems, in particular
netbooks and thin laptops, do not have an optical drive anymore at all and
booting from USB media is the standard way of installing a new operating system
on them.

2.4.3. Síť

Během instalace můžete pro stažení potřebných souborů použít síť (konkrétně
služny HTTP nebo FTP). To, zda se síť použije, závisí na typu instalace, který
si zvolíte, a na vašich odpovědích během instalace. Instalační systém podporuje
většinu typů síťových připojení včetně PPPoE, výjimkou jsou ISDN nebo PPP. Po
instalaci můžete svůj systém nastavit i pro tato připojení.

You can also boot the installation system over the network without needing any
local media like CDs/DVDs or USB sticks. If you already have a
netboot-infrastructure available (i.e. you are already running DHCP and TFTP
services in your network), this allows an easy and fast deployment of a large
number of machines. Setting up the necessary infrastructure requires a certain
level of technical experience, so this is not recommended for novice users.

Příjemnou možností je bezdisková instalace. Systém se zavede z lokální sítě a
všechny lokální souborové systémy se připojí přes NFS.

2.4.4. Pevný disk

Pro mnoho architektur je také zajímavá možnost zavedení instalačního systému z
pevného disku. To však vyžaduje jiný operační systém, pomocí kterého nahrajete
na disk instalační program.

2.4.5. Un*x nebo systém GNU

Pokud používáte jiný unixový systém, můžete jej využít pro instalaci Debianu a
úplně tak obejít debian-installer popisovaný ve zbytku příručky. Tento způsob
instalace je vhodný zejména pro uživatele s podivným hardwarem, který jinak
není podporován instalačními médii, nebo na počítačích, které si nemohou
dovolit prostoje. Jestliže vás zmíněná technika zajímá, přeskočte na D.3 - "Jak
nainstalovat Debian GNU/Linux ze stávajícího unixového/linuxového systému".

2.4.6. Podporovaná datová média

Zaváděcí disky Debianu obsahují jádro s velkým množstvím ovladačů, aby
fungovaly na co nejširší škále počítačů.

Instalační systém Debianu obsahuje podporu pro IDE disky (též známé jako PATA),
SATA a SCSI řadiče a jednotky, USB i FireWire. Systém umí pracovat se
souborovými systémy FAT, FAT s rozšířením Win-32 (VFAT), NTFS a dalšími.

2.5. Požadavky na operační paměť a diskový prostor

K běžné instalaci potřebujete alespoň 780MB operační paměti a 920MB volného
místa na disku. Toto jsou opravdu minimální hodnoty. Reálnější pohled naleznete
v části 3.4 - "Splnění minimálních hardwarových požadavků".

The installer normally automatically enables memory-saving tricks to be able to
run on such low-memory system, but on architectures that are less tested it may
miss doing so. It can however be enabled manually by appending the lowmem=1 or
even lowmem=2 boot parameter (see also 6.3.1.1 - "Kontrola dostupné paměti /
nízkopaměťový režim" and 5.3.2 - "Parametry instalačního programu").

Installation on systems with less memory^[2] or disk space available may be
possible but is only advised for experienced users.


━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

^[2] Installation images that support the graphical installer require more
memory than images that support only the text-based installer and should not be
used on systems with less than 780MB of memory. If there is a choice between
booting the text-based and the graphical installer, the former should be
selected on such systems.

Kapitola 3. Než začnete s instalací

Obsah

3.1. Přehled instalačního procesu
3.2. Zálohujte si svá data!
3.3. Dále budete potřebovat

    3.3.1. Dokumentace
    3.3.2. Hledání zdrojů informací o hardwaru
    3.3.3. Hardwarová kompatibilita
    3.3.4. Nastavení sítě

3.4. Splnění minimálních hardwarových požadavků
3.5. Předrozdělení disku pro více operačních systémů
3.6. Než začnete s instalací ...

    3.6.1. Invoking the BIOS/UEFI Set-Up Menu
    3.6.2. Výběr zaváděcího zařízení
    3.6.3. Systémy s firmwarem UEFI
    3.6.4. Secure boot
    3.6.5. Disabling the Windows "fast boot"/"fast startup" feature
    3.6.6. Různé hardwarové problémy

Tato kapitola se zabývá přípravou pro instalaci Debianu ještě před zavedením
instalačního programu. To zahrnuje zazálohování dat, zjištění informací o
hardwaru a další nezbytné kroky.

3.1. Přehled instalačního procesu

Jenom na okraj bychom chtěli poznamenat, že kompletní reinstalace Debianu je
velmi výjimečná událost, kterou má nejčastěji na svědomí mechanická závada
pevného disku.

Many common operating systems may require a complete installation to be
performed when critical failures take place or for upgrades to new OS versions.
Even if a completely new installation isn't required, often the programs you
use must be re-installed to operate properly in the new OS.

Na rozdíl od mnoha známých operačních systémů, které musíte při přechodu na
novější verzi instalovat úplně znovu, nebo alespoň přeinstalovat aplikace,
Debian GNU/Linux se umí aktualizovat za běhu. Pokud by nová verze programu
vyžadovala nové verze ostatních balíků, nebo byla nějakým způsobem konfliktní s
jiným programem, balíčkovací systém Debianu se o vše postará. Protože máte k
dispozici mocné aktualizační nástroje, měli byste o kompletní reinstalaci
uvažovat pouze jako o poslední možnosti. Instalační systém není navržen
aktualizaci staršího systému.

Následuje stručný přehled instalačního procesu:

 1. Nejprve si zazálohujete všechna důležitá data (hlavně dokumenty).

 2. Poté posbíráte co nejvíce informací o svém počítači a seženete si potřebnou
    dokumentaci (např. dokumenty odkazované z této příručky).

 3. Stáhnete si soubory instalačního systému, potřebné ovladače a soubory s
    firmwarem.

 4. Připravíte si zaváděcí média jako CD/DVD/USB klíčenky, nebo vytvoříte
    síťovou infrastrukturu pro zavedení instalace ze sítě.

 5. Zavedete instalační systém.

 6. Zvolíte jazyk pro instalaci.

 7. Nastavíte síťové připojení.

 8. Bude-li třeba, vytvoříte místo pro Debian zmenšením stávajících oblastí na
    cílovém pevném disku.

 9. Vytvoříte a připojíte oblasti pro Debian.

10. Můžete pozorovat automatické stažení, instalaci a nastavení základního
    systému.

11. Select and install additional software.

12. Nainstalujete zavaděč, kterým budete spouštět Debian GNU/Linux (případně i
    původní operační systém).

13. Spustíte svůj nově nainstalovaný systém.

For 64-bit PC you have the option of using a graphical version of the
installation system. For more information about this graphical installer, see
5.1.8 - "Grafický instalátor".

Pokud máte s některým instalačním krokem problémy, je dobré vědět, který balík
je za danou situaci zodpovědný. Nuže, představujeme vám hlavní softwarové role
v tomto instalačním dramatu:

debian-installer (instalační program) je hlavní náplní této příručky.
Rozpoznává hardware a nahrává správné ovladače, rozděluje disky, instaluje
jádro systému a dohlíží na programy dhcp-client, aby nastavil síťové připojení,
debootstrap, aby nainstaloval balíky základního systému a tasksel, aby
doinstaloval dodatečný software. V této fázi instalace hraje své epizodní role
mnohem více herců, ale úloha debian-installeru končí s prvním zavedením nového
systému.

Díky programu tasksel, si můžete jednoduše doinstalovat celé skupiny programů
jako "webový server" nebo "desktopové prostředí" a přizpůsobit si tak systém
svým potřebám.

Pro začínajícího uživatele je jedním z důležitých rozhodnutí během instalace
instalace desktopového grafického prostředí, se skládá ze systému X Window a
jednoho z populárních desktopových prostředí. Pokud desktopové prostředí
nenainstalujete, budete mít k dispozici relativně jednoduchý systém ovládaný z
příkazové řádky. Grafické prostředí je volitelné proto, protože hodně systémů
Debian GNU/Linux slouží jako servery, a ty ke své činnosti grafické rozhraní
nepotřebují.

Vezměte, prosím, na vědomí, že X Window System je od instalačního systému úplně
oddělen a protože je mnohem více komplikovaný, nezabýváme se jím ani v této
příručce.

3.2. Zálohujte si svá data!

Before you start, make sure to back up every file that is now on your system.
If this is the first time a non-native operating system is going to be
installed on your computer, it is quite likely you will need to re-partition
your disk to make room for Debian GNU/Linux. Anytime you partition your disk,
you run a risk of losing everything on the disk, no matter what program you use
to do it. The programs used in the installation of Debian GNU/Linux are quite
reliable and most have seen years of use; but they are also quite powerful and
a false move can cost you. Even after backing up, be careful and think about
your answers and actions. Two minutes of thinking can save hours of unnecessary
work.

Jestliže budete instalovat Linux na počítač, kde již máte jiný operační systém,
přesvědčete se, že máte po ruce média pro jeho instalaci. Obvykle to není
potřeba, ale zvlášť v případě, kdy byste se chystali přerozdělit systémový
disk, by se vám mohlo stát, že bude nutné znovu nainstalovat zavaděč původního
systému, nebo dokonce celý systém.

3.3. Dále budete potřebovat

3.3.1. Dokumentace

3.3.1.1. Instalační manuál

(Právě čtete.) Manuál je k dispozici ve formátech ASCII, HTML nebo PDF.

  • install.cs.txt

  • install.cs.html

  • install.cs.pdf

3.3.1.2. Domumentace k hardwaru

Obsahuje spousty užitečných informací o konfiguraci resp. provozování různého
hardwaru.

  • Debian Hardware Wiki

3.3.2. Hledání zdrojů informací o hardwaru

V mnoha případech umí instalační program rozpoznat hardware automaticky, ale
podle hesla "vždy připraven" doporučujeme, abyste se před instalací se svým
hardwarem seznámili poněkud důvěrněji.

Informace o hardwaru můžete získat:

  • Z manuálů, které jste získali spolu s příslušným hardwarem.

  • The BIOS/UEFI setup screens of your computer. You can view these screens
    when you start your computer by pressing a combination of keys. Check your
    manual for the combination. Often, it is the Delete or the F2 key, but some
    manufacturers use other keys or key combinations. Usually upon starting the
    computer there will be a message stating which key to press to enter the
    setup screen.

  • Z krabic, ve kterých byly části hardware zabaleny.

  • Z Ovládacích panelů systému Windows.

  • Ze systémových příkazů nebo nástrojů původního operačního systému. Zvláště
    užitečné informace jsou o pevném disku a paměti RAM.

  • Od vašeho správce nebo poskytovatele Internetu. Tyto informace vám mohou
    pomoci při nastavení sítě a elektronické pošty.

Tabulka 3.1. Hardwarové informace užitečné pro instalaci

┌───────────────┬───────────────────────────────────────────────────────────┐
│   Hardware    │                    užitečné informace                     │
├───────────────┼───────────────────────────────────────────────────────────┤
│               │Počet.                                                     │
│               ├───────────────────────────────────────────────────────────┤
│               │Jejich pořadí v systému.                                   │
│               ├───────────────────────────────────────────────────────────┤
│               │Typ IDE (též známé jako PATA), SATA nebo SCSI              │
│Pevné disky    ├───────────────────────────────────────────────────────────┤
│               │Dostupné volné místo.                                      │
│               ├───────────────────────────────────────────────────────────┤
│               │Diskové oddíly.                                            │
│               ├───────────────────────────────────────────────────────────┤
│               │Oddíly, na kterých jsou nainstalovány jiné operační systémy│
├───────────────┼───────────────────────────────────────────────────────────┤
│Síťová rozhraní│Výrobce a model síťových adaptérů.                         │
├───────────────┼───────────────────────────────────────────────────────────┤
│Tiskárna       │Výrobce a model.                                           │
├───────────────┼───────────────────────────────────────────────────────────┤
│Grafická karta │Výrobce a model.                                           │
└───────────────┴───────────────────────────────────────────────────────────┘


3.3.3. Hardwarová kompatibilita

Mnoho výrobků pracuje v operačním systému Linux bez problémů a podpora hardwaru
pro něj se zlepšuje každým dnem. Přes to všechno Linux nepodporuje tolik typů
hardwaru jako některé jiné operační systémy.

Ovladače v jádře Linux většinou nejsou psány pro konkrétní "výrobek" nebo "
značku", ale pro konkrétní čipovou sadu. Mnoho na první pohled odlišných
zařízení/značek bývá založeno na stejném hardwaru, často přímo na tzv.
referenčním návrhu, který poskytuje výrobce čipu a ostatní firmy jej pak
prodávají pod svými vlastními názvy.

To má výhody i nevýhody. Výhodou je, že ovladač pro jednu čipovou sadu funguje
se širokou škálou zařízení od různých výrobců. Nevýhodou je, že často není
jednoduché poznat, který čip je v jakém zařízení použit, protože někteří
výrobci občas změní hardware produktu bez změny názvu zařízení, nebo alespoň
verze. Může se tak stát, že stejný výrobek koupený později, může mít zcela jiný
hardware, pro který je potřeba použít jiný ovladač, nebo pro něj dokonce ani
ovladač existovat nemusí.

For USB and PCI/PCI-Express/ExpressCard devices, a good way to find out on
which chipset they are based is to look at their device IDs. All USB/PCI/
PCI-Express/ExpressCard devices have so called "vendor" and "product" IDs, and
the combination of these two is usually the same for any product based on the
same chipset.

On Linux systems, these IDs can be read with the lsusb command for USB devices
and with the lspci -nn command for PCI/PCI-Express/ExpressCard devices. The
vendor and product IDs are usually given in the form of two hexadecimal
numbers, separated by a colon, such as "1d6b:0001".

An example for the output of lsusb: "Bus 001 Device 001: ID 1d6b:0002 Linux
Foundation 2.0 root hub", whereby 1d6b is the vendor ID and 0002 is the product
ID.

An example for the output of lspci -nn for an Ethernet card: "03:00.0 Ethernet
controller [0200]: Realtek Semiconductor Co., Ltd. RTL8111/8168B PCI Express
Gigabit Ethernet controller [10ec:8168] (rev 06)". The IDs are given inside the
rightmost square brackets, i.e. here 10ec is the vendor- and 8168 is the
product ID.

As another example, a graphics card could give the following output: "04:00.0
VGA compatible controller [0300]: Advanced Micro Devices [AMD] nee ATI RV710
[Radeon HD 4350] [1002:954f]".

Na systémech Windows můžete zjistit ID zařízení ve Správce zařízení na záložce 
"Podrobnosti". ID výrobce má předponu "VEN_", ID zařízení pak předponu "DEV_".
U Windows 7 a novějších navíc musíte na záložce Podrobnosti vybrat ze seznamu
vlastnost "Hardwarová ID", jelikož jinak byste ID neviděli.

Vyzbrojeni ID pak můžete vyrazit do hlubin Internetu a pátrat po informacích
ohledně ovladače pro danou čipovou sadu. Nebudete-li úspěšní, můžete zkusit
hledat podle kódových jmen čipů, která jsou taktéž vidět ve výpisu příkazů 
lsusb a lspci. V našem případě to je "RTL8111"/"RTL8168B" pro síťovou kartu a "
RV710" pro kartu grafickou.

3.3.3.1. Testování kompatibility hardware pomocí Live systému

Debian GNU/Linux je též na některých architekturách dostupný ve formě tzv. "
live systému". Jedná se o předpřipravené obrazy systému, které se dají spustit
přímo z USB klíčenky, CD nebo DVD a bez dalšího nastavování okamžitě používat.
Výhodou je, že se v takovém systému ve výchozím nastavení nic nezapisuje na
disk, vše se odehrává jen v operační paměti a po restartu počítače se vše vrátí
do původního stavu. Nejpohodlnější cestou ke zjištění, zda je daný hardware
systémem Debian GNU/Linux podporován, je tedy spustit Debian live a zkusit ho
chvíli používat.

Při používání live systému je třeba mít na paměti několik omezení. Jelikož se
vše odehrává v paměti počítače, je třeba mít dostatek paměti. Dalším omezením
pro testování hardwarové kompatibility může být fakt, že oficiální live obrazy
systému Debian GNU/Linux obsahují pouze svobodné součásti, což znamená, že na
nich nenaleznete například nesvobodný firmware. Ten sice můžete následně
doinstalovat ručně, ale nebude to tak automatické, jako když se
debian-installer sám dotázal po chybějících souborech s firmwarem.

Podrobnější informace o dostupných obrazech Debian live můžete nalézt na
stránce Debian Live.

3.3.4. Nastavení sítě

Pokud bude váš počítač trvale připojen do sítě (myslí se ethernetové a obdobné
připojení, ne PPP), kterou spravuje někdo jiný, zjistěte si od správce sítě
následující informace.

  • Název počítače (možná si počítač pojmenujete sami).

  • Název vaší domény.

  • IP adresu vašeho počítače.

  • Síťovou masku.

  • IP adresu brány tj. počítače spojujícího vaši síť s další sítí (nebo
    Internetem), pokud na vaší síti brána je.

  • IP adresu jmenného serveru, který zprostředkovává převod názvů počítačů na
    IP adresy (DNS).

Pokud daná síť používá pro nastavení parametrů DHCP (Dynamic Host Configuration
Protocol), nemusíte tyto informace zjišťovat, protože DHCP server nastaví váš
počítač automaticky.

Při připojení přes DSL nebo kabelovou televizi obvykle dostanete router, přes
který se připojujete, a na kterém obvykle bývá DHCP zapnuto.

Hodně zjednodušeně: pokud jste ve svém předchozím operačním systému nemuseli
síť nastavovat ručně, nebudete ji muset nastavovat ani v systému Debian GNU/
Linux.

Používáte-li bezdrátové připojení, měli byste navíc zjistit:

  • ESSID (jméno) vaší bezdrátové sítě.

  • Bezpečnostní klíč WEP nebo WPA/WPA2 pro přístup k síti (pokud jej
    používáte).

3.4. Splnění minimálních hardwarových požadavků

Porovnejte seznam svého hardware s následující tabulkou, ve které zjistíte, zda
můžete použít zamýšlený typ instalace.

Skutečné minimální požadavky mohou být nižší než uvádí tabulka, ale většina
uživatelů by asi nebyla spokojena s rychlostí systému. Vždy záleží na
konkrétních požadavcích a možnostech.

Pro pracovní stanice je minimální doporučený procesor Pentium 4 na 1GHz.

Tabulka 3.2. Doporučené minimální požadavky

┌──────────────────────────┬───────────────┬────────────────┬──────────┐
│      Typ instalace       │RAM (minimální)│RAM (doporučená)│Pevný disk│
├──────────────────────────┼───────────────┼────────────────┼──────────┤
│Bez desktopového prostředí│256 MB         │512 MB          │2 GB      │
├──────────────────────────┼───────────────┼────────────────┼──────────┤
│Desktopové prostředí      │1 gigabytes    │2 GB            │10 GB     │
└──────────────────────────┴───────────────┴────────────────┴──────────┘


The minimum values assumes that swap will be enabled and a non-liveCD image is
used. The "No desktop" value assumes that the non-graphical (text-based)
installer is used.

The actual minimum memory requirements are a lot less than the numbers listed
in this table. With swap enabled, it is possible to install Debian with as
little as 350MB. The same goes for the disk space requirements, especially if
you pick and choose which applications to install; see D.2 - "Místo potřebné
pro úlohy" for additional information on disk space requirements.

I na starších systémech je možné provozovat grafické desktopové prostředí, ale
v takovém případě je doporučeno nainstalovat méně náročné prostředí než KDE
Plasma nebo GNOME. Mezi populární alternativy patří xfce4, icewm a wmaker, ale
na výběr máte i přehršle dalších.

Pro serverové nasazení je téměř nemožné určit paměťové nebo diskové požadavky,
protože ty se liší podle konkrétního nasazení.

Pamatujte, že všechny uvedené velikosti jsou orientační a že neobsahují další
věci, které obvykle v systému bývají (jako třeba pošta, soubory uživatelů,
data). Při přidělování místa pro své vlastní soubory a data je vždy lepší být
velkorysý.

Dále je potřeba dávat pozor na oblast /var, která obsahuje hodně dat závislých
na konkrétní situaci. Například soubory programu dpkg mohou klidně zabrat 40MB,
ani nevíte jak. Dále sem zapisuje třeba apt, který zde odkládá stažené balíky
před samotnou instalací. Pokud přidáme velikost logovacích souborů (většinou v
řádech MB) a ostatní proměnlivá data, měli byste pro /var uvažovat o alokování
minimálně 200MB. Plánujete-li instalaci grafického desktopového prostředí, tak
i mnohem více. Do /var také implicitně ukládají své databáze databázové
systémy.

3.5. Předrozdělení disku pro více operačních systémů

Rozdělením disku se na disku vytvoří několik vzájemně nezávislých oddílů (angl.
partition). Každý oddíl je nezávislý na ostatních. Dá se to přirovnat k bytu
rozčleněnému zdmi -- přidání nábytku do jedné místnosti nemá na ostatní
místnosti žádný vliv.

Jestliže už na počítači máte nějaký operační systém (Windows 9x, Windows NT/
2000/XP/2003/Vista/7, OS/2, MacOS, Solaris, FreeBSD, ...) a chcete na stejný
disk ještě umístit Debian, patrně se nevyhnete přerozdělení disku. Debian pro
sebe potřebuje vlastní diskové oblasti a nemůže být nainstalován na oblasti
systému Windows nebo třeba MacOS X. Je sice možné sdílet některé oblasti s
jinými systémy, ale popis je mimo rozsah tohoto dokumentu. Minimálně budete
potřebovat jednu oblast pro kořenový souborový systém.

Informace o aktuálním rozdělení disku můžete získat dělicím programem svého
stávajícího operačního systému, jako je Správa disků ve Windows nebo fdisk v
DOSu . Každý dělicí nástroj umožňuje prohlížet oblasti bez jejich modifikace.

Obecně změna oddílu, na kterém je souborový systém, znamená ztrátu dat, takže
si raději disk před změnami do tabulky diskových oddílů zazálohujte. Podle
analogie s bytem a zdmi, z bytu také raději vynesete veškerý nábytek, než
budete přestavovat zdi.

Přestože některé moderní operační systémy zvládají přesun a změnu velikosti
některých oddílů bez zničení obsahu, takže by se dalo vytvořit místo pro Debian
beze ztráty dat, jedná se o inherentně nebezpečnou operaci a proto byste to
měli spáchat až po kompletní záloze všech dat. Oblasti typu FAT/FAT32 a NTFS se
dají bezeztrátově upravovat například ze Správy disků ve Windows 7, nebo během
instalace přímo z debian-installeru (viz 6.3.4 - "Rozdělení disku a výběr
přípojných bodů").

To losslessly resize an existing FAT or NTFS partition from within
debian-installer, go to the partitioning step, select the option for manual
partitioning, select the partition to resize, and simply specify its new size.

Creating and deleting partitions can be done from within debian-installer as
well as from an existing operating system. As a rule of thumb, partitions
should be created by the system for which they are to be used, i.e. partitions
to be used by Debian GNU/Linux should be created from within debian-installer
and partitions to be used from another operating system should be created from
there. debian-installer is capable of creating non-Linux partitions, and
partitions created this way usually work without problems when used in other
operating systems, but there are a few rare corner cases in which this could
cause problems, so if you want to be sure, use the native partitioning tools to
create partitions for use by other operating systems.

Jestliže budete mít na počítači více operačních systémů, měli byste tyto
systémy instalovat před Debianem. Instalační programy Windows a jiných systémů
by mohly zabránit startu Debianu nebo vás navést k přeformátování některých
důležitých oblastí.

Tyto problémy můžete úspěšně vyřešit, případně se jim úplně vyhnout, ale
nejjistější je instalovat Debian jako poslední systém.

3.6. Než začnete s instalací ...

This section will walk you through pre-installation hardware setup, if any,
that you will need to do prior to installing Debian. Generally, this involves
checking and possibly changing BIOS/UEFI/system firmware settings for your
system. The "BIOS/UEFI" or "system firmware" is the core software used by the
hardware; it is most critically invoked during the bootstrap process (after
power-up).

3.6.1. Invoking the BIOS/UEFI Set-Up Menu

The BIOS/UEFI provides the basic functions needed to boot your machine and to
allow your operating system to access your hardware. Your system provides a
BIOS/UEFI setup menu, which is used to configure the BIOS/UEFI. To enter the
BIOS/UEFI setup menu you have to press a key or key combination after turning
on the computer. Often it is the Delete or the F2 key, but some manufacturers
use other keys. Usually upon starting the computer there will be a message
stating which key to press to enter the setup screen.

3.6.2. Výběr zaváděcího zařízení

Within the BIOS/UEFI setup menu, you can select which devices shall be checked
in which sequence for a bootable operating system. Possible choices usually
include the internal harddisks, the CD/DVD-ROM drive and USB mass storage
devices such as USB sticks or external USB harddisks. On modern systems there
is also often a possibility to enable network booting via PXE.

Depending on the installation media (CD/DVD ROM, USB stick, network boot) you
have chosen you should enable the appropriate boot devices if they are not
already enabled.

Most BIOS/UEFI versions allow you to call up a boot menu on system startup in
which you select from which device the computer should start for the current
session. If this option is available, the BIOS/UEFI usually displays a short
message like "press F12 for boot menu" on system startup. The actual key used
to select this menu varies from system to system; commonly used keys are F12, 
F11 and F8. Choosing a device from this menu does not change the default boot
order of the BIOS/UEFI, i.e. you can start once from a USB stick while having
configured the internal harddisk as the normal primary boot device.

If your BIOS/UEFI does not provide you with a boot menu to do ad-hoc choices of
the current boot device, you will have to change your BIOS/UEFI setup to make
the device from which the debian-installer shall be booted the primary boot
device.

Unfortunately some computers may contain buggy BIOS/UEFI versions. Booting
debian-installer from a USB stick might not work even if there is an
appropriate option in the BIOS/UEFI setup menu and the stick is selected as the
primary boot device. On some of these systems using a USB stick as boot medium
is impossible; others can be tricked into booting from the stick by changing
the device type in the BIOS/UEFI setup from the default "USB harddisk" or "USB
stick" to "USB ZIP" or "USB CDROM". In particular if you use an isohybrid
installation image on a USB stick (see 4.3.1 - "Preparing a USB stick using a
hybrid CD/DVD image"), changing the device type to "USB CDROM" helps on some
BIOSes which will not boot from a USB stick in USB harddisk mode. You may need
to configure your BIOS/UEFI to enable "USB legacy support".

If you cannot manipulate the BIOS/UEFI to boot directly from a USB stick you
still have the option of using an ISO copied to the stick. Boot
debian-installer using 4.4 - "Příprava souborů pro zavedení z pevného disku"
and, after scanning the hard drives for an installer ISO image, select the USB
device and choose an installation image.

3.6.3. Systémy s firmwarem UEFI

UEFI ("Unified Extensible Firmware Interface") je nový typ systémového
firmwaru, který se používá na mnoha moderních systémech a, mimo jiné, by měl v
počítačích nahradit klasický BIOS.

Většina počítačů s UEFI zatím ve firmwaru používá CSM ("Compatibility Support
Module"), který operačnímu systému poskytuje stejná rozhraní, jako poskytoval
tradiční BIOS, tudíž je zatím možno používat software napsaný přímo pro BIOS
beze změn. To však jednou skončí, protože UEFI nebude tuto kompatibilní vrstvu
podporovat navždy. Již nyní existuje mnoho systémů s UEFI bez CSM.

On systems with UEFI there are a few things to take into consideration when
installing an operating system. The way the firmware loads an operating system
is fundamentally different between the classic BIOS (or UEFI in CSM mode) and
native UEFI. One major difference is the way the harddisk partitions are
recorded on the harddisk. While the classic BIOS and UEFI in CSM mode use a DOS
partition table, native UEFI uses a different partitioning scheme called "GUID
Partition Table" (GPT). On a single disk, for all practical purposes only one
of the two can be used and in case of a multi-boot setup with different
operating systems on one disk, all of them must therefore use the same type of
partition table. Booting from a disk with GPT is only possible in native UEFI
mode, but using GPT becomes more and more common as hard disk sizes grow,
because the classic DOS partition table cannot address disks larger than about
2 Terabytes while GPT allows for far larger disks. The other major difference
between BIOS (or UEFI in CSM mode) and native UEFI is the location where boot
code is stored and in which format it has to be. This means that different
bootloaders are needed for each system.

The latter becomes important when booting debian-installer on a UEFI system
with CSM because debian-installer checks whether it was started on a BIOS- or
on a native UEFI system and installs the corresponding bootloader. Normally
this simply works but there can be a problem in multi-boot environments. On
some UEFI systems with CSM the default boot mode for removable devices can be
different from what is actually used when booting from hard disk, so when
booting the installer from a USB stick in a different mode from what is used
when booting another already installed operating system from the hard disk, the
wrong bootloader might be installed and the system might be unbootable after
finishing the installation. When choosing the boot device from a firmware boot
menu, some systems offer two separate choices for each device, so that the user
can select whether booting shall happen in CSM or in native UEFI mode.

3.6.4. Secure boot

Another UEFI-related topic is the so-called "secure boot" mechanism. Secure
boot means a function of UEFI implementations that allows the firmware to only
load and execute code that is cryptographically signed with certain keys and
thereby blocking any (potentially malicious) boot code that is unsigned or
signed with unknown keys. In practice the only key accepted by default on most
UEFI systems with secure boot is a key from Microsoft used for signing the
Windows bootloader. Debian includes a "shim" bootloader signed by Microsoft, so
should work correctly on systems with secure boot enabled.

3.6.5. Disabling the Windows "fast boot"/"fast startup" feature

Windows offers a feature (called "fast boot" in Windows 8, "fast startup" in
Windows 10) to cut down system startup time. Technically, when this feature is
enabled, Windows does not do a real shutdown and a real cold boot afterwards
when ordered to shut down, but instead does something resembling a partial
suspend to disk to reduce the "boot" time. As long as Windows is the only
operating system on the machine, this is unproblematic, but it can result in
problems and data loss, when you have a dual boot setup, in which another
operating system accesses the same filesystems as Windows does. In that case
the real state of the filesystem can be different from what Windows believes it
to be after the "boot" and this could cause filesystem corruption upon further
write accesses to the filesystem. Therefore in a dual boot setup, to avoid
filesystem corruption the "fast boot"/"fast startup" feature has to be disabled
within Windows.

Furthermore, the Windows Update mechanism has (sometimes) been known to
automatically re-enable this feature, after it has been previously disabled by
the user. It is suggested to re-check this setting periodically.

"Rychlé spuštění" je někdy potřeba vypnout už jen proto, abyste se dostali do
nastavení UEFI, kde si můžete zvolit, že chcete zavést jiný operační systém,
nebo debian-installer. Některé UEFI systémy totiž zkracují čas zavedení tím, že
neinicializují řadič klávesnice nebo USB zařízení a klávesnice pak při zavádění
nereaguje. V takovém případě je nezbytné nastartovat Windows a "rychlé spuštění
" vypnout.

3.6.6. Různé hardwarové problémy

BIOS a USB klávesnice. Pokud nemáte k dispozici standardní PS/2 klávesnici, ale
pouze USB model, je možné, že budete muset v BIOSu nastavit emulaci klasické
klávesnice. Hledejte položky jako "Legacy keyboard emulation" nebo "USB
keyboard support". Toto nastavení změňte pouze v případě, že instalační program
klávesnici nerozpozná.

Kapitola 4. Získání instalačních médií

Obsah

4.1. Official Debian GNU/Linux installation images
4.2. Stažení souborů ze zrcadel Debianu

    4.2.1. Where to Find Installation Files

4.3. Příprava souborů pro zavedení z USB zařízení

    4.3.1. Preparing a USB stick using a hybrid CD/DVD image
    4.3.2. Ruční kopírování souborů
    4.3.3. Ruční kopírování souborů -- pružná cesta

4.4. Příprava souborů pro zavedení z pevného disku

    4.4.1. Hard disk installer booting from Linux using GRUB
    4.4.2. Zavedení instalačního systému programem loadlin

4.5. Příprava souborů pro zavedení ze sítě pomocí TFTP

    4.5.1. Nastavení DHCP serveru
    4.5.2. Nastavení BOOTP serveru
    4.5.3. Povolení TFTP serveru
    4.5.4. Přesun TFTP obrazů na místo

4.6. Automatická Instalace

    4.6.1. Automatic Installation Using the Debian Installer

4.7. Verifying the integrity of installation files

4.1. Official Debian GNU/Linux installation images

By far the easiest way to install Debian GNU/Linux is from a set of official
Debian installation images. You can buy a set of CDs/DVDs from a vendor (see
the CD vendors page). You may also download the installation images from a
Debian mirror and make your own set, if you have a fast network connection and
a CD/DVD burner (see the Debian CD/DVD page and Debian CD FAQ for detailed
instructions). If you have such optical installation media, and they are
bootable on your machine, which is the case on all modern PCs, you can skip
right to 5 - "Zavedení instalačního systému". Much effort has been expended to
ensure the most-used files are on the first CD and DVD image, so that a basic
desktop installation can be done with only the first DVD or - to a limited
extent - even with only the first CD image.

Poznamenejme, že obě hlavní desktopová prostředí GNOME a KDE jsou tak rozsáhlá,
že se nevejdou na jediné CD a proto při instalaci počítejte s tím, že budete
muset použít více CD, nebo nechat stáhnout zbývající balíky ze sítě.

Also, keep in mind: if the installation media you are using don't contain some
packages you need, you can always install those packages afterwards from your
running new Debian system (after the installation has finished). If you need to
know on which installation image to find a specific package, visit https://
cdimage-search.debian.org/.

If your machine doesn't support booting from optical media (only relevant on
very old PC systems), but you do have a set of CD/DVD, you can use an
alternative strategy such as hard disk, usb stick, net boot, or manually
loading the kernel from the disc to initially boot the system installer. The
files you need for booting by another means are also on the disc; the Debian
network archive and folder organization on the disc are identical. So when
archive file paths are given below for particular files you need for booting,
look for those files in the same directories and subdirectories on your
installation media.

Once the installer is booted, it will be able to obtain all the other files it
needs from the disc.

If you don't have an installation media set, then you will need to download the
installer system files and place them on the hard disk or usb stick or a
connected computer so they can be used to boot the installer.

4.2. Stažení souborů ze zrcadel Debianu

Nejbližší (a tedy pravděpodobně nejrychlejší) zrcadlo naleznete v seznamu
zrcadel Debianu.

4.2.1. Where to Find Installation Files

Various installation files can be found on each Debian mirror in the directory
debian/dists/bullseye/main/installer-amd64/current/images/ -- the MANIFEST
lists each image and its purpose.

4.3. Příprava souborů pro zavedení z USB zařízení

To prepare the USB stick, we recommend to use a system where GNU/Linux is
already running and where USB is supported. With current GNU/Linux systems the
USB stick should be automatically recognized when you insert it. If it is not
you should check that the usb-storage kernel module is loaded. When the USB
stick is inserted, it will be mapped to a device named /dev/sdX, where the "X"
is a letter in the range a-z. You should be able to see to which device the USB
stick was mapped by running the command lsblk before and after inserting it.
(The output of dmesg (as root) is another possible method for that.) To write
to your stick, you may have to turn off its write protection switch.

Varování

The procedures described in this section will destroy anything already on the
device! Make very sure that you use the correct device name for your USB stick.
If you use the wrong device the result could be that all information on, for
example, a hard disk is lost.

4.3.1. Preparing a USB stick using a hybrid CD/DVD image

Debian installation images for this architecture are created using the 
isohybrid technology; that means they can be written directly to a USB stick,
which is a very easy way to make an installation media. Simply choose an image
(such as the netinst, CD or DVD-1) that will fit on your USB stick. See 4.1 -
"Official Debian GNU/Linux installation images" to get an installation image.

Jestliže máte opravdu malou klíčenku v řádu megabajtů, můžete z adresáře
netboot stáhnout obraz mini.iso (viz kapitola 4.2.1 - "Where to Find
Installation Files"), nicméně tato varianta zavede pouze minimální instalační
systém a zbytek stahuje ze sítě.

The installation image you choose should be written directly to the USB stick,
overwriting its current contents. For example, when using an existing GNU/Linux
system, the image file can be written to a USB stick as follows, after having
made sure that the stick is unmounted:

# cp debian.iso /dev/sdX
# sync

Information about how to do this on other operating systems can be found in the
Debian CD FAQ.

Důležité

Obraz je nutno zapsat na celé zařízení, ne jen do případné oblasti, tj.
například do /dev/sdb a ne /dev/sdb1. Také nepoužívejte nástroje jako 
unetbootin, které zapisovaný obraz mění.

Důležité

Simply writing the installation image to USB like this should work fine for
most users. The other options below are more complex, mainly for people with
specialised needs.

Hybridní obraz na USB klíčence obvykle nezabírá veškerý prostor, což přímo
vybízí použití volného místa pro uložení potřebných souborů s firmwarem,
speciálních balíků, nebo jiných souborů. Veškeré soubory jsou pak pěkně
pohromadě na jednom médiu.

To do so, use cfdisk or any other partitioning tool to create an additional
partition on the stick. Then create a (FAT) filesystem on the partition, mount
it and copy or unpack the firmware onto it, for example with:

# mkdosfs -n FIRMWARE /dev/sdX3
# mount /dev/sdX3 /mnt
# cd /mnt
# tar zxvf /path/to/firmware.tar.gz
# cd /
# umount /mnt

Take care that you use the correct device name for your USB stick. The mkdosfs
command is contained in the dosfstools Debian package.

Poznámka

If you have chosen the mini.iso to be written to the USB stick, the second
partition doesn't have to be created, as - very nicely - it will already be
present. Unplugging and replugging the USB stick should make the two partitions
visible.

4.3.2. Ruční kopírování souborů

Prior to isohybrid technology being used for Debian installation images, the
methods documented in the chapters below were used to prepare media for booting
from USB devices. These have been superseded by the technique in 4.3.1 -
"Preparing a USB stick using a hybrid CD/DVD image", but have been left here
for educational and historical purposes and in case they are useful to some
user.

An alternative to the method described in 4.3.1 - "Preparing a USB stick using
a hybrid CD/DVD image" is to manually copy the installer files, and also an
installation image to the stick. Note that the USB stick should be at least 1
GB in size (smaller setups are possible using the files from netboot, following
4.3.3 - "Ruční kopírování souborů -- pružná cesta").

There is an all-in-one file hd-media/boot.img.gz which contains all the
installer files (including the kernel) as well as syslinux and its
configuration file.

Poznámka

I když je tento způsob vytvoření zaváděcího USB média pohodlný, má jednu
zásadní nevýhodu: logická velikost zařízení bude vždy omezena na 1 GB, i když
je skutečná kapacita USB klíčenky mnohonásobně větší. Budete-li ji chtít někdy
v budoucnu použít k jinému účelu a budete-li vyžadovat její celou kapacitu,
budete ji muset přerozdělit a znovu vytvořit souborový systém.

Simply extract this image directly to your USB stick:

# zcat boot.img.gz > /dev/sdX

After that, mount the USB memory stick (mount /dev/sdX /mnt), which will now
have a FAT filesystem on it, and copy a Debian ISO image (netinst or full CD;
see 4.1 - "Official Debian GNU/Linux installation images") to it. Unmount the
stick (umount /mnt) and you are done.

4.3.3. Ruční kopírování souborů -- pružná cesta

Pokud máte rádi více pružnosti, nebo jen chcete zjistit "co se děje za oponou",
můžete použít následující metodu, ve které mj. ukážeme, jak místo celého USB
zařízení použít pouze první oblast.

4.3.3.1. Partitioning and adding a boot loader

We will show how to set up the memory stick to use the first partition, instead
of the entire device.

In order to start the kernel after booting from the USB stick, we will put a
boot loader on the stick. Although any boot loader should work, it's convenient
to use syslinux, since it uses a FAT16 partition and can be reconfigured by
just editing a text file. Any operating system which supports the FAT file
system can be used to make changes to the configuration of the boot loader.

First, you need to install the syslinux and mtools packages on your system.

Poznámka

Since most USB sticks come pre-configured with a single FAT16 partition, you
probably won't have to repartition or reformat the stick. If you have to do
that anyway, use cfdisk or any other partitioning tool to create a FAT16
partition now^[3], and then install an MBR using:

# cat /usr/lib/syslinux/mbr/mbr.bin
>/dev/sdX

Now create the filesystem using:

# mkdosfs /dev/sdX1

Take care that you use the correct device name for your USB stick. The mkdosfs
command is contained in the dosfstools Debian package.

Having a correctly partitioned USB stick (now), you need to put syslinux on the
FAT16 partition with:

# syslinux /dev/sdX1

Again, take care that you use the correct device name. The partition must not
be mounted when starting syslinux. This procedure writes a boot sector to the
partition and creates the file ldlinux.sys which contains the boot loader code.

4.3.3.2. Adding the installer files

There are two different installation variants to choose here: The hd-media
variant needs an installation ISO file on the stick, to load installer modules
and the base system from. The netboot installer however will load all that from
a Debian mirror.

According to your choice, you have to download some installer files from the
hd-media or netboot subdirectory of debian/dists/bullseye/main/installer-amd64/
current/images/ on any Debian mirror:

  • vmlinuz or linux (kernel binary)

  • initrd.gz (initial ramdisk image)

You can choose between either the text-based version of the installer (the
files can be found directly in hd-media or netboot) or the graphical version
(look in the respective gtk subdirectories).

Then mount the partition (mount /dev/sdX1 /mnt) and copy the downloaded files
to the root directory of the stick.

Next you should create a text file named syslinux.cfg in the root directory of
the stick as configuration file for syslinux, which at a bare minimum should
contain the following line:

default vmlinuz initrd=initrd.gz

Change the name of the kernel binary to "linux" if you used files from netboot.

For the graphical installer (from gtk) you should add vga=788 at the end of the
line. Other parameters can be appended as desired.

Chcete-li povolit interaktivní přidávání parametrů při zavádění instalačního
systému, přidejte ještě řádek: prompt 1

If you used files from hd-media, you should now copy the ISO file of a Debian
installation image onto the stick. (For the netboot variant this is not
needed.)

You can use either a netinst or a full CD/DVD image (see 4.1 - "Official Debian
GNU/Linux installation images"). Be sure to select one that fits on your stick.
Note that the "netboot mini.iso" image is not usable for this purpose.

When you are done, unmount the USB memory stick (umount /mnt).

4.4. Příprava souborů pro zavedení z pevného disku

The installer may be booted using boot files placed on an existing hard drive
partition, either launched from another operating system or by invoking a boot
loader directly from the BIOS. On modern UEFI systems, the kernel may be booted
directly from the UEFI partition without the need of a boot loader.

A full, "pure network" installation can be achieved using this technique. This
avoids all hassles of removable media, like finding and burning CD/DVD images.

4.4.1. Hard disk installer booting from Linux using GRUB

This section explains how to add to or even replace an existing linux
installation using GRUB.

At boot time, GRUB supports loading in memory not only the kernel, but also a
disk image. This RAM disk can be used as the root file-system by the kernel.

Copy the following files from the Debian archives to a convenient location on
your hard drive, for instance to /boot/newinstall/.

  • vmlinuz (vhodné jádro)

  • initrd.gz (obraz ramdisku)

Plánujete-li z disku jenom nastartovat a poté již všechno stáhnout ze sítě,
měli byste použít soubor netboot/debian-installer/amd64/initrd.gz a
odpovídající jádro netboot/debian-installer/amd64/linux. To vám umožní
přerozdělit disk, ze kterého jste instalaci spustili.

Alternatively, if you intend to keep an existing partition on the hard drive
unchanged during the install, you can download the hd-media/initrd.gz file and
its kernel hd-media/vmlinuz, as well as copy an installation image to the hard
drive (make sure the file is named ending in .iso). The installer can then boot
from the hard drive and install from the installation image, without needing
the network.

Nastavení zavaděče popisuje 5.1.5 - "Booting from Linux using GRUB".

4.4.2. Zavedení instalačního systému programem loadlin

Tato část vysvětluje, jak zavést instalaci z DOSu za pomoci programu loadlin.

Copy the following directories from a Debian installation image to c:\.

  • /install.amd (jádro a obraz ramdisku)

  • /tools (nástroj loadlin)

4.5. Příprava souborů pro zavedení ze sítě pomocí TFTP

Pokud je váš počítač připojen do lokální sítě, můžete jej zavést ze sítě pomocí
TFTP. Jestliže chcete pomocí TFTP zavést instalační systém, musíte na vzdáleném
počítači nakopírovat zaváděcí soubory do specifických adresářů a povolit
zavádění vaší stanice.

Musíte nastavit TFTP server a často i DHCP server nebo BOOTP server.

BOOTP je IP protokol, který informuje počítač o jeho IP adrese a prozradí mu,
odkud si má stáhnout zaváděcí obraz. DHCP (Dynamic Host Configuration Protocol)
je flexibilnější, zpětně kompatibilní rozšíření protokolu BOOTP. Některé
systémy mohou být nastaveny pouze pomocí DHCP.

Pro přenos zaváděcího obrazu ke klientovi se používá protokol TFTP (Trivial
File Transfer Protocol). Teoreticky můžete použít server na libovolné
platformě, která jej implementuje. Ukázky v této kapitole se vztahují k
operačním systémům SunOS 4.x, SunOS 5.x (neboli Solaris) a GNU/Linux.

Poznámka

Pokud na serveru běží Debian, doporučujeme použít TFTP server tftp-hpa od
stejného autora jako zavaděč syslinux, protože by mezi nimi mělo nastat nejméně
problémů. Vhodnou alternativou je i atftpd.

4.5.1. Nastavení DHCP serveru

Jedním ze svobodných DHCP serverů je ISC dhcpd. Debian GNU/Linux jej obsahuje
jako balík isc-dhcp-server. Následuje ukázka jednoduchého konfiguračního
souboru (obvykle /etc/dhcp/dhcpd.conf):

option domain-name "priklad.cz";
option domain-name-servers ns1.priklad.cz;
option subnet-mask 255.255.255.0;
default-lease-time 600;
max-lease-time 7200;
server-name "karel";

subnet 192.168.1.0 netmask 255.255.255.0 {
  range 192.168.1.200 192.168.1.253;
  option routers 192.168.1.1;
}

host clientname {
  filename "/tftpboot.img";
  server-name "karel";
  next-server dalsiserver.priklad.cz;
  hardware ethernet 01:23:45:67:89:AB;
  fixed-address 192.168.1.90;
}

V tomto příkladu máme jeden server jménem karel, který obstarává práci DHCP a
TFTP serveru a také slouží jako brána do sítě. Ve svém nastavení si musíte
změnit alespoň doménové jméno, jméno serveru a hardwarovou adresu klienta.
Položka filename by měla obsahovat název souboru, který si klient stáhne přes
TFTP.

Po úpravách konfiguračního souboru musíte restartovat dhcpd příkazem /etc/
init.d/isc-dhcp-server restart.

4.5.1.1. Povolení PXE zavádění

Další příklad souboru dhcp.conf tentokrát využívá metodu PXE (Pre-boot
Execution Environment) protokolu TFTP.

option domain-name "priklad.cz";

default-lease-time 600;
max-lease-time 7200;

allow booting;
allow bootp;

# Následující odstavec si musíte upravit dle skutečnosti
subnet 192.168.1.0 netmask 255.255.255.0 {
  range 192.168.1.200 192.168.1.253;
  option broadcast-address 192.168.1.255;
# adresa brány
# (například pro přístup k internetu)
  option routers 192.168.1.1;
# dns server, který chcete použít
  option domain-name-servers 192.168.1.3;
}

group {
  next-server 192.168.1.3;
  host tftpclient {
    # hardwarová adresa tftp klienta
    hardware ethernet  00:10:DC:27:6C:15;
    filename "pxelinux.0";
  }
}

Při PXE zavádění není soubor pxelinux.0 obraz jádra, ale zavaděč (viz 4.5.4 -
"Přesun TFTP obrazů na místo" dále v textu).

If your machine uses UEFI to boot, you will have to specify a boot loader
appropriate for UEFI machines, for example

group {
  next-server 192.168.1.3;
  host tftpclient {
# tftp client hardware address
  hardware ethernet  00:10:DC:27:6C:15;
  filename "debian-installer/amd64/bootnetx64.efi";
 }
}

4.5.2. Nastavení BOOTP serveru

V GNU/Linuxu můžete použít v zásadě dva BOOTP servery. Jednak je to CMU bootpd
a druhý je vlastně DHCP server -- ISC dhcpd. V distribuci Debian GNU/Linux jsou
k dispozici v balících bootp a isc-dhcp-server.

Pokud chcete použít CMU bootpd, musíte nejprve odkomentovat (nebo přidat) jeden
důležitý řádek v souboru /etc/inetd.conf. V systému Debian GNU/Linux můžete
spustit update-inetd --enable bootps a následně restartovat inetd pomocí /etc/
init.d/inetd reload. V jiných systémech přidejte řádku, která bude vypadat
zhruba takto:

bootps  dgram  udp  wait  root  /usr/sbin/bootpd  bootpd -i -t 120

Nyní musíte vytvořit soubor /etc/bootptab. Jeho struktura je velmi podobná té,
co používají staré dobré soubory printcap, termcap a disktab ze systému BSD.
Bližší informace jsou v manuálové stránce bootptab. Pokud používáte CMU bootpd,
musíte rovněž znát hardwarovou (MAC) adresu klienta. Následuje příklad souboru
/etc/bootptab:

client:\
  hd=/tftpboot:\
  bf=tftpboot.img:\
  ip=192.168.1.90:\
  sm=255.255.255.0:\
  sa=192.168.1.1:\
  ha=0123456789AB:

Z příkladu budete muset změnit minimálně volbu "ha", která značí hardwarovou
adresu klienta. Volba "bf" specifikuje soubor, který si klient stáhne
protokolem TFTP, viz 4.5.4 - "Přesun TFTP obrazů na místo".

V kontrastu s předchozím je nastaveni BOOTP pomocí ISC dhcpd velmi jednoduché,
protože dhcpd považuje BOOTP klienty za speciální případ DHCP klientů. Některé
architektury však vyžadují pro zavádění klientů pomocí BOOTP komplikované
nastavení. Je-li to váš případ, přečtěte si 4.5.1 - "Nastavení DHCP serveru". V
opačném případě stačí v konfiguračním souboru /etc/dhcp/dhcpd.conf vložit do
bloku podsítě, ve které se nachází klient, direktivu allow bootp. Potom
restartujte dhcpd server příkazem /etc/init.d/isc-dhcp-server restart.

4.5.3. Povolení TFTP serveru

Aby vám TFTP server fungoval, měli byste nejprve zkontrolovat, zda je tftpd
povolen.

V případě balíku tftpd-hpa existují dva způsoby, jak službu provozovat. Jednak
se může tftpd-hpa spouštět jako samostatný daemon při startu systému, nebo může
jeho spuštění zajišťovat systémový daemon inetd v okamžik, kdy je ho potřeba.
Způsob, který zrovna používáte, můžete zvolit při instalaci balíku, respektive
ho můžete kdykoliv změnit rekonfigurací balíku.

Poznámka

TFTP servery historicky používaly pro uložení nabízených obrazů adresář /
tftpboot. Aby byl Debian v souladu se standardem FHS, mohou debianí balíky
používat jiná umístění. Například tftpd-hpa implicitně používá adresář /srv/
tftp. Je proto možné, že budete muset cesty uváděné v této kapitole upravit pro
konkrétní situaci.

Všechny alternativní in.tftpd v Debianu by měly automaticky zaznamenávat
všechny požadavky, které jim byly zaslány, do systémových logů. To se hodí
zejména v situaci, kdy zavádění neprobíhá tak, jak má. Některé TFTP servery umí
zvýšit svou upovídanost parametrem -v.

4.5.4. Přesun TFTP obrazů na místo

Dále je potřeba umístit příslušný TFTP obraz (viz 4.2.1 - "Where to Find
Installation Files") do adresáře, kde má tftpd uloženy obrazy. Bohužel TFTP
klient očekává jméno souboru v určitém tvaru, pro který neexistují žádné
závazné standardy. Proto ještě musíte na příslušný obraz vytvořit odkaz, který 
tftpd použije pro zavedení konkrétního klienta.

For PXE booting, everything you should need is set up in the netboot/
netboot.tar.gz tarball. Simply extract this tarball into the tftpd boot image
directory. Make sure your dhcp server is configured to pass pxelinux.0 to tftpd
as the filename to boot. For UEFI machines, you will need to pass an
appropriate EFI boot image name (such as /debian-installer/amd64/
bootnetx64.efi).

4.6. Automatická Instalace

Pokud spravujete více obdobných počítačů, můžete využít plně automatickou
instalaci. Příslušné balíky se jmenují fai-quickstart a samozřejmě
debian-installer Více informací o FAI naleznete na domovské stránce FAI.

4.6.1. Automatic Installation Using the Debian Installer

Instalační program Debianu podporuje automatické instalace pomocí
předkonfiguračních souborů. Předkonfigurační soubor obsahuje odpovědi na
otázky, které se debian-installer ptá během instalace. Tento soubor můžete
nahrát ze sítě nebo z vyměnitelného média.

Kompletní dokumentaci o přednastavení včetně funkčního příkladu naleznete v B -
"Automatizování instalací pomocí přednastavení".

4.7. Verifying the integrity of installation files

You can verify the integrity of downloaded files against checksums provided in
SHA256SUMS or SHA512SUMS files on Debian mirrors. You can find them in the same
places as the installation images itself. Visit the following locations:

  • checksum files for CD images,

  • checksum files for DVD images,

  • checksum files for BD images,

  • checksum files for other installation files.

To compute the checksum of a downloaded installation file, use

sha256sum filename.iso

respective

sha512sum filename.iso

and then compare the shown checksum against the corresponding one in the
SHA256SUMS respective SHA512SUMS file.

The Debian CD FAQ has more useful information on this topic (such as the script
check_debian_iso, to semi-automate above procedure), as well as instructions,
how to verify the integrity of the above checksum files themselves.


━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

^[3] Don't forget to activate the "bootable" flag.

Kapitola 5. Zavedení instalačního systému

Obsah

5.1. Zavedení instalátoru na 64-bit PC

    5.1.1. Zavedení z USB "klíčenky"
    5.1.2. Booting from optical disc (CD/DVD)
    5.1.3. Zavedení z Windows
    5.1.4. Zavedení z DOSu pomocí loadlin
    5.1.5. Booting from Linux using GRUB
    5.1.6. Zavedení z TFTP
    5.1.7. Zaváděcí obrazovka
    5.1.8. Grafický instalátor

5.2. Zpřístupnění

    5.2.1. Uživatelské rozhraní instalačního systému
    5.2.2. Braillův řádek připojený na USB
    5.2.3. Braillův řádek připojený na sériový port
    5.2.4. Softwarová syntéza hlasu
    5.2.5. Hardwarová syntéza hlasu
    5.2.6. Zařízení připojená rovnou na sběrnici
    5.2.7. Kontrastní téma
    5.2.8. Změna velikosti písma
    5.2.9. Záchranný režim, expertní a automatizované instalace
    5.2.10. Zpřístupnění v nainstalovaném systému

5.3. Zaváděcí parametry

    5.3.1. Zavěděcí konzole
    5.3.2. Parametry instalačního programu
    5.3.3. Použití zaváděcích parametrů pro zodpovězení otázek
    5.3.4. Předávání parametrů jaderným modulům
    5.3.5. Zapsání jaderných modulů na černou listinu

5.4. Problémy s instalačním systémem

    5.4.1. Reliability of optical media
    5.4.2. Zaváděcí konfigurace
    5.4.3. Softwarová syntéza hlasu
    5.4.4. Běžné instalační problémy na 64-bit PC
    5.4.5. Význam hlášek při zavádění jádra
    5.4.6. Hlášení problémů s instalací
    5.4.7. Pošlete nám zprávu o instalaci

5.1. Zavedení instalátoru na 64-bit PC

Varování

Máte-li na svém počítači jiné operační systémy, které chcete zachovat (tzv.
duální zavádění), měli byste se před zavedením instalačního systému ujistit, že
jsou tyto operační systémy skutečně vypnuté a ne jen uspané. Instalace nového
operačního systému může narušit stav uspaného operačního systému (což může po
jeho probuzení vést k nestabilitě systému nebo i ztrátě dat).

Poznámka

Informace o zavedení grafického instalátoru naleznete v kapitole 5.1.8 -
"Grafický instalátor".

5.1.1. Zavedení z USB "klíčenky"

If your computer will boot from USB, this will probably be the easiest route
for installation. Assuming you have prepared everything from 3.6.2 - "Výběr
zaváděcího zařízení" and 4.3 - "Příprava souborů pro zavedení z USB zařízení",
just plug your USB stick into some free USB connector and reboot the computer.
The system should boot up, and unless you have used the flexible way to build
the stick and not enabled it, you should be presented with a graphical boot
menu (on hardware that supports it). Here you can select various installer
options, or just hit Enter.

5.1.2. Booting from optical disc (CD/DVD)

If you have a set of optical discs, and your machine supports booting directly
off those, great! Simply configure your system for booting off an optical disc
as described in 3.6.2 - "Výběr zaváděcího zařízení", insert the disc, reboot,
and proceed to the next chapter.

Note that certain optical drives may require special drivers, and thus be
inaccessible in the early installation stages. If it turns out the standard way
of booting off an optical disc doesn't work for your hardware, revisit this
chapter and read about alternate kernels and installation methods which may
work for you.

Even if you cannot boot from optical disc, you can probably install the Debian
system components and any packages you want from such disc. Simply boot using a
different medium and when it's time to install the operating system, base
system, and any additional packages, point the installation system at the
optical drive.

Pokud máte problémy se zaváděním, prostudujte si 5.4 - "Problémy s instalačním
systémem".

5.1.3. Zavedení z Windows

Pro zavedení instalátoru z Windows můžete buď

  • obtain installation media as described in 4.1 - "Official Debian GNU/Linux
    installation images" or 4.3 - "Příprava souborů pro zavedení z USB
    zařízení" or

  • stáhnout samostatnou Windows aplikaci dostupnou na zrcadlech Debianu jako
    tools/win32-loader/stable/win32-loader.exe.

If you use optical installation media, a pre-installation program should be
launched automatically when you insert the disc. In case Windows does not start
it automatically, or if you are using a USB memory stick, you can run it
manually by accessing the device and executing setup.exe.

Po spuštění programu budete dotázáni na několik předběžných otázek a následně
bude váš systém upraven pro zavedení instalačního systému Debianu.

5.1.4. Zavedení z DOSu pomocí loadlin

Zaveďte operační systém DOS (ne Windows) například ze záchranného nebo
diagnostického média.

Pokud z DOSu můžete přistupovat na CD mechaniku, vložte do ní instalační CD a
přepněte se na ni příkazem

d:

kde d je označení vaší CD mechaniky. Pokud CD mechaniku nemáte, nebo není z
DOSu dostupná, nachystejte si předem příslušné soubory podle 4.4.2 - "Zavedení
instalačního systému programem loadlin" a přepněte se na disk, kam jste soubory
umístili.

Přesuňte se do podadresáře s preferovanou variantou jádra, např.

cd \install.amd

. Preferujete-li grafickou instalaci, přejděte ještě do podadresáře gtk

cd gtk

. Nyní spusťte dávku install.bat. Zavede se jádro, které automaticky spustí
instalační systém.

5.1.5. Booting from Linux using GRUB

Pro zavedení instalátoru z pevného disku musíte nejprve stáhnout potřebné
soubory a umístit je podle kapitoly 4.4 - "Příprava souborů pro zavedení z
pevného disku".

For GRUB2, you will need to configure two essential things in /boot/grub/
grub.cfg:

  • to load the initrd.gz installer at boot time;

  • have the vmlinuz kernel use a RAM disk as its root partition.

An entry for the installer would be for example:

menuentry 'Instalace Debianu' {
insmod part_msdos
insmod ext2
set root='(hd0,msdos1)'
linux /boot/newinstall/vmlinuz
initrd /boot/newinstall/initrd.gz
}

5.1.6. Zavedení z TFTP

Zavedení se sítě vyžaduje síťové připojení, funkční TFTP server a nejspíš i
DHCP, RARP nebo BOOTP server pro automatické nastavení sítě.

Nastavení zavádění ze sítě je popsáno v 4.5 - "Příprava souborů pro zavedení ze
sítě pomocí TFTP".

Na architektuře amd64 existuje několik možností zavedení z TFTP.

5.1.6.1. Síťová karta s podporou PXE

It could be that your Network Interface Card or Motherboard provides PXE boot
functionality. This is a Intel (tm) re-implementation of TFTP boot. If so, you
may be able to configure your BIOS/UEFI to boot from the network.

5.1.6.2. Síťová karta s bootROM

Je možné, že vaše síťová karta nabízí možnost zavedení z TFTP.

5.1.6.3. Etherboot

Projekt Etherboot nabízí kromě zaváděcích disket také paměti do síťových karet,
které umí zavádět z TFTP.

5.1.7. Zaváděcí obrazovka

Při zavádění instalačního programu se objeví grafická obrazovka s logem Debianu
a nabídkou:

Debian GNU/Linux installer boot menu

Graphical install
Install
Advanced options                            >
Accessible dark contrast installer menu     >
Help
Install with speech synthesis

Poznámka

Tato obrazovka může vypadat trošku jinak podle toho, zda se systém zavede v
režimu BIOS nebo v režimu UEFI, ale nabídka možností zůstává stejná.

V závislosti na zvoleném způsobu instalace nemusí být dostupná možnost grafické
instalace ("Graphical install"). Obrazy pro duální architektury navíc obsahují
položky pro 64 bitové varianty, což téměř zdvojnásobuje počet položek v
nabídce.

Pro běžnou instalaci vyberte šipkami buď položku "Install" (instalace v
textovém režimu), nebo "Graphical install" (instalace v grafickém režimu) a
potvrďte klávesou Enter. Na položku se také můžete dostat stiskem prvního
zvýrazněného písmena.

Položka "Advanced options" otevře další nabídku, kde si můžete zvolit pokročilé
způsoby instalace, jako je expertní režim, záchranný režim a automatizovaná
instalace.

If you wish or need to add any boot parameters for either the installer or the
kernel, press Tab (BIOS boot), or e then down arrow three times then end (UEFI
boot). This will bring the boot command for the selected menu entry and allow
you to edit it to suit your needs. Note that the keyboard layout at this point
is still QWERTY. The help screens (see below) list some common possible
options. Press Enter (BIOS boot) or F10 (UEFI boot) to boot the installer with
your options; pressing Esc will return you to the boot menu and undo any
changes you made.

Položka "Help" zobrazí první obrazovku nápovědy se stručným přehledem
nápovědných obrazovek. Zde se můžete porozhlédnout po nápovědě, která se skrývá
pod klávesami F1 až F10, nebo můžete stisknout Enter a zavést systém s
výchozími hodnotami. Ze stránek nápovědy se můžete vrátit zpět do hlavní
nabídky příkazem "menu". Příkazy můžete zadat do příkazového řádku, který se
nachází na každé nápovědné obrazovce:

Press F1 for the help index, or ENTER to boot:

Za příkazem pro zavedení instalace (výchozí je install) můžete zadat volitelné
parametry, které jsou popsány v nápovědě. Celý řádek by tedy vypadal třeba
takto: install fb=false. Jestliže stisknete pouze Enter, je to stejné, jako
kdyby jste zadali install bez dalších parametrů.

Poznámka

Klávesnice se nyní chová podle standardního rozložení americké angličtiny, což
by v našich krajích neměl být problém, protože základní rozložení je až na
prohozené Y/Z stejné, liší se pouze horní řada a pomocné znaky, které bývají na
klávesnicích předtištěny v obou variantách. Horší to mají třeba Francouzi s
jejich rozložením AZERTY -- v takovém případě snad pomůže článek z Wikipedie
zabývající se US rozložením.

Poznámka

Instalujete-li na systému, který má v BIOSu nastaveno použití sériové konzole,
je možné že neuvidíte grafickou část obrazovky a někdy dokonce ani zaváděcí
nabídku. To stejné vás může potkat v případech, kdy instalujete přes zařízení
pro vzdálenou správu, jež nabízí textové rozhraní k VGA konzoli (např. Compaq "
integrated Lights Out" (iLO), nebo HP "Integrated Remote Assistant" (IRA)).

Můžete se pokusit naslepo stisknout klávesu Esc, a přepnout se na textovou
zaváděcí výzvu, případně stisknout "H" a následně Enter, což by vás mělo
přepnout na (textovou) obrazovku s nápovědou popsanou výše. Zde by už mělo
fungovat echo, tj. znaky, které na klávesnici napíšete, by měly být normálně
vidět na řádku se zaváděcí výzvou. Chcete-li instalačnímu systému zakázat
použití grafického framebufferu ve zbytku instalace, přidejte na řádek parametr
vga=normal fb=false.

5.1.8. Grafický instalátor

Grafická verze instalačního systému je dostupná pouze na několika
architekturách, kam patří i 64-bit PC. Funkcionalita grafického instalátoru je
shodná s textovou verzí, protože se jedná o stejné programy, liší se pouze
vzhled.

I když je funkcionalita stejná, přesto přináší grafická verze několik výhod.
Tou hlavní je, že podporuje více jazyků, konkrétně ty, jejichž znaková sada se
nedá zobrazit v textovém rozhraní "newt". Grafické rozhraní také zlepšuje
použitelnost tím, že můžete volitelně používat myš a že je v některých
případech zobrazeno více otázek na jediné obrazovce (typicky zadání hesla a
jeho ověření).

The graphical installer is available with all CD/DVD images and with the
hd-media installation method. To boot the graphical installer simply select the
relevant option from the boot menu. Expert and rescue mode for the graphical
installer can be selected from the "Advanced options" menu. The previously used
boot methods installgui, expertgui and rescuegui can still be used from the
boot prompt which is shown after selecting the "Help" option in the boot menu.

Existuje i obraz grafického instalátoru, který je možno zavést ze sítě, a
speciální "mini" ISO obraz^[4], ktery se používá hlavně pro testování.

Při startu grafického instalátoru můžete používat zaváděcí parametry stejně,
jako u textové verze.

Poznámka

Grafický instalátor vyžaduje pro běh mnohem více paměti než textová verze:
810MB. Pokud instalace zjistí nedostatek paměti, automaticky se přepne do
textového rozhraní "newt".

Máte-li však méně paměti než 780MB, je možné, že se grafická instalace vůbec
nezavede, zatímco textová verze může stále fungovat. Pro počítače s minimem
dostupné paměti je doporučeno použít rovnou textovou verzi.

5.2. Zpřístupnění

Někteří uživatelé mohou vyžadovat speciální podporu, například z důvodu
zrakového postižení. Braillovy řádky připojené přes USB jsou rozpoznány
automaticky (s výjimkou sériových modelů připojených přes USB převodník), ale
většinu zpřístupňujících vlastností je třeba zapnout ručně. Na počítačích,
které to podporují, se v zaváděcím menu ozve pípnutí (jednou pro systémy s
BIOSem, dvakrát pro systémy s UEFI). Toto pípnutí signalizuje, že je menu
připraveno zpracovávat stisky kláves. Poté můžete přidat zaváděcí parametry,
které zapnou některé další zpřístupňující vlastnosti (viz 5.1.7 - "Zaváděcí
obrazovka"). Zavaděče na většině architektur interpretují klávesnici jako
QWERTY.

5.2.1. Uživatelské rozhraní instalačního systému

Instalační systém Debianu podporuje několik rozhraní pro komunikaci s
uživatelem, které se liší v míře zpřístupnění. Například rozhraní text používá
čistý text, zatímco rozhraní newt využívá textová dialogová okna. Konkrétní
rozhraní si můžete zvolit před zavedením instalačního systému, jak je popsáno v
dokumentaci proměnné DEBIAN_FRONTEND v kapitole 5.3.2 - "Parametry instalačního
programu".

With the newt front-end (used mostly with braille), one mostly just selects
answers with arrow keys and presses Enter to validate the choice. Pressing Tab
or Shift - Tab allows to switch between dialog elements, and notably to access
the Go Back button, which brings back again to previous questions. Some dialogs
contain check boxes, which can be ticked on and off by pressing Space.

With the text front-end (used mostly with speech), one mostly selects answers
by typing their number followed by pressing Enter. One can also not type
anything and just press Enter to simply accept the default value. Typing < and
pressing Enter brings back again to previous questions. When a selection of
choices has to be made (e.g. during task selection), one can type ! to express
an empty selection.

5.2.2. Braillův řádek připojený na USB

Braillovy řádky připojené na USB by měly být rozpoznány automaticky. V takovém
případě se instalace automaticky přepne do textového rozhraní a podpora
braillova řádku se automaticky doinstaluje do instalovaného systému. V
zaváděcím menu tedy stačí pouze stisknout Enter. Po startu brltty si můžete v
nastaveních zvolit vhodnou braillovu tabulku. Dokumentaci ohledně rozložení
kláves naleznete na stránkách brltty.

5.2.3. Braillův řádek připojený na sériový port

Braillovy řádky připojené na sériový port nelze rozpoznat automaticky, protože
by to některé modely mohlo poškodit. Musíte tedy použít zaváděcí parametr
brltty=ovladač,port, kterým brltty řeknete, který ovladač a port má použít.
ovladač je dvoupísmenný kód ovladače připojeného řádku (viz příručka k BRLTTY).
port je název sériového portu, ke kterému je řádek připojen; výchozí hodnotou
je ttyS0. Při použití USB převodníku se port obvykle jmenuje ttyUSB0. Volitelný
třetí parametr určuje braillovu tabulku pro daný jazyk (viz příručka k BRLTTY 
); výchozí je anglická tabulka. Tabulku můžete změnit i později v nastaveních
brltty. Čtvrtým parametrem lze předat parametry ovladači braillova řádku (např.
protocol=xzy), což je potřeba u některých raritních kousků. Dokumentaci ohledně
rozložení kláves naleznete na stránkách brltty.

5.2.4. Softwarová syntéza hlasu

Podporu softwarové syntézy hlasu naleznete ve všech variantách grafického
instalátoru a můžete ji aktivovat v zaváděcím menu stiskem klávesy s (vybere
příslušnou položku menu) a potvrdit klávesou Enter. Instalace se pak
automaticky spustí v textovém režimu a podpora hlasové systézy se automaticky
doinstaluje i do nového systému.

If several sound cards are detected, you will be prompted to press Enter when
you hear speech from the desired sound card.

První otázka (výběr jazyka) je přečtena v angličtině, zbytek instalace probíhá
ve zvoleném jazyce (pokud jej espeak podporuje).

Výchozí rychlost řeči je docela pomalá, urychlit ji můžete stiskem CapsLock+6.
Naopak pro zpomalení použijte kombinaci CapsLock+5. Podobně můžete měnit i
hlasitost: klávesami CapsLock+2 hlasitost zvýšíte, klávesami CapsLock+1
ztišíte. Další klávesové zkratky naleznete v příručce programu Speakup.
Chcete-li při instalaci zvolit výchozí odpověď na otázku, jednoduše na promptu
stiskněte Enter. Pro zadání prázdné odpovědi napište do promptu vykřičník ! a
pro návrat k předchozí otázce do promptu zadejte <.

5.2.5. Hardwarová syntéza hlasu

Podpora pro hardwarovou syntézu hlasu funguje pouze v textovém režimu, nicméně
kvůli své velikosti je dostupná pouze na médiích s podporou grafického
instalátoru. V zaváděcím menu tedy musíte vybrat grafickou instalaci "Graphical
install".

Zařízení pro hardwarovou syntézu hlasu nelze rozpoznat automaticky a proto
musíte použít zaváděcí parametr speakup.synth=ovladač, kterým speakupu
prozradíte, který ovladač má použít. Jako ovladač zadejte dvoupísmenný kód
ovladače vašeho zařízení (viz seznam kódů). Instalace se pak automaticky přepne
do textového režimu a do instalovaného systému přidá podporu pro hlasovou
syntézu.

5.2.6. Zařízení připojená rovnou na sběrnici

Některá zařízení pro zpřístupnění jsou dodávána jako karty zapojené uvnitř
počítače, které čtou text přímo z videopaměti. Aby tyto karty fungovaly, musíte
vypnout framebuffer zaváděcím parametrem vga=normal fb=false. Tím však také
snížíte počet dostupných jazyků.

Pokud chcete, je možné aktivovat textovou verzi zavaděče ještě před přidáním
zaváděcího parametru stiskem klávesy h následované klávesou Enter.

5.2.7. Kontrastní téma

For users with low vision, the installer can use a high-contrast color theme
that makes it more readable. To enable it, you can use the "Accessible high
contrast" entry from the boot screen with the d shortcut, or append the theme=
dark boot parameter.

5.2.8. Změna velikosti písma

Grafický instalátor obsahuje základní podporu pro změnu velikosti písma.
Klávesovými zkratkami Control++ resp. Control+- lze velikost písma zvětšit,
resp. zmenšit.

5.2.9. Záchranný režim, expertní a automatizované instalace

Expert, Rescue, and Automated installation choices are also available with
accessibility support. To access them, one has to first enter the "Advanced
options" submenu from the boot menu by typing a. When using a BIOS system (the
boot menu will have beeped only once), this has to be followed by Enter ; for
UEFI systems (the boot menu will have beeped twice) that must not be done.
Then, to enable speech synthesis, s can optionally be pressed (followed again
by Enter on BIOS systems but not on UEFI systems). From there, various
shortcuts can be used: x for expert installation, r for rescue mode, or a for
automated installation. Again these need to be followed by Enter when using a
BIOS system.

Volba automatizované instalace umožňuje nainstalovat Debian zcela automaticky
pomocí přednastavení. Tomuto způsobu se podrobně věnuje kapitola B - "
Automatizování instalací pomocí přednastavení".

5.2.10. Zpřístupnění v nainstalovaném systému

Problematikou zpřístupnění v nainstalovaném systému se zabývá wiki stránka
Debian Accessibility.

5.3. Zaváděcí parametry

Parametry pro zavádění jsou vlastně parametry pro jádro Linuxu, které se
používají v případech, kdy chceme zajistit, aby jádro korektně pracovalo s
neposlušnými zařízeními. Ve většinou je jádro schopno rozpoznat všechna
zařízení automaticky, ale v některých speciálních případech mu musíte trochu
pomoci.

Při prvním zavádění systému zkuste, zdali systém rozpozná všechna potřebná
zařízení jen s implicitními parametry (tj. nenastavujte pro začátek žádné
vlastní hodnoty). Systém obvykle naběhne. V případě, že se tak nestane, můžete
systém zavést později poté, co zjistíte, jaké parametry je potřeba zadat, aby
jádro korektně rozpoznalo váš hardware.

Poznatky o nejrůznějších zaváděcích parametrech a podivných zařízeních jsou k
nalezení v Linux BootPrompt HOWTO. Následující text obsahuje popis jen
stěžejních parametrů. Vybrané problémy popisuje 5.4 - "Problémy s instalačním
systémem".

5.3.1. Zavěděcí konzole

If you are booting with a serial console, generally the kernel will autodetect
this. If you have a videocard (framebuffer) and a keyboard also attached to the
computer which you wish to boot via serial console, you may have to pass the
console=device argument to the kernel, where device is a serial device of the
target, which is usually something like ttyS0.

Někdy je potřeba zadat konkrétní parametry sériového portu, jako je jeho
rychlost a parita, např. console=ttyS0,9600n8. Další obvyklé rychlosti bývají
57600 a 115200. Ujistěte se, že tento parametr přidáte až za "---", aby se toto
nastavení zkopírovalo i do konfigurace zavaděče v instalovaném systému. (Pokud
to instalátor pro daný zavaděč umožňuje.)

Abyste zajistili, že instalace používá typ terminálu kompatibilní s vaším
emulátorem terminálu, můžete přidat parametr TERM=typ. Instalační systém
podporuje následující typy terminálů: linux, bterm, ansi, vt102 a dumb. Pro
sériovou konzoli v debian-installer je výchozím typem vt102. Používáte-li IPMI
konzoli, nebo virtualizační nástroj (např. QEMU/KVM), který sám o sobě nenabízí
konverzi do daných typů terminálu, můžete jej spustit uvnitř screen. To totiž
zajistí automatický převod na typ terminálu screen, který je velmi podobný typu
vt102.

5.3.2. Parametry instalačního programu

Instalační systém rozpoznává několik užitečných parametrů^[5].

Mnoho parametrů má i svou zkrácenou formu, která usnadňuje zadávání a také
pomáhá obejít omezení příkazové řádky jádra. Pokud má parametr zkrácenou formu,
bude uvedena v závorce za dlouhou podobou. Krátkou formu preferujeme i v
příkladech této příručce.

debconf/priority (priority)

    Nastavením tohoto parametru můžete změnit nejnižší prioritu zobrazených
    otázek.

    Standardní instalace používá nastavení priority=high, což znamená, že se
    zobrazí jak kritické, tak důležité hlášky, ale normální a nevýznamné zprávy
    jsou přeskočeny. Jestliže se vyskytne problém, instalátor upraví priority
    otázek podle potřeb.

    Když použijete parametr priority=medium, zobrazí se instalační menu a
    získáte nad instalací větší kontrolu. Při použití priority=low, nic se
    nepřeskakuje a zobrazí se všechny hlášky instalačního programu (to je
    ekvivalentní zaváděcí metodě expert). Hodnotou priority=critical se potlačí
    všechny zprávy a otázky se stupněm důležitosti menším než kritickým. Pro
    tyto potlačené otázky se použijí přednastavené hodnoty.

DEBIAN_FRONTEND

    Ovlivňuje uživatelské rozhraní, ve kterém bude instalace probíhat. Dostupné
    volby jsou:

      □ DEBIAN_FRONTEND=noninteractive

      □ DEBIAN_FRONTEND=text

      □ DEBIAN_FRONTEND=newt

      □ DEBIAN_FRONTEND=gtk

    Výchozí rozhraní je DEBIAN_FRONTEND=newt. Pro instalaci přes sériovou
    konzolu může být vhodnější DEBIAN_FRONTEND=text. Některé specializované
    typy instalačních médií mohou nabízet jen omezený výběr rozhraní, nicméně
    rozhraní newt a text by měla být dostupná na většině instalačních médií. Na
    architekturách, kde to je možné, využívá grafický instalátor rozhraní gtk.

BOOT_DEBUG

    Setting this boot parameter to 2 will cause the installer's boot process to
    be verbosely logged. Setting it to 3 makes debug shells available at
    strategic points in the boot process. (Exit the shells to continue the boot
    process.)

    BOOT_DEBUG=0

        Toto je standardní hodnota.

    BOOT_DEBUG=1

        Upovídanější než obvykle.

    BOOT_DEBUG=2

        Spousty ladících informací.

    BOOT_DEBUG=3

        Pro opravdu detailní ladění se během zavádění několikrát spustí shell,
        ve kterém můžete kontrolovat a ovlivňovat náběh systému. Když shell
        ukončíte, bude zavádění pokračovat.

log_host, log_port

    Způsobí, že instalátor nebude ukládat logovací hlášky jen do lokálního
    souboru, ale bude je také posílat přes síť vzdálenému syslogu běžícímu na
    zadaném počítači a portu. Jestliže parametr log_port vynecháte, bude se
    předpokládat standardní port syslogu 514.

lowmem

    Může vynutit, aby instalátor použil agresivnější nízkopaměťový režim, než
    by nastavil podle skutečně dostupné paměti. Možné hodnoty jsou 1 a 2. Více
    naleznete v 6.3.1.1 - "Kontrola dostupné paměti / nízkopaměťový režim".

noshell

    Zabrání instalátoru, aby na druhé a třetí virtuální konzoli nabízel
    interaktivní shell, což je užitečné při automatizovaných vzdálených
    instalacích, kdy je fyzická bezpečnost omezena.

debian-installer/framebuffer (fb)

    Některé architektury využívají pro instalaci v různých jazycích jaderný
    framebuffer (grafická konzole). Pokud na svém systému zaznamenáte symptomy
    jako chybové hlášky o btermu a boglu, černou obrazovku nebo zamrznutí
    instalace po několika minutách od spuštění, můžete framebuffer vypnout
    parametrem vga=normal fb=false.

debian-installer/theme (theme)

    A theme determines how the user interface of the installer looks (colors,
    icons, etc.). Which themes are available may differ per frontend. Currently
    both the newt and gtk frontend have (apart from the default look) only one
    additional theme named "dark" theme, which was designed for visually
    impaired users. Set this theme by booting with theme=dark (there is also
    the keyboard shortcut d for this in the boot menu).

netcfg/disable_autoconfig

    Standardně se debian-installer snaží získat nastavení sítě přes automatické
    nastavení sítě IPv6 a DHCP. Je-li získáno nějaké nastavení, instalační
    systém se na nic nebude ptát a automaticky bude pokračovat v instalaci. K
    ručnímu nastavení sítě se dostanete pouze v případě, že automatické
    nastavení selže.

    Máte-li tedy na místní síti DHCP server nebo IPv6 router, ale z nějakého
    důvodu jej nechcete použít (protože např. pro účely instalace vrací špatné
    hodnoty), můžete použít parametr netcfg/disable_autoconfig=true, kterým
    zabráníte automatickému nastavení sítě (ať už verze 4 nebo 6) a rovnou
    budete požádáni o ruční nastavení síťových údajů.

hw-detect/start_pcmcia

    Pokud chcete zabránit startu PCMCIA služeb, nastavte tento parametr na
    hodnotu false. Některé notebooky jsou totiž nechvalně známé tím, že při
    startu PCMCIA služeb zaseknou celý systém.

disk-detect/dmraid/enable (dmraid)

    Chcete-li v instalačním systému zapnout podporu disků připojených k
    sériovému ATA RAIDu (též známému jako ATA RAID, BIOS RAID nebo falešný
    RAID), nastavte parametr na hodnotu true. Tato podpora je zatím
    experimentální. Více informací naleznete v v Debian Installer Wiki.

preseed/url (url)

    Zde můžete zadat url k souboru s přednastavením, podle kterého se má
    provést automatická instalace, viz 4.6 - "Automatická Instalace".

preseed/file (file)

    Zde můžete zadat soubor s přednastavením, podle kterého se má provést
    automatická instalace, viz 4.6 - "Automatická Instalace".

preseed/interactive

    Nastavením na hodnotu true se zobrazí i otázky, které byly přednastaveny.
    To může být užitečné pro testování nebo ladění souboru s přednastavením.
    Nastavení se neprojeví u otázek, které byly zadány jako parametry při
    zavádění systému. Pro ty však existuje speciální syntaxe, viz B.5.2 -
    "Použití přednastavení pro změnu výchozích hodnot".

auto-install/enable (auto)

    Při nastavení na hodnotu true odsune otázky obvykle zobrazované před
    začátkem přednastavení až za nastavení sítě. Podrobnosti o automatizaci
    instalací pomocí této možnosti naleznete v části B.2.3 - "Automatický
    režim".

finish-install/keep-consoles

    Během instalací skrze sériovou nebo správcovskou konzoli jsou tradiční
    virtuální konzoly (VT1-VT6) v souboru /etc/inittab zakázány. Chcete-li tomu
    zabránit, nastavte na hodnotu true.

cdrom-detect/eject

    By default, before rebooting, debian-installer automatically ejects the
    optical media used during the installation. This can be unnecessary if the
    system does not automatically boot off such media. In some cases it may
    even be undesirable, for example if the optical drive cannot reinsert the
    media itself and the user is not there to do it manually. Many slot
    loading, slim-line, and caddy style drives cannot reload media
    automatically.

    Pro zakázání automatického vysunutí nastavte parametr na hodnotu false.

base-installer/install-recommends (recommends)

    Nastavením na hodnotu false se systém pro správu balíků nebude pokoušet o
    instalaci doporučených balíků jak během instalace, tak později v
    nainstalovaném systému. Více naleznete v kapitole 6.3.5 - "Instalace
    základního systému".

    Použitím této volby můžete získat štíhlejší systém, ale také je možné, že
    zmizí některé vlastnosti, které byste normálně od systému očekávali. Pro
    získání požadované funkcionality pak můžete ručně doinstalovat některé
    vybrané doporučované balíky, nicméně musíte vědět, které balíky potřebujete
    a proto by tuto možnost měli používat pouze zkušení harcovníci.

debian-installer/allow_unauthenticated

    Instalační systém vyžaduje, aby byly všechny repositáře autentizovány
    známým gpg klíčem. Nastavením na hodnotu true můžete autentizaci potlačit. 
    Varování: Nebezpečné, není doporučeno.

rescue/enable

    Nastavíte-li tento parametr na hodnotu true, spustí se místo běžné
    instalace záchranný režim. Viz 8.6 - "Obnovení poškozeného systému".

5.3.3. Použití zaváděcích parametrů pro zodpovězení otázek

Na stejném místě, kam se zadávají parametry pro jádro nebo instalační program,
můžete zadat odpověď na téměř každou otázku, se kterou se můžete při instalaci
potkat. Tato možnost se využívá spíše ve specifických případech a je zde
vypsáno jen několik příkladů. Podrobnější informace naleznete v dodatku B.2.2 -
"Použití zaváděcích parametrů jako formy přednastavení".

debian-installer/language (language), debian-installer/country (country), 
    debian-installer/locale (locale)

    Existují dva způsoby, jak nastavit jazyk, zemi a místní prostředí (locale)
    instalace a následně nainstalovaného systému.

    První a nejjednodušší je použít pouze parametr locale. Jazyk a země se pak
    z této hodnoty odvodí automaticky. Například locale=de_CH vybere jako
    výchozí jazyk němčinu, jako zemi Švýcarsko a výchozí locale v
    nainstalovaném systému bude de_CH.UTF-8. Nevýhodou je skutečnost, že takto
    nelze nastavit všechny možné kombinace jazyka, země a locale.

    Druhou, pružnější, možností je zadat jazyk (language) a zemi (country)
    samostatně, přičemž můžete volitelně použít i parametr locale, kterým
    nastavíte výchozí locale instalovaného systému. Například můžete systému
    sdělit, že se nacházíte v Německu, ale rádi byste používali anglické
    prostředí v jeho britském standardu: language=en country=DE locale=
    en_GB.UTF-8.

anna/choose_modules (modules)

    Pomocí tohoto parametru můžete nechat automaticky nahrát komponenty
    instalačního systému, které se implicitně nenahrávají. Příkladem užitečných
    komponent jsou openssh-client-udeb (během instalace můžete využívat scp) a
    ppp-udeb (podporuje nastavení PPPoE, viz D.5 - "Jak nainstalovat Debian GNU
    /Linux pomocí PPP přes Ethernet (PPPoE)").

netcfg/disable_autoconfig

    Set to true if you want to disable IPv6 autoconfiguration and DHCP and
    instead force static network configuration.

mirror/protocol (protocol)

    Instalační systém standardně používá pro stažení souborů ze zrcadel Debianu
    protokol http a při standardní prioritě otázek nelze za běhu změnit na ftp.
    nastavením tohoto parametru na hodnotu ftp můžete instalátor donutit, aby
    použil právě tento protokol. Ftp zrcadlo nemůžete vybrat z připraveného
    seznamu, vždy jej musíte zadat ručně.

tasksel:tasksel/first (tasks)

    Tímto parametrem můžete nainstalovat úlohy, které nejsou při instalaci v
    interaktivním seznamu úloh dostupné. Příkladem budiž úloha kde-desktop.
    Více informací naleznete v části 6.3.6.2 - "Výběr a instalace softwaru".

5.3.4. Předávání parametrů jaderným modulům

Jestliže jsou ovladače zakompilovány přímo do jádra, můžete jim předávat
parametry tak, jak je popsáno v dokumentaci k jádru. Pokud však jsou ovladače
zkompilovány jako moduly, znamená to, že jsou při instalaci zaváděny odlišným
způsobem než při zavádění nainstalovaného systému a nemůžete jim předat
parametry klasickým postupem. Musíte použít speciální syntaxi, kterou
instalátor rozpozná a zařídí, aby se tyto parametry uložily do příslušných
konfiguračních souborů a posléze se v pravý čas použily. Tyto parametry se
automaticky přenesou i do nainstalovaného systému.

Poznamenejme, že v dnešní době je používání parametrů modulů téměř raritou,
protože jádro ve většině případů správně rozpozná přítomný hardware a nastaví
pro něj vhodné hodnoty automaticky. Pokud tomu tak není, stále můžete použít
ruční nastavení.

Syntaxe pro nastavení parametrů modulu je následující:

název_modulu.název_parametru=hodnota

Potřebujete-li modulu předat několik parametrů, stačí syntaxi několikrát
zopakovat. Například pro nastavení staré síťové karty 3Com, aby použila
konektor BNC (koaxiální) a IRQ 10, zadali-byste:

3c509.xcvr=3 3c509.irq=10

5.3.5. Zapsání jaderných modulů na černou listinu

Někdy je nutné zanést modul na černou listinu a zabránit tak jádru a udevu, aby
jej automaticky zavedli. Jedním z důvodů bývá ten, že modul způsobuje na vašem
hardwaru problémy. Někdy také jádro registruje pro jedno zařízení dva ovladače,
což může vytvářet problémy v případech, kdy jsou tyto ovladače navzájem
konfliktní, nebo pokud zařízení funguje správně jen s jedním z ovladačů a jádro
nejprve zavede ten chybný ovladač.

Moduly můžete na černou listinu přidat následovně: jméno_modulu.blacklist=yes.
Prakticky to znamená, že se modul zapíše do souboru /etc/modprobe.d/
blacklist.local, což ho vyřadí jak během instalace, tak v nově nainstalovaném
systému.

Poznamenejme, že modul stále může být zaveden explicitně přímo instalačním
systémem. Předejít tomu můžete instalací v expertním režimu a odebráním modulu
ze seznamu modulů, který se zobrazuje během několika fází rozpoznávání
hardwaru.

5.4. Problémy s instalačním systémem

5.4.1. Reliability of optical media

Sometimes, especially with older drives, the installer may fail to boot from an
optical disc. The installer may also -- even after booting successfully from
such disc -- fail to recognize the disc or return errors while reading from it
during the installation.

Možných příčin je spousta a můžeme zde vypsat jen ty nejběžnější, resp. můžeme
zmínit obecné postupy. Zbytek je na vás.

Nejprve byste měli vyzkoušet dvě nejjednodušší věci.

  • If the disc does not boot, check that it was inserted correctly and that it
    is not dirty.

  • If the installer fails to recognize the disc, try just running the option 
    Detect and mount installation media a second time. Some DMA related issues
    with very old CD-ROM drives are known to be resolved in this way.

If this does not work, then try the suggestions in the subsections below. Most,
but not all, suggestions discussed there are valid for CD-ROM and DVD.

If you cannot get the installation working from optical disc, try one of the
other installation methods that are available.

5.4.1.1. Běžné problémy

  • Některé starší CD mechaniky nepodporují čtení disků vypálených na novějších
    vypalovačkách vyššími rychlostmi.

  • Některé hodně staré CD mechaniky nefungují správně při povoleném DMA "
    direct memory access".

5.4.1.2. Jak zjistit o problému co nejvíce (a možná jej vyřešit)

If the optical disc fails to boot, try the suggestions listed below.

  • Check that your BIOS/UEFI actually supports booting from optical disc (only
    an issue for very old systems) and that booting from such media is enabled
    in the BIOS/UEFI.

  • If you downloaded an iso image, check that the md5sum of that image matches
    the one listed for the image in the MD5SUMS file that should be present in
    the same location as where you downloaded the image from.

    $ md5sum debian-testing-i386-netinst.iso
    a20391b12f7ff22ef705cee4059c6b92  debian-testing-i386-netinst.iso

    Next, check that the md5sum of the burned disc matches as well. The
    following command should work. It uses the size of the image to read the
    correct number of bytes from the disc.

    $ dd if=/dev/cdrom | \
    > head -c `stat --format=%s debian-testing-i386-netinst.iso` | \
    > md5sum
    a20391b12f7ff22ef705cee4059c6b92  -
    262668+0 records in
    262668+0 records out
    134486016 bytes (134 MB) copied, 97.474 seconds, 1.4 MB/s

If, after the installer has been booted successfully, the disc is not detected,
sometimes simply trying again may solve the problem. If you have more than one
optical drive, try changing the disc to the other drive. If that does not work
or if the disc is recognized but there are errors when reading from it, try the
suggestions listed below. Some basic knowledge of Linux is required for this.
To execute any of the commands, you should first switch to the second virtual
console (VT2) and activate the shell there.

  • Zkontrolujte podezřelé hlášky na čtvrté virtuální konzoli, nebo si editorem
    nano prohlédněte obsah souboru /var/log/syslog. Poté zkontrolujte výstup
    příkazu dmesg.

  • Check in the output of dmesg if your optical drive was recognized. You
    should see something like (the lines do not necessarily have to be
    consecutive):

    ata1.00: ATAPI: MATSHITADVD-RAM UJ-822S, 1.61, max UDMA/33
    ata1.00: configured for UDMA/33
    scsi 0:0:0:0: CD-ROM            MATSHITA DVD-RAM UJ-822S  1.61 PQ: 0 ANSI: 5
    sr0: scsi3-mmc drive: 24x/24x writer dvd-ram cd/rw xa/form2 cdda tray
    cdrom: Uniform CD-ROM driver Revision: 3.20

    If you don't see something like that, chances are the controller your drive
    is connected to was not recognized or may be not supported at all. If you
    know what driver is needed for the controller, you can try loading it
    manually using modprobe.

  • Check that there is a device node for your optical drive under /dev/. In
    the example above, this would be /dev/sr0. There should also be a /dev/
    cdrom.

  • Use the mount command to check if the optical disc is already mounted; if
    not, try mounting it manually:

    $ mount /dev/hdc /cdrom

    Check if there are any error messages after that command.

  • Check if DMA is currently enabled:

    $ cd /proc/ide/hdc
    $ grep using_dma settings
    using_dma      1       0       1       rw

    A "1" in the first column after using_dma means it is enabled. If it is,
    try disabling it:

    $ echo -n "using_dma:0" >settings

    Make sure that you are in the directory for the device that corresponds to
    your optical drive.

  • If there are any problems during the installation, try checking the
    integrity of the installation media using the option near the bottom of the
    installer's main menu. This option can also be used as a general test if
    the disc can be read reliably.

5.4.2. Zaváděcí konfigurace

Pokud se jádro zasekne během zavádění, nerozezná připojená zařízení, nebo disky
nejsou korektně rozpoznány, v prvé řadě zkontrolujte parametry jádra, kterými
se zabývá 5.3 - "Zaváděcí parametry".

V některých případech může za nefunkčnost zařízení chybějící firmware, jak
popisují části 2.2 - "Ovladače vyžadující firmware" a 6.4 - "Nahrání
chybějícího firmwaru".

5.4.3. Softwarová syntéza hlasu

Pokud softwarová syntéza hlasu nefunguje, bývá to obvykle problém se zvukovou
kartou. Buď není její ovladač součástí instalátoru, nebo její mixer používá
atypické názvy kanálů, které jsou vevýchozím nastavení ztišené. Měli byste to
nahlásit jako chybu a přiložit k ní výpisy násedujících příkazů spuštěných na
daném počítači z jiného linuxového systému, na kterém zvuk funguje (například z
Live CD).

  • dmesg

  • lspci

  • lsmod

  • amixer

5.4.4. Běžné instalační problémy na 64-bit PC

V praxi se můžete potkat s instalačními problémy, které lze vyřešit, nebo je
aspoň obejít, zadáním určitých zaváděcích parametrů instalačnímu programu.

Jestliže je obraz na obrazovce během zavádění jádra "divný", jako třeba čistě
bílý, naprosto černý, nebo se zobrazuje barevné "smetí", máte problematickou
grafickou kartu, která se neumí správně přepnout do grafického režimu. V
takovém případě pomůže zaváděcí parametr fb=false, kterým vypnete grafický
framebuffer. Během instalace však bude k dispozici pouze podmnožina dostupných
jazyků, protože některé jazyky nejdou v čistě textovém režimu zobrazit.
Zaváděcí parametry popisuje 5.3 - "Zaváděcí parametry".

5.4.4.1. Systém zamrzne během konfigurování PCMCIA

Některé staré modely notebooků firmy Dell jsou známé tím, že se zhroutí, když
automatické rozpoznávání PCMCIA zařízení přistoupí na určité hardwarové adresy.
Toto chování mohou vykazovat i některé notebooky jiných výrobců. Pokud se u vás
tento problém projevuje a pro instalaci podporu PCMCIA nepotřebujete, můžete ji
vypnout zaváděcím parametrem hw-detect/start_pcmcia=false. Služby PCMCIA můžete
zprovoznit později po instalaci.

Alternativně můžete instalační program zavést v expertním režimu. Pak budete
mimo jiné dotázáni na rozsah zdrojů, které váš hardware vyžaduje. Například
pokud máte jeden z výše zmíněných Dellů, měli byste zde zadat exclude port
0x800-0x8ff. Seznam obvyklých rozsahů se nachází například v System resource
settings section of the PCMCIA HOWTO. Při zadávání rozsahů do instalačního
programu vynechejte všechny čárky (pokud se v rozsazích nachází).

5.4.5. Význam hlášek při zavádění jádra

Během zavádění systému můžete vidět spoustu hlášení typu can't find ..., ...
not present, can't initialize ... nebo this driver release depends on ....
Většina těchto hlášení je neškodná. Vy je vidíte proto, že jádro instalačního
systému je přeloženo tak, aby mohlo běžet na počítačích s odlišnými
hardwarovými konfiguracemi a mnoha různými periferními zařízeními. Samozřejmě
že žádný počítač asi nebude mít všechna zařízení, tudíž systém nahlásí několik
nenalezených zařízení. Také se může stát, že se zavádění na chvíli zastaví. To
se stává při čekání na odpověď od zařízení, které v systému chybí. Pokud se vám
zdá doba, za kterou systém naběhne, příliš dlouhá, můžete si později vytvořit
vlastní jádro (viz 8.5 - "Kompilace nového jádra").

5.4.6. Hlášení problémů s instalací

If you get through the initial boot phase but cannot complete the install, the
menu option Save debug logs may be helpful. It lets you store system error logs
and configuration information from the installer on a storage medium, or
download them using a web browser. This information may provide clues as to
what went wrong and how to fix it. If you are submitting a bug report, you may
want to attach this information to the bug report.

Další užitečné informace můžete najít během instalace v adresáři /var/log/ a
později v novém systému ve /var/log/installer/.

5.4.7. Pošlete nám zprávu o instalaci

Pokud problém přetrvává, prosíme vás o zaslání zprávy o průběhu instalace.
Zprávu o instalaci můžete zaslat i v případě, že vše proběhlo bez problémů --
získáme tak přehled o nejrůznějších hardwarových konfiguracích.

Zprávy o instalaci budou publikovány v našem systému sledování chyb (BTS, Bug
Tracking System) a budou přeposlány do veřejného diskusního listu. Proto se
ujistěte, že použijete emailovou adresu, u které vám nevadí, že bude
zveřejněna.

Máte-li funkční systém s Debianem, je nejjednodušší zaslat zprávu pomocí balíku
reportbug. Nainstalujte si potřebné balíky (apt install installation-report
reportbug), nastavte reportbug podle kapitoly 8.4.2 - "Odesílání pošty mimo
systém" a spusťte příkaz reportbug installation-reports.

Alternatively you can use this template when filling out installation reports,
and file the report as a bug report against the installation-reports pseudo
package, by sending it to <submit@bugs.debian.org>.

Package: installation-reports

Boot method: <How did you boot the installer? CD/DVD? USB stick? Network?>
Image version: <Full URL to image you downloaded is best>
Date: <Date and time of the install>

Machine: <Description of machine (eg, IBM Thinkpad R32)>
Processor:
Memory:
Partitions: <df -Tl will do; the raw partition table is preferred>

Output of lspci -knn (or lspci -nn):

Base System Installation Checklist:
[O] = OK, [E] = Error (please elaborate below), [ ] = didn't try it

Initial boot:           [ ]
Detect network card:    [ ]
Configure network:      [ ]
Detect media:           [ ]
Load installer modules: [ ]
Detect hard drives:     [ ]
Partition hard drives:  [ ]
Install base system:    [ ]
Clock/timezone setup:   [ ]
User/password setup:    [ ]
Install tasks:          [ ]
Install boot loader:    [ ]
Overall install:        [ ]

Comments/Problems:

<Description of the install, in prose, and any thoughts, comments
      and ideas you had during the initial install.>

In the bug report, describe what the problem is, including the last visible
kernel messages in the event of a kernel hang. Describe the steps that you did
which brought the system into the problem state.


━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

^[4] Mini ISO můžete stáhnout ze zrcadla Debianu stejně jako ostatní soubory v
4.2 - "Stažení souborů ze zrcadel Debianu", hledejte něco s názvem netboot/gtk/
mini.iso.

^[5] S aktuálními jádry (od verze 2.6.9) lze použít až 32 parametrů a 32
proměnných prostředí. Pokud tato čísla překročíte, jádro zpanikaří. Další
omezení je, že se celá příkazová řádka jádra musí vejít do 255 znaků. Cokoliv
nad tuto délku může být v tichosti oříznuto.

Kapitola 6. Používáme instalační program Debianu

Obsah

6.1. Základní principy

    6.1.1. Používání grafického instalátoru

6.2. Úvod do komponent
6.3. Použití jednotlivých komponent

    6.3.1. Nastavení instalačního programu a rozpoznání hardwaru
    6.3.2. Nastavení uživatelů a hesel
    6.3.3. Nastavení hodin a časového pásma
    6.3.4. Rozdělení disku a výběr přípojných bodů
    6.3.5. Instalace základního systému
    6.3.6. Instalace dodatečného softwaru
    6.3.7. Nastavení zavádění systému
    6.3.8. Dokončení instalace
    6.3.9. Řešení problémů
    6.3.10. Installation over network-console

6.4. Nahrání chybějícího firmwaru

    6.4.1. Příprava média
    6.4.2. Firmware a instalovaný systém
    6.4.3. Completing the Installed System

6.5. Customization

    6.5.1. Installing an alternative init system

6.1. Základní principy

For this architecture the debian-installer supports two different user
interfaces: a graphical one and a text-based one. The graphical interface is
used by default unless you select an "Install" option in the boot menu. For
more information about booting the graphical installer, please refer to 5.1.8 -
"Grafický instalátor".

Instalační program Debianu se skládá z mnoha malých, jednoúčelových komponent.
Každá komponenta má na starosti jeden krok instalace (od úvodního dialogu pro
výběr jazyka až po závěrečný restart do nového systému). Komponenty se snaží
pracovat samostatně, ale pokud je to nutné, zeptají se uživatele na další
postup.

Otázky samotné mají přiřazeny různé priority. Uživatel si může nastavit úroveň
zobrazených otázek, takže uživatel začátečník se nemusí zatěžovat nepodstatnými
věcmi (instalační program dosadí "rozumné" hodnoty). Implicitně se
debian-installer ptá pouze na otázky s vysokou prioritou, což vede k poměrně
automatickému procesu s minimem uživatelských zásahů.

Pokud se vyskytne problém, zobrazí se chybová obrazovka s popisem problému a
následně se objeví hlavní menu instalačního programu, kde můžete situaci
napravit. V ideálním případě uživatel menu vůbec neuvidí a bude pouze odpovídat
na otázky jednotlivých komponent. Oznámení o vážných problémech mají nastavenou
"kritickou" prioritu, tudíž budou zobrazeny vždy.

Některá výchozí nastavení instalačního programu lze změnit pomocí zaváděcích
parametrů při startu debian-installeru. Například pokud si chcete vynutit
statické nastavení sítě (implicitně se používá DHCP nebo automatické nastavení
IPv6), použijte parametr netcfg/disable_autoconfig=true. Seznam dostupných
parametrů naleznete v kapitole 5.3.2 - "Parametry instalačního programu".

Pokročilí uživatelé jistě ocení přístup do (standardně skrytého) menu, ve
kterém mohou kontrolovat každý krok instalace. Menu vyvoláte tak, že při startu
přidáte zaváděcí parametr priority=medium.

Jestliže váš hardware vyžaduje zadat při instalaci jaderných modulů nějaké
parametry, je nutné spustit instalační program v "expertním" režimu. Toho
docílíte tak, že spustíte instalátor příkazem expert, nebo použijete zaváděcí
parametr priority=low. Expertní režim vám dá plnou kontrolu nad instalačním
procesem.

In the text-based environment the use of a mouse is not supported. Here are the
keys you can use to navigate within the various dialogs. The Tab or right arrow
keys move "forward", and the Shift+Tab or left arrow keys move "backward"
between displayed buttons and selections. The up and down arrow select
different items within a scrollable list, and also scroll the list itself. In
addition, in long lists, you can type a letter to cause the list to scroll
directly to the section with items starting with the letter you typed and use 
Pg-Up and Pg-Down to scroll the list in sections. The space bar selects an item
such as a checkbox. Use Enter to activate choices.

Některé dialogy mohou obsahovat podrobnější nápovědu, což je indikováno ve
spodním řádku obrazovky textem "F1 nápověda".

Chybové hlášky jsou přesměrovány na čtvrtou konzolu (známou jako tty4). Do této
konzoly se můžete přepnout klávesami Levý Alt+F4 (držte levou klávesu Alt a
stiskněte funkční klávesu F4). Zpět do instalačního programu se vrátíte stiskem
Levý Alt+F1.

Hlášky ze třetí konzoly se také ukládají do souboru /var/log/syslog. Po
instalaci jej naleznete v novém systému pod jménem /var/log/installer/syslog.
Další hlášky instalace můžete najít v adresáři /var/log/, nebo po instalaci ve
/var/log/installer/.

6.1.1. Používání grafického instalátoru

Grafický instalátor pracuje úplně stejně jako instalátor textový a tedy můžete
pro instalaci plně využít informací sepsaných ve zbytku příručky.

Preferujete-li ovládání pomocí klávesnice, měli byste vědět dvě věci. Pro
rozbalení/sbalení seznamu (např. při výběru kontinentů a zemí) můžete použít
klávesy + a -. U otázek, kde můžete vybrat více než jednu možnost (např. výběr
úloh), musíte pro pokračování dále nejprve přeskákat tabulátorem na tlačítko 
Pokračovat a poté stisknout Enter. Pokud byste stiskli Enter rovnou, změnili
byste výběr položky, ale na tlačítko Pokračovat by to nemělo žádný vliv.

Pokud dialog obsahuje další nápovědu, zobrazí se tlačítko Nápověda. Kromě
aktivování tlačítka (myší nebo klávesnicí) můžete nápovědu vyvolat také
klávesou F1.

Pro přepnutí do jiné konzoly musíte kromě Levého Altu a funkční klávesy
stisknout i klávesu Ctrl, stejně jako v systému X Window. Například pro
přepnutí do druhého virtuálního terminálu (kde běží ladicí shell) byste
použili: Ctrl+Levý Alt+F2. Grafická instalace běží na pátém virtuálním
terminálu, takže pro přepnutí zpět můžete použít klávesovou kombinaci Levý Alt+
F5.

6.2. Úvod do komponent

V následujícím seznamu komponent instalačního programu je uveden pouze stručný
popis komponenty. Detaily použití konkrétní komponenty jsou v 6.3 - "Použití
jednotlivých komponent".

main-menu

    Zobrazuje seznam komponent, které můžete spustit. Hlavní menu má prioritu "
    normální", takže se nezobrazí při "vysoké" (přednastaveno) nebo "kritické"
    prioritě. Pokud se vyskytne problém, který vyžaduje zásah uživatele, je
    priorita otázek dočasně snížena a objeví se menu, ve kterém můžete problém
    odstranit.

    Zpět do menu se můžete dostat opakovaným stiskem tlačítka Jít zpět.

localechooser

    Umožní uživateli výběr jazyka, země a národního prostředí, které se použijí
    jak během instalace, tak v novém systému. Za předpokladu, že je překlad
    kompletní, bude instalační program zobrazovat zprávy ve vybraném jazyce.
    Pokud není, některé texty se zobrazí anglicky.

console-setup

    Shows a list of keyboard (layouts), from which the user chooses the one
    which matches his own model.

hw-detect

    Automaticky rozpozná většinu zařízení připojených k počítači (síťové karty,
    pevné disky, PCMCIA).

cdrom-detect

    Looks for and mounts a Debian installation media.

netcfg

    Nastaví síťová připojení, aby se mohl zbytek systému instalovat ze sítě.

iso-scan

    Hledá souborové systémy ISO-9660, které se nachází na pevném disku v podobě
    ISO obrazů.

choose-mirror

    Předloží seznam zrcadel s debianími archivy, ze kterého si můžete vybrat,
    odkud se balíky stáhnou.

cdrom-checker

    Checks integrity of installation media. This way, the user may assure him/
    herself that the installation image was not corrupted.

lowmem

    Lowmem se snaží rozpoznat systémy s malou operační pamětí a poté se v
    určitých okamžicích snaží z paměti odstranit nepotřebné části
    debian-installeru. Poznamenejme, že to provádí na úkor funkčnosti
    instalačního programu.

anna

    Anna's Not Nearly APT. Installs packages which have been retrieved from the
    chosen mirror or installation media.

user-setup

    Nastaví heslo uživatele root a vytvoří neprivilegovaného uživatele pro
    běžnou práci.

clock-setup

    Aktualizuje systémové hodiny a určí, zda jsou nastaveny na univerzální
    koordinovaný čas.

tzsetup

    Podle dříve zvolené kombinace jazyk/země nastaví časové pásmo.

partman

    Umožní vám rozdělit disky připojené k systému, vytvořit souborové systémy
    na vybraných oblastech a svázat je s přípojnými body. Součástí programu je
    i možnost automatického rozdělení disku, nebo podpora pro LVM. Partman je
    nyní v Debianu upřednostňovaným dělicím programem.

partitioner

    Umožní vám rozdělit disky připojené k systému. Pro dělení se vybere program
    dle architektury vašeho počítače.

partconf

    Zobrazí seznam oblastí a podle vašich pokynů na nich vytvoří souborové
    systémy.

partman-lvm

    Pomůže s nastavením LVM (Logical Volume Manager, tedy česky manažer
    logických svazků).

partman-md

    Umožní vám nastavit softwarový RAID (Redundant Array of Inexpensive Disks).
    Tento softwarový RAID bývá obvykle lepší než levné (pseudohardwarové) RAID
    řadiče na novějších základních deskách.

base-installer

    Nainstaluje základní množinu balíků, které jsou potřeba pro samostatný běh
    Debianu.

apt-setup

    Nastaví apt, což se většinou děje automaticky na základě média, ze kterého
    je spuštěn instalační systém.

pkgsel

    Umožní vybrat a nainstalovat dodatečný software pomocí nástroje tasksel.

os-prober

    Umí rozpoznat operační systémy nainstalované na počítači. Tuto informaci
    pak předá následující komponentě (bootloader-installer), která vám může
    nabídnout možnost přidat objevené operační systémy do startovacího menu
    zavaděče. Takto si můžete při startu počítače vybrat, který operační systém
    chcete zavést.

bootloader-installer

    The various bootloader installers each install a boot loader program on the
    hard disk, which is necessary for the computer to start up using Linux
    without using a USB stick or CD-ROM. Many boot loaders allow the user to
    choose an alternate operating system each time the computer boots.

shell

    Umožní vám spustit shell (buď z menu, nebo na druhé konzoli).

save-logs

    Provides a way for the user to record information on a USB stick, network,
    hard disk, or other media when trouble is encountered, in order to
    accurately report installer software problems to Debian developers later.

6.3. Použití jednotlivých komponent

V této části podrobně popíšeme každou komponentu instalačního programu.
Komponenty jsou seskupeny do celků podle kontextu, ve kterém se během instalace
vyskytují. Poznamenejme, že při instalaci se nemusí vždy využít všechny
komponenty -- to závisí na způsobu instalace a na dostupném hardwaru.

6.3.1. Nastavení instalačního programu a rozpoznání hardwaru

Předpokládejme, že debian-installer úspěšně nastartoval a nyní se díváte na
jeho první obrazovku. V tento okamžik je debian-installer ještě poměrně hloupý
a nepoužitelný. Neví nic o hardwaru vašeho počítače, nezná váš preferovaný
jazyk a dokonce ani netuší, jaký úkol mu byl přidělen. Ale nebojte se. Jako
správný průzkumník začne debian-installer zkoumat své okolí a po nějaké době
bude mít slušný přehled o okolním hardwaru. Poté se pokusí nalézt zbytek svých
komponent a sám sebe přemění ve schopný, dobře vychovaný program. Bohužel,
stále existují věci, se kterými si debian-installer nedokáže poradit a proto mu
musíte trošku pomoci (například vybrat jazyk, ve kterém má instalace probíhat,
odsouhlasit rozložení klávesnice a podobně).

Během této fáze si jistě všimnete, že debian-installer několikrát rozpoznává
hardware. Poprvé je úzce zaměřen na hardware, který by mohl obsahovat další
části instalačního programu, tj. CD mechaniky nebo síťové karty. Další
rozpoznávání hardwaru probíhá později, když se hledají pevné disky, protože
před prvním rozpoznáváním ještě nemusí být k dispozici všechny ovladače.

Při rozpoznávání hardwaru si debian-installer kontroluje, zda ovladače pro
nalezený hardware vyžadují zavedeni firmwaru. Jestliže požadovaný firmware není
dostupný, zobrazí se nabídka na jeho nahrání z výměnného média. Podrobnosti
naleznete v části 6.4 - "Nahrání chybějícího firmwaru".

6.3.1.1. Kontrola dostupné paměti / nízkopaměťový režim

Jednou z prvních věcí, které debian-installer zkontroluje, je velikost operační
paměti. Pokud má váš systém málo paměti, tak se tato komponenta pokusí provést
změny v instalačním procesu tak, aby byla instalace možná i na tomto počítači.

Prvním krokem ke snížení paměťové náročnosti je vyhození všech překladů, což
znamená že instalace bude probíhat pouze v angličtině. Samozřejmě, že po
dokončení instalace si můžete systém lokalizovat dle potřeb (viz Lokalizace
Debianu).

Pokud to nestačí, instalace přejde na dietu, při které nahraje pouze ty
komponenty, které jsou nezbytné pro dokončení základní instalace. Tím se o něco
sníží funkčnost systému. Sice budete mít možnost nahrát dodatečné komponenty
ručně, ale mějte na paměti, že každá komponenta znamená další paměť a proto se
může stát, že instalace selže.

Když instalace probíhá v nízkopaměťovém režimu, je doporučeno vytvořit
odkládací oblast o velikosti nejméně (64-128 MB). Odkládací oblast se použije
jako virtuální paměť a tedy zvýší množství dostupné paměti. Instalační systém
se pokusí aktivovat odkládací oblast co nejdříve. Intenzivní využívání
odkládací oblasti výrazně zvýší diskovou aktivitu a sníží výkon celého systému.

I přes tato opatření je možné, že instalace zamrzne, nebo že jádro odstřelí
některé procesy, protože systému dojde paměť (v syslogu a na 4. konzoli by se
to mělo projevit hláškami Out of memory).

Například máme zprávu, že při nedostatku paměti a odkládacího prostoru selže
vytváření velkého souborového systému typu ext3. Pokud nepomůže zvětšení
odkládacího prostoru, můžete zkusit vytvořit souborový systém jako ext2 a
později po instalaci oblast převést na ext3.

Důraznější nízkopaměťový režim lze vynutit i v případech, kdy by podle dostupné
paměti měla fungovat jeho mírnější varianta nebo dokonce i běžná instalace.
Stačí použít parametr "lowmem", jak popisuje část 5.3.2 - "Parametry
instalačního programu".

6.3.1.2. Výběr místního prostředí

In most cases the first questions you will be asked concern the selection of
localization options to be used both for the installation and for the installed
system. The localization options consist of language, location and locales.

The language you choose will be used for the rest of the installation process,
provided a translation of the different dialogs is available. If no valid
translation is available for the selected language, the installer will default
to English.

The selected geographic location (in most cases a country) will be used later
in the installation process to select the correct time zone and a Debian mirror
appropriate for that country. Language and country together will help determine
the default locale for your system and select the correct keyboard layout.

You will first be asked to select your preferred language. The language names
are listed both in English (left side) and in the language itself (right side);
the names on the right side are also shown in the proper script for the
language. The list is sorted on the English names. At the top of the list is an
extra option that allows you to select the "C" locale instead of a language.
Choosing the "C" locale will result in the installation proceding in English;
the installed system will have no localization support as the locales package
will not be installed.

Next you will be asked to select your geographic location. If you selected a
language that is recognized as an official language for more than one country^
[6], you will be shown a list of only those countries. To select a country that
is not in that list, choose other (the last option). You will then be presented
with a list of continents; selecting a continent will lead to a list of
relevant countries on that continent.

If the language has only one country associated with it, a list of countries
will be displayed for the continent or region the country belongs to, with that
country selected as the default. Use the Go Back option to select countries on
a different continent.

Poznámka

It is important to select the country where you live or where you are located
as it determines the time zone that will be configured for the installed
system.

If you selected a combination of language and country for which no locale is
defined and there exist multiple locales for the language, then the installer
will allow you to choose which of those locales you prefer as the default
locale for the installed system^[7]. In all other cases a default locale will
be selected based on the selected language and country.

Všechna prostředí automaticky používají jako výchozí kódování UTF-8.

Instalujete-li s nízkou prioritou otázek, bude vám nabídnuta možnost výběru
dodatečných prostředí (nezávislých na předchozí volbě jazyka a umístění) a také
možnost instalace zastaralých prostředí^[8]. Jestliže vyberete více prostředí,
budete ještě dotázáni, které z nich se má použít jako výchozí.

6.3.1.3. Výběr klávesnice

Klávesnice bývají obvykle přizpůsobeny znakům používaným v daném jazyce.
Vyberte klávesnici, která odpovídá vašemu národnímu rozložení, nebo je alespoň
velmi podobná. Po skončení instalace si můžete vybrat vhodné klávesové
rozložení z mnohem většího spektra (jako uživatel root spusťte příkaz 
dpkg-reconfigure keyboard-configuration).

Šipkami přesuňte kurzor na vybrané klávesové rozložení a stiskněte Enter.
(Šipky by měly být na všech klávesnicích na stejném místě, takže jsou nezávislé
na zvoleném rozložení.)

6.3.1.4. Hledání instalačního ISO obrazu

Při instalaci metodou hd-media nastane okamžik, kdy budete muset instalační
program navést k ISO obrazu instalačního systému Debianu, na kterém se nachází
zbytek instalačních souborů. Abyste obraz nemuseli hledat ručně, pomůže vám s
tímto úkolem komponenta iso-scan.

iso-scan nejprve připojí všechna bloková zařízení (např. diskové oblasti), na
kterých se nachází známý souborový systém a poté na nich hledá soubory končící
příponou .iso (resp. .ISO). Po nalezení každého iso obrazu si iso-scan
zkontroluje jeho obsah a zjistí, zda se jedná o planý obraz instalačního CD.
Pokud ano, máme vyhráno a instalace může pokračovat. V opačném případě se hledá
další obraz. Pokud toto hledání neuspěje, ještě není vše ztraceno. První pokus
totiž kvůli rychlosti prohledává pouze kořenový adresář a první úroveň jeho
podadresářů. Tzn. nalezne /cokoliv.iso, /data/cokoliv.iso, ale ne /data/tmp/
cokoliv.iso.

Selhalo-li tedy první hledání, iso-scan se zeptá, zda chcete spustit
důkladnější proces. Tento druhý pokus se nedívá pouze do nejvyšších adresářů,
ale opravdu prohledá celý disk.

Pokud iso-scan neuspěje ani na druhý pokus, vraťte se zpět do původního
operačního systému a zkontrolujte, zda má soubor správnou příponu (končící na
.iso), zda je umístěn na souborovém systému, který umí debian-installer
rozpoznat a zda není iso obraz poškozený (zkontrolujte kontrolní součet).
Zkušenější unixoví uživatelé mohou vše provést bez restartu počítače na druhé
konzoli.

Note that the partition (or disk) hosting the ISO image can't be reused during
the installation process as it will be in use by the installer. To work-around
this, and provided that you have enough system memory, the installer can copy
the ISO image into RAM before mounting it. This is controlled by the low
priority iso-scan/copy_iso_to_ram debconf question (it is only asked if the
memory requirement is met).

6.3.1.5. Nastavení sítě

Pokud na začátku toho kroku instalátor zjistí, že máte více síťových rozhraní,
budete si muset vybrat jedno, které použijete jako hlavní, tj. to, ze kterého
budete instalovat. Zbylá rozhraní zůstanou nenastavena a budete je muset
nastavit po skončení instalace ručně -- viz manuálová stránka interfaces(5).

6.3.1.5.1. Automatické nastavení sítě

Implicitně se debian-installer snaží nastavit síť automaticky přes DHCP. Pokud
DHCP uspěje, vše je nastaveno. Jestliže DHCP skončí s chybou, může být příčina
téměř kdekoliv -- od vypojeného síťového kabelu až po špatně nastaveného DHCP
démona. Také je možné, že na místní síti vůbec DHCP server nemáte. K
přesnějšímu určení problému možná pomohou chybové hlášky na čtvrté konzoli. Ať
už je chyba kdekoliv, budete dotázáni, zda chcete znovu zkusit DHCP, nebo zda
nastavíte síť ručně. DHCP servery jsou někdy docela pomalé, takže pokud jste si
jisti, že vše ostatní je v pořádku, klidně to zkuste znovu. Jestliže
automatické nastavení selhává opakovaně, zvolte ruční nastavení sítě.

6.3.1.5.2. Ruční nastavení sítě

Při ručním nastavení sítě vás netcfg vyzve k zadání údajů z 3.3 - "Dále budete
potřebovat" (IP adresa, Síťová maska, Brána, Adresy jmenných serverů a Název
počítače). Pokud k instalaci používáte bezdrátové připojení, budete dotázáni
ještě na Bezdrátové ESSID (název bezdrátové sítě) a WEP klíč nebo přístupovou
frázi WPA/WPA2.

Poznámka

Pár technických poznámek: program předpokládá, že adresa vaší sítě je bitovým
součinem IP adresy a síťové masky. Výchozí vysílací adresu spočítá jako bitový
součet IP adresy systému a bitového doplňku síťové masky. Program se také
pokusí odhadnout adresu brány. Pokud některý údaj nebudete znát, ponechte u něj
přednastavenou hodnotu. Konfiguraci můžete na nainstalovaném systému upravit v
souboru /etc/network/interfaces.

6.3.1.5.3. IPv4 a IPv6

debian-installer od verze 7.0 ("Wheezy") podporuje kromě "tradičního" síťového
protokolu IPv4 též protokol IPv6. Podporovány jsou všechny kombinace: samotné
IPv4, samotné IPv6, i smíšené nastavení.

Automatické nastavení sítě se v případě IPv4 děje prostřednictvím DHCP (Dynamic
Host Configuration Protocol). Automatické nastavení IPv6 podporuje bezstavové
nastavení pomocí NDP (Neighbor Discovery Protocol - včetně přiřazení
rekurzivního DNS serveru (RDNSS)), stavové nastavení přes DHCPv6 i smíšené
stavové/bezstavové nastavení (přiřazení adresy přes NDP, získání dalších
parametrů přes DHCPv6).

6.3.2. Nastavení uživatelů a hesel

Těsně před nastavením hodin vám instalační systém umožní nastavit účet "root" a
/nebo účet pro prvního uživatele. Další uživatelské účty můžete vytvořit po
dokončení instalace.

6.3.2.1. Nastavení rootova hesla

Účet root je účtem pro superuživatele, na kterého se nevztahují bezpečnostní
omezení. Měli byste ho používat pouze, když provádíte správu systému, a jen na
dobu nezbytně nutnou.

Uživatelská hesla by měla být sestavena z alespoň 6 písmen, obsahovat malá a
velká písmena včetně dalších znaků (jako ; . ,). Speciální pozornost věnujte
výběru hesla pro roota, protože je to velmi mocný účet. Vyhněte se slovům ze
slovníků, jménům oblíbených postav, jakýmkoliv osobním údajům, prostě
čemukoliv, co se dá lehce uhodnout.

Jestliže vám někdo bude tvrdit, že potřebuje heslo vašeho rootovského účtu,
buďte velice ostražití. V žádném případě byste neměli toto heslo prozrazovat!
Jedině snad, že daný stroj spravuje více spolu-administrátorů.

Jestliže heslo pro uživatele root nezadáte, bude tento účet neaktivní. Aby bylo
možné nový systém spravovat, později se při instalaci automaticky nainstaluje
nástroj sudo, pomocí kterého bude moci první vytvořený uživatel získat
oprávnění uživatele root.

6.3.2.2. Vytvoření uživatelského účtu

Systém se zeptá, zda nyní chcete vytvořit uživatelský účet. (Účet je právo k
používání počítače, tvoří ho jméno uživatele a jeho heslo). Tento účet byste
měli používat ke každodenní práci. Jak již bylo řečeno, nepoužívejte účet
superuživatele pro běžné úkoly.

Proč ne? Případná chyba by mohla mít katastrofické důsledky a dokonce by si
mohla vyžádat novou instalaci systému. Dalším důvodem je možnost, že vám může
být nastrčen program nazývaný trojský kůň, který zneužije práv, jež jako root
máte, a naruší bezpečnost vašeho systému. Kvalitní knihy o administraci
unixového operačního systému vám jistě podrobněji osvětlí danou problematiku.
Jestliže v Unixu začínáte, uvažte četbu na toto téma.

Postupně budete požádáni o zadání celého jména uživatele, jména uživatelského
účtu a hesla. Jméno uživatelského účtu si můžete vybrat zcela libovolně.
Například, pokud se jmenujete Jan Novák, vytvořte si nový účet jan, jnovak nebo
jn.

Pokud budete chtít vytvořit další účet, můžete to udělat kdykoliv po skončení
instalace programem adduser.

6.3.3. Nastavení hodin a časového pásma

Instalační systém se nejprve pokusí získat přesný čas z některého časového
serveru na Internetu (protokolem NTP).Pokud se to nepovede, bude
debian-installer předpokládat, že čas získaný ze systémových hodin při zavádění
instalace je správný. Během instalace není možné nastavit čas ručně.

Podle země vybrané na začátku instalace se může zobrazit seznam časových pásem
dostupných v daném místě. Existuje-li pro zadané místo pouze jediné časové
pásmo, otázka se nezobrazí.

Instalujete-li v expertním režimu, nebo pokud snížíte prioritu otázek na
střední, budete moci navíc zvolit časové pásmo UTC (Univerzální koordinovaný
čas).

Pokud z nějakého důvodu chcete pro instalovaný systém použít časové pásmo,
které neodpovídá zvolenému místu, máte dvě možnosti.

 1. Nejjednodušší možností je počkat s výběrem jiného časové pásma až po
    dokončení instalace. V nainstalovaném systému pak stačí spustit příkaz:

    # dpkg-reconfigure tzdata

 2. Alternativně můžete zadat časové pásmo na úplném začátku instalace přidáním
    zaváděcího parametru time/zone=hodnota, kde hodnota by mělo být platné
    časové pásmo, například Europe/Prague nebo UTC.

Pro automatizované instalace můžete požadované časové pásmo nastavit také
pomocí přednastavení (viz dodatek B - "Automatizování instalací pomocí
přednastavení", přesněji část B.4.6 - "Nastavení hodin a časového pásma").

6.3.4. Rozdělení disku a výběr přípojných bodů

Nyní, po posledním rozpoznávání hardwaru, by již měl být debian-installer v
plné síle, přizpůsoben podle uživatelských požadavků a připraven na opravdovou
práci. Jak praví název této části, bude se několik následujících komponent
zabývat rozdělením disků, vytvořením souborových systémů, přiřazením přípojných
bodů a volitelně nastavením souvisejících záležitostí, jako jsou LVM, RAID a
šifrovaná zařízení.

Nyní nastal čas rozdělit pevné disky. Pokud se při dělení disků zrovna necítíte
silní v kramflecích, nebo pokud chcete o rozdělování disků dozvědět více,
podívejte se do dodatku C - "Poznámky k rozdělování disku".

Nejprve vám bude nabídnuta možnost automaticky rozdělit buď celý disk, nebo
dostupné volné místo na disku. Tato volba se někdy nazývá "asistované"
rozdělení, protože do dělení můžete sami zasáhnout. Pokud nechcete využít
automatické dělení disku, zvolte z nabídky Ručně.

6.3.4.1. Podporované možnosti dělení disků

Nástroj pro dělení disků v debian-installeru je poměrně všestranný. Umožňuje
vytvářet mnoho různých schémat dělení disků, používat různé tabulky oblastí,
souborové systémy a pokročilá bloková zařízení.

Konkrétní dostupné možnosti závisí převážně na architektuře instalovaného
počítače, ale také na dalších faktorech, jako je velikost operační paměti (při
nedostatku operační paměti nemusí být některé možnosti k dispozici). Lišit se
mohou také výchozí hodnoty. Například typ tabulky rozdělení disku může být
různý pro menší a větší disky. Některé možnosti je možno změnit jen při
instalaci se střední nebo nízkou prioritou otázek. Při vyšších prioritách se
použijí výchozí hodnoty.

Instalační systém umožňuje použít různé druhy pokročilého dělení disku a
zajímavých úložných zařízení, často i kombinovaně.

  • Logical Volume Management (LVM)

  • Softwarový RAID

    Podporovány jsou RAID úrovně 0, 1, 4, 5, 6 a 10.

  • Šifrování

  • Serial ATA RAID (pomocí dmraid)

    Taktéž nazývaný "falešný RAID" nebo "BIOS RAID". Podpora pro Serial ATA
    RAID je dostupná pouze pokud ji povolíte při zavádění instalačního systému.
    Více informací naleznete na naší Wiki.

  • Multipath (experimentální)

    Podpora pro multipath je dostupná pouze pokud ji povolíte při zavádění
    instalačního systému. Více informací naleznete na naší Wiki.

Podporovány jsou následující souborové systémy.

  • ext2, ext3, ext4

    Výchozí souborový systém je ve většině případů ext4. Při použití
    automatického dělení se pro /boot oblast implicitně použije ext2.

  • jfs (není dostupný na všech architekturách)

  • xfs (není dostupný na všech architekturách)

  • reiserfs (volitelný, není dostupný na všech architekturách)

    Podpora pro souborový systém Reiser již není dostupná automaticky, ale
    můžete ji povolit při spuštění instalace se střední nebo nízkou úrovní
    otázek tak, že necháte nahrát komponentu partman-reiserfs. Podporována je
    pouze verze 3.

  • qnx4

    Stávající souborové systémy budou rozpoznány a je možné jim přiřadit
    přípojné body, ale není možné vytvářet nové souborové systémy tohoto typu.

  • FAT16, FAT32

  • NTFS (jen pro čtení)

    U stávajících souborových systémů NTFS je možné změnit jejich velikost a je
    možné jim přiřadit přípojné body, ale není možné vytvářet nové souborové
    systémy tohoto typu.

6.3.4.2. Asistované dělení

Zvolíte-li automatické rozdělování, měli byste mít na výběr několik možností:
vytvořit oblasti přímo na disku (klasický způsob), použít Logical Volume
Management (LVM), nebo použít šifrované LVM^[9].

Poznámka

(Šifrované) LVM nemusí být k dispozici na všech architekturách.

When using LVM or encrypted LVM, the installer will create most partitions
inside one big partition; the advantage of this method is that partitions
inside this big partition can be resized relatively easily later. In the case
of encrypted LVM the big partition will not be readable without knowing a
special key phrase, thus providing extra security of your (personal) data.

When using encrypted LVM, the installer will also automatically erase the disk
by writing random data to it. This further improves security (as it makes it
impossible to tell which parts of the disk are in use and also makes sure that
any traces of previous installations are erased), but may take some time
depending on the size of your disk.

Poznámka

If you choose guided partitioning using LVM or encrypted LVM, some changes in
the partition table will need to be written to the selected disk while LVM is
being set up. These changes effectively erase all data that is currently on the
selected hard disk and you will not be able to undo them later. However, the
installer will ask you to confirm these changes before they are written to
disk.

If you choose guided partitioning (either classic or using (encrypted) LVM) for
a whole disk, you will first be asked to select the disk you want to use. Check
that all your disks are listed and, if you have several disks, make sure you
select the correct one. The order they are listed in may differ from what you
are used to. The size of the disks may help to identify them.

Any data on the disk you select will eventually be lost, but you will always be
asked to confirm any changes before they are written to the disk. If you have
selected the classic method of partitioning, you will be able to undo any
changes right until the end; when using (encrypted) LVM this is not possible.

V identifikaci disků může pomoci i jejich velikost. Dále si budete moci vybrat
z několika připravených schémat rozdělení disku (viz tabulka níže). Všechny
možnosti mají svá pro a proti, některé argumenty jsou zmíněny v dodatku C - "
Poznámky k rozdělování disku". Pokud si nejste jisti, zvolte první možnost.
Pamatujte však, že asistované dělení vyžaduje určitou minimální velikost
volného místa, se kterým může pracovat. Nemáte-li k dispozici zhruba 1GB
volného místa (závisí na zvoleném způsobu dělení), asistované dělení selže.

┌─────────────────────────────────────┬──────────────┬────────────────────────┐
│            Způsob dělení            │  Minimální   │   Vytvořené oblasti    │
│                                     │    místo     │                        │
├─────────────────────────────────────┼──────────────┼────────────────────────┤
│Všechny soubory v jedné oblasti      │600MB         │/, swap                 │
├─────────────────────────────────────┼──────────────┼────────────────────────┤
│Samostatná oblast pro /home          │500MB         │/, /home, swap          │
├─────────────────────────────────────┼──────────────┼────────────────────────┤
│Samostatné oblasti pro /home, /var a │1GB           │/, /home, /var, /tmp,   │
│/tmp                                 │              │swap                    │
└─────────────────────────────────────┴──────────────┴────────────────────────┘

Pokud jste zvolili automatické rozdělení pomocí (šifrovaného) LVM, vytvoří se
také malá oblast pro /boot. Ostatní oblasti, včetně odkládací, budou vytvořeny
uvnitř LVM.

Jestliže jste instalaci na architektuře 64-bit PC zavedli v režimu EFI, pak se
při automatickém rozdělení disku vytvoří malá zaváděcí oblast pro zavaděč EFI,
formátovaná souborovým systémem FAT32. Tato oblast je známá jako "EFI System
Partition (ESP)". Při ručním dělení disku přibude ve formátovacím menu položka 
Použít oblast jako: systémová oblast EFI.

Na další obrazovce se zobrazí tabulka rozdělení disku(ů) společně s informacemi
o souborových systémech a přípojných bodech.

Seznam oblastí může vypadat třeba takto:

  SCSI1 (0,0,0) (sda) - 6.4 GB WDC AC36400L
        #1 primární   16.4 MB  B f ext2       /boot
        #2 primární  551.0 MB      swap       swap
        #3 primární    5.8 GB      ntfs
           pri/log     8.2 MB      VOLNÉ MÍSTO

  SCSI2 (1,0,0) (sdb) - 80.0 GB ST380021A
        #1 primární   15.9 MB      ext3
        #2 primární  996.0 MB      fat16
        #3 primární    3.9 GB      xfs        /home
        #5 logická     6.0 GB    f ext4       /
        #6 logická     1.0 GB    f ext3       /var
        #7 logická   498.8 MB      ext3

Jak je vidět, v počítači jsou dva pevné disky rozdělené na několik oblastí.
Každý řádek popisující oblast zobrazuje její pořadí, typ, velikost, volitelné
příznaky, souborový systém a (pokud existuje) přípojný bod. Na prvním disku je
ještě kousek volného místa.

Tímto je automatické rozdělení disků u konce. Pokud jste s navrženým rozdělením
spokojeni, stačí z nabídky vybrat Ukončit rozdělování. V opačném případě můžete
zvolit možnost Vrátit zpět změny provedené na oblastech a znovu spustit
automatické rozdělování, případně podle návodu níže ručně doladit změny v
navrhovaném rozdělení disku.

6.3.4.3. Ruční dělení

Zvolíte-li ruční rozdělení disků, objeví se podobná obrazovka jako o dva
odstavce výše, ale zatím nebude mít přiřazeny přípojné body. Pokud chcete v
tabulce něco změnit, vyberte ze seznamu objekt, který chcete upravit a
stiskněte Enter. Objektem je míněn disk, oblast nebo volné místo. S každým
objektem můžete provádět různé akce.

Jestliže vyberete dosud nedotčený disk, na kterém nejsou ani oblasti ani volné
místo, bude vám nabídnuta možnost vytvoření nové tabulky oblastí (to je nutné k
tomu, abyste mohli vytvářet oblasti). Po této akci se pod vybraným diskem
zobrazí řádka nadepsaná "VOLNÉ MÍSTO".

Vyberete-li volné místo, partman vám nabídne vytvoření nové oblasti. Nejprve
musíte odpovědět několik základních otázek jako velikost nové oblasti, typ
(primární nebo logická) a umístění (na začátku nebo na konci volného místa).
Poté se zobrazí detailní pohled na novou oblast. Naleznete zde položky jako
přípojný bod, volby připojení, zaváděcí příznak nebo způsob použití. Pokud vám
nevyhovují přednastavené hodnoty, můžete je upravit dle libosti. Nejdůležitější
volbou Použít jako: můžete změnit souborový systém dané oblasti včetně možnosti
použít oblast jako odkládací prostor, softwarový RAID, LVM nebo ji nepoužít
vůbec. Až budete s oblastí spokojeni, vyberte položku Skončit s nastavováním
oblasti, což vás vrátí zpět do hlavní obrazovky rozdělování disků.

Pokud se rozhodnete, že chcete něco změnit na stávající oblasti, jednoduše ji
vyberte a stiskněte Enter. Ocitnete se ve stejné obrazovce jako při vytváření
nové oblasti a tedy máte i stejné možnosti nastavení. Jedna věc, která nemusí
být na první pohled zcela zřejmá je fakt, že u většiny oblastí můžete změnit
jejich velikost - stačí vybrat položku, která zobrazuje velikost oblasti. Změna
velikosti by měla fungovat minimálně se souborovými systémy fat16, fat32, ext2,
ext3 a swap. Pokud se vám oblast nelíbí, můžete ji z tohoto menu i smazat.

Be sure to create at least two partitions: one for the root filesystem (which
must be mounted as /) and one for swap. If you forget to mount the root
filesystem, partman won't let you continue until you correct this issue.

Pokud zavedete instalaci v režimu EFI, ale zapomenete vytvořit a nastavit
systémovou oblast EFI, partman to zjistí a dokud vše nespravíte, nenechá vás
pokračovat.

partman samotný je poměrně malý a hloupý program, avšak jeho schopnosti mohou
být rozšiřovány moduly instalačního programu. Pokud tedy nevidíte všechny
slibované vlastnosti, přesvědčte se, že máte nahrány příslušné moduly (např.
partman-ext3, partman-xfs nebo partman-lvm) a že jsou tyto podporovány vaší
architekturou.

Až budete s rozdělením disků hotovi, vyberte z nabídky Ukončit rozdělování a
zapsat změny na disk. Zobrazí se seznam provedených změn a budete požádáni o
potvrzení, zda opravdu chcete vytvořit nové souborové systémy.

6.3.4.4. Nastavení vícediskových zařízení (Softwarový RAID)

If you have more than one harddrive^[10] in your computer, you can use 
partman-md to set up your drives for increased performance and/or better
reliability of your data. The result is called Multidisk Device (or after its
most famous variant software RAID).

Jednoduše řečeno je MD množina oblastí umístěných na různých discích. Tyto
oblasti se v mdcfg spojí dohromady a vytvoří logické zařízení. Toto zařízení
pak můžete používat jako běžnou oblast (například v partmanu ji můžete
zformátovat, přiřadit jí přípojný bod atd.).

Co vám tato operace přinese, závisí na typu vícediskového zařízení, které
vytváříte. Momentálně jsou podporovány:

RAID0

    Je hlavně zaměřen na rychlost. RAID0 rozdělí všechna příchozí data na
    proužky (stripes) a ty pak rovnoměrně rozmístí na každý disk v poli. To
    může zvýšit rychlost čtení a zápisu, ovšem pokud jeden z disků odejde do
    věčných lovišť, odejdou s ním všechna data (část informace je stále na
    zdravém disku (discích), zbývající část byla na vadném disku).

    Typicky se RAID0 používá pro oblast na stříhání videa.

RAID1

    Je vhodný systémy, kde je spolehlivost na prvním místě. Skládá se z
    několika (obvykle dvou) stejně velkých oblastí, kde každá oblast obsahuje
    naprosto shodná data. Prakticky to znamená tři věci. Za prvé, pokud jeden z
    disků selže, stále máte data zrcadlena na zbývajících discích. Za druhé, k
    dispozici máte pouze část celkové kapacity (přesněji to je velikost
    nejmenší oblasti v poli). Za třetí, pokud se vyskytne větší počet požadavků
    na čtení, mohou se tyto rovnoměrně rozdělit mezi jednotlivé disky, což může
    přinést zajímavé zrychlení u serverů, kde převažují čtecí operace na
    zápisovými.

    Volitelně můžete mít v poli rezervní disk, který se normálně nevyužívá a v
    případě výpadku jednoho z disků okamžitě nahradí jeho místo.

RAID5

    Je rozumným kompromisem mezi rychlostí, spolehlivostí a redundancí dat.
    RAID5, podobně jako RAID0, rozdělí všechna příchozí data na proužky a poté
    je rovnoměrně rozmístí na disky v poli. Oproti RAID0 je zde však podstatný
    rozdíl v tom, že se samotná data zapisují pouze na n - 1 disků. Zbývající n
    . disk nezahálí, ale zapíše se na něj paritní informace. Paritní disk není
    statický (to by se pak jednalo o RAID4), ale pravidelně se posouvá tak, aby
    byly paritní informace rozmístěny rovnoměrně na všech discích v poli. V
    případě výpadku jednoho z disků se může chybějící informace dopočítat ze
    zbývajících dat a jejich parity. RAID5 se musí skládat z alespoň tří
    aktivních zařízení. Volitelně můžete mít v poli rezervní disk, který se
    normálně nevyužívá a v případě výpadku jednoho z disků okamžitě nahradí
    jeho místo.

    Jak je vidět, RAID5 nabízí podobný stupeň spolehlivosti jako RAID1, ovšem
    dosahuje menší míry redundance dat. Čtecí operace budou stejně rychlé jako
    na RAID0, ovšem zápis bude mírně pomalejší kvůli počítání paritních
    informací.

RAID6

    Je podobný jako RAID5, ale používá pro paritní informace dva disky, což
    vede k tomu, že přežije výpadek dvou disků.

RAID10

    RAID10 kombinuje proužky (RAID0) se zrcadlením (RAID1). Vytvoří n kopií
    příchozích dat a rozmístí je po discích tak, že se žádná z kopií nenachází
    na stejném zařízení. Výchozí hodnota n je 2, ale v expertním režimu můžete
    zvolit jinou hodnotu. Počet použitých oblastí musí být nejméně n. RAID10 má
    pro rozmísťování kopií bloků několik algoritmů. Výchozí jsou "blízké kopie"
    , které ukládají kopie bloku na různá zařízení na stejnou pozici. Další
    možností jsou "vzdálené kopie", které ukládají kopie bloků na různá
    zařízení na zcela jinou pozici. Poslední "offsetové kopie" nekopírují
    jednotlivé kopie, ale celé proužky.

    RAID10 se dá použít pro dosažení spolehlivosti a redundance bez nutnosti
    počítat paritu.

Kdybychom měli shrnout podstatné vlastnosti:

┌──────┬─────────┬─────────┬────────────┬─────────────────────────────────────┐
│      │Minimálně│Rezervní │  Přežije   │                                     │
│ Typ  │zařízení │zařízení │  výpadek   │           Dostupné místo            │
│      │         │         │   disku?   │                                     │
├──────┼─────────┼─────────┼────────────┼─────────────────────────────────────┤
│RAID0 │2        │ne       │ne          │velikost nejmenšího zařízení krát    │
│      │         │         │            │počet aktivních zařízení v in RAIDu  │
├──────┼─────────┼─────────┼────────────┼─────────────────────────────────────┤
│RAID1 │2        │volitelně│ano         │velikost nejmenšího zařízení v RAIDu │
├──────┼─────────┼─────────┼────────────┼─────────────────────────────────────┤
│RAID5 │3        │volitelně│ano         │velikost nejmenšího zařízení krát    │
│      │         │         │            │(počet akt. zařízení v RAIDu - 1)    │
├──────┼─────────┼─────────┼────────────┼─────────────────────────────────────┤
│RAID6 │4        │volitelně│ano         │velikost nejmenšího zařízení krát    │
│      │         │         │            │(počet akt. zařízení v RAIDu - 2)    │
├──────┼─────────┼─────────┼────────────┼─────────────────────────────────────┤
│RAID10│2        │volitelně│ano         │součet všech oblastí děleno počet    │
│      │         │         │            │kopií (standardně dvě)               │
└──────┴─────────┴─────────┴────────────┴─────────────────────────────────────┘

Chcete-li se o Softwarovém RAIDu dozvědět více, rozhodně se podívejte na
Software RAID HOWTO.

Pro vytvoření vícediskového zařízení musí být oblasti, ze kterých se má
zařízení skládat, označeny pro použití v RAIDu. (To se provádí v partmanu v
menu Nastavení oblasti, kde byste měli nastavit položku Použít jako: na hodnotu
fyzický svazek pro RAID.)

Poznámka

Make sure that the system can be booted with the partitioning scheme you are
planning. In general it will be necessary to create a separate file system for
/boot when using RAID for the root (/) file system. Most boot loaders 
(including grub) do support mirrored (not striped!) RAID1, so using for example
RAID5 for / and RAID1 for /boot can be an option.

Next, you should choose Configure software RAID from the main partman menu.
(The menu will only appear after you mark at least one partition for use as 
physical volume for RAID.) On the first screen of partman-md simply select 
Create MD device. You will be presented with a list of supported types of MD
devices, from which you should choose one (e.g. RAID1). What follows depends on
the type of MD you selected.

  • RAID0 je velmi jednoduchý -- vaším jediným úkolem je vybrat z nabídnutého
    seznamu RAIDových oblastí ty, které budou tvořit pole.

  • RAID1 je trošku složitější. Nejprve musíte zadat počet aktivních a počet
    rezervních zařízení (oblastí), které budou tvořit RAID. Dále musíte ze
    seznamu dostupných RAIDových oblastí vybrat ty, které mají být aktivní a
    poté ty, které mají být rezervní. Počty vybraných oblastí se musí rovnat
    číslům, která jste zadali před chvílí. Pokud uděláte chybu a vyberete jiný
    počet oblastí, nic se neděje -- debian-installer vás nenechá pokračovat,
    dokud vše nespravíte.

  • RAID5 se nastavuje stejně jako RAID1 s drobnou výjimkou -- musíte použít
    nejméně tři aktivní zařízení.

  • RAID6 se nastavuje stejně jako RAID1 s drobnou výjimkou -- musíte použít
    nejméně čtyři aktivní zařízení.

  • Základní nastavení RAID10 je stejné jako u RAID1. V expertním režimu
    debian-installeru budete navíc dotázáni na na rozložení pole. Rozložení se
    skládá ze dvou částí. První část určuje typ rozložení, druhá pak počet
    kopií každého bloku dat. Typ rozložení může být n (pro blízké kopie), f
    (pro vzdálené kopie) nebo o (pro offsetové kopie). Počet kopií musí být
    menší nebo roven počtu zařízení, aby bylo zaručeno, že se každá kopie
    zapíše na jiné zařízení.

Poznamenejme, že můžete používat více typů vícediskových zařízení najednou.
Například pokud máte pro MD vyhrazeny tři 200 GB pevné disky a na každém máte
dvě 100 GB oblasti, můžete z prvních oblastí všech disků sestavit pole RAID0
(rychlá 300 GB oblast pro střih videa) a ze zbývajících tří oblastí (2 aktivní
a 1 rezervní) sestavit RAID1 (rozumně spolehlivá 100 GB oblast pro domovské
adresáře uživatelů).

Až nastavíte vícedisková zařízení podle chuti, můžete ukončit partman-md a
vrátit se tak do partmanu, kde těmto zařízením přiřadíte obvyklé atributy jako
souborové systémy a přípojné body.

6.3.4.5. Nastavení manažera logických svazků (LVM)

Pracujete-li s počítači na pozici správce systému nebo pokročilého uživatele,
jistě jste zažili situaci, kdy na jedné (zpravidla velmi důležité) oblasti
docházelo volné místo, zatímco jiná oblast jej měla nadbytek. Zpravidla pak
nastoupilo mazání, přesouvání a propojování adresářů přes symbolické odkazy.

Abyste do budoucna předešli popsané situaci, můžete použít manažer logických
svazků (Logical Volume Manager). Co takový manažer dělá? Jednoduše řečeno,
spojí diskové oblasti (v žargonu LVM se nazývají fyzické svazky) do virtuálního
disku (tzv. skupina svazků), který pak můžete rozdělit na virtuální oblasti (
logické svazky). Jak se tyto virtuální oblasti liší od těch fyzických, na
kterých jsou vybudovány? Pointa je v tom, že logické svazky (a samozřejmě pod
nimi ležící skupiny svazků) se mohou rozprostírat přes několik fyzických disků.

Například nyní, když si všimnete, že potřebujete více místa na starší 160
gigabajtové oblasti s domovskými adresáři, můžete jednoduše dokoupit nový 300GB
disk, připojit jej ke stávající skupině svazků a rozšířit logický svazek, který
slouží jako oblast pro /home. Výsledkem bude jedna velká, 460 gigabajtová
oblast, která uživatelům zase chvíli vystačí. Popsaný příklad je samozřejmě
hodně zjednodušený, ale pěkně nastiňuje využití LVM v praxi. Pokud jste jej
ještě nečetli, měli byste si projít LVM HOWTO.

Nastavení LVM v instalačním programu Debianu je poměrně jednoduché a plně
integrované do partmanu. Nejprve musíte označit fyzické oblasti, které mají být
spravovány přes LVM. To se provádí v menu Nastavení oblasti, kde byste měli
nastavit položku Použít jako: na hodnotu fyzický svazek pro LVM.

Varování

Be aware: the new LVM setup will destroy all data on all partitions marked with
an LVM type code. So, if you already have an LVM on some of your disks, and
want to install Debian additionally to that machine, the old (already existing)
LVM will be wiped out! The same counts for partitions, which are (for any
reason) misleadingly marked with an LVM type code, but contain something
different (like an encrypted volume). You need to remove such disks from the
system, before performing a new LVM setup!

Po návratu na hlavní obrazovku partmanu uvidíte nové menu Nastavit manažer
logických svazků (LVM). Po jeho výběru budete nejprve dotázáni, abyste
potvrdili všechny dosud neprovedené změny v tabulce oblastí (pokud takové
existují) a vzápětí se objeví konfigurační menu LVM, nad kterým je zobrazen
krátký přehled současného nastavení. Menu samotné je kontextově závislé a
zobrazuje pouze akce použitelné v daný okamžik. Mezi dostupné akce patří:

  • Zobrazit podrobné nastavení, což zobrazí strukturu LVM zařízení včetně jmen
    a velikostí fyzických svazků, logických svazků a samozřejmě skupin svazků.

  • Vytvořit skupinu svazků z dosud nevyužitých fyzických svazků.

  • Zrušit skupinu svazků a uvolnit tak fyzické svazky, ze kterých se skupina
    skládá.

  • Rozšířit skupinu svazků o nevyužité fyzické svazky.

  • Zmenšit skupinu svazků o některé fyzické svazky a tudíž je dát k dispozici
    jiným skupinám, nebo z nich v partmanu udělat "běžné" oblasti.

  • Vytvořit logický svazek z volného místa ve skupině svazků.

  • Zrušit logický svazek ve skupině svazků.

  • Skončit, čímž se vrátíte zpět do hlavního rozdělovacího menu.

Use the options in that menu to first create a volume group and then create
your logical volumes inside it.

After you return to the main partman screen, any created logical volumes will
be displayed in the same way as ordinary partitions (and you should treat them
as such).

6.3.4.6. Nastavení šifrovaných svazků

debian-installer umožňuje nastavit šifrované oblasti. Každý soubor, který na
takovou oblast zapíšete, je na disk zapsán v šifrované podobě. Přístup k
šifrovaným datům je povolen pouze po zadání přístupové fráze, kterou si zvolíte
při vytváření šifrované oblasti. Takto můžete chránit citlivá data v případě,
že někdo ukradne váš přenosný počítač nebo pevný disk. Zloděj sice získá
fyzický přístup k pevnému disku, ale bez znalosti přístupové fráze budou
šifrovaná data na disku vypadat jako změť náhodných znaků.

The two most important partitions to encrypt are: the home partition, where
your private data resides, and the swap partition, where sensitive data might
be stored temporarily during operation. Of course, nothing prevents you from
encrypting any other partitions that might be of interest. For example /var
where database servers, mail servers or print servers store their data, or /tmp
which is used by various programs to store potentially interesting temporary
files. Some people may even want to encrypt their whole system. Generally the
only exception here is the /boot partition which must remain unencrypted,
because historically there was no way to load the kernel from an encrypted
partition. (GRUB is now able to do that, but debian-installer currently lacks
native support for encrypted /boot. The setup is therefore covered in a
separate document.)

Poznámka

Rychlost čtení/zápisu ze šifrovaných oblastí bude o něco nižší než rychlost na
nešifrovaných oblastech, protože se data musí odšifrovat/zašifrovat při každém
čtení a zápisu. Konkrétní vliv na rychlost závisí na výkonu procesoru, zvolené
šifře a délce klíče.

Abyste mohli využívat šifrování, musíte vybrat stávající oblast, což může být
běžná oblast, logický svazek LVM nebo svazek RAID. (Pokud ještě oblast
neexistuje, musíte ji nejprve vytvořit z dostupného volného místa.) V menu pro
nastavení oblasti nastavte možnost Použít jako: na hodnotu fyzický svazek pro
šifrování. Zbytek menu se poté změní a bude obsahovat několik kryptografických
nastavení pro danou oblast.

debian-installer podporuje šifrování pomocí dm-crypt (součástí novějších
linuxových jader, schopný hostit fyzické svazky pro LVM).

Podívejme na možnosti, které jsou k dispozici, pro šifrování přes Device-mapper
(dm-crypt). Pokud jste na pochybách, ponechejte výchozí hodnoty, protože byly
zvoleny s ohledem na bezpečnost. Neuvážená kombinace voleb může způsobit nízkou
kvalitu šifrování, které tak vytváří pouze falešný pocit bezpečí.

Šifrování: aes

    Touto volbou můžete vybrat šifrovací algoritmus (šifru), jež se použije pro
    šifrování dat na dané oblasti. debian-installer nyní podporuje tyto šifry:
    aes, blowfish, serpent a twofish. Kvalita jednotlivých šifer přesahuje
    záběr této příručky, nicméně vám v rozhodování může pomoci informace, že v
    roce 2000 byla šifra AES zvolena americkým úřadem pro standardizaci jako
    standardní šifrovací algoritmus pro ochranu citlivých dat v 21. století.

Velikost klíče: 256

    Zde můžete zadat délku šifrovacího klíče. Obvykle platí, že čím delší klíč,
    tím větší odolnost šifry proti útokům. Na druhou stranu také delší klíč
    většinou znamená menší výkon (výjimkou jsou třeba šifry blowfish a
    twofish). Dostupné velikosti klíče se liší v závislosti na konkrétní šifře.

Algoritmus IV: xts-plain64

    Inicializační vektor nebo též algoritmus IV se používá v kryptografii pro
    zajištění, že aplikováním šifry na stejný nezašifrovaný text za použití
    stejného klíče vždy dostaneme jiný šifrovaný text. Cílem je zabránit
    útočníkovi v odvození informací na základě opakujících se vzorků v
    šifrovaných datech.

    Z nabízených alternativ je xts-plain64 momentálně nejméně zranitelný
    vzhledem ke známým útokům. Ostatní možnosti používejte pouze v případě, kdy
    potřebujete zaručit zpětnou kompatibilitu s dříve instalovaným systémem,
    který neumí používat novější algoritmy.

Šifrovací klíč: Přístupová fráze

    Zde si můžete zvolit typ šifrovacího klíče pro tuto oblast.

    Přístupová fráze

        Šifrovací klíč bude vypočítán^[11] na základě textové fráze, kterou
        zadáte později.

    Náhodný klíč

        Nový šifrovací klíč bude vytvořen z náhodných dat pokaždé, když se
        pokusíte tuto šifrovanou oblast použít poprvé od startu systému. Jinými
        slovy po každém vypnutí/restartu systému bude obsah oblasti ztracen,
        protože se klíč z oblasti smaže. (Samozřejmě že se můžete pokusit
        uhádnout klíč hrubou silou, ale pokud v šifrovacím algoritmu není
        nějaká neznámá slabina, během našeho života se to nepodaří.)

        Náhodné klíče se hodí pro odkládací oblasti, protože se pak nemusíte
        trápit s pamatováním další přístupové fráze, nebo s ručním mazáním dat
        z odkládací oblasti před každým vypnutím počítače. Na druhou stranu to
        také znamená, že nebudete moci využít vlastnost "uspání na disk", která
        je součástí novějších linuxových jader, protože při následujícím startu
        nebude možno obnovit obsah operační paměti, který byl odložen fo
        odkládací oblasti.

Smazat data: ano

    Určuje, zda se má před samotným zašifrováním oblasti přepsat její obsah
    náhodnými znaky. Je doporučeno tuto možnost povolit, protože jinak by mohl
    útočník rozpoznat, které části oblasti se používají a které ne. Kromě toho
    tím ztížíte vydolování dat, která mohla v oblasti zůstat po předchozí
    instalaci^[12].

Po výběru požadovaných parametrů vaší šifrované oblasti se vraťte zpět do
hlavního rozdělovacího menu, kde by měla nově přibýt položka nazvaná Nastavit
šifrované svazky. Po jejím výběru budete požádáni o povolení smazat data na
oblastech, které jste dříve označili pro smazání. U větších oblastí může mazání
dat trvat poměrně dlouho.

Dále budete dotázáni na zadání přístupové fráze (pokud ji používáte). Dobrá
fráze by měla být delší než 8 znaků, měla by se skládat z písmen, číslic a
dalších znaků a neměla by obsahovat běžná slova ze slovníku nebo informace,
které se s vámi dají lehce spojit (jako narozeniny, záliby, jména mazlíčků,
jména členů rodiny nebo příbuzných, apod.).

Varování

Než budete zadávat samotnou frázi, měli byste se ujistit, že je klávesnice
nastavená správně a že generuje očekávané znaky. Může se totiž stát, že se
během instalace přepnete do jiného klávesového rozložení, než budete mít k
dispozici v nově nainstalovaném systému. Doporučujeme si již dříve vyzkoušet
různé klávesy v nějakém textovém poli, případně se přepnout na druhou virtuální
konzoli a napsat něco do příkazového řádku.

Pokud jste zvolili vytvoření šifrovacího klíče z náhodných dat, bude nyní
vytvořen. Protože během této časné fáze instalace ještě nemusí mít jádro
nasbíráno dostatek entropie, bude proces trvat hodně dlouho. Proces můžete
urychlit vytvořením nějaké entropie, například mačkáním náhodných kláves, nebo
přepnutím do shellu na druhé virtuální konzoli a vytvořením síťového či
diskového provozu (stahováním nějakých souborů, kopírování velkých dat do /dev/
null, apod.).

To bude zopakováno pro každou oblast označenou pro šifrování. Po návratu do
hlavního rozdělovacího menu uvidíte všechny šifrované svazky jako další
oblasti, které můžete nastavit úplně stejně jako běžné oblasti. Následující
příklad ukazuje svazek zašifrovaný pomocí dm-crypt.

Šifrovaný svazek (sda2_crypt) - 115.1 GB Linux device-mapper
     #1 115.1 GB  F ext3

Nyní je čas přiřadit svazkům přípojné body a případně změnit ostatní parametry,
pokud vám nevyhovují (souborový systém, rezervované bloky, atd.).

Jedna věc, kterou byste si zde měli poznačit do budoucna, jsou kombinace
identifikátorů v závorkách (v tomto příkladu sda2_crypt) a přípojných bodů,
které jsou ke každému šifrovanému svazku připojeny. Tato informace se vám bude
hodit později, až budete zavádět svůj nový systém. Rozdíly mezi běžným
zaváděním systému a zaváděním se šifrovanými svazky bude včas popsáno v
kapitole 7.2 - "Připojení zašifrovaných svazků".

Až budete s rozdělením disku spokojeni, můžete pokračovat v instalaci.

6.3.5. Instalace základního systému

Přestože je tato část nejméně problematická, zabere dosti času, protože musí
stáhnout, ověřit a rozbalit celý základní systém. Pokud máte pomalý počítač a/
nebo síťové připojení, může to chvíli trvat.

Během instalace základního systému jsou hlášky o rozbalování a nastavování
balíků přesměrovány na třetí virtuální konzoli tty4. Můžete se na ni přepnout
klávesami Levý Alt+F4, zpět se dostanete kombinací Levý Alt+F1.

Tyto jsou hlášky jsou také uloženy do souboru /var/log/syslog, což se může
hodit v případě, že instalujete systém přes sériovou konzoli.

Během instalace se nainstaluje i jádro Linux. Při standardní prioritě vám
debian-installer vybere jádro, které nejvíce odpovídá vašemu hardwaru. Při
nižších prioritách si budete moci sami vybrat ze seznamu dostupných jader.

Při instalaci balíků se automaticky nainstalují také balíky, které jsou
instalovanými balíku doporučovány. Doporučené balíky nejsou pro funčnost
zvoleného software striktně vyžadovány, nicméně nějakým způsobem rozšiřují jeho
funkcionalitu a v očích správců balíků by se měly instalovat společně.

Poznámka

Z technických důvodů se balíky instalované jako součást základního systému
instalují bez doporučených balíků. Pravidlo popsané výše tedy začíná platit až
po instalaci základního systému.

6.3.6. Instalace dodatečného softwaru

V tento okamžik máte sice použitelný, nicméně poněkud omezený systém. Většina
uživatelů si bude chtít do systému doinstalovat další software a upravit tak
systém svým potřebám, s čímž vám instalátor ochotně pomůže. Jestliže máte
pomalejší počítač nebo síťové připojení, může tento krok trvat ještě déle než
instalace základního systému.

6.3.6.1. Nastavení apt

One of the tools used to install packages on a Debian GNU/Linux system is the
program apt, from the apt package^[13]. Other front-ends for package
management, like aptitude and synaptic, are also in use. These front-ends are
recommended for new users, since they integrate some additional features
(package searching and status checks) in a nice user interface.

apt must be configured so that it knows from where to retrieve packages. The
results of this configuration are written to the file /etc/apt/sources.list.
You can examine and edit this file to your liking after the installation is
complete.

Instalujete-li s výchozí prioritou otázek, instalátor nastaví většinu věcí
automaticky na základě typu instalace (síťová, CD/DVD) a dříve zodpovězených
otázek. Jestliže jste například zavedli instalaci ze sítě, zvolili jako výchozí
jazyk češtinu a neměnili nastavení zrcadla, použije se pravděpodobně síťový
zdroj ftp.cz.debian.org. Ve většině případů se automaticky přidá zrcadlo s
bezpečnostními aktualizacemi a v případě stabilní verze distribuce také archiv
služby "stable-updates", která poskytuje novější verze rychle se měnících
balíků, jako jsou vzory a pravidla pro antivirové a antispamové programy.

Při instalaci s nižší prioritou otázek (např. v expertním režimu) můžete
rozhodovat o více nastaveních. Můžete si sami vybrat, zda budete používat
bezpečnostní aktualizace a službu stable-updates a také zda chcete mít
přístupné balíky ze sekcí "contrib" a "non-free".

6.3.6.1.1. Installing from more than one CD or DVD image

If you are installing from a CD or DVD image that is part of a larger set, the
installer will ask if you want to scan additional installation media. If you
have such additional media available, you probably want to do this so the
installer can use the packages included on them.

If you do not have any additional media, that is no problem: using them is not
required. If you also do not use a network mirror (as explained in the next
section), it can mean that not all packages belonging to the tasks you select
in the next step of the installation can be installed.

Poznámka

Packages are included on CD and DVD images in the order of their popularity.
This means that for most uses only the first image of a set is needed and that
only very few people actually use any of the packages included on the last
images of a set.

It also means that buying or downloading and burning a full CD set is just a
waste of money as you'll never use most of them. In most cases you are better
off getting only the first 3 to 8 CDs and installing any additional packages
you may need from the Internet by using a mirror. The same goes for DVD sets:
the first DVD, or maybe the first two DVDs will cover most needs.

If you do scan multiple installation media, the installer will prompt you to
exchange them when it needs packages from one that isn't currently in the
drive. Note that only discs that belong to the same set should be scanned. The
order in which they are scanned does not really matter, but scanning them in
ascending order will reduce the chance of mistakes.

6.3.6.1.2. Používání síťového zrcadla

Jednou z otázek, která se zobrazí téměř ve všech případech, je použití síťového
zrcadla. Většinou stačí použít výchozí možnost, ale existuje několik výjimek.

If you are not installing from a full CD/DVD image, you really should use a
network mirror as otherwise you will end up with only a very minimal system.
However, if you have a limited Internet connection it is best not to select the
desktop task in the next step of the installation.

If you are installing from a single full CD image, using a network mirror is
not required, but is still strongly recommended because a single CD image
contains only a fairly limited number of packages. If you have a limited
Internet connection it may still be best to not select a network mirror here,
but to finish the installation using only what's available on the CD image and
selectively install additional packages after the installation (i.e. after you
have rebooted into the new system).

If you are installing from DVD, any packages needed during the installation
should be present on the first DVD image. Use of a network mirror is optional.

One advantage of adding a network mirror is that updates, that have occurred
since the CD/DVD images were created and have been included in a point release,
will become available for installation, thus extending the life of your CD/DVD
set without compromising the security or stability of the installed system.

In summary: selecting a network mirror is generally a good idea, except if you
do not have a good Internet connection. If the current version of a package is
available from installation media, the installer will always use that. The
amount of data that will be downloaded if you do select a mirror thus depends
on

 1. the tasks you select in the next step of the installation,

 2. which packages are needed for those tasks,

 3. which of those packages are present on the installation media you have
    scanned, and

 4. whether any updated versions of packages included on the installation media
    are available from a mirror (either a regular package mirror, or a mirror
    for security or stable-updates).

Poslední bod znamená, že i když použití zrcadla zakážete, je možné, že se z
Internetu stáhnou balíky, ve kterých byla nalezena bezpečnostní chyba, nebo pro
které existuje novější verze na službě "stable-updates" (za předpokladu, že
jste použití těchto služeb také nezakázali).

6.3.6.1.3. Výběr síťového zrcadla

Unless you chose not to use a network mirror, you will be presented with a list
of network mirrors based upon your country selection earlier in the
installation process. Choosing the offered default is usually fine.

The offered default is deb.debian.org, which is not a mirror itself but will
redirect to a mirror that should be up-to-date and fast. These mirrors support
TLS (https protocol) and IPv6. This service is maintained by the Debian System
Administration (DSA) team.

A mirror can also be specified by hand by choosing "enter information manually"
. You can then specify a mirror host name and an optional port number. This
actually has to be a URL base, i.e. when specifying an IPv6 address, one has to
add square brackets around it, for instance "[2001:db8::1]".

If your computer is on an IPv6-only network (which is probably not the case for
the vast majority of users), using the default mirror for your country might
not work. All the mirrors in the list are reachable via IPv4, but only some of
them can be used via IPv6. As connectivity of individual mirrors can change
over time, this information is not available in the installer. If there is no
IPv6 connectivity for the default mirror for your country, you can either try
some of the other mirrors offered to you or choose the "enter information
manually" option. You can then specify "ftp.ipv6.debian.org" as the mirror
name, which is an alias for a mirror available via IPv6, although it will
probably not be the fastest possible one.

6.3.6.2. Výběr a instalace softwaru

Během instalace vám bude nabídnuta možnost nainstalovat si další software. V
této fázi sice máte k dispozici 87573 dostupných balíků, ale protože jen jejich
projití zabere hodně (tím myslíme opravdu hodně) času, nabízí debian-installer
instalaci připravených softwarových úloh, které umožní rychlé přizpůsobení
počítače pro danou úlohu.

These tasks loosely represent a number of different jobs or things you want to
do with your computer, such as "Desktop environment", "Web server", or "SSH
server"^[14]. D.2 - "Místo potřebné pro úlohy" lists the space requirements for
the available tasks.

Podle odhadnutého typu počítače mohou být některé úlohy předvybrány. (Např.
pokud si debian-installer myslí, že instalujete notebook, předvybere úlohu "
Notebook".) Nesouhlasíte-li s výběrem, můžete nechtěné úlohy zase odebrat.
Dokonce nemusíte instalovat žádnou úlohu.

Tip

Ve výchozím prostředí instalačního systému se úlohy (od)vybírají klávesou 
mezera.

Poznámka

The "Desktop environment" task will install a graphical desktop environment.

Úloha "Desktopové prostředí" nainstaluje výchozí grafické desktopové prostředí 
Gnome.Preferujete-li jiné prostředí, můžete je zvolit jako alternativní úlohu
přímo během instalace. Dokonce je možné vybrat několik prostředí najednou, ale
u některých kombinací není zaručeno, že se instalace podaří.

Note that this will only work if the packages needed for the desired desktop
environment are actually available. If you are installing using a single full
CD image, they will possibly need to be downloaded from a network mirror as
they might not be available on the CD image due to its limited amount of space.
Installing any of the available desktop environments this way should work fine
if you are using a DVD image or any other installation method.

The various server tasks will install software roughly as follows. Web server:
apache2; SSH server: openssh.

Úloha "Standardní systém" nainstaluje všechny balíky s prioritou "standardní".
To zahrnuje spoustu běžných nástrojů, které se obvykle nachází na každém
linuxovém nebo unixovém systému. Pokud zrovna nestavíte minimalistický systém a
pokud přesně nevíte, co děláte, měli byste tuto úlohu ponechat vybranou.

Jestliže jste při výběru jazyka zvolili jakoukoliv jinou možnost než "C", 
tasksel nyní zkontroluje, zda pro zvolený jazyk/místní prostředí neexistuje
lokalizační úloha a automaticky se ji pokusí nainstalovat. Lokalizační úlohy
typicky obsahují balíky se slovníky a fonty vhodnými pro daný jazyk. Pokud jste
zvolili i úlohu "Desktopové prostředí", mohou se doinstalovat další lokalizační
balíky (pokud jsou dostupné).

Once you've selected your tasks, select Pokračovat. At this point, apt will
install the packages that are part of the selected tasks. If a particular
program needs more information from the user, it will prompt you during this
process.

You should be aware that especially the Desktop task is very large. Especially
when installing from a normal CD-ROM in combination with a mirror for packages
not on the CD-ROM, the installer may want to retrieve a lot of packages over
the network. If you have a relatively slow Internet connection, this can take a
long time. There is no option to cancel the installation of packages once it
has started.

Even when packages are included on the CD-ROM, the installer may still retrieve
them from the mirror if the version available on the mirror is more recent than
the one included on the CD-ROM. If you are installing the stable distribution,
this can happen after a point release (an update of the original stable
release); if you are installing the testing distribution this will happen if
you are using an older image.

6.3.7. Nastavení zavádění systému

Pokud instalujete bezdiskovou stanici, zavádění systému z lokálního disku
evidentně nebude nejsmysluplnější volba - tento krok přeskočte.

6.3.7.1. Nalezení ostatních operačních systémů

Před instalací zavaděče se debian-installer pokusí vyhledat jiné operační
systémy instalované na počítači. Pokud nějaké najde, budete o tom informováni
během instalace zavaděče a počítač bude nastaven tak, aby kromě Debianu zaváděl
i nalezené operační systémy.

Zavádění více operačních systémů na jednom počítači je stále něco jako černá
magie. Kvalita automatického rozpoznávání operačních systémů a následné
nastavení zavaděče se liší na jednotlivých architekturách a dokonce i na jejich
podarchitekturách. Pokud něco nebude fungovat, měli byste si dobře prostudovat
dokumentaci použitého zavaděče.

6.3.7.2. Install the Grub Boot Loader on the drive

The amd64 boot loader is called "grub". Grub is a flexible and robust boot
loader and a good default choice for new users and old hands alike.

By default, grub will be installed on the UEFI partition/the Boot Record of the
primary drive, where it will take over complete control of the boot process. If
you prefer, you can install it elsewhere. See the grub manual for complete
information.

Nechcete-li grub instalovat, použijte tlačítko Jít zpět, což vás vrátí do
hlavního menu. Zde si můžete vybrat, který zavaděč chcete použít.

6.3.7.3. Pokračovat bez zavaděče

Pomocí této komponenty můžete získat zaveditelný systém, i když se
nenainstaluje žádný zavaděč -- ať už proto, že na této architektuře žádný
neexistuje, nebo proto, že jej nechcete nainstalovat (třeba chcete použít
stávající zavaděč).

V tomto okamžiku je vhodné prozkoumat obsah adresáře /target/boot a poznačit si
název jádra a případného ramdisku (initrd), protože je budete muset sdělit
svému zavaděči spolu s dalšími důležitými informacemi, jako je oblast s
kořenovým souborovým systémem a oblast pro /boot (pokud máte /boot na
samostatné oblasti).

6.3.8. Dokončení instalace

Toto jsou poslední drobnosti, které je třeba vykonat před zavedením nového
systému. Většina práce spočívá v uklizení po debian-installeru.

6.3.8.1. Nastavení systémových hodin

debian-installer se může zeptat, zda jsou hardwarové hodiny počítače nastaveny
na univerzální časové pásmo (UTC). Systém se snaží odpověď odhadnout například
podle nalezených operačních systémů.

Při expertní instalaci se otázka zobrazí vždy. Jestli budou na počítači i
Windows nebo DOS, možnost hardwarových hodin v UTC zamítněte, protože zmíněné
systémy s touto možností pracovat neumí.

V tento okamžik se debian-installer pokusí uložit aktuální čas do hardwarových
hodin počítače. V závislosti na předchozí odpovědi bude čas uložen buď v UTC
nebo v místním čase.

6.3.8.2. Dokončení instalace a restart do nového systému

You will be prompted to remove the boot media (CD, USB stick, etc) that you
used to boot the installer. After that the system will be rebooted into your
new Debian system.

6.3.9. Řešení problémů

Následující komponenty se obvykle do instalačního procesu nezapojují, ale tiše
čekají v pozadí, aby vám pomohly v případě, že se něco pokazí.

6.3.9.1. Uložení záznamů o instalaci

Pokud byla instalace úspěšná, budou záznamy vytvořené během instalace uloženy v
novém systému v adresáři /var/log/installer/.

Choosing Save debug logs from the main menu allows you to save the log files to
a USB stick, network, hard disk, or other media. This can be useful if you
encounter fatal problems during the installation and wish to study the logs on
another system or attach them to an installation report.

6.3.9.2. Používání shellu a prohlížení logů

Shell můžete během instalace získat několika způsoby. Pokud zrovna
neinstalujete přes sériovou konzoli, je nejjednodušší se přepnout na druhou 
virtuální konzoli klávesami Levý Alt+F2 (na macintoshí klávesnici Option+F2),
kde běží samostatný klon Bourne shellu nazvaný ash. Zpět do instalátoru se
dostanete klávesovou zkratkou Levý Alt+F1.

Používáte-li grafický instalátor, podívejte se též na kapitolu 6.1.1 -
"Používání grafického instalátoru".

Pokud se nemůžete přepínat mezi virtuálními konzolami, můžete shell spustit z
hlavního menu příkazem Spustit shell. Po vykonání potřebných příkazů se zpět do
menu vrátíte příkazem exit.

V tomto okamžiku běží systém z RAMdisku a nabízí několik základních unixových
nástrojů. Seznam dostupných programů můžete zjistit příkazy ls /bin /sbin /usr/
bin /usr/sbin a help. Shell má některé příjemné vlastnosti svých větších
bratříčků, jako je historie a automatické doplňování příkazů.

To edit and view files, use the text editor nano. Log files for the
installation system can be found in the /var/log directory.

Poznámka

Although you can do basically anything in a shell that the available commands
allow you to do, the option to use a shell is really only there in case
something goes wrong and for debugging.

Doing things manually from the shell may interfere with the installation
process and result in errors or an incomplete installation. In particular, you
should always use let the installer activate your swap partition and not do
this yourself from a shell.

6.3.10. Installation over network-console

Jednou ze zajímavějších komponent je network-console, která vám umožní provádět
větší část instalace vzdáleně přes SSH. Použití sítě naznačuje, že budete muset
provést několik prvních kroků instalace (minimálně po nastavení sítě) lokálně a
teprve pak pokračovat vzdáleně. Lokální část však můžete automatizovat použitím
4.6 - "Automatická Instalace".)

This component is not loaded into the main installation menu by default, so you
have to explicitly ask for it. If you are installing from optical media, you
need to boot with medium priority or otherwise invoke the main installation
menu and choose Load installer components from installation media and from the
list of additional components select network-console: Continue installation
remotely using SSH. Successful load is indicated by a new menu entry called 
Continue installation remotely using SSH.

Po výběru této nové položky budete požádáni o zadání nového hesla, které se
použije pro připojení do instalovaného systému. Následuje rutinní potvrzení
hesla, zda bylo zadáno správně. Toť vše. Nyní uvidíte obrazovku s nápovědou,
která říká, že se máte vzdáleně připojit k systému jako uživatel installer s
heslem, které jste právě zadali. Další důležitá věc na obrazovce je
kryptografický otisk tohoto systému. Tento otisk musíte zabezpečeně předat
osobě, která bude v instalaci pokračovat vzdáleně.

Pokud byste se náhodou rozhodli pokračovat v instalaci lokálně, můžete vždycky
stisknout Enter, což vás vrátí zpět do hlavního menu, kde můžete vybrat další
krok.

Nyní se přepojme na druhý konec drátu. Nejprve byste se měli ujistit, že máte
terminál přepnutý do kódování UTF-8, protože jej používá instalační systém.
Pokud tak neučiníte, vzdálenou instalaci by to nemělo nijak ovlivnit, ale je
pravděpodobné, že uvidíte na displeji různé artefakty jako porušené rámečky
dialogových oken a rozsypaný čaj z písmen, které nespadají do sedmibitového
ASCII. Pro navázání spojení stačí napsat:

$ ssh -l installer instalovany_pocitac

kde instalovany_pocitac je buď jméno nebo IP adresa instalovaného počítače.
Před samotným přihlášením se zobrazí kryptografický otisk vzdáleného systému,
který budete muset potvrdit, zda je správný.

Poznámka

ssh server v instalačním systému používá výchozí nastavení, které neposílá
pakety pro udržování spojení. Teoreticky to ničemu nevadí, ale prakticky se
může stát, že se po určité době neaktivity spojení rozpadne. Typickým příkladem
může být překlad adres (NAT) někde po cestě mezi klientem a instalovaným
systémem. Opětovné připojení a pokračování v instalace se může, ale nemusí
podařit -- závisí na kroku instalace, ve kterém se spojení přerušilo.

Rozpadávání spojení můžete předejít tak, že při spuštění ssh klienta použijete
parametr -o ServerAliveInterval=hodnota, případně že tento parametr zadáte do
konfiguračního souboru ssh. Mějte však na paměti, že v některých případech může
právě tento parametr způsobit rozpadávání spojení (například pokud se udržovací
paket odešle během krátkodobého výpadku sítě, který by jinak ssh ustálo).

Poznámka

Instalujete-li postupně několik počítačů, které mají stejnou IP adresu nebo
jméno, ssh se odmítne k takovému počítači připojit. Důvodem je odlišný
kryptografický otisk, což obvykle indikuje útok, kdy se záškodník vydává za
cílový počítač. Pokud jste si jisti, že to není tento případ, budete muset ze
souboru ~/.ssh/known_hosts smazat příslušný řádek^[15] a připojení zopakovat.

Po přihlášení vám bude nabídnuta úvodní obrazovka, kde můžete volit mezi
možností Spustit menu a Spustit shell. První možnost vás přenese do hlavního
instalačního menu, kde můžete pokračovat v instalaci obvyklým způsobem. Druhá
možnost spustí shell, ve kterém můžete zkoumat a případně opravit vzdálený
systém. Přestože počet SSH spojení do instalovaného systému není omezen, měli
byste mít pouze jedno spojení, kterým ovládáte instalaci (na rozdíl od shellů,
kterých si můžete spustit dle libosti).

Varování

Po zahájení vzdálené instalace byste se již neměli vracet zpět k lokální
instalaci, protože by to mohlo porušit databázi, ve které je uloženo nastavení
nového systému, což by následně vedlo k nefunkční instalaci nebo k problémům v
novém systému.

6.4. Nahrání chybějícího firmwaru

Jak je zmíněno v 2.2 - "Ovladače vyžadující firmware", některá zařízení
vyžadují pro svou práci kromě ovladače zařízení také firmware. Ve většině
případů znamená chybějící firmware nefunkční zařízení. Existují však výjimky,
kdy zařízení bez firmwaru funguje alespoň v základním režimu a firmware je
potřeba až pro povolení speciálních vlastností.

Pokud ovladač zařízení vyžaduje firmware, který není k dispozici,
debian-installer nabídne jeho nahrání z výměnných médií. Budete-li souhlasit,
debian-installer prozkoumá dostupná zařízení, na kterých hledá buď samotné
soubory s firmwarem, nebo balíky obsahující firmware. Je-li firmware nalezen,
nakopíruje se do /lib/firmware a příslušný modul je znovu zaveden.

Poznámka

Which devices are scanned and which file systems are supported depends on the
architecture, the installation method and the stage of the installation.
Especially during the early stages of the installation, loading the firmware is
most likely to succeed from a FAT-formatted USB stick. On i386 and amd64
firmware can also be loaded from an MMC or SD card.

Pokud víte, že zařízení není pro instalaci potřeba, nebo pokud zařízení funguje
i bez firmwaru, můžete zavedení firmwaru přeskočit.

debian-installer se ptá pouze na firmware vyžadovaný jadernými moduly
používanými během instalace. Například jedním z ovladačů, které
debian-installer během instalace nepoužívá, je modul radeon pro grafické karty
AMD/ATI. To znamená, že se pro některý hardware nenahraje firmware a takový
hardware pak nemusí být využíván naplno. Pokud máte podezření, že to je váš
případ, zkontrolujte si v nově zavedeném systému výstup příkazu dmesg a
hledejte řádky obsahující slovo "firmware".

6.4.1. Příprava média

Official installation images do not include non-free firmware. The most common
method to load such firmware is from some removable medium such as a USB stick.
Alternatively, unofficial installation images containing non-free firmware can
be found at https://cdimage.debian.org/cdimage/unofficial/non-free/
cd-including-firmware/. To prepare a USB stick (or other medium like a hard
drive partition), the firmware files or packages must be placed in either the
root directory or a directory named /firmware of the file system on the medium.
The recommended file system to use is FAT as that is most certain to be
supported during the early stages of the installation.

Archivy obsahující nejnovější balíky pro nejběžnější firmware jsou dostupné z:

  • https://cdimage.debian.org/cdimage/unofficial/non-free/firmware/

Stačí stáhnout archiv pro příslušné vydání a rozbalit jej na médium.

Jestliže se požadovaný firmware v archivu nenachází, můžete se zkusit podívat
do sekce non-free. Následující přehled by měl obsahovat většinu dostupných
balíků s firmwarem (nemusí být úplný):

  • https://packages.debian.org/search?keywords=firmware

Na médium je také možné zkopírovat jednotlivé soubory s firmwarem (tzn. ne
balíky). Takovéto soubory můžete obvykle získat z již instalovaného systému,
nebo od dodavatele hardwaru.

6.4.2. Firmware a instalovaný systém

Všechny firmwary, které se zavedou během instalace, se automaticky nakopírují
do instalovaného systému. To by mělo zajistit, že zařízení vyžadující firmware
budou fungovat i po restartu do nového systému. Stále zde však existuje drobné
riziko v případě, kdy nainstalovaný systém používá jinou verzi jádra, než
instalační systém. V takovém případě je možné, že se firmware nepodaří zavést
kvůli rozdílné verzi.

Pokud byl firmware nainstalován z balíku s firmwarem, debian-installer do
instalovaného systému nainstaluje i tento balík a automaticky přidá do
konfiguračního souboru sources.list sekci non-free. Výhodou je to, že se
firmware bude aktualizovat automaticky.

Jestliže jste při instalaci přeskočili možnost nahrání firmwaru, nebude dané
zařízení nejspíš fungovat ani v nainstalovaném systému. Pro jeho zprovoznění
budete muset doinstalovat firmware ručně.

Poznámka

If the firmware was loaded from loose firmware files, the firmware copied to
the installed system will not be automatically updated unless the corresponding
firmware package (if available) is installed after the installation is
completed.

6.4.3. Completing the Installed System

Depending on how the installation was performed, it might be that the need for
some firmware was not detected during installation, that the relevant firmware
was not available, or that one chose not to install some firmware at that time.
In some cases, a successful installation can still end up in a black screen or
a garbled display when rebooting into the installed system. When that happens,
the following workarounds can be tried:

  • Pass the nomodeset option on the kernel command line. This might help boot
    into a "fallback graphics" mode.

  • Use the Ctrl+Alt+F2 key combination to switch to VT2, which might offer a
    functional login prompt.

Once logged in into the installed system, it is possible to automate the
detection of missing firmware, and to perform the required steps to enable them
following this procedure:

 1. Install the isenkram-cli package.

 2. Run the isenkram-autoinstall-firmware command as the "root" user.

Usually, rebooting is the simplest way to make sure all kernel modules are
properly initialized; that's particularly important when one has booted the
system with the nomodeset option as an interim measure.

Poznámka

Installing firmware packages is very likely to require enabling the non-free
section of the package archive. As of Debian GNU/Linux 11.0, running the 
isenkram-autoinstall-firmware command will do that automatically by creating a
dedicated file (/etc/apt/sources.list.d/isenkram-autoinstall-firmware.list),
pointing at a generic mirror.

6.5. Customization

Using the shell (see 6.3.9.2 - "Používání shellu a prohlížení logů"), the
installation process can be carefully customized, to fit exceptional use cases:

6.5.1. Installing an alternative init system

Debian uses systemd as its default init system. However, other init systems
(such as sysvinit and OpenRC) are supported, and the easiest time to select an
alternative init system is during the installation process. For detailed
instructions on how to do so, please see the Init page on the Debian wiki.


━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

^[6] In technical terms: where multiple locales exist for that language with
differing country codes.

^[7] At medium and low priority you can always select your preferred locale
from those available for the selected language (if there's more than one).

^[8] Zastaralá prostředí jsou taková, která nepoužívají UTF-8, ale starší
standardy kódování, jako ISO 8859-2 (používaný ve střední Evropě) nebo EUC-JP
(používaný v Japonsku).

^[9] Instalátor zašifruje skupinu svazků pomocí 256 bitového klíče AES a
využije pro to "dm-crypt", který je součástí linuxového jádra.

^[10] To be honest, you can construct an MD device even from partitions
residing on single physical drive, but that won't give any benefits.

^[11] Použití přístupové fráze jako klíče momentálně znamená, že oblast bude
používat LUKS.

^[12] Obecně se ví, že agenti z třípísmenných agentur umí obnovit data z
magnetooptických médií i po několika přepsáních.

^[13] Note that the program which actually installs the packages is called dpkg
. However, this program is more of a low-level tool. apt is a higher-level
tool, which will invoke dpkg as appropriate. It knows how to retrieve packages
from your installation media, the network, or wherever. It is also able to
automatically install other packages which are required to make the package
you're trying to install work correctly.

^[14] You should know that to present this list, the installer is merely
invoking the tasksel program. It can be run at any time after installation to
install more packages (or remove them), or you can use a more fine-grained tool
such as aptitude. If you are looking for a specific single package, after
installation is complete, simply run aptitude install package, where package is
the name of the package you are looking for.

^[15] Například příkazem ssh-keygen -R <počítač> nebo ssh-keygen -R <IP adr.>.

Kapitola 7. Zavedení vašeho nového systému

Obsah

7.1. Okamžik pravdy
7.2. Připojení zašifrovaných svazků

    7.2.1. Řešení problémů

7.3. Přihlášení do systému

7.1. Okamžik pravdy

Teď přichází chvíle zahoření systému.

If you did a default installation, the first thing you should see when you boot
the system is the menu of the grub bootloader. The first choices in the menu
will be for your new Debian system. If you had any other operating systems on
your computer (like Windows) that were detected by the installation system,
those will be listed lower down in the menu.

Pokud Debian z disku nenaběhne, nepanikařte. Byla-li instalace úspěšná, je
velká šance, že se jedná jen o relativně drobný problém. Ve většině případů je
možné tyto problémy spravit bez opakování celé instalace. Jednou z možností je
použít záchranný režim zabudovaný přímo do instalačního systému (viz část 8.6 -
"Obnovení poškozeného systému").

Jestliže se systémem Debian začínáte, může se vám hodit pomoc zkušenějších
uživatelů. Pro online pomoc můžete zkusit IRC kanály #debian nebo #debian-boot
v síti OFTC, nebo můžete kontaktovat poštovní konferenci debian-user. Dále nám
můžete poslat zprávu o instalaci (viz 5.4.7 - "Pošlete nám zprávu o instalaci"
). Svůj problém popište stručně a jasně a opište z obrazovky všechny hlášky,
které by mohly ostatním pomoci v určení problému.

Pokud na svém počítači máte operační systémy, které nebyly nalezeny, nebo
nebyly rozpoznány správně, pošlete nám prosím zprávu o instalaci.

7.2. Připojení zašifrovaných svazků

Jestliže jste při instalaci vytvořili nějaké šifrované svazky a přiřadili jim
přípojné body, budete během zavádění dotázáni na přístupovou frázi ke každému
takovému svazku.

Pro oblasti zašifrované pomocí dm-crypt uvidíte při zavádění výzvu podobnou
této:

Starting early crypto disks... part_crypt(starting)
Enter LUKS passphrase:

kde oblast je název oblasti, která byla zašifrována. Možná nyní přemýšlíte, pro
který svazek vlastně frázi zadáváte. /home? /var? Samozřejmě pokud máte jen
jediný šifrovaný svazek, tyto pochyby vás trápit nemusí a stačí zadat frázi,
kterou jste použili při vytváření svazku. Pro ostatní se nyní hodí poznámky,
které jste si poznačili jako poslední krok 6.3.4.6 - "Nastavení šifrovaných
svazků". Pokud jste si nepoznačili dvojice oblast_crypt a přípojný bod, můžete
tuto informaci najít v souboru /etc/fstab (a částečně v /etc/crypttab) ve svém
novém systému.

Při připojování kořenového souborového systému může výzva k zadání fráze
vypadat mírně jinak. Vzhled závisí na generátoru, kterým byl initrd vytvořen.
Initrd v následujícím příkladu byl vytvořen nástrojem initramfs-tools:

Begin: Mounting root file system... ...
Begin: Running /scripts/local-top ...
Enter LUKS passphrase:

Během zadávání přístupové fráze se nezobrazují žádné znaky (ani hvězdičky).
Zadáte-li chybnou frázi, máte ještě dva další pokusy. Po třetím pokusu,
zaváděcí proces tento svazek přeskočí a bude pokračovat připojením dalšího
souborového systému. Přeskočený svazek můžete připojit později ručně, viz část
7.2.1 - "Řešení problémů".

Po zadání všech přístupových frází by mělo zavádění pokračovat jako obvykle.

7.2.1. Řešení problémů

Pokud se některé šifrované svazky nepodařilo připojit kvůli chybné přístupové
frázi, budete je muset připojit po zavedení systému ručně. Existuje několik
možností.

  • První případ se zabývá kořenovou oblastí. Pokud se tato nepřipojí, zavádění
    se zastaví a pro další pokus budete muset počítač restartovat.

  • Nejjednodušší případ se týká datových oblastí typu /home nebo /srv. Po
    zavedení je stačí ručně připojit.

    U dm-crypt nejprve musíte zaregistrovat svazky do části jádra nazvané 
    device mapper. Slouží k tomu příkaz

    # /etc/init.d/cryptdisks start

    který prohledá všechny svazky zmíněné v souboru /etc/crypttab a po zadání
    správných přístupových frází vytvoří příslušná zařízení v adresáři /dev.
    (Již zaregistrované svazky budu přeskočeny, takže můžete příkaz spustit bez
    obav i několikrát po sobě.) Po úspěšné registraci můžete svazky připojit
    tradičním

    # mount /pripojny_bod

  • Pokud se nepodařilo připojit svazky obsahující nekritické části systému
    (např. /usr nebo /var), systém by se měl stále zavést a měli byste mít
    možnost připojit svazky ručně stejně jako v předchozím případě. Navíc byste
    ale měli nastartovat (resp. restartovat) služby, které se spouští ve vašem
    výchozím runlevelu, protože je velmi pravděpodobné, že se nespustily.
    Nejjednodušší cestou je asi restart celého počítače.

7.3. Přihlášení do systému

Po zavedení Debianu se setkáte s výzvou k přihlášení do systému (tzv. login
prompt). Přihlaste se pod svým osobním účtem, který jste si vytvořili během
instalace. Systém je připraven k používání.

Pokud jste začínající uživatel, asi si budete chtít prohlédnout dokumentaci
dostupnou v systému. V současné době existuje několik dokumentačních systémů,
ale pracuje se na jejich sjednocení.

Dokumentace vztahující se k instalovaným programům je v adresáři /usr/share/doc
/ v podadresáři se jménem programu (přesněji se jménem balíku). U rozsáhlejší
dokumentace bývá tato zabalena v samostatném balíku, který je většinou potřeba
doinstalovat zvlášť. Například příručku pro použití programu apt naleznete v
balíku apt-doc nebo apt-howto.

/usr/share/doc/ navíc obsahuje několik speciálních adresářů. Například linuxové
návody "jak na to" (HOWTO) jsou v adresáři /usr/share/doc/HOWTO/en-txt/.
Nainstalujete-li balík dhelp, získáte soubor /usr/share/doc/HTML/index.html,
který obsahuje seznam veškeré instalované dokumentace.

Tyto dokumenty můžete jednoduše prohlížet pomocí textového prohlížeče. Zadejte:

$ cd /usr/share/doc/
$ w3m .

Tečka za příkazem w3m říká, že má zobrazit obsah aktuálního adresáře.

Máte-li nainstalované desktopové grafické prostředí, můžete použít v něm
obsažený grafický webový prohlížeč. Spusťte prohlížeč z nabídky aplikací a do
řádku s adresou zadejte /usr/share/doc/.

Dokumentaci k příkazu můžete získat, když napíšete na příkazovém řádku info 
prikaz nebo man prikaz. Zkrácený návod k použití příkazu obvykle získáte, když
za příkaz přidáte parametr --help. Jestliže je výstup delší než obrazovka,
napište na konec příkazu ještě | more (výstup se pak zastaví po každé plné
obrazovce). Všechny příkazy začínající určitým řetězcem zobrazíte tak, že
napíšete řetězec a dvakrát stisknete klávesu Tab. Nápovědu k povelům shellu
získáte příkazem help.

Kapitola 8. Co dál?

Obsah

8.1. Vypínání systému
8.2. Orientace v Debianu

    8.2.1. Balíčkovací systém Debianu
    8.2.2. Další software pro Debian
    8.2.3. Správa různých verzí programů
    8.2.4. Správa Cronu

8.3. Další dokumentace
8.4. Nastavení poštovního systému

    8.4.1. Výchozí nastavení pošty
    8.4.2. Odesílání pošty mimo systém
    8.4.3. Nastavení poštovního serveru Exim4

8.5. Kompilace nového jádra
8.6. Obnovení poškozeného systému

8.1. Vypínání systému

Běžící systém Debian GNU/Linux nesmíte vypínat tlačítkem reset nebo prostým
vytažením napájecí šňůry ze zásuvky. Pokud se operační systém nevypne řízeně,
mohou se soubory na disku ztratit nebo poškodit. Používáte-li desktopové
prostředí, obvykle se v menu vyskytuje položka "Odhlásit", která vám umožní
systém vypnout (případně restartovat).

Na konzoli můžete použít klávesovou kombinaci Ctrl+Alt+Del . Pokud žádná z
předchozích možností nefungovala, můžete se přihlásit jako uživatel root a
zadat příslušný příkaz ručně. Systém restartujete příkazem reboot, zastavíte
příkazem halt (bez vypnutí napájení) a zcela vypnete příkazem poweroff^[16]
nebo shutdown -h now. Nový init systém systemd nabízí podobné příkazy se
stejnou funkcionalitou, a sice systemctl reboot, systemctl halt a systemctl
poweroff.

8.2. Orientace v Debianu

Debian GNU/Linux se od ostatních distribucí mírně odlišuje. Proto i když jste
již s Linuxem nebo jiným unixovým systémem pracovali, pokud si chcete udržet
systém v pořádku, je třeba se seznámit s tím, jak distribuce funguje. Tato
kapitola vám pomůže se v Debianu lépe zorientovat. Opět se jedná pouze o letmý
přehled.

8.2.1. Balíčkovací systém Debianu

Nejdůležitější je pochopit, jak pracuje balíčkovací software, protože systém je
z velké části spravován právě balíčkovacím systémem. Jedná se o adresáře:

  • /usr (vyjma /usr/local)

  • /var (vyjma /var/local)

  • /bin

  • /sbin

  • /lib

Do vyjmenovaných adresářů byste neměli zasahovat, protože byste mohli narušit
informace udržované balíčkovacím systémem a mohlo by to vést až k nefunkčním
aplikacím. Například když nahradíte program /usr/bin/perl, nejspíš bude vše
fungovat, ale s přechodem k novější verzi balíku perl o své úpravy přijdete.
Zkušení uživatelé tomu dokáží zabránit převedením balíku do stavu "hold".

One of the best installation methods is apt. You can use the command line
version of apt as well as tools like aptitude or synaptic (which are just
graphical frontends for apt). Note that apt will also let you merge main,
contrib, and non-free so you can have restricted packages (strictly speaking
not belonging to Debian) as well as packages from Debian GNU/Linux at the same
time.

8.2.2. Další software pro Debian

I když máte po instalaci systému Debian k dispozici oficiální repositáře
balíčků, je možné, že budete potřebovat software, který se v nich nenachází. V
takovém případě se můžete poohlédnout po dalších více či méně oficiálních
repositářích, které mohou daný software obsahovat. Jeden komentovaný seznam
repositářů naleznete Wiki stránce Dostupný software pro Debian (stabilní
vydání)

8.2.3. Správa různých verzí programů

Pokud udržujete více verzí různých aplikací, bude vás zajímat manuálová stránka
příkazu update-alternatives.

8.2.4. Správa Cronu

Všechny periodické úlohy spojené se správou systému by měly být v adresáři /
etc, protože to jsou konfigurační soubory. Pokud spouštíte administrátorské
úlohy denně, týdně, nebo měsíčně, umístěte je do /etc/cron.
{daily,weekly,monthly}. Spouštění těchto úloh je řízeno souborem /etc/crontab.
Úlohy poběží postupně podle abecedního pořadí.

Jestliže však máte speciálnější požadavky (potřebujete úlohu spouštět pod jiným
uživatelem nebo chcete úlohu pouštět v určitém čase nebo intervalu), můžete
použít soubor /etc/crontab, nebo ještě lépe /etc/cron.d/cokoliv. Tyto soubory
mají navíc pole pro jméno uživatele, pod kterým se má úloha spustit.

V obou případech stačí přidat/upravit soubory a cron je automaticky rozpozná a
začne používat -- není potřeba spouštět žádný příkaz. Další informace jsou v
cron(8), crontab(5) a /usr/share/doc/cron/README.Debian.

8.3. Další dokumentace

Webové stránky Debianu sdružují ohromné množství informací. V první řadě se
podívejte do Debian GNU/Linux FAQ a Debian Reference. Seznam další dokumentace
vztahující se k Debianu naleznete na stránkách Debian Documentation Project.
Ohromné množství informací obsahuje také archiv debianích diskusních listů.
Komunita okolo Debianu si navzájem pomáhá (uživatelé uživatelům), takže pokud
se chcete přihlásit k některému z Debianích diskusních listů, podívejte se na
stránku přihlášení do diskusních listů.

Hledáte-li popis nějakého programu, vyzkoušejte nejprve kombinaci man program a
info program.

Užitečné informace najdete v adresáři /usr/share/doc, obzvláště v podadresářích
/usr/share/doc/HOWTO a /usr/share/doc/FAQ. Pokud chcete nahlásit chybu,
přečtěte si soubory /usr/share/doc/debian/bug*. Úpravy, které vývojáři provedli
v distribuovaných programech, jsou zdokumentovány v souborech /usr/share/doc/
(název balíčku)/README.Debian.

Základním zdrojem informací o Linuxu je Linux Documentation Project, kde mimo
jiné naleznete návody HOWTO (jak na to) a odkazy na další dokumenty o
jednotlivých částech systému GNU/Linux.

Linux is an implementation of Unix. The Linux Documentation Project (LDP)
collects a number of HOWTOs and online books relating to Linux.

If you are new to Unix, you probably should go out and buy some books and do
some reading. This list of Unix FAQs contains a number of UseNet documents
which provide a nice historical reference.

8.4. Nastavení poštovního systému

V dnešní době je elektronická pošta důležitou součástí našich životů. Protože
existuje spousty způsobů, jak poštu nastavit, a protože na ni spoléhají některé
nástroje, zkusíme zde pokrýt alespoň základy.

Poštovní systém se skládá ze tří částí. Uživateli nejbližší je klientský
program (MUA), jenž uživatel používá pro čtení a psaní pošty. Dále je zde
poštovní server (MTA), který se stará o přenos pošty mezi různými počítači. A
na závěr je zde doručovací agent (MDA), který se stará o doručení pošty do
uživatelovy schránky. Tyto tři funkce mohou vykonávat samostatné programy, nebo
mohou být sloučeny do dvou, případně jediného programu.

These three functions can be performed by separate programs, but they can also
be combined in one or two programs. It is also possible to have different
programs handle these functions for different types of mail.

On Linux and Unix systems mutt is historically a very popular MUA. Like most
traditional Linux programs it is text based. It is often used in combination
with exim or sendmail as MTA and procmail as MDA.

S rostoucí popularitou grafických desktopových prostředí se začíná používat
více grafických poštovních klientů jako evolution pro prostředí GNOME, kmail
pro prostředí KDE, nebo multiplatformní thunderbird. Tyto programy kombinují
funkce MUA, MTA a MDA dohromady, ale mohou být -- a často jsou -- používány v
kombinaci s tradičními unixovými nástroji.

8.4.1. Výchozí nastavení pošty

Even if you are planning to use a graphical mail program, it would be useful,
to have a traditional MTA/MDA installed and correctly set up on your Debian GNU
/Linux system. Reason is that various utilities running on the system^[17] can
send important notices by e-mail to inform the system administrator of
(potential) problems or changes.

For this you can install exim4 and mutt with apt install exim4 mutt. exim4 is a
combination MTA/MDA that is relatively small but very flexible. By default it
will be configured to only handle e-mail local to the system itself and e-mails
addressed to the system administrator (root account) will be delivered to the
regular user account created during the installation^[18].

Pošta je při doručení přidána do souboru /var/mail/jmeno_uctu. Tuto poštu
můžete číst například programem mutt.

8.4.2. Odesílání pošty mimo systém

Jak bylo zmíněno dříve, po základní instalaci Debianu umí systém zpracovávat
pouze poštu pocházející ze stejného počítače. Odesílání nebo přijímání pošty z
jiných systémů není nastaveno.

Chcete-li, aby exim4 zpracovával i externí poštu, podívejte se na následující
podkapitolu, kde naleznete základní možnosti. Nezapomeňte pak otestovat, zda
odesílání a přijímání pošty funguje bez problému.

Jestliže plánujete používat grafický poštovní program ve spojení s poštovním
serverem vašeho poskytovatele Internetu nebo s poštovním serverem vaší firmy,
není důvod, abyste nastavovali exim4. Stačí nastavit grafický poštovní klient,
aby používal pro přijímání a odesílání správné poštovní servery (konkrétní
nastavení spadá mimo rozsah této příručky).

I při použití grafického poštovního klienta a externího poštovního serveru je
někdy potřeba nastavit některé konkrétní programu pro posílání pošty mimo
systém. Jedním z takových programů je nástroj reportbug, který zajišťuje
odesílání hlášení o chybách v Debianích balících. Ve výchozím nastavení
očekává, že bude pro odesílání chybových hlášení používat exim4.

Abyste reportbug přemluvili, aby používal externí poštovní server, spusťte
příkaz reportbug --configure a na otázku, zda je MTA dostupný, odpovězte "ne".
Poté budete dotázáni na SMTP server, který se má používat pro odesílání
chybových hlášení. Sem vyplňte stejné jméno nebo IP adresu, jakou jste zadali v
konfiguraci grafického poštovního klienta.

8.4.3. Nastavení poštovního serveru Exim4

V případě, že na svém systému chcete zpracovávat i externí poštu, musíte změnit
nastavení balíku exim4^[19]:

# dpkg-reconfigure exim4-config

Po zadání příkazu budete nejprve dotázáni, zda chcete rozdělit konfiguraci do
menších souborů. Pokud si nejste jisti, ponechte výchozí možnost.

Další obrazovka vám nabídne několik typických scénářů použití. Vyberte z nich
ten, který nejvíce odpovídá zamýšlenému použití:

internetový počítač

    Váš systém je připojen k počítačové síti a pošta je odesílána/přijímána
    přímo protokolem SMTP. Na následujících obrazovkách budete dotázáni několik
    základních údajů, jako je poštovní jméno nebo seznam domén, pro které
    chcete přijímat nebo předávat poštu.

odesílání pošty přes chytrý počítač

    Podle tohoto scénáře je veškerá odchozí pošta posílána "chytrému" počítači,
    který ji za vás rozešle. Chytrý počítač také často ukládá vaši příchozí
    poštu, tudíž nemusíte být neustále připojeni. To pak znamená, že poštu
    musíte číst na chytrém počítači, nebo ji z něj stahovat programem typu 
    fetchmail.

    Chytrý počítač obvykle bývá poštovní server vašeho poskytovatele připojení,
    což je obzvláště vhodné pro uživatele s vytáčeným připojením. Jinak to může
    být třeba firemní poštovní server, nebo i jiný počítač na vaší síti.

odesílání pošty přes chytrý počítač; žádná lokální pošta

    Tato volba je v podstatě shodná s předchozí, až na fakt, že systém nebude
    zpracovávat poštu pro lokální poštovní doménu. Zpracovávat se bude pouze
    pošta vzniklá na systému (např. pro systémového správce).

pouze lokální pošta

    This is the option your system is configured for by default.

no configuration at this time

    Tuto možnost vyberte jedině pokud přesně víte, co děláte, protože dokud
    poštovní systém nenastavíte, nebudete moci přijímat a odesílat žádnou poštu
    a můžete tak přijít o důležité zprávy od systémových programů.

If none of these scenarios suits your needs, or if you need a finer grained
setup, you will need to edit configuration files under the /etc/exim4 directory
after the installation is complete. More information about exim4 may be found
under /usr/share/doc/exim4; the file README.Debian.gz has further details about
configuring exim4 and explains where to find additional documentation.

Mějte však na paměti, že pokud nemáte oficiální doménové jméno, tak pošta
odesílaná přímo do Internetu může být protistranou odmítnuta jako ochrana proti
spammerům. Preferováno je posílání pošty přes poštovní server vašeho
poskytovatele připojení. Chcete-li přesto odesílat poštu přímo, možná bude
dobré použít jinou adresu, než tu, která byla vytvořena automaticky. S
poštovním serverem Exim můžete přidat nový záznam do /etc/email-addresses.

8.5. Kompilace nového jádra

Why would someone want to compile a new kernel? It is most probably not
necessary since the default kernel shipped with Debian handles almost all
configurations.

If you want to compile your own kernel nevertheless, this is of course possible
and we recommend the use of the "make deb-pkg" target. For more information
read the Debian Linux Kernel Handbook.

8.6. Obnovení poškozeného systému

Občas se věci pokazí a pečlivě instalovaný systém najednou nejde zavést. Možná
se při změně porušil zavaděč, možná není funkční nově instalované jádro, nebo
možná kosmické záření zasáhlo váš disk a v /sbin/init změnilo nějaký bit.
Pomineme-li příčinu toho, proč je váš systém pokažen, budete potřebovat funkční
systém, ze kterého můžete věci opravit. Jednou z možností je záchranný režim
instalačního systému.

Pro spuštění záchranného režimu vyberte ze zaváděcího menu položku rescue, na
výzvu boot: zadejte rescue, nebo použijte běžnou instalační metodu se zaváděcím
parametrem rescue/enable=true. Nejprve se zobrazí několik prvních obrazovek z
instalace, pouze v rohu obrazovky bude poznámka, že se jedná o záchranný režim.
Nepanikařte, váš stávající systém nebude přepsán. Záchranný režim jednoduše z
instalačního systému využije možnost automatického rozpoznání hardwaru, aby
zajistil, že budete mít při opravách přístup k vašim diskům, síťovým kartám, a
podobným užitečným zařízením.

Namísto nástroje pro dělení disků by se vám měl zobrazit seznam nalezených
oblastí s pobídkou, abyste jednu z oblastí vybrali. Obvykle byste měli vybrat
oblast, na které se nachází kořenový souborový systém, jež chcete opravit.
Kromě běžných "fyzických" oblastí můžete samozřejmě vybírat i oblasti "
virtuální" ležící na softwarovém RAIDu nebo LVM.

Pokud to bude jen trochu možné, instalátor vám nyní nabídne příkazový řádek ve
vybraném souborovém systému, který teď můžete použít pro provedení nezbytných
záchranných prací. Například potřebujete-li přeinstalovat zavaděč GRUB do
hlavního zaváděcího záznamu (MBR) prvního disku, můžete použít příkaz
grub-install '(hd0)'.

Pokud se nepodaří spustit použitelný příkazový řádek ve vybraném kořenovém
souborovém systému, je možné, že je souborový systém porušen. V takovém případě
se zobrazí dialog, který zobrazí varování a nabídne spuštění příkazového řádku
v prostředí instalačního systému. V tomto prostředí se nenachází příliš
nástrojů, ale k základní opravě systému často bohatě postačí. Vybraný kořenový
souborový systém bude připojen do adresáře /target.

V obou případech se po ukončení shellu systém restartuje.

Na závěr mějte na paměti, že oprava poškozených systémů může být obtížná a
popis všech možností, které mohou nastat, je mimo rozsah této příručky. Pokud
máte problémy, obraťte se na specialistu.


━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

^[16] S dřívějším init systémem SysV se příkaz halt choval stejně jako poweroff
, ale s init systémem systemd (výchozí od Debianu 8) se jejich chování změnilo.

^[17] Examples are: cron, quota, logcheck, aide, ...

^[18] The forwarding of mail for root to the regular user account is configured
in /etc/aliases. If no regular user account was created, the mail will of
course be delivered to the root account itself.

^[19] Samozřejmě vám nic nebrání exim4 odstranit a nahradit alternativním MTA/
MDA.

Příloha A. Jak na instalaci

Obsah

A.1. Příprava
A.2. Zavedení instalačního programu

    A.2.1. Optical disc
    A.2.2. USB Memory Stick
    A.2.3. Zavedení ze sítě
    A.2.4. Zavedení z pevného disku

A.3. Instalace
A.4. Pošlete nám zprávu o instalaci
A.5. A na závěr...

Tento dokument popisuje, jak nainstalovat Debian GNU/Linux bullseye pro
architekturu 64-bit PC ("amd64") pomocí nového instalačního programu. Jedná se
o rychlého průvodce instalačním procesem, který by měl pokrýt většinu typických
instalací. V případech, kdy je vhodné sdělit více informací, se odkazujeme do
ostatních částí tohoto dokumentu.

A.1. Příprava

Zaznamenáte-li během instalace nějaké chyby, podívejte se do 5.4.7 - "Pošlete
nám zprávu o instalaci", kde naleznete instrukce, jak je nahlásit. Pokud máte
otázky, na které nemůžete nalézt odpovědi v tomto dokumentu, ptejte se v
diskuzní skupině debian-boot (debian-boot@lists.debian.org) nebo na IRC (kanál
#debian-boot v síti OFTC).

A.2. Zavedení instalačního programu

The debian-cd team provides builds of installation images using
debian-installer on the Debian CD/DVD page. For more information on where to
get installation images, see 4.1 - "Official Debian GNU/Linux installation
images".

Some installation methods require other images than those for optical media.
4.2.1 - "Where to Find Installation Files" explains how to find images on
Debian mirrors.

Následující podkapitoly osvětlují, které obrazy byste měli použít pro který typ
instalace.

A.2.1. Optical disc

The netinst CD image is a popular image which can be used to install bullseye
with the debian-installer. This installation method is intended to boot from
the image and install additional packages over a network; hence the name "
netinst". The image has the software components needed to run the installer and
the base packages to provide a minimal bullseye system. If you'd rather, you
can get a full size CD/DVD image which will not need the network to install.
You only need the first image of such set.

Download whichever type you prefer and burn it to an optical disc. To boot the
disc, you may need to change your BIOS/UEFI configuration, as explained in
3.6.1 - "Invoking the BIOS/UEFI Set-Up Menu".

A.2.2. USB Memory Stick

Instalovat můžete také z výměnných USB zařízení. Například USB klíčenka je
šikovným instalačním zařízením, které můžete nosit stále s sebou a velmi rychle
tak rozšiřovat řady počítačů s Debianem.

The easiest way to prepare your USB memory stick is to download any Debian CD
or DVD image that will fit on it, and write the image directly to the memory
stick. Of course this will destroy anything already on the stick. This works
because Debian CD/DVD images are "isohybrid" images that can boot both from
optical and USB drives.

Funkční klíčenku s instalačním programem lze vyrobit více cestami, z nichž
některé jsou popsány v kapitole 4.3 - "Příprava souborů pro zavedení z USB
zařízení". (Například návod, jak použít klíčenku menší než 256 MB.)

While booting from USB storage is quite common on UEFI systems, this is
somewhat different in the older BIOS world. Some BIOSes can boot USB storage
directly, and some cannot. You may need to configure your BIOS/UEFI to enable "
USB legacy support" or "Legacy support". The boot device selection menu should
show "removable drive" or "USB-HDD" to get it to boot from the USB device. For
helpful hints and details, see 5.1.1 - "Zavedení z USB "klíčenky"".

A.2.3. Zavedení ze sítě

Další z možností, jak zavést debian-installer je pomocí sítě. Konkrétní postup
závisí na vaší architektuře a síťovém prostředí. Obecně budete potřebovat
soubory z adresáře netboot/.

Nejjednodušší cesta je asi přes PXE. Do adresáře /srv/tftp (nebo jiného podle
vašeho tftp serveru) rozbalte soubor netboot/pxeboot.tar.gz. Nastavte DHCP
server, aby klientům předal název souboru pxelinux.0 a s trochou štěstí bude
vše fungovat samo. Podrobnější informace naleznete v kapitole 4.5 - "Příprava
souborů pro zavedení ze sítě pomocí TFTP".

A.2.4. Zavedení z pevného disku

It's possible to boot the installer using no removable media, but just an
existing hard disk, which can have a different OS on it. Download hd-media/
initrd.gz, hd-media/vmlinuz, and a Debian CD/DVD image to the top-level
directory of the hard disk. Make sure that the image has a filename ending in
.iso. Now it's just a matter of booting linux with the initrd. 5.1.5 - "Booting
from Linux using GRUB" explains one way to do it.

A.3. Instalace

Po startu instalačního programu budete uvítáni úvodní obrazovkou. Nyní si
můžete buď přečíst návod pro různé způsoby zavádění (viz 5.3 - "Zaváděcí
parametry"), nebo jednoduše stisknout Enter a zavést instalaci.

Za chvíli budete vyzváni k výběru jazyka, ve kterém má instalace probíhat. Po
seznamu se můžete pohybovat šipkami, pro pokračování stiskněte Enter. Dále
budete dotázáni na výběr země. Pokud není požadovaná země v zobrazené nabídce,
můžete přejít do úplného seznamu zemí světa.

Můžete být vyzváni na potvrzení klávesnicového rozložení. Pokud si nejste
jisti, ponechte výchozí návrh.

Now sit back while debian-installer detects some of your hardware, and loads
the rest of the installation image.

Instalační program se pokusí rozpoznat síťová zařízení a nastavit síťování přes
DHCP. Pokud nejste připojeni k síti, nebo pokud nepoužíváte DHCP, budete mít
možnost nastavit síť ručně.

Setting up the network is followed by the creation of user accounts. By default
you are asked to provide a password for the "root" (administrator) account and
information necessary to create one regular user account. If you do not specify
a password for the "root" user, this account will be disabled but the sudo
package will be installed later to enable administrative tasks to be carried
out on the new system. By default, the first user created on the system will be
allowed to use the sudo command to become root.

Dalším krokem je nastavení hodin a časového pásma. Instalátor se pokusí spojit
s časovým serverem na Internetu a nastavit přesný čas. Časové pásmo je vybráno
automaticky podle země, kterou jste zvolili dříve. Leží-li země v několika
časových pásmech, dostanete na výběr.

Nyní je správný čas pro rozdělení disků. Nejprve vám bude nabídnuta možnost
automaticky rozdělit celý disk nebo dostupné volné místo na disku (viz kapitola
6.3.4.2 - "Asistované dělení"). Toto je doporučený způsob rozdělení disku pro
začátečníky nebo pro lidi ve spěchu. Pokud nechcete využít této možnosti,
vyberte z menu Ruční rozdělení.

Máte-li stávající DOSové nebo windowsové oblasti, které chcete zachovat, buďte
s automatickým dělením velmi opatrní. Pokud vyberete ruční dělení, můžete přímo
v instalačním programu měnit velikost stávajících NTFS a FAT oblastí a vytvořit
tak místo pro Debian; jednoduše vyberte oblast a zadejte její novou velikost.

Na další obrazovce uvidíte svou tabulku oblastí s informacemi o tom, jak budou
oblasti formátovány a kam budou připojeny. Pro změnu nastavení nebo pro smazání
oblasti ji jednoduše vyberte a proveďte požadovanou akci. Pokud jste využili
automatické dělení, mělo by stačit vybrat Ukončit rozdělování a zapsat změny na
disk. Nezapomeňte vytvořit alespoň jednu oblast pro odkládací prostor a
připojit kořenovou oblast na /. Více informací o dělení disku naleznete v
kapitole 6.3.4 - "Rozdělení disku a výběr přípojných bodů", obecnější informace
se nachází v dodatku C - "Poznámky k rozdělování disku".

Nyní debian-installer naformátuje oblasti a zahájí instalaci základního
systému, což může chvíli trvat. Následovat bude instalace jádra.

Základní systém je nyní funkční, avšak značně minimalistický. Další krok vám
tedy umožní doinstalovat další software pomocí předpřipravených úloh. Aby
systém věděl, odkud se mají balíky se softwarem nainstalovat, musí se nejprve
nastavit nástroj apt, který je za instalaci balíků zodpovědný. Ve výchozím
nastavení bude k instalaci vybrána úloha "Standardní systém", která doinstaluje
užitečný software pro textovou konzolu. Jestliže budete chtít nainstalovat
grafické prostředí, zvolte úlohu "Desktopové prostředí". Více o tomto kroku
naleznete v kapitole 6.3.6.2 - "Výběr a instalace softwaru".

The last step is to install a boot loader. If the installer detects other
operating systems on your computer, it will add them to the boot menu and let
you know. By default GRUB will be installed to the UEFI partition/boot record
of the primary drive, which is generally a good choice. You'll be given the
opportunity to override that choice and install it elsewhere.

debian-installer vám oznámí, že instalace skončila. Vyjměte zaváděcí média
(např. CD) a restartujte počítač klávesou Enter. Měl by se spustit váš nově
nainstalovaný systém. Tato část je popsaná v 7 - "Zavedení vašeho nového
systému".

Pokud potřebujete k instalaci více informací, přečtěte si 6 - "Používáme
instalační program Debianu".

A.4. Pošlete nám zprávu o instalaci

Pokud jste zdárně dokončili instalaci Debianu, najděte si chvilku a pošlete nám
o tom krátkou zprávu. Nejjednodušší možností je nainstalovat si balík reportbug
(apt install reportbug), nastavit jej podle 8.4.2 - "Odesílání pošty mimo
systém" a spustit příkaz reportbug installation-reports.

Pokud instalaci nedokončili, pravděpodobně jste narazili na chybu v
debian-installeru. Abychom mohli tuto chybu odstranit a instalátor vylepšit,
potřebujeme o problémech vědět. Najděte si prosím chvilku a nalezené chyby
nahlaste (viz 5.4.6 - "Hlášení problémů s instalací").

A.5. A na závěr...

Doufáme, že se vám instalace Debianu líbí a že shledáváte Debian užitečným.
Nyní byste si možná chtěli přečíst kapitolu 8 - "Co dál?".

Příloha B. Automatizování instalací pomocí přednastavení

Obsah

B.1. Úvod

    B.1.1. Způsoby přednastavení
    B.1.2. Omezení

B.2. Použití

    B.2.1. Nahrání souboru s přednastavením
    B.2.2. Použití zaváděcích parametrů jako formy přednastavení
    B.2.3. Automatický režim
    B.2.4. Užitečné aliasy
    B.2.5. Examples of boot prompt preseeding
    B.2.6. Použití DHCP serveru pro určení souboru s přednastavením

B.3. Vytvoření souboru s přednastavením
B.4. Obsah souboru s přednastavením (pro bullseye)

    B.4.1. Lokalizace
    B.4.2. Nastavení sítě
    B.4.3. Síťová konzole
    B.4.4. Nastavení zrcadla
    B.4.5. Nastavení účtů
    B.4.6. Nastavení hodin a časového pásma
    B.4.7. Rozdělení disku
    B.4.8. Instalace základního systému
    B.4.9. Nastavení APT
    B.4.10. Výběr balíků
    B.4.11. Instalace zavaděče
    B.4.12. Dokončení instalace
    B.4.13. Přednastavení ostatních balíků

B.5. Pokročilé možnosti

    B.5.1. Spouštění vlastních příkazů během instalace
    B.5.2. Použití přednastavení pro změnu výchozích hodnot
    B.5.3. Zřetězené nahrávání souborů s přednastavením

Tento dodatek vysvětluje taje a záludnosti přednastavení odpovědí na otázky
debian-installeru za účelem zautomatizování instalačního procesu.

Útržky konfigurace použité v této části jsou také dostupné jako samostatný
soubor na ../example-preseed.txt.

B.1. Úvod

Přednastavení nabízí možnost předem odpovědět na otázky, které se ptá
instalační program. Díky tomu pak nemusíte do většiny instalací zasahovat a
dokonce můžete využít některých vlastností, které jinak nejsou dostupné.

Přednastavení není povinné. Použijete-li prázdný soubor s odpověďmi, instalace
bude probíhat úplně stejně jako při běžné instalaci. Každá otázka, kterou
přednastavíte, jistým způsobem odchýlí instalaci od standardní cesty.

B.1.1. Způsoby přednastavení

Přednastavení existuje ve třech variantách: initrd, soubor a síť. Initrd
funguje s každým typem instalace, podporuje přednastavení více odpovědí, ovšem
vyžaduje nejvíce příprav. Přednastavení přes lokální soubor nebo přes síť se
používají pro různé typy instalací.

Následující tabulka ukazuje, které způsoby přednastavení fungují s kterými
způsoby instalací.

┌──────────────────────────────────────────────────┬────────┬─────┬─────────┐
│                 Způsob instalace                 │ initrd │file │ network │
├──────────────────────────────────────────────────┼────────┼─────┼─────────┤
│CD/DVD/USB                                        │ano     │ano  │ano^[a]  │
├──────────────────────────────────────────────────┼────────┼─────┼─────────┤
│zavedení ze sítě                                  │ano     │ne   │ano      │
├──────────────────────────────────────────────────┼────────┼─────┼─────────┤
│z pevného disku (včetně usb klíčenky)             │ano     │ano  │ano^[a]  │
├──────────────────────────────────────────────────┴────────┴─────┴─────────┤
│^[a] Ovšem pouze pokud máte přístup k síti a správně nastavíte preseed/url.│
└───────────────────────────────────────────────────────────────────────────┘

An important difference between the preseeding methods is the point at which
the preconfiguration file is loaded and processed. For initrd preseeding this
is right at the start of the installation, before the first question is even
asked. Preseeding from the kernel command line happens just after. It is thus
possible to override configuration set in the initrd by editing the kernel
command line (either in the bootloader configuration or manually at boot time
for bootloaders that allow it). For file preseeding this is after the
installation image has been loaded. For network preseeding it is only after the
network has been configured.

Důležité

Prakticky to znamená, že přednastavení pomocí souboru a sítě se nahraje zobrazí
až po zodpovězení otázek ohledně jazyka, země a klávesnice. (V případě
přednastavení ze sítě navíc až po všech otázkách týkajících se síťového
nastavení.) Instalujete-li se střední nebo nízkou prioritou, do cesty se vám
připletou ještě otázky ohledně rozpoznávání hardwaru. Abyste mohli přednastavit
i otázky, které se zobrazují před nahráním souboru s přednastavením, můžete
využít zaváděcí parametry jádra, viz část B.2.2 - "Použití zaváděcích parametrů
jako formy přednastavení".

Jinou možností, jak se vyhnout otázkám, které se zobrazují před nahráním
souboru s přednastavením, je spustit instalátor v "automatickém" režimu. Tím se
odsunou všechny brzké otázky až za okamžik nahození sítě a navíc se zobrazí jen
otázky s kritickou prioritou, což odfiltruje několik zbytečných otázek.
Podrobnosti naleznete v B.2.3 - "Automatický režim".

B.1.2. Omezení

Přestože takto můžete přednastavit většinu otázek debian-installeru, existuje
několik výjimek. Při dělení disku musíte rozdělit buď celý disk, nebo použít
stávající volné místo -- není možné použít existující oblasti.

B.2. Použití

You will first need to create a preconfiguration file and place it in the
location from where you want to use it. Creating the preconfiguration file is
covered later in this appendix. Putting it in the correct location is fairly
straightforward for network preseeding or if you want to read the file off a
usb-stick. If you want to include the file in an installation ISO image, you
will have to remaster the image. How to get the preconfiguration file included
in the initrd is outside the scope of this document; please consult the
developers' documentation for debian-installer.

Ukázkový soubor s přednastavením, jež můžete využít jako základ pro své pokusy,
naleznete na ../example-preseed.txt. Tento soubor je poskládán z ukázek
prezentovaných v tomto dodatku.

B.2.1. Nahrání souboru s přednastavením

Používáte-li přednastavení z initrd, musíte zajistit, aby se soubor jmenoval
preseed.cfg a aby se nacházel v kořenovém adresáři initrd. O vše ostatní se
postará instalační program. Ten se podívá, zda je soubor přítomen, a pokud ano,
tak jej nahraje.

U zbývajících způsobů přednastavení musíte instalátoru říci, který soubor má
použít. Toho dosáhnete parametrem, který předáte jádru buď ručně při zavádění,
nebo skrze soubor zavaděče (např. syslinux.cfg), kde na konec řádku append
přidáte příslušný parametr.

Pokud to váš zavaděč umožňuje, nemusí být od věci jej nastavit tak, aby nečekal
se zavedením instalačního systému na stisk klávesy Enter, ale aby dále
pokračoval automaticky. V případě syslinuxu to znamená nastavit v souboru
syslinux.cfg parametr timeout na hodnotu 1.

Abyste měli jistotu, že instalátor dostane správný soubor, můžete zadat jeho
kontrolní součet. V současnosti to musí být md5 součet. Pokud zadaný součet a
vypočítaný součet souboru nebudou souhlasit, instalátor odmítne tento soubor
použít.

Boot parameters to specify:
- if you're netbooting:
  preseed/url=http://host/path/to/preseed.cfg
  preseed/url/checksum=5da499872becccfeda2c4872f9171c3d
- or
  preseed/url=tftp://host/path/to/preseed.cfg
  preseed/url/checksum=5da499872becccfeda2c4872f9171c3d

- if you're booting a remastered installation image:
  preseed/file=/cdrom/preseed.cfg
  preseed/file/checksum=5da499872becccfeda2c4872f9171c3d

- if you're installing from USB media (put the preconfiguration file in the
  toplevel directory of the USB stick):
  preseed/file=/hd-media/preseed.cfg
  preseed/file/checksum=5da499872becccfeda2c4872f9171c3d

Pokud zadáte preseed/url nebo preseed/file jako zaváděcí parametr, můžete
použít zkrácenou verzi url, resp. file. Obdobně lze zkrátit preseed/file/
checksum na pouhé preseed-md5.

B.2.2. Použití zaváděcích parametrů jako formy přednastavení

If a preconfiguration file cannot be used to preseed some steps, the install
can still be fully automated, since you can pass preseed values on the command
line when booting the installer.

Boot parameters can also be used if you do not really want to use preseeding,
but just want to provide an answer for a specific question. Some examples where
this can be useful are documented elsewhere in this manual.

Pro nastavení hodnoty libovolné proměnné zmíněné v tomto dodatku stačí zadat
cesta/k/proměnné=hodnota. Jestliže se má hodnota použít k přednastavení balíku
v cílovém systému, musíte předřadit ještě vlastníka^[20] proměnné vlastník:
cesta/k/proměnné=hodnota. Nezadáte-li vlastníka, hodnota proměnné se
nezkopíruje do databáze debconfu v cílovém systému a tudíž zůstane při
konfiguraci daného balíku nevyužita.

Předzodpovězení otázky popsaným způsobem způsobí, že se tato otázka nezobrazí.
Chcete-li otázce přednastavit konkrétní odpověď, ale přesto chcete, aby se
otázka zobrazila, použijte místo "=" operátor "?=". Více též B.5.2 - "Použití
přednastavení pro změnu výchozích hodnot".

Některé často používané proměnné mohou mít i kratší variantu, Pokud je tato
varianta dostupná, upřednostňujeme ji zde před úplnou formou. Konkrétně
proměnnou preseed/url zde zkracujeme na url. Jiným příkladem je alias tasks,
který vlastně znamená tasksel:tasksel/first.

Tři pomlčky "---" mají u zaváděcích parametrů jádra speciální význam. Všechny
parametry nacházející se za posledními pomlčkami budou zkopírovány do
konfigurace zavaděče v instalovaném systému. (Pokud to instalátor pro daný
zavaděč umožňuje.) Parametry, které instalátor rozpozná (např. volby pro
přednastavení), budou automaticky odfiltrovány.

Poznámka

Aktuální jádra (2.6.9 a novější) akceptují nejvýše 32 parametrů a 32 proměnných
prostředí (včetně standardních voleb pro instalační program). Pokud tento limit
překročíte, jádro zpanikaří. (Dřívější jádra měla tyto limity ještě menší.)

Pro většinu instalací můžete celkem bez problémů odstranit implicitní volby
jako vga=normal, což vám umožní přidat další volby pro přednastavení.

Poznámka

V některých případech není možné zadat hodnotu obsahující mezeru, a to i v
případě, kdy hodnotu obklopíte uvozovkami.

B.2.3. Automatický režim

Díky několika pokročilým (někteří říkají zmateným) vlastnostem instalačního
systém Debianu je možné, aby se poměrně jednoduchý zaváděcí parametr rozvinul
do komplexní a na míru upravené automatické instalace.

Zařizuje to zaváděci volba Automated install, na některých architekturách nebo
zavaděčích nazývaná též auto. V této části příručky tedy řetězec auto není
zaváděcím parametrem, ale návěstím zavaděče, které připojí příslušné zaváděcí
parametry. Více o tom, jak přidat zaváděcí parametr, se dočtete v kapitole
5.1.7 - "Zaváděcí obrazovka".

Pro ilustraci uvádíme několik příkladů, které můžete zadat na zaváděcí výzvě.

auto url=autoserver

Toto spoléhá na fakt, že na síti existuje DHCP server, který dostane počítač do
bodu, kdy bude možné přes DNS přeložit jméno autoserver. Pokud DHCP server
poskytnul i název domény, tak se zkusí i varianta, kdy se za název počítače
přidá právě poskytnutá doména. Například pokud je přes DHCP poskytnuta doména
priklad.cz, vyústí to ve stažení souboru s přednastavením z adresy http://
autoserver.priklad.cz/d-i/bullseye/./preseed.cfg.

Poslední část url (d-i/bullseye/./preseed.cfg) pochází z proměnné auto-install/
defaultroot. Proměnná implicitně obsahuje adresář bullseye, aby jste s
příchodem novějších verzí Debianu a nových kódových označení nemigrovali na
nové verze automaticky, ale kontrolovaněji (po explicitním zadání nového
kódového jména). Část /./ indikuje kořen, vůči kterému můžete zadávat relativní
cesty (používá se v preseed/include a preseed/run). To umožňuje zadávat cesty k
souborům jako kompletní URL, cesty začínající na / jsou připojeny ke kořenu,
nebo jako cesty relativní k umístění, kde byl nalezen poslední soubor s
přednastavením. To umožňuje vytvářet přenositelnější skripty, kde můžete
přesouvat celé hierarchie skriptů na nová umístění, aniž by se co pokazilo.
Například můžete na USB klíčenku přesunout soubory, které se dříve používaly na
webovém serveru. Předpokládejme, že je v souboru s přednastavením nastavena
proměnná preseed/run na hodnotu /scripts/late_command.sh. Pak v naší ukázce
bude zmíněný soubor stažen z http://autoserver.priklad.cz/d-i/bullseye/./
scripts/late_command.sh.

Pokud na dané síti není vybudovaná vhodná DHCP a DNS infrastruktura, nebo pokud
nechcete použít výchozí cestu k souboru preseed.cfg, můžete zadat explicitní
URL. Nebude-li URL obsahovat prvek /./, bude automaticky připojen na začátek
cesty, tj. za třetí lomítko URL. Příklad vyžadující jen minimální podporu od
místní síťové infrastruktury:

auto url=http://192.168.1.2/cesta/k/preseed.souboru

Celé to funguje tak, že

  • pokud v URL chybí protokol, předpokládá se http,

  • pokud název počítače neobsahuje tečky, připojí se k němu doména odvozená z
    DHCP a

  • pokud za názvem počítače není žádné lomítko, přidá se výchozí cesta.

Kromě zadávání URL můžete zadat i parametry, které přímo neovlivňují chování
debian-installeru samotného, ale které mohou být předány do skriptů spouštěných
z nahraného souboru s přednastavením pomocí preseed/run. V současnosti to je
pouze auto-install/classes, ve zkrácené verzi classes. Příklad použití:

auto url=autoserver classes=trida_A;trida_B

Třídy mohou například označovat typ systému, který se má instalovat, nebo
jazykové prostředí, které se má nastavit.

Tento koncept je možné dále rozšiřovat. Pokud toho ve svých skriptech
využijete, je rozumné použít jmenný prostor auto-install, například
auto-install/style. Jestliže si myslíte, že máte pro další parametr vhodné
využití, zmiňte se o něm v diskusní skupině <debian-boot@lists.debian.org>,
abychom předešli konfliktům v jmenném prostoru (a případně vám přidali kratší
alias).

Příkaz auto zatím není definován na všech architekturách. Stejného výsledku
však můžete dosáhnout přidáním dvou parametrů auto=true priority=critical k
parametrům jádra. Parametr jádra auto je vlastně alias pro auto-install/enable
a potlačuje zobrazení otázek ohledně místního prostředí a nastavení klávesnice
až do bodu, kdy je bude možné přednastavit. Parametr priority je alias pro
debconf/priority a nastavením na hodnotu critical zajistíte, aby se zobrazovaly
pouze otázky s kritickou prioritou, kterých při instalaci moc není.

Další parametry, které se mohou hodit při automatizaci instalací přes DHCP,
jsou interface=auto netcfg/dhcp_timeout=60, které způsobí, že se k instalaci
použije první funkční síťové rozhraní a že instalátor bude trpělivější při
čekání na odpovědi od DHCP serveru.

Tip

Rozsáhlý příklad použití této infrastruktury naleznete na webových stránkách
autora. Kromě ukázkových skriptů a tříd tam také naleznete zajímavé výsledky
kreativního použití přednastavení.

B.2.4. Užitečné aliasy

Při použití (automatického) přednastavení se mohou hodit následující aliasy.
Poznamenejme, že aliasy zkracují pouze jméno otázky. Vždy je třeba přidat ještě
hodnotu, například auto=true nebo interface=eth0.

priority    debconf/priority
fb          debian-installer/framebuffer
language    debian-installer/language
country     debian-installer/country
locale      debian-installer/locale
theme       debian-installer/theme
auto        auto-install/enable
classes     auto-install/classes
file        preseed/file
url         preseed/url
domain      netcfg/get_domain
hostname    netcfg/get_hostname
interface   netcfg/choose_interface
protocol    mirror/protocol
suite       mirror/suite
modules     anna/choose_modules
recommends  base-installer/install-recommends
tasks       tasksel:tasksel/first
desktop     tasksel:tasksel/desktop
dmraid      disk-detect/dmraid/enable
keymap      keyboard-configuration/xkb-keymap
preseed-md5 preseed/file/checksum

B.2.5. Examples of boot prompt preseeding

Here are some examples of how the boot prompt might look like (you will need to
adapt this to your needs; also see 5.1.7 - "Zaváděcí obrazovka").

# To set French as language and France as country:
/install.amd/vmlinuz vga=788 initrd=/install.amd/gtk/initrd.gz language=fr country=FR --- quiet
# To set English as language and Germany as country, and use a German keyboard layout:
/install.amd/vmlinuz vga=788 initrd=/install.amd/gtk/initrd.gz language=en country=DE locale=en_US.UTF-8 keymap=de --- quiet
# To install the MATE desktop:
/install.amd/vmlinuz vga=788 initrd=/install.amd/gtk/initrd.gz desktop=mate-desktop --- quiet
# To install the web-server task:
/install.amd/vmlinuz initrd=/install.amd/initrd.gz tasksel:tasksel/first=web-server ---

B.2.6. Použití DHCP serveru pro určení souboru s přednastavením

Jelikož DHCP umí předávat jméno souboru, je možné toho zneužít pro určení
souboru s přednastavením. Obvykle se totiž tato možnost používá pro určení
souboru, kterým se zavede systém ze sítě. Pokud ale bude soubor ve formě URL,
instalace to rozpozná a pokusí se soubor stáhnout a použít jako soubor s
přednastavením. Následující příkaz ukazuje, jak upravit konfigurační soubor
dhcpd.conf serveru ISC DHCP verze 3 (balík isc-dhcp-server).

if substring (option vendor-class-identifier, 0, 3) = "d-i" {
    filename "http://pocitac/preseed.cfg";
}

Všimněte si, že předchozí příklad omezuje použití na DHCP klienty, kteří se
identifikují jako "d-i", takže by to nemělo ovlivnit běžné DHCP klienty, ale
pouze instalace. Direktivu filename můžete zadat například i do sekce pro
jediný počítač, takže neovlivníte ostatní instalace na síti.

K dobrým zvykům při přednastavování přes DHCP patří přednastavení pouze hodnot,
které jsou specifické pro vaši síť, jako je např. lokální zrcadlo. Tím se při
instalaci automaticky vybere správné zrcadlo, ale zbytek instalace probíhá
interaktivně. Kompletní přednastavení přes DHCP byste měli provádět pouze s
nejvyšší opatrností.

B.3. Vytvoření souboru s přednastavením

Soubor s přednastavením soubor má stejný formát jako používá příkaz 
debconf-set-selections. Běžný řádek pak má tvar

<vlastník> <jméno otázky> <typ otázky> <hodnota>

Soubor by měl začínat komentářem #_preseed_V1

Při vytváření souboru s přednastavením byste měli mít na paměti několik
pravidel.

  • Mezi typ a hodnotu vkládejte pouze jednu mezeru nebo tabulátor -- případné
    další bílé znaky budou považovány za součást hodnoty.

  • Dlouhý řádek můžete pro lepší čitelnost rozdělit na několik řádků tak, že
    na konec řádku přidáte znak pro pokračování řádku "\" (zpětné lomítko). Je
    vhodné rozdělit řádek mezi názvem a typem otázky, ne mezi typem a hodnotou.
    Po spojení řádků bude bílé místo ze začátku/konce řádku spojeno do jediné
    mezery.

  • Pro debconf proměnné (šablony), které jsou součástí pouze samotného
    instalačního programu, by měl být vlastník nastaven na "d-i". Pro
    přednastavení ostatních proměnných používaných během instalace by se měl
    jako vlastník používat název balíku, který obsahuje příslušnou šablonu. Do
    debconf databáze v nainstalovaném systému se přenesou pouze proměnné, které
    mají jako vlastníka nastaveno něco jiného než "d-i".

  • Většina otázek vyžaduje zadání hodnot v angličtině, avšak existují výjimky
    jako třeba partman, kde musíte použít přeložené hodnoty.

  • Dále pak některé otázky vyžadují hodnotu formou kódu (a ne text, který se
    zobrazuje během instalace).

  • Na začátku souboru uveďte #_preseed_V1

  • A comment consists of a line which starts with a hash character ("#") and
    extends up to the length of that line.

Nejjednodušší způsob vytvoření souboru s přednastavením je použít ukázkový
soubor z B.4 - "Obsah souboru s přednastavením (pro bullseye)" jako základ a
upravit si jej dle potřeb.

Jiná možnost je provést ruční instalaci a po restartu do nového systému použít
příkaz debconf-get-selections (z balíku debconf-utils) a uložit databázi
debconfu i cdebconfu do jediného souboru:

$ echo "#_preseed_V1" > soubor
$ debconf-get-selections --installer >> soubor
$ debconf-get-selections >> soubor

Tento přístup má tu nevýhodu, že vytvořený soubor bude obsahovat i položky,
které by se neměly přednastavovat. Z tohoto pohledu je pro většinu uživatelů
vhodnější použití ukázkového souboru.

Poznámka

Tento způsob se spoléhá na fakt, že se na konci instalace uloží databáze
cdebconfu do instalovaného systému do souboru /var/log/installer/cdebconf.
Protože tato databáze může obsahovat důvěrné informace, jsou tyto soubory
čitelné pouze pro uživatele root.

Pokud ze systému vyčistíte balík installation-report, bude smazán také adresář
/var/log/installer.

Seznam možných hodnot pro otázky můžete zjistit během instalace ze souborů
umístěných v adresáři /var/lib/cdebconf (např. pomocí editoru nano). Samotné
šablony se nachází v souboru templates.dat, aktuální hodnoty naleznete v
souboru questions.dat.

Ještě před instalací je vhodné zkontrolovat formát předkonfiguračního souboru
příkazem debconf-set-selections -c preseed.cfg.

B.4. Obsah souboru s přednastavením (pro bullseye)

Útržky konfigurace použité v této části jsou také dostupné jako samostatný
soubor na ../example-preseed.txt.

Tento příklad je založen na instalaci pro architekturu Intel x86. Jestliže
instalujete na jinou architekturu, nemusí některá nastavení odpovídat těm
uvedeným (výběr klávesnice, instalace zavaděče) a budete je muset nahradit
adekvátními hodnotami.

Podrobnosti o tom, jak jednotlivé komponenty instalačního systému pracují,
naleznete v kapitole 6.3 - "Použití jednotlivých komponent".

B.4.1. Lokalizace

Nastavení lokalizačních proměnných bude fungovat pouze v případě, když
používáte přednastavení přes initrd, nebo pomocí zaváděcích parametrů jádra. U
ostatních způsobů se totiž soubor s přednastavením nahraje až po zobrazení
těchto otázek. Výjimkou je automatický režim (B.2.3 - "Automatický režim"),
který odsune otázky ohledně lokalizace na později a umožní je tak přednastavit
všemi známými způsoby.

Místní prostření (locale) slouží k současnému zadání jazyka i země. Například
pomocí zaváděcího parametru jádra můžete zadat locale=cs_CZ.

Although this method is very easy to use, it does not allow preseeding of all
possible combinations of language, country and locale^[21]. So alternatively
the values can be preseeded individually. Language and country can also be
specified as boot parameters.

# Přednastavením locale se automaticky nastaví jazyk, země a locale.
d-i debian-installer/locale string cs_CZ

# Pro větší pružnost je též možno nastavit hodnoty samostatně.
#d-i debian-installer/language string en
#d-i debian-installer/country string NL
#d-i debian-installer/locale string en_GB.UTF-8
# Volitelně můžete zadat další locale, která se mají vygenerovat.
#d-i localechooser/supported-locales multiselect cs_CZ.UTF-8, en_US.UTF-8

Nastavení klávesnice se skládá z výběru klávesové mapy a přepínače mezi
zvolenou mapou a US variantou. Během instalace jsou dostupné pouze základní
klávesové mapy. Ostatní dostupné varianty naleznete až v nainstalovaném systému
příkazem dpkg-reconfigure keyboard-configuration.

# Výběr klávesnice.
d-i keyboard-configuration/xkb-keymap select cz
# d-i keyboard-configuration/toggle select No toggling

Nastavení klávesnice můžete přeskočit nastavením proměnné keymap na hodnotu
skip-config. Tím se zachová výchozí klávesová mapa jádra.

B.4.2. Nastavení sítě

Of course, preseeding the network configuration won't work if you're loading
your preconfiguration file from the network. But it's great when you're booting
from optical disc or USB stick. If you are loading preconfiguration files from
the network, you can pass network config parameters by using kernel boot
parameters.

Potřebujete-li při zavádění ze sítě vybrat konkrétní síťové rozhraní ještě před
nahráním souboru s přednastavením, použijte zaváděcí parametr interface=eth1.

Přestože přednastavení síťování není běžně dostupné při přednastavení ze sítě
(tj. při použití "preseed/url"), můžete to obejít následujícím hackem (např.
pokud chcete síťovému rozhraní nastavit statickou adresu). Hack spočívá ve
vynucení opětovné konfigurace sítě po načtení souboru s přednastavením. Stačí
vytvořit skript pro "preseed/run" obsahující následující příkazy:

kill-all-dhcp; netcfg

Pro nastavení sítě lze využít následující proměnné:

# Disable network configuration entirely. This is useful for cdrom
# installations on non-networked devices where the network questions,
# warning and long timeouts are a nuisance.
#d-i netcfg/enable boolean false

# netcfg will choose an interface that has link if possible. This makes it
# skip displaying a list if there is more than one interface.
d-i netcfg/choose_interface select auto

# To pick a particular interface instead:
#d-i netcfg/choose_interface select eth1

# To set a different link detection timeout (default is 3 seconds).
# Values are interpreted as seconds.
#d-i netcfg/link_wait_timeout string 10

# If you have a slow dhcp server and the installer times out waiting for
# it, this might be useful.
#d-i netcfg/dhcp_timeout string 60
#d-i netcfg/dhcpv6_timeout string 60

# Automatic network configuration is the default.
# If you prefer to configure the network manually, uncomment this line and
# the static network configuration below.
#d-i netcfg/disable_autoconfig boolean true

# If you want the preconfiguration file to work on systems both with and
# without a dhcp server, uncomment these lines and the static network
# configuration below.
#d-i netcfg/dhcp_failed note
#d-i netcfg/dhcp_options select Configure network manually

# Static network configuration.
#
# IPv4 example
#d-i netcfg/get_ipaddress string 192.168.1.42
#d-i netcfg/get_netmask string 255.255.255.0
#d-i netcfg/get_gateway string 192.168.1.1
#d-i netcfg/get_nameservers string 192.168.1.1
#d-i netcfg/confirm_static boolean true
#
# IPv6 example
#d-i netcfg/get_ipaddress string fc00::2
#d-i netcfg/get_netmask string ffff:ffff:ffff:ffff::
#d-i netcfg/get_gateway string fc00::1
#d-i netcfg/get_nameservers string fc00::1
#d-i netcfg/confirm_static boolean true

# Any hostname and domain names assigned from dhcp take precedence over
# values set here. However, setting the values still prevents the questions
# from being shown, even if values come from dhcp.
d-i netcfg/get_hostname string unassigned-hostname
d-i netcfg/get_domain string unassigned-domain

# If you want to force a hostname, regardless of what either the DHCP
# server returns or what the reverse DNS entry for the IP is, uncomment
# and adjust the following line.
#d-i netcfg/hostname string somehost

# Disable that annoying WEP key dialog.
d-i netcfg/wireless_wep string
# The wacky dhcp hostname that some ISPs use as a password of sorts.
#d-i netcfg/dhcp_hostname string radish

# If non-free firmware is needed for the network or other hardware, you can
# configure the installer to always try to load it, without prompting. Or
# change to false to disable asking.
#d-i hw-detect/load_firmware boolean true

Pokud není proměnná netcfg/get_netmask přednastavená, netcfg si síťovou masku
dopočítá automaticky. Pro plně automatické instalace musíte v takovém případě
nastavit proměnnou jako seen, aby instalace nečekala na potvrzení spočítané
masky. Obdobně je možné nepřednastavovat proměnnou netcfg/get_gateway a nechat 
netcfg, aby automaticky automaticky odhadl adresu brány. Jako speciální případ
je možné nastavit proměnnou netcfg/get_gateway na hodnotu "none", což znamená,
že se brána nemá použít vůbec.

B.4.3. Síťová konzole

# Následující nastavení se hodí v situacích, kdy chcete instalovat
# vzdáleně přes SSH pomocí komponenty network-console.
# Toto přednastavení má smysl pouze pokud plánujete dokončit
# instalaci ručně.
#d-i anna/choose_modules string network-console
#d-i network-console/authorized_keys_url string http://10.0.0.1/openssh-key
#d-i network-console/password password r00tme
#d-i network-console/password-again password r00tme

More information related to network-console can be found in 6.3.10 -
"Installation over network-console".

B.4.4. Nastavení zrcadla

V závislosti na způsobu instalace můžete zrcadlo použít pro stažení dodatečných
komponent instalačního systému, stažení základního systému a pro nastavení
souboru /etc/apt/sources.list.

Parametr mirror/suite určuje verzi instalovaného systému.

Parametr mirror/udeb/suite určuje verzi Debianu, ze které se stáhnou dodatečné
komponenty instalačního systému. Nastavení této proměnné má smysl pouze v
případě, že komponenty stahujete ze sítě a potřebujete, aby odpovídaly verzi
initrd, který se používá pro instalaci. Instalační systém obvykle zvolí
správnou hodnotu, takže by neměl být důvod tuto proměnnou měnit.

# Mirror protocol:
# If you select ftp, the mirror/country string does not need to be set.
# Default value for the mirror protocol: http.
#d-i mirror/protocol string ftp
d-i mirror/country string manual
d-i mirror/http/hostname string ftp.cz.debian.org
d-i mirror/http/directory string /debian
d-i mirror/http/proxy string

# Suite to install.
#d-i mirror/suite string testing
# Suite to use for loading installer components (optional).
#d-i mirror/udeb/suite string testing

B.4.5. Nastavení účtů

Instalační systém umožňuje přednastavit jak heslo uživatele root, tak jméno a
heslo prvního běžného uživatele systému. Heslo můžete zadat buď v nešifrované
podobě, nebo jako crypt(3) hash.

Varování

Přednastavení hesel není bezpečné, protože kdokoliv s přístupem k souboru s
přednastavením si tato hesla může přečíst. Z pohledu bezpečnosti je použití
hashů lepší, ovšem vzhledem k možným útokům hrubou silou je třeba zvolit silný
algoritmus jako SHA-256 nebo SHA512. Dřívější hashovací algoritmy jako DES a
MD5 jsou považovány za slabé.

# Přeskočí vytvoření účtu pro roota (běžný uživatel bude moci použít
# sudo).
#d-i passwd/root-login boolean false
# Volitelně přeskočí vytvoření běžného uživatelského účtu.
#d-i passwd/make-user boolean false

# Rootovo heslo v čitelném tvaru
#d-i passwd/root-password password r00tme
#d-i passwd/root-password-again password r00tme
# nebo šifrované pomocí crypt(3) hashe.
#d-i passwd/root-password-crypted password [crypt(3) hash]

# Vytvoření účtu běžného uživatele.
#d-i passwd/user-fullname string Jan Novak
#d-i passwd/username string jan
# Heslo běžného uživatele v čitelném tvaru
#d-i passwd/user-password password nebezpecne
#d-i passwd/user-password-again password nebezpecne
# nebo šifrované pomocí crypt(3) hashe.
#d-i passwd/user-password-crypted password [crypt(3) hash]
# Nastaví UID běžného uživatele (jinak se použije výchozí hodnota).
#d-i passwd/user-uid string 1010

# Uživatelský účet bude automaticky přidán do několika standardních
# skupin. Chcete-li to změnit, zadejte seznam požadovaných skupin.
#d-i passwd/user-default-groups string audio cdrom video

Do proměnných passwd/root-password-crypted a passwd/user-password-crypted
můžete jako hodnotu zadat znak vykřičník "!", což znamená, že daný účet bude
zakázán. To se může hodit například pro účet root, což ovšem předpokládá, že
máte nastavenu nějakou jinou možnost, jak počítač spravovat (například pomocí 
sudo nebo autentizace přes SSH klíče).

SHA-512 hash hesla můžete vygenerovat následujícím příkazem (z balíku whois):

mkpasswd -m sha-512

B.4.6. Nastavení hodin a časového pásma

# Určuje, zda jsou hardwarové hodiny nastaveny na UTC.
d-i clock-setup/utc boolean true

# Proměnnou můžete nastavit na libovolnou platnou hodnotu $TZ;
# Seznam časových pásem naleznete v /usr/share/zoneinfo/.
d-i time/zone string Europe/Prague

# Určuje, zda se mají při instalaci nastavit hodiny pomocí NTP.
d-i clock-setup/ntp boolean true
# NTP server, který se má použít. Výchozí hodnota je většinou
# dostačující.
#d-i clock-setup/ntp-server string tak.cesnet.cz

B.4.7. Rozdělení disku

Dělení disku je víceméně omezeno možnostmi, které nabízí partman-auto. Můžete
zvolit rozdělení buď stávajícího volného místa, nebo celého disku. Rozvržení
oblastí můžete určit pomocí předdefinovaného schematu, vlastního schematu ze
souboru nebo schematu obsaženém v souboru s přednastavením.

Přednastavení pokročilejších konfigurací s RAIDem, LVM a šifrováním je sice
podporováno, ale ne s takovými možnostmi, jako při ručním dělení.

Příklady níže ukazují jen základní použití schemat. Podrobnější informace
naleznete v souborech partman-auto-recipe.txt a partman-auto-raid-recipe.txt,
které jsou součástí balíku debian-installer. Oba soubory jsou též dostupné ze
zdrojového repositáře debian-installer. Poznamenejme, že podporovaná
funkcionalita se může mezi jednotlivými vydáními lišit.

Varování

Označení disků závisí na pořadí, ve kterém jsou nahrány jejich ovladače.
Jestliže se v systému nachází více disků, tak se ubezpečte, že jste vybrali ten
správný.

B.4.7.1. Příklad dělení disku

# If the system has free space you can choose to only partition that space.
# This is only honoured if partman-auto/method (below) is not set.
#d-i partman-auto/init_automatically_partition select biggest_free

# Alternatively, you may specify a disk to partition. If the system has only
# one disk the installer will default to using that, but otherwise the device
# name must be given in traditional, non-devfs format (so e.g. /dev/sda
# and not e.g. /dev/discs/disc0/disc).
# For example, to use the first SCSI/SATA hard disk:
#d-i partman-auto/disk string /dev/sda
# In addition, you'll need to specify the method to use.
# The presently available methods are:
# - regular: use the usual partition types for your architecture
# - lvm:     use LVM to partition the disk
# - crypto:  use LVM within an encrypted partition
d-i partman-auto/method string lvm

# You can define the amount of space that will be used for the LVM volume
# group. It can either be a size with its unit (eg. 20 GB), a percentage of
# free space or the 'max' keyword.
d-i partman-auto-lvm/guided_size string max

# If one of the disks that are going to be automatically partitioned
# contains an old LVM configuration, the user will normally receive a
# warning. This can be preseeded away...
d-i partman-lvm/device_remove_lvm boolean true
# The same applies to pre-existing software RAID array:
d-i partman-md/device_remove_md boolean true
# And the same goes for the confirmation to write the lvm partitions.
d-i partman-lvm/confirm boolean true
d-i partman-lvm/confirm_nooverwrite boolean true

# You can choose one of the three predefined partitioning recipes:
# - atomic: all files in one partition
# - home:   separate /home partition
# - multi:  separate /home, /var, and /tmp partitions
d-i partman-auto/choose_recipe select atomic

# Or provide a recipe of your own...
# If you have a way to get a recipe file into the d-i environment, you can
# just point at it.
#d-i partman-auto/expert_recipe_file string /hd-media/recipe

# If not, you can put an entire recipe into the preconfiguration file in one
# (logical) line. This example creates a small /boot partition, suitable
# swap, and uses the rest of the space for the root partition:
#d-i partman-auto/expert_recipe string                         \
#      boot-root ::                                            \
#              40 50 100 ext3                                  \
#                      $primary{ } $bootable{ }                \
#                      method{ format } format{ }              \
#                      use_filesystem{ } filesystem{ ext3 }    \
#                      mountpoint{ /boot }                     \
#              .                                               \
#              500 10000 1000000000 ext3                       \
#                      method{ format } format{ }              \
#                      use_filesystem{ } filesystem{ ext3 }    \
#                      mountpoint{ / }                         \
#              .                                               \
#              64 512 300% linux-swap                          \
#                      method{ swap } format{ }                \
#              .

# The full recipe format is documented in the file partman-auto-recipe.txt
# included in the 'debian-installer' package or available from D-I source
# repository. This also documents how to specify settings such as file
# system labels, volume group names and which physical devices to include
# in a volume group.

## Partitioning for EFI
# If your system needs an EFI partition you could add something like
# this to the recipe above, as the first element in the recipe:
#               538 538 1075 free                              \
#                      $iflabel{ gpt }                         \
#                      $reusemethod{ }                         \
#                      method{ efi }                           \
#                      format{ }                               \
#               .                                              \
#
# The fragment above is for the amd64 architecture; the details may be
# different on other architectures. The 'partman-auto' package in the
# D-I source repository may have an example you can follow.

# This makes partman automatically partition without confirmation, provided
# that you told it what to do using one of the methods above.
d-i partman-partitioning/confirm_write_new_label boolean true
d-i partman/choose_partition select finish
d-i partman/confirm boolean true
d-i partman/confirm_nooverwrite boolean true

# Force UEFI booting ('BIOS compatibility' will be lost). Default: false.
#d-i partman-efi/non_efi_system boolean true
# Ensure the partition table is GPT - this is required for EFI
#d-i partman-partitioning/choose_label select gpt
#d-i partman-partitioning/default_label string gpt

# When disk encryption is enabled, skip wiping the partitions beforehand.
#d-i partman-auto-crypto/erase_disks boolean false

B.4.7.2. Rozdělení při použití RAIDu

Pomocí přednastavení též můžete nastavit oblasti na polích softwarového RAIDu.
Podporovány jsou RAID úrovně 0, 1, 5, 6 a 10, vytváření degradovaných polí a
určení rezervních zařízení.

Používáte-li RAID 1, můžete podle části B.4.11 - "Instalace zavaděče"
přednastavit grub, aby se nainstaloval do všech zařízení v poli použitých.

Varování

U tohoto typu automatického rozdělení se dá velice lehce něco pokazit. Navíc se
jedná o komponentu, kterou vývojáři debian-installer testují relativně málo.
Odpovědnost za správné zapsání návodu pro rozdělení (aby dával smysl a
nevytvářel konflikty) nese uživatel. V případě problémů zkontrolujte /var/log/
syslog.

# Metoda by měla být nastavena na "raid".
#d-i partman-auto/method string raid
# Zadejte disky k rozdělení. Na všech bude nakonec stejné rozložení,
# takže to bude fungovat pouze pokud mají disky stejnou velikost.
#d-i partman-auto/disk string /dev/sda /dev/sdb
# Dále musíte zadat fyzické oblasti, které se mají použít.
#d-i partman-auto/expert_recipe string \
#      multiraid ::                                         \
#              1000 5000 4000 raid                          \
#                      $primary{ } method{ raid }           \
#              .                                            \
#              64 512 300% raid                             \
#                      method{ raid }                       \
#              .                                            \
#              500 10000 1000000000 raid                    \
#                      method{ raid }                       \
#              .

# Na závěr musíte zadat, jakým způsobem se mají dříve definované oblasti
# použít v nastavení RAIDu. Důležité je použít správná čísla logických
# oblastí. Podporovány jsou RAID úrovně 0, 1, 5, 6 a 10; zařízení jsou
# oddělena pomocí "#".
# Parametry jsou:
# <typraidu> <početzařízení> <početrezerv> <typss> <přípbod> \
#          <zařízení> <rezervnízařízení>

#d-i partman-auto-raid/recipe string \
#    1 2 0 ext3 /                    \
#          /dev/sda1#/dev/sdb1       \
#    .                               \
#    1 2 0 swap -                    \
#          /dev/sda5#/dev/sdb5       \
#    .                               \
#    0 2 0 ext3 /home                \
#          /dev/sda6#/dev/sdb6       \
#    .

# Více informací naleznete v souboru partman-auto-recipe.txt dostupném
# v balíku "debian-installer" nebo ve zdrojovém repositáři D-I.

# Toto zajistí, že se partman nebude při rozdělování ptát na potvrzení.
d-i partman-md/confirm boolean true
d-i partman-partitioning/confirm_write_new_label boolean true
d-i partman/choose_partition select finish
d-i partman/confirm boolean true
d-i partman/confirm_nooverwrite boolean true

B.4.7.3. Způsob připojení oblastí

Souborové systémy se obvykle připojují pomocí jedinečného univerzálního
identifikátoru, tzv. UUID. To umožňuje korektní připojení oblastí i v
případech, kdy se změní jejich jména zařízení. UUID jsou dlouhé a špatně se
čtou, takže pokud si budete přát, může instalátor připojit souborové systémy
pomocí tradičních jmen zařízení, nebo pomocí názvů oblastí, které jim
přidělíte. Zvolíte-li připojení pomocí názvů oblastí, budou oblasti bez
nastaveného názvu připojeny pomocí UUID.

Zařízení se stabilními jmény, jako např. logické svazky LVM, budou místo UUID
nadále používat připojení pomocí tradičních jmen zařízení.

Varování

Tradiční jména zařízení se mohou měnit v závislosti na pořadí, ve kterém jádro
při zavádění zařízení objeví. To může způsobit připojení chybného souborového
systému. Podobný problém existuje v případě použití názvů oblastí, protože při
zapojení dalšího disku (i externího) mohou použité názvy oblastí kolidovat a
tím pádem není zaručeno, která oblast se připojí.

# Výchozí je připojování pomocí UUID, ale můžete zvolit též "traditional"
# pro použití tradičních jmen zařízení, nebo "label" pro použití názvů
# oblastí (se záchytnou možností použití UUID).
#d-i partman/mount_style select uuid

B.4.8. Instalace základního systému

V této fázi instalace se toho moc nastavit nedá. Jediné otázky se týkají
instalace jádra.

# Nastaví APT, aby implicitně neinstaloval doporučené balíky. Použití
# této volby může znamenat instalaci nekompletního systému a měli by
# ji používat pouze zkušení uživatelé.
#d-i base-installer/install-recommends boolean false

# (Meta) balík jádra, který se má nainstalovat; nechcete-li instalovat
# žádné jádro, zadejte "none".
#d-i base-installer/kernel/image string linux-image-686

B.4.9. Nastavení APT

Nastavení souboru /etc/apt/sources.list a několika základních parametrů je plně
řízeno typem instalace a dříve zodpovězenými otázkami. Volitelně můžete přidat
další (lokální) archivy.

# Choose, if you want to scan additional installation media
# (default: false).
d-i apt-setup/cdrom/set-first boolean false
# You can choose to install non-free and contrib software.
#d-i apt-setup/non-free boolean true
#d-i apt-setup/contrib boolean true
# Uncomment the following line, if you don't want to have the sources.list
# entry for a DVD/BD installation image active in the installed system
# (entries for netinst or CD images will be disabled anyway, regardless of
# this setting).
#d-i apt-setup/disable-cdrom-entries boolean true
# Uncomment this if you don't want to use a network mirror.
#d-i apt-setup/use_mirror boolean false
# Select which update services to use; define the mirrors to be used.
# Values shown below are the normal defaults.
#d-i apt-setup/services-select multiselect security, updates
#d-i apt-setup/security_host string security.debian.org

# Additional repositories, local[0-9] available
#d-i apt-setup/local0/repository string \
#       http://local.server/debian stable main
#d-i apt-setup/local0/comment string local server
# Enable deb-src lines
#d-i apt-setup/local0/source boolean true
# URL to the public key of the local repository; you must provide a key or
# apt will complain about the unauthenticated repository and so the
# sources.list line will be left commented out.
#d-i apt-setup/local0/key string http://local.server/key
# If the provided key file ends in ".asc" the key file needs to be an
# ASCII-armoured PGP key, if it ends in ".gpg" it needs to use the
# "GPG key public keyring" format, the "keybox database" format is
# currently not supported.

# By default the installer requires that repositories be authenticated
# using a known gpg key. This setting can be used to disable that
# authentication. Warning: Insecure, not recommended.
#d-i debian-installer/allow_unauthenticated boolean true

# Uncomment this to add multiarch configuration for i386
#d-i apt-setup/multiarch string i386


B.4.10. Výběr balíků

Můžete nainstalovat libovolnou kombinaci dostupných úloh. V době psaní to
zahrnuje:

  • standard (standardní unixové nástroje)

  • desktop (grafické prostředí)

  • gnome-desktop (prostředí Gnome)

  • xfce-desktop (prostředí XFCE)

  • kde-desktop (prostředí KDE Plasma)

  • cinnamon-desktop (prostředí Cinnamon)

  • mate-desktop (prostředí MATE)

  • lxde-desktop (prostředí LXDE)

  • web-server (webový server)

  • ssh-server (SSH server)

Instalaci úloh můžete vynechat a instalovat balíky nějakou jinou cestou. Úlohu
standard však doporučujeme instalovat vždy.

Or if you don't want the tasksel dialog to be shown at all, preseed pkgsel/
run_tasksel (no packages are installed via tasksel in that case).

Chcete-li kromě balíků v úlohách instalovat také nějaké samostatné balíky,
můžete použít parametr pkgsel/include. Hodnotou parametru je čárkami nebo
mezerami oddělený seznam, takže jej můžete jednoduše použít i na příkazové
řádce jádra.

#tasksel tasksel/first multiselect standard, web-server, kde-desktop

# Or choose to not get the tasksel dialog displayed at all (and don't install
# any packages):
#d-i pkgsel/run_tasksel boolean false

# Individual additional packages to install
#d-i pkgsel/include string openssh-server build-essential
# Whether to upgrade packages after debootstrap.
# Allowed values: none, safe-upgrade, full-upgrade
#d-i pkgsel/upgrade select none

# You can choose, if your system will report back on what software you have
# installed, and what software you use. The default is not to report back,
# but sending reports helps the project determine what software is most
# popular and should be included on the first CD/DVD.
#popularity-contest popularity-contest/participate boolean false

B.4.11. Instalace zavaděče

# Grub is the boot loader (for x86).

# This is fairly safe to set, it makes grub install automatically to the UEFI
# partition/boot record if no other operating system is detected on the machine.
d-i grub-installer/only_debian boolean true

# This one makes grub-installer install to the UEFI partition/boot record, if
# it also finds some other OS, which is less safe as it might not be able to
# boot that other OS.
d-i grub-installer/with_other_os boolean true

# Due notably to potential USB sticks, the location of the primary drive can
# not be determined safely in general, so this needs to be specified:
#d-i grub-installer/bootdev  string /dev/sda
# To install to the primary device (assuming it is not a USB stick):
#d-i grub-installer/bootdev  string default

# Alternatively, if you want to install to a location other than the UEFI
# parition/boot record, uncomment and edit these lines:
#d-i grub-installer/only_debian boolean false
#d-i grub-installer/with_other_os boolean false
#d-i grub-installer/bootdev  string (hd0,1)
# To install grub to multiple disks:
#d-i grub-installer/bootdev  string (hd0,1) (hd1,1) (hd2,1)

# Optional password for grub, either in clear text
#d-i grub-installer/password password r00tme
#d-i grub-installer/password-again password r00tme
# or encrypted using an MD5 hash, see grub-md5-crypt(8).
#d-i grub-installer/password-crypted password [MD5 hash]

# Use the following option to add additional boot parameters for the
# installed system (if supported by the bootloader installer).
# Note: options passed to the installer will be added automatically.
#d-i debian-installer/add-kernel-opts string nousb

MD5 hash hesla pro grub můžete získat buď příkazem grub-md5-crypt, nebo
příkazem uvedeným v příkladu v části B.4.5 - "Nastavení účtů".

B.4.12. Dokončení instalace

# Při instalaci skrze sériovou konzoli jsou tradiční virtuální konzoly
# (VT1-VT6) v /etc/inittab zakázány. Chcete-li je nechat povolené,
# odkomentujte následující řádek.
#d-i finish-install/keep-consoles boolean true

# Vynechá poslední hlášku, že je instalace kompletní.
d-i finish-install/reboot_in_progress note

# Zakáže vysunutí CD během restartu, což se občas může hodit.
#d-i cdrom-detect/eject boolean false

# Tímto se počítač po skončení instalace místo restartu do nového
# systému zastaví, případně zcela vypne.
#d-i debian-installer/exit/halt boolean true
# Tímto se počítač nejen zastaví, ale i vypne.
#d-i debian-installer/exit/poweroff boolean true

B.4.13. Přednastavení ostatních balíků

# Je možné, že se objeví další otázky v závislosti na tom, jaký
# software nainstalujete, nebo podle toho, co se během instalace
# pokazí. Seznam všech možných otázek během instalace získáte
# příkazy:
#   debconf-get-selections --installer > soubor
#   debconf-get-selections >> soubor

B.5. Pokročilé možnosti

B.5.1. Spouštění vlastních příkazů během instalace

Nástroje pro přednastavení nabízí velice mocnou vlastnost, kterou je možnost
spouštění libovolných příkazů nebo skriptů v určitých bodech instalace.

Po připojení souborového systému instalovaného systému je tento dostupný v
adresáři /target. Pokud pro instalaci používáte CD, je po připojení dostupné
přes /cdrom.

# Přednastavení d-i není už ze své podstaty bezpečné. Nic
# v instalačním systému nekontroluje pokusy kolem přetečení bufferu
# ani zneužití hodnot v souboru s přednastaveními. Používejte tyto
# soubory pouze z důvěryhodných zdrojů!
# Následuje ukázka, jak v d-i spustit automaticky nějaký shellový příkaz.

# První příkaz je spuštěn co nejdříve - hned po načtení přednastavení.
#d-i preseed/early_command string anna-install nejaky-udeb
# Tento příkaz je spuštěn těsně před vstupem do dělení disků. Může se
# hodit pro dynamické přednastavení rozdělení disku, které závisí na
# aktuálním stavu disků (které ještě nemusí být vidět v době spuštění
# předchozího příkazu preseed/early_command).
#d-i partman/early_command \
#       string debconf-set partman-auto/disk "$(list-devices disk | head -n1)"
# Tento příkaz je spuštěn těsně před koncem instalace, ale ještě je
# připojen adresář /target. Buď můžete použít chroot na /target
# a pracovat přímo v něm, nebo můžete použít příkaz apt-install
# resp. in-target pro jednoduchou instalaci balíků resp. spouštění
# příkazů v nově instalovaném systému.
#d-i preseed/late_command string apt-install zsh; in-target chsh -s /bin/zsh

B.5.2. Použití přednastavení pro změnu výchozích hodnot

Pomocí přednastavení můžete dosáhnout i toho, že se otázka normálně zobrazí,
ale změní se její výchozí odpověď. (Například na úvodní otázce ohledně jazyka
můžete přednastavit místo angličtiny češtinu, takže uživateli stačí stisknout 
Enter, ale stále mu necháváte možnost volby jiného jazyka.) Dosáhnete toho tak,
že po nastavení proměnné změníte příznak seen na hodnotu "false".

d-i foo/bar string hodnota
d-i foo/bar seen false

Chcete-li stejného výsledku dosáhnout pro všechny otázky, můžete použít
zaváděcí parametr preseed/interactive=true, což se může hodit pro testování a
ladění konfiguračního souboru s přednastavením.

Zopakujme, že vlastník "d-i" by se měl používat pouze pro proměnné používané
samotným instalačním systémem. Pro proměnné nacházející se v instalovaných
balících byste měli jako vlastníka použít jméno příslušného balíku (viz
poznámka pod čarou u B.2.2 - "Použití zaváděcích parametrů jako formy
přednastavení").

Přednastavujete-li pomocí zaváděcích parametrů, můžete použít speciální
operátor "?=", kterým instalátor donutíte, aby danou otázku zobrazil. Například
foo/bar?=hodnota (nebo vlastník:foo/bar?=hodnota). To samozřejmě funguje jen u
parametrů, kterým odpovídá nějaká otázka zobrazená během instalace, tj.
nefunguje to pro "interní" parametry.

Pro více ladicích informací můžete použít zaváděcí parametr DEBCONF_DEBUG=5,
který zajistí, že debconf bude mnohem upovídanější, co se týče aktuálního
nastavení proměnných a postupu instalačními skripty.

B.5.3. Zřetězené nahrávání souborů s přednastavením

Přestože je použití jednoho velkého souboru s přednastavením jednoduché,
zdaleka nemusí být přehledné a navíc postrádá flexibilitu. Z tohoto důvodu je
možné nastavení rozdělit do několika samostatných souborů a ty pak skládat
dohromady. Protože později uvedené volby přepisují volby zadané dříve, přímo se
nabízí vytvoření hlavního (sdíleného) souboru s obecnými předvolbami a k němu
několik dalších souborů se specifickým nastavením pro danou situaci.

# Zadat můžete i více souborů najednou, stačí je oddělit mezerami.
# Vložené soubory mohou obsahovat jak deklarace pro přednastavení,
# tak příkazy pro zavedení dalších souborů. Pokud cestu zadáte
# relativně, hledají se soubory ve stejném adresáři, jako nadřízený
# soubor.
#d-i preseed/include string x.cfg

# d-i může volitelně kontrolovat kontrolní součty souborů
# s přednastavením. V současnosti jsou podporovány pouze md5 součty.
# Seznam součtů zadejte ve stejném pořadí, v jakém se budou načítat
# soubory s přednastavením.
#d-i preseed/include/checksum string 5da499872becccfeda2c4872f9171c3d

# Mnohem pružnější je použití shellového příkazu, který vrátí názvy
# souborů, jež se mají nahrát.
#d-i preseed/include_command \
#      string if [ "`hostname`" = bob ]; then echo bob.cfg; fi

# Nejpružnější možnost stáhne program a spustí jej. Program může
# používat příkazy pro manipulaci s databází debconfu jako např.
# debconf-set. Pokud jsou názvy souborů relativní, berou se ze
# stejného adresáře jako soubor s přednastavením, který je spouští.
# Zadat můžete i více skriptů, stačí je oddělit mezerami.
#d-i preseed/run string foo.sh

Zřetězené nahrávání souborů s přednastavením funguje i mezi různými typy
přednastavení. Například pokud používáte přednastavení z initrd nebo ze
souboru, můžete v nich uvést proměnnou preseed/url a po naběhnutí sítě tak
plynule přejít do souboru s přednastavením staženým ze sítě. Musíte však být
opatrní, protože to také znamená, že se proces přednastavení spustí znovu a
mimo jiné tím dostanete šanci na druhé spuštění příkazu preseed/early,
tentokráte po naběhnutí sítě.


━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

^[20] Vlastníkem debconf proměnné (nebo šablony) je obvykle jméno balíku, který
obsahuje odpovídající debconf šablonu. U proměnných používaných přímo v
instalačním systému je vlastníkem "d-i". Šablony a proměnné mohou mít více
vlastníků, což pomáhá při rozhodování, zda je možné je při odinstalování balíku
odstranit z databáze debconfu.

^[21] Preseeding locale to en_NL would for example result in en_US.UTF-8 as
default locale for the installed system. If e.g. en_GB.UTF-8 is preferred
instead, the values will need to be preseeded individually.

Příloha C. Poznámky k rozdělování disku

Obsah

C.1. Počet a velikost oblastí
C.2. Strom adresářů
C.3. Doporučené rozdělení disku
C.4. Jak Linux pojmenovává pevné disky
C.5. Dělící programy v Debianu

    C.5.1. Dělení disku na 64-bit PC

C.1. Počet a velikost oblastí

Jako úplné minimum potřebuje GNU/Linux jeden diskový oddíl. Tento oddíl je
využit pro operační systém, programy a uživatelská data. Většina uživatelů
navíc pokládá za nutnost mít vydělenou část disku pro virtuální paměť (swap).
Tento oddíl slouží operačnímu systému jako odkládací prostor. Vydělení "swap"
oblasti umožní efektivnější využití disku jako virtuální paměti. Je rovněž
možné pro tento účel využít obyčejný soubor, ale není to doporučené řešení.

Většina uživatelů vyčlení pro GNU/Linux více než jeden oddíl na disku. Jsou k
tomu dva důvody. Prvním je bezpečnost, pokud dojde k poškození souborového
systému, většinou se to týká pouze jednoho oddílu, takže potom musíte nahradit
ze záloh pouze část systému. Minimálně můžete uvážit vydělení kořenového svazku
souborů. Ten obsahuje zásadní komponenty systému. Jestliže dojde poškození
nějakého dalšího oddílu, budete stále schopni spustit GNU/Linux a provést
nápravu, což vám může ušetřit novou instalaci systému.

Druhý důvod je obyčejně závažnější při produkčním nasazení. Představte si
situaci, kdy nějaký proces začne nekontrolovaně zabírat diskový prostor. Pokud
se jedná o proces se superuživatelskými právy, může zaplnit celý disk a naruší
tak chod systému, poněvadž Linux potřebuje při běhu vytvářet soubory. K takové
situaci může dojít i z vnějších příčin, například se stanete obětí spamu a
nevyžádané e-maily vám lehce zaplní celý disk. Rozdělením disku na více oddílů
se lze před podobnými problémy uchránit. Pokud třeba vydělíte pro /var/mail
samostatnou oblast, bude systém fungovat, i když bude zahlcen nevyžádanou
poštou.

Jedinou nevýhodou při používání více diskových oddílů je, že je obtížné dopředu
odhadnout kapacitu jednotlivých oddílů. Jestliže vytvoříte některý oddíl příliš
malý, budete muset systém instalovat znovu, a nebo se budete potýkat s
přesunováním souborů z oddílu, jehož velikost jste podhodnotili. V opačném
případě, kdy vytvoříte zbytečně velký oddíl, plýtváte diskovým prostorem, který
by se dal využít jinde. Diskový prostor je dnes sice levný, ale proč vyhazovat
peníze oknem?

C.2. Strom adresářů

Debian GNU/Linux dodržuje standard pro pojmenování souborů a adresářů (
Filesystem Hierarchy Standard), což zaručuje, že uživatelé či programy mohou
odhadnout umístění souborů či adresářů. Kořenový adresář je reprezentován
lomítkem / a na všech Debianích systémech obsahuje tyto adresáře:

┌───────┬─────────────────────────────────────────────────┐
│Adresář│                      Obsah                      │
├───────┼─────────────────────────────────────────────────┤
│bin    │Důležité programy                                │
├───────┼─────────────────────────────────────────────────┤
│boot   │Statické soubory zavaděče                        │
├───────┼─────────────────────────────────────────────────┤
│dev    │Soubory zařízení                                 │
├───────┼─────────────────────────────────────────────────┤
│etc    │Konfigurační soubory závislé na systému          │
├───────┼─────────────────────────────────────────────────┤
│home   │Domovské adresáře uživatelů                      │
├───────┼─────────────────────────────────────────────────┤
│lib    │Podstatné sdílené knihovny a moduly jádra        │
├───────┼─────────────────────────────────────────────────┤
│media  │Obsahuje přípojné body pro výměnná média         │
├───────┼─────────────────────────────────────────────────┤
│mnt    │Místo pro dočasné připojování souborových systémů│
├───────┼─────────────────────────────────────────────────┤
│proc   │Virtuální adresář obsahující systémové informace │
├───────┼─────────────────────────────────────────────────┤
│root   │Domovský adresář správce systému                 │
├───────┼─────────────────────────────────────────────────┤
│run    │Proměnlivá data platná po dobu běhu systému      │
├───────┼─────────────────────────────────────────────────┤
│sbin   │Důležité systémové programy                      │
├───────┼─────────────────────────────────────────────────┤
│sys    │Virtuální adresář obsahující systémové informace │
├───────┼─────────────────────────────────────────────────┤
│tmp    │Dočasné soubory                                  │
├───────┼─────────────────────────────────────────────────┤
│usr    │Druhá úroveň hierarchie                          │
├───────┼─────────────────────────────────────────────────┤
│var    │Proměnlivá data                                  │
├───────┼─────────────────────────────────────────────────┤
│srv    │Data nabízená systémem                           │
├───────┼─────────────────────────────────────────────────┤
│opt    │Softwarové balíky třetích stran                  │
└───────┴─────────────────────────────────────────────────┘

Následující seznam by vám měl pomoci při rozhodování o rozdělení disku na
oblasti. Berte prosím na vědomí, že využití disku se velmi liší podle způsobu
používání systému a proto jsou následující doporučení pouze obecné a měly by
sloužit jen jako možný základ pro dělení disku.

  • /: kořenový adresář musí vždy fyzicky obsahovat adresáře /etc, /bin, /sbin,
    /lib a /dev, protože jinak byste nemohli zavést systém. Typicky je potřeba
    250-350 MB, ale v konkrétních podmínkách se požadavky mohou lišit.

  • /usr: obsahuje všechny uživatelské programy (/usr/bin), knihovny (/usr/
    lib), dokumentaci (/usr/share/doc), atd. Protože tato část souborového
    systému spotřebuje nejvíce místa, měli byste jí na disku poskytnout alespoň
    600-750 MB. Pokud budete instalovat hodně balíčků, měli byste tomuto
    adresáři vyhradit ještě více místa. Velkoryse pojatá instalace pracovní
    stanice nebo serveru může klidně zabrat i 5-6 GB.

  • V současnosti se doporučuje mít adresář /usr umístěn přímo na kořenové
    oblasti, jelikož zavádění systému s /usr na samostatné oblasti je stále
    obtížnější a jednou přestane být podporováno.

  • /var: v tomto adresáři budou uložena všechna proměnlivá data jako příspěvky
    news, e-maily, webové stránky, vyrovnávací paměť pro balíčkovací software,
    atd. Velikost tohoto adresáře velmi závisí na způsobu používání vašeho
    počítače, ale pro většinu lidí bude velikost dána režijními náklady správce
    balíčků. Pokud se chystáte nainstalovat najednou vše, co Debian nabízí,
    mělo by stačit pro /var vyhradit dva až tři gigabajty. V případě, že budete
    instalovat systém po částech (nejprve služby a utility, potom textové
    záležitosti, následně X, ...), bude stačit 300 až 500 megabajtů. Jestliže
    je vaší prioritou volné místo na disku a neplánujete žádné velké
    aktualizace systému, lze vyjít se 30 až 40 megabajty.

  • /tmp: sem programy většinou zapisují dočasná data. Obvykle by mělo stačit
    40-100 MB. Některé aplikace -- včetně nadstaveb archivačních programů,
    authoringových CD/DVD nástrojů a multimediálních programů -- mohou /tmp
    využívat pro uložení celých obrazů. Plánujete-li využívat takovéto
    programy, měli byste dostupné místo příslušně zvýšit.

  • /home: každý uživatel si bude ukládat data do svého podadresáře v tomto
    adresáři. Jeho velikost závisí na tom, kolik uživatelů bude systém používat
    a jaké soubory se v jejich adresářích budou uchovávat. Pro každého
    uživatele byste měli počítat alespoň 100 MB místa, ale opět závisí na
    konkrétní situaci.

C.3. Doporučené rozdělení disku

For new users, personal Debian boxes, home systems, and other single-user
setups, a single / partition (plus swap) is probably the easiest, simplest way
to go. The recommended partition type is ext4.

Jak jsme řekli dříve, pro víceuživatelské systémy je lepší použít pro /var, /
tmp a /home samostatné oblasti.

You might need a separate /usr/local partition if you plan to install many
programs that are not part of the Debian distribution. If your machine will be
a mail server, you might need to make /var/mail a separate partition. If you
are setting up a server with lots of user accounts, it's generally good to have
a separate, large /home partition. In general, the partitioning situation
varies from computer to computer depending on its uses.

Při instalaci komplikovanějšího systému (serveru) se podívejte do Multi Disk
HOWTO na podrobnější informace. Tento odkaz může být zajímavý rovněž pro
zprostředkovatele připojení k Internetu.

With respect to the issue of swap partition size, there are many views. One
rule of thumb which works well is to use as much swap as you have system
memory. It also shouldn't be smaller than 512MB, in most cases. Of course,
there are exceptions to these rules.

As an example, an older home machine might have 512MB of RAM and a 20GB SATA
drive on /dev/sda. There might be a 8GB partition for another operating system
on /dev/sda1, a 512MB swap partition on /dev/sda3 and about 11.4GB on /dev/sda2
as the Linux partition.

Pro představu, kolik místa zaberou jednotlivé úlohy, se podívejte na D.2 -
"Místo potřebné pro úlohy".

C.4. Jak Linux pojmenovává pevné disky

Disky a oddíly na nich mají v Linuxu odlišné názvy než v jiných operačních
systémech. Tyto názvy budete potřebovat při rozdělování disku a připojování
oblastí. Základní zařízení:

  • První rozpoznaný disk má název /dev/sda.

  • Druhý rozpoznaný disk má název /dev/sdb atd.

  • První SCSI CD mechanice odpovídá /dev/scd0 nebo také /dev/sr0.

Oddíly na discích jsou rozlišeny připojením čísla k názvu zařízení: sda1 a sda2
představují první a druhý oddíl prvního disku.

Například uvažujme počítač se dvěma disky na SCSI sběrnici na SCSI adresách 2 a
4. Prvnímu disku (na adrese 2) odpovídá zařízení sda, druhému sdb. Tři oddíly
na disku sda by byly pojmenovány sda1, sda2, sda3. Stejné schéma značení platí
i pro disk sdb a jeho oblasti.

Máte-li v počítači dva SCSI řadiče, pořadí disků zjistíte ze zpráv, které Linux
vypisuje při startu.

Primární oddíly jsou v Linuxu reprezentovány názvem disku a číslem oddílu 1 až
4. Například /dev/sda1 odpovídá prvnímu primárnímu oddílu na prvním disku.
Logické oddíly jsou číslovány od 5, takže na stejném disku má první logický
oddíl označení /dev/sda5. Rozšířený oddíl, tj. primární oddíl obsahující
logické oddíly, sám o sobě použitelný není.

C.5. Dělící programy v Debianu

K rozdělení disku nabízí každá architektura různé programy. Pro váš typ
počítače jsou k dispozici:

partman

    Doporučený nástroj, který umí kromě dělení disků i měnit velikost oblastí,
    vytvářet souborové systémy (v řeči Windows "formátovat") a přiřadit je k
    přípojným bodům.

fdisk

    Původní linuxový program pro správu oddílů, vhodný pro guru.

    Obzvláště opatrní musíte být v případě, že máte na disku oblasti systému
    FreeBSD. Instalační jádra sice obsahují podporu pro tyto oblasti, ale
    způsob, jakým je fdisk (ne)reprezentuje, může změnit názvy zařízení. Viz
    Linux+FreeBSD HOWTO.

cfdisk

    Jednoduchý, celoobrazovkový program pro správu oddílů se vyznačuje snadným
    ovládáním.

    Poznamenejme, že cfdisk oblasti FreeBSD nerozpozná vůbec a tím pádem se
    názvy zařízení mohou změnit.

Jeden z těchto programů se spustí automaticky, když vyberete krok Rozdělit
disky (nebo podobný). Teoreticky je možné přepnout se na druhou konzoli (tty2)
a použít jiný nástroj na dělení disku, avšak prakticky se to nedoporučuje.

Nezapomeňte označit zaváděcí oddíl jako "aktivní" (bootable).

C.5.1. Dělení disku na 64-bit PC

If you are using a new harddisk (or want to wipe out the whole partition table
of your disk), a new partition table needs to be created. The "Guided
partitioning" does this automatically, but when partitioning manually, move the
selection on the top-level entry of the disk and hit Enter. That will create a
new partition table on that disk. In expert mode, you will then be asked for
the type of the partition table. Default for UEFI-based systems is "gpt", while
for the older BIOS world the default value is "msdos". In a standard priority
installation those defaults will be used automatically.

Poznámka

When a partition table with type "gpt" was selected (default for UEFI systems),
a free space of 1 MB will automatically get created at the beginning of the
disk. This is intended and required to embed the GRUB2 bootloader.

If you have an existing other operating system such as DOS or Windows and you
want to preserve that operating system while installing Debian, you may need to
resize its partition to free up space for the Debian installation. The
installer supports resizing of both FAT and NTFS filesystems; when you get to
the installer's partitioning step, select the option Manual and then simply
select an existing partition and change its size.

While modern UEFI systems don't have such limitations as listed below, the old
PC BIOS generally adds additional constraints for disk partitioning. There is a
limit to how many "primary" and "logical" partitions a drive can contain.
Additionally, with pre 1994-98 BIOSes, there are limits to where on the drive
the BIOS can boot from. More information can be found in the Linux Partition
HOWTO, but this section will include a brief overview to help you plan most
situations.

"Primární" oddíly jsou původní koncept rozdělení disku. Na disku mohou být
maximálně čtyři. Toto omezení překonávají oddíly "rozšířené" a "logické".
Změníte-li primární oddíl na rozšířený, můžete tento prostor využít k vytvoření
libovolného počtu (max. 60) logických částí. Na disku lze však vytvořit
maximálně jeden rozšířený oddíl.

Linux omezuje počet oddílů na disk takto: 255 oddílů pro disky SCSI (3 primární
a 252 logických) a 63 oddílů na discích IDE (3 primární a 60 logických).
Standardní Debian GNU/Linux nabízí na každém disku pouze 20 zařízení pro
oblasti, takže pokud chcete využívat oblasti s číslem větším než 20, musíte
odpovídající zařízení vytvořit ručně.

Jestliže máte velký IDE disk na kterém nepoužíváte ani LBA adresování, ani
překládací ovladač od výrobce, pak musíte umístit zaváděcí oddíl (obsahující
jádro) do prvních 1024 cylindrů na disku (obvykle prvních 524 megabajtů).

This restriction doesn't apply if you have a BIOS newer than around 1995-98
(depending on the manufacturer) that supports the "Enhanced Disk Drive Support
Specification". Debian's Lilo alternative mbr must use the BIOS to read the
kernel from the disk into RAM. If the BIOS int 0x13 large disk access
extensions are found to be present, they will be utilized. Otherwise, the
legacy disk access interface is used as a fall-back, and it cannot be used to
address any location on the disk higher than the 1023rd cylinder. Once Linux is
booted, no matter what BIOS your computer has, these restrictions no longer
apply, since Linux does not use the BIOS for disk access.

Pokud máte velký disk, možná budete chtít využít techniku překladu cylindrů,
kterou můžete zapnout v BIOSu (jako třeba LBA "Logical Block Addressing" nebo
CHS "Large" módy). Více informací ohledně velkých disků najdete v Large Disk
HOWTO. Pokud používáte techniku překladu cylindrů a BIOS nepodporuje rozšíření
pro přístup k velkým diskům, pak se vaše zaváděcí oblast musí vlézt do 
přeloženého ekvivalentu 1024. cylindru.

Pro splnění těchto požadavků doporučujeme vytvořit malou oblast na začátku
disku (25-50MB by mělo stačit), která se použije jako zaváděcí. Ostatní oblasti
je pak možné vytvořit kdekoliv ve zbylém místu. Zaváděcí oblast musí být
připojena jako /boot, protože v tomto adresáři se uchovávají jádra. Takovéto
nastavení bude fungovat na libovolném počítači, bez ohledu na to, zda používá
nebo nepoužívá LBA, CHS nebo zda podporuje rozšíření pro přístup k velkým
diskům.

Příloha D. Co se jinam nevešlo

Obsah

D.1. Zařízení v Linuxu

    D.1.1. Nastavení myši

D.2. Místo potřebné pro úlohy
D.3. Jak nainstalovat Debian GNU/Linux ze stávajícího unixového/linuxového
    systému

    D.3.1. Přípravné práce
    D.3.2. Instalace balíku debootstrap
    D.3.3. Spuštění debootstrapu
    D.3.4. Nastavení základního systému
    D.3.5. Instalace jádra
    D.3.6. Nastavení zavaděče
    D.3.7. Vzdálený přístup: Instalace SSH a nastavení přístupu
    D.3.8. Závěrečné kroky

D.4. Jak nainstalovat Debian GNU/Linux přes paralelní port (PLIP)

    D.4.1. Požadavky
    D.4.2. Nastavení stroje earthsimulator
    D.4.3. Instalace na nahepc

D.5. Jak nainstalovat Debian GNU/Linux pomocí PPP přes Ethernet (PPPoE)

D.1. Zařízení v Linuxu

V Linuxu existuje v adresáři /dev spousta speciálních souborů nazývaných
soubory zařízení. V unixovém světě se k hardwaru přistupuje právě přes tyto
soubory, které se ovšem chovají jinak, než obyčejné soubory. Soubor zařízení je
vlastně abstraktní rozhraní k systémovému ovladači, který komunikuje přímo s
hardwarem. Nejběžnějšími typy souborů zařízení jsou bloková a znaková zařízení,
méně rozšířené jsou pak pojmenované roury. V následujícím výpisu je uvedeno
několik nejdůležitějších souborů.

┌────┬───────────────────────────────────┐
│sda │první pevný disk                   │
├────┼───────────────────────────────────┤
│sdb │druhý pevný disk                   │
├────┼───────────────────────────────────┤
│sda1│první oblast na prvním pevném disku│
├────┼───────────────────────────────────┤
│sdb7│sedmá oblast na druhém pevném disku│
└────┴───────────────────────────────────┘

┌───┬─────────────┐
│sr0│první CD-ROM │
├───┼─────────────┤
│sr1│druhá CD-ROM │
└───┴─────────────┘

┌───────┬────────────────────────────────────────────────────────────────┐
│ttyS0  │sériový port 0, pod MS-DOSem COM1                               │
├───────┼────────────────────────────────────────────────────────────────┤
│ttyS1  │sériový port 1, pod MS-DOSem COM2                               │
├───────┼────────────────────────────────────────────────────────────────┤
│psaux  │rozhraní myši na portu PS/2                                     │
├───────┼────────────────────────────────────────────────────────────────┤
│gpmdata│pseudozařízení - jenom opakuje data získaná z GPM (ovladač myši)│
└───────┴────────────────────────────────────────────────────────────────┘

┌─────┬────────────────────────────────────┐
│cdrom│symbolický odkaz na CD-ROM mechaniku│
├─────┼────────────────────────────────────┤
│mouse│symbolický odkaz na rozhraní myši   │
└─────┴────────────────────────────────────┘

┌────┬──────────────────────────────────────────────────┐
│null│cokoliv pošlete na toto zařízení, zmizí beze stopy│
├────┼──────────────────────────────────────────────────┤
│zero│z tohoto zařízení můžete až do nekonečna číst nuly│
└────┴──────────────────────────────────────────────────┘

D.1.1. Nastavení myši

Myš můžete používat jak na konzoli, tak v prostředí X Window. Obvykle stačí
nainstalovat balík gpm a příslušný X server. Oboje by mělo používat jako
zařízení myši soubor /dev/input/mice. Správný komunikační protokol bývá v gpm
exps2, v systému X Window ExplorerPS/2. Příslušné konfigurační soubory jsou /
etc/gpm.conf a /etc/X11/xorg.conf.

Aby myš fungovala, musí být zavedeny některé moduly jádra. Ve většině případů
jsou správné moduly rozpoznány a zavedeny automaticky. Výjimkou mohou být staré
sériové a sběrnicové myši^[22], které jsou dnes spíše raritou ve velmi starých
počítačích. Typické moduly, které jsou potřeba pro různé typy myší:

┌────────┬───────────────────────────────────────────────────────────┐
│ Modul  │                           Popis                           │
├────────┼───────────────────────────────────────────────────────────┤
│psmouse │PS/2 myši (měl by být rozpoznán automaticky)               │
├────────┼───────────────────────────────────────────────────────────┤
│usbhid  │USB myši (měl by být rozpoznán automaticky)                │
├────────┼───────────────────────────────────────────────────────────┤
│sermouse│Většina sériových myší                                     │
├────────┼───────────────────────────────────────────────────────────┤
│logibm  │Sběrnicová myš připojená k adaptérové kartě Logitech       │
├────────┼───────────────────────────────────────────────────────────┤
│inport  │Sběrnicová myš připojená ke kartě ATI nebo Microsoft InPort│
└────────┴───────────────────────────────────────────────────────────┘

Pro zavedení modulu s ovladačem můžete použít příkaz modconf z balíku stejného
jména a hledat v kategorii kernel/drivers/input/mouse.

D.2. Místo potřebné pro úlohy

Standardní instalace na architektuře amd64 zabere na disku včetně všech
standardních balíků 971MB. Menší instalace bez úlohy "Standardní systém" zabere
769MB.

Důležité

V obou případech je zabrané místo počítáno po dokončení instalace a smazání
všech dočasných souborů. Výpočet také nebere v úvahu režii souborového systému,
například pro žurnálovací soubory. To znamená, že během instalace a také
později při samotném používání systému bude potřeba mnohem více místa na
dočasné soubory (stažené balíky) a uživatelská data.

Následující tabulka ukazuje velikosti úloh tak, jak je vypisuje program
aptitude. Protože se mohou balíky v některých úlohách překrývat, je možné, že
celková velikost instalovaných úloh bude menší než součet jejich velikostí.

By default the installer will install the GNOME desktop environment, but
alternative desktop environments can be selected either by using one of the
special installation images, or by specifying the desired desktop environment
during installation (see 6.3.6.2 - "Výběr a instalace softwaru").

Při určování velikostí diskových oblastí budete muset čísla uvedená v tabulce
přidat k velikosti standardního systému. Většina z hodnot ve sloupci "
Instalovaná velikost" skončí v /usr, při instalaci je však ještě třeba počítat
s hodnotami ze sloupce "Stáhne se", které se (dočasně) uloží v adresáři /var.

┌─────────────────┬──────────────────────┬────────────┬───────────────────────┐
│      Úloha      │ Instalovaná velikost │ Stáhne se  │ Místo během instalace │
│                 │         (MB)         │    (MB)    │         (MB)          │
├─────────────────┼──────────────────────┼────────────┼───────────────────────┤
│Desktopové       │                      │            │                       │
│prostředí        │                      │            │                       │
├─────────────────┼──────────────────────┼────────────┼───────────────────────┤
│  • GNOME        │2790                  │786         │3576                   │
│(výchozí)        │                      │            │                       │
├─────────────────┼──────────────────────┼────────────┼───────────────────────┤
│  • KDE Plasma   │4122                  │1212        │5334                   │
├─────────────────┼──────────────────────┼────────────┼───────────────────────┤
│  • Xfce         │2187                  │621         │2808                   │
├─────────────────┼──────────────────────┼────────────┼───────────────────────┤
│  • LXDE         │2271                  │653         │2924                   │
├─────────────────┼──────────────────────┼────────────┼───────────────────────┤
│  • MATE         │2574                  │711         │3285                   │
├─────────────────┼──────────────────────┼────────────┼───────────────────────┤
│  • Cinnamon     │4197                  │1251        │5448                   │
├─────────────────┼──────────────────────┼────────────┼───────────────────────┤
│Webový server    │44                    │11          │55                     │
├─────────────────┼──────────────────────┼────────────┼───────────────────────┤
│SSH server       │2                     │0           │2                      │
└─────────────────┴──────────────────────┴────────────┴───────────────────────┘

Instalujete-li v jiném jazyce než angličtině, je možné, že tasksel automaticky
nainstaluje lokalizační úlohu pro daný jazyk. Velikost lokalizační úlohy závisí
na tom, co do ní její tvůrci umístili za balíky.

D.3. Jak nainstalovat Debian GNU/Linux ze stávajícího unixového/linuxového
systému

Tato kapitola se, na rozdíl od zbytku příručky, nezabývá oficiálním instalačním
programem, ale popisuje instalaci Debianu ze stávajícího unixového nebo
linuxového systému. Tuto kapitolu si vyžádali uživatelé přecházející z
distribucí Red Hat, Mandriva a SUSE. Předpokládáme zde jisté znalosti s
používáním *nixových příkazů a pohybem v souborovém systému. V této sekci
platí, že příkazy uvozené promptem $ zadáváte ve svém stávajícím systému,
zatímco příkazy uvozené # se spouští v chrootovaném prostředí.

Až si Debian GNU/Linux vyladíte k obrazu svému, můžete do něj převést stávající
uživatelská data a plynule přejít k nové distribuci bez zbytečných prostojů.
Tento druh instalace je též vhodný pro systémy s podivným hardwarem, který
jinak není podporován instalačními médii.

Poznámka

Protože se z velké části jedná o ruční postup, měli byste mít na paměti, že
spoustu věcí, které běžně řeší instalační program sám, nyní budete muset
provádět sami. To také klade větší nároky na znalosti Debianu a unixových
systémů obecně. Následující návod řeší pouze základní nastavení systému, je
možné, že bude potřeba provést další kroky.

D.3.1. Přípravné práce

With your current *nix partitioning tools, repartition the hard drive as
needed, creating at least one filesystem plus swap. You need around 769MB of
space available for a console only install, or about 2271MB if you plan to
install X (more if you intend to install desktop environments like GNOME or KDE
Plasma).

Na nových oddílech vytvořte souborové systémy. Například souborový systém ext3
na oblasti /dev/sda6 vytvoříte příkazem:

# mke2fs -j /dev/sda6

(Ve zbytku návodu budeme předpokládat, že kořenový oddíl je /dev/sda6.)
Jestliže chcete vytvořit systém ext2, vynechejte parametr -j.

Inicializujte a aktivujte odkládací oddíl (nezapomeňte změnit číslo oblasti
podle skutečnosti):

# mkswap /dev/sda5
# sync
# swapon /dev/sda5

Připojte budoucí kořenovou oblast (/) do adresáře /mnt/debinst. Na jméně
přípojného adresáře nezáleží.

# mkdir /mnt/debinst
# mount /dev/sda6 /mnt/debinst

Poznámka

If you want to have parts of the filesystem (e.g. /usr) mounted on separate
partitions, you will need to create and mount these directories manually before
proceding with the next stage.

D.3.2. Instalace balíku debootstrap

debootstrap je program, kterým se v Debianu instaluje základní systém. Má
minimum závislostí (pouze /bin/sh, ar, wget a základní unixové/linuxové
nástroje^[23]), takže se dá použít na téměř libovolném systému. Pokud ještě 
wget a ar nemáte, nainstalujte si je.

Poslední možností je ruční instalace. Vytvořte si pracovní adresář, do kterého
později balík rozbalíte:

# mkdir work
# cd work

Z poolu si stáhněte balík debootstrap pro svou architekturu, uložte jej do
pracovního adresáře a vybalte z něj potřebné soubory. K instalaci souborů
musíte mít rootovská práva.

# ar -x debootstrap_0.X.X_all.deb
# cd /
# zcat /cesta-k-pracovnimu-adresari/work/data.tar.gz | tar xv

D.3.3. Spuštění debootstrapu

debootstrap si umí stáhnout potřebné soubory přímo z archivu Debianu. Aby se
soubory nestahovaly přes půl Zeměkoule, nahraďte v ukázce server
ftp.cz.debian.org/debian nějakým bližším. Seznam zrcadel naleznete v http://
www.debian.org/mirror/list.

If you have a bullseye Debian GNU/Linux installation image mounted at /cdrom,
you could substitute a file URL instead of the http URL: file:/cdrom/debian/

V ukázkovém příkazu debootstrap nahraďte ARCH jedním z následujících: amd64,
arm64, armel, armhf, i386, mips64el, mipsel, ppc64el, s390x.

# /usr/sbin/debootstrap --arch ARCH bullseye \
     /mnt/debinst http://ftp.cz.debian.org/debian

Pokud se cílová architektura liší od hostitelské, měli byste přidat ještě
parametr --foreign.

D.3.4. Nastavení základního systému

V adresáři /mnt/debinst teď máte opravdový, i když minimální, systém Debian.
Nastal čas se do něj přesunout:

# LANG=C.UTF-8 chroot /mnt/debinst /bin/bash

Pokud se cílová architektura liší od hostitelské, budete ale nejprve muset do
nového systému nakopírovat qemu-user-static:

# cp /usr/bin/qemu-ARCH-static /mnt/debinst/usr/bin
# LANG=C.UTF-8 chroot /mnt/debinst qemu-ARCH-static /bin/bash

V novém systému možná budete muset nastavit definici terminálu tak, aby byla
kompatibilní se základním systémem Debianu:

# export TERM=xterm-color

Abyste mohli použít některé hodnoty proměnné TERM, budete možná muset
nainstalovat balík ncurses-term.

Jestliže se cílová architektura liší od hostitelské, musíte dokončit druhou
fázi nastavení:

/debootstrap/debootstrap --second-stage

D.3.4.1. Vytvoření souborů zařízení

Adresář /dev nyní obsahuje několik základních souborů zařízení, avšak pro další
instalaci může být zapotřebí dalších zařízení. Další postup závisí na různých
faktorech, jako je typ hostitelského systému, zda hodláte použít modulární
jádro a zda chcete soubory zařízení v novém systému spravovat staticky nebo
dynamicky (například pomocí udev).

Několik možných postupů:

  • V chrootu vytvořte základní sadu statických souborů zařízení příkazy:

    # apt install makedev
    # mount none /proc -t proc
    # cd /dev
    # MAKEDEV generic

  • Pomocí příkazu MAKEDEV ručně vytvořte pouze ty soubory zařízení, které
    potřebujete.

  • Do instalovaného systému připojte adresář /dev z hostitelského systému
    (parametr bind příkazu mount). S touto možností byste však měli být
    opatrní, protože některé balíky při instalaci vytvářejí nová zařízení, což
    nemusí být to, co chcete, aby se promítlo do hostitelského systému.

D.3.4.2. Připojení oblastí

You need to create /etc/fstab.

# editor /etc/fstab

Here is a sample you can modify to suit:

# /etc/fstab: static file system information.
#
# file system    mount point   type    options                  dump pass
/dev/XXX         /             ext3    defaults                 0    1
/dev/XXX         /boot         ext3    ro,nosuid,nodev          0    2

/dev/XXX         none          swap    sw                       0    0
proc             /proc         proc    defaults                 0    0

/dev/cdrom       /media/cdrom  iso9660 noauto,ro,user,exec      0    0

/dev/XXX         /tmp          ext3    rw,nosuid,nodev          0    2
/dev/XXX         /var          ext3    rw,nosuid,nodev          0    2
/dev/XXX         /usr          ext3    rw,nodev                 0    2
/dev/XXX         /home         ext3    rw,nosuid,nodev          0    2

Use mount -a to mount all the file systems you have specified in your /etc/
fstab, or, to mount file systems individually, use:

# mount /path   # e.g.: mount /usr

Current Debian systems have mountpoints for removable media under /media, but
keep compatibility symlinks in /. Create these as as needed, for example:

# cd /media
# mkdir cdrom0
# ln -s cdrom0 cdrom
# cd /
# ln -s media/cdrom

You can mount the proc file system multiple times and to arbitrary locations,
though /proc is customary. If you didn't use mount -a, be sure to mount proc
before continuing:

# mount -t proc proc /proc

Příkaz ls /proc by nyní měl vypsat neprázdný adresář. Pokud by se tak nestalo,
stále byste měli být schopni připojit proc z vnějšku chrootu:

# mount -t proc proc /mnt/debinst/proc

D.3.4.3. Nastavení časového pásma

Nastavením třetího řádku v souboru /etc/adjtime na hodnotu "LOCAL" resp. "UTC"
systému říkáte, zda má hardwarové hodiny počítače interpretovat jako místní
čas, resp. jako čas v UTC.

# editor /etc/adjtime

Příklad souboru souboru /etc/adjtime:

0.0 0 0.0
0
UTC

Své časové pásmo můžete nastavit příkazem:

# dpkg-reconfigure tzdata

D.3.4.4. Nastavení sítě

To configure networking, edit /etc/network/interfaces, /etc/resolv.conf, /etc/
hostname and /etc/hosts.

# editor /etc/network/interfaces

Here are some simple examples from /usr/share/doc/ifupdown/examples:

######################################################################
# /etc/network/interfaces -- configuration file for ifup(8), ifdown(8)
# See the interfaces(5) manpage for information on what options are
# available.
######################################################################

# The loopback interface isn't really required any longer, but can be used
# if needed.
#
# auto lo
# iface lo inet loopback

# To use dhcp:
#
# auto eth0
# iface eth0 inet dhcp

# An example static IP setup: (network, broadcast and gateway are optional)
#
# auto eth0
# iface eth0 inet static
#     address 192.168.0.42
#     network 192.168.0.0
#     netmask 255.255.255.0
#     broadcast 192.168.0.255
#     gateway 192.168.0.1

Enter your nameserver(s) and search directives in /etc/resolv.conf:

# editor /etc/resolv.conf

A simple example /etc/resolv.conf:

search example.com
nameserver 10.1.1.36
nameserver 192.168.9.100

Enter your system's host name (2 to 63 characters):

# echo DebianHostName > /etc/hostname

And a basic /etc/hosts with IPv6 support:

127.0.0.1 localhost
127.0.1.1 DebianHostName

# The following lines are desirable for IPv6 capable hosts
::1     ip6-localhost ip6-loopback
fe00::0 ip6-localnet
ff00::0 ip6-mcastprefix
ff02::1 ip6-allnodes
ff02::2 ip6-allrouters
ff02::3 ip6-allhosts

If you have multiple network cards, you should arrange the names of driver
modules in the /etc/modules file into the desired order. Then during boot, each
card will be associated with the interface name (eth0, eth1, etc.) that you
expect.

D.3.4.5. Nastavení APT

Debootstrap sice vytvořil základní soubor /etc/apt/sources.list, který umožní
instalaci dalších balíků, ale je možné, že budete chtít přidat další zdroje,
například pro bezpečnostní aktualizace, nebo pro zdrojové balíky:

deb-src http://ftp.cz.debian.org/debian bullseye main

deb http://security.debian.org/ bullseye-security main
deb-src http://security.debian.org/ bullseye-security main

Po úpravách seznamu zdrojů nezapomeňte spustit příkaz apt update.

D.3.4.6. Nastavení místního prostředí a klávesnice

Aby se s vámi systém bavil v jiném jazyce než je angličtina, musíte
nainstalovat a nastavit balík pro podporu národních prostředí. V současnosti se
doporučuje použít prostředí v kódování UTF-8.

# apt install locales
# dpkg-reconfigure locales

Pokud je to potřeba, můžete nakonfigurovat klávesnici:

# apt install console-setup
# dpkg-reconfigure keyboard-configuration

Klávesnici nemůžete nastavit v chrootu, změna se projeví až po příštím
restartu.

D.3.5. Instalace jádra

Jestliže budete chtít tento systém i zavádět (na 99% ano), musíte si
nainstalovat jádro (a možná zavaděč). Následujícím příkazem zjistíte dostupná
připravená jádra:

# apt search linux-image

Poté balík s vybraným jádrem nainstalujte.

# apt install linux-image-arch-atd

D.3.6. Nastavení zavaděče

Abyste mohli zavádět svůj Debian GNU/Linux, nastavte v zavaděči, aby nahrál
instalované jádro s novou kořenovou oblastí. debootstrap sám o sobě zavaděč
neinstaluje, takže jej budete muset doinstalovat zvlášť (např. pomocí apt
uvnitř chrootovaného prostředí).

Check info grub for instructions on setting up the bootloader. If you are
keeping the system you used to install Debian, just add an entry for the Debian
install to your existing grub2 grub.cfg.

Instalace a nastavení grub2 není složitější než spuštění:

# apt install grub-pc
# grub-install /dev/sda
# update-grub

Druhý příkaz nainstaluje grub2 (v tomto případě do hlavního zaváděcího záznamu
(MBR) disku sda). Poslední příkaz vytvoří rozumný a funkční konfigurační soubor
/boot/grub/grub.cfg.

Note that this assumes that a /dev/sda device file has been created. There are
alternative methods to install grub2, but those are outside the scope of this
appendix.

D.3.7. Vzdálený přístup: Instalace SSH a nastavení přístupu

Pokud se do systému můžete přihlásit přes konzoli, můžete tento krok přeskočit.
Jestliže však má být počítač dostupný přes síť, měli byste nainstalovat SSH a
nastavit přístup.

# apt install ssh

Uživatel root má implicitně zakázané přihlášení pomocí hesla. Pokud mu chcete
povolit přístup pomocí hesla tak, jako to bývalo běžné dříve, musíte mu
nastavit heslo a povolit přihlášení pomocí hesla:

# passwd
# editor /etc/ssh/sshd_config

kde musíte povolit volbu

PermitRootLogin yes

Přístup můžete moderněji nastavit také přidáním ssh klíče do seznamu
autorizovaných klíčů uživatele root:

# mkdir /root/.ssh
# cat << EOF > /root/.ssh/authorized_keys
ssh-rsa ....
EOF

Poslední možností je dát přístup běžnému uživateli:

# adduser franta
# passwd franta

D.3.8. Závěrečné kroky

Jak již bylo řečeno dříve, nainstalovaný systém bude poměrně jednoduchý.
Chcete-li z něj udělat systém o něco vyspělejší, doinstalujte alespoň balíky s
prioritou "standardní":

# tasksel install standard

Nic vám samozřejmě nebrání nainstalovat jednotlivé balíky pomocí apt.

Po instalaci zůstanou stažené .deb soubory v adresáři /var/cache/apt/archives/.
Nějaké místo můžete uvolnit jejich smazáním:

# apt clean

D.4. Jak nainstalovat Debian GNU/Linux přes paralelní port (PLIP)

Tato část vysvětluje instalaci Debianu na počítači bez ethernetové karty, ale
na kterém funguje paralelní port, přes který je připojen druhý počítač (brána)
pomocí nullmodemového kabelu. Počítač sloužící jako brána by měl být připojen
do sítě, která obsahuje zrcadlo Debianu (např. Internet).

In the example in this appendix we will set up a PLIP connection using a
gateway connected to the Internet over a dial-up connection (ppp0). We will use
IP addresses 192.168.0.1 and 192.168.0.2 for the PLIP interfaces on the target
system and the source system respectively (these addresses should be unused
within your network address space).

PLIP připojení, které během instalace vytvoříme, bude dostupné i po restartu do
nainstalovaného systému (viz 7 - "Zavedení vašeho nového systému").

Před začátkem instalace byste měli zkontrolovat nastavení BIOSu a poznamenat si
přerušení (IRQ) a bázovou VV adresu (IO base address) paralelních portů na obou
spojovaných systémech. Nejběžnější hodnoty jsou io=0x378 a irq=7.

D.4.1. Požadavky

  • Cílový počítač nahepc, na který budeme instalovat.

  • Instalační média, viz 2.4 - "Instalační média".

  • Pomocný počítač earthsimulator připojený k Internetu, který bude sloužit
    jako brána.

  • Nullmodemový kabel DB-25. Podrobnosti o kabelu naleznete v
    PLIP-Install-HOWTO společně s návodem, jak si můžete tento kabel vyrobit
    vlastními silami.

D.4.2. Nastavení stroje earthsimulator

Následujíc skript ukazuje možné nastavení earthsimulatoru jako brány do
Internetu pomocí ppp0.

#!/bin/sh

# Odstraníme z jádra následující moduly, abychom se vyhnuli
# konfliktům a abychom je mohli nastavit ručně.
modprobe -r lp parport_pc
modprobe parport_pc io=0x378 irq=7
modprobe plip

# Nastavení rozhraní plip (zde je to plip0, viz dmesg | grep plip)
ifconfig plip0 192.168.0.2 pointopoint 192.168.0.1 netmask 255.255.255.255 up

# Nastavení brány
modprobe iptable_nat
iptables -t nat -A POSTROUTING -o ppp0 -j MASQUERADE
echo 1 > /proc/sys/net/ipv4/ip_forward

D.4.3. Instalace na nahepc

Boot the installation media. The installation needs to be run in expert mode;
enter expert at the boot prompt. If you need to set parameters for kernel
modules, you also need to do this at the boot prompt. For example, to boot the
installer and set values for the "io" and "irq" options for the parport_pc
module, enter the following at the boot prompt:

expert parport_pc.io=0x378 parport_pc.irq=7

Below are the answers that should be given during various stages of the
installation.

 1. Load installer components from installation media

    Ze seznamu vyberte možnost plip-modules; tím se instalačnímu systému
    zpřístupní ovladače pro PLIP.

 2. Rozpoznat síťový hardware

      □ Pokud nahepc obsahuje síťové karty, zobrazí se seznam modulů pro
        všechny rozpoznané karty. Trváte-li na použití PLIP, musíte všechny
        vybrané moduly odznačit. Samozřejmě že pokud nejsou rozpoznány žádné
        karty, seznam se nezobrazí.

      □ Protože nebyly nalezeny/vybrány žádné síťové karty, instalační systém
        vás požádá o výběr vhodného modulu s ovladačem. Vyberte modul plip.

 3. Nastavit síť

      □ Automaticky nastavit síť přes DHCP: Ne

      □ IP adresa: 192.168.0.1

      □ Point-to-point adresa: 192.168.0.2

      □ Adresy jmenných serverů: můžete zadat stejnou hodnotu, jako máte na
        earthsimulatoru (viz soubor /etc/resolv.conf)

D.5. Jak nainstalovat Debian GNU/Linux pomocí PPP přes Ethernet (PPPoE)

V některých zemích (např. v České republice) se mezi poskytovatelem
širokopásmového připojení k Internetu pomocí ADSL nebo kabelové televize a
koncovým zákazníkem běžně používá protokol PPP přes Ethernet (PPPoE). Použití
PPPoE během instalace není v běžném instalátoru podporováno, ale podpora
existuje a stačí ji zapnout. Tato kapitola vysvětluje jak.

PPPoE spojení vytvořené během instalace bude k dispozici i po restartu do
nového systému (viz 7 - "Zavedení vašeho nového systému").

To have the option of setting up and using PPPoE during the installation, you
will need to install using one of the CD-ROM/DVD images that are available. It
is not supported for other installation methods (e.g. netboot).

Instalace pomocí PPPoE je téměř shodná s ostatními instalacemi, drobné rozdíly
jsou zachyceny v následujících bodech.

  • Instalační systém zaveďte se zaváděcím parametrem modules=ppp-udeb^[24].
    Tímto zajistíte, aby se automaticky zavedla komponenta zodpovědná za
    nastavení PPPoE (ppp-udeb).

  • Stejně jako v běžné instalaci projděte nastavením jazyka, země, klávesnice
    a zavedením dodatečných komponent instalačního systému^[25].

  • Dalším krokem je rozpoznání síťového hardwaru v systému.

  • Poté se spustí vlastní nastavení PPPoE. Instalační systém postupně zkusí na
    každém rozpoznaném ethernetovém rozhraní nalézt PPPoE koncentrátor (to je
    typ serveru, který se stará o PPPoE spojení).

    Je možné, že se koncentrátor nepodaří nalézt na první pokus. To se občas
    stává na pomalých nebo hodně zatížených sítích, případně u porouchaných
    serverů. Opakovaný pokus o nalezení koncentrátoru většinou bývá úspěšný.
    Pro opakování vyberte z hlavního menu instačního systému položku Nastavit a
    spustit PPPoE spojení.

  • Po nalezení koncentrátoru budete dotázáni na přihlašovací informace (PPPoE
    jméno uživatele a heslo).

  • V tomto okamžiku se instalační systém pokusí navázat PPPoE spojení.
    Jestliže byly zadané informace správné, PPPoE spojení se nastaví a bude k
    dispozici po zbytek instalace. Pokud jste zadali chybné přihlašovací
    informace, nebo pokud se vyskytne nějaká jiná chyba, instalace se zastaví,
    ale stále budete mít možnost se vrátit do hlavního menu a zkusit krok
    zopakovat; stačí znovu vybrat možnost Nastavit a spustit PPPoE spojení.


━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

^[22] Sériové myši mají obvykle konektor tvaru D s devíti otvory. Sběrnicové
myši mají kulatý 8 pinový konektor. Pozor, neplést s 6 pinovým kulatým
konektorem myší PS/2 a 4 pinovým kulatým konektorem ADB.

^[23] Sem patří GNU core utilities a příkazy typu sed, grep, tar a gzip.

^[24] Více informací o použití zaváděcích parametrů naleznete v části 5.1.7 -
"Zaváděcí obrazovka".

^[25] V tomto kroku se nahraje komponenta ppp-udeb. Instalujete-li se střední
nebo nízkou prioritou (expertní režim), můžete zde ručně zvolit ppp-udeb a
nemusíte používat zaváděcí parametr "modules" z předchozího kroku.

Příloha E. Administrivia

Obsah

E.1. O tomto dokumentu
E.2. Jak přispět k tomuto návodu
E.3. Hlavní spoluautoři
E.4. Ochranné známky

E.1. O tomto dokumentu

Tato příručka byla vytvořena pro instalaci distribuce Sarge (debian-installer).
Příručka vychází z dřívějšího manuálu pro Woodyho (boot-floppies), který je
zase založen na předchozích instalačních manuálech. Využili jsme i částí manálu
distribuce Progeny, který byl v roce 2003 uvolněn pod licencí GNU GPL.

Tento dokument je napsán ve formátu XML DocBook. Výstupní formáty jsou
generovány různými programy využívající informace z balíků docbook-xml a
docbook-xsl.

Aby byl dokument lépe udržovatelný, používáme různé výhody XML, jako jsou
entity a profilovací atributy, které nahrazují proměnné a podmínky z
programovacích jazyků. Zdrojový text příručky například obsahuje pohromadě
informace pro všechny podporované typy počítačových architektur. Pomocí
profilovacích atributů jsou různé pasáže textu označeny jako závislé na dané
architektuře a při překladu se zobrazí jenom v určitých verzích dokumentu.

Tento dokument smí být šířen za podmínek uvedených v GNU General Public
License. Vlastníkem autorských práv k překladu je Miroslav Kuře <
kurem@debian.cz> a historicky též Jiří Mašík <masik@debian.cz> a Vilém Vychodil
<vychodiv@debian.cz>.

E.2. Jak přispět k tomuto návodu

Problémy a vylepšení týkající se tohoto dokumentu zasílejte formou bug reportu
(hlášení o chybě) v balíku installation-guide. (Viz popis v balíku reportbug
nebo online dokumentace Debian Bug Tracking System.) Před nahlášením problému
je vždy dobré nejprve zkontrolovat databázi otevřených chyb balíku
installation-guide, zda již chyba nebyla hlášena. Pokud stejný problém najdete
mezi neuzavřenými chybami, můžete doplnit existující popis o váš poznatek
zasláním zprávy na adresu <XXXX@bugs.debian.org>, kde XXXX je číslo již
nahlášeného problému.

Better yet, get a copy of the DocBook source for this document, and produce
patches against it. The DocBook source can be found at the installation-guide
project on salsa. If you're not familiar with DocBook, don't worry: there is a
simple cheatsheet in the manuals directory that will get you started. It's like
html, but oriented towards the meaning of the text rather than the
presentation. Patches submitted to the debian-boot mailing list (see below) are
welcomed. For instructions on how to check out the sources via git, see README
from the source root directory.

Prosíme vás, abyste nekontaktovali autory tohoto dokumentu přímo. Existuje
emailová konference balíku debian-installer, která je zaměřena i na tento
manuál. Její adresa je <debian-boot@lists.debian.org>. Návod pro přihlášení do
konference naleznete na stránce Přihlášení do diskusních listů Debianu. Starší
zprávy jsou dostupné v archivu diskusních listů Debianu.

E.3. Hlavní spoluautoři

Tento dokument původně napsali Bruce Perens, Sven Rudolph, Igor Grobman, James
Treacy a Adam Di Carlo. Sebastian Ley sepsal Installation Howto.

Miroslav Kuře zdokumentoval (prý velké) části funkcionality nového instalačního
programu pro Sarge. Frans Pop byl hlavním editorem a release managerem během
vydání Etche, Lennyho a Squeeze.

K tomuto dokumentu přispělo mnoho uživatelů a vývojářů Debianu. Zmiňme alespoň
Michaela Schmitze (m68k), Franka Neumanna (je autorem instalačního manuálu pro
Amigu). Dále to jsou Arto Astala, Eric Delaunay/Ben Collins (SPARC), Tapio
Lehtonen a Stéphane Bortzmeyer (mnoho oprav a textu). Také je třeba poděkovat
Pascalu Le Bailovi za užitečné informace o zavádění z USB zařízení.

Velmi užitečné informace jsme nalezli v dokumentech "Jim Mintha's HOWTO for
network booting" (neznámá adresa), Debian FAQ, Linux/m68k FAQ, Linux for SPARC
Processors FAQ, Linux/Alpha FAQ a dalších. Uznání samozřejmě patří i lidem,
kteří tyto volně dostupné a bohaté zdroje informací spravují.

Část manuálu zabývající se chrootovanou instalací (D.3 - "Jak nainstalovat
Debian GNU/Linux ze stávajícího unixového/linuxového systému") je částečně
odvozena z dokumentů na něž vlastní copyright Karsten M. Self.

Kapitola zabývající se instalací přes (D.4 - "Jak nainstalovat Debian GNU/Linux
přes paralelní port (PLIP)") je založena na PLIP-Install-HOWTO od Gilla
Lamirala.

E.4. Ochranné známky

Všechny ochranné známky jsou majetkem svých vlastníků.

Příloha F. Český překlad GNU General Public License

Český překlad verze 2, červen 1991

Copyright (C) 1989, 1991 Free Software Foundation, Inc.
51 Franklin St, Fifth Floor, Boston, MA 02110-1301, USA.

Kopírování a distribuce doslovných kopií tohoto licenčního dokumentu jsou
dovoleny komukoliv, jeho změny jsou však zakázány.

F.1. Preambule

Softwarové licence jsou většinou navrženy tak, že vám odebírají právo
svobodného sdílení a úprav programů. Smyslem GNU General Public License je
naproti tomu zaručit svobodu ke sdílení a úpravám svobodného softwaru -- pro
zajištění svobodného přístupu k tomuto softwaru pro všechny jeho uživatele.
Tato General Public License se vztahuje na většinu softwaru nadace Free
Software Foundation a na jakýkoli jiný program, jehož autor se přikloní k
jejímu používání. (Některý další software od Free Software Foundation je
namísto toho pokryt GNU Lesser General Public License.) Můžete ji rovněž použít
pro své programy.

Pokud mluvíme o svobodném softwaru, máme na mysli svobodu, nikoliv cenu. Naše
General Public License je navržena pro zajištění toho, že můžete svobodně šířit
kopie svobodného softwaru (a účtovat si poplatek za tuto službu, pokud chcete),
že obdržíte zdrojový kód anebo jej můžete získat, pokud ho chcete, že můžete
tento software modifikovat nebo jeho části použít v nových svobodných
programech; a že víte, že tyto věci smíte dělat.

Abychom mohli chránit vaše práva, musíme vytvořit omezení, která zakáží
komukoli vám tato práva odepírat nebo vás žádat, abyste se těchto práv vzdali.
Tato omezení se promítají do jistých povinností, kterým musíte dostát, pokud
šíříte kopie dotyčného softwaru anebo ho modifikujete.

Například, šíříte-li kopie takového programu, ať již zdarma nebo za poplatek,
musíte poskytnout příjemcům všechna práva, která máte sami. Musíte zaručit, že
příjemci rovněž dostanou anebo mohou získat zdrojový kód. A musíte jim ukázat
tyto podmínky, aby znali svá práva.

Vaše práva chráníme ve dvou krocích: (1) autorizací softwaru a (2) nabídkou
této licence, která vám dává právoplatné svolení ke kopírování, šíření a
modifikaci softwaru.

Kvůli ochraně každého autora i nás samotných chceme zajistit, aby každý chápal
skutečnost, že pro svobodný software neplatí žádné záruky. Je-li software někým
jiným modifikován a poslán dále, chceme, aby příjemci věděli, že to, co mají,
není originál, takže jakékoliv problémy vnesené jinými se neodrazí na reputaci
původních autorů.

Konečně, každý svobodný program je neustále ohrožen softwarovými patenty.
Přejeme si zamezit nebezpečí, že redistributoři svobodného programu obdrží
samostatně patentová osvědčení a tím učiní program vázaným. Abychom tomu
zamezili, deklarovali jsme, že každý patent musí být buď vydán s tím, že
umožňuje každému svobodné užití, anebo nesmí být vydán vůbec.

Přesná ustanovení a podmínky pro kopírování, šíření a modifikaci jsou uvedeny
dále.

F.2. GNU GENERAL PUBLIC LICENSE

USTANOVENÍ A PODMÍNKY PRO KOPÍROVÁNÍ, DISTRIBUCI A MODIFIKACI

0. Tato licence se vztahuje na kterýkoliv program či jiné dílo, které obsahuje
zmínku, umístěnou v něm držitelem autorských práv, o tom, že dílo může být
šířeno podle ustanovení GNU General Public License. V dalším textu znamená "
program" každý takový program nebo dílo a "dílo založené na programu" znamená
buď program samotný anebo každé jiné dílo z něj odvozené, které podléhá
autorskému zákonu: tím se míní dílo obsahující program nebo jeho část, buď
doslovně anebo s modifikacemi, popřípadě v překladu do jiného jazyka. (Nadále
je překlad zahrnován bez omezení pod pojem "modifikace".) Každý uživatel
licence je označován jako "vy".

Jiné činnosti než kopírování, šíření a modifikace nejsou touto licencí pokryty;
sahají mimo její rámec. Akt spuštění programu není omezen a výstup z programu
je pokryt pouze tehdy, jestliže obsah výstupu tvoří dílo založené na programu
(nezávisle na tom, zda bylo vytvořeno činností programu). Posouzení platnosti
předchozí věty závisí na tom, co program dělá.

1. Smíte kopírovat a šířit doslovné kopie zdrojového kódu programu tak, jak
jste jej obdrželi a na libovolném médiu, za předpokladu, že na každé kopii
viditelně a náležitě zveřejníte zmínku o autorských právech a absenci záruky;
ponecháte nedotčené všechny zmínky vztahující se k této licenci a k absenci
záruky; a dáte každému příjemci spolu s programem kopii této licence.

Za fyzický akt přenesení kopie můžete žádat poplatek a podle vlastního uvážení
můžete nabídnout za poplatek záruční ochranu.

2. Můžete modifikovat svou kopii či kopie programu anebo kterékoliv jeho části,
a tak vytvořit dílo založené na programu a kopírovat a rozšiřovat takové
modifikace či dílo podle podmínek paragrafu 1 výše za předpokladu, že splníte
všechny tyto podmínky:

 a. Modifikované soubory musíte opatřit zřetelnou zmínkou uvádějící, že jste
    soubory změnili a také uvést datum každé změny.

 b. Musíte umožnit, aby jakékoliv vámi publikované či rozšiřované dílo, které
    obsahuje zcela nebo zčásti program nebo jakoukoli jeho část, popřípadě je z
    programu nebo jeho části odvozeno, mohlo být jako celek bezplatně
    poskytnuto každé třetí osobě v souladu s ustanoveními této licence.

 c. Pokud modifikovaný program pracuje normálně tak, že čte interaktivně
    povely, musíte zajistit, že při nejběžnějším způsobu jeho spuštění vytiskne
    nebo zobrazí hlášení zahrnující příslušnou zmínku o autorském právu a
    uvede, že neexistuje žádná záruka (nebo případně, že záruku poskytujete
    vy), a že uživatelé mohou za těchto podmínek program redistribuovat, a musí
    uživateli sdělit, jakým způsobem může nahlédnout do kopie této licence.
    (Výjimka: v případě, že sám program je interaktivní, avšak žádné takové
    hlášení nevypisuje, nepožaduje se, aby vaše dílo založené na programu
    takové hlášení vypisovalo.)

Tyto požadavky se vztahují k modifikovanému dílu jako celku. Pokud lze
identifikovat části takového díla, které zřejmě nejsou odvozeny z programu a
mohou být samy o sobě rozumně považovány za nezávislá a samostatná díla, pak se
tato licence a její ustanovení nevztahují na tyto části, jsou-li šířeny jako
nezávislá díla. Avšak jakmile tytéž části rozšiřujete jako část celku, jímž je
dílo založené na programu, musí být rozšiřování tohoto celku podřízeno
ustanovením této licence tak, že povolení poskytnutá dalším uživatelům se
rozšíří na celé dílo, tedy na všechny jeho části bez ohledu na to, kdo kterou
část napsal.

Smyslem tohoto paragrafu tedy není získání práv na dílo zcela napsané vámi ani
popírání vašich práv vůči němu; skutečným smyslem je výkon práva na řízení
distribuce odvozených nebo kolektivních děl založených na programu.

Pouhé spojení jiného díla, jež není na programu založeno, s programem (anebo
dílem založeným na programu) na paměťovém nebo distribučním médiu neuvazuje
toto jiné dílo do působnosti této licence.

3. Můžete kopírovat a rozšiřovat program (nebo dílo na něm založené, viz
paragraf 2) v objektové anebo spustitelné podobě podle ustanovení paragrafů 1
a 2 výše, pokud splníte některou z následujících náležitostí:

 a. Doprovodíte jej zdrojovým kódem ve strojově čitelné formě. Zdrojový kód
    musí být rozšiřován podle ustanovení paragrafů 1 a 2 výše, a to na médiu
    běžně používaném pro výměnu softwaru; nebo

 b. Doprovodíte jej písemnou nabídkou s platností nejméně tři roky, podle níž
    poskytnete jakékoli třetí straně, za poplatek nepřevyšující vaše výdaje
    vynaložené na fyzickou výrobou zdrojové distribuce, kompletní strojově
    čitelnou kopii odpovídajícího zdrojového kódu, jenž musí být šířen podle
    ustanovení paragrafů 1 a 2 výše na médiu běžně používaném pro výměnu
    softwaru; nebo

 c. Doprovodíte jej informacemi, které jste dostali ohledně nabídky na
    poskytnutí zdrojového kódu. (Tato alternativa je povolena jen pro
    nekomerční šíření a jenom tehdy, pokud jste obdržel program v objektovém
    nebo spustitelném tvaru spolu s takovou nabídkou, v souladu s položkou b
    výše.)

Zdrojový kód k dílu je nejvhodnější formou díla z hlediska jeho případných
modifikací. Pro dílo ve spustitelném tvaru znamená úplný zdrojový kód veškerý
zdrojový kód pro všechny moduly, které obsahuje, plus jakékoli další soubory
pro definici rozhraní, plus dávkové soubory potřebné pro kompilaci a instalaci
spustitelného programu. Zvláštní výjimkou jsou však ty softwarové komponenty,
které jsou normálně šířeny (buď ve zdrojové nebo binární formě) s hlavními
součástmi operačního systému, na němž spustitelný program běží (tj. s
překladačem, jádrem apod.). Tyto komponenty nemusí být šířeny se zdrojovým
kódem, pokud ovšem komponenta sama nedoprovází spustitelnou podobu díla.

Je-li šíření objektového nebo spustitelného kódu činěno nabídkou přístupu ke
kopírování z určitého místa, potom se za distribuci zdrojového kódu počítá i
nabídnutí ekvivalentního přístupu ke kopírování zdrojového kódu ze stejného
místa, byť přitom nejsou třetí strany nuceny ke zkopírování zdrojového kódu
spolu s objektovým.

4. Nesmíte kopírovat, modifikovat, poskytovat sublicence anebo šířit program
jiným způsobem než výslovně uvedeným v této licenci. Jakýkoli jiný pokus o
kopírování, modifikování, poskytnutí sublicence anebo šíření programu je
neplatný a automaticky ukončí vaše práva daná touto licencí. Strany, které od
vás obdržely kopie anebo práva v souladu s touto licencí, však nemají své
licence ukončeny, dokud se jim plně podřizují.

5. Není vaší povinností tuto licenci přijmout, protože jste ji nepodepsal. Nic
jiného vám však nedává možnost kopírovat nebo šířit program nebo odvozená díla.
V případě, že tuto licenci nepřijmete, jsou tyto činnosti zákonem zakázány. Tím
pádem modifikací anebo šířením programu (anebo každého díla založeného na
programu) vyjadřujete své podřízení se licenci a všem jejím ustanovením a
podmínkám pro kopírovaní, modifikování a šíření programu a děl na něm
založených.

6. Pokaždé, když redistribuujete program (nebo dílo založené na programu),
získává příjemce od původního držitele licence právo kopírovat, modifikovat a
šířit program v souladu s těmito ustanoveními a podmínkami. Nesmíte klást žádné
další překážky výkonu zde zaručených příjemcových práv. Nejste odpovědný za
vymáhání dodržování této licence třetími stranami.

7. Jsou-li vám z rozhodnutí soudu, obviněním z porušení patentu nebo z
jakéhokoli jiného důvodu (nejen v souvislosti s patenty) uloženy takové
podmínky (ať již příkazem soudu, smlouvou nebo jinak), které se vylučují s
podmínkami této licence, nejste tím osvobozen od podmínek této licence. Pokud
nemůžete šířit program tak, abyste vyhověl zároveň svým závazkům vyplývajícím z
této licence a jiným platným závazkům, nesmíte jej v důsledku toho šířit vůbec.
Pokud by například patentové osvědčení nepovolovalo bezplatnou redistribuci
programu všemi, kdo vaším přičiněním získají přímo nebo nepřímo jeho kopie, pak
by jediný možný způsob jak vyhovět zároveň patentovému osvědčení i této licenci
spočíval v ukončení distribuce programu.

Pokud by se za nějakých specifických okolností jevila některá část tohoto
paragrafu jako neplatná nebo nevynutitelná, považuje se za směrodatnou
rovnováha vyjádřená tímto paragrafem a paragraf jako celek se považuje za
směrodatný za jiných okolností.

Smyslem tohoto paragrafu není navádět vás k porušování patentů či jiných
ustanovení vlastnického práva, anebo tato ustanovení zpochybňovat; jediným jeho
smyslem je ochrana integrity systému šíření svobodného softwaru, který je
podložen veřejnými licenčními předpisy. Mnozí lidé poskytli své příspěvky do
širokého okruhu softwaru šířeného tímto systémem, spolehnuvše se na jeho
důsledné uplatňování; záleží na autorovi/dárci, aby rozhodl, zda si přeje šířit
software pomocí nějakého jiného systému a žádný uživatel licence nemůže takové
rozhodnutí zpochybňovat.

Smyslem tohoto paragrafu je zevrubně osvětlit to, co je považováno za důsledek
plynoucí ze zbytku této licence.

8. Pokud je šíření či použití programu v některých zemích omezeno buď patenty
anebo autorsky chráněnými rozhraními, může držitel původních autorských práv,
který svěřuje program do působnosti této licence, přidat výslovné omezení pro
geografické šíření, vylučující takové země, takže šíření je povoleno jen v těch
zemích nebo mezi těmi zeměmi, které nejsou tímto způsobem vyloučeny. Tato
licence zahrnuje v tomto případě takové omezení přesně tak, jako by bylo
zapsáno v textu této licence.

9. Free Software Foundation může čas od času vydávat upravené nebo nové verze
General Public License. Takové nové verze se budou svým duchem podobat současné
verzi, v jednotlivostech se však mohou lišit s ohledem na nové problémy či
zájmy. Každé verzi je přiděleno rozlišující číslo verze. Pokud program
specifikuje číslo verze, která se na něj vztahuje, a "všechny následující verze
", můžete se podle uvážení řídit ustanoveními a podmínkami buďto oné konkrétní
verze anebo kterékoliv následující verze, kterou vydala Free Software
Foundation. Jestliže program nespecifikuje číslo verze této licence, můžete si
vybrat libovolnou verzi, kterou kdy Free Software Foundation vydala.

10. Pokud si přejete zahrnout části programu do jiných svobodných programů,
jejichž distribuční podmínky jsou odlišné, zašlete autorovi žádost o povolení.
V případě softwaru, k němuž vlastní autorská práva Free Software Foundation,
napište Free Software Foundation; někdy činíme výjimky ze zde uvedených
ustanovení. Naše rozhodnutí bude vedeno dvěma cíli: zachováním svobodné povahy
všech odvozenin našeho svobodného softwaru a podporou sdílení a opětovného
využití softwaru obecně.

ZÁRUKA SE NEPOSKYTUJE

11. Vzhledem k bezplatnému poskytnutí licence k programu se na program
nevztahuje žádná záruka, a to v míře povolené platným zákonem. pokud není
písemně stanoveno jinak, poskytují držitelé autorských práv popřípadě jiné
strany program "tak, jak je", bez záruky jakéhokoli druhu, ať výslovné nebo
vyplývající, včetně, ale nikoli jen, záruk prodejnosti a vhodnosti pro určitý
účel. Pokud jde o kvalitu a výkonnost programu, leží veškeré riziko na vás.
pokud by se u programu projevily závady, padají náklady za všechnu potřebnou
údržbu, opravu či nápravu na váš vrub.

12. V žádném případě, s výjimkou toho, když to vyžaduje platný zákon, anebo
když to bylo písemně odsouhlaseno, vám nebude žádný z držitelů autorských práv
ani žádná jiná strana, která smí modifikovat či šířit program v souladu s
předchozími ustanoveními, odpovědni za škody, včetně všech obecných,
speciálních, nahodilých nebo následných škod vyplývajících z užívání anebo
neschopnosti užívat programu (včetně, ale nikoli jen, ztráty nebo zkreslení
dat, nebo trvalých škod způsobených vám nebo třetím stranám, nebo selhání
funkce programu v součinnosti s jinými programy), a to i v případě, že takový
držitel autorských práv nebo jiná strana byli upozorněni na možnost takových
škod.

KONEC USTANOVENÍ A PODMÍNEK

F.3. Jak uplatnit tato ustanovení na vaše nové programy

Pokud vyvinete nový program a chcete, aby byl veřejnosti co nejvíce k užitku,
můžete toho nejlépe dosáhnout tím, že jej prohlásíte za svobodný software,
který může kdokoliv redistribuovat a měnit za zde uvedených podmínek.

K tomu stačí připojit k programu následující údaje. Nejbezpečnější cestou je
jejich připojení na začátek každého zdrojového souboru, čímž se nejúčinněji
sdělí vyloučení záruky; a v každý souboru by pak měla být přinejmenším řádka s 
"copyrightem" a odkaz na místo, kde lze nalézt úplné údaje.

řádka se jménem programu a nástinem toho, co dělá.
Copyright (C) rok jméno autora

Tento program je svobodný software; můžete jej šířit a modifikovat
podle ustanovení GNU General Public License, vydávané Free Software
Foundation; a to buď verze 2 této licence anebo (podle vašeho uvážení)
kterékoli pozdější verze.

Tento program je rozšiřován v naději, že bude užitečný, avšak BEZ
JAKÉKOLI ZÁRUKY; neposkytují se ani odvozené záruky PRODEJNOSTI anebo
VHODNOSTI PRO URČITÝ ÚČEL. Další podrobnosti hledejte ve GNU General
Public License.

Kopii GNU General Public License jste měli obdržet spolu s tímto
programem; pokud se tak nestalo, napište o ni Free Software
Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston,
MA 02110-1301, USA.

Připojte rovněž informaci o tom, jak je možné se s vámi spojit elektronickou a
papírovou poštou.

Pokud je program interaktivní, zařiďte, aby se při startu v interaktivním módu
vypsalo hlášení podobné tomuto:

Gnomovision verze 69, Copyright (C) rok jméno autora.

Program Packal je absolutně bez záruky; podrobnosti se dozvíte
zadáním show w.

Toto je svobodný software a jeho šíření za jistých podmínek je vítáno;
podrobnosti získáte zadáním show c.

Hypotetické povely "show w" a "show c" by měly zobrazit příslušné pasáže
General Public License. Odpovídající povely ovšem nemusí být právě "show w" a "
show c"; mohou to být třeba stisky tlačítka na myši nebo položky v menu --
cokoliv, co se do vašeho programu hodí.

Pokud je to nutné, měli byste také přimět svého zaměstnavatele (jestliže
pracujete jako programátor) nebo představitele vaší školy, je-li někdo takový,
k tomu, aby podepsal "zřeknutí se autorských práv". Zde je vzor; jména
pozměňte:

Jojotechna, a.s., se tímto zříká veškerého zájmu o autorská práva
k programu Packal (překladač s nakladačem) napsanému Jakubem
Programátorem.

Tomáš Ředitel - podpis, 1. dubna 1989

Tomáš Ředitel, více než prezident

Tato General Public License neumožňuje zahrnutí vašeho programu do jiných než
svobodných programů. Je-li váš program knihovnou podprogramů, můžete zvážit,
zda je užitečné umožnit sestavování i vázaných aplikačních programů s vaší
knihovnou. V takovém případě použijte GNU Lesser General Public License namísto
této licence.

