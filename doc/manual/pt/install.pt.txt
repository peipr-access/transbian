Guia de Instalação de Debian GNU/Linux

Copyright © 2004 - 2021 A equipa do Instalador Debian

Este manual é software livre; você pode redistribuí-lo e/ou modificá-lo nos
termos da GNU General Public License. Referências à licença no Apêndice F, GNU
General Public License.

Versão da compilação deste manual: 20220129~deb11u1.

Resumo

Este documento contém as instruções de instalação para o sistema Debian GNU/
Linux 11, (nome de código "bullseye"), para a arquitetura 64-bit PC ("amd64").
Também contém indicações para mais informações e formas de tirar o máximo do
seu novo sistema Debian.

Se desejar melhorar, manter, contribuir ou fazer comentários acerca da tradução
deste manual entre em contacto com a equipa de tradução em DebianPT.org.

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

Índice

Instalar Debian GNU/Linux 11 para amd64
1. Bem-vindo a Debian

    1.1. O que é Debian?
    1.2. O que é GNU/Linux?
    1.3. O que é Debian GNU/Linux?
    1.4. O que é o Debian Installer?
    1.5. Obter Debian
    1.6. Obter a Versão Mais Recente Deste Documento
    1.7. Organização Deste Documento
    1.8. Acerca de Direitos de Cópia e Licenças de Software

2. Requisitos do Sistema

    2.1. Hardware Suportado

        2.1.1. Arquiteturas Suportadas
        2.1.2. CPUs Suportados
        2.1.3. Portáteis
        2.1.4. Múltiplos Processadores
        2.1.5. Suporte de Hardware Gráfico
        2.1.6. Hardware Para Ligação em Rede
        2.1.7. Ecrãs Braille
        2.1.8. Hardware Sintetizador de Voz
        2.1.9. Periféricos e Outro Hardware

    2.2. Dispositivos que Necessitam de Firmware
    2.3. Comprar Hardware Especificamente para GNU/Linux

        2.3.1. Evitar Hardware Fechado ou Proprietário.

    2.4. Meios de Instalação

        2.4.1. CD-ROM/DVD-ROM/BD-ROM
        2.4.2. Pens USB
        2.4.3. Rede
        2.4.4. Disco Rígido
        2.4.5. Un*x ou sistema GNU
        2.4.6. Sistemas de Armazenamento Suportados

    2.5. Requisitos de Memória e de Espaço em Disco

3. Antes de Instalar Debian GNU/Linux

    3.1. Vista Geral do Processo de Instalação
    3.2. Faça uma Cópia de Segurança aos Seus Dados Existentes!
    3.3. Informação Que Vai Necessitar

        3.3.1. Documentação
        3.3.2. Encontrar Fontes de Informação acerca de Hardware
        3.3.3. Compatibilidade de Hardware
        3.3.4. Configurações de rede

    3.4. Reunir os Requisitos Mínimos de Hardware
    3.5. Pré-Particionamento para sistemas Multi-Boot
    3.6. Pré-Instalação do Hardware e Configuração do Sistema Operativo

        3.6.1. Invocar o Menu de Configuração da BIOS/UEFI
        3.6.2. Seleção de Dispositivo Para Arranque
        3.6.3. Sistemas com firmware UEFI
        3.6.4. Arranque seguro
        3.6.5. Desabilitar a funcionalidade "fast boot"/"fast startup" do
            Windows
        3.6.6. Problemas de Hardware Para Estar Atento

4. Obter o Meio de Instalação do Sistema

    4.1. Imagens de instalação oficiais de Debian GNU/Linux
    4.2. Download dos Ficheiros a partir dos Mirrors Debian

        4.2.1. Onde Encontrar Ficheiros de Instalação

    4.3. Preparar Ficheiros para iniciar a partir de pen USB

        4.3.1. Preparar uma pen USB utilizando uma imagem híbrida de CD/DVD
        4.3.2. Copiar manualmente os ficheiros para a pen USB
        4.3.3. Copiar ficheiros manualmente para a pen USB -- a forma flexível

    4.4. Preparar Ficheiros para Arrancar a Partir de Disco Rígido.

        4.4.1. Arrancar o instalador de disco rígido a partir de Linux
            utilizando GRUB
        4.4.2. Arrancar o instalador de disco rígido a partir de DOS utilizando
            loadlin

    4.5. Preparar Ficheiros para Arrancar Através da Rede por TFTP

        4.5.1. Configurar um servidor DHCP
        4.5.2. Configurar o servidor BOOTP
        4.5.3. Disponibilizar o Servidor TFTP
        4.5.4. Mover Imagens TFTP Para o Lugar

    4.6. Instalação Automática

        4.6.1. Instalação Automática Utilizando o Instalador Debian

    4.7. Verificar a integridade dos ficheiros de instalação

5. Arrancar o Sistema de Instalação

    5.1. Arrancar o Instalador em 64-bit PC

        5.1.1. Arrancar a partir de pen USB
        5.1.2. Arrancar a partir de um disco óptico (CD/DVD)
        5.1.3. Arrancar a partir do Windows
        5.1.4. A arrancar a partir do DOS com o loadlin
        5.1.5. A arrancar a partir de Linux utilizando GRUB
        5.1.6. Arrancar com TFTP
        5.1.7. Um Ecrã de Arranque
        5.1.8. O Instalador Gráfico

    5.2. Acessibilidade

        5.2.1. Front-end do Instalador
        5.2.2. Ecrãs Braille USB
        5.2.3. Ecrãs Braille Série
        5.2.4. Software para Sintetizar Voz
        5.2.5. Hardware para Sintetizar Voz
        5.2.6. Dispositivos em Placa
        5.2.7. Tema de Alto Contraste
        5.2.8. Zoom
        5.2.9. Instalação avançada, modo de recuperação e instalação
            automatizada
        5.2.10. Acessibilidade do sistema instalado

    5.3. Parâmetros de Arranque

        5.3.1. Consola de arranque
        5.3.2. Parâmetros de instalação Debian
        5.3.3. Utilizar parâmetros de arranque para responder a questões
        5.3.4. Passagem de argumentos a módulos do kernel
        5.3.5. Colocar módulos do kernel na lista negra

    5.4. Diagnosticar Problemas no Processo de Instalação

        5.4.1. Fiabilidade de meios ópticos
        5.4.2. Configuração de arranque
        5.4.3. Software para Sintetizar Voz
        5.4.4. Problemas comuns de Instalação em 64-bit PC
        5.4.5. Interpretar as Mensagens de Arranque do Kernel
        5.4.6. Relatar Problemas de Instalação
        5.4.7. Submeter Relatórios de Instalação

6. Utilizar o Instalador Debian

    6.1. Como Funciona o Instalador

        6.1.1. Utilizar o instalador gráfico

    6.2. Introdução de Componentes
    6.3. Utilizar Componentes Individuais

        6.3.1. Preparar o Instalador Debian e a Configuração de Hardware
        6.3.2. Definir Utilizadores E Palavras-Passe
        6.3.3. Configurar o Relógio e o Fuso Horário
        6.3.4. Particionar e Escolher os Pontos de Montagem
        6.3.5. Instalar o Sistema Base
        6.3.6. Instalar Software Adicional
        6.3.7. Tornar o Sistema Iniciável
        6.3.8. Terminar a Instalação
        6.3.9. Resolução de problemas
        6.3.10. Instalação através de network-console

    6.4. Carregar Firmware em Falta

        6.4.1. Preparar um meio
        6.4.2. Firmware e o Sistema Instalado
        6.4.3. Completar o Sistema Instalado

    6.5. Personalização

        6.5.1. Instalar um sistema init alternativo

7. A Iniciar O Seu Novo Sistema Debian

    7.1. O Momento da Verdade
    7.2. Montar volumes encriptados

        7.2.1. Diagnóstico de problemas

    7.3. Log In

8. Próximos Passos e Onde Ir a Partir Daqui

    8.1. Desligar o sistema
    8.2. Oriente-se em Debian

        8.2.1. Sistema de Pacotes Debian
        8.2.2. Software Adicional Disponível para Debian
        8.2.3. Aplicação de Gestão de Versões
        8.2.4. Gestão dos Cron Jobs

    8.3. Leitura e Informação Adicional
    8.4. Configurar o Seu Sistema Para Utilizar E-Mail

        8.4.1. Configuração Predefinida de E-Mail
        8.4.2. Enviar E-Mails Para Fora do Sistema
        8.4.3. Configurando o Mail Transport Agent Exim4

    8.5. Compilando um Novo Kernel
    8.6. Recuperar um Sistema Estragado

A. Howto de Instalação

    A.1. Preliminares
    A.2. Iniciar o instalador

        A.2.1. Disco Óptico
        A.2.2. Pen de memória USB
        A.2.3. Iniciar a partir da rede
        A.2.4. Iniciar de disco rígido

    A.3. Instalação
    A.4. Envie-nos um relatório de instalação
    A.5. E finalmente...

B. Automatizar a instalação utilizando preseeding

    B.1. Introdução

        B.1.1. Métodos de preseed
        B.1.2. Limitações

    B.2. Utilizar o preseed

        B.2.1. Carregar o ficheiro de pré-configuração
        B.2.2. Utilizar parâmetros de arranque para fazer preseed a questões
        B.2.3. Modo Auto
        B.2.4. Abreviaturas úteis com o preseed
        B.2.5. Exemplos de preseeding pela linha de comandos de arranque
        B.2.6. Utilizar um servidor de DHCP para especificar ficheiros de
            pré-configuração

    B.3. Criar um ficheiro de pré-configuração
    B.4. Conteúdo do ficheiro de pré-configuração (para bullseye)

        B.4.1. Localização
        B.4.2. Configuração de rede
        B.4.3. Consola de rede
        B.4.4. Parâmetros do mirror
        B.4.5. Configuração de contas
        B.4.6. Configuração do relógio e fuso horário
        B.4.7. Particionamento
        B.4.8. Instalação do sistema base
        B.4.9. Configuração do Apt
        B.4.10. Seleção de pacotes
        B.4.11. Instalação do gestor de arranque
        B.4.12. A terminar a instalação
        B.4.13. Preseed de outros pacotes

    B.5. Opções avançadas

        B.5.1. Executar comandos personalizados durante a instalação
        B.5.2. Utilizar o preseed para alterar valores predefinidos
        B.5.3. Carregamento em série dos ficheiros de pré-configuração

C. Particionar para Debian

    C.1. Decidir o Tamanho e Partições do Debian
    C.2. A Árvore de Diretórios
    C.3. Esquema Recomendado de Particionamento
    C.4. Nomes de Dispositivos em Linux
    C.5. Programas de Particionamento em Debian

        C.5.1. Particionar para 64-bit PC

D. Miscelânea

    D.1. Dispositivos em Linux

        D.1.1. Preparar o Seu Rato

    D.2. Espaço em Disco Necessário para Tarefas
    D.3. Instalar Debian GNU/Linux a partir de um sistema Unix/Linux

        D.3.1. Iniciar
        D.3.2. Instalar debootstrap
        D.3.3. Correr debootstrap
        D.3.4. Configurar o Sistema Base
        D.3.5. Instalar um Kernel
        D.3.6. Configurar o Gestor de Arranque
        D.3.7. Acesso remoto: Instalar SSH e definir o acesso
        D.3.8. Últimos toques

    D.4. Instalar Debian GNU/Linux a partir de uma linha IP Paralela (PLIP)

        D.4.1. Requisitos
        D.4.2. Configurar a fonte
        D.4.3. Instalar o alvo

    D.5. Instalar Debian GNU/Linux utilizando PPP over Ethernet (PPPoE)

E. Administrivia

    E.1. Acerca deste Documento
    E.2. Contribuir para este documento
    E.3. Maiores Contribuições
    E.4. Reconhecimento de Marcas Registadas

F. GNU General Public License

Lista de Tabelas

3.1. Informação Útil Sobre Hardware para uma Instalação
3.2. Requisitos Mínimos de Sistema Recomendados

Instalar Debian GNU/Linux 11 para amd64

Nós estamos deliciados que você tenha decidido experimentar Debian, e temos a
certeza que vai achar a distribuição Debian GNU/Linux única. Debian GNU/Linux
junta software livre de alta qualidade de todo o mundo, integrando-o como um
todo coerente. Nós acreditamos que você vai achar que o resultado é
verdadeiramente mais que a soma das partes.

Nós sabemos que muitos de vocês desejam instalar Debian sem ler este manual, e
o instalador de Debian foi desenhado para isso ser possível. Se você não tem
tempo de ler agora todo o Guia de Instalação, nós recomendamos que leia o Howto
de Instalação, que o irá guiar através do processo básico de instalação, e
ligações para o manual para tópicos mais avançados ou para quando as coisas
correrem mal. O Howto de Instalação pode ser encontrado no Apêndice A, Howto de
Instalação.

Com isto dito, nós desejamos que tenha tempo para ler a maior parte deste
manual, e ao fazê-lo irá levá-lo a uma experiência de instalação mais informada
e provavelmente com maior sucesso.

Capítulo 1. Bem-vindo a Debian

Índice

1.1. O que é Debian?
1.2. O que é GNU/Linux?
1.3. O que é Debian GNU/Linux?
1.4. O que é o Debian Installer?
1.5. Obter Debian
1.6. Obter a Versão Mais Recente Deste Documento
1.7. Organização Deste Documento
1.8. Acerca de Direitos de Cópia e Licenças de Software

Este capítulo disponibiliza uma visão global do Projeto Debian e de Debian GNU/
Linux. Se já conhece a história do Projeto Debian e da distribuição Debian GNU/
Linux, sinta-se à vontade para avançar para o próximo capítulo.

1.1. O que é Debian?

Debian é uma organização totalmente composta por voluntários dedicada ao
desenvolvimento de software livre e a promover os ideais da comunidade de
Software Livre. O Projeto Debian começou em 1993, quando Ian Murdock lançou um
convite aberto a criadores de software para contribuírem para uma distribuição
de software completa e coerente baseada no relativamente novo kernel Linux.
Esse grupo relativamente pequeno de entusiastas dedicados, originalmente com
fundos da Free Software Foundation e influenciados pela filosofia GNU, cresceu
com o passar dos anos para uma organização com cerca de 1000 Debian Developers.

Os Debian Developers estão envolvidos numa série de atividades, incluindo a
administração do site Web e do arquivo FTP, design gráfico, análise legal de
licenças de software, escrever documentação, e, claro, manter pacotes de
software.

No interesse de comunicar a nossa filosofia e de atrair developers que
acreditem nos princípios que Debian defende, o Projeto Debian publicou uma
série de documentos que sublinham os nossos valores e servem de guia ao que
significa ser um Debian Developer:

  • O Debian Social Contract é um comunicado do que Debian se compromete
    perante a comunidade de software livre. Quem quer que aceite seguir o
    Social Contract pode tornar-se um maintainer. Qualquer maintainer pode
    introduzir novo software em Debian -- desde que o software siga os nossos
    critérios acerca de ser livre, e o pacote siga os nossos standards de
    qualidade.

  • As Debian Free Software Guidelines são uma afirmação clara e concisa acerca
    dos critérios de Debian para o software livre. A DFSG é um documento muito
    influente no movimento de software livre, e foi a fundação para a The Open
    Source Definition.

  • O Debian Policy Manual é uma especificação extensiva dos standards de
    qualidade do Projeto Debian.

Os Debian Developers também estão envolvidos noutros projetos; alguns
específicos de Debian, outros envolvendo alguma ou toda a comunidade Linux.
Alguns exemplos incluem:

  • O Filesystem Hierarchy Standard (FHS) é um esforço para padronizar a
    organização do sistema de ficheiros em Linux. O FHS vai permitir aos
    criadores de software concentrarem os seus esforços em problemas de design,
    sem terem de se preocupar como o pacote irá ser instalado nas diferentes
    distribuições de GNU/Linux.

  • Debian Jr. é um projeto interno, que se destina a assegurar que Debian tem
    algo a oferecer aos nossos utilizadores mais novos.

Para mais informações gerais sobre Debian, veja o Debian FAQ.

1.2. O que é GNU/Linux?

GNU/Linux é um sistema operativo: uma série de programas que o deixam interagir
com o seu computador e correr outros programas.

O seu sistema operativo consiste em vários programas fundamentais que são
necessários ao seu computador de modo a que possa comunicar e receber
instruções dos utilizadores; ler e escrever dados em discos rígidos, tapes, e
impressoras; controlar a utilização da memória; e correr outro software. A
parte mais importante de um sistema operativo é o kernel. Num sistema GNU/
Linux, o componente do kernel é o Linux. O resto do sistema consiste noutros
programas, muitos dos quais escritos por ou para o Projeto GNU. Como o kernel
sozinho não forma um sistema operativo utilizável, nós preferimos utilizar o
termo "GNU/Linux" para nos referirmos aos sistemas a que muitas pessoas
vulgarmente chamam de "Linux".

GNU/Linux tem como modelo o sistema operativo Unix. Desde o inicio, GNU/Linux
foi desenhado para ser um sistema multi-tarefa, multi-utilizador. Estes factos
são suficientes para tornar GNU/Linux diferente de outros sistemas operativos
bem conhecidos. No entanto, GNU/Linux é muito diferente do que você possa
imaginar. Em contraste com outros sistemas operativos, ninguém é dono de GNU/
Linux. Muito do seu desenvolvimento é feito por voluntários não pagos.

O desenvolvimento do que mais tarde se tornou GNU/Linux começou em 1984, quando
a Free Software Foundation iniciou o desenvolvimento de um sistema operativo
livre, ao estilo Unix, chamado GNU.

O Projeto GNU desenvolveu um extenso conjunto de ferramentas de software livre
para utilizar com Unix (tm) e sistemas operativos do tipo Unix tais como o GNU/
Linux. Estas ferramentas permitem aos utilizadores executar tarefas que vão
desde o mundano (como copiar ou remover ficheiros do sistema) ao arcano (como
escrever e compilar programas ou editar de forma sofisticada numa variedade de
formatos de documentos).

Enquanto que muitos grupos e indivíduos contribuíram para GNU/Linux, o maior
contribuidor individual continua a ser a Free Software Foundation, que criou
não só a maioria das ferramentas utilizadas em GNU/Linux, mas também a
filosofia e a comunidade que tornaram GNU/Linux possível.

O kernel Linux apareceu pela primeira vez em 1991, quando um estudante
Finlandês de ciência computacional anunciou uma versão prévia de um kernel de
substituto para o Minix num newsgroup Usenet comp.os.minix. Veja a Linux
History Page da Linux International.

Linus Torvalds continua a coordenar o trabalho de várias centenas de
programadores com a ajuda de alguns responsáveis por subsistemas. Existe um
sítio oficial para o kernel Linux. Informação sobre a mailing list linux-kernel
pode ser encontrada em linux-kernel mailing list FAQ.

Os utilizadores de GNU/Linux têm uma imensa liberdade de escolha no seu
software. Por exemplo, podem escolher por entre uma dúzia de shells de linha de
comandos e vários ambientes gráficos. Esta seleção é muitas vezes confusa para
os utilizadores de outros sistemas operativos, que não estão habituados a
pensarem na linha de comandos ou no ambiente de trabalho como algo que possam
alterar.

É também menos provável que GNU/Linux bloqueie, que corra melhor mais de um
programa ao mesmo tempo, e seja mais seguro que muitos sistemas operativos. Com
estas vantagens, Linux é o sistema operativo que mais rapidamente cresce no
mercado de servidores. Mais recentemente, Linux passou a ser popular entre os
utilizadores domésticos e empresariais.

1.3. O que é Debian GNU/Linux?

A combinação da filosofia e metodologia Debian e as ferramentas GNU, o kernel
Linux, e outro importante software livre, formam uma distribuição de software
única chamada Debian GNU/Linux. Esta distribuição é feita de um grande número
de pacotes de software. Cada pacote da distribuição contém executáveis,
scripts, documentação, e informação de configuração, e tem um maintainer que é
o primeiro responsável por manter o pacote atualizado, seguir relatórios de
bugs, e comunicar com o(s) autor(es) do software original do pacote. A nossa
extremamente grande base de utilizadores, combinada com o nosso sistema de
seguimento de bugs assegura que os problemas são encontrados e resolvidos
rapidamente.

A atenção de Debian para os detalhes permite-nos produzir uma distribuição de
alta qualidade, estável e escalável. As instalações podem ser facilmente
configuradas para servirem vários papéis, desde firewalls dedicadas a ambientes
de trabalho de estações de trabalho científico e até a servidores de rede de
topo de gama.

Debian é especialmente popular entre utilizadores mais avançados devido à sua
excelência técnica e ao seu profundo compromisso com as necessidades e
expetativas da comunidade Linux. Debian também introduziu muitas funcionalidade
em Linux que agora são lugar-comum.

Por exemplo, Debian foi a primeira distribuição a incluir um sistema de gestão
de pacotes para fácil instalação e remoção de software. Foi também a primeira
distribuição de Linux a poder ser substituída por uma versão mais recente sem
necessitar de reinstalação.

Debian continua a ser líder no desenvolvimento de Linux. O seu processo de
desenvolvimento é um exemplo de como pode o modelo de desenvolvimento Open
Source funcionar bem -- mesmo para tarefas muito complexas tais como construir
e manter um sistema operativo completo.

A funcionalidade que mais distingue Debian de outras distribuições de Linux é o
sistema de gestão de pacotes. Estas ferramentas dão ao administrador de um
sistema Debian o controlo completo sobre os pacotes instalados nesse sistema,
incluindo a possibilidade de instalar um único pacote ou atualizar
automaticamente todo o sistema operativo. Pacotes individuais podem também ser
protegidos para não serem atualizados. Pode mesmo dizer ao sistema de gestão de
pacotes que software foi compilado por você e que dependências satisfaz.

Para proteger o seu sistema contra "Cavalos de Tróia" e outro software
malévolo, os servidores Debian verificam se os pacotes lá colocados provêm dos
seus maintainers Debian registados. Os empacotadores Debian também têm bastante
cuidado a configurar os seus pacotes de uma forma segura. Quando aparecem
problemas de segurança em pacotes lançados, as correcões geralmente estão
disponíveis muito rapidamente. Com a simplicidade das opções de atualização, as
correções de segurança podem ser obtidas e instaladas automaticamente a partir
da Internet.

O principal, e melhor, método para obter suporte para o seu sistema Debian GNU/
Linux é comunicar com Debian Developers através das muitas mailing lists
mantidas pelo Projecto Debian (mais de 322 quando isto foi escrito). A forma
mais fácil de subscrever uma ou mais destas mailing lists é visitar a página de
subscrição de mailing lists Debian e preencher o formulário que vai lá
encontrar.

1.4. O que é o Debian Installer?

O Debian Installer, também conhecido como "d-i", é o sistema de software para
instalar um sistema Debian básico e funcional. É suportado um largo leque de
hardware, como dispositivos embebidos, portáteis, máquinas desktop e servidores
e é oferecido um largo conjunto de software livre para muitos propósitos.

A instalação é conduzida respondendo a um conjunto básico de questões. Também
está disponível um modo avançado que permite controlar cada aspeto da
instalação e uma funcionalidade avançada para levar a cabo instalações
automatizadas. A instalação pode ser feita a partir de uma multitude de fontes:
USB/ CD/DVD/Blu-Ray ou através da rede. O instalador suporta instalações
traduzidas em mais de 80 linguagens.

O instalador tem a sua origem no projeto boot-floppies, e foi mencionado pela
primeira vez por Joey Hess em 2000. Desde então o sistema de instalação tem
sido continuamente desenvolvido por voluntários que têm melhorando e
acrescentado mais funcionalidades.

Pode ser encontrada mais informação na página do Debian Installer, no Wiki e na
mailing list debian-boot.

1.5. Obter Debian

Para informação acerca de como descarregar Debian GNU/Linux da Internet ou onde
podem ser comprados meios de instalação oficiais de Debian veja a página da
distribuição. A lista de mirrors Debian contém a lista completa dos mirrors
oficiais de Debian para que possa facilmente encontrar o mais próximo de si.

Debian pode ser facilmente atualizado após a sua instalação. O próprio
procedimento de instalação vai ajudar a configurar o sistema para que, caso
seja necessário, possam ser feitas essas mesmas atualizações após a instalação
estar completa.

1.6. Obter a Versão Mais Recente Deste Documento

Este documento está constantemente a ser revisto. Assegure-se de que verifica
as páginas de Debian 11 para verificar a existência de informação de última
hora acerca do lançamento do sistema Debian GNU/Linux 11. Versões mais
atualizadas deste manual estão também disponíveis nas páginas do Manual de
Instalação oficial.

1.7. Organização Deste Documento

Este documento tem o propósito de servir como um manual para os que utilizam
Debian pela primeira vez. Tenta fazer o mínimo de suposições quanto possível
acerca do seu nível de conhecimentos. No entanto, nós assumimos que você tem um
bom entendimento geral acerca de como trabalha o hardware no seu computador.

Os utilizadores mais experientes podem também encontrar uma interessante
referência de informação neste documento, incluindo os tamanhos para a
instalação mínima, detalhes acerca do hardware suportado pelo sistema de
instalação Debian, e etc. Nós encorajamos os nossos utilizadores avançados a
dar uma vista de olhos neste documento.

Genericamente, este manual está disposto numa forma linear, acompanhando-o ao
longo do processo de instalação desde o início até ao fim. Aqui estão as etapas
da instalação de Debian GNU/Linux, e as seções deste documento relacionadas com
cada etapa:

 1. Determinar se o seu hardware cumpre os requisitos para utilizar o sistema
    de instalação, no Capítulo 2, Requisitos do Sistema.

 2. Fazer cópias de segurança do seu sistema, executar o planeamento e
    configuração de hardware necessário antes de instalar Debian, no
    Capítulo 3, Antes de Instalar Debian GNU/Linux. Se você estiver a preparar
    um sistema multi-boot, pode necessitar de criar espaço particionável no seu
    disco rígido para ser utilizado por Debian.

 3. No Capítulo 4, Obter o Meio de Instalação do Sistema, irá obter os
    ficheiros necessários para o seu método da instalação.

 4. O seguinte Capítulo 5, Arrancar o Sistema de Instalação descreve o arranque
    para o sistema de instalação. Este capítulo também discute procedimentos de
    resolução de problemas no caso de encontrar problemas com esta etapa.

 5. Faça a instalação de acordo com o Capítulo 6, Utilizar o Instalador Debian.
    Isto envolve escolher a sua linguagem, configurar módulos controladores de
    periféricos, configurar a sua ligação de rede de modo a que os restantes
    ficheiros de instalação possam ser obtidos a partir de um servidor Debian
    (isto se não estiver a instalar a partir de um conjunto de imagens de
    instalação de CDs/DVDs), particionar os seus discos rígidos e instalar um
    sistema base, e por fim a seleção e instalação de tarefas. (São explicadas
    algumas noções sobre como fazer o particionamento para o seu sistema Debian
    em Apêndice C, Particionar para Debian.)

 6. Iniciar para o seu sistema base acabado de instalar, a partir do
    Capítulo 7, A Iniciar O Seu Novo Sistema Debian.

Assim que tiver o seu sistema instalado, você pode ler o Capítulo 8, Próximos
Passos e Onde Ir a Partir Daqui. Esse capítulo explica onde pode encontrar mais
informações acerca de Debian e de Unix, e como substituir o seu kernel.

Finalmente, informação acerca deste documento e de como contribuir para ele
pode ser encontrada no Apêndice E, Administrivia.

1.8. Acerca de Direitos de Cópia e Licenças de Software

Temos a certeza que você já leu algumas das licenças que vêm com a maioria do
software comercial -- estas geralmente dizem que você só pode utilizar uma
cópia do software num único computador. A licença deste sistema não é mesmo
nada como essas. Nós encorajamos a colocar uma cópia de Debian GNU/Linux em
cada computador da sua escola ou local de trabalho. Empreste o seu meio de
instalação aos seus amigos e ajude-os a instalar nos seus computadores! Pode
mesmo fazer milhares de cópias e vendê-las-- embora com algumas restrições. A
sua liberdade de instalar e utilizar o sistema vem diretamente de Debian ser
baseado em software livre.

Chamar livre ao software, não significa que o software não tenha direitos de
cópia, e não significa que os meios de instalação que contêm o software tenham
de ser distribuídos sem encargos. Software livre, em parte, significa que as
licenças dos programas individuais não necessitam que pague pelo privilégio de
distribuir e utilizar esses programas. Software livre também significa que não
só qualquer um pode estender, adaptar, e modificar o software, mas também pode
distribuir os resultados do seu trabalho.

Nota

O projeto Debian, como concessão pragmática aos seus utilizadores, torna
disponíveis alguns pacotes que não preenchem os nossos critérios para serem
considerados livres. Esses pacotes não são parte da distribuição oficial, no
entanto, estão disponíveis apenas das áreas contrib ou non-free dos mirrors
Debian ou em CDs/DVDs de terceiros; veja o Debian FAQ, sob "os arquivos FTP de
Debian", para mais informação acerca da disposição e conteúdo dos arquivos.

Muitos dos programas no sistema são licenciados sob a GNU General Public
License, muitas vezes referida como a "GPL". A GPL requer que você torne o 
código fonte dos programas disponível quando você distribuir uma cópia do
binário do programa; essa medida da licença assegura que qualquer utilizador
possa modificar o software. Devido a esta medida, o código fonte ^[1] para
todos esses programas estão disponíveis no sistema Debian.

Existem algumas outras formas de afirmação de direitos de cópia e licenças de
software utilizadas nos programas em Debian. Pode encontrar os direitos de
cópia e licenças para cada pacote instalado no seu sistema simplesmente vendo o
ficheiro /usr/share/doc/nome-do-pacote/copyright depois de instalar um pacote
no seu sistema.

Para mais informação acerca das licenças e de como Debian determina se o
software é suficientemente livre para ser incluído na distribuição principal,
veja as Debian Free Software Guidelines.

O aviso legal mais importante é que o software vem sem nenhuma garantia. Os
programadores que criaram este software fizeram-no em benefício da comunidade.
Nenhumas garantias são feitas acerca da adequação do software para um
determinado propósito. No entanto, como o software é livre, você está
autorizado a modificar o software para adaptá-lo às suas necessidades -- e para
gozar dos benefícios das alterações feitas por outros que estenderam o software
dessa forma.


━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

^[1] Para informação acerca de como localizar, desempacotar, e construir
binários a partir de pacotes Debian de código fonte, veja o Debian FAQ, sob "
Basics of the Debian Package Management System".

Capítulo 2. Requisitos do Sistema

Índice

2.1. Hardware Suportado

    2.1.1. Arquiteturas Suportadas
    2.1.2. CPUs Suportados
    2.1.3. Portáteis
    2.1.4. Múltiplos Processadores
    2.1.5. Suporte de Hardware Gráfico
    2.1.6. Hardware Para Ligação em Rede
    2.1.7. Ecrãs Braille
    2.1.8. Hardware Sintetizador de Voz
    2.1.9. Periféricos e Outro Hardware

2.2. Dispositivos que Necessitam de Firmware
2.3. Comprar Hardware Especificamente para GNU/Linux

    2.3.1. Evitar Hardware Fechado ou Proprietário.

2.4. Meios de Instalação

    2.4.1. CD-ROM/DVD-ROM/BD-ROM
    2.4.2. Pens USB
    2.4.3. Rede
    2.4.4. Disco Rígido
    2.4.5. Un*x ou sistema GNU
    2.4.6. Sistemas de Armazenamento Suportados

2.5. Requisitos de Memória e de Espaço em Disco

Esta seção contém informação acerca do hardware que necessita para se iniciar
com Debian. Irá também encontrar links para mais informação acerca do hardware
suportado por GNU e Linux.

2.1. Hardware Suportado

Debian não impõe requisitos de hardware para além dos requisitos do kernel
Linux ou do kernel kFreeBSD e dos conjuntos de ferramentas GNU. Por isso
qualquer arquitetura ou plataforma para a qual tenha sido portado o kernel
Linux ou kFreeBSD, libc, gcc, etc. e para a qual exista um port de Debian,
poderá correr Debian. Para mais detalhes acerca dos sistemas com a arquitetura 
64-bit PC que tenham sido testados com Debian GNU/Linux, por favor, veja as
páginas dos Ports em https://www.debian.org/ports/amd64/.

Em vez de tentar descrever todas a configurações de hardware diferentes que são
suportadas por 64-bit PC, esta seção contém informação geral e indicações de
onde se pode encontrar informação adicional.

2.1.1. Arquiteturas Suportadas

Debian GNU/Linux 11 suporta 9 arquiteturas de maior relevo e algumas variações
de cada arquitetura conhecidas por "flavors".

┌─────────────────────┬──────────────┬─────────────────────────────┬──────────┐
│     Arquitetura     │  Designação  │       Sub-arquitetura       │  Flavor  │
│                     │    Debian    │                             │          │
├─────────────────────┼──────────────┼─────────────────────────────┼──────────┤
│AMD64 & Intel 64     │amd64         │                             │          │
├─────────────────────┼──────────────┼─────────────────────────────┼──────────┤
│                     │              │máquinas x86 padrão          │padrão    │
│Baseado em Intel x86 │i386          ├─────────────────────────────┼──────────┤
│                     │              │apenas domínios Xen PV       │xen       │
├─────────────────────┼──────────────┼─────────────────────────────┼──────────┤
│ARM                  │armel         │Marvell Kirkwood e Orion     │marvell   │
├─────────────────────┼──────────────┼─────────────────────────────┼──────────┤
│ARM com FPU em       │armhf         │multi-plataforma             │armmp     │
│hardware             │              │                             │          │
├─────────────────────┼──────────────┼─────────────────────────────┼──────────┤
│ARM 64bit            │arm64         │                             │          │
├─────────────────────┼──────────────┼─────────────────────────────┼──────────┤
│                     │              │MIPS Malta                   │5kc-malta │
│MIPS 64bit (little   │              ├─────────────────────────────┼──────────┤
│endian)              │mips64el      │Cavium Octeon                │octeon    │
│                     │              ├─────────────────────────────┼──────────┤
│                     │              │Loongson 3                   │loongson-3│
├─────────────────────┼──────────────┼─────────────────────────────┼──────────┤
│                     │              │MIPS Malta                   │4kc-malta │
│MIPS 32bit (little   │              ├─────────────────────────────┼──────────┤
│endian)              │mipsel        │Cavium Octeon                │octeon    │
│                     │              ├─────────────────────────────┼──────────┤
│                     │              │Loongson 3                   │loongson-3│
├─────────────────────┼──────────────┼─────────────────────────────┼──────────┤
│Power Systems        │ppc64el       │IBM POWER8 ou máquinas mais  │          │
│                     │              │recentes                     │          │
├─────────────────────┼──────────────┼─────────────────────────────┼──────────┤
│IBM S/390 de 64bit   │s390x         │IPL a partir de VM-reader e  │genérico  │
│                     │              │DASD                         │          │
└─────────────────────┴──────────────┴─────────────────────────────┴──────────┘

Este documento cobre a instalação para a arquitetura 64-bit PC utilizando o 
Linux. Se está à procura de informação acerca de qualquer uma das outras
arquiteturas suportadas por Debian veja a página dos Debian-Ports.

2.1.2. CPUs Suportados

São suportados ambos os processadores AMD64 e Intel 64.

2.1.3. Portáteis

De um ponto de vista técnico, os portáteis são PCs normais, por isso toda a
informação sobre PCs também se aplica aos portáteis. Hoje em dia as instalações
em portáteis deixam-nos logo funcionais, incluindo coisas como suspender
automaticamente o sistema ao fechar a tampa e botões específicos dos portáteis
tais os que desligam os interfaces wifi ("airplane mode"). Ainda assim por
vezes alguns fabricantes utilizam hardware especializado ou proprietário para
algumas funções especificas dos portáteis que poderão não ser suportadas. Para
saber se o seu portátil funciona bem com GNU/Linux veja, por exemplo, as
páginas do Linux Laptop.

2.1.4. Múltiplos Processadores

Suporte para múltiplos processadores -- também chamado de "multi-processamento
simétrico" ou SMP -- está disponível para esta arquitetura. A imagem standard
de kernel de Debian 11 foi compilada com suporte a SMP-alternatives. Isto
significa que o kernel irá detetar o número de processadores (ou cores de
processador) e irá desativar automaticamente SMP em sistemas com um único
processador.

Ter vários processadores num computador era originalmente um tópico para
sistemas servidor topo de gama mas com a introdução dos chamados processadores 
"multi-core" tornou-se bastante comum nos últimos anos. Estes contêm dois ou
mais unidades de processamento, chamadas "cores", num único chip.

2.1.5. Suporte de Hardware Gráfico

O suporte para interfaces gráficos em Debian é determinado pelo suporte
encontrado no sistema X11 de X.Org e no kernel. O kernel disponibiliza gráficos
básicos de framebuffer, enquanto que os ambientes gráficos utilizam o X11. A
disponibilidade das funcionalidades avançadas da placa gráfica tal como
aceleração 3D por hardware ou vídeo acelerado por hardware, depende do próprio
hardware gráfico utilizado no sistema e em alguns casos da instalação adicional
de blobs de "firmware" (veja Secção 2.2, "Dispositivos que Necessitam de
Firmware").

Nos PCs modernos, ter um ecrã gráfico normalmente funciona por defeito. Para
muito hardware, a aceleração 3D também funciona bem por defeito, mas mesmo
assim existe algum hardware que necessita de blobs de firmware para funcionar
bem. Em alguns casos houveram relatos acerca de hardware no qual foi necessária
a instalação de firmware da placa gráfica mesmo para suporte básico de
gráficos.

Podem ser encontrados detalhes acerca de hardware gráfico e dispositivos
apontadores suportados em https://wiki.freedesktop.org/xorg/. Debian 11 é
lançado com X.Org versão 7.7.

2.1.6. Hardware Para Ligação em Rede

Quase todas as placas de rede (NIC) suportadas pelo kernel Linux também deverão
ser suportadas pelo sistema de instalação; os controladores deverão ser
carregados automaticamente. Isto inclui a maioria das placas PCI/PCI-Express
assim como PCMCIA/Express Cards em portáteis.

RDIS é suportado, mas não durante a instalação.

2.1.6.1. Placas de Rede Sem Fios (Wireless)

As redes sem fios são em geral suportadas assim como um crescente número de
adaptadores de rede sem fios são suportados pelo kernel oficial Linux, embora
muitos deles necessitem que seja carregado firmware.

Se for necessário firmware, o instalador irá pedir-lhe para carregar o
firmware. Para informação detalhada acerca de como carregar firmware durante a
instalação veja Secção 6.4, "Carregar Firmware em Falta".

As placas de rede sem fios que não sejam suportadas pelo kernel Linux oficial
podem normalmente ser postas a funcionar em Debian GNU/Linux, mas não são
suportadas durante a instalação.

Se existir algum problema com a rede sem fios e se não existir outra placa de
rede que possa utilizar durante a instalação, ainda assim é possível instalar
Debian GNU/Linux utilizando uma imagem completa de CD-ROM ou de DVD. Escolha a
opção de não configurar a rede e instale utilizando apenas os pacotes
disponíveis a partir do CD/DVD. Depois, poderá então instalar o controlador e o
firmware que necessitar após a instalação estar terminada (após reiniciar) e
configurar a rede manualmente.

Em alguns casos o controlador que necessita pode não estar disponível como um
pacote Debian. Terá então de procurar código fonte disponível na internet e
compilar você mesmo o controlador. Como fazer isto está fora do âmbito deste
manual. Se não existir disponível nenhum driver Linux, o seu último recurso é
utilizar o pacote ndiswrapper, que permite utilizar um driver Windows.

2.1.7. Ecrãs Braille

O suporte para ecrãs braille é determinado pelo suporte subjacente de brltty. A
maioria dos ecrãs trabalha sob brltty, ligado através de uma porta série, USB
ou bluetooth. Os detalhes dos dispositivos braille suportados podem ser
encontrados no website brltty. Debian GNU/Linux 11 vem com brltty versão 6.3.

2.1.8. Hardware Sintetizador de Voz

O suporte a hardware de sintetizador de voz é determinado pelo suporte dado
pelo speakup. O speakup suporta apenas placas integradas e dispositivos
externos ligados a uma porta série (não são suportados adaptadores USB ou
série-para-USB ou adaptadores PCI). Podem ser encontrados detalhes dos
dispositivos de hardware suportados para sintetizar voz no website de speakup.
Debian GNU/Linux 11 vem com speakup versão 3.1.6.

2.1.9. Periféricos e Outro Hardware

Linux suporta uma grande variedade de dispositivos de hardware tais como ratos,
impressoras, scanners, dispositivos PCMCIA/CardBus/ExpressCard e USB. No
entanto a maioria destes dispositivos não são necessários durante a instalação
do sistema.

O hardware USB geralmente funciona bem. Em alguns PCs muito antigos alguns
teclados USB podem necessitar de configuração adicional. (veja Secção 3.6.6,
"Problemas de Hardware Para Estar Atento"). Em PCs modernos, os teclados e
ratos USB funcionam sem qualquer configuração específica.

2.2. Dispositivos que Necessitam de Firmware

Além da disponibilidade de um controlador de dispositivo, algum hardware
necessita também que o chamado firmware ou microcode seja carregado no
dispositivo antes deste se tornar operacional. Isto é mais comum para placas de
rede (especialmente placas de rede sem fios), mas por exemplo alguns
dispositivos USB e até mesmo alguns controladores de disco rígido também
necessitam de firmware.

Em muitas placas gráficas, estão disponíveis as funcionalidades básicas sem
firmware adicional, mas o uso de funcionalidades avançadas necessita que o
ficheiro de firmware apropriado seja instalado no sistema. Em alguns casos, a
instalação com sucesso pode mesmo assim acabar com o ecrã em branco ou com
conteúdo incompreensível quando reiniciar para o sistema instalado. Se isso
acontecer, mesmo assim pode tentar contornar para fazer login (veja
Secção 6.4.3, "Completar o Sistema Instalado").

Em muitos dispositivos mais antigos que necessitam de firmware para funcionar,
o ficheiro de firmware foi permanentemente colocado, pelo fabricante, num chip
EEPROM/Flash. Atualmente a maioria dos dispositivos já não têm o firmware
embebido desta forma, por isso o ficheiro de firmware tem que ser carregado no
dispositivo pelo sistema operativo cada vez que o sistema arrancar.

Na maioria dos casos o firmware é não livre de acordo com os critérios
utilizados pelo projeto Debian GNU/Linux e por isso não pode ser incluído na
distribuição principal ou no sistema de instalação. Se o próprio controlador do
dispositivo for incluído na distribuição e se legalmente Debian GNU/Linux puder
distribuir o firmware, este estará frequentemente disponível como um pacote
separado a partir da seção não livre do arquivo.

No entanto, isto não significa que tal hardware não possa ser utilizado durante
a instalação. Desde o Debian GNU/Linux 5.0 que o debian-installer suporta o
carregamento de ficheiros ou pacotes contendo firmware, a partir de um meio
amovível, tal como uma pen USB. Para informações detalhadas acerca de como
carregar ficheiros ou pacotes de firmware durante a instalação veja Secção 6.4,
"Carregar Firmware em Falta"

Se o debian-installer pedir um ficheiro de firmware e não o tiver disponível ou
não desejar instalar um ficheiro de firmware não livre no seu sistema, pode
tentar continuar sem carregar o firmware. Existem diversos casos em que
controladores pedem firmware adicional porque em determinadas circunstâncias
pode ser necessário, mas o dispositivo funciona sem ele na maioria dos sistemas
(isto acontece por exemplo com algumas placas de rede que utilizam o
controlador tg3).

2.3. Comprar Hardware Especificamente para GNU/Linux

Existem diversos fabricantes que lançam sistemas com Debian ou outras
distribuições de GNU/Linux pré-instalado. Poderá ter que pagar mais pelo
privilégio, mas, pelo menos compra alguma paz de espírito, dado que terá a
certeza que o seu hardware é bem suportado por GNU/Linux.

Se tiver de comprar uma máquina com Windows já instalado, leia cuidadosamente a
licença de software que vem incluída com o Windows; poderá ser capaz de
rejeitar a licença e obter um desconto por parte do vendedor. Pode ser útil
procurar na Internet por "windows refund" para obter informação que o possa
ajudar.

Quer esteja a comprar um sistema com Linux já incluído, ou mesmo um sistema
usado, é importante que verifique se o seu hardware é suportado pelo kernel
Linux. Veja se o seu hardware está listado na referência mencionada
anteriormente. Não se esqueça de mencionar ao vendedor (se existir) que está a
comprar uma máquina para utilizar com Linux. Suporte comerciantes de hardware
amigáveis para com Linux.

2.3.1. Evitar Hardware Fechado ou Proprietário.

Alguns fabricantes de hardware simplesmente não nos dizem como escrever
controladores para o seu hardware. Outros não nos permitem aceder à
documentação sem assinar um contrato de não divulgação que nos impediria de
lançar o código fonte do controlador, que é dos elementos centrais do software
livre. Como não nos é dado acesso a documentação utilizável sobre estes
dispositivos, estes simplesmente não funcionam sob o Linux.

Em muitos casos existem standards (ou pelo menos alguns standards de-facto) que
descrevem como um sistema operativo e os seus controladores de dispositivos
comunicam com uma certa classe de dispositivos. Alguns dispositivos conforme
tal standard (de facto) podem ser utilizados com um único controlador genérico
e não são necessários controladores específicos. Com alguns tipos de hardware
(e.g. USB "Human Interface Devices", i.e. teclados, ratos, etc., e dispositivos
de armazenamento USB tais como pens USB e leitores de cartões de memória) isto
funciona muito bem e praticamente todos os dispositivos no mercado estão de
acordo com o standard.

Noutros campos, entre eles e.g. impressoras, infelizmente não é o caso.
Enquanto que muitas impressoras podem ser endereçadas através de um pequeno
conjunto de linguagens de controlo standard (de facto) e por isso podem
funcionar sem problemas em qualquer sistema operativo, existem alguns modelos
que apenas compreendem comandos de controlo proprietários para os quais não
existe documentação utilizável e por isso não podem ser utilizados em sistemas
operativos livres e apenas podem ser utilizados com controladores não abertos
fornecidos pelos fabricantes.

Mesmo que exista um controlador de código-fonte fechado fornecido pelo
fabricante para tal hardware ao comprar o dispositivo, a vida útil do
dispositivo é limitada pela disponibilidade do controlador. Atualmente os
ciclos de lançamento dos produtos são mais curtos e não é raro que após pouco
tempo o dispositivo deixe de ser fabricado e já não haja mais atualizações de
controladores pelo fabricante. Se o antigo controlador de código fechado já não
funcionar após uma atualização do sistema, um dispositivo perfeitamente
utilizável torna-se obsoleto pela falta de controladores e não há nada que
possa ser feito neste caso. Por isso, e em primeiro lugar, deve evitar comprar
hardware fechado, independentemente do sistema operativo que utilize.

Pode ajudar a melhorar esta situação encorajando os fabricantes de hardware
fechado a lançar documentação e outros recursos necessários para podermos
disponibilizar controladores livres para o hardware.

2.4. Meios de Instalação

Esta seção irá ajudá-lo a determinar que diferentes tipos de suporte pode
utilizar para instalar Debian. Existe um capítulo inteiro dedicado aos
suportes, Capítulo 4, Obter o Meio de Instalação do Sistema, que lista as
vantagens e desvantagens de cada tipo de suporte. Pode desejar voltar a esta
página assim que alcançar essa seção.

2.4.1. CD-ROM/DVD-ROM/BD-ROM

A instalação a partir de discos ópticos é suportada para a maioria das
arquiteturas.

São suportados em PC leitores ópticos SATA, IDE/ATAPI, USB e SCSI, assim como
dispositivos FireWire que sejam suportados pelos drivers ohci1394 e sbp2.

2.4.2. Pens USB

Os discos USB de memória flash, também conhecidos como pens USB, tornaram-se
vulgarmente utilizados e dispositivos de armazenamento baratos. A maioria dos
computadores modernos também permite arrancar o debian-installer a partir
dessas pens. Muitos sistemas de computadores modernos, em particular netbooks e
portáteis leves, já não têm leitores de leitores de discos ópticos e por isso
arrancar a partir de um meio USB é a forma standard de instalar neles um novo
sistema operativo.

2.4.3. Rede

A rede pode ser utilizada durante a instalação para obter ficheiros necessários
para a instalação. Se a rede é utilizada ou não depende do método de instalação
que escolher e das suas respostas a certas questões que lhe serão colocadas
durante a instalação. O sistema de instalação suporta a maioria de tipos de
ligação de rede (incluindo PPPoE, mas não RDIS ou PPP), através de HTTP ou FTP.
Depois da instalação estar completada, pode também configurar o seu sistema
para utilizar RDIS e PPP.

Também pode arrancar o sistema de instalação a partir da rede sem necessitar de
media local tal como CDs/DVDs ou pens USB. Se já tiver disponível uma
infra-estrutura de arranque pela rede (i.e. já correr os serviços DHCP e TFTP
na sua rede), isto permite uma instalação rápida e fácil de um largo número de
máquinas. Instalar a infra-estrutura necessária requer um certo nível de
experiência técnica, por isso não é recomendado a novos utilizadores.

A instalação sem recurso a disco, utilizando arranque de rede numa rede local e
montando todos os sistemas de ficheiros locais em NFS é outra opção.

2.4.4. Disco Rígido

Arrancar o sistema de instalação diretamente do disco rígido é outra opção para
muitas arquiteturas. Isto irá necessitar que outro sistema operativo carregue o
instalador para o disco rígido. Este método é recomendado apenas para casos
especiais quando não estiver disponível outro método de instalação.

2.4.5. Un*x ou sistema GNU

Se estiver a correr outro sistema de tipo UNIX, você pode utilizá-lo para
instalar Debian GNU/Linux sem utilizar o debian-installer descrito no resto
deste manual. Este tipo de instalação pode ser útil para utilizadores com
hardware que não seja suportado de outra forma ou em sistemas que não se podem
dar ao luxo de estarem em baixo. Se estiver interessado nesta técnica, salte
para Secção D.3, "Instalar Debian GNU/Linux a partir de um sistema Unix/Linux".
Este método de instalação é apenas recomendado para utilizadores experientes
que não tenham disponível outro método de instalação.

2.4.6. Sistemas de Armazenamento Suportados

O instalador Debian contém um kernel que é construído para maximizar o número
de sistemas onde corre.

Normalmente, o sistema de instalação de Debian inclui suporte para drives IDE
(também conhecido como PATA), controladores e drives SATA e SCSI, USB e
FireWire. Os sistemas de ficheiros suportados incluem FAT, extensões Win-32 de
FAT (VFAT) e NTFS.

2.5. Requisitos de Memória e de Espaço em Disco

Tem de ter pelo menos 780MB de memória e 920MB de espaço em disco para executar
uma instalação normal. Note que estes são os números mínimos. Para números mais
realistas, veja a Secção 3.4, "Reunir os Requisitos Mínimos de Hardware".

O instalador normalmente ativa, automaticamente, formas de poupança de memória
para ser capaz de correr em sistemas com tão pouca memória, mas em arquiteturas
que sejam menos testadas poderá falhar ao fazê-lo. No entanto, pode ser
habilitado manualmente ao acrescentar o parâmetro de arranque lowmem=1 ou até
lowmem=2 (veja também Secção 6.3.1.1, "Verificar a memória disponível / modo de
baixa memória" e Secção 5.3.2, "Parâmetros de instalação Debian".

A instalação em sistemas com menos memória^[2] ou espaço em disco disponível
poderá ser possível mas apenas é aconselhada a utilizadores avançados.


━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

^[2] As imagens de instalação que suportam o instalador gráfico necessitam de
mais memória do que as imagens que suportam apenas o instalador em modo de
texto e não devem ser utilizadas em sistemas com menos de 780MB de memória. Se
existir escolha entre arrancar o instalador em modo de texto e o instalador
gráfico, deve ser escolhido o anterior em tais sistemas.

Capítulo 3. Antes de Instalar Debian GNU/Linux

Índice

3.1. Vista Geral do Processo de Instalação
3.2. Faça uma Cópia de Segurança aos Seus Dados Existentes!
3.3. Informação Que Vai Necessitar

    3.3.1. Documentação
    3.3.2. Encontrar Fontes de Informação acerca de Hardware
    3.3.3. Compatibilidade de Hardware
    3.3.4. Configurações de rede

3.4. Reunir os Requisitos Mínimos de Hardware
3.5. Pré-Particionamento para sistemas Multi-Boot
3.6. Pré-Instalação do Hardware e Configuração do Sistema Operativo

    3.6.1. Invocar o Menu de Configuração da BIOS/UEFI
    3.6.2. Seleção de Dispositivo Para Arranque
    3.6.3. Sistemas com firmware UEFI
    3.6.4. Arranque seguro
    3.6.5. Desabilitar a funcionalidade "fast boot"/"fast startup" do Windows
    3.6.6. Problemas de Hardware Para Estar Atento

Este capítulo lida com a preparação para instalar Debian antes mesmo de iniciar
o instalador. Isto inclui salvaguardar os seus dados, recolher informação
acerca do seu hardware e localizar qualquer informação que seja necessária.

3.1. Vista Geral do Processo de Instalação

Primeiro, apenas uma nota sobre reinstalações. Com Debian, a circunstância em
que irá necessitar de uma reinstalação completa do seu sistema é muito rara;
talvez por falha mecânica do disco rígido na maior parte dos casos.

Muitos sistemas operativos usuais podem necessitar de uma instalação completa
quando ocorrem falhas críticas ou em atualizações para novas versões do SO.
Mesmo quando não é necessária uma instalação completamente nova, muitas vezes
os programas utilizados são reinstalados para funcionarem corretamente no novo
SO.

Em Debian GNU/Linux, é muito provável que o seu SO possa ser reparado em vez de
ser substituído se as coisas correrem mal. As atualizações nunca precisam de
uma instalação completa; Podem-se sempre fazer atualizações no local. E os
programas são quase sempre compatíveis com as sucessivas versões do SO. Se uma
nova versão do programa necessitar de software de suporte mais recente, o
sistema de pacotes de Debian assegura-se que todo o software necessário é
automaticamente identificado e instalado. O ponto é que, muito esforço tem sido
empreendido para evitar a necessidade de reinstalação, por isso pense nisso
como a sua última opção. O instalador não é projetado para se reinstalar sobre
o sistema operativo já existente.

Aqui está um roadmap para as etapas que irá tomar durante o processo de
instalação.

 1. Salvaguardar todos os dados existentes ou documentos que estão no disco
    rígido onde está a planear instalar.

 2. Recolher informação sobre o seu computador e qualquer documentação
    necessária, antes de começar com a instalação.

 3. Localizar e/ou obter software do instalador e alguns ficheiros de
    controladores ou de firmware específicos que a sua máquina necessite.

 4. Preparar o meio de arranque, tal como CDs/DVDs/pens USB, ou disponibilizar
    uma infra-estrutura de arranque pela rede a partir da qual o instalador
    possa arrancar.

 5. Arrancar a partir do instalador de sistema.

 6. Selecionar a linguagem de instalação.

 7. Ativar a ligação de rede ethernet, se disponível.

 8. Se necessário, redimensionar as partições existentes no seu disco rígido de
    destino para conseguir espaço para a instalação.

 9. Criar e montar as partições nas quais Debian vai ser instalado.

10. Visualizar o download/instalação/configuração automática do sistema base.

11. Escolher e instalar software adicional.

12. Instalar um gestor de arranque que possa iniciar o Debian GNU/Linux e/ou o
    seu sistema existente.

13. Carregar o sistema acabado de instalar pela primeira vez.

Para 64-bit PC tem a opção de utilizar uma versão gráfica do sistema de
instalação. Para mais informações acerca deste instalador gráfico, veja
Secção 5.1.8, "O Instalador Gráfico".

Se tiver problemas durante a instalação, ajuda saber quais os pacotes que estão
envolvidos em cada etapa. Introduzindo o ator principal do software em questão
neste drama da instalação:

O software instalador, debian-installer, é a principal preocupação deste
manual. Este deteta o hardware e carrega os controladores apropriados, utiliza
o dhcp-client para configurar a ligação à rede, corre debootstrap para instalar
os pacotes da base do sistema, e corre tasksel para lhe permitir instalar
determinado software adicional. Muitos mais atores participam em pequenos
papéis neste processo, mas o debian-installer já completou a sua tarefa quando
carregar o novo sistema pela primeira vez.

Para ajustar o sistema às suas necessidades, tasksel permite-lhe escolher
vários conjuntos predefinidos de software, como um servidor Web ou um ambiente
de trabalho.

Uma opção importante durante a instalação é se instala ou não um ambiente de
trabalho gráfico, que consiste no X Window System e num dos ambientes de
trabalho gráficos disponíveis. Se escolher não selecionar a tarefa "Ambiente de
Trabalho", terá apenas um sistema relativamente básico de linha de comandos.
Instalar a tarefa Ambiente de Trabalho é opcional pois necessita
comparativamente de uma grande quantidade de espaço em disco, e porque muitos
sistemas Debian GNU/Linux são servidores que não têm qualquer necessidade de um
interface gráfico com o utilizador para fazer o seu trabalho.

Apenas fique alertado que o X Window System é completamente separado do
debian-installer, e de facto é muito mais complicado. A análise de problemas do
gestor do X Window System, não está no âmbito deste manual.

3.2. Faça uma Cópia de Segurança aos Seus Dados Existentes!

Antes de começar, certifique-se que faz uma cópia de segurança de cada ficheiro
que está agora no seu sistema. Se for a primeira vez que vai ser instalado um
sistema operativo não-nativo no seu computador, é muito provável que necessite
de reparticionar o seu disco rígido para disponibilizar espaço para Debian GNU/
Linux. Quando particionar o seu disco, corre sempre um risco de perder tudo o
que está no disco, independentemente do programa que utilizar. Os programas
utilizados na instalação de Debian GNU/Linux são de bastante confiança e a
maioria deles tem tido anos de utilização; mas são também bastante poderosos e
um erro pode custar-lhe. Mesmo após fazer uma cópia de segurança a tudo, tenha
cuidado e pense bem nas suas respostas e ações. Dois minutos a pensar podem
salvar horas de trabalho desnecessário.

Se estiver a criar um sistema com várias opções de arranque, certifique-se que
tem por perto o meio de distribuição dos outros sistemas operativos instalados.
Mesmo que normalmente não seja necessário, poderão existir situações nas quais
seja necessário reinstalar o gestor de arranque do sistema ou num caso pior ter
de reinstalar o sistema operativo completo e restaurar a cópia de segurança
feita anteriormente.

3.3. Informação Que Vai Necessitar

3.3.1. Documentação

3.3.1.1. Manual de Instalação

Este documento que está a ler, em simples formato ASCII, HTML ou PDF.

  • install.pt.txt

  • install.pt.html

  • install.pt.pdf

3.3.1.2. Documentação do Hardware

Muitas vezes contêm informação útil sobre a configuração ou utilização do seu
hardware.

  • A página de hardware do Wiki Debian

3.3.2. Encontrar Fontes de Informação acerca de Hardware

Em muitos casos, o instalador poderá ser capaz de detetar automaticamente o seu
hardware. Mas para estar preparado, nós recomendamos familiarizar-se com o seu
hardware antes da instalação.

Informação sobre o hardware pode ser reunida a partir de:

  • Os manuais que vêm com cada peça do hardware.

  • Os ecrãs de configuração da BIOS/UEFI do seu computador. Pode ver esses
    ecrãs quando iniciar o seu computador ao pressionar uma combinação de
    teclas. Verifique no seu manual qual a combinação. Muitas vezes, é a tecla 
    Delete ou a tecla F2, mas alguns fabricantes utilizam outras teclas ou
    combinações de teclas. Normalmente ao iniciar o computador é mostrada uma
    mensagem que diz que tecla pressionar para entrar no ecrã de configuração.

  • As caixas de cada peça do hardware.

  • A janela de Sistema no Painel de Controlo do Windows.

  • Os comandos de sistema ou utilitários noutro sistema operativo, incluindo
    do gestor de ficheiros. Esta fonte é especialmente útil para informações
    acerca da RAM e memória do disco rígido.

  • O seu administrador de sistema ou o Fornecedor do Serviço de Internet
    (ISP). Estas fontes poderão dizer as definições que necessita para
    configurar a rede e o correio electrónico.

Tabela 3.1. Informação Útil Sobre Hardware para uma Instalação

┌─────────────────┬───────────────────────────────────────────────────────────┐
│    Hardware     │             Informação Que Poderá Necessitar              │
├─────────────────┼───────────────────────────────────────────────────────────┤
│                 │Quantos possui.                                            │
│                 ├───────────────────────────────────────────────────────────┤
│                 │A sua ordem no sistema.                                    │
│                 ├───────────────────────────────────────────────────────────┤
│                 │Se são IDE (também conhecido como PATA), SATA ou SCSI.     │
│Discos Rígidos   ├───────────────────────────────────────────────────────────┤
│                 │Espaço livre disponível.                                   │
│                 ├───────────────────────────────────────────────────────────┤
│                 │Partições.                                                 │
│                 ├───────────────────────────────────────────────────────────┤
│                 │Partições onde estão instalados os outros sistemas         │
│                 │operativos.                                                │
├─────────────────┼───────────────────────────────────────────────────────────┤
│Interfaces de    │Tipo/modelo de interfaces de rede disponíveis.             │
│rede             │                                                           │
├─────────────────┼───────────────────────────────────────────────────────────┤
│Impressora       │Modelo e Fabricante.                                       │
├─────────────────┼───────────────────────────────────────────────────────────┤
│Placa Gráfica    │Tipo/modelo e fabricante.                                  │
└─────────────────┴───────────────────────────────────────────────────────────┘


3.3.3. Compatibilidade de Hardware

Muitas produtos funcionam sem problemas em Linux. Cada vez mais, o suporte para
hardware em Linux está a melhorar a cada dia. No entanto, Linux não corre em
tantos tipos diferentes de hardware como alguns sistemas operativos.

Os controladores em Linux na maioria dos casos não são escritos para um
determinado "produto" ou "marca" de um fabricante específico, mas para um
determinado hardware/chipset. Muitos produtos/marcas aparentemente são baseados
no mesmo design de hardware; não é invulgar que os fabricantes dos chips
disponibilizem os chamados "designs de referência" para produtos baseados nos
seus chips que são então utilizados por diferentes fabricantes de dispositivos
e vendidos com muitas marcas e produtos diferentes.

Isto tem vantagens e desvantagens. Uma vantagem é que um controlador para um
chipset funciona com muito produtos diferentes de fabricantes diferentes, desde
que o seu produto seja baseado no mesmo chipset. A desvantagem é que nem sempre
é fácil ver qual é o chipset utilizado num determinado produto/marca.
Infelizmente por vezes os fabricantes de dispositivos alteram o hardware base
do seu produto sem alterar o nome do produto ou pelo menos o número de versão
do produto, por isso quando existirem dois produtos com o mesmo nome de marca/
produto comprados em alturas diferentes, eles podem por vezes ser baseados em
dois chipsets diferentes e por isso utilizar dois controladores diferentes ou
poderá mesmo não haver controlador para um deles.

Para dispositivos USB e PCI/PCI-Express/ExpressCard, uma boa forma de descobrir
qual o chipset em que são baseados é ver qual é o seu ID de dispositivo. Todos
os dispositivos USB/PCI/PCI-Express/ExpressCard têm os chamados "vendor" e "
product" IDs, e a combinação destes dois é normalmente a mesma para qualquer
produto baseado no mesmo chipset.

Em sistemas Linux, estes IDs podem ser lidos com o comando lsusb para
dispositivos USB e com o comando lspci -nn para dispositivos PCI/PCI-Express/
ExpressCard. Os IDs de fabricante e de produto são normalmente dados na forma
de dois números hexadecimais, separados por dois pontos, por exemplo "1d6b:0001
".

Um exemplo da saída de lsusb: "Bus 001 Device 001: ID 1d6b:0002 Linux
Foundation 2.0 root hub", onde 1d6b é o vendor ID e 0002 é o product ID.

Um exemplo da saída de lspci -nn para uma placa Ethernet: "03:00.0 Ethernet
controller [0200]: Realtek Semiconductor Co., Ltd. RTL8111/8168B PCI Express
Gigabit Ethernet Controller [10ec:8168] (rev 06)". Os IDs são dados dentro dos
parêntesis retos mais à direita, i.e. onde 10ec é o vendor ID e 8168 o product
ID.

Ainda como outro exemplo, a placa gráfica pode ter a seguinte saída: "04:00.0
VGA compatible controller [0300]: Advanced Micro Devices [AMD] nee ATI RV710
[Radeon HD 4350] [1002:954f]".

Em sistemas Windows, os IDs para um dispositivo podem ser encontrados no gestor
de dispositivos do Windows no separador "detalhes", onde o vendor ID tem o
prefixo VEN_ e o product ID tem o prefixo DEV_. Em sistemas Windows 7, tem de
escolher a propriedade "Hardware IDs" nos detalhes do gestor de dispositivos
para ver os IDs, já que por predefinição não são mostrados.

Procurar na internet por vendor/product ID, "Linux" e "driver" como termos de
procura resulta em informação referente ao estado do suporte do driver para um
determinado chipset. Se a pesquisa pelo vendor/product ID não retornar
resultados satisfatórios, poderá ajudar uma pesquisa pelos nomes de códigos dos
chips, que também são normalmente disponibilizados pelos comandos lsusb e lspci
("RTL811"/"RTL8168B" no exemplo da placa de rede e "RV710" no exemplo da placa
gráfica.

3.3.3.1. Testar a compatibilidade do hardware com um sistema 'Live'

Debian GNU/Linux também está disponível para certas arquiteturas como o chamado
"sistema live". Um sistema live é um sistema pré-configurado e pronto a
utilizar num formato comprimido a partir do qual se pode arrancar e utilizar a
partir de um meio de leitura como um CD ou DVD. Utilizá-lo não faz alterações
permanentes no seu computador. Pode alterar as definições de utilizador e
instalar programas adicionais a partir do sistema live, mas todas estas
alterações apenas terão lugar na memória RAM do computador, i.e. se desligar o
computador e arrancar novamente a partir do sistema live tudo estará novamente
conforme anteriormente predefinido. Se desejar ver se o seu hardware é
suportado em Debian GNU/Linux a forma mais fácil é correr um sistema live
Debian e experimentar.

Existem algumas limitações na utilização de um sistema live. A primeira é que
todas as alterações feitas num sistema live apenas residem na memória RAM, isto
apenas funciona em sistemas com memória RAM suficiente para o permitir, por
isso instalar pacotes de software de tamanho significativo poderá falhar devido
a limitações de quantidade de memória. Outra limitação em relação ao teste de
compatibilidade de hardware é que o sistema live Debian GNU/Linux oficial
apenas contém componentes livres, i.e. não inclui ficheiros de firmware
não-livres. Tais pacotes não-livres podem ser instalados manualmente no seu
sistema, mas não ocorre a deteção automática dos ficheiros de firmware
necessários tal como acontece no debian-installer, por isso, se for necessário,
terá de instalar manualmente os componentes não-livres.

Pode ser encontrada informação acerca das variantes disponíveis das imagens
live Debian no website de Debian Live Images.

3.3.4. Configurações de rede

Se o seu computador estiver ligado a uma rede permanente (i.e., uma ligação
Ethernet ou ligação equivalente -- não uma ligação dialup/PPP), que seja
administrada por outro, deve perguntar ao administrador da rede do sistema a
seguinte informação:

  • O seu hostname (você poderá ser capaz de escolher isto à sua maneira).

  • O nome do seu domínio.

  • O endereço IP do seu computador.

  • A máscara de rede para utilizar na sua rede.

  • O endereço IP da gateway do sistema para onde o seu sistema deve ser
    encaminhado, se a sua rede tiver uma gateway.

  • O sistema na sua rede que deverá utilizar como servidor de DNS (Domain Name
    Service).

Se a rede a que estiver ligado utilizar DHCP (Dynamic Host Configuration
Protocol) para configurar as definições de rede, então não necessitará desta
informação pois o servidor DHCP irá obtê-la diretamente para o seu computador
durante o processo de instalação.

Se tiver acesso à Internet através de modem de DSL ou de cabo (i.e. através da
rede de TV por cabo) e tiver um router (é frequentemente disponibilizado pelo
seu fornecedor de serviço) que lida com a conetividade da sua rede, normalmente
estará disponível DHCP.

Como regra geral: se correr um sistema Windows na sua rede e não tiver que
configurar manualmente as definições de rede para ter acesso à Internet, então
a ligação em Debian GNU/Linux também deverá ser configurada automaticamente.

Se utilizar uma rede WLAN/WiFi, deve encontrar:

  • O ESSID ("nome da rede") da sua rede sem fios.

  • Chave de segurança WEP ou WPA/WPA2 para aceder à rede (se aplicável).

3.4. Reunir os Requisitos Mínimos de Hardware

Assim que juntar a informação sobre o hardware do seu computador, certifique-se
que o seu hardware permite fazer o tipo de instalação que deseja.

Dependendo das suas necessidades, pode conseguir com menos do que algum do
hardware recomendado na tabela listada abaixo. No entanto, a maioria dos
utilizadores arriscam-se a sair frustrados se ignorarem estas sugestões.

Um Pentium 4, 1GHz é o mínimo recomendado para um sistema desktop.

Tabela 3.2. Requisitos Mínimos de Sistema Recomendados

┌──────────────────┬─────────────┬─────────────────┬────────────┐
│Tipo de Instalação│RAM (mínimo) │RAM (recomendado)│Disco Rígido│
├──────────────────┼─────────────┼─────────────────┼────────────┤
│Sem desktop       │256 megabytes│512 megabytes    │2 gigabytes │
├──────────────────┼─────────────┼─────────────────┼────────────┤
│Com Desktop       │1 gigabyte   │2 gigabytes      │10 gigabytes│
└──────────────────┴─────────────┴─────────────────┴────────────┘


Os valores mínimos assumem que a awap estará ativa e que é utilizada uma imagem
que não a liveCD. O valor "Sem desktop" assume que é utilizada a versão
não-gráfica (baseada em texto) do instalador.

Os requisitos mínimos reais de memória são muito inferiores aos números
listados nesta tabela. Com a swap ativa, é possível instalar Debian com tão
pouco como 350MB. O mesmo se passa com os requisitos de espaço em disco,
especialmente se escolher quais as aplicações a instalar; para informação
adicional de requisitos de espaço em disco veja Secção D.2, "Espaço em Disco
Necessário para Tarefas".

É possível correr um ambiente de desktop gráfico em sistemas mais antigos ou
mais fracos, mas neste caso é recomendado instalar um gestor de janelas que
necessite de menos recursos do que os ambientes GNOME e KDE Plasma; as
alternativas incluem xfce4, icewm e wmaker, mas há outros que podem ser
escolhidos.

É praticamente impossível dar requisitos gerais de memória ou de espaço em
disco para instalações em servidores pois estes dependem muito para que vai ser
utilizado o servidor.

Lembre-se que estes tamanhos não incluem todos os outros materiais que são
normalmente encontrados, tais como ficheiros dos utilizadores, mail, e dados. É
sempre melhor ser generoso quando considerar espaço para os seus ficheiros e
dados.

O espaço em disco necessário para uma operação sem problemas do próprio sistema
Debian GNU/Linux é tido em conta nestes requisitos recomendados de sistema.
Notavelmente a partição /var contém muita informação de estado específica de
Debian, além do seu conteúdo usual como por exemplo, ficheiros de log. Os
ficheiros do dpkg (com a informação de todos os pacotes instalados) pode
facilmente consumir 40MB. Além disso, o apt armazena aqui os pacotes
descarregados antes de serem instalados. Deve alocar pelo menos 200MB para a
partição /var, e muito mais se instalar um ambiente de trabalho gráfico.

3.5. Pré-Particionamento para sistemas Multi-Boot

Particionar o seu disco rígido refere-se simplesmente ao acto de dividir o seu
disco em seções. Cada seção é então independente das outras. É de certa forma
equivalente a pôr paredes dentro de uma casa; se colocar mobília num quarto não
afeta qualquer outro quarto.

Se já possuir um sistema operativo no seu sistema (Windows 9x, Windows NT/2000/
XP/2003/Vista/7, OS/2, MacOS, Solaris, FreeBSD, ...) que utilize todo o disco e
quiser colocar Debian no mesmo disco, irá necessitar de o reparticionar. Debian
necessita das suas próprias partições no disco rígido. Não pode ser instalado
em partições do Windows ou do Mac OS X. Pode ser possível partilhar algumas
partições com outros sistemas Unix, mas esse tema não é coberto aqui. No mínimo
irá necessitar de uma partição dedicada para o sistema de ficheiros raiz de
Debian.

Poderá encontrar informação da sua configuração atual de partições utilizando
uma ferramenta de particionamento para o seu sistema operativo atual, tal como
o gestor de discos do Windows ou o fdisk no DOS. As ferramentas de
particionamento têm sempre uma forma de mostrar as partições atuais sem efetuar
alterações.

Regra geral, alterar uma partição já com um sistema de ficheiros nela irá
destruir essa informação. Por isso deve sempre fazer uma cópia de segurança aos
seus dados antes de efetuar qualquer reparticionamento. Utilizando a analogia
da casa, provavelmente quer mover toda a mobília para fora do caminho antes de
mudar uma parede, ou arrisca-se a destruí-la.

Vários sistemas operativos modernos oferecem a funcionalidade de mover e
redimensionar certas partições existentes sem destruir o seu conteúdo. Isto
permite criar espaço para partições adicionais sem perder a informação
existente. Mesmo que isto funcione bem na maioria dos casos, fazer alterações
ao particionamento de um disco é uma ação inerentemente perigosa e deve apenas
ser feita após ter feito uma cópia de segurança completa aos seus dados. Para
partições FAT/FAT32 e NTFS utilizadas em sistemas DOS e Windows, a capacidade
de as mover e redimensionar sem perda de dados é disponibilizada quer pelo
debian-installer quer pelo Gestor de Discos do Windows 7.

Para redimensionar uma partição FAT ou NTFS existente sem qualquer perda de
dados a partir do debian-installer, vá para a etapa de particionamento, escolha
a opção de particionamento manual, escolha a partição a redimensionar, e
simplesmente indique o novo tamanho.

Criar e apagar partições pode ser feito a partir do debian-installer assim como
a partir de um sistema operativo existente no seu sistema. Regra geral, as
partições devem ser criadas pelo sistema que as irá utilizar, i.e. partições a
serem utilizadas por Debian GNU/Linux devem ser criadas no debian-installer e
partições a serem utilizadas noutro sistema operativo devem ser criadas por
esse. O debian-installer é capaz de criar partições não-Linux e partições
criadas desta forma normalmente funcionam sem problemas quando utilizadas em
outros sistemas operativos, por isso se quiser ter a certeza, utilize as
ferramentas nativas para criar as partições a utilizar por outros sistemas
operativos.

Se vai instalar mais de um sistema operativo na mesma máquina, deve instalar
todos os outros sistemas operativos antes de proceder com a instalação de
Debian. As instalações de Windows e de outros sistemas operativos podem
destruir a capacidade de arrancar Debian, ou encorajá-lo a reformatar as
partições não-nativas.

Você pode recuperar destas ações ou evitá-las, mas instalar primeiro o sistema
operativo nativo poupa-lhe problemas.

3.6. Pré-Instalação do Hardware e Configuração do Sistema Operativo

Esta seção irá guiá-lo através da configuração de hardware durante a
pré-instalação, caso exista alguma que necessite fazer antes de instalar
Debian. Normalmente isto envolve verificar e possivelmente alterar definições
de BIOS/UEFI/firmware no seu sistema. A "BIOS/UEFI" ou o "firmware" do sistema
é o software utilizado pelo hardware; é o mais crítico invocado durante o
processo de arranque (depois de ligar).

3.6.1. Invocar o Menu de Configuração da BIOS/UEFI

A BIOS/UEFI disponibiliza as funções básicas necessárias para arrancar a sua
máquina e permitir ao seu sistema operativo aceder ao seu hardware. O seu
sistema disponibiliza um menu de configuração BIOS/UEFI, que é utilizado para
configurar a BIOS/UEFI. Para entrar no menu de configuração da BIOS/UEFI tem de
carregar numa tecla ou numa combinação de teclas após ligar o computador.
Frequentemente é a tecla Delete ou a tecla F2, mas alguns fabricantes utilizam
outras teclas. Normalmente no arranque do computador é mostrada uma mensagem
que diz qual a tecla a pressionar para entrar no ecrã de configuração.

3.6.2. Seleção de Dispositivo Para Arranque

Dentro do menu de configuração da BIOS/UEFI, pode escolher quais os
dispositivos que serão verificados em que sequência para arrancar o sistema
operativo. As escolhas possíveis normalmente incluem os discos rígidos
internos, o leitor de CD/DVD e dispositivos de armazenamento USB tais como pens
USB ou discos externos USB. Em sistemas modernos existe também a possibilidade
de ativar o arranque pela rede através de PXE.

Dependendo do meio de instalação que escolheu (CD/DVD ROM, pen USB, arranque
pela rede) deve ativar os dispositivos de arranque apropriados se ainda não
estiverem ativados.

A maioria das versões das BIOS/UEFI permitem chamar um menu de arranque quando
o sistema inicia no qual se pode escolher a partir de que dispositivo o
computador deve iniciar. Se esta opção estiver disponível, a BIOS/UEFI
normalmente mostra uma curta mensagem como "press F12 for boot menu" durante o
arranque. A tecla a utilizar para escolher este menu varia de sistema para
sistema; as teclas normalmente utilizadas são F12, F11 e F8. Escolher um
dispositivo a partir deste menu não altera a ordem normal de arranque da BIOS/
UEFI, i.e. pode arrancar uma vez a partir de uma pen USB deixando o disco
rígido interno configurado para o arranque normal.

Se a sua BIOS/UEFI não disponibilizar um menu de arranque para fazer escolhas
imediatas do dispositivo de arranque atual, terá que alterar a configuração da
BIOS/UEFI para tornar o dispositivo a partir do qual o debian-installer deve
arrancar como dispositivo primário de arranque.

Infelizmente alguns computadores têm versões de BIOS/UEFI com bugs. Arrancar o
debian-installer a partir de uma pen USB poderá não funcionar mesmo que exista
uma opção apropriada no menu de configuração da BIOS/UEFI e a pen esteja
selecionada como meio de arranque primário. Em alguns destes sistemas é
impossível utilizar uma pen USB como meio de arranque; outros poderão ser
enganados para arrancar a partir da pen alterando o tipo de dispositivo no menu
de configuração da BIOS/UEFI do predefinido "USB harddisk" ou "USB stick" para 
"USB ZIP" ou para "USB CDROM". Em particular, se utilizar uma imagem de
instalação isohybrid numa pen USB, (veja Secção 4.3.1, "Preparar uma pen USB
utilizando uma imagem híbrida de CD/DVD"), alterar o tipo de dispositivo para "
USB CDROM" ajuda nalgumas BIOS que não arrancam a partir de uma pen USB em modo
de disco rígido. Poderá ter de configurar a sua BIOS/UEFI para ativar "USB
legacy support".

Se não puder manipular a BIOS/UEFI para arrancar diretamente a partir de uma
pen USB ainda tem a opção de utilizar um ISO copiado diretamente para a pen.
Arranque o debian-installer utilizando a Secção 4.4, "Preparar Ficheiros para
Arrancar a Partir de Disco Rígido." e, após pesquisar nos discos rígidos por
uma imagem ISO de instalação, escolha o dispositivo USB e selecione a imagem de
instalação.

3.6.3. Sistemas com firmware UEFI

UEFI ("Unified Extensible Firmware Interface") é um novo tipo de firmware de
sistema que é utilizado em muitos sistemas modernos e - entre outras
utilizações - destina-se a substituir a clássica BIOS do PC.

Atualmente a maioria dos sistemas PC que utilizam UEFI também têm o chamado "
Compatibility Support Module" (CSM) no firmware, o qual disponibiliza
exactamente o mesmo interface a um sistema operativo como a clássica BIOS de
PC, de modo a que o software escrito para a clássica BIOS do PC possa ser
utilizado sem alterações. No entanto é suposto um dia a UEFI substituir
completamente a antiga BIOS do PC sem ser totalmente retro-compatível e existem
já muitos sistemas com UEFI mas sem CSM.

Em sistemas com UEFI existem algumas coisas a ter em consideração quando
instalar um sistema operativo. A forma como o firmware carrega um sistema
operativo é fundamentalmente diferente da BIOS clássica (ou UEFI em modo CSM) e
o UEFI nativo. Uma diferença maior é a forma como as partições do disco rígido
são guardadas no disco rígido. Enquanto que a BIOS clássica e UEFI utilizam uma
tabela de partições de DOS em modo CSM, a UEFI nativa utiliza um esquema
diferente chamado "GUID Partition Table" (GPT). Num único disco, por razões
práticas, apenas pode ser utilizado um dos dois e no caso da configuração de
multi-boot com sistemas operativos diferentes num disco, todos têm por isso de
utilizar o mesmo tipo de tabela de partições. Arrancar a partir de um disco com
GPT é possível apenas em modo UEFI nativo, mas a utilização de GPT torna-se
cada vez mais comum conforme o tamanho dos discos rígidos aumenta, já que a
clássica tabela de partições de DOS não consegue endereçar discos maiores do
que 2 Terabytes enquanto que GPT permite, de longe, discos maiores. Outra
diferença significativa entre a BIOS (ou UEFI em modo CSM) e UEFI nativo é a
localização onde é guardado o código de arranque e em que formato tem que
estar. Isto significa que são necessários gestores de arranque diferentes para
cada sistema.

O último torna-se importante ao arrancar o debian-installer num sistema UEFI
com CSM porque o debian-installer verifica se foi iniciado com a BIOS ou num
sistema UEFI nativo e instala o gestor de arranque correspondente. Normalmente
isto simplesmente funciona mas pode haver um problema em ambientes multi-boot.
Nalguns sistemas UEFI com CSM, o gestor de arranque para os dispositivos
amovíveis pode ser diferente do que é realmente utilizado ao arrancar a partir
do disco rígido. Por isso, quando arrancar o instalador a partir de uma pen USB
num modo diferente do que é utilizado para arrancar um sistema operativo já
existente no disco, pode ser instalado o gestor de arranque errado e o sistema
não irá arrancar quando terminar a instalação. Ao escolher o dispositivo de
arranque a partir de um menu de arranque do firmware, alguns sistemas oferecem
duas escolhas separadas para cada dispositivo, de forma que o utilizador possa
escolher se o arranque irá ser em CSM ou no modo UEFI nativo.

3.6.4. Arranque seguro

Outro tópico relacionado com UEFI é o chamado mecanismo "secure boot". Secure
boot é uma função das implementações de UEFI que permite que o firmware apenas
carregue e execute código que seja assinado criptograficamente com determinadas
chaves e por isso bloqueia qualquer código de arranque (potencialmente
malicioso) que não esteja assinado ou que tenha sido assinado com chaves
desconhecidas. Na prática, a única chave que é aceite por predefinição na
maioria dos sistemas UEFI com secure boot, é a chave que a Microsoft utilizou
para assinar o gestor de arranque do Windows. Debian inclui um gestor de
arranque "shim" assinado pela Microsoft, e por isso deve funcionar corretamente
em sistemas com o secure boot ativado.

3.6.5. Desabilitar a funcionalidade "fast boot"/"fast startup" do Windows

O Windows oferece uma funcionalidade (chamada "fast boot" no Windows 8 e "fast
startup" no Windows 10) para reduzir o tempo necessário para arrancar.
Tecnicamente, quando esta funcionalidade estiver ativa, o Windows não irá
realmente desligar e arrancar como se tivesse sido desligado antes. Mas em vez
disso fará algo que se assemelha a uma suspensão parcial para o disco de forma
a reduzir o tempo de "boot". Desde que o Windows seja o único sistema operativo
na máquina, isto não é problemático, mas pode resultar em problemas e perda de
dados se tiver uma configuração de dual boot na qual o outro sistema operativo
aceda aos mesmos sistemas de ficheiros que o Windows. Nesse caso o verdadeiro
estado do sistema de ficheiros pode ser diferente do que o Windows acredita que
seja após o "boot" e isto pode causar corrupção do sistema de ficheiros se
houverem mais acessos de escrita no sistema de ficheiros. Por isso na
configuração de dual boot, para evitar a corrupção de sistemas de ficheiros, a
funcionalidade "fast boot"/"fast startup" tem que ser desligada dentro do
Windows.

Além disso, o mecanismo de atualizações do Windows é conhecido (por vezes) por
habilitar novamente esta funcionalidade, mesmo após ter sido desligada pelo
utilizador. É sugerido verificar periodicamente esta configuração.

Também pode ser necessário desabilitar o "fast boot" para permitir o acesso à
configuração do UEFI para escolher arrancar outro sistema operativo ou o
debian-installer. Nalguns sistemas UEFI, o firmware irá reduzir o tempo de "
boot" ao não inicializar o controlador do teclado ou o hardware USB; nesses
casos, é necessário arrancar no Windows e desabilitar esta funcionalidade para
permitir a alteração da ordem de arranque.

3.6.6. Problemas de Hardware Para Estar Atento

Suporte USB da BIOS e teclados. Se não possuir um teclado PS/2, e apenas um
modelo USB, poderá ter que habilitar legacy keyboard emulation na configuração
da BIOS para poder utilizar o seu teclado no menu do gestor de arranque, apesar
disto não ser um problema para sistemas modernos. Se o seu teclado não
trabalhar no menu do gestor de arranque, consulte o manual da sua motherboard e
veja na BIOS as opções para "Legacy keyboard emulation" ou "USB keyboard
support".

Capítulo 4. Obter o Meio de Instalação do Sistema

Índice

4.1. Imagens de instalação oficiais de Debian GNU/Linux
4.2. Download dos Ficheiros a partir dos Mirrors Debian

    4.2.1. Onde Encontrar Ficheiros de Instalação

4.3. Preparar Ficheiros para iniciar a partir de pen USB

    4.3.1. Preparar uma pen USB utilizando uma imagem híbrida de CD/DVD
    4.3.2. Copiar manualmente os ficheiros para a pen USB
    4.3.3. Copiar ficheiros manualmente para a pen USB -- a forma flexível

4.4. Preparar Ficheiros para Arrancar a Partir de Disco Rígido.

    4.4.1. Arrancar o instalador de disco rígido a partir de Linux utilizando 
        GRUB
    4.4.2. Arrancar o instalador de disco rígido a partir de DOS utilizando 
        loadlin

4.5. Preparar Ficheiros para Arrancar Através da Rede por TFTP

    4.5.1. Configurar um servidor DHCP
    4.5.2. Configurar o servidor BOOTP
    4.5.3. Disponibilizar o Servidor TFTP
    4.5.4. Mover Imagens TFTP Para o Lugar

4.6. Instalação Automática

    4.6.1. Instalação Automática Utilizando o Instalador Debian

4.7. Verificar a integridade dos ficheiros de instalação

4.1. Imagens de instalação oficiais de Debian GNU/Linux

De longe, a forma mais fácil para se instalar Debian GNU/Linux é a partir de um
conjunto de imagens de instalação oficiais. Poderá comprar um conjunto de CDs/
DVDs a um vendedor (veja a página de vendedores de CDs). Pode também
descarregar as imagens de instalação a partir de um mirror Debian e fazer o seu
próprio conjunto, se tiver uma ligação rápida à Internet e um gravador de CDs/
DVDs (para informações detalhadas visite a página de CDs/DVDs Debian) e o
Debian CD FAQ . Se tiver os meios ópticos de instalação e estes arrancarem na
sua máquina, que é o caso em todos os PCs modernos , pode saltar diretamente
para o Capítulo 5, Arrancar o Sistema de Instalação. Tem sido gasto muito
esforço para garantir que os ficheiros mais utilizados estão na primeira imagem
de CD e DVD para que possa ser feita uma instalação de um ambiente de trabalho
básico apenas com o primeiro DVD ou - de uma forma limitada - apenas com a
primeira imagem de CD.

Como os CDs têm uma capacidade bastante limitada pelos standards atuais, nem
todos os ambientes de trabalho gráficos são instaláveis apenas como o primeiro
CD; para alguns ambientes de trabalho a instalação por CD necessita de ligação
de rede durante a instalação para obter os restantes ficheiros ou os CDs
adicionais.

Além disso tenha presente que se o meio de instalação que estiver a utilizar
não contiver alguns dos pacotes que necessite, pode sempre instalar esses
pacotes posteriormente já no seu novo sistema Debian (depois da instalação
estar concluída). Se necessitar saber em que imagem de instalação pode
encontrar um pacote específico, visite https://cdimage-search.debian.org/.

Se a sua máquina não suportar arrancar a partir de um meio óptico (apenas
relevante para PCs muito antigos), mas se possuir um conjunto de CDs/DVDs, pode
utilizar uma estratégia alternativa tal como disco rígido, pen usb, arranque
pela rede, ou carregar manualmente o kernel a partir do disco para iniciar o
instalador do sistema. Os ficheiros que necessita para arrancar através de
outros meios também estão no disco; A organização do arquivo de rede Debian e a
pasta de ficheiros no disco são idênticas. Portanto quando, abaixo, forem dadas
localizações para ficheiros específicos necessários para o arranque, procure
por esses ficheiros nos mesmos diretórios e sub-diretórios no seu meio de
instalação.

Uma vez iniciado o instalador, poderá obter todos os outros ficheiros
necessários a partir do disco.

Se não tiver um conjunto do meio de instalação, então terá de descarregar os
ficheiros do sistema de instalação e colocá-los no disco rígido ou numa pen usb
ou num computador com rede para que possam ser utilizados para arrancar o
instalador.

4.2. Download dos Ficheiros a partir dos Mirrors Debian

Para encontrar o mirror mais próximo (e provavelmente o mais rápido), visite a
lista de mirrors Debian.

4.2.1. Onde Encontrar Ficheiros de Instalação

Podem ser encontrados vários ficheiros de instalação em cada mirror Debian no
diretório debian/dists/bullseye/main/installer-amd64/current/images/ -- o
MANIFEST lista cada imagem e o seu propósito.

4.3. Preparar Ficheiros para iniciar a partir de pen USB

Para preparar a pen USB, nós recomendamos utilizar um sistema onde GNU/Linux já
esteja a correr e onde seja suportado USB. Com os sistemas GNU/Linux atuais a
pen USB deverá ser automaticamente reconhecida quando a inserir. Caso contrário
deverá verificar se o módulo do kernel usb-storage está carregado. Quando a pen
USB for inserida, será mapeada para um dispositivo chamado /dev/sdX, onde "X" é
uma letra a-z. Deverá ser capaz de ver para qual o dispositivo onde a pen USB
foi mapeada ao executar o comando lsblk antes e depois de a inserir. (A saída
de dmesg (como root) é outro método possível para isso). Para escrever na sua
pen, poderá ter de desligar o botão de proteção de escrita.

Atenção

Os procedimentos descritos nesta seção irão destruir tudo o que já esteja no
dispositivo! Assegure-se que utiliza o nome correto do dispositivo da sua pen
USB. Se utilizar o dispositivo errado o resultado poderá ser que toda a
informação que esteja, por exemplo, no disco rígido seja perdida.

4.3.1. Preparar uma pen USB utilizando uma imagem híbrida de CD/DVD

As imagens de instalação de Debian para esta arquitetura são criadas utilizando
a tecnologia isohybrid; isto significa que podem ser escritas diretamente para
uma pen USB, que é uma forma muito fácil para fazer um meio de instalação.
Simplesmente escolha uma imagem (tal como netinst, CD, DVD-1) que caiba na sua
pen USB. Veja a Secção 4.1, "Imagens de instalação oficiais de Debian GNU/
Linux" para obter uma imagem de instalação.

Em alternativa, para pens USB muito pequenas, com apenas alguns megabytes de
tamanho, pode obter a imagem mini.iso a partir do diretório netboot (no local
mencionado na Secção 4.2.1, "Onde Encontrar Ficheiros de Instalação").

A imagem de instalação que escolher deve ser escrita diretamente para a pen
USB, sobrescrevendo o seu conteúdo atual. Por exemplo, ao utilizar um sistema
GNU/Linux existente, o ficheiro da imagem pode ser escrito para uma pen USB
conforme se segue, depois de se ter assegurado que a pen foi desmontada:

# cp debian.iso /dev/sdX
# sync

Pode ser encontrada informação sobre como fazer isto noutros sistemas
operativos no Debian CD FAQ.

Importante

A imagem tem que ser escrita para um dispositivo de disco completo e não para
uma partição, e.g. /dev/sdb e não para /dev/sdb1. Não utilize ferramentas que
alterem a imagem, como unetbootin.

Importante

Escrever simplesmente a imagem de instalação para a pen USB desta forma deve
funcionar bem para a maioria dos utilizadores. As outras opções abaixo são mais
completas, especialmente para pessoas com necessidades mais especializadas.

A imagem híbrida não ocupa todo o espaço de armazenamento na pen, por isso pode
valer a pena considerar utilizar o espaço livre para colocar ficheiros de
firmware, pacotes ou quaisquer outros ficheiros à sua escolha. Isto pode ser
útil se possuir apenas uma pen ou se quiser ter tudo o que necessita num
dispositivo.

Para o fazer, utilize cfdisk ou qualquer outra ferramenta de particionamento
para criar uma partição adicional na pen. Depois crie um sistema de ficheiros
(FAT) na partição, monte-o e copie ou desempacote o firmware para lá, por
exemplo com:

# mkdosfs -n FIRMWARE /dev/sdX3
# mount /dev/sdX3 /mnt
# cd /mnt
# tar zxvf /path/to/firmware.tar.gz
# cd /
# umount /mnt

Assegure-se que usa o nome correto do dispositivo para a sua pen USB. O comando
mkdosfs está contido no pacote dosfstools de Debian

Nota

Se escolheu que mini.iso seja escrito para a pen USB, a segunda partição não
tem que ser criada, porque já estará presente. Retirar e voltar a colocar a pen
USB deverá tornar as duas partições visíveis.

4.3.2. Copiar manualmente os ficheiros para a pen USB

Antes de ser utilizada a tecnologia isohybrid para as imagens de instalação de
Debian, eram utilizados os métodos documentados nos capítulos abaixo para
preparar media para arrancar a partir de dispositivos USB. Foi suplantada pela
técnica em Secção 4.3.1, "Preparar uma pen USB utilizando uma imagem híbrida de
CD/DVD", mas ainda assim foi deixado aqui por motivos educacionais e históricos
e para o caso de ser útil a algum utilizador.

Uma alternativa ao método descrito em Secção 4.3.1, "Preparar uma pen USB
utilizando uma imagem híbrida de CD/DVD" é copiar manualmente os ficheiros do
instalador, e também uma imagem de instalação para a pen. Note que a pen USB
deverá ter pelo menos 1 GB de tamanho (são possíveis configurações mais
reduzidas utilizando os ficheiros de netboot, seguindo Secção 4.3.3, "Copiar
ficheiros manualmente para a pen USB -- a forma flexível").

Existe um ficheiro tudo-em-um hd-media/boot.img.gz que contém todos os
ficheiros do instalador (incluindo o kernel) assim como o syslinux e o seu
ficheiro de configuração.

Nota

Note que, embora conveniente, este método tem uma grande desvantagem: a
capacidade lógica do dispositivo será limitada a 1 GB, mesmo que a capacidade
da pen USB seja maior. Terá de reparticionar a pen USB e criar sistema de
ficheiros novos para obter novamente toda a capacidade se alguma vez a quiser
voltar a utilizar para um propósito diferente.

Simplesmente extraia esta imagem diretamente para a sua 'pen' USB:

# zcat boot.img.gz > /dev/sdX

Depois disso, monte a pen USB (mount /dev/sdX /mnt, que terá agora um sistema
de ficheiros FAT , e copie para lá uma imagem ISO Debian (netinst ou CD
completo); veja Secção 4.1, "Imagens de instalação oficiais de Debian GNU/
Linux" para o fazer. Desmonte a pen (umount /mnt) e já está.

4.3.3. Copiar ficheiros manualmente para a pen USB -- a forma flexível

Se gostar de mais flexibilidade ou se quiser apenas saber o que se está a
passar, pode utilizar o método seguinte para colocar os ficheiros na sua pen.
Uma vantagem da utilização deste método é que -- se a capacidade da sua pen USB
tiver espaço suficiente -- tem a opção de copiar para lá qualquer imagem ISO,
até mesmo uma imagem de DVD.

4.3.3.1. Particionando e acrescentar um gestor de arranque

Iremos demonstrar como preparar a pen usb para utilizar a primeira partição, em
vez de todo o dispositivo.

De modo a iniciar o kernel após arrancar a partir da pen USB, iremos colocar um
gestor de arranque na pen. Apesar de qualquer gestor de arranque deva funcionar
é conveniente utilizar o syslinux, dado que utiliza uma partição FAT16 e pode
ser reconfigurado editando apenas um ficheiro de texto. Pode ser utilizado
qualquer sistema operativo que suporte um sistema de ficheiros FAT para fazer
alterações à configuração do gestor de arranque.

Primeiro, tem de instalar no seu sistema os pacotes syslinux e mtools.

Nota

Dado que a maioria das pens USB vêm pré-configuradas com uma única partição
FAT16, provavelmente não terá que reparticionar ou reformatar a pen. Se tiver
de o fazer de qualquer forma, utilize o cfdisk ou qualquer outra ferramenta de
particionamento para criar uma partição FAT16^[3], e depois instalar um MBR
utilizando:

# mkdosfs /dev/sdX1

Certifique-se de que utiliza o nome correto do dispositivo para a sua pen USB.
O comando mkdosfs está no pacote dosfstools de Debian.

Tendo agora uma pen USB corretamente particionada, necessita colocar syslinux
na partição FAT16 com:

# syslinux /dev/sdX1

Mais uma vez, certifique-se de que utiliza o nome correto do dispositivo. A
partição não pode estar montada quando iniciar o syslinux. Este procedimento
escreve um setor de arranque na partição e cria o ficheiro ldlinux.sys que
contém o código do gestor de arranque.

4.3.3.2. Acrescentar os ficheiros do instalador

Existem duas variantes diferentes de instalação para escolher aqui: a variante
hd-media necessita de um ficheiro ISO de instalação na pen, para carregar a
partir de lá os módulos do instalador e o sistema base. O instalador netboot no
entanto irá carregar tudo a partir de um mirror Debian.

De acordo com a sua escolha, tem de descarregar alguns ficheiros do instalador
a partir dos subdiretórios hd-media ou netboot de debian/dists/bullseye/main/
installer-amd64/current/images/ em qualquer mirror Debian:

  • vmlinuz ou linux (binário do kernel)

  • initrd.gz (imagem ramdisk inicial)

Pode escolher entre a versão em modo de texto (os ficheiros podem ser
encontrados diretamente em hd-media ou netboot) ou pela versão gráfica (procure
nos respectivos subdiretórios gtk) do instalador.

De seguida monte a partição (mount /dev/sdX1 /mnt) e copie os ficheiros
descarregados para o directório raiz da pen.

De seguida deverá criar um ficheiro texto chamado syslinux.cfg no directório
raiz da pen como ficheiro de configuração para o syslinux, que no mínimo deve
conter a seguinte linha:

default vmlinuz initrd=initrd.gz

Altere o nome do binário do kernel para "linux" se usou ficheiros netboot.

Para o instalador gráfico (de gtk) deve acrescentar vga=788 no final da linha.
Podem ser acrescentados outros parâmetros se for desejado.

Para ativar a linha de comandos de arranque para permitir acrescentar mais
parâmetros, acrescente uma linha prompt 1.

Se utilizou ficheiros de hd-media, agora deve copiar o ficheiro ISO de uma
imagem de instalação de Debian para a pen. (Para a variante netboot isto não é
necessário.)

Pode utilizar ou uma imagem netinst ou uma imagem de CD completa (veja
Secção 4.1, "Imagens de instalação oficiais de Debian GNU/Linux"). Assegure-se
que escolhe uma que caiba na pen. Tenha em conta que a imagem "netboot mini.iso
" não é utilizável para este propósito.

Quando terminar, desmonte a pen USB (umount /mnt).

4.4. Preparar Ficheiros para Arrancar a Partir de Disco Rígido.

O instalador pode ser iniciado utilizando os ficheiros de arranque colocados
numa partição existente do disco rígido, quer seja lançado a partir de outro
sistema operativo ou invocando diretamente o gestor de arranque da BIOS/UEFI.
Nos sistemas UEFI modernos, o kernel pode ser carregado diretamente a partir da
partição UEFI sem ser necessário um gestor de arranque.

Pode ser conseguida uma instalação completa "pure network" utilizando esta
técnica. Isto evita todo o aborrecimento com meios amovível, tal como encontrar
e gravar imagens de CD/DVD.

4.4.1. Arrancar o instalador de disco rígido a partir de Linux utilizando GRUB

Esta seção explica como adicionar ou até substituir uma instalação existente de
linux utilizando o GRUB.

Na altura do arranque, o GRUB suporta carregar para a memória, não apenas o
kernel mas também uma imagem de disco. Este disco de RAM pode ser utilizado
pelo kernel como sistema de ficheiros raiz.

Copie os seguintes ficheiros dos arquivos Debian para uma localização
conveniente no seu disco, por exemplo para /boot/newinstall/.

  • vmlinuz (binário kernel)

  • initrd.gz (imagem ramdisk)

Se tencionar utilizar o disco rígido apenas para arrancar e depois fazer o
download de tudo através da rede, deve fazer o download do ficheiro netboot/
debian-installer/amd64/initrd.gz e do seu kernel netboot/debian-installer/amd64
/linux correspondente. Isto permitir-lhe-á reparticionar o disco rígido a
partir do qual o instalador arranca, embora deva fazer isto com cuidado.

Em alternativa, se tencionar manter inalterada uma partição existente no disco
rígido durante a instalação, poderá descarregar o ficheiro hd-media/initrd.gz e
o seu kernel hd-media/vmlinuz, assim como uma cópia de uma imagem de instalação
para o disco rígido (assegure-se que o nome do ficheiro termina em .iso). O
instalador poderá então arrancar a partir do disco e instalar a partir da
imagem de instalação, sem necessitar de rede.

Finalmente, para configurar o gestor de arranque prossiga para a Secção 5.1.5,
"A arrancar a partir de Linux utilizando GRUB".

4.4.2. Arrancar o instalador de disco rígido a partir de DOS utilizando loadlin

Esta seção explica como preparar um disco rígido para arrancar o instalador a
partir do DOS utilizando o loadlin.

Copie os seguintes diretórios a partir de uma imagem de instalação Debian para
c:\.

  • /install.amd (binário do kernel e imagem ramdisk)

  • /tools (ferramenta loadlin)

4.5. Preparar Ficheiros para Arrancar Através da Rede por TFTP

Se a sua máquina estiver ligada a uma rede local poderá conseguir arrancar pela
rede a partir de outra máquina, utilizando TFTP. Se tencionar iniciar a
instalação do sistema a partir de outra máquina, os ficheiros de arranque terão
de ser colocados numa localização específica dessa máquina, e a máquina terá de
ser configurada para suportar o arranque da sua máquina especifica.

Terá de configurar um servidor de TFTP, e para muitas máquinas, um servidor de
DHCP, ou um servidor de BOOTP.

BOOTP é um protocolo IP que informa um computador do seu endereço IP e em que
local da rede obtém uma imagem de arranque. O DHCP (Dynamic Host Configuration
Protocol) é mais flexível, compatível com extensões anteriores do BOOTP. Alguns
sistemas apenas podem ser configurados via DHCP.

O Trivial File Transfer Protocol (TFTP) é utilizado para servir a imagem de
arranque ao cliente. Teoricamente pode ser utilizado, qualquer servidor, em
qualquer plataforma, que implemente estes protocolos. Nos exemplos desta seção,
iremos disponibilizar comandos para SunOS 4.x, SunOS 5.x (a.k.a. Solaris), e
GNU/Linux.

Nota

Para um servidor Debian GNU/Linux nós recomendamos o tftpd-hpa. É escrito pelo
mesmo autor do gestor de arranque syslinux e por isso pouco provável que cause
problemas. Uma boa alternativa é o atftpd.

4.5.1. Configurar um servidor DHCP

O ISC dhcpd é um software livre servidor de DHCP. Para Debian GNU/Linux é
recomendado o pacote isc-dhcp-server. Aqui está um exemplo de ficheiro de
configuração (veja /etc/dhcp/dhcpd.conf):

option domain-name "example.com";
option domain-name-servers ns1.example.com;
option subnet-mask 255.255.255.0;
default-lease-time 600;
max-lease-time 7200;
server-name "servername";

subnet 192.168.1.0 netmask 255.255.255.0 {
  range 192.168.1.200 192.168.1.253;
  option routers 192.168.1.1;
}

host clientname {
  filename "/tftpboot.img";
  server-name "servername";
  next-server servername;
  hardware ethernet 01:23:45:67:89:AB;
  fixed-address 192.168.1.90;
}

Neste exemplo, existe um servidor servername que executa todo o trabalho de
servidor DHCP, de servidor TFTP e de gateway de rede. Irá muito provavelmente
necessitar de alterar as opções de domain-name, tal como o nome do servidor e o
endereço de hardware do cliente. A opção filename deverá ser o nome do ficheiro
obtido por TFTP.

Após ter editado o ficheiro de configuração dhcpd, reinicie-o com /etc/init.d/
isc-dhcp-server restart.

4.5.1.1. Ativar o Arranque PXE na configuração de DHCP

Aqui está outro exemplo para um dhcp.conf utilizando o método Pre-boot
Execution Environment (PXE) de TFTP.

option domain-name "example.com";

default-lease-time 600;
max-lease-time 7200;

allow booting;
allow bootp;

# O próximo parágrafo necessita ser alterado para se adequar com o seu caso
subnet 192.168.1.0 netmask 255.255.255.0 {
  range 192.168.1.200 192.168.1.253;
  option broadcast-address 192.168.1.255;
# O endereço de gateway que pode ser diferente
# (acesso à internet por exemplo)
  option routers 192.168.1.1;
# indica o dns que quer utilizar
  option domain-name-servers 192.168.1.3;
}

group {
 next-server 192.168.1.3;
 host tftpclient {
# endereço de hardware do cliente tftp
  hardware ethernet  00:10:DC:27:6C:15;
  filename "pxelinux.0";
 }
}

Note que para um arranque PXE, o ficheiro do cliente com o nome de pxelinux.0,
é o gestor de arranque, não uma imagem de kernel (veja abaixo a Secção 4.5.4,
"Mover Imagens TFTP Para o Lugar").

Se a sua máquina utilizar UEFI para arrancar terá de especificar um gestor de
arranque apropriado para máquinas UEFI, por exemplo

group {
  next-server 192.168.1.3;
  host tftpclient {
# tftp client hardware address
  hardware ethernet  00:10:DC:27:6C:15;
  filename "debian-installer/amd64/bootnetx64.efi";
 }
}

4.5.2. Configurar o servidor BOOTP

Estão disponíveis dois servidores de BOOTP para GNU/Linux. O primeiro é o CMU 
bootpd. O outro é na verdade um servidor de DHCP: o ISC dhcpd. Em Debian GNU/
Linux estes estão contidos respetivamente nos pacotes bootp e isc-dhcp-server.

Para utilizar o CMU bootpd, primeiro tem de retirar (ou adicionar) o comentário
da linha relevante em /etc/inetd.conf. Em Debian GNU/Linux, pode executar
update-inetd --enable bootps, para o fazer. No caso do seu servidor de BOOTP
não correr em Debian, a linha em questão deve parecer-se com:

bootps  dgram  udp  wait  root  /usr/sbin/bootpd  bootpd -i -t 120

Agora, terá de criar um ficheiro /etc/bootptab. Este tem o mesmo tipo de
formato familiar e críptico dos ficheiros de printcap, termcap, e disktab do
bom velho BSD. Para mais informações veja a página do manual de bootptab. Para
o CMU bootpd, irá necessitar saber o endereço de hardware MAC) do cliente. Aqui
está um exemplo de/etc/bootptab

client:\
  hd=/tftpboot:\
  bf=tftpboot.img:\
  ip=192.168.1.90:\
  sm=255.255.255.0:\
  sa=192.168.1.1:\
  ha=0123456789AB:

Tem de alterar pelo menos a opção "ha", que especifica o endereço de hardware
do cliente. A opção "bf" especifica o ficheiro que o cliente deve obter via
TFTP; para mais detalhes veja a Secção 4.5.4, "Mover Imagens TFTP Para o Lugar"
.

Por contraste, configurar BOOTP com ISC dhcpd é bastante fácil, pois trata os
clientes de BOOTP como casos moderadamente especiais de clientes de DHCP.
Algumas arquiteturas necessitam duma configuração complexa para arrancarem os
clientes por BOOTP. Se for um desses casos, leia a Secção 4.5.1, "Configurar um
servidor DHCP". Caso contrário poderá ser capaz de o conseguir simplesmente
acrescentando a diretiva allow bootp ao bloco de configuração para a subnet que
contém o cliente em /etc/dhcp/dhcpd.conf, e reiniciar o dhcpd com /etc/init.d/
isc-dhcp-server restart.

4.5.3. Disponibilizar o Servidor TFTP

Para ter o servidor de TFTP pronto, primeiro deve assegurar-se que o tftpd está
ativo.

No caso do tftpd-hpa o serviço pode ser corrido de duas formas. Pode ser
iniciado a pedido pelo daemon inet do sistema, ou pode ser configurado para
correr como um daemon independente. O método a utilizar é escolhido quando o
pacote é instalado e pode ser alterado reconfigurando o pacote.

Nota

Historicamente, os servidores TFTP utilizavam o diretório /tftpboot para servir
imagens. No entanto, os pacotes Debian GNU/Linux podem utilizar outros
diretórios em conformidade com o Filesystem Hierarchy Standard. Por exemplo,
tftpd-hpa utiliza, por predefinição, /srv/tftp. Poderá ter de ajustar de acordo
os exemplos de configuração nesta seção.

Todas as alternativas do in.tftpd disponíveis em Debian devem registar, por
predefinição, os pedidos TFTP no registo do sistema. Algumas suportam um
argumento -v para aumentar o detalhe. É recomendado verificar essas mensagens
de registo no caso de ocorrerem problemas de arranque já que são um bom ponto
de partida para diagnosticar a causa dos erros.

4.5.4. Mover Imagens TFTP Para o Lugar

Em seguida, coloque a imagem de arranque do TFTP de que necessita, conforme se
encontra na Secção 4.2.1, "Onde Encontrar Ficheiros de Instalação", no
diretório de imagem de arranque tftpd. Terá de fazer um link a partir desse
ficheiro para o ficheiro que o tftpd irá utilizar para iniciar um cliente em
particular. Infelizmente, o nome do ficheiro é determinado pelo cliente TFTP, e
não existem standards sólidos.

Para arranque PXE, tudo o que deve precisar configurar está no tarball netboot/
netboot.tar.gz. Simplesmente extraia este tarball para o diretório da imagens
de arranque tftpd. Certifique-se que o servidor de dhcp está configurado para
passar /pxelinux.0 ao tftpd como o nome do ficheiro para arrancar. Para
máquinas UEFI, tem de passar um nome de imagem de arranque EFI (tal como /
debian-installer/amd64/bootnetx64.efi).

4.6. Instalação Automática

É possível fazer instalações totalmente automáticas para instalar em vários
computadores. Os pacotes Debian destinados a essa função incluem fai-quickstart
(que utiliza um servidor de instalação) e o próprio Instalador Debian. Para
informação detalhada veja a Página do FAI.

4.6.1. Instalação Automática Utilizando o Instalador Debian

O Instalador Debian suporta instalações automáticas através de ficheiros de
pré-configuração. Pode ser carregado um ficheiro de pré-configuração a partir
da rede ou a partir de um meio amovível, e utilizado para preencher as
respostas às perguntas feitas durante o processo de instalação.

Toda a documentação de preseeding incluindo um exemplo funcional que pode
editar encontra-se no Apêndice B, Automatizar a instalação utilizando
preseeding.

4.7. Verificar a integridade dos ficheiros de instalação

Pode verificar a integridade dos ficheiros descarregados com checksums
disponibilizados nos ficheiros SHA256SUMS ou SHA512SUMS nos mirrors de Debian.
Pode encontrá-los nos mesmos locais das próprias imagens de instalação. Visite
as seguintes localizações:

  • ficheiros de checksum para imagens de CD,

  • ficheiros de checksum para imagens de DVD,

  • ficheiros de checksum para imagens de BD,

  • ficheiros de checksum para outros ficheiros de instalação.

Para calcular o checksum de um ficheiro de instalação descarregado, utilize:

sha256sum filename.iso

e o respetivo

sha512sum filename.iso

e depois compare o checksum mostrado com o correspondente no ficheiro
SHA256SUMS ou no SHA512SUMS.

O Debian CD FAQ tem mais informação útil acerca deste tópico (tal como o script
check_debian_iso, para semi-automotizar o procedimento acima), assim como
instruções de como verificar a integridade dos próprios ficheiros de checksum
acima.


━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

^[3] Não se esqueça de ativar a flag de arranque "bootable".

Capítulo 5. Arrancar o Sistema de Instalação

Índice

5.1. Arrancar o Instalador em 64-bit PC

    5.1.1. Arrancar a partir de pen USB
    5.1.2. Arrancar a partir de um disco óptico (CD/DVD)
    5.1.3. Arrancar a partir do Windows
    5.1.4. A arrancar a partir do DOS com o loadlin
    5.1.5. A arrancar a partir de Linux utilizando GRUB
    5.1.6. Arrancar com TFTP
    5.1.7. Um Ecrã de Arranque
    5.1.8. O Instalador Gráfico

5.2. Acessibilidade

    5.2.1. Front-end do Instalador
    5.2.2. Ecrãs Braille USB
    5.2.3. Ecrãs Braille Série
    5.2.4. Software para Sintetizar Voz
    5.2.5. Hardware para Sintetizar Voz
    5.2.6. Dispositivos em Placa
    5.2.7. Tema de Alto Contraste
    5.2.8. Zoom
    5.2.9. Instalação avançada, modo de recuperação e instalação automatizada
    5.2.10. Acessibilidade do sistema instalado

5.3. Parâmetros de Arranque

    5.3.1. Consola de arranque
    5.3.2. Parâmetros de instalação Debian
    5.3.3. Utilizar parâmetros de arranque para responder a questões
    5.3.4. Passagem de argumentos a módulos do kernel
    5.3.5. Colocar módulos do kernel na lista negra

5.4. Diagnosticar Problemas no Processo de Instalação

    5.4.1. Fiabilidade de meios ópticos
    5.4.2. Configuração de arranque
    5.4.3. Software para Sintetizar Voz
    5.4.4. Problemas comuns de Instalação em 64-bit PC
    5.4.5. Interpretar as Mensagens de Arranque do Kernel
    5.4.6. Relatar Problemas de Instalação
    5.4.7. Submeter Relatórios de Instalação

5.1. Arrancar o Instalador em 64-bit PC

Atenção

Se tiver qualquer outro sistema operativo no seu sistema, que deseje manter
(configuração 'dual-boot'), deve assegurar-se que esses sistemas operativos
foram devidamente desligados antes de arrancar o instalador. Instalar um
sistema operativo com outro sistema operativo em hibernação (em suspensão no
disco) pode resultar na perda, ou num estado danificado do sistema operativo
suspenso que pode causar problemas quando for reiniciado.

Nota

Para informação sobre como arrancar o instalador gráfico, veja a Secção 5.1.8,
"O Instalador Gráfico".

5.1.1. Arrancar a partir de pen USB

Se o seu computador vai arrancar por USB, este será provavelmente o caminho
mais fácil para a instalação. Assumindo que preparou tudo a partir da 
Secção 3.6.2, "Seleção de Dispositivo Para Arranque" e da Secção 4.3, "Preparar
Ficheiros para iniciar a partir de pen USB", basta ligar a sua pen USB numa
porta USB livre e reiniciar o computador. O sistema deverá arrancar, e a menos
que tenha utilizado o método flexível para compilar a pen e não a tenha
ativado, deverá ser-lhe apresentado um menu gráfico (no hardware que o
suportar). Aqui poderá selecionar várias opções do instalador, ou simplesmente
carregar em Enter.

5.1.2. Arrancar a partir de um disco óptico (CD/DVD)

Se tiver um conjunto de discos ópticos e se a sua máquina suportar o arranque
diretamente a partir deles, fantástico! Simplesmente configure o seu sistema
para arrancar a partir de um disco óptico conforme é descrito na Secção 3.6.2,
"Seleção de Dispositivo Para Arranque", insira o disco, reinicie, e proceda
para o próximo capítulo.

Note que determinados leitores de discos ópticos podem necessitar de
controladores especiais, e por isso serem inacessíveis nas fases iniciais da
instalação. Se se verificar que a forma comum de iniciar a partir do disco
óptico não funciona para o seu hardware, então visite novamente este capítulo e
leia acerca de kernels alternativos e métodos de instalação que possam
funcionar para si.

Mesmo que não consiga arrancar a partir do disco óptico, provavelmente poderá
instalar os componentes do sistema Debian e quaisquer pacotes que deseje a
partir desse disco. Simplesmente arranque utilizando um meio diferente e quando
for altura de instalar o sistema operativo, o sistema base, e quaisquer pacotes
adicionais, aponte o sistema de instalação para o leitor do disco óptico.

Se tiver problemas com o arranque, veja a Secção 5.4, "Diagnosticar Problemas
no Processo de Instalação".

5.1.3. Arrancar a partir do Windows

Para iniciar o instalador a partir do Windows, pode

  • obter o meio de instalação conforme é descrito na Secção 4.1, "Imagens de
    instalação oficiais de Debian GNU/Linux" ou na Secção 4.3, "Preparar
    Ficheiros para iniciar a partir de pen USB" ou

  • descarregar o executável de Windows que está disponível nos mirrors Debian
    como tools/win32-loader/stable/win32-loader.exe.

Se utilizar um meio de disco óptico, deve ser lançado automaticamente um
programa de pré-instalação ao inserir o disco. No caso do Windows não o iniciar
automaticamente, ou se estiver a utilizar uma pen de memória USB, pode corrê-lo
manualmente acedendo ao dispositivo e executando setup.exe.

Após o programa ter sido iniciado, serão colocadas algumas questões
preliminares e o sistema será preparado para reiniciar para o instalador de
Debian GNU/Linux.

5.1.4. A arrancar a partir do DOS com o loadlin

Arrancar para o DOS (não para o Windows). Para fazer isto, pode por exemplo
arrancar a partir de um disco de recuperação ou de diagnóstico.

Se conseguir aceder ao CD de instalação, altere o leitor atual para o leitor de
CD-ROM, p.e.

d:

caso contrário assegure-se que preparou primeiro o seu disco rígido conforme é
explicado na Secção 4.4.2, "Arrancar o instalador de disco rígido a partir de
DOS utilizando loadlin", e altere o leitor atual se necessário.

Introduza o sub-diretório do tipo que escolheu, p.e.,

cd \install.amd

Se preferir utilizar o instalador gráfico, introduza o diretório gtk.

cd gtk

De seguida, execute install.bat. O kernel irá carregar e lançar o sistema de
instalação.

5.1.5. A arrancar a partir de Linux utilizando GRUB

Para arrancar o instalador a partir do disco rígido, primeiro terá de fazer o
download e colocar os ficheiros necessários, como descrito na Secção 4.4,
"Preparar Ficheiros para Arrancar a Partir de Disco Rígido.".

Para o GRUB2, irá ter de configurar duas coisas essenciais em /boot/grub/
grub.cfg:

  • carregar o initrd.gz instalador no arranque;

  • ter o kernel vmlinuz a utilizar um disco na RAM como a sua partição raiz.

Uma entrada para o instalador poderá ser, por exemplo:

menuentry 'Nova instalação' {
insmod part_msdos
insmod ext2
set root='(hd0,msdos1)'
linux /boot/newinstall/vmlinuz
initrd /boot/newinstall/initrd.gz
}

5.1.6. Arrancar com TFTP

Arrancar pela rede requer que tenha uma ligação de rede e um servidor TFTP de
arranque por rede (e provavelmente também um servidor de DHCP, RARP ou BOOTP
para a configuração automática da rede).

A configuração do servidor para suportar arranque pela rede é descrita na
Secção 4.5, "Preparar Ficheiros para Arrancar Através da Rede por TFTP".

Existem várias maneiras fazer um arranque TFTP em i386.

5.1.6.1. Placas de rede ou Motherboards que suportam PXE

Pode acontecer que a sua placa de rede ou motherboard disponibilizem a
funcionalidade de arranque por PXE. Isto é uma re-implementação da Intel (tm)
do arranque por TFTP. Se tal acontecer, poderá configurar a sua BIOS/UEFI para
arrancar através da rede.

5.1.6.2. Placa de Rede com Network BootROM

Poderá ser que a sua placa de rede disponibilize a funcionalidade de arranque
por TFTP.

5.1.6.3. Etherboot

O projeto etherboot disponibiliza disquetes de arranque e mesmo bootroms que
fazem TFTPboot.

5.1.7. Um Ecrã de Arranque

Quando o instalador iniciar, deve-lhe ser apresentado um amigável ecrã gráfico
que mostra o logótipo Debian e um menu.

Debian GNU/Linux installer boot menu

Graphical install
Install
Advanced options                            >
Accessible dark contrast installer menu     >
Help
Install with speech synthesis

Nota

Este ecrã gráfico irá parecer ligeiramente diferente dependendo de como o seu
computador arrancou (BIOS ou UEFI), mas serão mostradas as mesmas opções.

Dependente do método de instalação que estiver a utilizar, o "Graphical install
" poderá não estar disponível. As imagens de Bi-arquitetura adicionalmente têm
uma variante de instalação de 64-bit para cada opção de instalação, mesmo por
baixo, por isso quase que dobra o número de opções.

Para uma instalação normal, escolha "Graphical install" ou a entrada "Install"
-- utilizando as teclas com setas no teclado ou digite a primeira letra
(destacada) -- e carregue em Enter para arrancar o instalador. A entrada "
Graphical Install" já está escolhida predefinição.

A entrada "Advanced options" dá acesso a um segundo menu que permite arrancar o
instalador em modo avançado, em modo de recuperação e para instalações
automatizadas.

Se desejar ou necessitar acrescentar quaisquer parâmetros de arranque para o
instalador ou para o kernel, carregue em Tab (arranque com BIOS) ou em e,
depois três vezes em down arrow e de seguida em end (arranque com UEFI). Isto
irá trazer o comando de arranque para a entrada do menu escolhida e permite-lhe
editar para se adequar à sua necessidade. Note que nesta altura a disposição do
teclado ainda é QWERTY. Os ecrãs de ajuda (ver abaixo) listam algumas opções
usuais possíveis. Carregue em Enter (arranque com BIOS) ou em F10 (arranque com
UEFI) para arrancar o instalador com as suas opções; carregar em Esc irá
levá-lo de volta para o menu de arranque e desfazer quaisquer alterações que
tenha feito.

Escolher a entrada "Help" irá resultar em que seja mostrado o primeiro ecrã de
ajuda, o qual dá uma vista global de todos os ecrãs de ajuda disponíveis. Para
voltar ao menu de arranque após terem sido mostrados os ecrãs de ajuda, escreva
"menu" na linha de comandos e carregue em Enter. Todos os ecrãs de ajuda têm
uma linha de comandos de arranque na qual pode ser escrito o comando de
arranque:

Press F1 for the help index, or ENTER to boot:

Nesta linha de comandos de arranque pode carregar em Enter para arrancar o
instalador com as opções predefinidas ou introduzir um comando específico de
arranque e, opcionalmente, parâmetros de arranque. Nos vários ecrãs de ajuda
podem ser encontrados um número de parâmetros de arranque que podem ser úteis.
Se acrescentar quaisquer parâmetros á linha de comandos de arranque,
assegure-se que digita primeiro o método de arranque (o predefinido é install e
um espaço antes do primeiro parâmetro (e.g., install fb=false).

Nota

Nesta altura é assumido que o teclado tenha uma disposição predefinida de
Inglês Americano. Isto significa que se o seu teclado tiver uma disposição
diferente (específico da linguagem), os caracteres que aparecem no ecrã podem
ser diferentes dos que espera quando digita os parâmetros. A Wikipedia tem um
esquema da disposição do teclado US que pode ser utilizado como referência para
encontrar as teclas corretas a utilizar.

Nota

Se estiver a utilizar um sistema que tenha a BIOS configurada para utilizar uma
consola série, poderá não conseguir ver o ecrã gráfico inicial de apresentação
quando arrancar o instalador; poderá mesmo não ver o menu de arranque. Poderá
acontecer o mesmo se estiver a instalar a partir de um dispositivo de gestão
remota que disponibilize um interface de texto para a consola VGA. Exemplos
destes dispositivos incluem a consola de texto "integrated Lights Out" (iLO) da
Compaq e a "Integrated Remote Assistant" (IRA) da HP.

Para contornar o ecrã gráfico de arranque pode carregar às cegas em Esc para
obter uma linha de comandos de arranque em texto, ou (igualmente às cegas)
pressione em "H" seguido de Enter para escolher a opção "Help" descrita acima.
Depois disso as suas digitações devem ser ecoadas na linha de comandos. Para
evitar que o instalador utilize o framebuffer para o resto da instalação,
também irá querer acrescentar vga=normal fb=false na linha de comandos de
arranque, conforme é descrito no texto de ajuda.

5.1.8. O Instalador Gráfico

A versão gráfica do instalador está disponível apenas para um número limitado
de arquiteturas, incluindo 64-bit PC. A funcionalidade do instalador gráfico é
essencialmente a mesma do instalador em modo de texto já que utiliza
basicamente os mesmos programas, mas com um frontend diferente.

Embora a funcionalidade seja idêntica, o instalador gráfico tem algumas
vantagens significativas. A principal vantagem é que suporta mais linguagens,
nomeadamente aqueles cujo conjunto de caracteres não pode ser mostrado no
frontend de modo texto "newt". Também tem algumas vantagens de acessibilidade
tais como a opção de utilizar rato, e em alguns casos algumas questões podem
ser mostradas num único ecrã.

O instalador gráfico está disponível em todas as imagens de CD/DVD e com o
método de instalação hd-media. Para iniciar o instalador gráfico simplesmente
escolha a opção relevante no menu de arranque. Podem ser escolhidos os modos
Avançado e Recuperação do instalador gráfico a partir do menu "Advanced options
". Os métodos de arranque anteriormente utilizados installgui, expertgui e
rescuegui podem ainda ser utilizados a partir da prompt de arranque que é
mostrada após escolher a opção "Help" no menu de arranque.

Existe também uma imagem do instalador gráfico que pode arrancar pela rede. E
existe uma imagem especial "mini" ISO^[4], que é útil principalmente para
testes.

Tal como com o instalador em modo de texto é possível acrescentar parâmetros de
arranque ao iniciar o instalador gráfico.

Nota

O instalador gráfico necessita de mais memória para correr do que o instalador
em modo de texto: 810MB. Se não estiver disponível memória suficiente, irá
automaticamente reverter para o frontend de modo de texto "newt".

Se a quantidade de memória no seu sistema estiver abaixo de 780MB, o instalador
gráfico poderá falhar o arranque. No entanto arrancar o instalador em modo de
texto poderá ainda funcionar. É recomendado utilizar o instalador em modo de
texto em sistemas com pouca memória.

5.2. Acessibilidade

Alguns utilizadores podem necessitar de suporte especifico devido a, por
exemplo, visão reduzida. Os ecrãs braille USB são automaticamente detetados
(mas não os ecrãs série ligados com conversor série-USB), mas a maioria das
outras funcionalidades de acessibilidade têm de ser ativadas manualmente. Em
máquinas que o suportem, o menu de arranque emite um apito quando estiver
pronto para que sejam pressionadas teclas. Apita uma vez em sistemas BIOS e
duas vezes em sistemas UEFI. Alguns parâmetros de arranque podem então ser
acrescentados para ativar as funcionalidades de acessibilidade (veja também a
Secção 5.1.7, "Um Ecrã de Arranque"). Note que na maioria das arquiteturas o
gestor de arranque interpreta o seu teclado como sendo um teclado QWERTY.

5.2.1. Front-end do Instalador

O instalador Debian suporta vários frontends para colocar questões, com várias
conveniências para acessibilidade: notavelmente, text utiliza texto simples
enquanto que newt utiliza caixas de diálogo baseadas em texto. A escolha pode
ser feita na linha de comandos do arranque, veja a documentação para
DEBIAN_FRONTEND na Secção 5.3.2, "Parâmetros de instalação Debian".

Com o frontend newt (utilizado principalmente com braille), onde normalmente
apenas se escolhem as respostas com as setas e Enter para validar a escolha.
Carregar em Tab ou Shift - Tab permite alternar entre elementos do diálogo, e
notavelmente aceder ao butão Voltar, que traz novamente as questões anteriores.
Alguns diálogos contêm checkboxes que podem ser alteradas pressionando Space.

Com o frontend text (utilizado normalmente com discurso), normalmente
escolhem-se as respostas ao escrever o seu número e de seguida pressiona-se a
tecla Enter. Pode-se também não escrever nada e pressionar Enter apenas para
simplesmente aceitar o valor predefinido. Escrever < e pressionar Enter traz
novamente as questões anteriores. Quando a seleção de escolhas tiver de ser
feita (e.g. durante a seleção de tarefas), pode escrever ! para espressar uma
seleção vazia.

5.2.2. Ecrãs Braille USB

Os ecrãs braille USB devem ser detetados automaticamente. Será então
automaticamente selecionada uma versão textual do instalador, e o suporte para
o ecrã braille será automaticamente instalado no sistema a instalar. Pode então
carregar em Enter no menu de arranque. Uma vez que o brltty seja iniciado,
poderá escolher uma tabela braille entrando no menu de preferências. O
documentação acerca das teclas de atalho para os dispositivos braille estão
disponíveis no website brltty.

5.2.3. Ecrãs Braille Série

Os ecrãs braille série não podem ser automaticamente detetados corretamente (já
que isso pode danificar alguns deles). Por isso terá de acrescentar o parâmetro
de arranque brltty=driver,port para dizer ao brltty qual o driver e porta que
deve utilizar. driver deve ser substituído pelo código de duas letras para o
seu terminal (veja a Manual do BRLTTY). port deverá ser substituído pelo nome
da porta série onde está ligado o ecrã, o predefinido é ttyS0, ttyUSB0 pode ser
utilizado tipicamente quando utilizar um conversor série-USB. Pode ser indicado
um terceiro parâmetro para escolher o nome da tabela Braille a ser utilizada
(veja o Manual do BRLTTY); A tabela predefinida é em Inglês. Note que a tabela
pode ser alterada posteriormente ao entrar no menu de preferências. Pode ser
passado um quarto parâmetro para passar parâmetros ao driver braille, tal como
protocol=foo que é necessário nalguns modelos raros. A documentação acerca das
teclas de atalho para dispositivos braille está disponível no website brltty.

5.2.4. Software para Sintetizar Voz

O suporte para hardware de dispositivos de síntese de voz está disponível em
todas as imagens do instalador que tenham o instalador gráfico, i.e. todas as
imagens netinst, CD e DVD, e a variante netboot gtk. Pode ser ativado no menu
de arranque ao carregar em s Enter. A versão textual do instalador irá ser
escolhida automaticamente e o suporte para o software de síntese de voz será
instalado automaticamente no sistema alvo.

Se forem detetadas várias placas de som, ser-lhe-á pedido para carregar em 
Enter quando ouvir voz da placa de som desejada.

A primeira questão (linguagem) é falada em Inglês, o resto da instalação é
falada na linguagem escolhido (se disponível no espeak).

A velocidade predefinida do discurso é lenta. Para a tornar mais rápida,
carregue em CapsLock+6. Para tornar ainda mais lento, carregue em CapsLock+5. O
volume predefinido tem uma intensidade média. Para o tornar mais alto, carregue
em CapsLock+2. Para o tornar mais baixo, carregue em CapsLock+1. Para obter
mais detalhes acerca dos atalhos de navegação, veja o Guia do Speakup. Para
apenas aceitar a resposta predefinida a uma questão, simplesmente pressione em 
Enter na linha de comandos. Para uma resposta vazia a essa questão, escreva !
na linha de comandos. Para voltar à questão anterior, escreva < na linha de
comandos.

5.2.5. Hardware para Sintetizar Voz

O suporte para hardware de dispositivos de síntese de voz está disponível em
todas as imagens do instalador que tenha o instalador gráfico, i.e. todas as
imagens netinst, CD e DVD, e a variante gtk. Por isso tem de selecionar a
entrada "Instalador Gráfico" no menu de arranque.

Os dispositivos de hardware para sintetizar voz não podem ser detetados
automaticamente. Por isso tem de acrescentar o parâmetro de arranque
speakup.synth=driver para dizer ao speakup qual o driver que deve utilizar.
driver deve ser substituído pelo código de driver para o seu dispositivo (veja
a lista de códigos de driver). A versão texto do instalador será então
automaticamente escolhida, e o suporte para o dispositivo para sintetizar voz
será automaticamente instalado no sistema alvo.

5.2.6. Dispositivos em Placa

Alguns dispositivos de acessibilidade são na verdade placas que são ligadas
dentro da máquina e que lêem texto diretamente da memória gráfica. Para pô-las
a funcionar o suporte a framebuffer tem de ser desligado utilizando o parâmetro
de arranque vga=normal fb=false. No entanto isto irá reduzir o número de
linguagens disponíveis.

Se desejado, a versão textual do gestor de arranque pode ser ativada antes
acrescentando o parâmetro de arranque ao escrever h Enter.

5.2.7. Tema de Alto Contraste

Para utilizadores com visão reduzida, o instalador pode utilizar um tema de
cores com alto contraste que o torna mais legível. Para o ativar, pode utilizar
a entrada "Accessible high contrast" do menu de arranque com o atalho d, ou
acrescentar o parâmetro de arranque theme=dark.

5.2.8. Zoom

Para utilizadores com baixa visão, o instalador gráfico tem um suporte básico
de zoom: os atalhos Control++ e Control+- aumentam e diminuem o tamanho das
letras.

5.2.9. Instalação avançada, modo de recuperação e instalação automatizada

As escolhas Avançado, Recuperação e instalação Automática também estão
disponíveis com suporte de acessibilidade. Para aceder a elas, primeiro tem de
entrar no submenu "Advanced Options" a partir do menu de arranque, para isso
digitar a. Se usar um sistema com BIOS (o menu de arranque terá apitado apenas
uma vez), isto tem de ser seguido de Enter ; Para sistemas UEFI (o menu de
arranque terá apitado duas vezes) não é necessário fazer isso. Depois, para
ativar a síntese de voz, opcionalmente pode ser pressionado s (seguido
novamente de Enter se utilizar um sistema com BIOS). A partir daqui podem ser
utilizados vários atalhos: x para instalação avançada, r para o modo de
recuperação ou a para instalação automatizada. Novamente, se utilizar um
sistema com BIOS, cada um deles tem de ser seguido de Enter.

A escolha de instalação automatizada permite instalar Debian de forma
totalmente automática utilizando para isso preseeding, cuja fonte pode ser
introduzida após terem sido iniciadas as funcionalidades de acessibilidade. O
preseeding está documentado em Apêndice B, Automatizar a instalação utilizando
preseeding.

5.2.10. Acessibilidade do sistema instalado

A documentação de acessibilidade do sistema instalado está disponível na página
do Wiki Debian Accessibility.

5.3. Parâmetros de Arranque

Parâmetros de arranque são parâmetros do kernel Linux que são geralmente
utilizados para assegurar que os periféricos são tratados devidamente. Para a
maioria, o kernel pode auto detetar informação sobre os seus periféricos.
Contudo, em alguns casos terá de ajudar um pouco o kernel.

Se esta é a primeira vez que está a iniciar o sistema, tente os parâmetros de
arranque predefinidos (i.e., não tente alterar os parâmetros) e veja se
funciona corretamente. Provavelmente sim. Se não, pode reiniciar mais tarde e
procurar por parâmetros especiais que informem o sistema acerca do seu
hardware.

Pode ser encontrada muita informação sobre muitos parâmetros de arranque em
Linux BootPrompt HOWTO, incluindo dicas para hardware obscuro. Esta seção
contém apenas um esboço dos parâmetros mais distintos. Abaixo estão incluídos
alguns truques para identificar problemas na Secção 5.4, "Diagnosticar
Problemas no Processo de Instalação".

5.3.1. Consola de arranque

Se estiver a arrancar com uma consola série, o kernel deverá detetar isto
automaticamente. Se também tiver ligado uma placa gráfica (framebuffer) e um
teclado ao computador no qual deseja arrancar através da consola série, poderá
ter de passar o argumento console=dispositivo ao kernel, onde dispositivo é o
seu dispositivo série do destino, normalmente é algo parecido com ttyS0.

Poderá ter de especificar os parâmetros para a porta série, tal como a
velocidade e paridade, por exemplo console=ttyS0,9600n8; outras velocidades
típicas podem ser 57600 e 115200. Assegure-se que especifica esta opção após "
---", para que seja copiada para a configuração do sistema instalado (se for
suportado pelo instalador para o gestor de arranque).

De modo a assegurar que o tipo de terminal utilizado pelo instalador coincide
com o do seu emulador de terminal, pode ser acrescentado o parâmetro TERM=tipo.
Note que o instalador apenas suporta os seguintes tipos de terminais: linux,
bterm, ansi, vt102 e dumb. O predefinido para a consola série no
debian-installer é vt102. Se utilizar uma consola IPMI ou uma ferramenta de
virtualização que não disponibilize conversão para tais tipos de terminais,
e.g. QEMU/KVM, pode iniciá-la dentro de uma sessão de screen. Isto irá realizar
a conversão para o tipo de terminal do screen, que é muito próximo de vt102.

5.3.2. Parâmetros de instalação Debian

O sistema de instalação reconhece alguns parâmetros de arranque adicionais ^[5]
que poderão ser úteis.

Um certo número de parâmetros têm um formato "abreviado" que ajuda a evitar as
limitações das opções da linha de comandos do kernel e torna a introdução de
parâmetros mais fácil. Se um parâmetro tem uma forma abreviada, esta será
listada entre parêntesis atrás da forma (normal) mais longa. Os exemplos neste
manual normalmente irão utilizar a forma abreviada.

debconf/priority (prioridade)

    Este parâmetro ajusta a prioridade mínima das mensagens a serem mostradas.

    Por predefinição a instalação utiliza priority=high. Isto significa que as
    mensagens de prioridade alta e crítica irão ser mostradas, mas as mensagens
    de prioridade média e baixa serão evitadas. Se forem encontrados problemas,
    o instalador ajusta a prioridade conforme necessário.

    Se acrescentou priority=medium como parâmetro de arranque irá-lhe ser
    mostrado o menu de instalação e assim ganhar mais controlo sobre a
    instalação. Quando é utilizado priority=low serão mostradas todas as
    mensagens (Isto é equivalente ao método de arranque expert). Com priority=
    critical, o sistema de instalação irá mostrar somente as mensagens críticas
    e tentará optar pelas opções corretas sem grandes alaridos.

DEBIAN_FRONTEND

    Este parâmetro de arranque controla o tipo de interface para o utilizador
    que é utilizado para o instalador. Os parâmetros possíveis atuais são:

      □ DEBIAN_FRONTEND=noninteractive

      □ DEBIAN_FRONTEND=newt

      □ DEBIAN_FRONTEND=gtk

    O frontend predefinido é DEBIAN_FRONTEND=newt. Pode ser preferível utilizar
    DEBIAN_FRONTEND=text para instalações por consolas série. Alguns tipos
    especializados de meios de instalação poderão oferecer apenas uma seleção
    limitada de frontends, mas os frontends newt e text estão disponíveis na
    maioria dos meios de instalação. Em arquiteturas que o suportem, o
    instalador gráfico utiliza o frontend gtk.

BOOT_DEBUG

    Definir este parâmetro de arranque para 2 irá fazer com que o processo de
    arranque da instalação seja feito com um registo detalhado. Defini-lo para
    3 faz com que estejam disponíveis shells de debug em pontos estratégicos do
    processo de arranque. (Sair das shells para continuar o processo de
    arranque.)

    BOOT_DEBUG=0

        Isto é a predefinição.

    BOOT_DEBUG=1

        Mais detalhes que o habitual

    BOOT_DEBUG=2

        Muita informação de análise.

    BOOT_DEBUG=3

        As shells são executadas em vários pontos do processo de arranque para
        permitir um debugging detalhado. Sair da shell para continuar o
        arranque.

log_host, log_port

    Faz o instalador enviar mensagens de log para um syslog remoto na máquina e
    porto especificados assim como para um ficheiro local. Caso não seja
    especificado, o porto é o predefinido para o porto standard do syslog, 514.

lowmem

    Pode ser utilizado para forçar o instalador a um nível de pouca memória
    superior ao que o instalador define baseado na memória disponível. Os
    valores possíveis são 1 e 2. Veja também a Secção 6.3.1.1, "Verificar a
    memória disponível / modo de baixa memória".

noshell

    Previne que o instalador ofereça shells interativas no tty2 e tty3. Útil
    para instalações à distância em que a segurança física é limitada.

debian-installer/framebuffer (fb)

    Algumas arquiteturas utilizam o framebuffer do kernel para oferecer uma
    instalação em várias línguas. Se o framebuffer causar problemas no seu
    sistema pode desativar esta funcionalidade utilizando o parâmetro vga=
    normal fb=false. Os sintomas do problema são mensagens de erro de bterm ou
    bogl, um ecrã em branco, ou uma paragem nos primeiros minutos após o início
    da instalação.

debian-installer/theme (theme)

    Um tema determina como vai parecer o interface com o utilizador (cores,
    ícones, etc.) Os temas disponíveis podem diferir por frontend. Atualmente
    ambos os frontends newt e gtk têm um tema "dark" (além do aspeto standard)
    que foi desenhado para os utilizadores com dificuldades de visão. Escolha
    este tema arrancando com theme=dark (existe também o atalho d de teclado
    para isto no menu de arranque).

netcfg/disable_autoconfig

    Por predefinição o debian-installer deteta automaticamente a configuração
    da rede através da configuração automática IPv6 e DHCP. Se a deteção for
    bem sucedida, não terá a oportunidade de rever e alterar as definições
    obtidas. Apenas poderá fazer uma configuração da rede manualmente caso
    falhe a configuração automática.

    Se tiver um router IPv6 ou um servidor de DHCP na sua rede local, mas se
    quiser evitar utilizá-lo porque e.g. devolve respostas erradas, pode
    utilizar o parâmetro netcfg/disable_autoconfig=true para prevenir qualquer
    configuração automática da rede e introduzir manualmente a informação.

hw-detect/start_pcmcia

    Ponha como false para prevenir que sejam iniciados serviços PCMCIA, se isso
    causar problemas. Alguns portáteis são bem conhecidos por este mau
    comportamento.

disk-detect/dmraid/enable (dmraid)

    Definido como true para habilitar o suporte para discos RAID Serial ATA
    (também chamado de ATA RAID, BIOS RAID ou 'fake RAID') no instalador. Note
    que este suporte atualmente é experimental. Pode ser encontrada informação
    adicional no Wiki do Instalador Debian.

preseed/url (url)

    Especificar o url para o download de um ficheiro de pré-configuração a
    utilizar para automatizar a instalação. Veja a Secção 4.6, "Instalação
    Automática".

preseed/file (file)

    Especificar o caminho para carregar um ficheiro de pré-configuração para
    automatizar a instalação. Veja a Secção 4.6, "Instalação Automática".

preseed/interactive

    Defina como true para mostrar as questões mesmo que a estas tenha sido
    feito preseed. Pode ser útil para testar ou depurar um ficheiro de
    pré-configuração. Note que isto não terá qualquer efeito em parâmetros que
    são passados como parâmetros de arranque, mas pode ser utilizado para
    aqueles com uma sintaxe especial. Para detalhes veja a Secção B.5.2,
    "Utilizar o preseed para alterar valores predefinidos".

auto-install/enable (auto)

    Atrasar questões que são normalmente colocadas antes de ser possível o
    preseed até depois da rede estar configurada. Para detalhes acerca de como
    utilizar isto para automatizar instalações veja Secção B.2.3, "Modo Auto".

finish-install/keep-consoles

    Durante as instalações a partir da consola série ou de gestão, os consolas
    virtuais normais (VT1 a VT6) normalmente estão desativadas em /etc/inittab.
    Defina para true para prevenir isto.

cdrom-detect/eject

    Por predefinição, antes de reiniciar, o debian-installer ejeta
    automaticamente o meio óptico utilizado durante a instalação. Isto poderá
    ser desnecessário se o sistema não iniciar automaticamente a partir de esse
    meio. Em alguns casos poderá até ser indesejável, por exemplo se o leitor
    óptico não conseguir reinserir novamente o media sozinho e o utilizador não
    estiver lá para o fazer manualmente. Muitos leitores de carregamento com
    slots, slim-line, e de caddy não conseguem recarregar o meio
    automaticamente.

    Coloque false para desativar a ejeção automática, e fique atento pois pode
    necessitar de assegurar que o sistema não inicia automaticamente a partir
    da drive óptica após a instalação inicial.

base-installer/install-recommends (recommends)

    Ao definir esta opção como false, o sistema de gestão de pacotes irá ser
    configurado para não instalar automaticamente os pacotes definidos como "
    Recommends", quer durante a instalação quer para o sistema instalado. Veja
    também a Secção 6.3.5, "Instalar o Sistema Base".

    Note que esta opção permite ter um sistema mais leve, mas também pode
    resultar na falta de funcionalidades que normalmente espera que estejam
    disponíveis. Terá de instalar manualmente alguns dos pacotes recomendados
    para obter todas as funcionalidades se desejar. Por isso esta opção apenas
    deve ser utilizada apenas por utilizadores muito experientes.

debian-installer/allow_unauthenticated

    Por predefinição o instalador necessita que os repositórios sejam
    autenticados utilizando uma chave gpg conhecida. Coloque como true para
    desabilitar essa autenticação. Aviso: inseguro, e não recomendado.

rescue/enable

    Definir como true para entrar em modo de recuperação em vez de efetuar uma
    instalação normal. Veja a Secção 8.6, "Recuperar um Sistema Estragado".

5.3.3. Utilizar parâmetros de arranque para responder a questões

Com algumas exceções, pode ser definido um valor na linha de comandos de
arranque para qualquer questão colocada durante a instalação, apesar de isto
ser apenas possível em casos específicos. Podem ser encontradas instruções
gerais acerca de como fazer isto na Secção B.2.2, "Utilizar parâmetros de
arranque para fazer preseed a questões". Alguns exemplos específicos estão
listados abaixo.

debian-installer/language (language), debian-installer/country (country), 
    debian-installer/locale (locale)

    Existem duas formas de especificar a linguagem, o país e locale a utilizar
    para a instalação e para o sistema instalado.

    A primeira, e mais fácil, é passar apenas o parâmetro locale. A linguagem e
    o país serão derivados a partir do seu valor. Pode utilizar, por exemplo,
    locale=de_CH para escolher Alemão como linguagem e Suíça como país
    (de_CH.UTF-8 será definido como locale predefinido para o sistema
    instalado). A limitação é que não podem ser feitas todas as combinações de
    linguagens, países e locales.

    A segunda opção, e a mais flexível, é especificar separadamente language e
    country. Neste caso o locale pode ser acrescentado, opcionalmente, para
    especificar um locale especifico e predefinido para o sistema instalado.
    Exemplo: language=en country=DE locale=en_GB.UTF-8.

anna/choose_modules (modules)

    Pode ser utilizado para carregar automaticamente componentes do instalador
    que não são carregados por predefinição. Exemplos de componentes opcionais
    que poderão ser úteis são o openssh-client-udeb (para que possa utilizar o 
    scp durante a instalação) e o ppp-udeb (veja a Secção D.5, "Instalar Debian
    GNU/Linux utilizando PPP over Ethernet (PPPoE)").

netcfg/disable_autoconfig

    Defina como true se desejar desligar a configuração automática através de
    IPv6 e de DHCP e em vez disso forçar a configuração estática de rede.

mirror/protocol (protocol)

    Por omissão o instalador irá utilizar o protocolo http para fazer download
    aos ficheiros nos mirrors Debian e mudar isso para ftp não é possível
    durante as instalações com prioridade normal. Ao definir este parâmetro
    para ftp, pode forçar o instalador a utilizar este protocolo. Note que não
    pode escolher um mirror ftp a partir de uma lista, tem de introduzir
    manualmente o nome da máquina.

tasksel:tasksel/first (tasks)

    Pode ser utilizado para escolher tarefas que não estão disponíveis a partir
    da lista interativa de tarefas, tal como a tarefa kde-desktop. Veja a
    Secção 6.3.6.2, "Escolher e Instalar Software" para informações adicionais.

5.3.4. Passagem de argumentos a módulos do kernel

Se os drivers estiverem compilados no kernel, pode passar-lhes parâmetros
conforme é descrito na documentação do kernel. No entanto, se os drivers forem
compilados como módulos e porque os módulos de kernel são carregados de forma
um pouco diferente durante a instalação do que quando arranca um sistema já
instalado, não é possível passar parâmetros aos módulos como normalmente faria.
Em vez disso, tem de utilizar uma sintaxe especial reconhecida pelo instalador
que se assegura que os parâmetros são guardados nos devidos ficheiros de
configuração e isso serão utilizados quando os módulos forem carregados. Os
parâmetros também se irão propagar automaticamente na configuração para o
sistema instalado.

Note que agora é extremamente raro ser necessário passar parâmetros a módulos.
Na maioria dos casos o kernel conseguirá detetar o hardware presente num
sistema e definir dessa forma bons valores por predefinição. No entanto, em
algumas situações poderá ser necessário definir manualmente os parâmetros.

A sintaxe a utilizar para definir parâmetros para o módulo é:

nome_módulo.parameter_name=valor

Se necessitar passar vários parâmetros ao mesmo ou a diferentes módulos, basta
repetir isto. Por exemplo, para fazer com que uma velha placa de rede 3Com
utilize o conetor BNC (coaxial) e o IRQ 10, você deve passar:

3c509.xcvr=3 3c509.irq=10

5.3.5. Colocar módulos do kernel na lista negra

Por vezes pode ser necessário colocar um módulo na lista negra para prevenir
que este seja carregado automaticamente pelo kernel e pelo udev. Uma razão pode
ser que um módulo em particular cause problemas com o seu hardware. O kernel
por vezes, também, lista dois controladores diferentes para o mesmo
dispositivo. Isto pode fazer com que o dispositivo não funcione corretamente se
os controladores estiverem em conflito ou se o controlador errado for carregado
primeiro.

Pode colocar um módulo na lista negra utilizando a seguinte sintaxe:
nome_do_módulo.blacklist=yes. Isto fará com que o módulo seja colocado na lista
negra em /etc/modprobe.d/blacklist.local quer para a instalação, quer para o
sistema instalado.

Note que um módulo pode ser carregado à mesma pelo próprio sistema de
instalação. Pode prevenir que isto aconteça ao correr o instalador em modo
Expert e desseleccionar o módulo a partir da lista de módulos mostrada durante
as fases de deteção de hardware.

5.4. Diagnosticar Problemas no Processo de Instalação

5.4.1. Fiabilidade de meios ópticos

Por vezes, e especialmente com leitores mais antigos, o instalador pode falhar
o arranque a partir do disco óptico. O instalador pode também -- mesmo após ter
arrancado com sucesso a partir de tal disco -- falhar o reconhecimento do disco
ou durante a instalação retornar erros ao ler a partir deste.

Existem muitas causas possíveis diferentes para estes problemas. Podemos apenas
listar alguns dos problemas usuais e disponibilizar sugestões gerais acerca de
como lidar com eles. O resto é consigo.

Existem duas coisas muito simples que deve tentar primeiro.

  • Se o disco não arrancar, verifique se foi inserido corretamente e se não
    está sujo.

  • Se o instalador falhar o reconhecimento do disco, tente apenas correr a
    opção Detetar e montar o meio de instalação uma segunda vez. É conhecido
    que alguns problemas relacionados com DMA em leitores de CD-ROM muito
    antigos se resolvem desta forma.

Se isto não funcionar, então tente as sugestões nas subseções abaixo. A
maioria, mas não todas, das sugestões discutidas são válidas quer para CD-ROM
quer para DVD.

Se não puder pôr a instalação a funcionar a partir do disco óptico, tente um
dos outros métodos de instalação que estão disponíveis.

5.4.1.1. Problemas usuais

  • Alguns leitores de CD-ROM antigos não suportam a leitura a partir de discos
    que foram gravados a altas velocidades com um gravador de CDs moderno.

  • Alguns leitores de CD-ROM muito antigos não trabalham corretamente se o "
    acesso direto à memória" (DMA) estiver ativo para eles.

5.4.1.2. Como investigar e talvez resolver problemas

Se o disco óptico falhar o arranque, tente as sugestões listadas abaixo.

  • Verifique se a sua BIOS/UEFI na realidade suporta arrancar a partir de
    discos ópticos (apenas problemático para sistemas muito antigos) e que o
    arranque a partir desse meio está ativado na BIOS/UEFI.

  • Se fez o download de uma imagem iso, verifique se o md5sum dessa imagem
    coincide com o que está listado para a imagem no ficheiro MD5SUMS que
    deverá estar presente no mesmo local de a partir de onde obteve a imagem.

    $ md5sum debian-testing-i386-netinst.iso
    a20391b12f7ff22ef705cee4059c6b92  debian-testing-i386-netinst.iso

    De seguida, verifique se o md5sum do disco gravado também coincide. O
    seguinte comando deverá funcionar. Utiliza o tamanho da imagem para ler o
    número de bytes correto a partir do disco.

    $ dd if=/dev/cdrom | \
    > head -c `stat --format=%s debian-testing-i386-netinst.iso` | \
    > md5sum
    a20391b12f7ff22ef705cee4059c6b92  -
    262668+0 records in
    262668+0 records out
    134486016 bytes (134 MB) copied, 97.474 seconds, 1.4 MB/s

Se, após o instalador ter arrancado com sucesso, o disco não for detetado,
simplesmente tentar novamente poderá resolver o problema. Se tiver mais de um
leitor óptico, tente mudar o disco para o outro leitor. Se isso não funcionar
ou se o disco for reconhecido mas existirem erros quando ler a partir dele,
tente as sugestões listadas abaixo. Para isto serão necessários alguns
conhecimentos básicos de Linux. Para executar quaisquer dos comandos, deve
primeiro mudar para a segunda consola virtual (VT2) e ativar lá a shell.

  • Mude para o VT4 ou veja o conteúdo de /var/log/syslog (utilize o nano como
    editor) para ver alguma mensagem de erro específica. Depois disso, veja a
    saída de dmesg.

  • Verifique na saída de dmesg se o seu leitor óptico foi reconhecido. Deverá
    ver algo como (estas linhas não têm necessariamente de ser consecutivas):

    ata1.00: ATAPI: MATSHITADVD-RAM UJ-822S, 1.61, max UDMA/33
    ata1.00: configured for UDMA/33
    scsi 0:0:0:0: CD-ROM            MATSHITA DVD-RAM UJ-822S  1.61 PQ: 0 ANSI: 5
    sr0: scsi3-mmc drive: 24x/24x writer dvd-ram cd/rw xa/form2 cdda tray
    cdrom: Uniform CD-ROM driver Revision: 3.20

    Se não vir algo como isso, existe a possibilidade do controlador a que o
    seu leitor está ligado não tenha sido reconhecido ou não seja suportado. Se
    souber qual o controlador que é necessário para este leitor, deve tentar
    carregá-lo manualmente utilizando o modprobe.

  • Verifique se existe um nó de dispositivo para o seu leitor óptico em /dev/.
    No exemplo acima, isto será /dev/sr0. Deverá também existir um /dev/cdrom.

  • Utilize o comando mount para verificar se o disco óptico já está montado;
    caso não esteja, tente montá-lo manualmente:

    $ mount /dev/hdc /cdrom

    Verifique se existe alguma mensagem de erro após este comando.

  • Verifique se o DMA está atualmente ativo:

    $ cd /proc/ide/hdc
    $ grep using_dma settings
    using_dma      1       0       1       rw

    Um "1" na primeira coluna após using_dma significa que está ativado. Se
    estiver, tente desabilitá-lo:

    $ echo -n "using_dma:0" >settings

    Assegure-se que está no diretório para o dispositivo que corresponde ao seu
    leitor óptico.

  • Se existirem quaisquer problemas durante a instalação, tente verificar a
    integridade do meio de instalação usando a opção perto do fundo no menu
    principal do instalador. Esta opção também pode ser utilizada como um teste
    para verificar se o disco pode ser lido com fiabilidade.

5.4.2. Configuração de arranque

Se tiver problemas e o kernel bloquear durante o processo de arranque, não
reconhecer periféricos que tenha, ou os drivers não forem devidamente
reconhecidos, a primeira coisa a verificar são os parâmetros de arranque, como
discutido na Secção 5.3, "Parâmetros de Arranque".

Em alguns casos, alguns problemas podem ser causados por falta de firmware de
dispositivo (veja a Secção 2.2, "Dispositivos que Necessitam de Firmware" e a
Secção 6.4, "Carregar Firmware em Falta").

5.4.3. Software para Sintetizar Voz

Se o software de síntese de voz não funcionar, existe provavelmente um problema
com a sua placa de som, normalmente devido ao controlador não estar incluído no
instalador, ou porque tem nomes invulgares nos nomes de níveis de mistura que
são definidos como sem som por predefinição. Deve submeter um relatório de bug
que inclua a saída dos seguintes comandos, corra na mesma máquina mas onde seja
conhecido que o sistema Linux tenha o som a funcionar (e.g., um live CD).

  • dmesg

  • lspci

  • lsmod

  • amixer

5.4.4. Problemas comuns de Instalação em 64-bit PC

Existem alguns problemas de instalação usuais que podem ser resolvidos ou
evitados ao passar alguns parâmetros de arranque ao instalador.

Se o seu ecrã começar a mostrar uma imagem estranha enquanto o seu kernel
arranca, e.g. toda branca, toda preta, ou imagem de pixels coloridos, o seu
sistema poderá ter uma placa gráfica problemática que não muda corretamente
para o modo framebuffer. Neste caso, pode utilizar o parâmetro de arranque fb=
false, para desabilitar a consola framebuffer. Durante a instalação apenas
estará disponível um conjunto limitado de linguagens devido às caraterísticas
limitadas da consola. Para mais detalhes, veja a Secção 5.3, "Parâmetros de
Arranque" .

5.4.4.1. Bloqueio do Sistema Durante a Fase de Configuração de PCMCIA

Alguns modelos de portáteis muito antigos produzidos pela Dell, são conhecidos
por bloquearem quando a deteção de dispositivo PCMCIA tenta aceder a alguns
endereços de hardware. Outros portáteis poderão mostrar problemas idênticos. Se
experimentou tal problema e não necessita do suporte PCMCIA durante a
instalação, poderá desativar PCMCIA utilizando o parâmetro de arranque
hw-detect/start_pcmcia=false. Pode depois configurar a PCMCIA após a instalação
estar concluída e excluir a gama de recursos que causa o conflito.

Em alternativa, poderá iniciar o instalador em modo expert. Ser-lhe-á pedido
para introduzir o intervalo de recursos que o seu hardware necessita. Por
exemplo, se tem um dos portáteis Dell mencionados acima deverá introduzir
exclude port 0x800-0x8ff. Há uma lista com os intervalos mais comuns no System
resource settings section of the PCMCIA HOWTO. Note que tem de omitir as
virgulas, se alguma, quando introduz estes valores no instalador.

5.4.5. Interpretar as Mensagens de Arranque do Kernel

Durante a sequência de arranque, poderá ver muitas mensagens sob a forma can't
find alguma coisa , ou alguma coisa not present, can't initialize alguma coisa,
ou até this driver release depends on alguma coisa. A maioria destas mensagens
são inofensivas. Visualiza-as porque o kernel para o sistema de instalação é
feito para correr em computadores com muitos dispositivos periféricos
diferentes. Obviamente, nenhum computador terá todos os dispositivos
periféricos possíveis, então o sistema operativo poderá emitir algumas queixas
enquanto procura por periféricos que não possui. Poderá também verificar uma
pausa no sistema por algum tempo. Isto acontece quando aguarda pela resposta de
um dispositivo, e o mesmo não está presente no seu sistema. Se achar que o
tempo que demora a arrancar o sistema é inaceitavelmente longo, poderá depois
criar um kernel personalizado (veja a Secção 8.5, "Compilando um Novo Kernel").

5.4.6. Relatar Problemas de Instalação

Se avançar através da fase inicial de arranque mas não conseguir completar a
instalação, poderá ser útil a opção Guardar logs de debug no menu. Permite-lhe
guardar os registos de erros do sistema e informação de configuração do
instalador para um meio de armazenamento, ou fazer o download destes utilizando
um navegador da web. Esta informação poderá fornecer pistas acerca do que
correu mal e de como o corrigir. Se estiver a submeter um relato de bug, poderá
querer adicionar esta informação ao relato de bug.

Outras mensagens pertinentes de instalação podem ser encontradas em /var/log/
durante a instalação, e /var/log/installer/ após o computador ter iniciado para
o sistema instalado.

5.4.7. Submeter Relatórios de Instalação

Se ainda tiver problemas, por favor submeta um relatório de instalação. Nós
também encorajamos que sejam enviados relatórios de instalação mesmo que a
instalação tenha sucesso, para que possamos obter tanta informação quanto
possível no maior número de configurações de hardware.

Note que o seu relatório de instalação será publicado no Debian Bug Tracking
System (BTS) e encaminhado para uma mailing list pública. Assegure-se que
utiliza um endereço de e-mail que não se importa que seja tornado público.

Se tem um sistema Debian funcional, a forma mais fácil de enviar um relatório
de instalação é instalar os pacotes installation-report e reportbug (apt
install installation-report reportbug), configure o reportbug como é explicado
na Secção 8.4.2, "Enviar E-Mails Para Fora do Sistema", e corra o comando 
reportbug installation-reports.

Em alternativa pode utilizar este modelo quando preencher relatórios de
instalação, e arquivar o relatório como relato de bug contra o pseudo-pacote
installation-reports, enviando-o para <submit@bugs.debian.org>.

Package: installation-reports

Método de arranque: <Como arrancou o instalador? CD/DVD? Pen USB? Rede?>
Versão da imagem: <o melhor é o URL completo para a imagem que obteve>
Data: < Data e hora da instalação>

Máquina: <Descrição da máquina (p.e. IBM Thinkpad R32)>
Processador:
Memória:
Partições: <df -Tl irá servir; é preferida a tabela de partições em bruto>

Saída de lspci -knn (ou lspci -nn):

Checklist da Instalação do Sistema Base:
[O] = OK, [E] = Erro (por favor descreva abaixo), [ ] = não foi tentado

Arranque inicial:                  [ ]
Detetar placa de rede:            [ ]
Configurar rede:                   [ ]
Detetar meio de instalação:       [ ]
Carregar módulos do instalador:    [ ]
Detetar discos rígidos:           [ ]
Particionar discos rígidos:        [ ]
Instalar o sistema base:           [ ]
Configurar relógio/fuso horário:   [ ]
Configurar utilizador/password:    [ ]
Instalar tarefas:                  [ ]
Instalar gestor de arranque:       [ ]
Total da instalação:               [ ]

Comentários/Problemas:

<Descrição da instalação, em prosa, e quaisquer pensamentos, comentários
      e ideias que tenha tido durante a instalação inicial.>

No relato de bug, descreva qual é o problema, incluindo as últimas mensagens
visíveis do kernel no caso do kernel bloquear. Descreva os passos que tomou que
levaram o sistema ao estado do problema.


━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

^[4] A imagem mini ISO pode ser obtida a partir de um mirror Debian conforme
descrito na Secção 4.2, "Download dos Ficheiros a partir dos Mirrors Debian".
Procure por netboot/gtk/mini.iso.

^[5] Com os kernel atuais (2.6.9 ou posteriores) pode utilizar até 32 opções de
linha de comandos e 32 opções de ambiente. Se este números forem excedidos
ocorrerá um kernel panic (colapso). Existe também um limite de 255 caracteres
para toda a linha de comandos do kernel, acima deste limite será tudo truncado.

Capítulo 6. Utilizar o Instalador Debian

Índice

6.1. Como Funciona o Instalador

    6.1.1. Utilizar o instalador gráfico

6.2. Introdução de Componentes
6.3. Utilizar Componentes Individuais

    6.3.1. Preparar o Instalador Debian e a Configuração de Hardware
    6.3.2. Definir Utilizadores E Palavras-Passe
    6.3.3. Configurar o Relógio e o Fuso Horário
    6.3.4. Particionar e Escolher os Pontos de Montagem
    6.3.5. Instalar o Sistema Base
    6.3.6. Instalar Software Adicional
    6.3.7. Tornar o Sistema Iniciável
    6.3.8. Terminar a Instalação
    6.3.9. Resolução de problemas
    6.3.10. Instalação através de network-console

6.4. Carregar Firmware em Falta

    6.4.1. Preparar um meio
    6.4.2. Firmware e o Sistema Instalado
    6.4.3. Completar o Sistema Instalado

6.5. Personalização

    6.5.1. Instalar um sistema init alternativo

6.1. Como Funciona o Instalador

Para esta arquitetura o debian-installer suporta dois interfaces diferentes
para com o utilizador: um gráfico e um baseado em texto. Por predefinição é
utilizado o interface gráfico a menos que escolha uma opção "Install" no menu
do arranque. Para mais informações acerca do instalador gráfico, por favor veja
Secção 5.1.8, "O Instalador Gráfico".

O Instalador Debian consiste num número de componentes com um propósito
específico para executar cada tarefa da instalação. Cada componente executa a
sua tarefa, perguntando ao utilizador as questões necessárias para fazer a sua
tarefa. Às próprias questões são dadas prioridades, e a prioridade das questões
a serem colocadas é definida quando é iniciado o instalador.

Quando é feita uma instalação com predefinições, apenas serão colocadas as
questões essenciais (de alta prioridade). Isto resulta num processo de
instalação altamente automatizado, com pouca interação por parte do utilizador.
Os componentes são executados sequencialmente e de uma forma automática; quais
os componentes que são executados depende principalmente do método da
instalação utilizado e do seu hardware. O instalador utilizará valores
predefinidos para as questões que não são colocadas.

Se existir um problema, o utilizador irá visualizar um ecrã de erro, e o menu
do instalador poderá aparecer com o intuito de ser selecionada uma ação
alternativa. Se não existir qualquer problema, o utilizador nunca irá
visualizar o menu do instalador, apenas irá responder a simples questões para
cada mudança de componente. Notificações de erros sérios são ajustadas para
prioridade "crítica" que faz com que o utilizador seja sempre notificado.

Algumas das predefinições utilizadas pelo instalador poderão ser influenciadas
ao passar argumentos de arranque quando o debian-installer estiver a iniciar.
Se, por exemplo, desejar forçar a configuração de rede estática (DHCP e
auto-configuração IPv6 serão utilizados por predefinição se estiverem
disponíveis), pode adicionar o parâmetro de arranque netcfg/disable_autoconfig=
true. Veja na Secção 5.3.2, "Parâmetros de instalação Debian" as opções
disponíveis.

Os utilizadores experientes poderão sentir-se mais confortáveis com uma
interface conduzida pelo menu, onde cada passo é controlado pelo utilizador em
vez do instalador executar automaticamente e sequencialmente cada passo. Para
utilizar o instalador conduzido pelo menu, de forma manual, adicione o
argumento de arranque priority=medium.

Se o seu hardware necessitar que lhe passe opções aos módulos do kernel à
medida que são instalados, irá necessitar de iniciar o instalador no modo "
expert". Isto pode ser feito quer utilizando o comando expert para iniciar o
instalador ou adicionando o argumento de arranque priority=low. O modo expert
dá-lhe total controlo sobre o debian-installer.

No ambiente baseado em texto não é suportada a utilização do rato. Aqui estão
as teclas que pode utilizar para navegar nos vários diálogos. A tecla Tab ou a
tecla seta para a direita movem para a "frente", e a tecla Shift+Tab ou a seta
para a esquerda movem-se para "trás" através dos botões e seleções mostrados.
As setas para cima e para baixo selecionam diferentes itens dentro de uma lista
com scroll, e permitem também movimentar a própria lista. Além disso, em listas
longas pode ainda digitar um caractere para que a lista se movimente
diretamente para a seção de itens que comecem com a letra digitada e ainda usar
as teclas Pg-Up e Pg-Down para movimentar a lista entre seções. A tecla barra
de espaços seleciona um item como por exemplo uma checkbox. Utilize a tecla 
Enter para ativar as escolhas.

Algumas caixas de diálogo podem oferecer informação adicional de ajuda. Se a
ajuda estiver disponível isto será indicado na linha inferior do ecrã ao
mostrar que a ajuda pode ser acedida ao pressionar a tecla F1.

As mensagens de erro e logs são reencaminhados para a quarta consola. Pode
aceder a esta consola premindo as teclas Alt esquerdo+F4 (pressionando a tecla 
Alt da esquerda enquanto prime a tecla de função F4); volte ao processo
principal do instalador com Alt esquerdo+F1.

Estas mensagens também podem ser encontradas em /var/log/syslog. Após a
instalação, este log é copiado para /var/log/installer/syslog no seu sistema.
Outras mensagens de instalação podem ser encontradas, durante o processo de
instalação em /var/log/, e /var/log/installer/ após o seu computador iniciar no
seu sistema instalado.

6.1.1. Utilizar o instalador gráfico

O instalador gráfico basicamente funciona da mesma forma que o instalador
baseado em texto e por isso o manual pode ser utilizado para guiá-lo através do
processo de instalação.

Se preferir utilizar o teclado em vez do rato, há duas coisas que tem de saber.
Para expandir uma lista (usadas por exemplo na seleção de país dentro do
continente) pode utilizar as teclas + e -. Para questões onde pode ser
escolhido mais do que um item (e.g. seleção de tarefas), primeiro tem que
utilizar o tab até ao botão Continue após marcar as suas escolhas; carregar em
enter irá comutar a escolha, não ativar Continue.

Se uma caixa de diálogo oferecer informação adicional de ajuda, será mostrado
um botão Ajuda. A ajuda pode ser acedida ao ativar o botão ou ao pressionar a
tecla F1.

Para mudar para outra consola, também terá que utilizar a tecla Ctrl, tal como
no X Window System. Por exemplo para mudar para VT2 (a primeira shell de
depuração) pode utilizar Ctrl+Left Alt+F2. O instalador gráfico corre no VT5,
por isso pode utilizar Left Alt+F5 para regressar.

6.2. Introdução de Componentes

Aqui está uma lista de componentes do instalador com uma breve descrição do
propósito de cada componente. Se necessitar saber detalhes sobre como usar um
componente em particular veja a Secção 6.3, "Utilizar Componentes Individuais".

main-menu

    Mostra ao utilizador durante o processo de instalação a lista de
    componentes, e inicia um componente quando selecionado. Questões do
    Main-menu são ajustadas para prioridade média, se a sua prioridade estiver
    ajustada para alta ou crítica (por omissão é alta), não irá visualizar o
    menu. Por outro lado, se existir um erro que requer a sua intervenção, a
    prioridade da questão pode temporariamente baixar para permitir que resolva
    o problema, e nesse caso o menu pode aparecer.

    Você pode chegar ao menu principal escolhendo repetidamente o botão Go Back
    para retroceder todo o caminho desde o componente que atualmente se
    encontrar a correr.

localechooser

    Permite ao utilizador selecionar as opções de localização para a instalação
    e para o sistema instalado: linguagem, país e definições locais. O
    instalador irá mostrar mensagens na linguagem escolhida a menos que a
    tradução para essa linguagem não esteja completa, nesse caso algumas
    mensagens podem ser mostradas em Inglês.

console-setup

    Mostra uma lista de teclados (layouts), a partir da qual o utilizador
    escolhe o que coincide com o seu modelo.

hw-detect

    Deteta automaticamente a maioria do hardware do sistema, incluindo placas
    de rede, discos, e PCMCIA.

cdrom-detect

    Procura e monta um meio de instalação de Debian.

netcfg

    Configura as ligações de rede do computador de modo a que possa comunicar
    através da internet.

iso-scan

    Procura por imagens ISO (ficheiros .iso) no disco rígido.

choose-mirror

    Mostra uma lista de mirrors de ficheiros Debian. O utilizador pode escolher
    a fonte dos seus pacotes de instalação.

cdrom-checker

    Verifica a integridade do meio de instalação. Deste modo, o utilizador pode
    assegurar-se que a imagem de instalação não está corrompida.

lowmem

    Lowmem tenta detetar sistemas com pouca memória e faz vários truques para
    remover partes não necessárias do debian-installer da memória (com o custo
    de algumas funcionalidades).

anna

    Anna's Not Nearly APT. Instala pacotes que foram obtidos a partir do mirror
    escolhido ou do meio de instalação.

user-setup

    Define a palavra-passe de root, e adiciona um utilizador que não é root.

clock-setup

    Atualiza o relógio do sistema e determina se o relógio está definido para
    UTC ou não.

tzsetup

    Escolhe o fuso horário, baseado na localização escolhida anteriormente.

partman

    Permite ao utilizador particionar discos ligados ao sistema, criar sistemas
    de ficheiros nas partições selecionadas, e ligá-las aos pontos de montagem.
    Estão incluídas alguma funcionalidades interessantes tais como um modo
    totalmente automático ou suporte para LVM. Esta é a ferramenta de
    particionamento preferida em Debian.

partitioner

    Permite ao utilizador particionar discos ligados ao sistema. É escolhido um
    programa apropriado de acordo com a arquitetura do seu computador.

partconf

    Mostra uma lista de partições, e cria sistemas de ficheiros nas partições
    selecionadas de acordo com as instruções do utilizador.

partman-lvm

    Auxilia o utilizador com a configuração de LVM (Logical Volume Manager).

partman-md

    Permite ao utilizador configurar RAID por Software (Redundant Array of
    Inexpensive Disks). Este RAID por Software geralmente é superior aos
    controladores RAID de IDE baratos (pseudo hardware) que se encontram em
    motherboards recentes.

base-installer

    Instala o conjunto de pacotes mais básicos que permitem ao computador
    operar sob Debian GNU/Linux quando for reiniciado.

apt-setup

    Configura o apt, na generalidade automaticamente, baseado no suporte de
    onde o instalador corre.

pkgsel

    Utiliza o tasksel para escolher e instalar software adicional.

os-prober

    Deteta sistemas operativos atualmente instalados no computador e passa esta
    informação ao bootloader-installer, que pode oferecer-lhe a capacidade de
    adicionar os sistemas operativos detetados ao menu de arranque do gestor de
    arranque. Desta forma o utilizador durante o arranque pode facilmente
    escolher qual o sistema operativo que quer arrancar.

bootloader-installer

    Cada um dos vários instaladores de gestores de arranque instala um programa
    que inicia o arranque a partir do disco rígido, que é necessário para o
    computador iniciar com Linux sem utilizar uma pen USB ou CD-ROM. Muitos
    gestores de arranque permitem ao utilizador, cada vez que o computador
    inicia, escolher um sistema operativo alternativo.

shell

    Permite ao utilizador executar uma shell a partir do menu, ou na segunda
    consola.

save-logs

    Disponibiliza uma forma para o utilizador gravar informação numa pen usb,
    na rede, em disco rígido ou outro tipo de suporte quando for encontrado
    algum problema, de modo a posteriormente reportar de forma precisa os
    problemas de software do instalador aos Debian Developers.

6.3. Utilizar Componentes Individuais

Neste seção iremos descrever em detalhe cada componente do instalador. Os
componentes foram agrupados em etapas que devem ser reconhecidas pelos
utilizadores. Estão presentes pela ordem que aparecem durante a instalação.
Note que nem todos os módulos irão ser utilizados para todas as instalações; os
módulos que são utilizados dependem do método de instalação que você escolhe e
do seu hardware.

6.3.1. Preparar o Instalador Debian e a Configuração de Hardware

Vamos assumir que o Instalador Debian arrancou e que você está perante o seu
ecrã inicial. Nesta altura, as capacidades do debian-installer ainda são
bastante limitadas. Não sabe muito acerca do seu hardware, linguagem preferida,
ou que tarefa deve executar. Não se preocupe. O debian-installer é bastante
inteligente, pode automaticamente identificar o seu hardware, localizar o resto
dos seus componentes e atualizar-se a ele próprio para uma instalação de
sistema capaz. Contudo, tem de ajudar o debian-installer com alguma informação
que ele não consegue determinar automaticamente (como selecionar o sua
linguagem preferido, configuração do teclado ou qual o mirror de rede
desejado).

rá notar que o debian-installer executa a deteção de hardware várias vezes
durante esta etapa. A primeira vez dirige-se especificamente ao hardware
necessário para carregar componentes do instalador (e.g. o seu CD-ROM ou placa
de rede). Como não estão disponíveis todos os drivers durante esta primeira
execução, a deteção de hardware necessita de ser repetida posteriormente no
processo.

Durante a deteção de hardware, o debian-installer verifica se para algum dos
controladores para os seus dispositivos de hardware no seu sistema necessita
que seja carregado firmware. Se for necessário algum firmware mas estiver
indisponível, será mostrada uma caixa de diálogo que permitirá que seja
carregado a partir de um meio amovível. Para mais detalhes veja a Secção 6.4,
"Carregar Firmware em Falta".

6.3.1.1. Verificar a memória disponível / modo de baixa memória

Uma das primeiras coisas que o debian-installer faz, é verificar a memória
disponível. Se a memória disponível for limitada, este componente fará algumas
alterações no processo de instalação que lhe irão permitir instalar o Debian
GNU/Linux no seu sistema.

A primeira medida tomada, pelo instalador, para reduzir o consumo de memória é
desabilitar as traduções, o que significa que a instalação pode apenas ser
feita em Inglês. Claro, que após a instalação estar terminada pode na mesma
fazer a localização (definições regionais) do sistema.

Se isso não for o suficiente, o instalador irá reduzir ainda mais o consumo de
memória carregando apenas os componentes essenciais para completar uma
instalação básica. Isto reduz as funcionalidades do sistema de instalação.
Ser-lhe-á dada a oportunidade de carregar manualmente componentes adicionais,
mas deve ter em atenção que cada componente que escolher irá utilizar memória
adicional e assim poderá fazer falhar a instalação.

Se o instalador correr em modo de baixa memória, é recomendado criar uma
partição de swap relativamente grande (64-128MB). A partição de swap será
utilizada como memória virtual e assim aumentar a quantidade de memória
disponível para o seu sistema. O instalador irá ativar a partição de swap o
mais cedo possível durante o processo de instalação. Note que uma forte
utilização da swap irá reduzir a performance do seu sistema e pode levar a uma
grande atividade do disco.

Apesar destas medidas, é ainda possível que o sistema bloqueie, que ocorram
erros inesperados e que processos sejam mortos pelo kernel devido ao sistema
esgotar a memória (o que irá resultar em mensagens "Out of memory" no VT4 e no
syslog).

Por exemplo, foi relatado que criar um sistema de ficheiros ext3 grande falha
em modo de baixa memória quando não há espaço de swap suficiente. Se uma swap
maior não ajudar, em vez disso tente criar o sistema de ficheiros como ext2
(que é um componente essencial do instalador). É possível mudar uma partição em
ext2 para ext3 após a instalação.

É possível forçar o instalador para utilizar um nível superior de baixa memória
do que é baseado na memória disponível utilizando o parâmetro de arranque "
lowmem" conforme é descrito em Secção 5.3.2, "Parâmetros de instalação Debian".

6.3.1.2. Escolher as Opções de Localização

Na maioria dos casos as primeiras questões que lhe serão colocadas dizem
respeito à seleção das opções de localização a serem utilizadas tanto na
instalação como para o sistema instalado. As opções de localização consistem na
linguagem, localização e locales.

A linguagem que escolher será utilizado para o resto do processo de instalação,
na medida em que exista tradução nos diferentes diálogos disponíveis. Se não
estiver disponível nenhuma tradução válida para a linguagem selecionada, o
instalador utilizará por omissão o Inglês.

A zona geográfica escolhida (na maioria dos casos um país) será utilizada mais
tarde no processo de instalação para escolher o fuso horário correto e um
'mirror' Debian apropriado para esse país. A linguagem e o país em conjunto
irão ajudar a determinar o locale predefinido para o seu sistema e escolher a
disposição correta do teclado.

Ser-lhe-á pedido no início para selecionar a sua linguagem preferida. A lista
de linguagens encontra-se em Inglês (no lado esquerdo) e na sua própria língua
(no lado direito); os nomes do lado direito mostram também o respetivo script
para a sua linguagem. A lista está disposta pelos nomes em Inglês. No topo da
lista existe uma opção extra que lhe permite selecionar as definições locais "C
" em vez da linguagem. Ao escolher a definição local "C" a sua instalação
prosseguirá em Inglês, o sistema não terá suporte de definição local, já que
não será instalado o pacote locales.

De seguida ser-lhe-á pedido para escolher uma zona geográfica. Se escolheu uma
linguagem que é reconhecida como uma linguagem oficial para mais do que um país
^[6], ser-lhe-á mostrada uma lista com apenas esses países. Para escolher um
país que não esteja nessa lista, escolha outro (a última opção). Ser-lhe-á
então apresentada uma lista de continentes; ao escolher um continente irá levar
a uma lista dos países relevantes nesse continente.

Se a linguagem tiver apenas um país associado, será mostrada uma lista de
países do continente ou região a que o país pertence, com esse país escolhido
por omissão. Utilize a opção Voltar Atrás para escolher países num continente
diferente.

Nota

É importante escolher o país onde vive ou onde está localizado já que determina
o fuso horário que será configurado para o sistema instalado.

Se escolheu uma combinação de linguagem e país para o qual não existe nenhum
locale definido e existirem vários locales para a linguagem, então o instalador
deixa-lo-à escolher qual desses locales prefere como locale predefinido para o
sistema instalado^[7]. Em todos os outros casos será escolhido um locale
predefinido baseado na linguagem e país escolhidos.

Qualquer locale predefinido escolhido conforme descrito no parágrafo anterior
irá utilizar UTF-8 como codificação de caracteres.

Se está a instalar com prioridade baixa, irá ter a opção de escolher locales
adicionais, incluindo os chamados "legacy" locales ^[8], para serem gerados
para o sistema instalado; se o fizer, ser-lhe-á perguntado quais dos locales
selecionados deve ser o predefinido para o sistema instalado.

6.3.1.3. Escolher um teclado

Os teclados são normalmente construídos de acordo com os caracteres utilizados
na sua linguagem. Escolha um layout de acordo com o teclado que está a
utilizar, ou se o seu teclado não estiver representado escolha um próximo.
Quando a instalação do sistema terminar, você poderá escolher um layout de
teclado a partir de uma gama maior de escolhas (como root execute 
dpkg-reconfigure keyboard-configuration após ter completado a instalação).

Mova a seleção para a escolha do teclado que deseja e carregue em Enter.
Utilize as teclas com setas para mover a seleção -- estão no mesmo lugar em
todas as configurações de teclado para linguagens nacionais, por isso são
independentes da configuração do teclado.

6.3.1.4. Procurar a Imagem ISO do Instalador de Debian

Quando se instala através do método hd-media, existirá um momento em que você
tem de encontrar e montar uma imagem iso do Instalador Debian de modo a obter o
resto dos ficheiros de instalação. O componente iso-scan faz exatamente isto.

Inicialmente, o iso-scan monta automaticamente todos os dispositivos de blocos
(p. ex. partições e volumes lógicos) que tenham neles algum sistema de
ficheiros conhecido e procura sequencialmente por nomes de ficheiros que
terminem em .iso (ou .ISO para esse efeito). Tenha em atenção que a primeira
tentativa procura apenas ficheiros no diretório raiz e no primeiro nível dos
sub-diretórios (i.e. encontra /qualquercoisa.iso, /data/qualquercoisa.iso, mas
não /data/tmp/qualquercoisa.iso). Após ter sido encontrada uma imagem iso, o 
iso-scan verifica o seu conteúdo para verificar se a imagem é ou não uma imagem
iso válida de Debian. No primeiro caso termina, no último caso o iso-scan
procura por outra imagem.

No caso da tentativa anterior de encontrar uma imagem iso do instalador falhar,
o iso-scan irá perguntar-lhe se você deseja executar uma procura mais
exaustiva. Esta tentativa não se limita a procurar nos diretórios de mais alto
nível, atravessando mesmo todo o sistema de ficheiros.

Se o iso-scan não descobrir a sua imagem iso do instalador, reinicie para o seu
sistema operativo inicial e verifique se a imagem tem o nome correto (que
termina em .iso), se está colocada num sistema de ficheiros reconhecido pelo
debian-installer, e se não está corrompida (verifique o checksum). Utilizadores
experientes de Unix podem fazer isto na segunda consola, sem reiniciar.

Note que a partição (ou disco) que aloja a imagem ISO não pode ser reutilizada
durante o processo de instalação, já que estará em uso pelo instalador. Para
contornar isto, e desde que tenha memória suficiente no sistema, o instalador
pode copiar a imagem ISO para a RAM antes de a montar. Isto é controlado pela
questão debconf de prioridade baixa iso-scan/copy_iso_to_ram (apenas é colocada
se o requisito de memória for alcançado).

6.3.1.5. Configurar a Rede

Ao chegar a esta etapa, se o sistema detetar que possui mais do que um
dispositivo de rede, ser-lhe-á pedido que indique qual o dispositivo para
servir de interface de rede primário, isto é, o que será utilizado para a
instalação. As outras interfaces de rede não serão configuradas nesta altura.
Poderá configurar interfaces adicionais depois de completar a instalação, veja
a página man interfaces(5).

6.3.1.5.1. Configuração automática de rede

Por predefinição, o debian-installer tenta configurar a rede do seu computador
tanto automaticamente quanto possível. Se a configuração automática falhar,
poderá ser causado por vários fatores, desde um cabo de rede desligado, até à
falta de infraestrutura para a configuração automática. Para mais explicações
no caso de haver erros, confira as mensagens de erro na quarta consola. Em
qualquer caso, ser-lhe-á perguntado se quer tentar novamente, ou se quer
efetuar uma configuração manual. Por vezes os serviços utilizados na
configuração automática podem ser lentos nas suas respostas, por isso se pensa
que está tudo em ordem simplesmente tente novamente a configuração automática.
Se a configuração automática falhar repetidamente, pode em vez disso escolher a
configuração manual de rede.

6.3.1.5.2. Configuração manual de rede

A configuração manual da rede coloca-lhe várias questões acerca da sua rede, de
salientar o endereço IP, a Máscara de rede, a Gateway, os Endereços de
servidores de nomes, e um Nome de máquina. Além disso, se possuir um interface
de rede sem fios, ser-lhe-á pedido que indique o seu Wireless ESSID ("nome de
rede sem fios") e uma chave WEP ou frase-passe WPA/WPA2. Preencha as respostas
a partir da Secção 3.3, "Informação Que Vai Necessitar".

Nota

Existem alguns detalhes técnicos que você pode, ou não, achar úteis: o programa
assume que o endereço IP de rede é a operação lógica AND dos bits do endereço
IP e da sua máscara de rede do seu sistema. O endereço de broadcast é a
operação lógica OR (dos bits) do IP do seu sistema com a negação (dos bits) da
máscara de rede. Irá também adivinhar a sua gateway. Se não souber responder a
estas perguntas, utilize os valores predefinidos -- se necessário, poderá
modificá-los assim que o sistema tiver sido instalado, editando o ficheiro /etc
/network/interfaces.

6.3.1.5.3. IPv4 e IPv6

Desde Debian GNU/Linux 7.0 ("Wheezy"), o debian-installer suporta IPv6 assim
como o "clássico" IPv4. São suportadas todas as combinações de IPv4 e IPv6
(apenas IPv4, apenas IPv6 e configurações combinadas).

A configuração automática para IPv4 é feita através de DHCP (Dynamic Host
Configuration Protocol). A configuração automática para IPv6 suporta a
configuração automática sem estado utilizando NDP (Neighbor Discovery Protocol,
incluindo atribuição de servidor de DNS recursivo (RDNSS)), a configuração
automática com estado através de IPv6 e a configuração automática combinada sem
/com estado (configuração de endereço através de NDP, parâmetros adicionais
através de DHCPv6).

6.3.2. Definir Utilizadores E Palavras-Passe

Mesmo antes de configurar o relógio, instalador irá permitir-lhe definir a
conta "root" e/ou uma conta para o primeiro utilizador. Podem ser criadas
outras contas de utilizador após a instalação estar concluída.

6.3.2.1. Definir a Palavra Passe de Root

A conta de root é também chamada de super-user; é um acesso ao sistema que
ultrapassa qualquer proteção de segurança no seu sistema. A conta de root deve
ser utilizada apenas para efetuar administração do sistema, e apenas por um
período que deve ser o mais curto possível.

Qualquer password que criar deve conter pelo menos 6 caracteres, e deve conter
tanto caracteres maiúsculos como minúsculos, bem como caracteres de pontuação.
Tenha especial atenção quando definir a sua password de root, uma vez que é uma
conta com muitos poderes. Evite o uso de palavras que constem em dicionários ou
que contenham alguma informação pessoal que facilmente possa ser adivinhada.

Se alguma vez alguém lhe disser que precisa da sua password de root, esteja
extremamente alerta. Normalmente não deve dar a sua password de root, a não ser
que esteja a administrar uma máquina com mais do que um administrador de
sistemas.

No caso de não especificar aqui uma palavra-passe para o utilizador "root",
esta conta será desabilitada mas será instalado posteriormente o pacote sudo
para permitir que sejam levadas a cabo tarefas administrativas no novo sistema.
Por omissão, será permitido ao primeiro utilizado criado no sistema utilizar o
comando sudo para se tornar root.

6.3.2.2. Criar um Utilizador Normal

Nesta fase o sistema perguntar-lhe-á se pretende criar uma conta para um
utilizador normal. Esta conta deverá ser a sua conta principal de acesso. Não
Deve usar a conta de root para o uso diário ou para seu o acesso pessoal.

Porque não? Bem, uma das razões para evitar usar os privilégios de root é
porque é muito fácil fazer estragos irreparáveis como root. Outra razão é
porque poderá ser levado a correr um programa Cavalo de Tróia -- que é um
programa que tira vantagens de poderes de um super-utilizador para comprometer
a segurança do seu sistema sem dar por isso. Qualquer bom livro de
administração de sistemas Unix cobrirá este tópico com mais detalhe --
considere a leitura de um se este assunto for novo para si.

Ser-lhe-á perguntado inicialmente o nome completo do utilizador. Seguidamente
ser-lhe-á perguntado por um nome para a conta de utilizador; geralmente o seu
primeiro nome ou algo similar será suficiente e será esse o valor por defeito.
Finalmente, ser-lhe-á perguntado a palavra-passe para esta conta.

Se em qualquer ponto depois da instalação pretender criar outra conta, utilize
o comando adduser.

6.3.3. Configurar o Relógio e o Fuso Horário

Primeiro o instalador irá tentar ligar-se a um servidor de horas na Internet
(utilizando o protocolo NTP) de modo a acertar corretamente o relógio. Se isto
não for possível, o instalador irá assumir que a data e a hora obtidos do
relógio do sistema, quando o sistema de instalação foi iniciado, estão
corretos. Não é possível definir acertar, manualmente, a hora durante o
processo de instalação.

Dependendo da localização escolhida anteriormente no processo de instalação,
poder-lhe-á ser mostrada uma lista de fusos horários relevantes para essa
localização. Se a sua localização tiver apenas um fuso horário e estiver a
fazer uma instalação normal, não lhe será perguntado nada e o sistema assumirá
esse fuso horário.

No modo avançado ou quando instalar em prioridade média, terá a opção adicional
de escolher "Coordinated Universal Time" (UTC) como fuso horário.

Se por alguma razão quiser definir um fuso horário para o sistema instalado que
não coincida com a localização escolhida, existem duas opções.

 1. A opção mais simples é escolher um fuso horário diferente depois da
    instalação estar terminada e ter arrancado no novo sistema. O comando para
    fazer isto é:

    # dpkg-reconfigure tzdata

 2. Em alternativa, o fuso horário pode ser definido mesmo no inicio da
    instalação ao passar o parâmetro time/zone=value no arranque do sistema de
    instalação. O valor claro que deve ser um fuso horário válido, por exemplo
    Europe/London ou UTC.

Para instalações automatizadas o fuso horário pode ser definido para qualquer
valor desejado utilizando 'preseeding'.

6.3.4. Particionar e Escolher os Pontos de Montagem

Nesta altura, após ter sido feita uma última vez a deteção do hardware, o
debian-installer deverá estar na sua máxima força, personalizado para as
necessidades do utilizador e pronto para realizar algum verdadeiro trabalho.
Como o título desta seção indica, a tarefa principal dos próximos componentes
resume-se em particionar os seus discos, criar os sistemas de ficheiros,
atribuir pontos de montagem e opcionalmente configurar opções relacionadas tais
como RAID, LVM e dispositivos encriptados.

Se não estiver à vontade com o particionamento, ou se quiser apenas obter mais
detalhes, veja o Apêndice C, Particionar para Debian.

Primeiro ser-lhe-á dada a oportunidade de criar as partições de um modo
automático no disco inteiro, ou no espaço livre do disco. Esta opção é também
chamada particionamento "guiado". Se não quiser particionar automaticamente,
escolha Manual a partir do menu.

6.3.4.1. Opções de particionamento suportadas

O particionador utilizado no debian-installer é bastante versátil. Permite
criar muitos esquemas de particionamento diferentes, utilizando várias tabelas
de particionamento, sistemas de ficheiros e dispositivos de blocos avançados.

As opções que estão disponíveis dependem principalmente da arquitetura, mas
também de outros fatores. Por exemplo, em sistemas com memória interna limitada
podem não estar disponíveis algumas opções. As predefinições também podem
variar. O tipo de tabela de partições utilizado por predefinição pode ser
diferente por exemplo para discos de alta capacidade e para discos de menor
capacidade. Algumas opções podem ser mudadas ao instalar em prioridade média ou
baixa; em prioridades altas serão escolhidas predefinições razoáveis.

O instalador suporta várias formas de particionamento avançado e utilização de
dispositivos de armazenamento, que na maioria dos casos podem ser utilizados em
conjunto.

  • Gestão de Volumes Lógicos (LVM)

  • RAID por software

    São suportados os níveis de RAID 0, 1, 4, 5, 6 e 10.

  • Encriptação

  • Serial ATA RAID (utilizando dmraid)

    Também conhecido como "falso RAID" ou "BIOS RAID". O suporte para Serial
    ATA RAID atualmente só está disponível se for ativado quando o instalador
    arranca. Está disponível mais informação no nosso Wiki.

  • Multipath (experimental)

    Para informações veja o nosso Wiki. O suporte para multipath atualmente só
    está disponível se for ativado quando o instalador arrancar.

São suportados os seguintes sistemas de ficheiros.

  • ext2, ext3, ext4

    O sistema de ficheiros predefinido escolhido na maioria dos casos é o ext4;
    para partições /boot será escolhido, por predefinição, ext2 quando for
    utilizado o particionamento assistido.

  • jfs (não disponível em todas as arquiteturas)

  • xfs (não disponível em todas as arquiteturas)

  • reiserfs (opcional; não disponível em todas as arquiteturas)

    O suporte para o sistema de ficheiros Reiser já não está disponível por
    predefinição. Quando o instalador estiver a correr com a prioridade debconf
    média ou baixa pode ser ativado escolhendo o componente partman-reiserfs.
    Apenas é suportada a versão 3 do sistema de ficheiros.

  • qnx4

    As partições existentes serão reconhecidas e é possível atribuir-lhes
    pontos de montagem. Não é possível criar novas partições qnx4.

  • FAT16, FAT32

  • NTFS (apenas-leitura)

    As partições NTFS existentes podem ser redimensionadas e é possível
    atribuir-lhes pontos de montagem. Não é possível criar novas partições
    NTFS.

6.3.4.2. Particionamento Guiado

Se escolheu o particionamento guiado, poderá ter três opções: criar partições
diretamente no disco rígido (método clássico), ou criá-las utilizando o Logical
Volume Management (LVM), ou criá-las utilizando LVM encriptado^[9].

Nota

A opção de utilizar LVM (encriptado) pode não estar disponível em todas as
arquiteturas.

Quando utilizar LVM ou LVM encriptado, o instalador irá criar a maioria das
partições numa grande partição; a vantagem deste método é que as partições
dentro desta grande partição podem ser posteriormente redimensionadas com
relativa facilidade. No caso de LVM encriptado a grande partição não será lida
sem saber a frase-passe especial, dando assim uma segurança extra aos seus
dados pessoais.

Quando utilizar LVM encriptado, o instalador também irá apagar automaticamente
o disco escrevendo neste dados aleatórios. Isto melhora ainda mais a segurança
(porque torna impossível dizer quais as partes do disco que estão em uso e
também se assegura que vestígios de instalações anteriores sejam apagadas), mas
pode demorar algum tempo dependendo do tamanho do seu disco.

Nota

Se escolher o particionamento guiado utilizando LVM ou LVM encriptado têm de
ser escritas algumas alterações da tabela de partições no disco selecionado
enquanto o LVM é configurado. Estas alterações apagam efetivamente todos os
dados que estão atualmente no disco selecionado e não poderá desfazê-las
posteriormente. No entanto, o instalador ir-lhe-á pedir para confirmar estas
alterações antes de serem escritas no disco.

Se escolher o particionamento guiado (clássico ou utilizando LVM (encriptado))
para um disco inteiro, primeiro ser-lhe-á primeiro pedido para escolher o disco
que quer utilizar. Se tiver vários discos verifique se todos os discos estão
listados e assegure-se que escolhe o correto. A ordem porque estão listados
pode diferir do que você está acostumado. O tamanho dos discos pode ajudar a
identificá-los.

Quaisquer dados no disco que escolheu eventualmente serão perdidos, mas
ser-lhe-á sempre pedido para confirmar quaisquer alterações antes de serem
escritas no disco. Se selecionou o método clássico de particionamento, você
poderá desfazer todas as alterações até ao fim; quando utilizar LVM
(encriptado) isto não é possível.

De seguida, poderá escolher a partir de esquemas listados na tabela abaixo.
Todos os esquemas têm os seus prós e contras, alguns dos quais são discutidos
no Apêndice C, Particionar para Debian. Se estiver inseguro opte pelo primeiro.
Tenha em mente que o particionamento guiado necessita de um espaço mínimo livre
para funcionar. Se não disponibilizar pelo menos 1GB de espaço (depende do
esquema escolhido) o particionamento guiado irá falhar.

┌─────────────────────────────────────┬─────────────┬─────────────────────────┐
│  Esquema de criação das partições   │Espaço mínimo│    Partições criadas    │
├─────────────────────────────────────┼─────────────┼─────────────────────────┤
│Todos os ficheiros numa partição     │600MB        │/, swap                  │
├─────────────────────────────────────┼─────────────┼─────────────────────────┤
│Partição /home separada              │500MB        │/, /home, swap           │
├─────────────────────────────────────┼─────────────┼─────────────────────────┤
│Partições /home, /var e /tmp         │1GB          │/, /home, /var, /tmp,    │
│separadas                            │             │swap                     │
└─────────────────────────────────────┴─────────────┴─────────────────────────┘

Se escolheu o particionamento guiado utilizando LVM (encriptado), o instalador
irá também criar uma partição /boot separada. As outras partições, incluindo
para a partição swap, serão criadas dentro da partição LVM.

Se arrancou em modo EFI então dentro da configuração do particionamento guiado
haverá uma partição adicional, formatada como sistema de ficheiros FAT32 para o
gestor de arranque EFI. Esta partição é conhecida como EFI System Partition
(ESP). Existe também um item de menu adicional no menu de formatação para
manualmente definir uma partição como ESP.

Depois de escolher um esquema, o próximo ecrã irá mostrar-lhe a nova tabela de
partições, incluindo informação sobre como, e de que forma serão as partições
formatadas e onde serão montadas.

A lista de partições poderá parecer-se com isto:

  SCSI1 (0,0,0) (sda) - 6.4 GB WDC AC36400L
        #1 primary   16.4 MB  B f ext2       /boot
        #2 primary  551.0 MB      swap       swap
        #3 primary    5.8 GB      ntfs
           pri/log    8.2 MB      FREE SPACE

  SCSI2 (1,0,0) (sdb) - 80.0 GB ST380021A
        #1 primary   15.9 MB      ext3
        #2 primary  996.0 MB      fat16
        #3 primary    3.9 GB      xfs        /home
        #5 logical    6.0 GB    f ext4       /
        #6 logical    1.0 GB    f ext3       /var
        #7 logical  498.8 MB      ext3

Este exemplo mostra dois discos rígidos divididos em várias partições; o
primeiro disco possuí algum espaço livre. Cada linha de partição consiste no
número de partição, o seu tipo, tamanho, flags opcionais, sistema de ficheiros
e ponto de montagem (se existir). Nota: esta configuração particular não pode
ser criada utilizando o particionamento guiado mas mostra uma variação possível
que pode ser alcançada utilizando o particionamento manual.

Isto conclui o particionamento assistido. Se estiver satisfeito com a tabela de
partições gerada, pode escolher Terminar particionamento e escrever as
alterações no disco a partir do menu, para implementar a nova tabela de
partições (conforme é descrito no final desta seção). Se não estiver
satisfeito, pode optar pela opção Desfazer as alterações às partições e correr
novamente o assistente de particionamento, ou modificar as alterações propostas
como descritas abaixo para o particionamento manual.

6.3.4.3. Particionamento Manual

Será visualizado um ecrã similar ao que acabou de ser exibido se tiver
escolhido o particionamento manual mas a sua tabela partição existente será
exibida sem os pontos de montagem. Como configurar manualmente a tabela de
partições e o uso de partições pelo seu novo sistema Debian será tema do resto
desta seção.

Se escolher um disco completamente vazio que não possui nem partições nem
espaço livre, ser-lhe-á pedido que crie uma nova tabela de partições (isto é
necessário para que possa criar novas partições). Depois disto deverá aparecer
uma nova linha de nome "ESPAÇO LIVRE" na tabela abaixo do disco selecionado.

Se selecionar algum espaço livre, terá a oportunidade de criar uma nova
partição. Terá que responder a uma série de questões rápidas acerca do seu
tamanho, tipo (primária ou lógica), e local (início ou fim do espaço livre).
Depois desta etapa, ser-lhe-á apresentado um resumo detalhado acerca da sua
nova partição. A opção principal é Utilizar como:, que determina se a partição
irá ter um sistema de ficheiros, ou se será utilizada para swap, RAID por
software, LVM, sistema de ficheiros encriptado ou se não será utilizada de
todo. Outras configurações incluem o ponto de montagem, opções de montagem,
flag de arranque; as configurações que são mostradas dependem de como a
partição irá ser utilizada. Se não gostar dos valores predefinidos, esteja à
vontade para os alterar a seu gosto. E.g. selecionar a opção Utilizar como:,
pode escolher um sistema de ficheiros diferente para esta partição, incluindo
opções para utilizar a partição para swap, RAID por software, LVM, ou não a
utilizar de todo. Quando estiver satisfeito com a sua nova partição, selecione 
Preparação da Partição Terminada e regressará novamente ao ecrã principal do 
partman.

Se decidir que tem que alterar algo na sua partição, simplesmente selecione a
partição, o que o levará para o menu de configuração da partição. Este é o
mesmo ecrã que é utilizado para a criação de uma nova partição, por isso poderá
alterar as mesmas configurações. Uma coisa que poderá não ser muito óbvia, à
primeira vista, é o fato de poder redimensionar a partição selecionando o item
que mostra o tamanho da partição. Os sistemas de ficheiros em que é conhecido
funcionar são pelo menos fat16, fat32, ext2, ext3 e swap. Este menu permite-lhe
ainda apagar uma partição.

Certifique-se que criou pelo menos duas partições: uma para o sistema de
ficheiros root (que deverá ser montada como /) e outra para swap. Se se
esquecer de montar o sistema de ficheiros root, o partman não lhe permitirá
continuar até que corrija esta situação.

Se arrancou em modo EFI mas esqueceu-se de selecionar e formatar uma partição
EFI System Partition, o partman irá detetar isto e não o deixará continuar até
que aloque uma.

As capacidades do partman podem ser estendidas através de módulos de
instalação, mas dependem da arquitetura do seu sistema. Assim se não conseguir
obter todas as funcionalidades verifique todos os módulos necessários (p. ex.
partman-ext3, partman-xfs, ou partman-lvm).

Assim que estiver satisfeito com o particionamento selecione Terminar o
particionamento e escrever as alterações no disco a partir do menu de
particionamento. Ser-lhe-á apresentado um sumário das modificações efetuadas ao
disco e pedida a confirmação para que os sistemas de ficheiros sejam criados
conforme foram pedidos.

6.3.4.4. Configurar Dispositivos Multidisk (Software RAID)

Se tiver mais que um disco rígido^[10] no seu computador, poderá utilizar o
comando partman-md para configurar as drives para aumentar a performance e/ou
maior fiabilidade dos seus dados. O resultado é chamado Multidisk Device (ou
seguido da sua variante mais famosa software RAID).

Os MD são basicamente um conjunto de partições localizadas em discos diferentes
e combinadas em conjunto de modo a formar um dispositivo lógico. Este
dispositivo pode ser utilizado como uma partição vulgar (p.ex. no partman
poderá formatá-la, atribuir um ponto de montagem, etc.).

Os benefícios que isto trás dependem do tipo de dispositivo MD que está a
criar. Os atualmente suportados são:

RAID0

    Visando principalmente a performance. RAID0 separa toda a informação que
    chega em stripes e distribuí a mesma de um modo idêntico para cada disco do
    array. Isto pode aumentar a velocidade das operações de leitura/escrita,
    mas quando um dos discos falhar, perderá tudo (parte da informação está
    ainda no(s) disco(s) saudáveis, a outra parte estava no disco que falhou.

    A utilização típica de RAID0 é uma partição para edição de vídeo.

RAID1

    É indicado para configurações onde a fiabilidade é a primeira preocupação.
    Consiste em várias (normalmente duas) partições de tamanho igual, onde cada
    partição contém exatamente os mesmos dados. Essencialmente isto significa
    três coisas. Primeiro, se um dos discos falhar, ainda tem os dados
    espelhados nos restantes discos. Segundo, pode usar apenas uma fração da
    capacidade disponível (mais precisamente, é a dimensão da partição mais
    pequena do RAID). Terceiro, as leituras dos ficheiros são balanceadas entre
    os discos o que poderá melhorar a performance num servidor, tal como num
    servidor de ficheiros que tende a ser carregado com mais leituras do que
    escritas de ficheiros.

    Opcionalmente poderá ter um disco de reserva no array que tomará o lugar do
    disco que falhou em caso de uma falha.

RAID5

    É um bom compromisso entre velocidade, fiabilidade e redundância de dados.
    RAID5 divide toda a informação que chega em 'stripes' e distribui-a de um
    modo idêntico para todos os discos excepto num deles (idêntico a RAID0).
    Mas ao contrário do RAID0, o RAID5 também processa a informação de paridade
    , que é escrita no disco que resta. O disco de paridade não é estático
    (isso seria chamado RAID4), mas muda periodicamente de modo a que a
    informação de paridade seja igualmente distribuída em todos os discos.
    Quando um dos discos falha, a parte de informação em falta pode ser
    processada a partir dos dados que restaram e da sua paridade. RAID5
    consiste em pelo menos três partições ativas. Opcionalmente pode ter um
    disco de reserva no array que tomará o lugar do disco em caso de falha.

    Como pode ver o RAID5 possui um grau de fiabilidade idêntico ao RAID1 mas
    alcançando menor redundância. Por outro lado pode ser um pouco mais lento
    em operações de escrita do que o RAID0 devido ao processamento da
    informação de paridade.

RAID6

    É idêntico ao RAID5 mas utiliza dois dispositivos de paridade em vez de um.

    Um array RAID6 pode sobreviver á falha de dois discos.

RAID10

    RAID10 combina 'stripping' (como em RAID0) e 'mirroring' (tal como em
    RAID1). Cria n cópias dos dados que chegam e distribui-os através das
    partições de modo a que nenhuma das cópias dos mesmos dados fique no mesmo
    dispositivo. O valor pré-definido de n é 2, mas no modo avançado pode ser
    definido para outro valor qualquer. O número de partições a utilizar tem de
    ser no mínimo n. RAID10 tem layouts diferentes para distribuir as cópias. O
    predefinido são cópias próximas. As cópias próximas têm todas as cópias na
    mesma localização nos discos. As cópias de offset copiam o 'stripe', não as
    cópias individuais.

    RAID10 pode ser utilizado para alcançar fiabilidade e redundância sem a
    desvantagem de ter de calcular paridade.

Para resumir:

┌──────┬────────────┬─────────────┬──────────┬────────────────────────────────┐
│      │Dispositivos│ Dispositivo │Sobrevive │                                │
│ Tipo │  Mínimos   │Sobresselente│ a falhas │       Espaço Disponível        │
│      │            │             │de disco? │                                │
├──────┼────────────┼─────────────┼──────────┼────────────────────────────────┤
│      │            │             │          │Dimensão da mais pequena        │
│RAID0 │2           │não          │não       │partição multiplicada pelo      │
│      │            │             │          │número de dispositivos no RAID  │
├──────┼────────────┼─────────────┼──────────┼────────────────────────────────┤
│RAID1 │2           │opcional     │sim       │Dimensão da partição RAID mais  │
│      │            │             │          │pequena                         │
├──────┼────────────┼─────────────┼──────────┼────────────────────────────────┤
│      │            │             │          │Dimensão da mais pequena        │
│RAID5 │3           │opcional     │sim       │partição multiplicada por       │
│      │            │             │          │(número de dispositivos no RAID │
│      │            │             │          │menos um)                       │
├──────┼────────────┼─────────────┼──────────┼────────────────────────────────┤
│      │            │             │          │Dimensão da mais pequena        │
│RAID6 │4           │opcional     │sim       │partição multiplicada por       │
│      │            │             │          │(número de dispositivos no RAID │
│      │            │             │          │menos dois)                     │
├──────┼────────────┼─────────────┼──────────┼────────────────────────────────┤
│      │            │             │          │Total de todas as partições     │
│RAID10│2           │opcional     │sim       │dividido pelo número de cópias  │
│      │            │             │          │chunk (pré-definido para dois)  │
└──────┴────────────┴─────────────┴──────────┴────────────────────────────────┘

Se quiser saber mais sobre o RAID por software, dê uma vista de olhos ao
Software RAID HOWTO.

Para criar um dispositivo MD necessita de ter as partições desejadas marcadas
para uso em RAID. (Isto é feito com o partman no menu Particionar discos onde
deverá escolher Utilizar como: → 4cwVolume físico para RAID.)

Nota

Assegure-se de que o sistema pode arrancar com o esquema de particionamento que
está a planear. Quando utilizar RAID para o sistema de ficheiros raiz (/)
geralmente é necessário criar um sistema de ficheiros separado para /boot. A
maioria dos gestores de arranque (incluindo o grub) suportam RAID1 'mirrored'
(e não 'striped'), por isso poderá ser uma opção utilizar, por exemplo, RAID5
para / e RAID1 para /boot.

Em seguida, deverá escolher Configurar RAID por software a partir do menu
principal do partman. (O menu apenas irá aparecer depois de marcar pelo menos
uma partição para utilizar como volume físico para RAID) No primeiro ecrã do 
partman-md escolha simplesmente Criar dispositivo MD. Deverá ser-lhe
apresentada uma lista com os vários tipos de dispositivos MD suportados a
partir dos quais pode escolher um (p.ex. RAID1). O que se seguirá depende do
tipo de MD que selecionar.

  • O RAID0 é simples -- você será confrontado com uma lista de partições RAID
    disponíveis e a sua tarefa será apenas selecionar as partições que formaram
    o MD.

  • O RAID1 é um pouco mais complicado. Primeiro, ser-lhe-á pedido que
    introduza o número de dispositivos ativos e o número de dispositivos
    sobresselentes que irão formar o MD. De seguida, terá de escolher a partir
    da lista de partições RAID disponíveis quais as que serão ativas e quais as
    que serão sobresselentes. O número de partições escolhidas terá que ser
    igual ao número fornecido anteriormente. Não se preocupe. Se fizer algum
    erro e escolher um número diferente de partições, o debian-installer não o
    deixará continuar até que corrija o problema.

  • O RAID5 tem um procedimento de configuração similar ao do RAID1 com a
    excepção de que necessita de utilizar pelo menos três partições ativas.

  • O RAID6 tem um procedimento de configuração similar ao do RAID1 com a
    excepção de que necessita de utilizar pelo menos quatro partições ativas.

  • RAID10 tem um procedimento de instalação idêntico a RAID1 excepto no modo
    avançado. No modo avançado, o debian-installer, irá perguntar-lhe pelo
    layout. O layout tem duas partes. A primeira parte é o tipo de layout. É n
    (para cópias próximas), ou f (para cópias 'distantes'), ou o (para cópias
    offset). A segunda parte é o número de cópias a fazer dos dados. Tem de
    haver tantos dispositivos ativos de modo a que todas as cópias possam ser
    distribuídas em discos diferentes.

É perfeitamente possível ter vários tipos de MD ao mesmo tempo. Por exemplo, se
tiver três discos rígidos de 200 GB dedicados ao MD, cada uma contendo duas
partições de 100 GB, pode combinar as primeiras partições nos três discos em
RAID0 (partição rápida de 300 GB para edição de vídeo) e usar as outras três
partições (2 ativas e 1 de reserva) para RAID1 (uma partição muito fiável de
100 GB para /home).

Depois de configurar os dispositivos MD de acordo com as suas preferências,
pode executar Terminar partman-md para voltar ao partman com vista à criação
dos sistemas de ficheiros nos novos dispositivos MD e atribui-los aos pontos de
montagem habituais.

6.3.4.5. A configurar o Logical Volume Manager (LVM)

Se estiver a trabalhar com computadores num nível de administrador de sistema
ou como utilizador "avançado", já terá visto de certeza a situação em que
alguma partição do disco (normalmente a mais importante) é pequena em espaço,
enquanto que outras partições estão demasiado desaproveitadas e você tem que
gerir a situação movendo informação de um lado para o outro, fazer links
simbólicos, etc.

Para evitar a situação descrita pode utilizar o Logical Volume Manager (LVM).
Dito doutra forma, com o LVM pode combinar as suas partições (physical volumes
na linguagem do LVM) para formar um disco virtual (o chamado volume group), que
pode ser dividido em partições virtuais (logical volumes). O que há a reter é
que volumes lógicos (e com certeza volume groups contidos) podem ser
fisicamente espalhados por vários discos.

Agora que se apercebeu que necessita de mais espaço para a sua antiga partição/
home de 160 GB, pode simplesmente acrescentar um novo disco de 300GB ao
computador, adicioná-lo ao volume group e então redimensionar o volume lógico
que suporta o seu sistema de ficheiros /home e aí está -- os seus utilizadores
terão novamente espaço na renovada partição de 460GB. Este exemplo naturalmente
está um pouco simplificado. Se ainda não tiver lido deverá consultar o LVM
HOWTO.

A configuração de LVM no debian-installer é bastante simples e completamente
suportada dentro do partman. Primeiro, tem de marcar as partições para serem
utilizadas como volumes físicos para LVM. Isto é feito no menu Configuração de
partições onde deve escolher Utilizar como: → volume físico para LVM.

Atenção

Esteja atento: a nova configuração LVM irá destruir todos os dados em todas as
partições marcadas com um código de tipo LVM. Por isso, se já tiver um LVM em
alguns dos seus discos, e além disso também quiser instalar Debian nessa
máquina, o LVM antigo (já existente) será apagado! O mesmo vale para partições,
que (por alguma razão) estejam marcadas erradamente com um código de tipo LVM,
mas contenham algo diferente (como um volume encriptado). Poderá ter que
remover esses discos do sistema, antes de fazer uma nova configuração de LVM!

Quando regressar ao ecrã principal do partman, irá ver uma nova opção 
Configurar o Gestor de Volumes Lógicos. Quando a selecionar, primeiro ser-lhe-á
perguntado para confirmar as alterações pendentes à tabela de partições (se
existirem) e depois disso irá aparecer o menu de configuração de LVM. Acima do
menu será mostrado um sumário da configuração do LVM. O próprio menu é sensível
ao contexto e apenas mostra ações válidas. As ações possíveis são:

  • Mostrar detalhes de configuração: mostra a estrutura do dispositivo LVM,
    nome e tamanhos dos volumes lógicos e mais

  • Criar grupo de volumes

  • Criar volume lógico

  • Apagar grupo de volumes

  • Apagar volume lógico

  • Estender grupo de volumes

  • Reduzir grupo de volumes

  • Terminar: voltar o ecrã principal do partman

Utilize as opções nesse menu para criar primeiro um grupo de volumes e depois
criar os seus volumes lógicos dentro.

Depois de voltar ao ecrã principal do partman, qualquer volume lógico criado
será mostrado do mesmo modo que as partições normais (e deverá tratá-las como
tal).

6.3.4.6. Configurar Volumes Encriptados

O debian-installer permite-lhe configurar partições encriptadas. Cada ficheiro
que escreva para cada uma dessas partições é imediatamente gravado no
dispositivo sob a forma encriptada. O acesso aos dados encriptados é garantido
apenas após introduzir a frase-passe utilizada quando a partição foi
originalmente criada. Esta funcionalidade é útil para proteger dados sensíveis
no caso do seu portátil ou disco rígido serem furtados. O ladrão pode ter
acesso físico ao disco rígido, mas sem saber a frase-passe correta, os dados no
disco irão aparecer como caracteres aleatórios.

As duas partições mais importantes para encriptar são a home, onde residem os
seus dados privados, e a partição de swap, onde dados sensíveis podem ter sido
guardados temporariamente durante a operação. Claro que, ninguém o impede de
encriptar quaisquer outras partições que possam ser de interesse. Por exemplo /
var onde os servidores de bases de dados, os servidores de mail ou os
servidores de impressão guardam os seus dados, ou /tmp que é utilizado por
vários programas para guardar temporariamente ficheiros potencialmente de
interesse. Algumas pessoas podem até querer encriptar todo o seu sistema.
Geralmente a única excepção é a partição /boot que tem de permanecer
não-encriptada, porque atualmente não existe maneira de carregar o kernel a
partir de uma partição encriptada. (O GRUB agora já á capaz de o fazer, mas o
debian-installer atualmente ainda não suporta suporte nativo para a /boot. A
configuração é por isso coberta num documento separado.)

Nota

Por favor tenha em conta que o desempenho de partições encriptadas será
inferior ao das partições não-encriptadas porque os dados necessitam de ser
desencriptados ou encriptados para cada escrita ou leitura. O impacto no
desempenho depende da velocidade do seu CPU, da cifra escolhida e tamanho da
chave.

Para utilizar encriptação, tem de criar uma nova partição ao escolher no menu
principal do particionamento algum espaço livre. Outra opção é escolher uma
partição existente (e.g. uma partição normal, um volume lógico LVM ou um volume
RAID). No menu Configurações da partição, na opção Utilizar como: tem de
escolher volume físico para encriptação . O menu irá então mudar para incluir
várias opções de criptografia para a partição.

O método de encriptação suportado pelo debian-installer é o dm-crypt (incluído
em kernel Linux recentes, capaz de alojar volumes físicos de LVM).

Vamos olhar para as opções disponíveis quando escolher encriptação via
Device-mapper (dm-crypt). Como sempre: em caso de dúvida, utilize os valores
predefinidos, porque estes foram cuidadosamente escolhidos com a segurança em
mente.

Encriptação: aes

    Esta opção deixa-o escolher o algoritmo de encriptação (cifra) que será
    utilizado para encriptar os dados na partição. O debian-installer
    atualmente suporta as seguintes cifras de blocos: aes, blowfish, serpent, e
    twofish. Está fora do âmbito deste documento discutir as qualidades destes
    diferentes algoritmos, no entanto, pode ajudar a sua decisão saber que em
    2000, o AES foi escolhido pelo American National Institute of Standards and
    Technology como o algoritmo de encriptação standard para proteger
    informação sensível no século XXI.

Comprimento da chave: 256

    Pode especificar aqui o comprimento da chave de encriptação. Com um
    comprimento maior da chave, o poder da encriptação é normalmente melhorado.
    Por outro lado, aumentar o comprimento da chave tem um impacto negativo no
    desempenho. Os comprimentos disponíveis das chaves variam consoante a
    cifra.

Algoritmo IV: xts-plain64

    O algoritmo Vetor de Inicialização ou IV é utilizado em criptografia para
    assegurar que aplicando a mesma cifra para os mesmos dados em texto em
    claro com a mesma chave produz sempre um texto cifrado único. A ideia é
    prevenir que o atacante deduza informação a partir de padrões repetidos nos
    dados encriptados.

    A partir das alternativas disponibilizadas xts-plain64 é atualmente o menos
    vulnerável a ataques conhecidos. Utilize as outras alternativas apenas
    quando precisar de assegurar compatibilidade com algum sistema instalado
    anteriormente que não seja capaz de utilizar algoritmos mais recentes.

Chave de encriptação: frase-passe

    Pode escolher aqui o tipo de chave de encriptação para esta partição.

    frase-passe

        A chave de encriptação será processada^[11] tendo como base uma
        frase-passe que poderá introduzir mais à frente no processo.

    Chave aleatória

        Será gerada uma nova chave de encriptação a partir de dados aleatórios
        cada vez que tentar chamar a partição encriptada. Por outras palavras:
        cada vez que desligar, o conteúdo da partição será perdido já que a
        chave é apagada da memória. (Claro que, pode tentar adivinhar a chave
        com um ataque de força bruta, mas a menos que exista uma fraqueza
        conhecida no algoritmo de cifragem, isto não é alcançável durante a
        nossa vida.)

        As chaves aleatórias são úteis para partições de swap porque assim você
        não tem de se preocupar em lembrar-se da frase-passe ou apagar
        informação sensível da partição de swap antes de desligar o seu
        computador. No entanto, também significa que você não poderá utilizar a
        funcionalidade "suspend-to-disk" oferecida pelos recentes kernels Linux
        já que é impossível (durante o arranque seguinte) recuperar os dados
        suspendidos escritos para a partição de swap.

Apagar dados: sim

    Determina se o conteúdo desta partição deve ser sobrescrito com dados
    aleatórios antes de configurar a encriptação. Isto é recomendado porque
    caso contrário pode ser possível a um atacante discernir que partes da
    partição são ou não utilizadas. Além disso, isto irá tornar mais difícil
    recuperar quaisquer dados que tenham ficado de instalações anteriores^[12].

Depois de ter selecionado os parâmetros desejados para as suas partições
encriptadas, volte ao menu principal do particionamento. Deve existir agora um
item chamado Configurar volumes encriptados. Após o ter escolhido, ser-lhe-á
pedido para confirmar o apagar os dados nas partições marcadas para serem
apagadas e possivelmente também outras ações tais como escrever uma nova tabela
de partições. Para partições grandes isto pode demorar algum tempo.

De seguida ser-lhe-á pedido para introduzir uma frase-passe para as partições
configuradas para utilizar uma. Boas frases-passe devem ter mais de 8
caracteres, devem ser uma mistura de letras, números e outros caracteres e não
devem conter palavras usuais de dicionário ou informação facilmente associável
a si (tal como datas de nascimento, passatempos, nomes de animais de estimação,
nomes de familiares, etc.).

Atenção

Antes de introduzir quaisquer frases-passe, deve ter a certeza que o seu
teclado está configurado corretamente e gera os caracteres esperados. Se não
tiver a certeza, pode mudar para a segunda consola virtual e escrever algum
texto na linha de comandos. Isto assegura que não terá surpresas
posteriormente, e.g. ao tentar introduzir uma frase-passe utilizando uma
disposição de teclado qwerty quando utilizou uma disposição azerty durante a
instalação. Esta situação pode ter várias causas. Talvez você tenha mudado para
outra disposição de teclado durante a instalação, ou a disposição de teclado
selecionada pode ainda não ter sido configurada quando introduziu a frase-chave
para o sistema de ficheiros raiz.

Se escolheu utilizar outros métodos que não uma frase-passe para criar chaves
de encriptação, estas serão agora geradas. Como o kernel pode não ter reunido
uma quantidade suficiente de entropia nesta etapa inicial da instalação, o
processo pode demorar bastante tempo. Pode ajudar a acelerar o processo gerando
entropia: e.g. carregando aleatoriamente em teclas, ou mudar para a shell na
segunda consola virtual e gerar algum tráfego de rede e de disco (descarregar
alguns ficheiros, mandar ficheiros grandes para /dev/null, etc.). Isto será
repetido para cada partição a ser encriptada.

Após regressar ao menu principal do particionamento, irá ver todos os volumes
encriptados como partições adicionais que podem ser configuradas da mesma forma
que as partições normais. O seguinte exemplo mostra um volume encriptado via
dm-crypt.

Volume encriptado (sda2_crypt) - 115.1 GB Linux device-mapper
      #1 115.1 GB  F ext3

Agora é altura de atribuir pontos de montagem aos volumes e opcionalmente
alterar os tipos de sistemas de ficheiros se os valores por omissão não lhe
servirem.

Tome atenção aos identificadores entre parêntesis (neste caso sda2_crypt) e os
pontos de montagem que atribuiu a cada volume encriptado. Mais tarde, quando
arrancar o seu novo sistema irá necessitar desta informação. A diferença entre
o processo normal de arranque e o processo de arranque com encriptação
envolvida será posteriormente coberto na Secção 7.2, "Montar volumes
encriptados".

Uma vez satisfeito com o esquema de particionamento, continue com a instalação.

6.3.5. Instalar o Sistema Base

Apesar desta fase ser a menos problemática, consome uma parte significativa
pois descarrega, verifica e extrai todo o sistema base. Se tiver um computador
ou uma ligação de rede lenta, isto poderá demorar algum tempo.

Durante a instalação do sistema base, as mensagens de extração e da
configuração de pacotes são redirecionadas para tty4. Pode aceder a este
terminal premindo Alt Esquerdo+F4; pode voltar ao processo principal do
instalador com Alt esquerdo+F1.

As mensagens de extração/configuração geradas durante esta fase são guardadas
em /var/log/syslog. Pode vê-las lá se a instalação foi feita através de uma
consola série.

Como parte da instalação, um kernel Linux irá ser instalado. Como primeira
prioridade, o instalador ir-lhe-á escolher um que melhor coincide com o seu
hardware. Em modos de prioridade mais baixa, poderá escolher a partir de uma
lista de kernels disponíveis.

Quando são instalados pacotes utilizando o sistema de gestão de pacotes, irá
por predefinição, instalar também pacotes que são recomendados por esses
pacotes. Os pacotes recomendados não são estritamente necessários ao
funcionalidade principal do software escolhido, mas melhoram esse software e,
segundo a visão dos maintainers dos pacotes, devem normalmente ser instalados
em conjunto com esse software.

Nota

Devido a razões técnicas os pacotes instalados durante a instalação do sistema
base são instalados sem os "Recommends". A regra descrita acima apenas tem
efeito após este ponto do processo de instalação.

6.3.6. Instalar Software Adicional

Nesta altura tem um sistema utilizável mas limitado. A maioria dos utilizadores
irá querer acrescentar software adicional ao sistema para o adequar às suas
necessidades, e o instalador permite-lhe fazer isso. Esta etapa pode demorar
ainda mais do que instalar o sistema base se tiver um computador ou uma ligação
de rede lentos.

6.3.6.1. Configurar o apt

Uma das ferramentas utilizadas para instalar pacotes num sistema Debian GNU/
Linux, é o programa apt, do pacote apt^[13]. Também estão em uso outros
frontends para a gestão de pacotes tal como o aptitude e o synaptic. Esses
frontends são recomendados para os novos utilizadores, já que integram algumas
funcionalidades adicionais (pesquisa de pacotes e verificação de estado) num
interface simpático com o utilizador.

O apt tem de ser configurado de modo a que saiba de onde obter os pacotes. Os
resultados desta configuração são escritos no ficheiro /etc/apt/sources.list.
Pode examinar e editar este ficheiro ao seu gosto após a instalação ter
terminado.

Se estiver a instalar com a prioridade predefinida, o instalador irá tomar
conta da configuração automaticamente e em grande escala, de acordo com o
método de instalação que estiver a utilizar e possivelmente utilizando as
escolhas feitas anteriormente na instalação. Na maioria dos casos o instalador
irá acrescentar automaticamente um 'mirror' de segurança e, se estiver a
instalar a distribuição estável, também um 'mirror' para o serviço de
atualizações "stable-updates".

Se estiver a instalar com uma prioridade inferior (e.g. no modo avançado),
poderá tomar mais decisões. Pode escolher utilizar, ou não, os serviços de
atualizações de segurança e/ou stable-updates, e pode escolher acrescentar
pacotes das seções "contrib" e "non-free" do arquivo.

6.3.6.1.1. Instalar a partir de mais do que uma imagem de CD ou de DVD

Se estiver a instalar a partir de uma imagem de CD ou de DVD que faça parte de
um conjunto maior, o instalador irá perguntar-lhe se deseja pesquisar meios de
instalação adicionais. Se tiver disponíveis tais meios de instalação
adicionais, provavelmente desejará fazer isto para que o instalador utilize os
pacotes incluídos neles.

Se não possuir quaisquer meios adicionais, não há problema: não é obrigatório
utilizá-los. Se também não utilizar um mirror de rede (conforme é explicado na
próxima seção), pode significar que não possam ser instalados todos os pacotes
que pertencem à tarefa que escolher na próxima etapa.

Nota

Os pacotes são incluídos nas imagens de CD e de DVD ordenados pela sua
popularidade. Isto significa que para a maioria das utilizações será necessária
apenas a primeira imagem do conjunto e que apenas poucas pessoas utilizarão
quaisquer dos pacotes incluídos nas últimas imagens do conjunto.

Isto também significa que comprar ou carregar um conjunto completo de CDs é
apenas um desperdício de dinheiro, já que nunca utilizará a maioria deles. Na
maioria dos casos o melhor é obter apenas os 3 a 8 dos primeiros CDs e instalar
quaisquer pacotes adicionais que necessite a partir da Internet utilizando um
mirror. O mesmo acontece para os conjuntos de DVDs: o primeiro DVD, ou até
mesmo os primeiros dois DVDs deverão cobrir a maioria das necessidades.

Se pesquisar vários meios de instalação, o instalador irá-lhe pedir para
trocá-los quando necessitar de pacotes de outro que não esteja no leitor. Note
que apenas devem ser pesquisados discos que pertençam ao mesmo conjunto. A
ordem pela qual são pesquisados não é importante, mas pesquisá-los por ordem
ascendente irá reduzir a hipótese de erros.

6.3.6.1.2. Utilizar um mirror de rede

Uma questão que será colocada na maioria das instalações é se deseja ou não
utilizar um mirror de rede como fonte de pacotes. Na maioria dos casos a
resposta predefinida deve estar bem, mas existem algumas excepções.

Se não estiver a instalar a partir de uma imagem completa de CD/DVD, deverá
utilizar um mirror de rede caso contrário irá acabar apenas com um sistema
muito reduzido. No entanto, se tiver uma ligação à Internet limitada, é melhor 
não escolher a tarefa desktop na próxima etapa da instalação.

Se estiver a instalar a partir de uma única imagem de CD completa, não é
necessário utilizar um mirror de rede mas mesmo assim é fortemente recomendado
porque uma única imagem de CD contém apenas um número bastante limitado de
pacotes. Se tiver uma ligação limitada à Internet poderá ser melhor não
escolher aqui um mirror de rede, mas terminar a instalação utilizando o que
estiver disponível na imagem de CD e instalar seletivamente os pacotes
adicionais após a instalação (i.e. após ter reiniciado para o novo sistema).

Se estiver a instalar a partir de DVD, quaisquer pacotes necessários durante a
instalação devem estar presentes na primeira imagem de DVD. A utilização de um
mirror de rede é opcional.

Uma vantagem em acrescentar um mirror de rede é que as atualizações que tenham
ocorrido desde que foram criadas as imagens de CD/DVD e tenham sido incluídas
num lançamento pontual, irão estar disponíveis para a instalação, e assim
prolonga a vida do seu conjunto de CDs/DVDs sem comprometer a segurança ou
estabilidade do sistema instalado.

Em resumo: escolher um mirror de rede é normalmente uma boa ideia, excepto se
não tiver uma boa ligação à Internet. Se a versão atual de um pacote estiver
disponível a partir do meio de instalação, o instalador irá sempre utilizar
essa. A quantidade de dados que serão descarregados se escolher um mirror de
rede depende de

 1. das tarefas que escolher na próxima etapa da instalação,

 2. que pacotes são necessários para essas tarefas,

 3. de quais desses pacotes estão presentes no meio de instalação que
    pesquisou, e

 4. se estiverem disponíveis versões atualizadas dos pacotes incluídos no meio
    de instalação a partir de um mirror (quer seja um mirror normal de pacotes,
    ou um mirror de atualizações security ou de stable-updates).

Note que o último ponto significa que, mesmo que escolha não utilizar um mirror
de rede, alguns pacotes podem mesmo assim ser descarregados da Internet se
estiverem disponíveis atualizações nos serviços security ou stable-updates e se
esses serviços tiverem sido configurados.

6.3.6.1.3. Escolher um mirror de rede

A menos que tenha escolhido não utilizar um mirror de rede, ser-lhe-á
apresentada uma lista de mirrors de rede baseada na seleção do país feita
anteriormente no processo de instalação. Escolher a opção oferecida é
normalmente uma boa escolha.

A predefinição oferecida é deb.debian.org, a qual não é um mirror mas
redireciona para um mirror que deverá ser atualizado e rápido. Estes mirrors
suportam TLS (protocolo https) e IPv6. Este serviço é mantido pela equipa
Debian de Administração de Sistemas (DSA).

Também pode ser especificado um mirror ao escolher "introduzir manualmente a
informação". Poderá então especificar o nome da máquina do mirror e,
opcionalmente, um número de porto. Tem de ser um URL base, i.e. quando
especificar um endereço IPv6, terá que acrescentar parêntesis retos à sua
volta, por exemplo "[2001:db8::1]".

Se o seu computador estiver numa rede apenas com IPv6 (o que provavelmente não
será o caso para a maioria dos utilizadores), utilizar o mirror predefinido
para a sua rede poderá não funcionar. Todos os mirrors na lista são alcançáveis
através de IPv4, mas apenas alguns podem ser utilizados através de IPv6. A
conetividade dos mirrors individuais pode mudar ao longo do tempo, esta
informação não está disponível ao instalador. Se não existir conetividade IPv6
para o mirror predefinido para o seu país, pode escolher outro dos mirrors
oferecidos na lista ou pode escolher a opção "introduzir a informação
manualmente". Pode então especificar como nome do mirror "ftp.ipv6.debian.org",
que é um atalho para um mirror acessível através de IPv6, embora possivelmente
não seja o mais rápido.

6.3.6.2. Escolher e Instalar Software

Durante o processo de instalação, é-lhe dada a oportunidade de escolher
software adicional para instalar. Em vez de escolher pacotes individuais de
software a partir de 87573 pacotes disponíveis, esta etapa do processo de
instalação foca-se em selecionar e instalar coleções de software predefinidas
para preparar o seu computador rapidamente para executar várias tarefas.

Estas tarefas representam um número de trabalhos diferentes ou coisas que possa
desejar fazer com o seu computador, tais como "Ambiente Desktop", "Servidor Web
", ou "Servidor SSH"^[14]. A Secção D.2, "Espaço em Disco Necessário para
Tarefas" lista as necessidades de espaço para as tarefas disponíveis.

Note que algumas tarefas podem ser pré-selecionadas de acordo com as
caraterísticas do computador que está a instalar. Se não concordar com essas
escolhas pode desselecioná-las. Neste ponto pode mesmo optar por não instalar
nenhuma tarefa.

Dica

No interface standard de utilizador do instalador, pode utilizar a barra de
espaços para mudar a seleção de uma tarefa.

Nota

A tarefa "Ambiente de Trabalho" irá instalar um ambiente de trabalho gráfico.

Por predefinição, o debian-installer instala o ambiente de trabalho Gnome.
Durante a instalação é possível escolher um ambiente de trabalho diferente.
Também é possível instalar vários ambientes de trabalho, no entanto algumas
combinações de ambientes de trabalho poderão não ser co-instaláveis.

Note que isto apenas irá funcionar se os pacotes necessários para o ambiente de
trabalho desejado estiverem de facto disponíveis. Se estiver a instalar
utilizando uma imagem de CD completa, possivelmente será necessário obtê-los a
partir de um mirror de rede, já que poderão não estar disponíveis na imagem de
CD devido ao seu espaço limitado. Instalar qualquer um dos ambientes de
trabalho disponíveis deverá funcionar bem desta forma se estiver a utilizar uma
imagem de DVD ou qualquer outro método de instalação.

As várias tarefas de servidor irão instalar software conforme o seguinte.
Servidor Web: apache2; Servidor SSH: openssh.

A tarefa "Sistema standard" irá instalar qualquer pacote que tenha a prioridade
"standard". Isto inclui muitos utilitários comuns que estão normalmente
disponíveis em qualquer sistema Linux ou Unix. Deve deixar esta tarefa
selecionada a menos que saiba o que está a fazer e queira mesmo um sistema
minimalista.

Se durante a escolha da linguagem foi escolhido um locale predefinido que não "
C", então o tasksel irá verificar se estão definidas quaisquer tarefas de
localização para esse locale e irá automaticamente tentar instalar pacotes de
localização relevantes. Isto inclui por exemplo pacotes com listas de palavras
ou tipos de letra especiais para a sua linguagem. Se foi escolhido um ambiente
de trabalho gráfico, também irá instalar os pacotes de localização apropriados
(se disponíveis).

Assim que tiver escolhido as suas tarefas, escolha Continue. Neste momento, o 
apt irá instalar os pacotes que fazem parte das tarefas que escolheu. Se um
determinado programa necessitar de mais informação do utilizador irá pedi-la
durante este processo.

Deve ter em atenção que especialmente a tarefa Desktop é muito grande.
Especialmente quando instalar a partir de um CD-ROM normal em combinação com um
mirror para pacotes que não estejam no CD-ROM, o instalador pode querer obter
muitos pacotes a partir da rede. Se tiver uma ligação à Internet relativamente
lenta, isto pode demorar muito tempo. Assim que tiver começado não existe opção
para cancelar a instalação de pacotes.

Mesmo quando os pacotes são incluídos no CD-ROM, o instalador poderá, mesmo
assim, ter de obtê-los a partir do mirror se a versão disponível no mirror for
mais recente do que a que está incluída no CD-ROM. Se está a instalar a
distribuição estável, isto pode acontecer após um lançamento pontual (uma
atualização do lançamento estável original); se estiver a instalar a
distribuição testing isto irá acontecer se estiver a utilizar uma imagem mais
antiga.

6.3.7. Tornar o Sistema Iniciável

Se estiver a instalar numa estação de trabalho sem discos, obviamente que o
arranque a partir do disco local deixa de ter significado, de modo que este
passo é ignorado.

6.3.7.1. Deteção de outros sistemas operativos

Antes da instalação do gestor de arranque, o instalador irá tentar detetar
outros sistemas operativos instalados na máquina. Se encontrar um sistema
operativo que seja suportado, será informado no decurso da fase de instalação
do gestor de arranque, e o computador será configurado para arrancar este outro
sistema operativo além de Debian.

Note que o arranque de vários sistemas operativos numa única máquina é
considerado ainda uma arte obscura. O suporte para a deteção e configuração
automática dos gestores de arranque para arranque de outros sistemas operativos
variam por arquitetura e por vezes até por sub-arquitetura. Se não funcionar
deverá consultar a documentação do seu gestor de arranque para mais
informações.

6.3.7.2. Instalar o Gestor de Arranque Grub no disco

O gestor de arranque para amd64 tem o nome de "grub". O grub é um gestor de
arranque flexível e robusto e é uma boa escolha predefinida para novos
utilizadores assim como para utilizadores experientes.

Por predefinição, o grub será instalado na partição UEFI/Boot Record do disco
primário, onde assumirá todo o controle do processo de arranque. Se preferir,
pode instalá-lo noutro local. Veja o manual do grub para informação completa.

Se não quiser instalar o grub, utilize o botão Go Back para voltar ao menu
principal e a partir daí selecione o gestor de arranque que deseja utilizar.

6.3.7.3. Continuar Sem Gestor de Arranque

Esta opção pode ser usada para completar a instalação mesmo que o gestor de
arranque não seja instalado, quer por a arch/subarch não fornecer nenhum, ou
por não ser desejado nenhum (p.e. usar o gestor de arranque existente).

Se planeia configurar manualmente o gestor de arranque, deverá verificar o nome
do kernel que está instalado em /target/boot. Deverá verificar também a
presença no diretório de um initrd; se estiver um presente, provavelmente terá
que instruir o gestor de arranque para que o utilize. Outro tipo de informação
que irá necessitar é o disco e a partição que selecionou para o seu sistema de
ficheiros /, e se escolheu instalar a /boot numa partição separada.

6.3.8. Terminar a Instalação

Esta é a última etapa no processo de instalação de Debian durante o qual o
instalador irá executar algumas tarefas finais. Consiste basicamente em arrumar
tudo após o debian-installer.

6.3.8.1. Configurar o Relógio do Sistema

O instalador poderá perguntar se o relógio do computador está definido para
UTC. Normalmente, e se possível, esta questão é evitada e o instalador tenta
decidir se relógio está definido para UTC baseado em fatores como se outros
sistemas operativos estão instalados.

No modo expert poderá sempre poder escolher se o relógio está ou não definido
para UTC. Sistemas que (também) corram Dos ou Windows normalmente estão
definidos para hora local. Se deseja utilizar dual-boot, escolha hora local em
vez de UTC.

Nesta altura o debian-installer também irá tentar guardar a hora atual no
relógio de hardware do seu sistema. Isto será feito em UTC ou em hora local,
dependendo da seleção que foi acabada de fazer.

6.3.8.2. Reiniciar o Sistema

Ser-lhe-á pedido que remova o meio de arranque (CD, pen USB, etc) que utilizou
para arrancar o instalador. Depois disso o sistema irá reiniciar já no seu novo
sistema Debian.

6.3.9. Resolução de problemas

Os componentes listados nesta seção estão normalmente envolvidos no processo de
instalação, mas encontram-se em pano de fundo para ajudar o utilizador no caso
de algo correr mal.

6.3.9.1. Gravar os logs de instalação

Se a instalação tiver sucesso, os ficheiros de log criados durante o processo
de instalação serão automaticamente gravados em /var/log/installer/ no seu novo
sistema Debian.

Ao escolher Guardar logs de debug a partir do menu principal irá-lhe permitir
gravar os ficheiros de log numa pen USB, rede, disco rígido, ou noutro suporte.
Isto pode ser útil se encontrar problemas fatais durante a instalação e queira
estudar os logs noutro sistema ou incluí-los num relatório de instalação.

6.3.9.2. Utilizar a Shell e Ver os Logs

Existem vários métodos que pode utilizar para obter uma shell enquanto decorre
uma instalação. Na maioria dos sistemas, e se não estiver a instalar através de
uma consola série, o método mais fácil é mudar para a segunda consola virtual
carregando em Alt Esquerdo+F2^[15] (num teclado Mac, Option+F2). Utilize Alt
Esquerdo+F1 para voltar ao instalador.

Para o instalador gráfico veja também a Secção 6.1.1, "Utilizar o instalador
gráfico".

Se não conseguir mudar de consola, existe também um item no menu principal 
Executar uma Shell que pode ser utilizado para iniciar uma shell. Pode voltar
ao menu principal a partir de maioria dos diálogos utilize o botão Go Back uma
ou mais vezes. Escreva exit para fechar a shell e voltar ao instalador.

Nesta fase arrancou a partir do disco RAM, e existem apenas uma série limitada
de utilitários Unix para a sua utilização. Você poderá ver que programas estão
disponíveis com o comando ls /bin /sbin /usr/bin /usr/sbin e executando help. A
shell é um clone da Bourne shell chamado ash e tem algumas funcionalidades
agradáveis como auto-completar e histórico.

Para editar ou ver ficheiros, utilize o editor de texto nano. Ficheiros de log
para o sistema de instalação podem ser encontrados no diretório /var/log.

Nota

Embora possa fazer basicamente tudo numa shell o que os comandos disponíveis
lhe permitem, a opção de utilizar uma shell só existe realmente para o caso de
alguma coisa correr mal e para depuração.

Fazer coisas manualmente, a partir da shell, pode interferir com o processo de
instalação e resultar em erros ou numa instalação incompleta. Em particular,
deve sempre deixar o instalador ativar a sua partição de swap e não o faça você
mesmo a partir da shell.

6.3.10. Instalação através de network-console

Um dos componentes mais interessantes é o network-console. Permite-lhe fazer
uma grande parte da instalação através da rede, via SSH. A utilização da rede
implica que tem de executar as primeiras etapas da instalação a partir da
consola, pelo menos até ao ponto de configurar a rede. (Embora possa
automatizar essa parte com a Secção 4.6, "Instalação Automática".)

Este componente não é, por predefinição, carregado para o menu principal da
instalação, por isso tem de o pedir explicitamente. Se estiver a instalar a
partir de um meio óptico, tem de arrancar com prioridade média ou caso
contrário invocar o menu principal da instalação e escolher Carregar
componentes instalador e a partir da lista de componentes adicionais escolher 
network-console: Continuar a instalação remotamente com SSH. O sucesso do
carregamento é indicado com uma nova opção no menu chamada Continuar a
instalação remotamente com SSH.

Após escolher esta nova opção, ser-lhe-á pedida uma nova palavra-passe e a sua
confirmação para ser utilizada para ligar ao sistema de instalação. E é tudo.
Agora deverá ver um ecrã que lhe diz para fazer o login remotamente como o
utilizador installer com a palavra-passe que você acabou de indicar. Outro
detalhe importante a notar é que neste ecrã é mostrada a impressão digital
deste sistema. Tem de transferir de forma segura a impressão digital para a
pessoa que irá continuar a instalação remotamente.

Caso decida continuar com a instalação localmente, pode sempre pressionar Enter
, que o irá trazer de volta ao menu principal, onde poderá escolher outro
componente.

Agora vamos mudar para o outro lado do cabo. Como pré-requisito, tem de
configurar o seu terminal para utilizar a codificação UTF-8, porque é essa que
o sistema de instalação utiliza. Se não o fizer, a instalação remota ainda será
possível, mas poderão aparecer no ecrã símbolos estranhos tais como cantos de
caixas de diálogo destruídos ou caracteres não-ascii ilegíveis. Estabelecer uma
ligação com o sistema de instalação é tão simples como escrever:

$ ssh -l installer install_host

Onde install_host é o nome ou o endereço IP do computador a ser instalado.
Antes do login ser-lhe-à mostrada a impressão digital (fingerprint) do sistema
remoto e terá de confirmar se é o correto.

Nota

O servidor ssh no instalador utiliza uma configuração predefinida que não envia
pacotes 'keep-alive'. Em principio, uma ligação ao sistema a ser instalado deve
ficar aberta indefinidamente. No entanto, em algumas situações -- dependendo da
configuração da sua rede local -- a ligação pode ser perdida após um período de
inatividade. Um caso usual onde isto pode acontecer é quando ocorre alguma
forma de 'Network Address Translation' (NAT) algures entre o cliente e o
sistema a ser instalado. Conforme o ponto da instalação em que a ligação foi
perdida, poderá, ou não, conseguir retomar a instalação após ligar novamente.

Poderá conseguir evitar que a ligação caia ao acrescentar a opção
-o ServerAliveInterval=valor quando iniciar a ligação ssh, ou acrescentando
esta opção ao seu ficheiro de configuração do ssh. Note que no entanto em
alguns casos acrescentar esta opção pode também fazer com que a ligação caia
(por exemplo se os pacotes 'keep alive' forem enviados durante uma breve falha
de rede, da qual o ssh teria recuperado), por isso deve ser utilizado apenas
quando for necessário.

Nota

Se instalar vários computadores e estes tiverem o mesmo endereço IP ou nome de
máquina, o ssh irá recusar-se a ligar a essas máquinas. A razão é que terão
'impressões digitais' diferentes, que é normalmente um sinal de um ataque de
spoofing. Se tiver a certeza que não é o caso, terá que apagar a linha
relevante em ~/.ssh/known_hosts^[16] e tentar novamente.

Após o login ser-lhe-á apresentado um ecrã inicial onde terá duas
possibilidades chamadas Iniciar menu e Iniciar shell. A anterior leva-o para o
menu principal do instalador, onde pode prosseguir normalmente com a
instalação. A última inicia uma shell de onde a partir da qual você pode
examinar e possivelmente reparar o sistema remoto. Você deve iniciar apenas uma
sessão SSH para o menu de instalação, mas pode iniciar várias sessões para
shells.

Atenção

Após ter iniciado a instalação remotamente por SSH, não deve voltar atrás para
a sessão da instalação que corre na consola local. Se o fizer você pode
corromper a base de dados que mantém a configuração do novo sistema. Isto pode
resultar numa instalação falhada ou em problemas com o sistema instalado.

6.4. Carregar Firmware em Falta

Conforme é descrito na Secção 2.2, "Dispositivos que Necessitam de Firmware",
alguns dispositivos necessitam que seja carregado firmware. Na maioria dos
casos o dispositivo não irá funcionar se o firmware não estiver disponível; Por
vezes as funcionalidades básicas não serão limitadas se o firmware estiver em
falta e for apenas necessário para habilitar funcionalidades adicionais.

Se o controlador de um dispositivo necessitar de firmware que não esteja
disponível, o debian-installer irá mostrar uma caixa de diálogo a oferecer-se
para carregar o firmware em falta. Se esta opção for selecionada, o
debian-installer irá procurar nos dispositivos disponíveis por ficheiros soltos
de firmware ou pacotes contendo firmware. Se for encontrado, o firmware será
copiado para a localização correta (/lib/firmware) e o controlador será
novamente carregado.

Nota

Os dispositivos que são pesquisados e quais os sistemas de ficheiros que são
suportados dependem da arquitetura, do método de instalação e da etapa da
instalação. Especialmente durante as etapas iniciais da instalação, o
carregamento de firmware é mais provável que tenha sucesso a partir de uma pen
USB formatada com FAT. Em i386 e em amd64 o firmware também pode ser carregado
a partir de um cartão SD ou MMC.

Note que é possível saltar o carregamento de firmware se souber que o
dispositivo também irá funcionar sem ele, ou se o dispositivo não for
necessário durante a instalação.

O debian-installer apenas pergunta pelo firmware necessário para os módulos do
kernel carregados durante a instalação. Nem todos os controladores estão
incluídos no debian-installer, em particular não está o radeon, isto implica
que as capacidades de alguns dispositivos podem não ser diferentes no final da
instalação do que eram no seu início. Consequentemente, algum do seu hardware
poderá não ser utilizado com todo o seu potencial. Se suspeitar que é o caso,
ou se estiver apenas curioso, não é má ideia verificar a saída do comando dmesg
no novo sistema acabado de arrancar e procurar por "firmware".

6.4.1. Preparar um meio

As imagens de instalação oficiais não incluem firmware não-livre. O método mais
comum para carregar este firmware é a partir de um suporte amovível como por
exemplo uma pen USB. Em alternativa, podem ser encontradas imagens de
instalação não oficiais com firmware não-livre em https://cdimage.debian.org/
cdimage/unofficial/non-free/cd-including-firmware/. Para preparar uma pen-USB
(ou outro suporte, tal como uma partição de um disco rígido), os ficheiros ou
pacotes de firmware têm de ser colocados no diretório raiz ou num diretório com
o nome /firmware do sistema de ficheiros do suporte. O sistema de ficheiros
recomendado para utilizar é o FAT, já que é o mais provável de ser suportado
durante as etapas iniciais da instalação.

Estão disponíveis ficheiros 'tarball' e zip, contendo os pacotes atuais para o
firmware mais comum, a partir de:

  • https://cdimage.debian.org/cdimage/unofficial/non-free/firmware/

Descarregue apenas o ficheiro 'tarball' ou o zip do lançamento correto e
descompacte-o para o sistema de ficheiros na media.

Se o firmware que necessitar não estiver incluído no tarball, pode também
descarregar pacotes de firmware específicos a partir (da seção non-free) do
arquivo. O seguinte resumo deve listar a maioria dos pacotes de firmware
disponíveis mas não é garantido que esteja completa e pode também conter
pacotes que não sejam de firmware:

  • https://packages.debian.org/search?keywords=firmware

Também é possível copiar ficheiros individuais de firmware para o suporte.
Ficheiros soltos de firmware podem ser obtidos por exemplo a partir de sistemas
já instalados ou a partir de um fabricante de hardware.

6.4.2. Firmware e o Sistema Instalado

Qualquer firmware carregado durante a instalação será automaticamente copiado
para o sistema instalado. Na maioria dos casos isto irá assegurar que o
dispositivo necessita que o firmware irá também funcionar corretamente após o
sistema ser reiniciado para o sistema já instalado. No entanto, se o sistema
instalado correr uma versão diferente do kernel da do instalador existe uma
ligeira hipótese do firmware não puder ser carregado devido à diferença de
versão.

Se o firmware foi carregado a partir de um pacote de firmware, o
debian-installer irá também instalar este pacotes no sistema instalado e irá
automaticamente acrescentar a seção 'non-free' do arquivo de pacotes ao
sources.list do APT. Isto tem a vantagem do firmware ser atualizado
automaticamente se estiver disponível uma nova versão.

Se for saltado o carregamento de firmware durante a instalação, o dispositivo
relevante irá provavelmente não funcionar no sistema instalado até o (pacote
de) firmware ser instalado manualmente.

Nota

Se o firmware foi carregado a partir de ficheiros de firmware soltos, o
firmware copiado para o sistema instalado não irá ser automaticamente
atualizado a menos que o pacote correspondente de firmware (se estiver
disponível) seja instalado após a instalação estar completada.

6.4.3. Completar o Sistema Instalado

Dependendo de como foi feita a instalação, pode ser que algum do firmware
necessário não tenha sido detetado durante a instalação, ou que o firmware
relevante não estivesse disponível, ou que tenha escolhido não instalar algum
do firmware nessa altura. Em alguns casos, uma instalação com sucesso pode
mesmo assim acabar com um ecrã em branco ou com a imagem imperceptível quando
reiniciar para o sistema instalado. Quando isso acontecer, pode tentar
ultrapassar assim:

  • Passar a opção nomodeset na linha de comandos do kernel. Isto pode ajudar
    arrancar num modo de "fallback graphics".

  • Utilizar a combinação de teclas Ctrl+Alt+F2 para mudar para o VT2, o qual
    poderá oferecer login numa linha de comandos funcional.

Uma vez no sistema instalado, é possível automatizar a deteção do firmware em
falta e tomar os passos necessários para o habilitar seguindo o seguinte
procedimento:

 1. Instalar o pacote isenkram-cli.

 2. Correr o comando isenkram-autoinstall-firmware como utilizador "root".

Normalmente, reiniciar é a forma mais simples de ter a certeza que todos os
módulos do kernel são devidamente inicializados; é particularmente importante
quando se arranca o sistema com a opção "nomodeset" como uma medida provisória.

Nota

Para a instalação de pacotes de firmware, é muito provável que necessite de
habilitar a seção non-free do arquivo de pacotes. Em Debian GNU/Linux 11.0,
correr o comando isenkram-autoinstall-firmware irá fazer isso automaticamente
ao criar um ficheiro dedicado (/etc/apt/sources.list.d/
isenkram-autoinstall-firmware.list), a apontar para um mirror genérico.

6.5. Personalização

Utilizando a shell (veja Secção 6.3.9.2, "Utilizar a Shell e Ver os Logs", o
processo de instalação pode ser cuidadosamente personalizado, para comportar
casos de utilização exceptional:

6.5.1. Instalar um sistema init alternativo

Debian utiliza systemd como o sistema init predefinido. No entanto, são
suportados outros sistemas init (tais como sysvinit e OpenRC), e o momento mais
fácil para escolher um sistema init alternativo é durante o processo de
instalação. Para instruções detalhadas acerca do como o fazer, por favor veja a
página Init no wiki Debian.


━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

^[6] Em termos técnicos: onde existem vários locales para essa linguagem com
códigos de país distintos.

^[7] Na prioridade média ou baixa pode sempre escolher o locale preferido a
partir dos que estão disponíveis para a linguagem escolhida (se existir mais do
que um).

^[8] 'Legacy locales' são locales que não utilizam UTF-8, mas um dos standards
de codificação de caracteres mais antigos tal como o ISO 8859-1 (utilizado para
linguagens da Europa Ocidental) ou EUC-JP (utilizado pelo Japonês).

^[9] O instalador irá encriptar o grupo de volumes LVM utilizando uma chave AES
de 256 bit e fazer uso do suporte "dm-crypt" do kernel

^[10] Para dizer a verdade, poderá construir um dispositivo MD mesmo a partir
de partições que estejam num único disco rígido, mas isso não trará quaisquer
benefícios.

^[11] Utilizar uma frase-chave como chave atualmente significa que a partição
será criada utilizando LUKS.

^[12] Acredita-se que os tipos das agências de três-letras podem restaurar os
dados mesmo após várias escritas em meios magneto-ópticos.

^[13] Note que o programa que realmente instala os pacotes tem o nome de dpkg.
No entanto, este programa é mais um ferramenta de mais baixo nível. O apt é uma
ferramenta de nível mais alto que irá invocar o dpkg conforme for apropriado.
Este sabe como obter pacotes do seu meio de instalação, da rede ou de outro
lado. Também é capaz de instalar automaticamente outros pacotes necessários
para que o pacote que pretende instalar funcione corretamente.

^[14] Deve saber que para apresentar esta lista, o instalador apenas invoca o
programa tasksel. O qual pode ser corrido em qualquer altura após a instalação
para instalar (ou remover) mais pacotes, ou pode utilizar uma ferramenta mais
elaborada tal como o aptitude. Se estiver à procura de um pacote específico,
após a instalação estar completa, simplesmente corra aptitude install pacote,
onde pacote é o nome do pacote que procura.

^[15] Isto é: carregue na tecla Alt à esquerda da barra de espaços e ao mesmo
tempo na tecla de função F2.

^[16] O seguinte comando irá remover uma entrada existente para uma máquina: 
ssh-keygen -R <nome da máquina|endereço IP>

Capítulo 7. A Iniciar O Seu Novo Sistema Debian

Índice

7.1. O Momento da Verdade
7.2. Montar volumes encriptados

    7.2.1. Diagnóstico de problemas

7.3. Log In

7.1. O Momento da Verdade

A primeira inicialização do seu sistema no seu todo é o que os engenheiros
eléctricos chamam de "teste de fumo".

Se fez uma instalação standard, a primeira coisa que deve ver quando arrancar o
sistema é o menu do gestor de arranque grub. As primeiras escolhas no menu
serão para arrancar o seu novo sistema Debian. Se tiver outros sistemas
operativos no seu computador (como o Windows) que tenham sido detetados pelo
sistema de instalação, estes serão listados abaixo no menu.

Se o sistema não arrancar corretamente, não entre em pânico. Se a instalação
teve sucesso, são boas as hipóteses em que apenas exista um problema
relativamente menor que evite o seu sistema arranque com Debian. Na maioria dos
casos tais problemas são corrigidos sem ter de repetir a instalação. Uma opção
disponível para corrigir problemas de arranque é utilizar o modo de recuperação
do instalador (veja a Secção 8.6, "Recuperar um Sistema Estragado").

Se é novo em Debian e Linux, pode necessitar de alguma ajuda de utilizadores
mais experientes. Para ajuda direta online pode tentar os canais de IRC #debian
e #debian-boot na rede OFTC. Em alternativa pode contactar a mailing list
debian-user. Pode também arquivar um relatório de instalação conforme é
descrito na Secção 5.4.7, "Submeter Relatórios de Instalação". Por favor
assegure-se que descreve o problema de forma clara e inclua quaisquer mensagens
que sejam mostradas que possam ajudar outros a diagnosticar o problema.

Se tiver outros sistemas operativos no seu computador que não sejam detetados
ou que não sejam detetados corretamente, por favor arquive um relatório de
instalação.

7.2. Montar volumes encriptados

Se criou volumes encriptados durante a instalação e associou-lhes pontos de
montagem, ser-lhe-á pedido para introduzir, durante o arranque, a frase-chave
para cada um desses volumes.

Para partições encriptadas utilizando o dm-crypt, durante o arranque, ser-lhe-á
mostrada a seguinte questão:

A iniciar discos encriptados iniciais... cryptpart_crypt(a iniciar)
Introduza a frase-chave do LUKS:

Na primeira linha da questão, part é o nome da partição em causa, e.g. sda2 ou
md0. Deve estar provavelmente a pensar para qual volume está a introduzir a
frase-chave. Relaciona-se com o seu /home? Ou com /var? Claro que, se tiver
apenas um volume encriptado, isto é fácil e pode apenas introduzir a
frase-chave que utilizou quando configurou este volume. Se durante a instalação
configurou mais do que um volume encriptado, as notas que escreveu na última
etapa em Secção 6.3.4.6, "Configurar Volumes Encriptados" vêm a calhar. Se não
tomou nota antes do mapeamento entre o part_crypt e os pontos de montagem,
ainda o pode encontrar em /etc/crypttab e /etc/fstab do seu novo sistema.

A pergunta pode parecer diferente quando um sistema de ficheiros raiz
encriptado está montado. Isto depende de que gerador de initramfs utilizado
para arrancar o sistema. O exemplo abaixo é para um initramfs gerado utilizando
initramfs-tools:

Inicio: A montar sistema de ficheiros raiz... ...
Inicio: A correr /scripts/local-top ...
Introduza a frase-passe do LUKS:

Não serão mostrados nenhuns caracteres (nem asteriscos) enquanto introduz a
frase-chave. Se introduzir a frase-chave errada, tem mais duas tentativas para
a corrigir. Após a terceira tentativa o processo de arranque irá saltar esse
volume e continuar a montar o próximo sistema de ficheiros. Para mais
informações por favor veja a Secção 7.2.1, "Diagnóstico de problemas".

Após introduzir todas as frases-passe o arranque deve continuar como
normalmente.

7.2.1. Diagnóstico de problemas

Se alguns dos volumes encriptados não poderem ser montados porque foi
introduzida uma frase-chave errada, após o arranque terá de os montar
manualmente. Existem vários casos.

  • O primeiro caso refere-se à partição raiz. Quando não está corretamente
    montada, o processo de arranque irá parar e terá de reiniciar o computador
    para tentar novamente.

  • O caso mais fácil é para volumes com dados encriptados tal como /home ou /
    srv. Pode simplesmente montá-los manualmente após o arranque.

    No entanto para dm-crypt isto é um pouco mais complicado. Primeiro tem que
    registar os volumes com o device mapper correndo:

    # /etc/init.d/cryptdisks start

    Isto irá pesquisar todos os volumes mencionados em /etc/crypttab e após
    introduzir as frases-chave corretas irá criar os dispositivos apropriados
    sob o diretório /dev. (os volumes já registados serão passados à frente,
    por isso pode repetir este comando várias vezes sem se preocupar.) Após o
    registo com sucesso pode simplesmente montar os volumes da forma habitual:

    # mount /mount_point

  • Se qualquer volume que contenha ficheiros não-críticos de sistema não puder
    ser montado (/usr ou /var), o sistema deve mesmo assim arrancar e você deve
    conseguir montar manualmente os volumes tal como no caso anterior. No
    entanto, também irá necessitar de (re)iniciar quaisquer serviços que correm
    normalmente no seu runlevel predefinido porque é muito provável que estes
    não tenham iniciado. A forma mais simples é reiniciar o computador.

7.3. Log In

Assim que o seu sistema arrancar, ser-lhe-á apresentada a linha de comandos de
login. Entre no sistema utilizando o seu nome de utilizador pessoal e a sua
palavra-passe que escolheu durante o processo de instalação. Agora o seu
sistema está pronto a ser utilizado.

Se é um novo utilizador, poderá querer explorar a documentação que já se
encontra instalada no seu sistema à medida que o começar a utilizar. Existem
atualmente diversos sistemas de documentação, e estão a ser feitos esforços no
sentido de integrar os diferentes tipo de documentação. Aqui estão alguns
pontos de partida.

A documentação que acompanha os programas que tem instalado pode ser encontrada
em /usr/share/doc/, sob um subdiretório com o nome do programa (ou, mais
precisamente, o pacote Debian que contém o programa). No entanto, documentação
mais completa é muitas vezes empacotada em separado em pacotes especiais de
documentação que na maioria não são instaladas por predefinição. Por exemplo, a
documentação acerca da ferramenta de gestão de pacotes apt pode ser encontrada
nos pacotes apt-doc ou apt-howto.

Adicionalmente, existem alguns diretórios especiais dentro da hierarquia /usr/
share/doc/. Os HOWTOs Linux estão instalados no formato (comprimido) .gz, em /
usr/share/doc/HOWTO/en-txt/. Após instalar o dhelp, irá encontrar um índice de
documentação navegável em /usr/share/doc/HTML/index.html.

Uma forma fácil de ver estes documentos utilizando um navegador de texto é
introduzir os seguintes comandos:

$ cd /usr/share/doc/
$ w3m .

O ponto após o comando w3m diz-lhe para mostrar o conteúdo do diretório atual.

Se tem instalado um ambiente de trabalho gráfico, também pode utilizar o seu
navegador web. Inicie o navegador web a partir do menu de aplicações e escreva
/usr/share/doc/ na barra de endereço.

Poderá também escrever info command ou man command para ver a documentação na
maioria dos comandos disponíveis na linha de comandos. Escrever help irá
apresentar uma ajuda nos comandos de shell. E escrever um comando seguido de
--help irá normalmente apresentar um resumo da forma de utilização desse
comando. Se o resultado de um comando passar o topo do ecrã, escreva | more
depois do comando para fazer com que os resultados parem depois de passar o
topo do ecrã. Para ver uma lista de todos os comandos necessários que começam
com uma determinada letra, digite a letra seguida de dois tabs.

Capítulo 8. Próximos Passos e Onde Ir a Partir Daqui

Índice

8.1. Desligar o sistema
8.2. Oriente-se em Debian

    8.2.1. Sistema de Pacotes Debian
    8.2.2. Software Adicional Disponível para Debian
    8.2.3. Aplicação de Gestão de Versões
    8.2.4. Gestão dos Cron Jobs

8.3. Leitura e Informação Adicional
8.4. Configurar o Seu Sistema Para Utilizar E-Mail

    8.4.1. Configuração Predefinida de E-Mail
    8.4.2. Enviar E-Mails Para Fora do Sistema
    8.4.3. Configurando o Mail Transport Agent Exim4

8.5. Compilando um Novo Kernel
8.6. Recuperar um Sistema Estragado

8.1. Desligar o sistema

Para desligar um sistema Debian GNU/Linux em execução, não deve reiniciar com o
botão de reset na parte da frente ou detrás do seu computador, ou simplesmente
desligar o computador. Debian GNU/Linux deve ser desligado de uma forma
controlada, caso contrário podem perder-se ficheiros e/ou pode-se danificar o
disco. Se correr um ambiente gráfico, normalmente está disponível uma opção
para fazer "log out" a partir do menu de aplicações que lhe permite desligar
(ou reiniciar) o sistema.

Em alternativa pode pressionar a combinação de teclas Ctrl+Alt+Del . Se a
combinação de teclas não funcionar, a última opção é entrar como root e
escrever os comandos necessários. Utilize reboot para reiniciar o sistema.
Utilize halt para parar o sistema sem o desligar ^[17] Para desligar a máquina,
use poweroff ou shutdown -h now. O sistema init de systemd proporciona comandos
adicionais que podem fazer as mesmas funções; por exemplo systemctl reboot ou 
systemctl poweroff.

8.2. Oriente-se em Debian

O Debian é ligeiramente diferente das outras distribuições. Mesmo se está
familiarizado com outras distribuições de Linux, há algumas coisas que deverá
saber sobre Debian para o ajudar a manter o seu sistema limpo e eficiente. Este
capítulo contém material para o orientar; não é intenção ser um tutorial sobre
como utilizar Debian, mas apenas um breve piscar de olhos do sistema, para os
muito apressados.

8.2.1. Sistema de Pacotes Debian

O conceito mais importante para realçar é o sistema de pacotes Debian. Na sua
essência, grande parte do seu sistema deve ser considerado sob o controlo do
sistema de pacotes. Incluem-se:

  • /usr (excluindo /usr/local)

  • /var (poderá fazer /var/local e ficar lá seguro)

  • /bin

  • /sbin

  • /lib

Por exemplo, se substituir /usr/bin/perl, isso irá funcionar, mas se fizer um
upgrade ao seu pacote perl , o ficheiro que lá puser irá ser substituído.
Utilizadores mais avançados poderão contornar isto, ao colocar pacotes como
hold no aptitude.

Um dos melhores métodos de instalação é o apt. Pode utilizar a versão de linha
de comandos do apt assim como ferramentas como o aptitude ou synaptic (que são
apenas frontends gráficos para o apt. Note que o apt também o deixa juntar as
seções main, contrib e non-free de forma a que possa ter, ao mesmo tempo,
pacotes restritos (estritamente falando, não pertencentes a Debian) assim como
pacotes de Debian GNU/Linux.

8.2.2. Software Adicional Disponível para Debian

Existem repositórios de software oficial e não-oficial que não estão ativos,
por predefinição, na instalação de Debian. Estes contém software que pode achar
importante ou que pode esperar ter. A informação destes repositórios adicionais
pode ser encontrada na página do Wiki Debian chamada Software Disponível para o
Lançamento Estável de Debian.

8.2.3. Aplicação de Gestão de Versões

Versões alternativas das aplicações são geridas por alternativas de
atualização. Se está a manter múltiplas versões das suas aplicações, leia a
página do manual update-alternatives.

8.2.4. Gestão dos Cron Jobs

Quaisquer tarefas debaixo do âmbito do administrador do sistema, devem estar
colocadas em /etc, uma vez que são ficheiros de configuração. Se tem um cron
job para root, para correr diariamente, semanalmente, ou mensalmente,
coloque-os em /etc/cron.{daily,weekly,monthly}. Estes serão invocados a partir
de /etc/crontab, e correrão por ordem alfabética o que os serializa.

Por outro lado, se tiver um cron job que (a) necessita de ser corrido como um
utilizador especial ou, (b) necessita ser corrido num tempo ou frequência
especiais, pode usar tanto /etc/crontab, ou, melhor ainda, /etc/cron.d/
whatever. Estes ficheiros também têm um campo extra que lhe permite estipular a
conta do utilizador que sob a qual corre o cron job.

Em qualquer um dos casos, basta editar os ficheiros e o cron irá notá-lo
automaticamente. Não há necessidade de correr um comando especial. Para mais
informação veja cron(8), crontab(5), e /usr/share/doc/cron/README.Debian.

8.3. Leitura e Informação Adicional

O website Debian contém uma grande quantidade de documentação acerca de Debian.
Veja em particular o Debian FAQ e a Referência Debian. Está disponível um
índice com mais documentação Debian a partir do Debian Documentation Project. A
comunidade Debian é auto-suportada; para subscrever uma ou mais mailing lists
Debian, veja a página Mail List Subscription. E por último, mas não menos
importante, os arquivos das Mailing Lists Debian contêm informação rica acerca
de Debian.

Se necessitar de informação sobre um programa em particular, deve tentar
primeiro o programa man programa, ou info programa.

Há uma grande quantidade de informação útil em /usr/share/doc. Em particular, /
usr/share/doc/HOWTO e /usr/share/doc/FAQ contêm grande quantidade de informação
interessante. Para enviar bugs, veja o ficheiro /usr/share/doc/debian/bug*.
Para ler sobre assuntos específicos de Debian relativos a determinados
programas, veja o ficheiro /usr/share/doc/(package name)/README.Debian.

Uma fonte genérica de informação sobre GNU/Linux é o Projeto de Documentação
Linux. Aí, irá encontrar HOWTOs e caminhos para outras informações valiosas
sobre partes de um sistema GNU/Linux.

Linux é uma implementação de Unix. O Linux Documentation Project (LDP) recolhe
uma série de HOWTOs e livros online relacionados com Linux.

Se você é novo em Unix, provavelmente deverá sair, comprar alguns livros e
fazer algumas leituras. Esta lista de FAQs de Unix contém uma série de
documentos da UseNet que disponibilizam boas referências históricas.

8.4. Configurar o Seu Sistema Para Utilizar E-Mail

Hoje em dia, o email é uma parte importante da vida de muitas pessoas. Como
existem muitas opções para o configurar, e estar corretamente configurado é
importante para alguns utilitários em Debian, nós tentaremos cobrir o básico
nesta seção.

Existem três funções principais que compõem um sistema de e-mail. Primeiro
existe o Mail User Agent (MUA) que é o programa que o utilizador utiliza para
escrever e para ler mails. Depois existe o Mail Transfer Agent (MTA) que toma
conta da transferência de mensagens de um computador para outro. E por último
existe o Mail Delivery Agent (MDA) que toma conta da entrega do mail que chega
á caixa de correio do utilizador.

Estas três funções podem ser executadas por programas distintos, mas eles
também podem ser combinados em um ou dois programas. Também é possível ter
diferentes programas para lidar com estas funções para diferentes tipos de
mail.

Em sistemas Linux e Unix o mutt é historicamente uma MUA muito popular. Tal
como a maioria dos programas tradicionais de Linux é em modo de texto. É muitas
vezes utilizado em combinação com o exim ou com o sendmail como MTA e com o 
procmail como MDA.

Com a crescente popularidade dos sistemas desktop gráficos, a utilização de
programas de e-mail gráficos, tais como o evolution do GNOME, o kmail do KDE ou
o thunderbird tornaram-se mais populares. Estes programas combinam as funções
de um MUA, MTA e MDA, mas podem -- e muitas vezes são -- também utilizados em
combinação com as ferramentas tradicionais de Linux.

8.4.1. Configuração Predefinida de E-Mail

Mesmo que esteja a planear utilizar um programa de mail gráfico, poderá ser
útil, ter um MTA/MDA tradicional instalado e corretamente configurado no seu
sistema Debian GNU/Linux. A razão é que vários utilitários que correm no
sistema^[18] podem enviar avisos importantes por e-mail para informar o
administrador do sistema de (potenciais) problemas ou alterações.

Por isto pode instalar exim4 e mutt com apt install exim4 mutt. O exim4 é uma
combinação de MTA/MDA que é relativamente pequena mas muito flexível. Por
predefinição será configurado para lidar apenas com e-mail local ao próprio
sistema e e-mails endereçados ao administrador de sistema (conta root) serão
entregues á conta de utilizador normal criada durante a instalação^[19].

Quando os e-mails são entregues são acrescentados a um ficheiro /var/mail/
nome_da_conta. Os e-mails podem ser lidos utilizando o mutt.

8.4.2. Enviar E-Mails Para Fora do Sistema

Tal como foi mencionado anteriormente, o sistema Debian instalado é configurado
para lidar apenas com e-mail local ao sistema, e não para enviar e-mail para
outros nem para receber mail de outros.

Se quiser que o exim4 lide com e-mail externo, veja a sub-seção seguinte para
as opções de configuração básica disponíveis. Certifique-se que testa se o mail
pode ser corretamente enviado e recebido.recebido.

Se tencionar utilizar um programa de mail gráfico e utilizar um servidor de
mail do seu Provedor de Serviço de Internet (ISP) ou da sua empresa, não há
necessidade de configurar o exim4 para lidar com e-mail externo. Configure
apenas o seu programa de mail gráfico para utilizar os servidores corretos para
enviar e para receber e-mail (como, está fora do âmbito deste manual).

No entanto, nesse caso pode ter de configurar utilitários individuais para
enviar e-mails corretamente. Um desses utilitários é o reportbug, um programa
que facilita a submissão de relatos de bugs acerca de pacotes Debian. Por
predefinição este espera ser capaz de utilizar o exim4 para submeter relatos de
bugs.

Para configurar corretamente o reportbug para utilizar um servidor de mail
externo, por favor corra o comando reportbug --configure e responda "não" à
questão se está disponível um MTA. Então ser-lhe-á questionado por um servidor
de SMTP para ser utilizado para submeter relatórios de bugs.

8.4.3. Configurando o Mail Transport Agent Exim4

Se quiser que o seu sistema também lide com e-mail externo, irá necessitar de
reconfigurar o pacote exim4^[20]:

# dpkg-reconfigure exim4-config

Após introduzir esse comando (como root), ser-lhe-á perguntado se deseja
dividir a configuração em pequenos ficheiros. Se não tiver a certeza, escolha a
opção predefinida.

De seguida ser-lhe-ão apresentados vários cenários comuns. Escolha o que mais
se aproxima das suas necessidades.

site de internet

    O seu sistema está ligado a uma rede e o seu correio é enviado e recebido
    diretamente usando o SMTP. Nos ecrãs seguintes ser-lhe-ão colocadas algumas
    questões básicas, como o nome para o correio da sua máquina, ou uma lista
    de domínios para os quais deseja aceitar e encaminhar o correio.

correio enviado por smarthost

    Neste cenário o seu mail de saída é encaminhado para outra máquina, chamada
    de "smarthost", que se encarrega de enviar a mensagem para o seu destino. O
    smarthost normalmente também guarda o mail que chega endereçado ao seu
    computador, para que não necessite de estar sempre online. Isso também
    significa que tem de fazer o download do seu mail a partir do smarthost com
    programas como o fetchmail.

    Em muitos casos o smarthost será o servidor de mail do seu ISP, o que torna
    esta opção muito indicada para utilizadores com dial-up. Pode também ser o
    servidor de mail de uma empresa, ou mesmo outro sistema na sua rede.

mail enviado pelo smarthost; sem mail local

    Esta opção é basicamente a mesma que a anterior excepto que o sistema não
    será configurado para lidar com mail para um domínio de e-mail local. Mail
    do próprio sistema (e.g. para o administrador de sistema) será na mesma
    tratado.

distribuição local apenas

    Esta é a opção, predefinida, com a qual o seu sistema é configurado.

sem configuração neste momento

    Escolha esta opção se está absolutamente convencido de que sabe o que está
    a fazer. Esta opção irá deixar-lhe com o sistema de correio desconfigurado
    -- até que o configure, não será capaz de enviar ou receber qualquer mail e
    pode perder algumas mensagens importantes dos utilitários do seu sistema.

Se nenhum destes cenários se adequa ás suas necessidades, ou se necessitar de
uma configuração mais detalhada, após a instalação estar concluída terá de
editar os ficheiros de configuração sob o diretório /etc/exim4. Pode ser
encontrada mais informação acerca do exim4 sob /usr/share/doc/exim4; o ficheiro
README.Debian.gz tem mais detalhes acerca de como configurar o exim4 e explica
onde encontrar documentação adicional.

Note que enviar mail diretamente para a Internet quando não tem um nome de
domínio oficial, pode resultar no seu mail ser rejeitado devido a medidas de
anti-spam nos servidores que o recebem. É preferível utilizar o servidor de
mail do seu ISP. Se mesmo assim quiser enviar mail diretamente, pode querer
utilizar um endereço de e-mail diferente do que é gerado pela predefinição. Se
utilizar o exim4 como o seu MTA, isto é possível acrescentando uma entrada em /
etc/email-addresses.

8.5. Compilando um Novo Kernel

Porque alguém quererá compilar um novo kernel? O mais provável é não ser
necessário, já que o kernel distribuído com Debian lida com a maior parte das
configurações.

Se mesmo assim desejar compilar o seu próprio kernel, isto é obviamente
possível e recomendamos a utilização do alvo "make deb-pkg". Para mais
informações leia o Debian Linux Kernel Handbook.

8.6. Recuperar um Sistema Estragado

Por vezes, as coisas correm mal, e o sistema que instalou cuidadosamente já não
arranca. Talvez a configuração do gestor de arranque se tenha estragado
enquanto experimentava uma alteração, ou talvez o novo kernel que instalou não
arranque, ou talvez raios cósmicos tenham atingido o seu disco rígido e tenham
trocado um bit em /sbin/init. Seja qual for a causa, necessita de um sistema
para trabalhar de forma a corrigir, e o modo de recuperação pode ser útil para
isto.

Para aceder ao modo de recuperação, escolha rescue no menu de arranque, ou
escreva rescue na linha de comandos boot:, ou arranque com o parâmetro de
arranque rescue/enable=true. Ser-lhe-ão mostrados os primeiros ecrãs do
instalador, com uma nota no canto do ecrã a indicar que está em modo de
recuperação, e não em modo de instalação completa. Não se preocupe, o seu
sistema não está prestes a ser sobreescrito! O modo de recuperação apenas tira
partido das capacidades de deteção de hardware disponíveis no instalador para
se certificar que os seus discos, dispositivos de rede, e por aí fora estão
disponíveis para si enquanto reparar o seu sistema.

Em vez da ferramenta de particionamento, deve ser-lhe apresentada uma lista das
partições no seu sistema, e ser-lhe-á pedido que selecione uma delas.
Normalmente, deverá escolher a partição que contém o sistema de ficheiros raiz
que necessita de reparar. Pode escolher partições em dispositivos RAID e LVM
assim como as criadas diretamente nos discos.

Se possível, o instalador irá agora apresentar-lhe uma linha de comandos da
shell no sistema de ficheiros que selecionou, o qual pode utilizar para
executar quaisquer reparações necessárias. Por exemplo, se necessitar de
reinstalar o gestor de arranque GRUB no master boot record do primeiro disco,
pode introduzir o comando grub-install '(hd0)' para o fazer.

Se o instalador não conseguir correr uma shell utilizável no sistema de
ficheiros raiz que escolheu, talvez seja porque o sistema de ficheiros está
corrompido, então irá lançar um aviso e oferecer-se para em vez disso dar-lhe
uma shell no ambiente do instalador. Poderá não ter tantos utilitários
disponíveis neste ambiente, mas na maioria das vezes serão suficientes para
reparar o seu sistema. O sistema de ficheiros raiz que selecionou será montado
no diretório /target.

Em qualquer dos casos, após você sair da shell, o sistema irá reiniciar.

Finalmente, note que reparar sistemas estragados pode ser difícil, e este
manual não tenta desenvolver todas as coisas que possam ter corrido mal e como
as corrigir. Se você tiver problemas, consulte um especialista.


━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

^[17] Num sistema init SysV halt tinha o mesmo efeito que poweroff, mas com
systemd como sistema init (o predefinido desde o Jessie) os seus efeitos são
diferentes.

^[18] São exemplos: cron, quota, logcheck, aide, ...

^[19] O encaminhamento do mail de root para a conta de utilizador normal é
configurado em /etc/aliases. Se não tiver sido criada nenhuma conta de
utilizador normal, o mail irá, claro, ser entregue para a própria conta root.

^[20] Pode, claro, também remover o exim4 e substitui-lo por um MTA/MDA
alternativo.

Apêndice A. Howto de Instalação

Índice

A.1. Preliminares
A.2. Iniciar o instalador

    A.2.1. Disco Óptico
    A.2.2. Pen de memória USB
    A.2.3. Iniciar a partir da rede
    A.2.4. Iniciar de disco rígido

A.3. Instalação
A.4. Envie-nos um relatório de instalação
A.5. E finalmente...

Este documento descreve como instalar Debian GNU/Linux bullseye para 64-bit PC
("amd64") com o novo debian-installer. É uma rápida passagem pelo processo de
instalação que deve conter toda a informação que precisa para a maioria das
instalações. Quando mais informação puder ser útil, nós iremos mostrar a
ligação para explicações mais detalhadas noutras partes deste documento.

A.1. Preliminares

Se encontrar bugs durante a instalação, por favor consulte a Secção 5.4.7,
"Submeter Relatórios de Instalação" para instruções em como os relatar. Se
tiver questões que não são respondidas por este documento, por favor envie-as
para a lista de mail debian-boot (debian-boot@lists.debian.org) ou pergunte no
IRC (#debian-boot na rede OFTC).

A.2. Iniciar o instalador

A equipa debian-cd disponibiliza, na página de CDs/DVDs Debian, compilações de
imagens de instalação que utilizam o debian-installer. Para mais informação
sobre onde obter as imagens de instalação, veja a Secção 4.1, "Imagens de
instalação oficiais de Debian GNU/Linux".

Alguns métodos de instalação necessitam de outras imagens diferentes das dos
meios ópticos. A Secção 4.2.1, "Onde Encontrar Ficheiros de Instalação" explica
como encontrar imagens nos mirrors Debian.

As subseções abaixo irão dar os detalhes sobre qual das imagens deverá utilizar
para cada possível meio de instalação.

A.2.1. Disco Óptico

A imagem de CD netinst é uma imagem popular que pode ser utilizada para
instalar bullseye com o debian-installer. Este método de instalação destina-se
a arrancar a partir da imagem e instalar pacotes adicionais através da rede;
daí o nome "netinst". A imagem tem os componentes de software necessários para
correr o instalador e pacotes base para disponibilizar um sistema bullseye
mínimo. Se preferir, pode obter uma imagem de CD/DVD completo, a qual não
necessitará de rede para a instalação. Irá necessitar apenas da primeira imagem
do conjunto.

Descarregue o tipo que preferir e grave-o para um disco óptico. Para arrancar a
partir do disco, poderá ter de alterar a configuração da sua BIOS/UEFI,
conforme é explicado na Secção 3.6.1, "Invocar o Menu de Configuração da BIOS/
UEFI".

A.2.2. Pen de memória USB

É também possível instalar a partir de um dispositivo amovível USB. Por
exemplo, uma pen USB pode fazer um meio de instalação de Debian bastante útil
que poderá transportar para todo lado.

A forma mais fácil de preparar a sua pen USB é obter qualquer imagem de CD ou
de DVD que caiba lá, e escrever a imagem diretamente para a pen. Claro que isto
irá destruir tudo o que já esteja na pen. Isto funciona porque as imagens de CD
/DVD de Debian são imagens "isohybrid" que podem arrancar quer a partir de
discos ópticos, quer a partir de pens USB.

Existem outras formas mais flexíveis para preparar a pen USB para utilizar o
instalador debian, e é possível que funcione com uma pen de memória de menor
capacidade. Para detalhes, visite a Secção 4.3, "Preparar Ficheiros para
iniciar a partir de pen USB".

Enquanto que arrancar a partir de armazenamento USB é bastante comum em
sistemas UEFI, isto é diferente no mundo da antiga BIOS. Algumas BIOS podem
arrancar diretamente do armazenamento USB, e outras não. Poderá ter que
configurar a sua BIOS/UEFI para ativar "USB legacy support" ou "Legacy support"
. O menu de escolha do dispositivo de arranque deverá mostrar "removable drive"
ou "USB-HDD" para que arranque a partir de um dispositivo USB. Para dicas úteis
e detalhes, veja a Secção 5.1.1, "Arrancar a partir de pen USB".

A.2.3. Iniciar a partir da rede

Também é possível iniciar o debian-installer totalmente a partir da rede. Os
vários métodos para netboot dependem da arquitetura e da configuração de
netboot. Os ficheiros em netboot/ podem ser utilizados para netboot
debian-installer.

A coisa mais simples para configurar é provavelmente o PXE netbooting.
Descomprimir o ficheiro netboot/pxeboot.tar.gz para /srv/tftp ou para onde for
mais apropriado para o seu servidor tftp. Configurar o seu servidor DHCP para
passar o nome do ficheiro pxelinux.0 aos clientes, e com sorte tudo estará
simplesmente a funcionar. Para instruções detalhadas, veja a Secção 4.5,
"Preparar Ficheiros para Arrancar Através da Rede por TFTP".

A.2.4. Iniciar de disco rígido

É possível iniciar o instalador sem utilizar dispositivos amovíveis, apenas com
um disco rígido existente, o qual poderá ter um sistema operativo diferente.
Obtenha hd-media/initrd.gz, hd-media/vmlinuz, e uma imagem de CD/DVD Debian
para o diretório raiz do seu disco rígido. Certifique-se que a imagem tem um
ficheiro cujo o nome termina em .iso. Agora é só uma questão de iniciar o linux
com o initrd. A Secção 5.1.5, "A arrancar a partir de Linux utilizando GRUB"
explica uma forma de o fazer.

A.3. Instalação

Assim que o instalador iniciar, irá será saudado com um ecrã inicial. Carregue
na tecla Enter para arrancar, ou leia as instruções para os outros métodos de
arranque e parâmetros (veja a Secção 5.3, "Parâmetros de Arranque").

Ao fim de algum tempo ir-lhe-á ser pedido para selecionar a sua linguagem.
Utilize as teclas de cursor para escolher a linguagem e pressione a tecla Enter
para continuar. Em seguida irá ser pedido para selecionar o país, com opções
que incluem onde a sua linguagem é falada. Se não o encontrar nessa pequena
lista, está disponível uma lista com todos os países do mundo.

Ser-lhe-á pedido para confirmar a disposição do teclado. Escolha o predefinido,
a menos que conheça outro melhor.

Agora sente-se enquanto o instalador debian deteta algum do seu hardware, e
carrega o resto da imagem de instalação.

De seguida o instalador irá tentar detetar o hardware de rede e configurar a
ligação por DHCP. Se não estiver numa rede ou não tiver DHCP, ser-lhe-á dada a
oportunidade para configurar manualmente a rede.

A configuração da rede é seguida da criação das contas de utilizador. A
predefinição é pedir para indicar uma palavra-passe para a conta "root"
(administrador) e a informação necessária para criar uma conta de utilizador
normal. Se não especificar uma palavra-passe para o utilizador "root" esta
conta será desabilitada mas o pacote sudo será instalado posteriormente para
permitir que sejam executadas as tarefas administrativas no novo sistema. É
predefinido à primeira conta de utilizador criada no sistema ser-lhe permitido
utilizar o comando sudo para se tornar root.

A próxima etapa é acertar o relógio e o fuso horário. O instalador irá tentar
contactar na Internet um servidor de horas para se assegurar que o relógio é
corretamente acertado. O fuso horário é baseado no país escolhido anteriormente
e o instalador apenas lhe irá pedir para escolher um se o seu país tiver vários
fusos horários.

Agora é o momento de particionar os seus discos. Primeiro ser-lhe-á dada a
oportunidade de particionar automaticamente o disco inteiro, ou o espaço livre
disponível num dispositivo (veja a Secção 6.3.4.2, "Particionamento Guiado").
Isto é recomendado para novos utilizadores ou para alguém com pressa. Se não
quiser um particionamento automático, escolha a opção Manual do menu.

Se tiver uma partição de Windows ou DOS que queira preservar, seja cuidadoso
com o particionamento automático. Se optar pelo particionamento manual, poderá
utilizar o instalador para redimensionar as partições FAT ou NTFS existentes
para criar espaço para instalar o Debian: selecione a partição e especifique um
novo tamanho.

No ecrã seguinte irá ver a sua tabela de partições, como irão ser formatadas, e
onde irão ser montadas. Selecione uma partição para a modificar ou apagar. Se
fez o particionamento automático deverá poder escolher Terminar particionamento
e escrever alterações no disco do menu que utilizou para as criar. Lembre-se de
atribuir pelo menos uma partição para espaço de swap e montar uma partição em
/. Por favor veja o Apêndice C, Particionar para Debian; o apêndice Apêndice C,
Particionar para Debian tem mais informações gerais acerca do particionamento.

Agora o debian-installer formata as partições e começa a instalar o sistema
base, que poderá levar algum tempo. Será seguido da instalação do kernel.

O sistema base que foi previamente instalado é uma instalação funcional, mas
mínima. Para tornar o sistema mais funcional a próxima etapa é permitir-lhe
instalar pacotes adicionais escolhendo tarefas. Antes dos pacotes poderem ser
escolhidos, o apt necessita de ser configurado já que isso define a partir de
onde são obtidos os pacotes. A tarefa "Sistema Standard" será escolhida por
omissão e geralmente deve ser instalada. Escolha a tarefa "Ambiente Desktop" se
quiser ter um ambiente gráfico após a instalação. Para informação adicional
acerca desta etapa veja a Secção 6.3.6.2, "Escolher e Instalar Software".

A última etapa é instalar um gestor de arranque. Se o instalador detetar outros
sistemas operativos no seu computador, irá adicioná-los ao menu de arranque e
notificá-lo. Por predefinição será instalado o GRUB na partição UEFI/master
boot record do disco primário, o que por norma é uma boa escolha. Ser-lhe-á
dada a oportunidade para alterar essa opção e instalar noutro sítio.

debian-installer irá agora informar que a instalação terminou. Retire o CD ou
outro meio de arranque e carregue na tecla Enter para reiniciar a sua máquina.
Deverá arrancar no novo sistema instalado e permitir-lhe o acesso, que é
explicado no Capítulo 7, A Iniciar O Seu Novo Sistema Debian.

Se precisar de mais informação sobre o processo de instalação, visite o
Capítulo 6, Utilizar o Instalador Debian.

A.4. Envie-nos um relatório de instalação

Se completou com sucesso uma instalação com o debian-installer. por favor
utilize algum tempo para nos disponibilizar um relatório. O modo mais simples
de o fazer é instalar o pacote reportbug (apt install reportbug), configurar o
reportbug como é explicado na Secção 8.4.2, "Enviar E-Mails Para Fora do
Sistema", e correr reportbug installation-reports.

Se não completou a instalação, provavelmente encontrou um bug no instalador de
debian. Para melhorar o instalador é necessário que tenhamos conhecimento
destes, por favor use algum tempo para reportar. Poderá utilizar o relatório de
instalação para nos reportar problemas; se a instalação falhar completamente,
veja a Secção 5.4.6, "Relatar Problemas de Instalação".

A.5. E finalmente...

Esperamos que a sua instalação de Debian seja agradável e que considere o
Debian útil. Poderá querer ler o Capítulo 8, Próximos Passos e Onde Ir a Partir
Daqui.

Apêndice B. Automatizar a instalação utilizando preseeding

Índice

B.1. Introdução

    B.1.1. Métodos de preseed
    B.1.2. Limitações

B.2. Utilizar o preseed

    B.2.1. Carregar o ficheiro de pré-configuração
    B.2.2. Utilizar parâmetros de arranque para fazer preseed a questões
    B.2.3. Modo Auto
    B.2.4. Abreviaturas úteis com o preseed
    B.2.5. Exemplos de preseeding pela linha de comandos de arranque
    B.2.6. Utilizar um servidor de DHCP para especificar ficheiros de
        pré-configuração

B.3. Criar um ficheiro de pré-configuração
B.4. Conteúdo do ficheiro de pré-configuração (para bullseye)

    B.4.1. Localização
    B.4.2. Configuração de rede
    B.4.3. Consola de rede
    B.4.4. Parâmetros do mirror
    B.4.5. Configuração de contas
    B.4.6. Configuração do relógio e fuso horário
    B.4.7. Particionamento
    B.4.8. Instalação do sistema base
    B.4.9. Configuração do Apt
    B.4.10. Seleção de pacotes
    B.4.11. Instalação do gestor de arranque
    B.4.12. A terminar a instalação
    B.4.13. Preseed de outros pacotes

B.5. Opções avançadas

    B.5.1. Executar comandos personalizados durante a instalação
    B.5.2. Utilizar o preseed para alterar valores predefinidos
    B.5.3. Carregamento em série dos ficheiros de pré-configuração

Este apêndice explica como fazer preseed ás respostas das questões no
debian-installer para automatizar a sua instalação.

Os fragmentos da configuração utilizados neste apêndice também estão
disponíveis como ficheiro de exemplo de pré-configuração a partir de ../
example-preseed.txt.

B.1. Introdução

O preseed disponibiliza uma forma de dar as respostas às questões colocadas
durante o processo de instalação, sem ter de as escrever manualmente enquanto
estiver a decorrer a instalação. Isto torna possível automatizar totalmente a
maioria dos tipos de instalação e mesmo oferecer algumas funcionalidades que
não estão disponíveis durante as instalações normais.

O peseeding não é necessário. Se está a utilizar um ficheiro de preseed vazio,
o instalador irá comportar-se da mesma formado que numa instalação manual
normal. A cada questão a que fizer preseed irá (sim, percebeu bem) modificar a
instalação de alguma forma a partir da base.

B.1.1. Métodos de preseed

Existem três métodos que podem ser utilizados para fazer preseed: initrd,
ficheiro e rede. O preseed através de initrd irá funcionar com qualquer método
de instalação e suporta preseed de mais coisas, mas é o que requer maior
preparação. O preseeding por ficheiro e rede podem ser utilizados com
diferentes métodos de instalação.

A seguinte tabela mostra quais os métodos de preseed que podem ser utilizados
com que métodos de instalação.

┌────────────────────────────────────────────┬─────────┬───────────┬──────────┐
│            Método de instalação            │ initrd  │ ficheiro  │   rede   │
├────────────────────────────────────────────┼─────────┼───────────┼──────────┤
│CD/DVD/USB                                  │sim      │sim        │sim^[a]   │
├────────────────────────────────────────────┼─────────┼───────────┼──────────┤
│netboot                                     │sim      │não        │sim       │
├────────────────────────────────────────────┼─────────┼───────────┼──────────┤
│hd-media (incluindo stick usb)              │sim      │sim        │sim^[a]   │
├────────────────────────────────────────────┴─────────┴───────────┴──────────┤
│^[a] mas apenas se tiver acesso à rede, e definir preseed/url de forma       │
│apropriada.                                                                  │
└─────────────────────────────────────────────────────────────────────────────┘

Uma diferença importante entre os métodos de preseed é o momento em que o
ficheiro de pré-configuração é carregado e processado. Para o preseed por
initrd isto acontece logo no início da instalação, mesmo antes de ser colocada
a primeira questão. Preseeding a partir da linha de comandos do kernel acontece
logo após. É por isso possível ultrapassar a configuração definida no initrd ao
editar a linha de comandos do kernel (quer na configuração do gestor de
arranque ou manualmente no arranque para os gestores de arranque que o
permitam). Para o preseed por ficheiro isto acontece após ter sido carregada a
imagem de instalação. Para o preseed por rede acontece apenas após ter sido
configurada a rede.

Importante

Obviamente, a quaisquer questões que tenham sido processadas antes do ficheiro
de pré-configuração ter sido carregado, não pode ser feito o preseed (isto
inclui questões que são apenas mostradas em prioridades média e baixa, tal como
a primeira ronda de deteção de hardware). Uma forma não muito conveniente de
evitar essas questões é fazer o preseed a partir dos parâmetros de arranque,
tal como é descrito na Secção B.2.2, "Utilizar parâmetros de arranque para
fazer preseed a questões".

De modo a evitar facilmente questões que normalmente iriam aparecer antes de
ocorrer o preseed, pode iniciar o instalador em modo "auto". Isto atrasa as
questões que normalmente seriam colocadas muito cedo para lhes ser feito o
preseed (i.e. linguagem, país e seleção de teclado) até ter rede, permitindo
assim que lhes seja feito o preseed. Também corre a instalação na prioridade
crítica, a qual previne a colocação de muitas questões pouco importantes. Para
detalhes veja a Secção B.2.3, "Modo Auto".

B.1.2. Limitações

Embora possa ser feito preseed à maioria das questões utilizadas pelo
debian-installer utilizando este método existem algumas notáveis excepções. Tem
de (re)particionar um disco completo ou utilizar o espaço vazio disponível num
disco; não é possível utilizar partições já existentes.

B.2. Utilizar o preseed

Primeiro tem de criar um ficheiro de pré-configuração e colocá-lo no local a
partir de onde o pretende utilizar. A criação do ficheiro de pré-configuração é
descrita mais á frente neste apêndice. Colocá-lo no local correto é
razoavelmente simples para o preseed por rede ou se desejar, ler o ficheiro a
partir de uma pen usb. Se desejar incluir o ficheiro numa imagem ISO de
instalação, terá de reconstruir a imagem. Como ter o ficheiro de
pré-configuração incluído no initrd está fora do âmbito deste documento; por
favor consulte a documentação dos developers para o debian-installer.

Um exemplo de ficheiro de pré-configuração que pode utilizar como base para o
seu próprio ficheiro de pré-configuração está disponível a partir de ../
example-preseed.txt. Este ficheiro é baseado nos fragmentos de configuração
incluídos neste apêndice.

B.2.1. Carregar o ficheiro de pré-configuração

Se estiver a utilizar o preseed por initrd tem apenas de certificar-se que um
ficheiro chamado preseed.cfg foi incluído no diretório raiz do initrd. O
instalador irá automaticamente verificar se este ficheiro está presente e
carregá-lo.

Para os outros métodos de preseed tem de indicar ao instalador qual o ficheiro
a utilizar quando o arranca. Isto é normalmente feito ao passar um argumento de
arranque ao kernel, quer manualmente no arranque do sistema ou ao editar o
ficheiro de configuração do gestor de arranque (p.e. syslinux.cfg) e adicionar
esse parâmetro ao final da(s) linha(s) de "append" para o kernel.

Se especificar um ficheiro de pré-configuração na configuração do gestor de
arranque, você pode alterar a configuração de modo a não precisar de carregar
em enter para arrancar o instalador. Para o syslinux isto significa indicar o
'timeout' para 1 em syslinux.cfg.

Para ter a certeza que o instalador obtém o ficheiro de pré-configuração
correto, opcionalmente pode especificar um checksum para esse ficheiro.
Atualmente este tem de ser um 'md5sum', e se for especificado deve coincidir
com o ficheiro de pré-configuração ou o instalador irá recusar-se a utilizá-lo.

Parâmetros de arranque a especificar:
- se estiver a arrancar pela rede:
  preseed/url=http://host/caminho/para/preseed.cfg
  preseed/url/checksum=5da499872becccfeda2c4872f9171c3d
- ou
  preseed/url=tftp://host/caminho/para/preseed.cfg
  preseed/url/checksum=5da499872becccfeda2c4872f9171c3d

- se estiver a arrancar uma imagem de instalação reconstruída:
  preseed/file=/cdrom/preseed.cfg
  preseed/file/checksum=5da499872becccfeda2c4872f9171c3d

- se estiver a instalar por um meio USB (coloque o
  ficheiro de pré-configuração no diretório raiz da pen USB):
  preseed/file=/hd-media/preseed.cfg
  preseed/file/checksum=5da499872becccfeda2c4872f9171c3d

Note que quando são passados como parâmetros de arranque preseed/url pode ser
abreviado para apenas url, preseed/file para file preseed/file/checksum para
preseed-md5.

B.2.2. Utilizar parâmetros de arranque para fazer preseed a questões

Se um ficheiro de pré-configuração não puder ser utilizado para fazer preseed a
algumas etapas, a instalação pode mesmo assim ser totalmente automatizada, pois
pode passar valores de preseed na linha de comandos quando arrancar o
instalador.

Os parâmetros de arranque também podem ser utilizados se não quiser mesmo
utilizar o preseed, mas apenas quiser fornecer uma resposta a uma questão
específica. Alguns exemplos onde isto pode ser útil estão documentados noutro
local deste manual.

Para definir um valor para ser utilizado dentro do debian-installer, passe
apenas caminho/para/variável=valor para quaisquer das variáveis de preseed
listadas nos exemplos neste apêndice. Se um valor é para ser utilizado para
configurar pacotes para o sistema alvo, terá de acrescentar antes o dono^[21]
da variável como em dono:caminho/para/variável=valor. Se não especificar o
dono, o valor da variável não será copiado para a base de dados debconf no
sistema alvo e assim ficará por utilizar durante a configuração do pacote
relevante.

Normalmente, fazer preseed, desta forma, a uma questão significa que a questão
não será colocada. Para definir um valor por omissão específico para uma
questão, mas mesmo assim a questão ser colocada, utilize "?=" como operados em
vez de "=". Veja também a Secção B.5.2, "Utilizar o preseed para alterar
valores predefinidos".

Note que algumas variáveis que são frequentemente definidas na linha de
comandos de arranque têm uma abreviatura. Se estiver disponível uma
abreviatura, será utilizada nos exemplos deste apêndice em vez da variável
completa. Por exemplo, a variável preseed/url tem a abreviatura url. Outro
exemplo é a abreviatura tasks, que se traduz como tasksel:tasksel/first.

Um "---" nas opções de arranque tem um significado especial. Os parâmetros do
kernel que aparecem depois do último "---" podem ser copiados para a
configuração do gestor de arranque no sistema instalado (se for suportado pelo
instalador para o gestor de arranque). O instalador irá filtrar automaticamente
quaisquer opções (tais como opções de pré-configuração) que reconheça.

Nota

Os kernel atuais (2.6.9 e posteriores) aceitam um máximo de 32 argumentos pela
linha de comandos e 32 variáveis de ambiente, incluindo quaisquer opções
acrescentadas por predefinição ao instalador. Se estes números forem excedidos,
o kernel irá fazer "panic" (estourar). (Para kernels anteriores, estes números
eram mais baixos.)

Para a maioria das instalações algumas das escolhas por omissão no ficheiro de
configuração do bootlader, como por exemplo vga=normal, podem ser removidas de
forma segura e irá permitir adicionar mais opções para o preseeding.

Nota

Pode não ser sempre possível especificar valores com espaços para os parâmetros
de arranque, mesmo que os delimite com aspas.

B.2.3. Modo Auto

Existem várias funcionalidades do Instalador de Debian que se combinam para
permitirem linhas de comandos simples na linha de comandos de arranque para
resultarem em complexas instalações personalizadas automáticas.

Isto é ativado ao escolher no arranque a opção Automated install, também
chamada de auto em algumas arquiteturas ou métodos de arranque. Nesta seção,
auto não é um parâmetro, significa escolher essa opção de arranque, e
acrescentar os seguintes parâmetros de arranque na linha de comandos de
arranque. Veja a Secção 5.1.7, "Um Ecrã de Arranque" para informações acerca de
como acrescentar um parâmetro de arranque.

Para ilustrar isto, aqui estão alguns exemplos que podem ser utilizados na
linha de comandos de arranque:

auto url=autoserver

Isto baseia-se na existência de um servidor de DHCP que levará a máquina ao
ponto em que o autoserver possa ser resolvido pelo DNS, talvez após acrescentar
o domínio local se isso foi disponibilizado pelo DHCP. Se isto foi feito num
sitio onde o domínio é example.com, e isto resultar numa configuração de DHCP
razoavelmente sã, isto iria resultar no ficheiro de preseed ser obtido em http:
//autoserver.example.com/d-i/bullseye/./preseed.cfg.

A última parte desse url (d-i/bullseye/./preseed.cfg) é retirada de
auto-install/defaultroot. Por predefinição inclui o diretório bullseye para
permitir que futuras versões especifiquem o seu próprio nome de código para
deixar as pessoas migrar para o seguinte de uma forma controlada. A parte do /.
/ é utilizada para indicar uma raiz relativa à qual possam ser ancorados
caminhos subsequentes (para utilizar em preseed/include e preseed/run). Isto
permite que os ficheiros sejam especificados quer como URLs completos, caminhos
que começam por / que estão assim ancorados, ou mesmo como caminhos relativos à
localização onde foi encontrado o último ficheiro preseed. Isto pode ser
utilizado para construir scripts mais portáveis onde uma hierarquia completa de
scripts pode ser movida sem estragar nada, por exemplo copiar os ficheiros para
uma pen USB quando estes começaram num servidor web. Neste exemplo, se o
ficheiro de preseed define preseed/run para /scripts/late_command.sh então o
ficheiro será obtido a partir de http://autoserver.example.com/d-i/bullseye/./
scripts/late_command.sh.

Se não existir uma infra-estrutura local de DHCP ou de DNS, ou se não desejar
utilizar o caminho por omissão para o preseed.cfg, ainda assim pode utilizar um
url explícito, e se não utilizar o elemento /./ será ancorado ao inicio do
caminho (i.e. o terceiro / no URL). Está aqui um exemplo que necessita de
suporte mínimo da estrutura de rede local:

auto url=http://192.168.1.2/path/to/mypreseed.file

A forma como funciona isto é:

  • se faltar o protocolo ao URL, é assumido http,

  • se a seção do hostname não tiver pontos finais, é acrescentado o domínio
    derivado de DHCP, e

  • se não existir nenhum / depois do hostname, então é acrescentado o caminho
    predefinido.

Além de especificar o url, também pode especificar configurações que não afetam
diretamente o comportamento do próprio debian-installer, mas podem ser passadas
através de scripts especificados utilizando preseed/run no ficheiro preseed
carregado. Atualmente, o único exemplo disto é auto-install/classes, que tem
uma abreviatura classes. Isto pode ser utilizado da seguinte forma:

auto url=example.com classes=class_A;class_B

As classes podem por exemplo denotar o tipo de sistema a ser instalado, ou a
localização a ser utilizada.

Claro que é possível estender este conceito, e se o fizer, é razoável utilizar
o namespace auto-install para isto. Por isso poderá ter algo do tipo
auto-install/style que é então utilizado nos seus scripts. Se achar que
necessita de fazer isto, por favor mencione-o na mailing list <
debian-boot@lists.debian.org> para que nós possamos evitar conflitos de
namespace, e talvez acrescentar um alias ao parâmetro para si.

A escolha de arranque auto ainda não está definida em todas as arquiteturas. O
mesmo efeito pode ser alcançado ao simplesmente acrescentar os dois parâmetros
auto=true priority=critical à linha de comandos do kernel. O parâmetro do
kernel auto é uma abreviatura para auto-install/enable e defini-lo como true
atrasa as questões do locale e do teclado até que exista a possibilidade de
fazer preseed a estas, enquanto que priority é uma abreviatura para debconf/
priority e defini-la como critical previne que sejam colocadas quaisquer
questões com prioridade inferior.

Opções adicionais que podem ter interesse enquanto tenta automatizar uma
instalação enquanto utilizar DHCP são: interface=auto netcfg/dhcp_timeout=60
que faz com que a máquina escolha a primeira placa de rede viável e seja mais
paciente com a espera da resposta ao seu pedido DHCP.

Dica

Em exemplo extensivo acerca de como utilizar esta plataforma de trabalho,
incluindo scripts e classes de exemplo, pode ser encontrado no website do
developer. Os exemplos disponíveis também mostram muitos outros efeitos
agradáveis que podem ser alcançados através do uso criativo da
pré-configuração.

B.2.4. Abreviaturas úteis com o preseed

Os seguintes aliases podem ser úteis ao utilizar (modo auto) preseeding. Note
que estes são apenas abreviaturas para os nomes das questões, e você tem também
de especificar sempre um valor: por exemplo, auto=true ou interface=eth0.

priority    debconf/priority
fb          debian-installer/framebuffer
language    debian-installer/language
country     debian-installer/country
locale      debian-installer/locale
theme       debian-installer/theme
auto        auto-install/enable
classes     auto-install/classes
ficheiro    preseed/file
url         preseed/url
domain      netcfg/get_domain
hostname    netcfg/get_hostname
interface   netcfg/choose_interface
protocol    mirror/protocol
suite       mirror/suite
modules     anna/choose_modules
recommends  base-installer/install-recommends
tasks       tasksel:tasksel/first
desktop     tasksel:tasksel/desktop
dmraid      disk-detect/dmraid/enable
keymap      keyboard-configuration/xkb-keymap
preseed-md5 preseed/file/checksum

B.2.5. Exemplos de preseeding pela linha de comandos de arranque

Aqui estão alguns exemplos de como parecer a linha de comandos (terá de adaptar
isto à sua necessidade; veja também a Secção 5.1.7, "Um Ecrã de Arranque").

Para definir Português como linguagem e Portugal como país:
/install.amd/vmlinuz vga=788 initrd=/install.amd/gtk/initrd.gz language=pt country=PT --- quiet
# Para definir Inglês como linguagem e Português como país e utilizar uma disposição de teclado de Português:
/install.amd/vmlinuz vga=788 initrd=/install.amd/gtk/initrd.gz language=en country=PT locale=en_US.UTF-8 keymap=pt --- quiet
# Para instalar o ambiente de trabalho MATE:
/install.amd/vmlinuz vga=788 initrd=/install.amd/gtk/initrd.gz desktop=mate-desktop --- quiet
# Para instalar a tarefa web-server:
/install.amd/vmlinuz initrd=/install.amd/initrd.gz tasksel:tasksel/first=web-server ---

B.2.6. Utilizar um servidor de DHCP para especificar ficheiros de
pré-configuração

Também é possível utilizar DHCP para especificar um ficheiro de
pré-configuração a fazer download a partir da rede. DHCP permite especificar um
nome de ficheiro. Normalmente este é um ficheiro para fazer netboot, mas se for
um URL então o meio de instalação que suporte preseed através da rede irá fazer
o download do ficheiro a partir do URL e utilizá-lo como ficheiro de
pré-configuração. Aqui está um exemplo de como configurar o dhcpd.conf para a
versão 3 do servidor ISC DHCP (o pacote Debian isc-dhcp-server).

if substring (option vendor-class-identifier, 0, 3) = "d-i" {
    filename "http://host/preseed.cfg";
}

Note que o exemplo acima limita este ficheiro a clientes DHCP que se
identifiquem a eles próprios como "d-i", por isso não irá afetar clientes DHCP
normais, mas apenas o instalador. Pode também colocar o texto num bloco para
apenas um host, para evitar que seja feito preseed a todas as instalações na
sua rede.

Uma boa forma de utilizar o preseed de DHCP é fazer o preseed apenas de valores
específicos para a sua rede, tais como o mirror Debian a utilizar. Desta forma
as instalações na sua rede irão sempre obter uma boa escolha de mirror, mas o
resto da instalação pode ser feita interativamente. Utilizar o preseed de DHCP
para automatizar totalmente as instalações de Debian deve ser feito com
cuidado.

B.3. Criar um ficheiro de pré-configuração

O ficheiro de pré-configuração está no formato usado pelo comando 
debconf-set-selections. O formato geral de uma linha no ficheiro de
pré-configuração é:

<owner> <nome questão> <tipo questão> <valor>

O ficheiro deve começar com #_preseed_V1

Existem algumas poucas regras a ter em atenção quando se escreve um ficheiro de
pré-configuração.

  • Colocar apenas um único espaço ou tab entre o tipo e o valor: quaisquer
    espaços em branco adicionais serão interpretados como pertencendo ao valor.

  • Uma linha pode ser dividida em várias linhas acrescentando uma 'backslash'
    ("\") como caractere de continuação de linha. Um bom lugar para dividir uma
    linha é após o nome da questão; um mau lugar é entre o tipo e o valor.
    Linhas divididas irão ser unidas numa única linha com todos os espaços em
    branco antes ou depois condensados num único espaço.

  • Para as variáveis debconf (templates) utilizadas no próprio instalador, o
    dono deve ser definido como "d-i"; para fazer 'preseed' a variáveis
    utilizadas no sistema instalado, deve ser utilizado o nome do pacote que
    contém o correspondente template debconf. Apenas variáveis que tenham o
    dono definido para algo que não "d-i" é que serão propagadas para a base de
    dados do debconf do sistema instalado.

  • À maioria das questões tem de ser feito preseed utilizando os valores
    válidos em Inglês e não os valores traduzidos. No entanto, existem algumas
    questões (por exemplo em partman em que têm de ser utilizados os valores
    traduzidos.

  • Algumas questões pegam no código como valor em vez do texto em Inglês que é
    mostrado durante a instalação.

  • Começar com #_preseed_V1

  • Um comentário consiste numa linha que começa com um caractere cardinal ("#"
    ) e estende-se em todo o comprimento dessa linha.

A forma mais fácil de criar um ficheiro de pré-configuração é utilizar um
ficheiro de exemplo com link à Secção B.4, "Conteúdo do ficheiro de
pré-configuração (para bullseye)" como base e trabalhar a partir daqui.

Um método alternativo é fazer uma instalação manual e depois, após reiniciar,
utilizar o comando debconf-get-selections a partir do pacote debconf-utils para
despejar a base de dados do debconf e a base de dados de cdebconf do instalador
para um ficheiro único:

$ echo "#_preseed_V1" > file
$ debconf-get-selections --installer >> file
$ debconf-get-selections >> file

No entanto, um ficheiro gerado desta forma irá ter alguns itens aos quais não
deve ser feito preseed, o ficheiro de exemplo é um melhor ponto de partida para
a maioria dos utilizadores.

Nota

Este método baseia-se no facto que, no fim da instalação, a base de dados do
cdebconf do instalador é guardada no sistema instalado em /var/log/installer/
cdebconf. No entanto, como a base de dados pode conter informação sensível, por
omissão os ficheiros são apenas legíveis pelo root.

O diretório /var/log/installer e todos os ficheiros que estejam lá serão
apagados do seu sistema se fizer purge ao pacote installation-report.

Para verificar possíveis valores para as questões, pode utilizar o nano para
examinar os ficheiros em /var/lib/cdebconf enquanto está uma instalação em
progresso. Ver templates.dat para os templates em bruto e questions.dat para os
valores atuais e para os valores atribuídos às variáveis.

Para verificar se o formato do seu ficheiro de pré-configuração é válido antes
de iniciar uma instalação, pode usar o comando debconf-set-selections -c 
preseed.cfg.

B.4. Conteúdo do ficheiro de pré-configuração (para bullseye)

Os fragmentos da configuração utilizados neste apêndice também estão
disponíveis como ficheiro de exemplo de pré-configuração a partir de ../
example-preseed.txt.

Note que este exemplo é baseado numa instalação para a arquitetura Intel x86.
Se estiver a instalar para uma arquitetura diferente, alguns dos exemplos (como
a seleção do teclado e a instalação do gestor de arranque) podem não ser
relevantes e irá ser necessário substituí-los por valores apropriados de
debconf para a sua arquitetura.

Detalhes acerca de como os diferentes componentes do Instalador Debian
funcionam podem ser encontrados na Secção 6.3, "Utilizar Componentes
Individuais".

B.4.1. Localização

Durante a instalação normal primeiro são feitas as questões acerca da
localização, por isso só pode ser feito preseed a esses valores pelos métodos
initrd ou através de parâmetros de arranque do kernel. O modo Auto (
Secção B.2.3, "Modo Auto") inclui a definição auto-install/enable=true
(normalmente através do alias de preseed auto). Isto atrasa a colocação de
questões de localização, para que possa ser feito preseed através de qualquer
outro método.

O locale pode ser utilizado para especificar a linguagem e o país e poderá ser
qualquer combinação de linguagens uportadas pelo debian-installer e de países
reconhecidos. Se a combinação não formar um locale válido o instalador irá
automaticamente escolher um locale que seja válido para a linguagem escolhida.
Para especificar o locale como um parâmetro de arranque, utilize locale=en_US.

Embora este método seja muito fácil de utilizar, não permite 'preseeding' de
todas as combinações possíveis de linguagem, país e locale^[22]. Por isso em
alternativa pode ser feito 'preseed' individualmente aos valores. A linguagem e
ao país também podem ser especificados como parâmetros de arranque.

# Fazer preseed apenas ao locale define linguagem, país e locale.
d-i debian-installer/locale string en_US

# Para maior flexibilidade também pode ser feito preseed individualmente.
#d-i debian-installer/language string en
#d-i debian-installer/country string NL
#d-i debian-installer/locale string en_GB.UTF-8
# Opcionalmente especificar locales adicionais a serem gerados.
#d-i localechooser/supported-locales multiselect en_US.UTF-8, nl_NL.UTF-8

A configuração do teclado consiste na escolha de um keymap e (para keymaps
não-latinos) uma tecla para comutar entre keymaps não-latinos e o keymap US.
Durante a instalação apenas estão disponíveis as variantes dos keymaps básicos.
As variantes avançadas estão disponíveis apenas no sistema instalado, através
de dpkg-reconfigure keyboard-configuration.

# Escolha de teclado.
d-i keyboard-configuration/xkb-keymap select pt
# d-i keyboard-configuration/toggle select No toggling

Para saltar a configuração do teclado, faça preseed a keymap com skip-config.
Isto irá resultar em que o keymap do kernel continue ativo.

B.4.2. Configuração de rede

Claro que fazer preseed à configuração de rede não funciona se estiver a
carregar o seu ficheiro de pré-configuração a partir da rede. Mas é óptimo se
estiver a iniciar a partir de um disco ou de uma pen USB. Se estiver a carregar
ficheiros de pré-configuração a partir da rede, pode passar parâmetros de
configuração de rede utilizando parâmetros de arranque do kernel.

Se necessitar escolher um determinado interface quando arrancar através da rede
antes de carregar um ficheiro de pré-configuração pela rede, utilize um
parâmetro de arranque como o interface=eth1.

Embora normalmente não seja possível fazer preseed à configuração de rede
quando se utiliza preseed através da rede (utilizando "preseed/url"), poderá
utilizar o seguinte truque para contornar isso, por exemplo se desejar atribuir
um endereço estático para um interface de rede. O truque é forçar a
configuração da rede a ser corrida novamente após o ficheiro de
pré-configuração ter sido carregado ao criar um script "preseed/run" que
contenha os seguintes comandos:

kill-all-dhcp; netcfg

As seguintes variáveis debconf são relevantes para a configuração da rede.

# Desabilitar por completo a configuração de rede. Isto é útil para
# instalações por cdrom em dispositivos que não estão ligados à rede onde
# as questões de rede, avisos e timeouts são inúteis.
#d-i netcfg/enable boolean false

# Se possível o netcfg irá escolher um interface que tenha ligação.
# Isto irá evitar que seja mostrada uma lista se existir mais que um
# interface.
d-i netcfg/choose_interface select auto

# Em vez disso para escolher um determinado interface:
#d-i netcfg/choose_interface select eth1

# Para definir um tempo de timeout diferente para a deteção da ligação
# (a predefinição são 3 segundos). Os valores são interpretados como
# segundos.
#d-i netcfg/link_wait_timeout string 10

# Se tiver um servidor de dhcp lento e o instalador esgotar o tempo à
# espera, isto poderá ser útil.
#d-i netcfg/dhcp_timeout string 60
#d-i netcfg/dhcpv6_timeout string 60

# A configuração automática de rede é predefinida.
# Se preferir configurar manualmente a rede, descomente esta linha e a
# configuração de rede estática abaixo:
#d-i netcfg/disable_autoconfig boolean true

# Se quiser que o ficheiro de pré-configuração funcione em sistemas com e
# sem servidor de dhcp, descomente estas linhas e a configuração da rede
# estática abaixo.
#d-i netcfg/dhcp_failed note
#d-i netcfg/dhcp_options select Configure network manually

# Configuração de rede estática.

# Exemplo IPv4
#d-i netcfg/get_ipaddress string 192.168.1.42
#d-i netcfg/get_netmask string 255.255.255.0
#d-i netcfg/get_gateway string 192.168.1.1
#d-i netcfg/get_nameservers string 192.168.1.1
#d-i netcfg/confirm_static boolean true

# Exemplo IPv6
#d-i netcfg/get_ipaddress string fc00::2
#d-i netcfg/get_netmask string ffff:ffff:ffff:ffff::
#d-i netcfg/get_gateway string fc00::1
#d-i netcfg/get_nameservers string fc00::1
#d-i netcfg/confirm_static boolean true

# Qualquer nome de máquina e de domínio atribuido pelo dhcp tem precedência
# sobre os valores definidos aqui. No entanto, definir os valores irá
# prevenir que as questões não sejam mostradas, mesmo que esses valores
# venham do dhcp.
d-i netcfg/get_hostname string unassigned-hostname
d-i netcfg/get_domain string unassigned-domain

# Se quiser forçar um nome de máquina, ignorando se o servidor de DHCP o
# retorna ou qual seja a entrada inversa de DNS para o IP, retire o
# comentário e ajuste a linha seguinte.
#d-i netcfg/hostname string somehost

# Fazer desaparecer a aborrecida caixa de diálogo da chave do WEP.
d-i netcfg/wireless_wep string
# O nome de host dhcp esquisito que alguns ISPs usam como password.
#d-i netcfg/dhcp_hostname string radish

# Se for necessário firmware não-livre para a rede ou para outro hardware,
# pode configurar o instalador para tentar carregá-lo sempre, sem
# perguntar. Ou mudar para false evitar a questão.
#d-i hw-detect/load_firmware boolean true

Por favor note que o netcfg irá determinar automaticamente a máscara de rede se
não for feito 'preseed' a netcfg/get_netmask. Neste caso, para instalações
automáticas a variável tem de ser marcada como seen. De forma similar, o netcfg
irá escolher um endereço apropriado se netcfg/get_gateway não estiver definido.
Como caso especial, pode definir netcfg/get_gateway para "none" para
especificar que não deve ser utilizada uma gateway.

B.4.3. Consola de rede

# Utilize as seguintes definições se desejar utilizar o componente
# network-console para instalações remotas através de SSH. Isto só faz
# sentido se pretender fazer manualmente o resto da instalação.
#d-i anna/choose_modules string network-console
#d-i network-console/authorized_keys_url string http://10.0.0.1/openssh-key
#d-i network-console/password password r00tme
#d-i network-console/password-again password r00tme

Pode ser encontrada mais informação relacionada com network-console em
Secção 6.3.10, "Instalação através de network-console".

B.4.4. Parâmetros do mirror

Dependendo do método de instalação que utilizar, pode ser utilizado um mirror
para fazer o download de componentes adicionais do instalador, para instalar o
sistema base, e para definir o ficheiro /etc/apt/sources.list para o sistema
instalado.

O parâmetro mirror/suite determina a suite para o sistema instalado.

O parâmetro mirror/udeb/suite determina o conjunto de componentes adicionais
para o instalador. Só é útil definir isto se os componentes forem obtidos
através da rede e devem corresponder ao conjunto que foi utilizado para
construir o initrd para o método de instalação utilizado para a instalação.
Normalmente o instalador irá automaticamente utilizar o valor correto e não
deverá haver necessidade de definir isto.

# Protocolo do mirror:
# Se escolher ftp, a string mirror/país não necessita ser definida.
# Valor predefinido para o protocolo de rede: http.
#d-i mirror/protocol string ftp
d-i mirror/country string manual
d-i mirror/http/hostname string http.us.debian.org
d-i mirror/http/directory string /debian
d-i mirror/http/proxy string

# Conjunto a instalar.
#d-i mirror/suite string testing
# Conjunto a usar para carregar os componentes do instalador (opcional).
#d-i mirror/udeb/suite string testing

B.4.5. Configuração de contas

Pode ser feito preseed à palavra-passe para a conta de root, nome e
palavra-passe da primeira conta normal de utilizador. Pode utilizar valores de
texto ou hashes de crypt(3) para as palavras-passe.

Atenção

Tenha em atenção que o preseed de palavras-passe não é completamente seguro já
que todos os que tiverem acesso ao ficheiro de pré-configuração ficam a
conhecer essas palavras-passe. Guardar palavras-passe hashed é considerado
seguro a menos que seja utilizado um algoritmo fraco de hashing como o DES ou
MD5 que permite ataques "de força bruta". Os algoritmos de hashing de
palavras-passe recomendados são SHA-256 e SHA512.

# Saltar a criação de uma conta root (a conta normal de utilizador
# poderá utilizar o sudo).
#d-i passwd/root-login boolean false
# Em alternativa, para saltar a criação da conta de utilizador normal.
#d-i passwd/make-user boolean false

# Palavra-passe de root, quer em texto simples
#d-i passwd/root-password password r00tme
#d-i passwd/root-password-again password r00tme
# ou encriptada utilizando uma hash crypt(3).
#d-i passwd/root-password-crypted password [crypt(3) hash]

# Para criar uma conta normal de utilizador.
#d-i passwd/user-fullname string Debian User
#d-i passwd/username string debian
# Password de utilizador normal, em texto simples
#d-i passwd/user-password password insecure
#d-i passwd/user-password-again password insecure
# ou encriptada utilizando uma hash crypt(3).
#d-i passwd/user-password-crypted password [crypt(3) hash]
# Criar o primeiro utilizador com o UID especificado em vez do valor
# predefinido
#d-i passwd/user-uid string 1010

# A conta de utilizador será acrescentada a alguns grupos standard
# Para ultrapassar isso, utilize isto.
#d-i passwd/user-default-groups string audio cdrom video

Ás variáveis passwd/root-password-crypted e passwd/user-password-crypted também
pode ser feito o preseed com "!" como o seu valor. Nesse caso, a conta
correspondente é desativada. Isto pode ser conveniente para a conta root, claro
está desde que esteja definido outro método para permitir atividades
administrativas ou login como root (por exemplo utilizando uma chave de
autenticação SSH ou sudo).

Pode ser utilizado o seguinte comando (disponível a partir do pacote whois)
para gerar um hash SHA-512 baseado em crypt(3) para uma palavra-passe:

mkpasswd -m sha-512

B.4.6. Configuração do relógio e fuso horário

# Controla se o relógio de hardware está ou não definido para UTC.
d-i clock-setup/utc boolean true

# Pode definir este valor como qualquer definição válida para $TZ;
# para valores válidos veja o conteúdo de /usr/share/zoneinfo/.
d-i time/zone string US/Eastern

# Controla se vai ser utilizado NTP para acertar o relógio durante a instalação
d-i clock-setup/ntp boolean true
# Servidor NTP a utilizar. O valor predefinido está quase sempre bem.
#d-i clock-setup/ntp-server string ntp.example.com

B.4.7. Particionamento

Utilizar o preseed para particionar o disco rígido é limitado ao que for
suportado pelo partman-auto. Pode escolher entre particionar o espaço livre num
disco ou um disco inteiro. A disposição das partições pode ser determinada
utilizando uma receita predefinida, uma receita personalizada advinda de um
ficheiro ou uma receita incluída no ficheiro de pré-configuração.

É suportado o preseeding de configurações avançadas de partições utilizando
RAID, LVM e encriptação, mas não com toda a flexibilidade que é possível ao
particionar durante uma instalação que não seja por pré-configuração.

Os exemplos abaixo apenas disponibilizam informação básica acerca da utilização
de receitas. Para informação detalhada veja os ficheiros
partman-auto-recipe.txt e partman-auto-raid-recipe.txt incluídos no pacote
debian-installer. Ambos os ficheiros também estão disponíveis a partir do
repositório de código-fonte do debian-installer. Note que as funcionalidades
suportadas podem ser alteradas entre lançamentos.

Atenção

A forma como os discos são identificados é dependente da ordem com que os seus
drivers são carregados. Se existirem vários discos no sistema, certifique-se
que será selecionado o disco correto antes de utilizar o preseeding.

B.4.7.1. Exemplo de particionamento

# Se o sistema tiver espaço livre pode escolher particionar apenas esse
# espaço.
# Isto apenas é honrado se partman-auto/method (abaixo) não estiver definido.
#d-i partman-auto/init_automatically_partition select biggest_free

# Em alternativa, pode especificar um disco a particionar. Se o sistema
# tiver apenas um disco, o instalador, por defeito, irá utilizar esse. Caso
# contrário, o nome do dispositivo tem de ser passado no formato
# tradicional não-devfs (p.e. como /dev/sda, e não como /dev/discs/disc0/disc).
# Por exemplo, para utilizar o primeiro disco rígido SCSI/SATA:
#d-i partman-auto/disk string /dev/sda
# Além disso tem de especificar o método a utilizar.
# Atualmente os métodos disponíveis são:
# - regular: utilizar os tipos de partição usuais para a arquitetura
# - lvm:     utilizar LVM para particionar o disco
# - crypto:  utilizar LVM dentro de uma participação encriptada
d-i partman-auto/method string lvm

# Pode definir a quantidade do espaço que será utilizado para o grupo do
# volume LVM. Pode ser uma quantidade com a unidade (eg. 20 GB), uma
# percentagem do espaço livre ou a palavra 'max'.
#d-i partman-auto-lvm/guided_size string max

# Se um dos discos que vai ser particionado automaticamente contiver uma
# configuração LVM anterior, o utilizador normalmente irá receber um aviso.
# Isto pode ser evitado com preseed...
d-i partman-lvm/device_remove_lvm boolean true
# O mesmo se aplica a arrays RAID já existentes:
d-i partman-md/device_remove_md boolean true
# E o mesmo acontece para a confirmação para escrever as partições lvm.
d-i partman-lvm/confirm boolean true
d-i partman-lvm/confirm_nooverwrite boolean true

# Pode escolher uma das três receitas de particionamento predefinidas:
# - atomic: todos os ficheiros numa partição
# - home:   partição /home separada
# - multi:  partições /home, /var e /tmp separadas
d-i partman-auto/choose_recipe select atomic

# Ou disponibilizar uma receita sua...
# Se tiver uma forma de colocar um ficheiro de receita no ambiente d-i,
# pode fazê-lo apenas apontar para lá.
#d-i partman-auto/expert_recipe_file string /hd-media/recipe

# Caso contrário, pode colocar uma receita inteira do ficheiro de
# pré-configuração numa linha (lógica). Este exemplo cria uma pequena
# partição /boot, swap adequada e utiliza o resto do espaço para a
# partição raiz:
#d-i partman-auto/expert_recipe string                         \
#      boot-root ::                                            \
#              40 50 100 ext3                                  \
#                      $primary{ } $bootable{ }                \
#                      method{ format } format{ }              \
#                      use_filesystem{ } filesystem{ ext3 }    \
#                      mountpoint{ /boot }                     \
#              .                                               \
#              500 10000 1000000000 ext3                       \
#                      method{ format } format{ }              \
#                      use_filesystem{ } filesystem{ ext3 }    \
#                      mountpoint{ / }                         \
#              .                                               \
#              64 512 300% linux-swap                          \
#                      method{ swap } format{ }                \
#              .

# O formato completo de receita está documentado no ficheiro
# partman-auto-recipe.txt incluído no pacote 'debian-installer' ou
# disponível no repositório de código-fonte do D-I. Também documenta como
# especificar definições tais como filesystem labels, nomes de grupos de
# volumes e quais dispositivos físicos a incluir num grupo de volumes.

## Particionamento para UEFI
# Se o seu sistema necessitar de uma partição UEFI pode acrescentar algo como
# isto à receita acima, como o primeiro elemento na receita:
#              538 538 1075 free                               \
#                     $iflabel{ gpt }                          \
#                     $reusemethod{ }                          \
#                     method{ efi }                            \
#                     format{ }                                \
#              .                                               \
#
# O fragmento acima é para a arquitetura amd64; os detalhes poderão ser
# diferentes para outras arquiteturas. O pacote 'partman-auto' no repositório
# da fonte do D-I poderá ter um exemplo que possa seguir.

# Isto faz com que o partman particione automaticamente sem confirmação,
# desde que lhe indique o que fazer utilizando um dos métodos acima.
d-i partman-partitioning/confirm_write_new_label boolean true
d-i partman/choose_partition select finish
d-i partman/confirm boolean true
d-i partman/confirm_nooverwrite boolean true

# Forçar o arranque UEFI (será perdida a 'BIOS compatibility').
# Predefinido: false.
#d-i partman-efi/non_efi_system boolean true
# Assegure que a tabela de partições é GPT - é necessário para EFI
#d-i partman-partitioning/choose_label select gpt
#d-i partman-partitioning/default_label string gpt

# Quando a encriptação do disco estiver ativa, saltar apagar as partições
# em avanço.
#d-i partman-auto-crypto/erase_disks boolean false

B.4.7.2. Particionamento utilizando RAID

Também pode utilizar preseeding para configurar partições em arrays RAID por
software. É suportado RAID com os níveis 0, 1 e 5, 6 e 10, criar arrays
degradados e especificar dispositivos de reserva.

Se estiver a utilizar RAID 1, pode fazer preseed ao grub para instalar em todos
os dispositivos utilizados no array; veja a Secção B.4.11, "Instalação do
gestor de arranque".

Atenção

Neste tipo de particionamento automatizado é fácil correr mal. É também uma
funcionalidade que recebe relativamente pouco teste dos criadores do
debian-installer. A responsabilidade de ter as várias receitas corretas (de
modo a que façam sentido e não entrem em conflito) é do utilizador. Se tiver
problemas veja /var/log/syslog.

# O método deve ser definido como "raid".
#d-i partman-auto/method string raid
# Especifique os discos a serem particionados. Todos ficarão com a
# mesma disposição, por isso isto só funcionará se os discos forem do
# mesmo tamanho.
#d-i partman-auto/disk string /dev/sda /dev/sdb

# De seguida tem de especificar as partições físicas que serão utilizadas.
#d-i partman-auto/expert_recipe string \
#      multiraid ::                                         \
#              1000 5000 4000 raid                          \
#                      $primary{ } method{ raid }           \
#              .                                            \
#              64 512 300% raid                             \
#                      method{ raid }                       \
#              .                                            \
#              500 10000 1000000000 raid                    \
#                      method{ raid }                       \
#              .

# Por fim tem de especificar como é que as partições definidas
# anteriormente serão utilizadas na configuração RAID. Lembre-se de
# utilizar os números de partição corretos para as partições lógicas.
# São suportados os níveis de RAID 0, 1, 5, 6 e 10;
# Os parâmetros são:
# <raidtype> <devcount> <sparecount> <fstype> <mountpoint> \
#          <devices> <sparedevices>

#d-i partman-auto-raid/recipe string \
#    1 2 0 ext3 /                    \
#          /dev/sda1#/dev/sdb1       \
#    .                               \
#    1 2 0 swap -                    \
#          /dev/sda5#/dev/sdb5       \
#    .                               \
#    0 2 0 ext3 /home                \
#          /dev/sda6#/dev/sdb6       \
#    .

# Para mais informações veja o ficheiro partman-auto-raid-recipe.txt
# incluído no pacote 'debian-installer' ou disponível a partir do
# repositório de código-fonte do D-I.

# Isto faz com que o partman particione automaticamente sem confirmação.
d-i partman-md/confirm boolean true
d-i partman-partitioning/confirm_write_new_label boolean true
d-i partman/choose_partition select finish
d-i partman/confirm boolean true
d-i partman/confirm_nooverwrite boolean true

B.4.7.3. Controlar como são montadas as partições

Normalmente, os sistemas de ficheiros são montados utilizando como chave um
identificador único (UUID); isto permite serem corretamente montados mesmo que
o nome de dispositivo altere. Os UUIDs são muito compridos e difíceis de ler,
por isso, se preferir, o instalador pode montar sistemas de ficheiros de acordo
com os nomes de dispositivos tradicionais, ou baseado numa etiqueta que
atribuir. Se pedir ao instalador para montar por etiqueta, qualquer sistema de
ficheiros sem a etiqueta será montado utilizando um UUID.

Os dispositivos com nomes estáveis, tal como os volumes lógicos de LVM, irão
continuar a utilizar os seus nomes tradicionais em vez de UUIDs.

Atenção

Os nomes de dispositivos tradicionais podem ser alterados na ordem pela qual o
kernel descobre os dispositivos durante o arranque, o que pode fazer com que
seja montado o sistema de ficheiros errado. De forma similar, é provável que as
etiquetas choquem se ligar um novo disco ou pen USB, e se isso acontecer o
comportamento do seu sistema, ao ser iniciado, poderá ser aleatório.

# O predefinido é montar por UUID, mas pode também escolher "traditional"
# para utilizar nomes tradicionais de dispositivo, ou "label" para antes
# tentar utilizar etiquetas de sistemas de ficheiros antes de tentar UUIDs.
#d-i partman/mount_style select uuid

B.4.8. Instalação do sistema base

Na verdade não há muito a que possa ser feito preseed nesta etapa da
instalação. As únicas perguntas colocadas referem-se à instalação do kernel.

# Configurar o APT para não instalar, por omissão, pacotes recomendados. A
# utilização desta opção pode resultar num sistema incompleto e deve apenas
# ser utilizada por utilizadores muito experientes.
#d-i base-installer/install-recommends boolean false

# O (meta) pacote de imagem do kernel a ser instalado; pode ser utilizado
# "none" para não instalar nenhum kernel.
#d-i base-installer/kernel/image string linux-image-686

B.4.9. Configuração do Apt

A configuração do /etc/apt/sources.list e as opções da configuração básica são
totalmente automatizadas de acordo com o seu método de instalação e respostas
às questões anteriores. Opcionalmente pode acrescentar outros repositórios
(locais).

# Choose, if you want to scan additional installation media
# (default: false).
d-i apt-setup/cdrom/set-first boolean false
# You can choose to install non-free and contrib software.
#d-i apt-setup/non-free boolean true
#d-i apt-setup/contrib boolean true
# Uncomment the following line, if you don't want to have the sources.list
# entry for a DVD/BD installation image active in the installed system
# (entries for netinst or CD images will be disabled anyway, regardless of
# this setting).
#d-i apt-setup/disable-cdrom-entries boolean true
# Uncomment this if you don't want to use a network mirror.
#d-i apt-setup/use_mirror boolean false
# Select which update services to use; define the mirrors to be used.
# Values shown below are the normal defaults.
#d-i apt-setup/services-select multiselect security, updates
#d-i apt-setup/security_host string security.debian.org

# Additional repositories, local[0-9] available
#d-i apt-setup/local0/repository string \
#       http://local.server/debian stable main
#d-i apt-setup/local0/comment string local server
# Enable deb-src lines
#d-i apt-setup/local0/source boolean true
# URL to the public key of the local repository; you must provide a key or
# apt will complain about the unauthenticated repository and so the
# sources.list line will be left commented out.
#d-i apt-setup/local0/key string http://local.server/key
# If the provided key file ends in ".asc" the key file needs to be an
# ASCII-armoured PGP key, if it ends in ".gpg" it needs to use the
# "GPG key public keyring" format, the "keybox database" format is
# currently not supported.

# By default the installer requires that repositories be authenticated
# using a known gpg key. This setting can be used to disable that
# authentication. Warning: Insecure, not recommended.
#d-i debian-installer/allow_unauthenticated boolean true

# Uncomment this to add multiarch configuration for i386
#d-i apt-setup/multiarch string i386


B.4.10. Seleção de pacotes

Pode escolher qualquer combinação de tarefas que estejam disponíveis. As
tarefas disponíveis neste momento incluem:

  • standard (ferramentas standard)

  • desktop (ambiente de trabalho gráfico)

  • gnome-desktop (Ambiente de trabalho Gnome)

  • xfce-desktop (Ambiente de trabalho XFCE)

  • kde-desktop (Ambiente de trabalho KDE Plasma)

  • cinnamon-desktop (Ambiente de trabalho Cinnamon)

  • mate-desktop (Ambiente de trabalho MATE)

  • lxde-desktop (Ambiente de trabalho LXDE)

  • web-server (servidor web)

  • ssh-server (servidor SSH)

Pode também escolher não instalar nenhuma tarefa, e forçar a instalação de um
conjunto de pacotes de alguma outra forma. Nós recomendamos sempre a inclusão
da tarefa standard.

Ou se não quiser que seja mostrada a janela do tasksel, faça preseed de pkgsel/
run_tasksel (neste caso não são instalados pacotes via preseed).

Se quer instalar alguns pacotes adicionais além dos pacotes instalados pelas
tarefas, pode utilizar o parâmetro pkgsel/include. O valor deste parâmetro pode
ser uma lista de pacotes separada quer por vírgulas ou por espaços, assim
permite também ser facilmente utilizado na linha de comandos do kernel.

#tasksel tasksel/first multiselect standard, web-server, kde-desktop

# Ou escolha que não seja mostrada a janela do tasksel (e não instalar quaisquer pacotes):
#d-i pkgsel/run_tasksel boolean false

# Pacotes individuais adicionais a instalar
#d-i pkgsel/include string openssh-server build-essential
# Se atualiza pacotes após debootstrap.
# Valores permitidos: none, safe-upgrade, full-upgrade
#d-i pkgsel/upgrade select none

# Pode escolher se o seu sistema irá reportar qual o software que tem
# instalado e qual o software que utiliza. A predefinição é não relatar, no
# entanto enviar relatórios ajuda o projeto a determinar qual é o software
# mais popular e que deve ser incluido no primeiro CD/DVD.
#popularity-contest popularity-contest/participate boolean false

B.4.11. Instalação do gestor de arranque

# O grub é o gestor de arranque (para x86).

# Normalmente é seguro definir isto, faz instalar automaticamente o grub
# na partição UEFI/boot record, se não for detetado nenhum outro sistema
# operativo na máquina.
d-i grub-installer/only_debian boolean true

# Isto faz o grub-installer instalar-se na partição UEFI/boot record, se
# também encontrar algum outro SO, o que é menos seguro pois pode não ser
# possível arrancar esse outro SO.
d-i grub-installer/with_other_os boolean true

# Devido principalmente à possível utilização de pens USB, a localização do
# disco primário pode não ser determinada corretamente, e por isso tem de
# ser especificada:
#d-i grub-installer/bootdev  string /dev/sda
# Para instalar no dispositivo primário (assumindo que não é uma pen USB):
#d-i grub-installer/bootdev  string default

# Em alternativa, se o quiser instalar noutra localização que não a
# partição UEFI/boot record, descomente e edite as seguintes linhas:
#d-i grub-installer/only_debian boolean false
#d-i grub-installer/with_other_os boolean false
#d-i grub-installer/bootdev  string (hd0,1)
# Para instalar o grub em vários discos:
#d-i grub-installer/bootdev  string (hd0,1) (hd1,1) (hd2,1)

# Palavra-passe opcional para o grub, em texto visível
#d-i grub-installer/password password r00tme
#d-i grub-installer/password-again password r00tme
# ou encriptada utilizando um hash MD5, veja grub-md5-crypt(8).
#d-i grub-installer/password-crypted password [hash MD5]

# Use a seguinte opção para acrescentar parâmetros de arranque adicionais
# para o sistema instalado (se for suportado pelo instalador do gestor de
# arranque).
# Nota: as opções passadas ao instalador serão acrescentadas
# automaticamente.
#d-i debian-installer/add-kernel-opts string nousb

Pode ser gerado um hash MD5 para uma palavra-passe para o grub utilizando o 
grub-md5-crypt, ou utilizando o comando do exemplo na Secção B.4.5,
"Configuração de contas".

B.4.12. A terminar a instalação

# Durante as instalações feitas a partir da consola série, as consolas virtuais
# normais (VT1-VT6) estão normalmente desativadas em /etc/inittab. Descomente
# a próxima linha para prevenir isto.
#d-i finish-install/keep-consoles boolean true

# Evitar a última mensagem acerca da instalação estar completa.
d-i finish-install/reboot_in_progress note

# Isto irá evitar que o CD seja ejetado durante a reinicialização, o que é
# útil em algumas situações.
#d-i cdrom-detect/eject boolean false

# Isto é para fazer o instalador desligar quando terminar, mas não reiniciar
# para o sistema instalado.
#d-i debian-installer/exit/halt boolean true
# Isto irá desligar a máquina em vez de a apenas parar.
#d-i debian-installer/exit/poweroff boolean true

B.4.13. Preseed de outros pacotes

# Dependendo do software que escolher instalar, ou caso as coisas corram
# mal durante o processo de instalação, é possível que sejam colocadas
# outras questões. Também pode fazer preseed a essas, claro. Para obter
# uma lista de todas as questões possíveis que possam ser colocadas
# durante a instalação, faça uma instalação, e corra estes comandos:
#   debconf-get-selections --installer > file
#   debconf-get-selections >> file

B.5. Opções avançadas

B.5.1. Executar comandos personalizados durante a instalação

Uma opção muito poderosa e flexível oferecida pelas ferramentas de
pré-configuração é a habilidade de correr comandos ou scripts em certos pontos
da instalação.

Quando for montado o sistema de ficheiros do sistema alvo, fica disponível em /
target. Se for utilizado um CD de instalação, quando for montado fica
disponível em /cdrom.

# O preseed do d-i é inerentemente não seguro. Nada no instalador verifica
# se existem tentativas de buffer overflows ou outros exploits nos valores
# de um ficheiro de pré-configuração como este. Utilize apenas ficheiros
# de pré-configuração de proveniência de confiança! Para conseguir isso,
# e porque normalmente é útil, aqui está uma forma de correr automaticamente
# qualquer comando da shell que queira dentro do instalador.

# Este primeiro comando é corrido tão cedo quanto possível, logo após o
# preseed ter sido lido.
#d-i preseed/early_command string anna-install some-udeb
# Este comando é corrido imediatamente antes do particionador iniciar.
# Poderá ser útil para aplicar preseeding dinâmico de particionamento que
# dependa do estado dos discos (que poderá não ser visível quando corre
# preseed/early_command).
#d-i partman/early_command \
#       string debconf-set partman-auto/disk "$(list-devices disk | head -n1)"
# Este comando é corrido antes do instalador terminar, mas quando ainda
# existe um directório /target utilizável. Pode fazer chroot a /target e
# utilizá-lo diretamente, ou utilizar os comandos apt-get install e
# in-target para instalar facilmente pacotes e correr comandos no sistema
# alvo.
#d-i preseed/late_command string apt-install zsh; in-target chsh -s /bin/zsh

B.5.2. Utilizar o preseed para alterar valores predefinidos

É possível utilizar o preseeding para alterar a resposta predefinida a uma
questão, mas mesmo assim a questão será colocada. Para fazer isto tem de ser
feito reset para "false" á flag seen após definir o valor para a questão.

d-i foo/bar string value
d-i foo/bar seen false

Pode ser alcançado o mesmo efeito para todas as questões definindo na linha de
comandos de arranque o parâmetro preseed/interactive=true. Isto também pode ser
útil para testar ou depurar o seu ficheiro de pré-configuração.

Note que o dono do "d-i" só deverá ser utilizado para variáveis utilizadas no
próprio instalador. Para variáveis que pertençam a pacotes instalados no
sistema alvo, deve utilizar antes esse nome. Veja a nota de rodapé da
Secção B.2.2, "Utilizar parâmetros de arranque para fazer preseed a questões".

Se está a fazer preseed utilizando parâmetros de arranque, pode fazer o
instalador colocar a questão correspondente utilizando o operador "?=", i.e.
foo/bar?=valor (ou dono:foo/bar?=valor). Claro que isto só terá efeito para
parâmetros que correspondam ás questões que são mostradas durante a instalação
e não para parâmetros "internos".

Para mais informações de depuração, utilize o parâmetro de arranque
DEBCONF_DEBUG=5. Isto irá fazer com que o debconf escreva muito mais detalhe
acerca das definições atuais de cada variável e acerca do progresso dos scripts
de instalação de pacotes.

B.5.3. Carregamento em série dos ficheiros de pré-configuração

É possível incluir outros ficheiros de pré-configuração a partir de um ficheiro
de pré-configuração. Quaisquer definições nesses ficheiros irão sobrepor-se às
definições pré-existentes carregadas anteriormente. Isto torna possível pôr,
por exemplo, definições gerais de rede para o seu local num ficheiro e mais
definições específicas para certas configurações noutros ficheiros.

# Podem ser listados mais do que um ficheiro, separados por espaços;
# todos serão carregados. Os ficheiros incluídos podem ter também eles
# próprio diretivas de preseed/include. Note que se os nomes dos
# ficheiros forem relativos, serão tirados do mesmo directório do ficheiro
# de pré-configuração que os incluí.
#d-i preseed/include string x.cfg

# O instalador pode opcionalmente verificar os 'checksums' dos ficheiros de
# pré-configuração antes de os utilizar. Atualmente apenas são
# suportados md5sums, liste os md5sums na mesma ordem que a lista de
# ficheiros a incluir.
#d-i preseed/include/checksum string 5da499872becccfeda2c4872f9171c3d

# De forma mais flexível, isto corre um comando da shell e se mostrar os
# nome dos ficheiros de pré-configuração, inclui esses ficheiros.
#d-i preseed/include_command \
#      string if [ "`hostname`" = bob ]; then echo bob.cfg; fi

# Da forma mais flexível, isto faz o download um programa e corre-o.
# O programa pode utilizar comandos como o debconf-set para manipular a
# base de dados do debconf.
# Pode ser listado mais do que um script, separado por espaços.
# Note que se os nomes dos ficheiros são relativos, serão retirados do
# mesmo directório do ficheiro de pré-configuração que os corre.
#d-i preseed/run string foo.sh

Também é possível carregá-los a partir do initrd ou da fase de preseed por
ficheiro e para o preseed de rede definindo preseed/url nos ficheiros
anteriores. Isto irá fazer com que seja feito preseed por rede quando a rede
ficar disponível. Tem de ter cuidado ao fazer isto, já que existem duas
execuções distintas de preseed, significa por exemplo que pode ter outra
oportunidade de correr o comando preseed/early, a segunda acontece após a rede
estar disponível.


━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

^[21] O dono da variável debconf (ou template) é normalmente o nome do pacote
que contém o correspondente template debconf. Para variáveis utilizadas no
próprio instalador o dono é "d-i". Os templates e variáveis podem ter mais de
um dono que ajuda a determinar se podem ser removidos da base de dados debconf
se o pacote tiver sido purgado.

^[22] Fazer preseed do locale para en_NL iria, por exemplo, resultar em
en_US.UTF-8 como locale predefinido para o sistema instalado. Se, por exemplo,
em vez disso for preferido en_GB.UTF-8, terá de ser feito preseed aos valores
individualmente.

Apêndice C. Particionar para Debian

Índice

C.1. Decidir o Tamanho e Partições do Debian
C.2. A Árvore de Diretórios
C.3. Esquema Recomendado de Particionamento
C.4. Nomes de Dispositivos em Linux
C.5. Programas de Particionamento em Debian

    C.5.1. Particionar para 64-bit PC

C.1. Decidir o Tamanho e Partições do Debian

No mínimo, GNU/Linux necessita de uma partição para si mesmo. Poderá ter uma
única partição contendo todo o sistema operativo, aplicações e os seus
ficheiros pessoais. A maioria das pessoas sente que uma partição swap separada
também é necessária, sendo que isto não é realmente verdade. A "Swap" é um
espaço utilizado por um sistema operativo, que permite ao sistema usar espaço
de disco como "memória virtual". Colocando a swap numa partição separada, o
Linux poderá fazer um uso mais eficiente dela. É possível forçar o Linux a
utilizar um ficheiro normal como swap, mas isto não é recomendado.

A maioria das pessoas escolhem dar ao GNU/Linux mais que o número mínimo de
partições. No entanto, existem duas razões para querer dividir o sistema de
arquivos em partições mais pequenas. O primeiro é a segurança. Se algo
acontecer e corromper seu sistema de arquivos, geralmente só é afetada uma
partição. Assim, terá somente que substituir (utilizando backups do sistema)
uma parte do sistema. No mínimo poderá considerar a criação do que é
normalmente chamado "partição raiz". Ela contém os componentes mais essenciais
do sistema. Se for corrompida qualquer outra partição, poderá ainda inicializar
no GNU/Linux e corrigir o sistema. Isto pode evitar-lhe que tenha de reinstalar
o sistema a partir do nada.

A segunda razão é que por norma é mais importante num meio empresarial, mas
realmente depende da sua utilização da máquina. Por exemplo, um servidor de
mail que recebe e-mail de spam pode facilmente encher a partição. Se no
servidor de email fez da /var/mail uma partição separada, a maioria do sistema
irá continuar a funcionar mesmo que esteja a receber spam.

O único inconveniente real em optar por mais do que uma partição é que
torna-se, por vezes, difícil saber em avanço quais serão as suas necessidades.
Se fizer uma partição muito pequena então poderá ter que reinstalar o sistema
ou mover constantemente coisas para outros diretórios para arranjar espaço numa
tão pequena partição. Por outro lado, se fizer uma partição muito grande,
estará desperdiçando espaço em disco que poderia ser utilizado noutro lugar.
Hoje em dia um disco é barato, mas porquê desperdiçar dinheiro?

C.2. A Árvore de Diretórios

Debian GNU/Linux adere ao Filesystem Hierarchy Standard para os nomes de
diretórios e de ficheiros. Este padrão permite aos utilizadores e a programas
de software predizer o local dos ficheiros e diretórios. O nível do diretório
raiz é representada simplesmente por uma barra /. No nível raiz, todos os
sistemas Debian incluem estes diretórios:

┌─────────┬───────────────────────────────────────────────────────┐
│Diretório│                       Conteúdo                        │
├─────────┼───────────────────────────────────────────────────────┤
│bin      │Comandos binários essenciais                           │
├─────────┼───────────────────────────────────────────────────────┤
│boot     │Ficheiros estáticos do gestor de arranque              │
├─────────┼───────────────────────────────────────────────────────┤
│dev      │Ficheiros de dispositivos                              │
├─────────┼───────────────────────────────────────────────────────┤
│etc      │Configurações específicas do sistema da máquina        │
├─────────┼───────────────────────────────────────────────────────┤
│home     │Diretório home do(s) utilizador(es)                    │
├─────────┼───────────────────────────────────────────────────────┤
│lib      │Bibliotecas essenciais partilhadas e módulos do kernel │
├─────────┼───────────────────────────────────────────────────────┤
│media    │Contém pontos de montagem para media amovível          │
├─────────┼───────────────────────────────────────────────────────┤
│mnt      │Local de montagem temporária de um sistema de ficheiros│
├─────────┼───────────────────────────────────────────────────────┤
│proc     │Diretório virtual para informações do sistema          │
├─────────┼───────────────────────────────────────────────────────┤
│root     │Diretório home do utilizador root                      │
├─────────┼───────────────────────────────────────────────────────┤
│run      │Dados de execução variáveis                            │
├─────────┼───────────────────────────────────────────────────────┤
│sbin     │Binários essenciais do sistema                         │
├─────────┼───────────────────────────────────────────────────────┤
│sys      │Diretório virtual para informações do sistema          │
├─────────┼───────────────────────────────────────────────────────┤
│tmp      │Ficheiros temporários                                  │
├─────────┼───────────────────────────────────────────────────────┤
│usr      │Hierarquia secundária                                  │
├─────────┼───────────────────────────────────────────────────────┤
│var      │Dados variáveis                                        │
├─────────┼───────────────────────────────────────────────────────┤
│srv      │Dados para os serviços disponibilizados pelo sistema   │
├─────────┼───────────────────────────────────────────────────────┤
│opt      │Pacotes de software e aplicações adicionais            │
└─────────┴───────────────────────────────────────────────────────┘

O seguinte é uma lista de considerações importantes relacionadas com diretórios
e partições. Note que a utilização do disco varia muito com a configuração do
sistema e padrões de utilização específicos. As recomendações aqui são linhas
de orientação gerais e disponibilizam um ponto de partida para particionar.

  • A partição raiz / tem de conter fisicamente sempre /etc, /bin, /sbin, /lib
    e /dev, caso contrário não lhe será possível arrancar. Tipicamente são
    necessários 250-350MB para a partição raiz.

  • /usr: contém todos os programas dos utilizadores (/usr/bin), bibliotecas (/
    usr/lib), documentação (/usr/share/doc), etc. Esta é a porção do sistema de
    ficheiros que geralmente requer mais espaço. Deverá fornecer pelo menos 500
    MB de espaço em disco. Este tamanho deve aumentar dependendo do número e
    tipo de pacotes que planeia instalar. Uma generosa estação de trabalho deve
    permitir uns 4-6 GB.

  • Agora é recomendado ter /usr na partição raiz /, caso contrário poderá
    causar alguns problemas no arranque. Isto significa que deve disponibilizar
    pelo menos 600-750MB de espaço em disco para a partição raiz incluindo /
    usr, ou 5-6GB para a instalação de estação de trabalho ou de servidor.

  • /var: dados variáveis tais como artigos de news , e-mails, web sites, bases
    de dados, cache do sistema de pacotes, etc. serão guardados sob este
    diretório. O tamanho deste diretório depende muito da utilização do seu
    sistema, mas para a maioria das pessoas irá ser ditado pelo espaço
    utilizado gestor de pacotes. Se vai fazer uma instalação completa com tudo
    aquilo que Debian tem para oferecer, numa só sessão, coloque de parte uns 2
    ou 3 GB de espaço para /var que deverão ser suficientes. Se vai instalar
    por partes (isto é, instalar serviços e utilitários, seguidos de materiais
    de texto, depois o X, ...), poderá safar-se com 300-500 MB. Se o espaço no
    disco rígido está a prémio e você não planeia fazer grandes atualizações ao
    sistema, poderá safar-se com uns 30 ou 40 MB.

  • /tmp: dados temporários criados por programas irão provavelmente para este
    diretório. Normalmente 40-100 MB são suficientes. Algumas aplicações --
    incluindo manipuladores de arquivos, utilitários de criação de CD/DVD, e
    software multimédia -- podem utilizar /tmp para guardar ficheiros de
    imagens. Se você planeia utilizar essas aplicações, você deve ajustar de
    acordo o espaço disponível em /tmp.

  • /home: todos os utilizadores irão colocar os seus dados pessoais num
    sub-diretório deste diretório. O seu tamanho depende de quantos
    utilizadores irão utilizar o sistema e que ficheiros irão ser guardados nos
    seus diretórios. Dependendo da utilização planeada deverá reservar cerca de
    100MB para cada utilizador, mas adapte este valor ás suas necessidades.
    Reserve muito mais espaço se planeia guardar muitos ficheiros multimédia
    (fotografias, MP3, filmes) no seu diretório home.

C.3. Esquema Recomendado de Particionamento

Para novos utilizadores, máquinas pessoais Debian, sistemas domésticos, e
outras configurações de utilizador único, uma única partição / (mais swap) é
provavelmente o método mais simples e fácil de fazer. O tipo de partição
recomendado é ext4.

Para sistemas multi-utilizador ou sistemas com muito espaço de disco, é melhor
optar por ter a /var, /tmp, e /home cada uma na sua própria partição, separadas
da partição /.

Poderá necessitar de uma partição /usr/local separada se planear instalar
muitos programas que não façam parte da distribuição Debian. Se a sua máquina
irá ser um servidor de mail, poderá necessitar de fazer de /var/mail uma
partição separada. Se estiver a configurar um servidor com muitas contas de
utilizador, normalmente é bom ter uma grande partição /home separada. Em geral,
o esquema de particionamento varia de computador para computador dependendo do
seu uso.

Para sistemas muito complexos, deverá ver o Multi Disk HOWTO. Contém informação
aprofundada, de grande interesse para ISPs e pessoas que configuram servidores.

No que respeita ao tamanho da partição swap, existem muitos pontos de vista.
Uma regra que funciona bem é usar tanto espaço de swap como memória do seu
sistema. Também não deve ser menor do que 512MB, na maioria dos casos. Claro,
que existem excepções a estas regras.

Como exemplo, uma máquina de casa antiga pode ter 512MB de RAM e um disco SATA
de 20GB em /dev/sda. Pode haver uma partição de 8GB para outro sistema
operativo em /dev/sda1, uma partição swap de 512MB em /dev/sda3 e cerca de
11.4.GB em /dev/sda2) como partição Linux.

Para ter uma ideia do espaço que será utilizado pelas tarefas que estiver
interessado em adicionar após a instalação do seu sistema estar completa, veja
a Secção D.2, "Espaço em Disco Necessário para Tarefas".

C.4. Nomes de Dispositivos em Linux

Os nomes de discos e partições em Linux podem ser diferentes dos outros
sistemas operativos. Tem de conhecer os nomes que Linux utiliza quando criar e
monta partições. Aqui está o esquema básico de nomes:

  • O primeiro disco detetado é chamado /dev/sda.

  • O segundo disco detetado é chamado /dev/sdb, e assim por diante.

  • O primeiro CD-ROM SCSI tem o nome /dev/scd0, também é conhecido como /dev/
    sr0.

As partições em cada disco são representadas acrescentando-se um número decimal
ao nome do disco: sda1 e sda2 representam a primeira e a segunda partição do
primeiro dispositivo SCSI no seu sistema.

Aqui está um exemplo real. Vamos assumir que tem um sistema com 2 discos SCSI,
um no endereço 2 do SCSI e outro no endereço 4 do SCSI. O primeiro disco (no
endereço 2) tem então o nome de sda, e o segundo sdb. Se o dispositivo sda tem
3 partições, estas poderão ter os seguintes nomes sda1, sda2, e sda3. O mesmo
se aplica ao sdb e as suas partições.

Note que se tem dois host bus adapters SCSI (ex., controladores), a ordem dos
dispositivos pode ficar confusa. A melhor solução neste caso é vigiar as
mensagens de arranque, supondo que você conhece os modelos e/ou capacidades dos
dispositivos.

Linux representa as partições primárias com o nome do dispositivo, mais os
números de 1 a 4. Por exemplo, a primeira partição primária no primeiro disto é
/dev/sda1. As partições lógicas são numeradas a partir do 5, portanto a
primeira partição lógica no mesmo disco é /dev/sda5. Lembre-se que a partição
estendida, isto é, a partição primária que tem partições lógicas, não é
utilizada por ela própria.

C.5. Programas de Particionamento em Debian

Foram adaptados pelos Debian developers diversas variedades de programas de
particionamento para funcionar com vários tipos de discos rígidos e
arquiteturas de computadores. Segue-se uma lista de programa(s) aplicáveis para
a sua arquitetura.

partman

    Ferramenta de particionamento recomendada em Debian. Este canivete suíço
    também pode redimensionar partições, criar sistemas de ficheiros ("formatar
    " na linguagem Windows) e atribuir-lhes pontos de montagem.

fdisk

    O particionador original do Linux, bom para gurus.

    Cuidado se tiver partições FreeBSD na sua máquina. O kernel de instalação
    inclui suporte para estas partições, mas a forma como o fdisk as representa
    (ou não) pode fazer com que os nomes dos dispositivos sejam diferentes.
    Veja o Linux+FreeBSD HOWTO.

cfdisk

    Um particionador de disco de ecrã inteiro de simples utilização para o
    resto de nós.

    Note que cfdisk não compreende de todo partições FreeBSD, e, novamente,
    como resultado os nomes dos dispositivos podem ser diferentes.

Um destes programas será corrido por predefinição quando selecionar Particionar
discos (ou similar). Pode ser possível utilizar uma ferramenta de
particionamento diferente a partir da linha de comandos no VT2, mas isto não é
recomendado.

Lembre-se de marcar a sua partição de arranque como "De Arranque".

C.5.1. Particionar para 64-bit PC

Se estiver a utilizar um disco rígido novo (ou se quiser apagar a tabela de
partições do disco), terá de ser criada uma nova tabela de partições. O "
Particionamento Guiado" faz isto automaticamente, mas quando fizer o
particionamento manualmente, mova a seleção para a entrada mais alta do disco e
carregue em Enter. Isso irá criar uma nova tabela de partições nesse disco. No
modo avançado, ser-lhe-á questionado pelo tipo de tabela de partições. O
predefinido para sistemas UEFI é "gpt", enquanto que para as antigas BIOS o
valor predefinido é "msdos". Nas instalações com prioridade standard estas
predefinições serão automaticamente utilizadas.

Nota

Quando for selecionada uma tabela de partições com o tipo "gpt" (predefinido
para sistemas UEFI), será automaticamente criado um espaço livre de 1 MB no
inicio do disco. Isto é intencional e é necessário para embeber o gestor de
arranque GRUB2.

Se tem outro sistema operativo existente tal como o DOS ou Windows e quiser
preservar esse sistema operativo enquanto instalar Debian, poderá necessitar de
redimensionar a sua partição de modo a libertar espaço para para a instalação
de Debian. O instalador suporta o redimensionamento de ambos os sistemas de
ficheiros FAT e NTFS; Quando chegar à etapa de particionamento no instalador,
escolha a opção Manual e depois simplesmente escolha uma partição existente e
altere o seu tamanho.

Enquanto que os sistemas modernos UEFI não têm limitações como as listadas
abaixo, a antiga BIOS do PC geralmente acrescenta limitações adicionais ao
particionamento do disco. Existe um limite do número de partições "primárias" e
"lógicas" que um disco pode conter. Adicionalmente, com BIOS anteriores a
1994-98, existem limites do disco que a BIOS pode arrancar. Poderá encontrar
mais informação no Linux Partition HOWTO mas esta seção irá incluir uma breve
vista geral para ajudá-lo a planear a maioria das situações.

Partições "Primárias" são o esquema de particionamento original para discos em
PC. Contudo, apenas poderão existir 4. Para ultrapassar esta limitação, foram
inventadas partições "estendidas" e "lógicas". Ajustando uma das suas partições
primárias como partição estendida, pode subdividir todo o espaço alocado a essa
partição em partições lógicas. Pode criar até 60 partições lógicas por partição
estendida; contudo, apenas pode ter uma única partição estendida por disco.

Linux limita as partições por dispositivo a 255 partições para discos SCSI (3
usadas como partições primárias, 252 partições lógicas), e 63 partições num
dispositivo IDE (3 usadas como partições primárias, 60 partições lógicas).
Contudo o normal no sistema Debian GNU/Linux é fornecer apenas 20 dispositivos
por partição, não poderá portanto instalar mais que 20 numa partição a menos
que primeiro crie manualmente dispositivos para essas partições.

Se tiver um disco IDE de grande capacidade, e não estiver a utilizar nem
endereçamento LBA nem drivers overlay (por vezes fornecidos pelos fabricantes
de discos rígidos), então a partição de arranque (a partição que contém a sua
imagem de kernel) tem de ser colocada dentro dos primeiros 1024 cilindros do
seu disco rígido (por norma cerca de 524 megabytes, sem a tradução da BIOS).

Esta restrição não se aplica se tiver uma BIOS mais recente que 1995-98
(dependendo do fabricante) que suporte a "Enhanced Disk Drive Support
Specification". mbr a alterntiva ao Lilo de Debian tem de utilizar a BIOS para
ler o kernel do disco para a RAM. Se as extensões para o acesso a discos de
grandes dimensões da int 0x13 da BIOS estiverem presentes, estas poderão ser
utilizadas. Caso contrário, o interface antigo de acesso ao disco é utilizado
como recurso, e não pode ser utilizado para endereçar qualquer localização
acima do 1023º cilindro. Uma vez o Linux arrancou, não interessa que BIOS o seu
computador tenha, estas restrições já não se aplicam mais, já que o Linux não
utiliza a BIOS para acesso ao disco.

Se tem um disco de grande capacidade, poderá querer utilizar as técnicas de
tradução de cilindros, que pode ajustar a partir do programa de configuração da
BIOS, tal como LBA (Logical Block Addressing) ou o modo de tradução CHS ("Large
"). Mais informação sobre questões com discos de grande capacidade, poderá ser
encontrada no Large Disk HOWTO. Se está a utilizar o esquema de tradução de
cilindros, e a BIOS não suporta acesso a extensões de discos de grande
capacidade, então a sua partição boot tem de encaixar na representação 
traduzida dos primeiros 1024 cilindros.

O modo recomendado de realizar isto é criar uma pequena partição (25-50MB devem
ser suficientes) no início do disco para ser usado como partição de arranque, e
então criar todas as outras partições que quer ter, na restante área. Esta
partição de arranque tem de ser montada em /boot, dado que esta é o diretório
onde o(s) kernel Linux serão guardados. Esta configuração funcionará em
qualquer sistema, independentemente se é utilizada a tradução LBA ou large disk
CHS, e independente da sua BIOS suportar extensões de acesso a discos de
elevada capacidade.

Apêndice D. Miscelânea

Índice

D.1. Dispositivos em Linux

    D.1.1. Preparar o Seu Rato

D.2. Espaço em Disco Necessário para Tarefas
D.3. Instalar Debian GNU/Linux a partir de um sistema Unix/Linux

    D.3.1. Iniciar
    D.3.2. Instalar debootstrap
    D.3.3. Correr debootstrap
    D.3.4. Configurar o Sistema Base
    D.3.5. Instalar um Kernel
    D.3.6. Configurar o Gestor de Arranque
    D.3.7. Acesso remoto: Instalar SSH e definir o acesso
    D.3.8. Últimos toques

D.4. Instalar Debian GNU/Linux a partir de uma linha IP Paralela (PLIP)

    D.4.1. Requisitos
    D.4.2. Configurar a fonte
    D.4.3. Instalar o alvo

D.5. Instalar Debian GNU/Linux utilizando PPP over Ethernet (PPPoE)

D.1. Dispositivos em Linux

Em Linux podem ser encontrados vários ficheiros especiais sob o diretório /dev.
Estes ficheiros são chamados de ficheiros de dispositivo e comportam-se de
forma diferente dos ficheiros normais. Os tipos mais comuns de ficheiros de
dispositivo são para os dispositivos de bloco e de caracteres. Estes ficheiros
são um interface para o driver (parte do kernel Linux) que por sua vez acede ao
hardware. Outro tipo de ficheiro de dispositivo, menos comum, é o chamado pipe.
Os ficheiros de dispositivos mais importantes estão listados nas tabelas
abaixo.

┌────┬──────────────────────────────────────────┐
│sda │Primeiro disco rígido                     │
├────┼──────────────────────────────────────────┤
│sdb │Segundo disco rígido                      │
├────┼──────────────────────────────────────────┤
│sda1│Primeira partição do primeiro disco rígido│
├────┼──────────────────────────────────────────┤
│sdb7│Sétima partição do segundo disco rígido   │
└────┴──────────────────────────────────────────┘

┌───┬────────────────┐
│sr0│Primeiro CD-ROM │
├───┼────────────────┤
│sr1│Segundo CD-ROM  │
└───┴────────────────┘

┌───────┬────────────────────────────────────────────────────────────────┐
│ttyS0  │Porto Série 0, COM1 em MS-DOS                                   │
├───────┼────────────────────────────────────────────────────────────────┤
│ttyS1  │Porta série 2, COM2 em MS-DOS                                   │
├───────┼────────────────────────────────────────────────────────────────┤
│psaux  │Dispositivo de rato PS/2                                        │
├───────┼────────────────────────────────────────────────────────────────┤
│gpmdata│Pseudo dispositivo, daemon repetidor de informação do GPM (rato)│
└───────┴────────────────────────────────────────────────────────────────┘

┌─────┬────────────────────────────────────────────────────┐
│cdrom│Link simbólico para a drive de CD-ROM               │
├─────┼────────────────────────────────────────────────────┤
│mouse│Link simbólico para o ficheiros de dispositivo mouse│
└─────┴────────────────────────────────────────────────────┘

┌────┬─────────────────────────────────────────────────────────────┐
│null│Tudo o que for escrito para este dispositivo irá desaparecer │
├────┼─────────────────────────────────────────────────────────────┤
│zero│É possível ler infinitamente zeros a partir deste dispositivo│
└────┴─────────────────────────────────────────────────────────────┘

D.1.1. Preparar o Seu Rato

O rato pode ser utilizado quer no ambiente de consola Linux (com gpm) quer no
ambiente de janelas X. Normalmente, é uma simples questão de instalar o gpm e o
próprio servidor X. Ambos devem ser configurados para utilizarem como
dispositivo de rato /dev/input/mice. O protocolo correto do rato é chamado
exps2 no gdm, e ExplorerPS/s no X. Os respetivos ficheiros de configuração são
/etc/gpm.conf e /etc/X11/xorg.conf.

Têm de ser carregados certos módulos do kernel para que o seu rato funcione. Na
maioria dos casos os módulos corretos são auto-detetados, mas não o são sempre
para o antigo rato série e bus^[23], que são extremamente ratos excepto em
computadores muito antigos. O sumário dos módulos do kernel Linux que são
necessários para diferentes tipos de ratos:

┌────────┬───────────────────────────────────────────────┐
│ Módulo │                   Descrição                   │
├────────┼───────────────────────────────────────────────┤
│psmouse │Rato PS/2 (deverá ser auto-detetado)           │
├────────┼───────────────────────────────────────────────┤
│usbhid  │Rato USB (deverá ser auto-detetado)            │
├────────┼───────────────────────────────────────────────┤
│sermouse│A maioria dos ratos série                      │
├────────┼───────────────────────────────────────────────┤
│logibm  │Rato bus ligado a placa adaptadora Logitech    │
├────────┼───────────────────────────────────────────────┤
│inport  │Rato bus ligado a placa ATI ou Microsoft InPort│
└────────┴───────────────────────────────────────────────┘

Para carregar um módulo de controlador de rato, pode utilizar o comando modconf
(a partir do pacote com o mesmo nome) e ver na categoria kernel/drivers/input/
mouse.

D.2. Espaço em Disco Necessário para Tarefas

A instalação standard para a arquitetura amd64, incluindo todos os pacotes
standard e utilizando o kernel predefinido, ocupa 971MB de espaço em disco. Uma
instalação base minimalista, sem a tarefa "Sistema standard" selecionada,
ocupará 769MB.

Importante

Em ambos os casos este é o verdadeiro espaço em disco utilizado após a
instalação estar concluída e quaisquer ficheiros temporários apagados. Também
não tem em conta o overhead utilizado pelo sistema de ficheiros, por exemplo
para ficheiros journal. Isto significa que é necessário significativamente mais
espaço durante a instalação e para a utilização normal do sistema.

A tabela seguinte lista os tamanhos reportados pelo aptitude para as tarefas
listadas com o tasksel. Note que algumas tarefas têm constituintes que se
sobrepõem, por isso o total do tamanho instalado de duas tarefas pode ser menor
que o total obtido somando os números.

Por predefinição o instalador irá instalar o ambiente de trabalho GNOME, mas
podem ser escolhidos ambientes de trabalho alternativos quer utilizando uma das
imagens de instalação especial, ou especificando o ambiente de trabalho
desejado durante a instalação (veja a Secção 6.3.6.2, "Escolher e Instalar
Software").

Note que irá necessitar de somar os tamanhos listados na tabela ao tamanho da
instalação standard quando determinar o tamanho das partições. A maioria dos
tamanhos listados como "Tamanho Instalado" irá acabar em /usr e em /lib/; o
tamanho listado como "Tamanho do download" é (temporariamente) necessário em /
var.

┌────────────────┬───────────────┬─────────────────┬──────────────────────────┐
│     Tarefa     │    Espaço     │   Tamanho do    │  Espaço necessário para  │
│                │instalado (MB) │  download (MB)  │      instalar (MB)       │
├────────────────┼───────────────┼─────────────────┼──────────────────────────┤
│Ambiente Desktop│               │                 │                          │
├────────────────┼───────────────┼─────────────────┼──────────────────────────┤
│  • GNOME       │2790           │786              │3576                      │
│(predefinido)   │               │                 │                          │
├────────────────┼───────────────┼─────────────────┼──────────────────────────┤
│  • KDE Plasma  │4122           │1212             │5334                      │
├────────────────┼───────────────┼─────────────────┼──────────────────────────┤
│  • Xfce        │2187           │621              │2808                      │
├────────────────┼───────────────┼─────────────────┼──────────────────────────┤
│  • LXDE        │2271           │653              │2924                      │
├────────────────┼───────────────┼─────────────────┼──────────────────────────┤
│  • MATE        │2574           │711              │3285                      │
├────────────────┼───────────────┼─────────────────┼──────────────────────────┤
│  • Cinnamon    │4197           │1251             │5448                      │
├────────────────┼───────────────┼─────────────────┼──────────────────────────┤
│Servidor Web    │44             │11               │55                        │
├────────────────┼───────────────┼─────────────────┼──────────────────────────┤
│Servidor de SSH │2              │0                │2                         │
└────────────────┴───────────────┴─────────────────┴──────────────────────────┘

Se instalar noutra linguagem que não Inglês, o tasksel pode instalar
automaticamente uma tarefa de localização, se estiver alguma disponível para a
sua linguagem. As necessidades de espaço diferem por linguagem; você deve
permitir até um total de 350MB para download e instalação.

D.3. Instalar Debian GNU/Linux a partir de um sistema Unix/Linux

Esta seção explica como instalar Debian GNU/Linux a partir de um sistema Unix
ou Linux existente, sem utilizar o instalador guiado pelo menu como é explicado
no resto do manual. Este "cross-install" HOWTO foi pedido por utilizadores que
mudam para Debian GNU/Linux a partir de Red Hat, Mandriva e SUSE. Nesta seção é
assumida alguma familiaridade em introduzir comandos *nix e navegar através do
sistema de ficheiros. Nesta seção, $ simboliza um comando a ser escrito pelo
utilizador do sistema atual, e # refere-se a comandos introduzidos no chroot
Debian.

Assim que tiver o novo sistema Debian configurado de acordo com as suas
preferências, você pode migrar os dados existentes dos utilizadores (se os
tiver) para lá, e continuar a rolar. Isto é portanto uma instalação Debian GNU/
Linux com "zero paragens". É também uma maneira inteligente de lidar com
hardware que de outro modo não se dá bem com os vários media ou tipos de
arranque.

Nota

Como isto é principalmente um procedimento manual, você deve ter em conta que
tem de fazer muita da configuração básica do próprio sistema, a qual requer
mais conhecimentos de Debian e de Linux em geral do que fazer uma instalação
normal. Não pode esperar que este procedimento resulte num sistema idêntico ao
criado a partir de uma instalação normal. Deve também ter em mente que este
procedimento apenas dá os passos básicos para instalar um sistema. Poderão ser
necessários passos adicionais de instalação/configuração.

D.3.1. Iniciar

Com as suas atuais ferramentas *nix de particionamento, reparticione o disco
rígido conforme necessário, criando pelo menos um sistema de ficheiros e swap.
Necessita cerca de 769MB de espaço disponível para a instalação de apenas
consola, ou pelo menos cerca de 2271MB se planeia instalar o X (mais se
tencionar instalar ambientes de desktop como o GNOME ou o KDE Plasma).

De seguida, criar os sistemas de ficheiros nas partições. Por exemplo, para
criar um sistema de ficheiros ext3 na partição /dev/sda6 (é a nossa partição
raiz no nosso exemplo):

# mke2fs -j /dev/sda6

Em vez disso para criar um sistema de ficheiros ext2, omita -j.

Inicializar e ativar a swap (substitua o número da partição pela partição swap
Debian que deseja):

# mkswap /dev/sda5
# sync
# swapon /dev/sda5

Monte uma partição como /mnt/debinst (o ponto de instalação, para ser o sistema
de ficheiros raiz (/) no seu novo sistema). O nome do ponto de montagem é
estritamente arbitrário, é referenciado posteriormente mais abaixo.

# mkdir /mnt/debinst
# mount /dev/sda6 /mnt/debinst

Nota

Se desejar ter partes do sistema de ficheiros (e.g. /usr) montados em partições
separadas, terá de criar e montar manualmente esses diretórios antes de
proceder para a próxima etapa.

D.3.2. Instalar debootstrap

O utilitário utilizado pelo instalador Debian, e reconhecido como a forma
oficial de instalar um sistema base Debian, é o debootstrap. Este utiliza o 
wget e ar, mas de outra forma depende apenas de /bin/sh e de utilitários Unix/
Linux básicos^[24]. Instale o wget e ar se não estiverem já no seu sistema
atual, depois faça o download e instale o debootstrap.

Ou, pode utilizar o seguinte procedimento para instalá-lo manualmente. Crie um
diretório de trabalho para extrair lá o .deb:

# mkdir work
# cd work

O binário debootstrap está localizado no arquivo Debian (assegure-se que
escolhe o ficheiro adequado para a sua arquitetura). Faça o download do .deb 
debootstrap a partir do pool, copie o pacote para o diretório de trabalho, e
extraia dele os ficheiros. Você necessita ter privilégios de root para instalar
os ficheiros.

# ar -x debootstrap_0.X.X_all.deb
# cd /
# zcat /full-path-to-work/work/data.tar.gz | tar xv

D.3.3. Correr debootstrap

O debootstrap pode fazer o download dos ficheiros necessários diretamente do
arquivo quando o executar. Pode substituir qualquer mirror de arquivo por
http.us.debian.org/debian no exemplo do comando abaixo, de preferência um
mirror perto da sua rede. Os mirrors estão listados em http://www.debian.org/
mirror/list.

Se possuir uma imagem de instalação Debian GNU/Linux bullseye montada em /
cdrom, poderá substituir um URL de ficheiro em vez do URL http: file:/cdrom/
debian/

Substitua um dos seguintes por ARCH no comando debootstrap: amd64, arm64, armel
, armhf, i386, mips64el, mipsel, ppc64el, s390x.

# /usr/sbin/debootstrap --arch ARCH bullseye \
     /mnt/debinst http://ftp.us.debian.org/debian

Se a arquitetura do alvo for diferente da do anfitrião, deve acrescentar a
opção --foreign.

D.3.4. Configurar o Sistema Base

Agora tem um verdadeiro sistema Debian, embora um pouco leve, no disco. Faça 
chroot para lá:

# LANG=C.UTF-8 chroot /mnt/debinst /bin/bash

Se a arquitetura do alvo for diferente da do anfitrião, primeiro terá de copiar
qemu-user-static para a nova máquina:

# cp /usr/bin/qemu-ARCH-static /mnt/debinst/usr/bin
# LANG=C.UTF-8 chroot /mnt/debinst qemu-ARCH-static /bin/bash

Após fazer chroot pode ter de configurar a definição do terminal para ser
compatível com o sistema base Debian, por exemplo:

# export TERM=xterm-color

Dependendo do valor de TERM, poderá ter de instalar o pacote ncurses-term para
ter suporte ao mesmo.

Se a arquitetura do alvo for diferente da da máquina do anfitrião, tem de
terminar o arranca das várias etapas:

/debootstrap/debootstrap --second-stage

D.3.4.1. Criar ficheiros de dispositivos

Nesta altura o /dev/ contém apenas ficheiros de dispositivos muito básicos.
Para as próximas etapas da instalação poderão ser necessários ficheiros de
dispositivos adicionais. Existem diferentes formas de fazer isto, o método que
deve utilizar depende da máquina que estiver a utilizar para a instalação, ou
se pretende utilizar um kernel modular ou não, e se pretende utilizar ficheiros
de dispositivos dinâmicos (e.g. utilizando o udev) ou estáticos para o seu novo
sistema.

Algumas das opções disponíveis são:

  • instalar o pacote makedev, e criar um conjunto predefinido de ficheiros de
    dispositivos estáticos utilizando (após fazer chroot)

    # apt install makedev
    # mount none /proc -t proc
    # cd /dev
    # MAKEDEV generic

  • criar manualmente apenas ficheiros de dispositivos específicos utilizando o
    MAKEDEV

  • ligar a montagem /dev do seu sistema anfitrião em cima do /dev do sistema
    alvo; note que os scripts postinst de alguns pacotes podem tentar criar
    ficheiros de dispositivos, por isso esta opção deve ser utilizada com
    cuidado

D.3.4.2. Partições a Montar

Tem de criar /etc/fstab.

# editor /etc/fstab

Aqui está um exemplo que pode modificar para adequar:

# /etc/fstab: informação do sistema de ficheiros estáticos.
#
# file system    mount point   type    options                  dump pass
/dev/XXX         /             ext3    defaults                 0    1
/dev/XXX         /boot         ext3    ro,nosuid,nodev          0    2

/dev/XXX         none          swap    sw                       0    0
proc             /proc         proc    defaults                 0    0

/dev/cdrom       /media/cdrom  iso9660 noauto,ro,user,exec      0    0

/dev/XXX         /tmp          ext3    rw,nosuid,nodev          0    2
/dev/XXX         /var          ext3    rw,nosuid,nodev          0    2
/dev/XXX         /usr          ext3    rw,nodev                 0    2
/dev/XXX         /home         ext3    rw,nosuid,nodev          0    2

Para montar todos os sistemas de ficheiros que tem especificado em /etc/fstab,
utilize mount -a, ou para montar os sistemas de ficheiros individualmente,
utilize:

# mount /path   # e.g.: mount /usr

Os atuais sistemas Debian têm pontos de montagem para media amovível sob /media
mas mantém links simbólicos de compatibilidade em /. Crie estes conforme
necessário, por exemplo:

# cd media
# mkdir cdrom0
# ln -s cdrom0 cdrom
# cd /
# ln -s media/cdrom

Pode montar o sistema de ficheiros proc várias vezes e em localizações
arbitrárias, apesar de ser habitual em /proc. Se não utilizou mount -a,
assegure-se que monta o proc antes de continuar:

# mount -t proc proc /proc

O comando ls /proc deve agora mostrar um diretório não-vazio. Se isto falhar,
você pode montar o proc fora da chroot:

# mount -t proc proc /mnt/debinst/proc

D.3.4.3. Configurar o Fuso Horário

Definir a terceira linha do ficheiro /etc/adjtime para "UTC" ou para "LOCAL"
determina se o sistema irá interpretar o relógio de hardware como estando
definido para UTC ou para hora local. O seguinte comando permite-lhe definir
isso.

# editor /etc/adjtime

Aqui está uma amostra:

0.0 0 0.0
0
UTC

O seguinte comando permite-lhe escolher o seu fuso horário.

# dpkg-reconfigure tzdata

D.3.4.4. Configurar a Rede

Para configurar a rede, edite /etc/network/interfaces, /etc/resolv.conf, /etc/
hostname e /etc/hosts.

# editor /etc/network/interfaces

Aqui estão alguns exemplos simples retirados de /usr/share/doc/ifupdown/
examples:

######################################################################
# /etc/network/interfaces -- ficheiro de configuração p/ ifup(8), ifdown(8)
# Veja a manpage interfaces(5) manpage para informação acerca de que
# opções estão disponíveis.
######################################################################

# O interface loopback já não é necessário, mas pode ser utilizado se
# necessário.
#
# auto lo
# iface lo inet loopback

# Para utilizar dhcp:
#
# auto eth0
# iface eth0 inet dhcp

# Exemplo de configuração com IP estático: (network, broadcast e gateway
# são opcionais)
#
# auto eth0
# iface eth0 inet static
#     address 192.168.0.42
#     network 192.168.0.0
#     netmask 255.255.255.0
#     broadcast 192.168.0.255
#     gateway 192.168.0.1

Introduza o(s) seu(s) servidor(es) de nomes e diretivas de procura em /etc/
resolv.conf:

# editor /etc/resolv.conf

Um simples /etc/resolv.conf de exemplo:

search example.com
nameserver 10.1.1.36
nameserver 192.168.9.100

Escreva o nome da máquina do seu sistema (2 a 63 caracteres):

# echo DebianHostName > /etc/hostname

E um /etc/hosts básico com suporte para IPv6:

127.0.0.1 localhost
127.0.1.1 DebianHostName

# As linhas seguintes são desejáveis para máquinas capazes de IPv6
::1     ip6-localhost ip6-loopback
fe00::0 ip6-localnet
ff00::0 ip6-mcastprefix
ff02::1 ip6-allnodes
ff02::2 ip6-allrouters
ff02::3 ip6-allhosts

Se tiver várias placas de rede, deve ordenar os nomes dos drivers dos módulos
no ficheiro /etc/modules com a ordem desejada. Depois, durante o arranque, cada
placa será associada com o nome do interface (eth0, eth1, etc.) que espera.

D.3.4.5. Configurar o Apt

O debootstrap terá criado um /etc/apt/sources.list muito básico que irá
permitir instalar pacotes adicionais. No entanto, poderá querer acrescentar
algumas fontes adicionais, por exemplo para pacotes de código-fonte e
actualizações de segurança:

deb-src http://ftp.us.debian.org/debian bullseye main

deb http://security.debian.org/ bullseye-security main
deb-src http://security.debian.org/ bullseye-security main

Assegure-se que corre apt update depois de ter feito alterações á lista de
fontes.

D.3.4.6. Configurar os Locales e o Teclado

Para configurar as suas definições de locale para utilizar outra linguagem que
não o Inglês, instale o pacote de suporte locales e configure-o. Atualmente é
recomendado utilizar locales UTF-8.

# apt install locales
# dpkg-reconfigure locales

Para configurar o seu teclado (se necessário):

# apt install console-setup
# dpkg-reconfigure keyboard-configuration

Note que o teclado não pode ser definido enquanto está no chroot, mas será
configurado para a próxima vez que reiniciar.

D.3.5. Instalar um Kernel

Se tencionar arrancar este sistema, provavelmente quer um kernel Linux e um
gestor de arranque. Identifique os kernels pré-compilados disponíveis com:

# apt search linux-image

Depois instale o pacote de kernel da sua escolha utilizando o seu nome de
pacote.

# apt install linux-image-arch-etc

D.3.6. Configurar o Gestor de Arranque

Para tornar o seu sistema Debian GNU/Linux de arranque, faça o gestor de
arranque carregar o kernel instalado com a sua nova partição raiz. Note que o 
debootstrap não instala um gestor de arranque, mas pode utilizar o apt dentro
do seu chroot Debian para o fazer.

Veja info grub para instruções acerca de como configurar o gestor de arranque.
Se está a manter o sistema que utilizou para instalar Debian adicione apenas
uma entrada ao seu grub.conf do grub2.

Instalar e configurar o grub2 é tão fácil como:

# apt install grub-pc
# grub-install /dev/sda
# update-grub

O segundo comando irá instalar o grub2 (neste caso no MBR de sda). O último
comando irá criar um /boot/grub/grub.cfg são e funcional.

Note que isto assume que foi criado um ficheiro de dispositivo /dev/sda.
Existem métodos alternativos para instalar o grub2, mas esses estão fora do
âmbito deste apêndice.

D.3.7. Acesso remoto: Instalar SSH e definir o acesso

Caso consiga fazer login no sistema através de consola, pode saltar esta seção.
Se o sistema deve posteriormente ser acessível através da rede, então necessita
instalar SSH e definir o seu acesso.

# apt install ssh

Por predefinição o login de root com palavra-passe está inativo, por isso
configurar o acesso pode ser feito definindo uma palavra-passe e ativando o
login de root com palavra-passe:

# passwd
# editor /etc/ssh/sshd_config

Esta é a opção a ativar:

PermitRootLogin yes

O acesso também pode ser configurado ao acrescentar uma chave ssh á conta de
root:

# mkdir /root/.ssh
# cat << EOF > /root/.ssh/authorized_keys
ssh-rsa ....
EOF

Por fim, o acesso pode ser definido ao acrescentar um utilizador que não seja o
root e definir uma palavra-passe:

# adduser ze
# passwd ze

D.3.8. Últimos toques

Tal como mencionado anteriormente, o sistema instalado irá ser muito básico. Se
quiser tornar o sistema um pouco mais maduro, existe um método fácil para
instalar todos os pacotes com a prioridade "standard":

# tasksel install standard

Claro que, pode também usar simplesmente o apt para instalar pacotes
individualmente.

Após a instalação irão estar muitos pacotes a que foi feito o download em /var/
cache/apt/archives/. Pode libertar algum espaço em disco ao correr:

# apt clean

D.4. Instalar Debian GNU/Linux a partir de uma linha IP Paralela (PLIP)

Esta seção explica como instalar Debian GNU/Linux num computador sem placa
Ethernet, mas sim com apenas uma gateway remota ligada através de um cabo
Null-modem (também chamado cabo Null-Printer). O computador gateway deve estar
ligado a uma rede que tenha um mirror Debian (e.g. à Internet).

No exemplo deste apêndice vamos configurar uma ligação PLIP utilizando uma
gateway ligada à Internet através de uma ligação dial-up (ppp0). Nós iremos
utilizar os endereços IP 192.168.0.1 e 192.168.0.2 para os interfaces PLIP
respetivamente nos sistemas alvo e fonte (estes endereços devem estar livres
dentro do seu espaço de endereçamento de rede).

A configuração da ligação PLIP durante a instalação também estará disponível
após reiniciar para o sistema instalado (veja o Capítulo 7, A Iniciar O Seu
Novo Sistema Debian).

Antes de começar, tem de verificar a configuração da BIOS (endereço base IO e
IRQ) para as portas paralelas de ambos os sistemas fonte e alvo. Os valores
mais comuns são io=0x378, irq=7.

D.4.1. Requisitos

  • Um computador alvo, chamado target, onde será instalado Debian.

  • Media de instalação do sistema; veja a Secção 2.4, "Meios de Instalação".

  • Outro computador ligado à Internet, chamado source, que irá funcionar como
    gateway.

  • Um cabo Null-Modem DB-25. Para mais informações acerca deste cabo e
    instruções de como fazer o seu veja o PLIP-Install-HOWTO.

D.4.2. Configurar a fonte

A seguinte shell script é um simples exemplo de como configurar o computador
fonte como uma gateway para a Internet utilizando ppp0.

#!/bin/sh

# Nós removemos do kernel módulos em execução para evitar conflitos e
# para os reconfigurar manualmente.
modprobe -r lp parport_pc
modprobe parport_pc io=0x378 irq=7
modprobe plip

# Configurar o interface plip (plip0 para mim, veja dmesg | grep plip)
ifconfig plip0 192.168.0.2 pointopoint 192.168.0.1 netmask 255.255.255.255 up

#Configurar a gateway
modprobe iptable_nat
iptables -t nat -A POSTROUTING -o ppp0 -j MASQUERADE
echo 1 > /proc/sys/net/ipv4/ip_forward

D.4.3. Instalar o alvo

Arranque a partir do meio de instalação. A instalação tem de ser corrida em
modo expert; escreva expert na prompt de arranque. Se necessitar definir
parâmetros para módulos do kernel, também o precisa fazer na linha de comandos
de arranque. Por exemplo, para arrancar o instalador e definir valores para as
opções "io" e "irq" para o módulo parport_pc, introduza o seguinte na linha de
comandos do arranque:

expert parport_pc.io=0x378 parport_pc.irq=7

Abaixo estão as respostas que devem ser dadas durante as várias etapas da
instalação.

 1. Carregar componentes a partir do meio de instalação

    Escolha a opção plip-modules na lista; isto irá disponibilizar os drivers
    PLIP para o sistema de instalação.

 2. Detetar hardware de rede

      □ Se o alvo tiver uma placa de rede, será mostrada uma lista de módulos
        das placas detetadas. Se quiser forçar o debian-installer a utilizar em
        vez disso plip, tem de retirar a seleção de todos os drivers de módulos
        listados. Obviamente, se o alvo não tiver placa de rede, o instalador
        não irá mostrar esta lista.

      □ Como não foi detetada/selecionada nenhuma placa de rede anteriormente,
        o instalador irá pedir-lhe para selecionar um módulo de driver de rede
        a partir de uma lista. Escolha o módulo plip.

 3. Configurar a rede

      □ Configurar automaticamente a rede com DHCP: Não

      □ Endereço IP: 192.168.0.1

      □ Endereço ponto-a-ponto: 192.168.0.2

      □ Endereços de servidor de nomes: você pode introduzir os mesmos
        endereços utilizados na fonte (veja /etc/resolv.conf)

D.5. Instalar Debian GNU/Linux utilizando PPP over Ethernet (PPPoE)

Em alguns países PPP over Ethernet (PPPoE) é um protocolo comum para ligações
de banda larga (ADSL ou cabo) para um provedor de serviço de Internet.
Configurar uma ligação de rede utilizando PPPoE não é, por predefinição,
suportado pelo instalador, mas pode ser posto a funcionar facilmente. Esta
seção explica como.

A ligação PPPoE configurada durante a instalação também estará disponível após
reiniciar para o sistema instalado (veja o Capítulo 7, A Iniciar O Seu Novo
Sistema Debian).

Para ter a opção de configurar a utilizar PPPoE durante a instalação, tem de
instalar utilizando uma das imagens de CD-ROM/DVD que estão disponíveis. Não é
suportado para outros métodos de instalação (e.g. netboot).

Instalar por PPPoE é basicamente o mesmo que qualquer outra instalação. Os
seguintes passos explicam as diferenças.

  • Arranque o instalador com o parâmetro de arranque modules=ppp-udeb^[25].
    Isto irá assegurar-se que o componente responsável pelo PPPoE (ppp-udeb)
    será carregado e automaticamente executado.

  • Siga os normais passos iniciais da instalação (linguagem, país e seleção de
    teclado; o carregamento de componentes adicionais do instalador^[26]).

  • O próximo passo é a deteção de hardware de rede, de modo a identificar
    quais placas Ethernet presentes no sistema.

  • Após isto começa a verdadeira configuração do PPPoE. O instalador irá
    detetar todos os interfaces Ethernet numa tentativa de encontrar um
    concentrador PPPoE (um tipo de servidor que lida com ligações PPPoE).

    É possível que o concentrador não seja encontrado à primeira tentativa.
    Isto pode ocasionalmente ocorrer em redes lentas ou cheias ou com
    servidores com falhas. Na maioria dos casos uma segunda tentativa para
    detetar o concentrador terá sucesso; para tentar novamente, escolha a
    partir do menu principal do instalador Configurar e iniciar uma ligação
    PPPoE.

  • Após ter sido encontrado um concentrador, será pedido ao utilizador para
    escrever a informação de login (o nome de utilizador de PPPoE e a
    palavra-chave).

  • Nesta altura o instalador irá utilizar a informação fornecida para
    estabelecer uma ligação PPPoE. Se foi fornecida a informação correta, a
    ligação PPPoE deve estar configurada e o instalador deverá ser capaz de a
    utilizar para ligar à Internet e através dela obter pacotes (caso
    necessário). Se a informação de login não for a correta ou acontecer algum
    erro, o instalador irá parar, mas poderá ser tentada novamente a
    configuração escolhendo a entrada do menu Configurar e iniciar uma ligação
    PPPoE.


━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

^[23] Os ratos série geralmente tem um conetor em forma de D com 9 buracos; o
bus rato tem um conetor redondo de 8 pinos, não deve ser confundido com o
conetor redondo de 6 pinos de um rato PS/2 ou o conetor redondo de 4 pinos de
um rato ADB.

^[24] Estes incluem utilitários GNU fundamentais e comandos tais como sed, grep
, tar e gzip.

^[25] Para informação acerca de como acrescentar um parâmetro de arranque veja
a Secção 5.1.7, "Um Ecrã de Arranque".

^[26] O componente ppp-udeb é carregado nesta etapa como um dos componentes
adicionais. Se desejar instalar com prioridade média ou baixa (modo avançado),
pode também escolher manualmente o ppp-udeb em vez de introduzir o parâmetro "
modules" na linha de comandos de arranque.

Apêndice E. Administrivia

Índice

E.1. Acerca deste Documento
E.2. Contribuir para este documento
E.3. Maiores Contribuições
E.4. Reconhecimento de Marcas Registadas

E.1. Acerca deste Documento

Este manual foi criado para o debian-installer do Sarge, baseado no manual de
instalação do Woody para boot-floppies, que foi baseado em manuais de
instalação anteriores, e no manual da distribuição Progeny, que foi lançado sob
a GPL em 2003.

Este Documento é escrito em DocBook XML. Os formatos exportados são gerados por
vários programas que utilizam informação dos pacotes docbook-xml e docbook-xsl.

Para aumentar a facilidade em manter este documento, usamos um número de
capacidades do XML, tais como atributos de identidades e perfis. Estes últimos
têm o papel semelhante a variáveis e condicionantes em linguagens de
programação. A fonte em XML deste documento contém informação para cada
arquitetura diferente -- são utilizados perfis de atributos para isolar certas
partes de texto que são específicos de cada arquitetura.

Tradutor e coordenador da tradução do manual para Português: Miguel Figueiredo
<elmig@debianpt.org>. Agradecimentos a todos os outros que contribuíram para a
tradução deste manual. Equipa Portuguesa de tradução contactável a partir de
DebianPT.org.

E.2. Contribuir para este documento

Se tem problemas ou sugestões relacionadas com este documento, deverá
submetê-las como um relatório de erro para o pacote installation-guide. Veja o
pacote reportbug ou leia a documentação online do Debian Bug Tracking System.
Seria melhor se primeiro pudesse verificar os relatórios de erro existentes
acerca do debian-installer-manual para verificar se o seu problema já foi
relatado. Caso seja o caso, poderá fornecer informação adicional de confirmação
ou de ajuda para <XXXX@bugs.debian.org>, onde XXXX é o número para o erro já
comunicado.

Melhor ainda, obtenha uma cópia da fonte deste documento em DocBook, e produza
patchs para esta. A fonte deste documento em DocBook pode ser encontrada no
installation-guide project on salsa. Se não está familiarizado com DocBook, não
se preocupe: existe um resumo simples no diretório manuals que o irá ajudar a
começar. É como html, mas orientado para o significado do texto mais do que a
sua apresentação. São bem-vindos patchs submetidos para a mailing list
debian-boot (veja abaixo). Para instruções de como descarregar as fontes via
git, veja o README do diretório raiz da fonte.

Por favor não contacte os autores deste documento diretamente. Existe também
uma lista de discussão para o debian-installer, que inclui discussões sobre
este manual. A mailing list é <debian-boot@lists.debian.org>. Instruções para a
subscrição desta lista podem ser encontradas na página de Subscrições de
Mailing Lists da Debian; ou então, pode navegar no Arquivo de Mailing List da
Debian online.

E.3. Maiores Contribuições

Este documento foi originalmente escrito por Bruce Perens, Sven Rudolph, Igor
Grobman, James Treacy e Adam Di Carlo. Sebastian Ley escreveu o Installation
HOWTO.

Miroslav Kuře documentou muitas novas funcionalidades on debian-installer do
Sarge. Frans Pop foi o editor principal e gestor de lançamentos durante os
lançamentos do Etch, Lenny e Squeeze.

Muitos e muitos utilizadores e developers de Debian contribuíram para este
documento. Tem de ser feita uma nota especial a Michael Schmitz (suporte para
m68k), Frank Neumann (autor original do manual de instalação para Amiga), Arto
Astala, Eric Delaunay/Ben Collins (informação sobre SPARC), Tapio Lehtonen, e
Stéphane Bortzmeyer pelas numerosas edições e textos. Nós temos que agradecer a
Pascal Le Bail que informação útil sobre como arrancar a partir de drives USB.

Textos e informação extremamente útil foi encontrada no HOWTO de Jim Mintha
para iniciar utilizando a rede (URL não disponível), no Debian FAQ, no Linux/
m68k FAQ, no Linux for SPARC Processors FAQ, no Linux/Alpha FAQ, entre outros.
Os maintainers destes recursos disponíveis livremente e ricas fontes de
informação devem ser reconhecidos.

Neste manual a seção de instalações chrooted (Secção D.3, "Instalar Debian GNU/
Linux a partir de um sistema Unix/Linux") derivou em parte de documentos com
copyright de Karsten M. Self.

Neste manual a seção de instalações através de plip (Secção D.4, "Instalar
Debian GNU/Linux a partir de uma linha IP Paralela (PLIP)" foi baseada no
PLIP-Install-HOWTO por Gilles Lamiral.

E.4. Reconhecimento de Marcas Registadas

Todas as marcas registadas são propriedade dos seus respetivos donos.

Apêndice F. GNU General Public License

Nota

This is an unofficial translation of the GNU General Public License into
Portuguese. It was not published by the Free Software Foundation, and does not
legally state the distribution terms for software that uses the GNU GPL -- only
the original English text of the GNU GPL does that. However, we hope that this
translation will help Portuguese speakers to better understand the GNU GPL.

Esta é uma tradução não-oficial da GNU General Public License para Português.
Não foi publicada pela Free Software Foundation, e não expressa legalmente os
termos de distribuição para o software que utiliza a GNU GPL -- apenas o faz o
texto em Inglês original da GNU GPL. No entanto, nós desejamos que esta
tradução ajude os que falam Português a compreender melhor a GNU GPL.

Versão 2, Junho de 1991

Copyright (C) 1989, 1991 Free Software Foundation, Inc.
51 Franklin St, Fifth Floor, Boston, MA 02110-1301, USA.
A todos é permitido copiar e distribuir cópias deste documento de licença com exatamente as mesmas palavras, mas modificá-lo não é permitido.

F.1. Preâmbulo

As licenças para a maioria do software são desenhadas para lhe tirar a sua
liberdade de o partilhar e alterar. Em contraste, a licença gnu General Public
License destina-se a garantir a sua liberdade de partilhar e modificar software
livre - para garantir que este software é livre para todos os seus
utilizadores. Esta licença General Public License aplica-se à maioria do
software da Free Software Foundation e para qualquer outro programa cujos
autores se comprometam a utilizá-la. (Algum outro software da Free Software
Foundation em vez disso é coberto pela licença gnu Library General Public
License.) Você pode aplicá-la também aos seus programas.

Quando nós falamos de software livre, nós estamos a referir-nos à liberdade,
não ao preço. As nossas General Public License são desenhadas de modo a
assegurar que você tenha a liberdade de distribuir cópias de software livre (e
cobrar por este serviço se assim o desejar), para que receba o código-fonte ou
que o possa obter se assim o desejar, que possa modificar o software ou
utilizar porções dele em novos programas livres; e que saiba que pode fazer
essas coisas.

Para proteger os seus direitos, nós precisamos fazer restrições que proíbam
alguém de lhe negar estes direitos ou de pedir-lhe para libertar os direitos.
Estas restrições traduzem-se em certas responsabilidades para si se distribuir
cópias do software, ou se o modificar.

Por exemplo, se distribuir cópias de um desses programa, quer seja grátis ou
por uma taxa, deve dar a quem o recebe todos os direitos que você possua. Deve
assegurar-se que, também, eles recebam ou possam obter o código-fonte. E tem de
lhes mostrar estes termos de modo a que eles conheçam os seus direitos.

Nós protegemos os seus direitos em duas etapas: (1) direito de cópia do
software, e (2) oferecemos-lhe esta licença que lhe dá o direito legal para
copiar, distribuir e/ou modificar o software.

Também, para nossa proteção e de cada autor, queremos ter a certeza que todos
compreendam que não existe qualquer garantia para este software livre. Se o
software for modificado por alguém e distribuído, nós queremos que aqueles que
o recebam saibam que não é o original, de modo a que quaisquer problemas
introduzidos por outros não se reflictam na reputação do autor original.

Finalmente, qualquer programa livre é constantemente ameaçado por patentes de
software. Nós desejamos evitar o perigo de que aqueles que redistribuam um
programa livre possam individualmente obter licenças de patentes, com o efeito
de tornarem o programa proprietário. Para prevenir isto, nós deixamos claro que
qualquer patente tem de ser licenciada para a utilização livre de todos ou
então não pode ser licenciada de nenhuma forma.

Seguem-se os termos precisos e as condições para cópia, distribuição e
modificação.

F.2. GNU GENERAL PUBLIC LICENSE

TERMOS E CONDIÇÕES PARA CÓPIA, DISTRIBUIÇÃO E MODIFICAÇÃO

0. Esta licença aplica-se a qualquer programa ou outro trabalho que contenha um
aviso colocado pelo detentor do direito de cópia a dizer que pode ser
distribuído nos termos da General Public License. O "Programa", abaixo,
refere-se a qualquer programa ou trabalho, e um "trabalho baseado no Programa"
significa ou o Programa ou qualquer trabalho derivado sob a lei de direito de
cópia: isso é dizer, um trabalho contendo o Programa ou uma porção dele, quer
seja uma cópia exata ou com modificações e/ou traduzido para outro linguagem.
(numa parte seguinte deste documento, tradução é incluída sem limitações no
termo "modificação".) Cada licenciado é endereçado como "você".

Outras atividades que não sejam a cópia, distribuição e modificação não são
cobertas por esta licença; estão fora do seu âmbito. O ato de correr o Programa
não é restrito, e a saída do Programa é coberta apenas se o seu conteúdo
constituir um trabalho baseado no Programa (independentemente de ter sido feito
por correr o Programa). Quer seja verdade que dependa do que o Programa faz.

1. Você pode copiar e distribuir cópias com exatamente o mesmo conteúdo do
código fonte do Programa como você o recebeu, em qualquer meio, desde que seja
óbvio, facilmente notado e publicado de forma apropriada em cada cópia um aviso
do direito de cópia e a renúncia de direito à garantia; manter intatos todos os
outros avisos que se referem a esta Licença e à ausência de qualquer garantia;
e dar a quaisquer outros que recebam o Programa uma cópia desta Licença junto
com o Programa.

Você pode cobrar uma taxa pelo ato físico de transferir uma cópia, e pode por
sua opção oferecer proteção de garantia em troca de uma taxa.

2.Você pode modificar a sua cópia ou cópias do Programa ou qualquer parte dele,
assim formando um trabalho baseado no Programa, e copiar e distribuir tais
modificações ou trabalho sob os termos da Seção 1 acima, desde que também
cumpra todas as seguintes condições:

 a. Você deve fazer com que os ficheiros modificados acompanhem avisos visíveis
    afirmando que você alterou os ficheiros e a data de qualquer modificação.

 b. Você deve fazer com que qualquer trabalho que distribua ou publique, quer
    em todo quer em parte contenha ou o seu derivado do Programa ou qualquer
    parte relacionada com isto, seja licenciada como um todo sem obrigações
    para todos os terceiros sob os termos desta Licença.

 c. Se o programa modificado normalmente lê comandos interativamente quando
    executado, quando iniciada a execução para uma dessas utilizações
    interativas na forma mais usual, imprimir ou mostrar um aviso de direito de
    cópia e um aviso de que não há qualquer garantia (ou então, dizer que você
    disponibiliza uma garantia) e que os utilizadores podem redistribuir o
    programa sob estas condições, e dizer ao utilizador como pode ver uma cópia
    desta Licença. (Excepção: se o próprio Programa é interativo mas
    normalmente não mostra um desses avisos, o seu trabalho baseado no Programa
    não tem de mostrar um anúncio.)

Estes requisitos aplicam-se ao trabalho modificado como um todo. Se seções
identificáveis desse trabalho que não sejam derivadas do Programa, e possam ser
razoavelmente consideradas independentes e trabalhos separados neles mesmos,
então esta Licença, nos seus termos, não se aplica a essas seções quando você
as distribui como trabalhos separados. Mas quando você distribuir as mesmas
seções como parte de um todo o qual é um trabalho baseado no Programa, a
distribuição do todo tem de ser nos termos desta Licença, cujas permissões para
outros licenciados se estendem para o todo completo, e deste modo para cada e
para todas as partes sem interessar quem o escreveu.

Deste modo, não é objetivo desta seção reclamar direitos ou contestar os seus
direitos para trabalho escrito exclusivamente por si; em vez disso, o intuito é
exercer o direito de controlar a distribuição dos trabalhos derivados ou
coletivos baseados no Programa.

Em adição, a mera agregação de outro trabalho não baseado no Programa com o
Programa (ou com um trabalho baseado no Programa) num volume de armazenamento
ou meio de distribuição não traz o outro trabalho sob o âmbito desta Licença.

3. Você pode copiar e distribuir o Programa (ou um trabalho baseado nele, sob a
Seção 2) em código objeto ou na forma de executável sob os termos das Seções 1
e 2 acima desde que você faça um dos seguintes:

 a. Acompanhá-lo com o correspondente e completo código fonte em formato
    digital, que tem de ser distribuído sob os termos das Seções 1 e 2 acima
    num meio usualmente utilizado para troca de software; ou,

 b. Acompanhá-lo com uma oferta escrita, válida por pelo menos três anos, para
    dar a quaisquer terceiros, por uma taxa não superior ao custo de efetuar a
    distribuição física, uma cópia completa em formato digital do código fonte
    correspondente, para ser distribuído sob os termos das Seções 1 e 2 acima
    num meio usualmente utilizado para a troca de software; ou,

 c. Acompanhá-lo com a informação que você recebeu assim como a oferta para
    distribuir o correspondente código fonte. (Esta alternativa é permitida
    apenas para distribuição não-comercial e apenas se você recebeu o programa
    em código objeto ou na forma executável com uma dessas ofertas, de acordo
    com a Subseção b acima.)

O código fonte para um trabalho significa a forma preferida do trabalho para
fazer modificações nele próprio. Para um trabalho executável, o código fonte
completo significa todo o código fonte para todos os módulos que contém, mais
quaisquer ficheiros de definições do interface associados, mais os scripts
utilizados para controlar a compilação e instalação do executável. No entanto,
como excepção especial, o código fonte distribuído não necessita de incluir
qualquer coisa que seja normalmente distribuída (quer em código fonte quer em
forma binária) com os componentes maiores (compilador, kernel, e por aí fora)
do sistema operativo no qual o executável corre, a não ser que o próprio
componente acompanhe o executável.

Se a distribuição do executável ou do código objeto é feita por oferta de
acesso a uma cópia de um local designado, então oferecer acesso equivalente
para cópia do código fonte a partir do mesmo local conta como distribuição do
código fonte, mesmo que terceiros não sejam levados a copiar o código fonte
junto com o código objeto.

4. Você não pode copiar, modificar, sub-licenciar, ou distribuir o Programa
excepto como expressamente nas condições sob esta Licença. Qualquer tentativa
de outra forma de cópia, modificar, sub-licenciar ou distribuir o Programa é
nula, e automaticamente termina os seus direitos sob esta licença. No entanto,
partes que tenham recebido cópias, ou direitos, de si sob esta licença não irão
ter as suas licenças terminadas durante o tempo que tais partes se mantenham em
total conformidade.

5. Você não é obrigado a aceitar esta Licença, desde que não a tenha assinado.
No entanto, mais nada lhe concede permissão para modificar ou distribuir o
Programa ou seus trabalhos derivados. Estas ações são proibidas por lei se você
não aceitar esta licença. Por isso, ao modificar ou distribuir o Programa (ou
qualquer trabalho baseado no Programa), você indica a sua aceitação desta
Licença para o fazer, em todos os seus termos e condições para copiar,
distribuir ou modificar o Programa ou trabalhos baseados nele.

6. Cada vez que redistribuir o Programa (ou qualquer trabalho baseado no
Programa), aquele que o recebe automaticamente recebe a licença daquele que o
licenciou originalmente para copiar, distribuir ou modificar o Programa sujeito
a esses termos e condições. Você não pode impor quaisquer outras restrições ao
exercício daqueles que recebem os direitos atribuídos aqui. Você não é
responsável por impor a conformidade de terceiros a esta Licença.

7. Se, como consequência de um julgamento de tribunal ou alegação de infringir
patentes ou por qualquer outra razão (não limitada a assuntos de patentes), as
condições que lhe são impostas a si (quer por ordem do tribunal, acordo ou de
outro modo) que contradigam as condições desta Licença, não o libertam das
condições desta Licença. Se você não pode distribuir de modo a satisfazer
simultaneamente as suas obrigações sob esta Licença ou quaisquer outras
obrigações pertinentes, então como consequência você não pode distribuir o
Programa de modo nenhum. Por exemplo, se uma licença de patente não permitir a
redistribuição sem pagar direitos do Programa por todos aqueles que recebam
cópias diretamente ou indiretamente através de si, então o único modo que você
pode satisfazer ambos e esta Licença é conter-se totalmente da distribuição do
Programa.

Se alguma parte desta seção for considerada inválida ou não possa ser cumprida
sob qualquer circunstância particular, o equilíbrio da seção é para aplicar e a
seção como um todo é para aplicar nas outras circunstâncias.

Não é o propósito desta seção induzi-lo a infringir qualquer patente ou outros
direitos de propriedade reclamados ou contestar a validade de quaisquer dessas
reclamações; esta seção tem apenas o propósito de proteger a integridade do
sistema de distribuição de software livre, que é implementado por práticas de
licenças públicas. Muitas pessoas fizeram generosas contribuições ao vasto
leque de software distribuído através desse sistema com confiança e aplicação
consistente desse sistema; cabe ao autor/doador decidir se ele ou ela estão
dispostos a redistribuir software através de qualquer outro sistema e o
licenciado não pode impor essa escolha.

Esta seção destina-se a tornar claro de forma exaustiva o que se acredita ser a
consequência do resto desta Licença.

8. Se a distribuição e/ou utilização do Programa está restrito em certos países
quer por patentes ou por interfaces com direitos de cópia, o detentor do
direito de cópia original que coloca o Programa sob esta Licença pode adicionar
explicitamente uma limitação de distribuição geográfica excluindo esses países,
de modo a que a distribuição apenas seja permitida entre os países não
excluídos desta forma. Nesse caso, esta Licença incorpora a limitação conforme
escrita no corpo desta Licença.

9. A Free Software Foundation pode publicar revisões e/ou novas versões da
General Public License de tempos a tempos. Tais novas versões serão similares
ao espírito da versão atual, mas podem diferir em detalhes para endereçar novos
problemas ou preocupações. A cada versão é dado um número de versão distinto.
Se o Programa especifica um número de versão desta Licença que se lhe aplica e 
"qualquer versão posterior", você tem a opção de seguir os termos e condições
quer dessa versão ou de qualquer outra versão posterior publicada pela Free
Software Foundation. Se o programa não especificar o número de versão desta
Licença, você pode escolher qualquer versão alguma vez publicada pela Free
Software Foundation.

10. Se desejar incorporar porções do Programa noutros programas livres cujas
condições de distribuição sejam diferentes, escreva ao autor a pedir permissão.
Para software que tem direito de cópia pela Free Software Foundation, escreva à
Free Software Foundation; nós por vezes fazemos excepções para isto. A nossa
decisão será guiada pelos dois objetivos de preservar o estado livre de todos
os derivados do nosso software livre e a promoção da partilha e reutilização de
software em geral.

SEM GARANTIA

11. COMO O PROGRAMA É LICENCIADO LIVRE DE ENCARGOS, NÃO EXISTE QUALQUER
GARANTIA PARA O PROGRAMA, ATÉ AO PERMITIDO PELA LEI APLICÁVEL. EXCEPTO QUANDO
CASO CONTRÁRIO MENCIONADO POR ESCRITO OS DETENTORES DO COPYRIGHT E/OU OUTRAS
PARTES DISPONIBILIZAM O PROGRAMA "COMO ESTÁ" SEM QUALQUER TIPO DE GARANTIA,
QUER EXPRESSA QUER IMPLÍCITA, INCLUINDO, MAS NÃO LIMITADA A, GARANTIAS
IMPLÍCITAS DE MERCANTILIDADE E ADEQUAÇÃO A UM DETERMINADO PROPÓSITO. TODO O
RISCO QUANTO À QUALIDADE E PERFORMANCE DO PROGRAMA É SEU. SE O PROGRAMA SE
PROVAR DEFEITUOSO, VOCÊ ASSUME TODO O CUSTO DE SERVIÇOS NECESSÁRIOS, REPARAÇÕES
OU CORREÇÕES.

12. EM NENHUM EVENTO EXCEPTO PEDIDO PELA LEI APLICÁVEL OU ACORDADO POR ESCRITO
IRÁ O DETENTOR DO COPYRIGHT, OU QUALQUER OUTRA PARTE QUE POSSA MODIFICAR E/OU
REDISTRIBUIR O PROGRAMA CONFORME PERMITIDO ACIMA, SER RESPONSABILIZADO PELOS
SEUS DANOS, INCLUINDO QUALQUER GERAL, ESPECIAL, INCIDENTAL OU CONSEQUENTE QUE
SURJA DA UTILIZAÇÃO OU NA INABILIDADE DE UTILIZAR O PROGRAMA (INCLUINDO MAS NÃO
LIMITADO À PERDA DE DADOS OU QUE SEJAM CRIADOS DADOS NÃO EXATOS OU PERDAS
SOFRIDAS POR SI OU POR TERCEIROS OU A UMA FALHA DO PROGRAMA OPERAR COM QUALQUER
OUTRO PROGRAMA), MESMO QUE TAL DETENTOR OU OUTROS TENHAM SIDO AVISADOS NA
POSSIBILIDADE DE TAIS DANOS.

FIM DOS TERMOS E CONDIÇÕES

F.3. Como Aplicar Estes Termos Aos Seus novos Programas

Se você desenvolver um novo programa, e desejar que seja da melhor utilização
possível para o público, a melhor forma de o alcançar é torná-lo software livre
que todos possam redistribuir e modificar sob estes termos.

Para o fazer, anexe os seguintes avisos ao programa. É mais seguro adicioná-los
ao início de cada ficheiro de código fonte para ser mais eficaz no meio de
transmissão a exclusão de garantia; em cada ficheiro deve ter pelo menos a
linha "copyright" e um indicador onde o aviso completo pode ser encontrado.

uma linha para o nome do programa e dar uma breve ideia do que faz.
Copyright (C) ano  nome do autor

Este programa é software livre; você pode redistribuí-lo e/ou modificá-lo
sob os termos da GNU General Public License conforme publicada pela Free
Software Foundation; quer a versão 2 da licença, ou (conforme você escolha)
qualquer versão posterior.

Este programa é distribuído com a esperança de que seja útil, mas SEM
QUALQUER GARANTIA; mesmo sem a garantia implícita de MERCANTILIDADE OU
ADEQUAÇÃO A UM DETERMINADO PROPÓSITO. Para mais detalhes, veja a
GNU General Public License.

Você deve ter recebido uma cópia da GNU General Public License juntamente
com este programa; caso contrário, escreva para a Free Software Foundation,
Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.

Adicione também informação acerca de como o contactar por correio electrónico e
postal.

Se o programa for interativo, faça-o mostrar um pequeno aviso como este quanto
iniciar num modo interativo:

Gnomovision versão 69, Copyright (C) ano nome do autor
Gnomovision vem sem absolutamente nenhuma garantia; para detalhes
escreva show w. Isto é software livre, e você pode redistribuí-lo sob
certas condições; para detalhes escreva show c.

Os hipotéticos comandos "show w" e "show c" devem mostrar as porções
apropriadas da General Public License. Claro que, os comandos que você utiliza
podem ser chamados outra coisa qualquer em vez de "show w" e "show c"; eles
podem ser mesmo cliques de rato ou itens de menu - o que for mais adequado ao
seu programa.

Se necessário, você deve também fazer com que o seu empregador (se você
trabalhar como programador) ou a sua escola, assine uma "renúncia do direito de
cópia" para o programa. Aqui está uma amostra; altere os nomes:

Yoyodyne, Inc., aqui por este meio renuncia todos os interesses de direitos
de cópia no programa Gnomovision (que faz passagens a compiladores)
escrito por James Hacker.
assinatura de Ty Coon, 1 de Abril de 1989
Ty Coon, President of Vice

Esta General Public License não permite incorporar o seu programa em programas
proprietários. Se o seu programa é uma biblioteca de sub-rotinas, você pode
achar mais útil permitir a ligação de aplicações de software proprietário com a
biblioteca. Se isto é o que você quer fazer, utilize a GNU Lesser General
Public License em vez desta licença.

