<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>6.4. Carregar Firmware em Falta</title>
<link rel="stylesheet" type="text/css" href="install.css">
<meta name="generator" content="DocBook XSL Stylesheets Vsnapshot">
<link rel="home" href="index.html" title="Guia de Instalação de Debian GNU/Linux">
<link rel="up" href="ch06.html" title="Capítulo 6. Utilizar o Instalador Debian">
<link rel="prev" href="ch06s03.html" title="6.3. Utilizar Componentes Individuais">
<link rel="next" href="ch06s05.html" title="6.5. Personalização">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<div class="navheader">
<table width="100%" summary="Navigation header">
<tr><th colspan="3" align="center">6.4. Carregar Firmware em Falta</th></tr>
<tr>
<td width="20%" align="left">
<a accesskey="p" href="ch06s03.html"><img src="images/prev.png" alt="Anterior"></a> </td>
<th width="60%" align="center">Capítulo 6. Utilizar o Instalador Debian</th>
<td width="20%" align="right"> <a accesskey="n" href="ch06s05.html"><img src="images/next.png" alt="Próximo"></a>
</td>
</tr>
</table>
<hr>
</div>
<div class="sect1">
<div class="titlepage"><div><div><h2 class="title">
<a name="loading-firmware"></a>6.4. Carregar Firmware em Falta</h2></div></div></div>
<p>Conforme é descrito na <a class="xref" href="ch02s02.html" title="2.2. Dispositivos que Necessitam de Firmware">Secção 2.2, “Dispositivos que Necessitam de Firmware”</a>, alguns dispositivos necessitam que seja carregado firmware. Na maioria dos casos o dispositivo não irá funcionar se o firmware não estiver disponível; Por vezes as funcionalidades básicas não serão limitadas se o firmware estiver em falta e for apenas necessário para habilitar funcionalidades adicionais. </p>
<p>Se o controlador de um dispositivo necessitar de firmware que não esteja disponível, o <code class="classname">debian-installer</code> irá mostrar uma caixa de diálogo a oferecer-se para carregar o firmware em falta. Se esta opção for selecionada, o <code class="classname">debian-installer</code> irá procurar nos dispositivos disponíveis por ficheiros soltos de firmware ou pacotes contendo firmware. Se for encontrado, o firmware será copiado para a localização correta (<code class="filename">/lib/firmware</code>) e o controlador será novamente carregado. </p>
<div class="note"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Nota]" src="images/note.png"></td>
<th align="left">Nota</th>
</tr>
<tr><td align="left" valign="top"><p>Os dispositivos que são pesquisados e quais os sistemas de ficheiros que são suportados dependem da arquitetura, do método de instalação e da etapa da instalação. Especialmente durante as etapas iniciais da instalação, o carregamento de firmware é mais provável que tenha sucesso a partir de uma pen USB formatada com FAT. <span class="phrase">Em i386 e em amd64 o firmware também pode ser carregado a partir de um cartão SD ou MMC.</span> </p></td></tr>
</table></div>
<p>Note que é possível saltar o carregamento de firmware se souber que o dispositivo também irá funcionar sem ele, ou se o dispositivo não for necessário durante a instalação. </p>
<p>O <code class="classname">debian-installer</code> apenas pergunta pelo firmware necessário para os módulos do kernel carregados durante a instalação. Nem todos os controladores estão incluídos no <code class="classname">debian-installer</code>, em particular não está o radeon, isto implica que as capacidades de alguns dispositivos podem não ser diferentes no final da instalação do que eram no seu início. Consequentemente, algum do seu hardware poderá não ser utilizado com todo o seu potencial. Se suspeitar que é o caso, ou se estiver apenas curioso, não é má ideia verificar a saída do comando <span class="command"><strong>dmesg</strong></span> no novo sistema acabado de arrancar e procurar por <span class="quote">“<span class="quote">firmware</span>”</span>. </p>
<div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="idm2828"></a>6.4.1. Preparar um meio</h3></div></div></div>
<p>As imagens de instalação oficiais não incluem firmware não-livre. O método mais comum para carregar este firmware é a partir de um suporte amovível como por exemplo uma pen USB. Em alternativa, podem ser encontradas imagens de instalação não oficiais com firmware não-livre em <a class="ulink" href="https://cdimage.debian.org/cdimage/unofficial/non-free/cd-including-firmware/" target="_top">https://cdimage.debian.org/cdimage/unofficial/non-free/cd-including-firmware/</a>. Para preparar uma pen-USB (ou outro suporte, tal como uma partição de um disco rígido), os ficheiros ou pacotes de firmware têm de ser colocados no diretório raiz ou num diretório com o nome <code class="filename">/firmware</code> do sistema de ficheiros do suporte. O sistema de ficheiros recomendado para utilizar é o FAT, já que é o mais provável de ser suportado durante as etapas iniciais da instalação. </p>
<p>Estão disponíveis ficheiros 'tarball' e zip, contendo os pacotes atuais para o firmware mais comum, a partir de: </p>
<div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p> <a class="ulink" href="https://cdimage.debian.org/cdimage/unofficial/non-free/firmware/" target="_top">https://cdimage.debian.org/cdimage/unofficial/non-free/firmware/</a> </p></li></ul></div>
<p> Descarregue apenas o ficheiro 'tarball' ou o zip do lançamento correto e descompacte-o para o sistema de ficheiros na media. </p>
<p>Se o firmware que necessitar não estiver incluído no tarball, pode também descarregar pacotes de firmware específicos a partir (da seção non-free) do arquivo. O seguinte resumo deve listar a maioria dos pacotes de firmware disponíveis mas não é garantido que esteja completa e pode também conter pacotes que não sejam de firmware: </p>
<div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p> <a class="ulink" href="https://packages.debian.org/search?keywords=firmware" target="_top">https://packages.debian.org/search?keywords=firmware</a>
</p></li></ul></div>
<p>

</p>
<p>Também é possível copiar ficheiros individuais de firmware para o suporte. Ficheiros soltos de firmware podem ser obtidos por exemplo a partir de sistemas já instalados ou a partir de um fabricante de hardware. </p>
</div>
<div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="idm2844"></a>6.4.2. Firmware e o Sistema Instalado</h3></div></div></div>
<p>Qualquer firmware carregado durante a instalação será automaticamente copiado para o sistema instalado. Na maioria dos casos isto irá assegurar que o dispositivo necessita que o firmware irá também funcionar corretamente após o sistema ser reiniciado para o sistema já instalado. No entanto, se o sistema instalado correr uma versão diferente do kernel da do instalador existe uma ligeira hipótese do firmware não puder ser carregado devido à diferença de versão. </p>
<p>Se o firmware foi carregado a partir de um pacote de firmware, o <code class="classname">debian-installer</code> irá também instalar este pacotes no sistema instalado e irá automaticamente acrescentar a seção 'non-free' do arquivo de pacotes ao <code class="filename">sources.list</code> do APT. Isto tem a vantagem do firmware ser atualizado automaticamente se estiver disponível uma nova versão. </p>
<p>Se for saltado o carregamento de firmware durante a instalação, o dispositivo relevante irá provavelmente não funcionar no sistema instalado até o (pacote de) firmware ser instalado manualmente. </p>
<div class="note"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Nota]" src="images/note.png"></td>
<th align="left">Nota</th>
</tr>
<tr><td align="left" valign="top"><p>Se o firmware foi carregado a partir de ficheiros de firmware soltos, o firmware copiado para o sistema instalado <span class="emphasis"><em>não</em></span> irá ser automaticamente atualizado a menos que o pacote correspondente de firmware (se estiver disponível) seja instalado após a instalação estar completada. </p></td></tr>
</table></div>
</div>
<div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="completing-installed-system"></a>6.4.3. Completar o Sistema Instalado</h3></div></div></div>
<p>Dependendo de como foi feita a instalação, pode ser que algum do firmware necessário não tenha sido detetado durante a instalação, ou que o firmware relevante não estivesse disponível, ou que tenha escolhido não instalar algum do firmware nessa altura. Em alguns casos, uma instalação com sucesso pode mesmo assim acabar com um ecrã em branco ou com a imagem imperceptível quando reiniciar para o sistema instalado. Quando isso acontecer, pode tentar ultrapassar assim: </p>
<div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem"><p>Passar a opção <code class="code">nomodeset</code> na linha de comandos do kernel. Isto pode ajudar arrancar num modo de <span class="quote">“<span class="quote">fallback graphics</span>”</span>.</p></li>
<li class="listitem"><p>Utilizar a combinação de teclas <span class="keycap"><strong>Ctrl</strong></span>+<span class="keycap"><strong>Alt</strong></span>+<span class="keycap"><strong>F2</strong></span> para mudar para o VT2, o qual poderá oferecer login numa linha de comandos funcional.</p></li>
</ul></div>
<p>Uma vez no sistema instalado, é possível automatizar a deteção do firmware em falta e tomar os passos necessários para o habilitar seguindo o seguinte procedimento: </p>
<div class="orderedlist"><ol class="orderedlist" type="1">
<li class="listitem"><p>Instalar o pacote <code class="classname">isenkram-cli</code>.</p></li>
<li class="listitem"><p>Correr o comando <span class="command"><strong>isenkram-autoinstall-firmware</strong></span> como utilizador <span class="quote">“<span class="quote">root</span>”</span>.</p></li>
</ol></div>
<p>Normalmente, reiniciar é a forma mais simples de ter a certeza que todos os módulos do kernel são devidamente inicializados; é particularmente importante quando se arranca o sistema com a opção <span class="quote">“<span class="quote">nomodeset</span>”</span> como uma medida provisória. </p>
<div class="note"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Nota]" src="images/note.png"></td>
<th align="left">Nota</th>
</tr>
<tr><td align="left" valign="top"><p>Para a instalação de pacotes de firmware, é muito provável que necessite de habilitar a seção non-free do arquivo de pacotes. Em Debian GNU/Linux 11.0, correr o comando <span class="command"><strong>isenkram-autoinstall-firmware</strong></span> irá fazer isso automaticamente ao criar um ficheiro dedicado (<code class="filename">/etc/apt/sources.list.d/isenkram-autoinstall-firmware.list</code>), a apontar para um mirror genérico. </p></td></tr>
</table></div>
</div>
</div>
<div class="navfooter">
<hr>
<table width="100%" summary="Navigation footer">
<tr>
<td width="40%" align="left">
<a accesskey="p" href="ch06s03.html"><img src="images/prev.png" alt="Anterior"></a> </td>
<td width="20%" align="center"><a accesskey="u" href="ch06.html"><img src="images/up.png" alt="Subir"></a></td>
<td width="40%" align="right"> <a accesskey="n" href="ch06s05.html"><img src="images/next.png" alt="Próximo"></a>
</td>
</tr>
<tr>
<td width="40%" align="left" valign="top">6.3. Utilizar Componentes Individuais </td>
<td width="20%" align="center"><a accesskey="h" href="index.html"><img src="images/home.png" alt="Início"></a></td>
<td width="40%" align="right" valign="top"> 6.5. Personalização</td>
</tr>
</table>
</div>
</body>
</html>
