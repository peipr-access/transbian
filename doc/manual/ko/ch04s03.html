<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>4.3. USB 메모리 부팅에 필요한 파일 준비하기</title>
<link rel="stylesheet" type="text/css" href="install.css">
<meta name="generator" content="DocBook XSL Stylesheets Vsnapshot">
<link rel="home" href="index.html" title="데비안 GNU/리눅스 설치 안내서">
<link rel="up" href="ch04.html" title="4장. 시스템 설치 미디어 구하기">
<link rel="prev" href="ch04s02.html" title="4.2. 데비안 미러에서 파일 다운로드">
<link rel="next" href="ch04s04.html" title="4.4. 하드 디스크 부팅에 필요한 파일 준비하기">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<div class="navheader">
<table width="100%" summary="Navigation header">
<tr><th colspan="3" align="center">4.3. USB 메모리 부팅에 필요한 파일 준비하기</th></tr>
<tr>
<td width="20%" align="left">
<a accesskey="p" href="ch04s02.html"><img src="images/prev.png" alt="이전"></a> </td>
<th width="60%" align="center">4장. 시스템 설치 미디어 구하기</th>
<td width="20%" align="right"> <a accesskey="n" href="ch04s04.html"><img src="images/next.png" alt="다음"></a>
</td>
</tr>
</table>
<hr>
</div>
<div class="sect1">
<div class="titlepage"><div><div><h2 class="title">
<a name="boot-usb-files"></a>4.3. USB 메모리 부팅에 필요한 파일 준비하기</h2></div></div></div>
<p>USB 메모리를 준비하려면, GNU/리눅스가 이미 동작하고 USB를 지원하는 시스템을 추천합니다. 현재 GNU/리눅스 시스템에서는 USB 메모리를 연결하면 자동으로 인식합니다. 자동으로 인식이 안 된다면 usb-storage 커널 모듈을 읽어들였는지 확인하십시오. USB 메모리를 연결하면 그 장치는 <code class="filename">/dev/sdX</code>에 연결됩니다. 여기서 <span class="quote">“<span class="quote">X</span>”</span>는 a-z 범위의 알파벳입니다. USB 메모리를 연결하기 전후에 <span class="command"><strong>lsblk</strong></span> 명령을 실행하면 그 USB 메모리가 어떤 장치에 연결되었는 지 알아볼 수 있습니다. (다른 방법은 (root로) <span class="command"><strong>dmesg</strong></span> 명령의 출력을 보면 됩니다.) USB 메모리에 쓰려면, 쓰기 방지 스위치를 풀어 놓아야 할 수도 있습니다. </p>
<div class="warning"><table border="0" summary="Warning">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[주의]" src="images/warning.png"></td>
<th align="left">주의</th>
</tr>
<tr><td align="left" valign="top"><p>여기서 설명한 대로 하면 해당 장치에 들어 있는 내용이 모두 지워집니다! USB 메모리의 장치 이름을 올바르게 사용하도록 주의하십시오. 예를 들어 장치 이름을 잘못 사용해 하드 디스크에 들어 있는 내용이 모두 지워질 수도 잇습니다. </p></td></tr>
</table></div>
<div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="usb-copy-isohybrid"></a>4.3.1. 하이브리드 CD/DVD 이미지를 사용해 USB 메모리 준비하기</h3></div></div></div>
<p>이 아키텍쳐에서 데비안 설치 이미지는 <span class="command"><strong>isohybrid</strong></span> 기술을 이용해 만들어졌습니다. 즉, 설치 이미지를 USB 메모리에 직접 쓸 수도 있습니다. 그렇게 부팅 가능 USB 메모리를 쉽게 만들 수 있습니다. USB 메모리에 들어가는 이미지를 (netinst, CD, DVD-1) 하나 고르십시오. 설치 이미지를 구하는 방법은 <a class="xref" href="ch04s01.html" title="4.1. 공식 데비안 GNU/리눅스 설치 이미지">4.1절. “공식 데비안 GNU/리눅스 설치 이미지”</a> 참고. </p>
<p>아주 작은 USB 메모리의 경우(수 메가바이트 정도 뿐인 경우) <a class="ulink" href="http://ftp.kr.debian.org/debian/dists/bullseye/main/installer-amd64/current/images/netboot/mini.iso" target="_top">mini.iso</a> 이미지를 <code class="filename">netboot</code> 디렉터리에서(<a class="xref" href="ch04s02.html#where-files" title="4.2.1. 설치 파일을 찾을 위치">4.2.1절. “설치 파일을 찾을 위치”</a>에서 언급된 위치에서) 다운로드할 수 있습니다. </p>
<p>설치 이미지를 USB 메모리에 직접, 현재 내용을 덮어 쓰면서 써야 합니다. 예를 들어 기존 GNU/리눅스 시스템을 사용하는 경우 이미지 파일을 다음과 같이 USB 메모리에 쓸 수 있습니다. 단, USB 메모리의 마운트는 해제한 상태여야 합니다: </p>
<div class="informalexample"><pre class="screen">
<code class="prompt">#</code> <strong class="userinput"><code>cp <em class="replaceable"><code>debian.iso</code></em> /dev/<em class="replaceable"><code>sdX</code></em></code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>sync</code></strong>
</pre></div>
<p> 다른 운영체제에서 어떻게 하는지에 대해서는 <a class="ulink" href="https://www.debian.org/CD/faq/index.en.html#write-usb" target="_top">Debian CD FAQ</a>를 참고하십시오. </p>
<div class="important"><table border="0" summary="Important">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[중요]" src="images/important.png"></td>
<th align="left">중요</th>
</tr>
<tr><td align="left" valign="top"><p>이미지는 파티션이 아니라 전체 디스크에 해당하는 장치에 써야 합니다. 예를 들어 /dev/sdb에 쓰면 되지만 /dev/sdb1에 쓰면 안 됩니다. <span class="command"><strong>unetbootin</strong></span> 같은 도구를 사용해 이미지를 수정합니다. </p></td></tr>
</table></div>
<div class="important"><table border="0" summary="Important">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[중요]" src="images/important.png"></td>
<th align="left">중요</th>
</tr>
<tr><td align="left" valign="top"><p>설치 이미지를 USB에 쓰는 것만으로 대부분의 경우 동작합니다. 이 외에 다른 방법은 더 복잡하고, 특별한 경우 아니면 필요가 없습니다. </p></td></tr>
</table></div>
<p>USB 메모리의 하이브리드 이미지는 저장 공간을 모두 사용하지 않습니다. 그러니 빈 공간에 펌웨어 파일, 추가 패키지, 또는 기타 파일을 원하는대로 저장하면 좋을 수도 있습니다. USB 메모리가 하나밖에 없거나 설치에 필요한 사항을 한 개 안에 넣으려고 할 때 좋습니다. </p>
<p>그렇게 하려면, cfdisk 또는 기타 파티션 도구를 사용해 USB 메모리에 추가 파티션을 만드십시오. 그리고 파티션에 (FAT) 파일시스템을 만들고, 마운트한 다음 펌웨어를 그 위치에 풀어 넣으십시오. 예를 들어 다음과 같습니다: </p>
<div class="informalexample"><pre class="screen">
# mkdosfs -n FIRMWARE /dev/sdX3
# mount /dev/<em class="replaceable"><code>sdX3</code></em> /mnt
# cd /mnt
# tar zxvf <em class="replaceable"><code>/path/to/</code></em>firmware.tar.gz
# cd /
# umount /mnt
</pre></div>
<p> USB 메모리에 해당하는 장치 이름을 정확히 사용하도록 주의하십시오. <span class="command"><strong>mkdosfs</strong></span> 명령은 <code class="classname">dosfstools</code> 데비안 패키지에 들어 있습니다. </p>
<div class="note"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[참고]" src="images/note.png"></td>
<th align="left">참고</th>
</tr>
<tr><td align="left" valign="top"><p>만약 <code class="filename">mini.iso</code> 파일을 USB 메모리에 쓴 경우, 두 번째 파티션은 이미 있기 때문에 새로 만들 필요가 없습니다. USB 메모리를 빼고 다시 넣으면 두 개의 파티션이 보입니다. </p></td></tr>
</table></div>
</div>
<div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="usb-copy-easy"></a>4.3.2. 수동으로 USB 메모리에 파일 복사하기</h3></div></div></div>
<p>데비안 설치 이미지에 isohybrid 기술이 사용되기 전에는, 아래 장에 설명된 방식은 미디어를 준비하고 USB 장치에서 부팅하는 방법에 관한 내용이었습니다. 해당 내용은 <a class="xref" href="ch04s03.html#usb-copy-isohybrid" title="4.3.1. 하이브리드 CD/DVD 이미지를 사용해 USB 메모리 준비하기">4.3.1절. “하이브리드 CD/DVD 이미지를 사용해 USB 메모리 준비하기”</a> 관련 기법으로 바뀌었지만, 정보 제공 및 기록 목적으로 남아 있으며 경우에 따라 일부 사용자에게 쓸모가 있을 수도 있습니다. </p>
<p><a class="xref" href="ch04s03.html#usb-copy-isohybrid" title="4.3.1. 하이브리드 CD/DVD 이미지를 사용해 USB 메모리 준비하기">4.3.1절. “하이브리드 CD/DVD 이미지를 사용해 USB 메모리 준비하기”</a>에 설명된 다른 방법은 수동으로 설치 파일 및 설치 이미지를 USB 메모리에 복사하는 방법입니다. 단 USB 메모리는 크기가 최소 1GB는 되어야 합니다. (<a class="xref" href="ch04s03.html#usb-copy-flexible" title="4.3.3. 수동으로 USB 메모리에 파일 복사하기 — 유연한 방법">4.3.3절. “수동으로 USB 메모리에 파일 복사하기 — 유연한 방법”</a>에 쓰여 있는 대로 netboot의 파일을 사용하면 더 작아도 가능합니다.) </p>
<p><span class="phrase"><code class="classname">syslinux</code>나 그 설정 파일과 함께 </span>모든 설치 프로그램 파일(커널 포함)이 들어간 <a class="ulink" href="http://ftp.kr.debian.org/debian/dists/bullseye/main/installer-amd64/current/images/hd-media/boot.img.gz" target="_top">hd-media/boot.img.gz</a>라는 올인원 파일이 있습니다. </p>
<div class="note"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[참고]" src="images/note.png"></td>
<th align="left">참고</th>
</tr>
<tr><td align="left" valign="top"><p>이 방식은 편리하기는 하지만 한 가지 큰 단점이 있습니다. USB 메모리 용량이 아무리 크더라도 장치의 논리 크기가 1GB까지 밖에 안 됩니다. USB 메모리의 파티션을 나눠서 새 파일 시스템을 만들어야 다른 용도로 사용할 수 있습니다. </p></td></tr>
</table></div>
<p>이 이미지를 직접 USB 메모리에 압축을 풀어 놓으십시오: </p>
<div class="informalexample"><pre class="screen"># zcat boot.img.gz &gt; /dev/<em class="replaceable"><code>sdX</code></em>
</pre></div>
<p>

</p>
<p>그 후, USB 메모리를 마운트하면<span class="phrase">(<strong class="userinput"><code>mount /dev/<em class="replaceable"><code>sdX</code></em> /mnt</code></strong>)</span> 그 안에 <span class="phrase">FAT 파일 시스템</span> 이 생깁니다. 거기에 데비안 ISO 이미지를 (netinst나 전체 CD 이미지, <a class="xref" href="ch04s01.html" title="4.1. 공식 데비안 GNU/리눅스 설치 이미지">4.1절. “공식 데비안 GNU/리눅스 설치 이미지”</a> 참고) 복사합니다. USB 메모리를 마운트 해제하면(<strong class="userinput"><code>umount /mnt</code></strong>) 끝납니다. </p>
</div>
<div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="usb-copy-flexible"></a>4.3.3. 수동으로 USB 메모리에 파일 복사하기 — 유연한 방법</h3></div></div></div>
<p>좀 더 유연한 방법이 좋다면, 아니면 무슨 일이 일어나고 있는지 보고 싶기라도 하다면, 다음 방법으로 파일을 USB 메모리에 넣으십시오. 이 방식의 한 가지 장점은, (USB 메모리 용량이 충분히 크다면) 어떤 ISO 이미지이든지(DVD 이미지까지) 복사할 수도 있다는 점입니다. </p>
<div class="sect3">
<div class="titlepage"><div><div><h4 class="title">
<a name="idm829"></a>4.3.3.1. 파티션 만들기 및 부트로더 추가하기</h4></div></div></div>
<p>다음은 USB 메모리에서 전체 장치를 사용하지 않고, 첫번째 파티션을 사용하는 방법입니다. </p>
<p>USB 메모리에서 부팅한 다음 커널을 시작하려면 부트로더를 USB 메모리에 넣어야 합니다. 그 어떤 부트로더라도 동작하지만, <code class="classname">syslinux</code>를 사용하는 게 편리합니다. <code class="classname">syslinux</code>는 FAT16 파티션을 사용하고 텍스트 파일을 편집하는 것만으로 설정을 바꿀 수 있기 때문입니다. FAT 파일 시스템을 지원하는 어떤 운영 체제라도 부트로더를 설정할 때 이용할 수 있습니다. </p>
<p>먼저 <code class="classname">syslinux</code> 및 <code class="classname">mtools</code> 패키지를 시스템에 설치해야 합니다. </p>
<div class="note"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[참고]" src="images/note.png"></td>
<th align="left">참고</th>
</tr>
<tr><td align="left" valign="top">
<p>대부분의 USB 메모리는 FAT16 파티션 하나로 미리 설정되어 있으므로, 아마 USB 메모리의 파티션 분할을 재시도하거나 다시 포맷할 필요가 없습니다. 포맷 해야하는 경우는 <span class="command"><strong>cfdisk</strong></span>나 기타 파티션 도구를 사용한 다음, FAT16 파티션을 만들고<a href="#ftn.idm841" class="footnote" name="idm841"><sup class="footnote">[3]</sup></a> 다음과 같이 MBR을 설치하십시오.</p>
<div class="informalexample"><pre class="screen">
# cat /usr/lib/syslinux/mbr/mbr.bin 
&gt;/dev/<em class="replaceable"><code>sdX</code></em>
 </pre></div>
<p> 그리고 다음 명령으로 파일 시스템을 만드십시오:
</p>
<div class="informalexample"><pre class="screen">
# mkdosfs /dev/<em class="replaceable"><code>sdX1</code></em>
</pre></div>
<p> 주의해서 USB 메모리의 정확한 디바이스 이름을 사용하십시오. <span class="command"><strong>mkdosfs</strong></span>는 <code class="classname">dosfstools</code> 데비안 패키지에 포함되어 있습니다. </p>
</td></tr>
</table></div>
<p>이제 제대로 파티션한 USB 메모리가 있으면, 다음 명령으로 FAT16 파티션에 <code class="classname">syslinux</code>를 설치해야 합니다: </p>
<div class="informalexample"><pre class="screen">
# syslinux /dev/<em class="replaceable"><code>sdX1</code></em>
</pre></div>
<p> 다시 말하지만, 신경 써서 장치 이름을 올바르게 쓰십시오. <span class="command"><strong>syslinux</strong></span>를 실행할 때 그 파티션을 마운트하면 안 됩니다. 이 명령은 파티션에 부트 섹터를 쓰고, 부트로더 코드가 들어 있는 <code class="filename">ldlinux.sys</code> 파일을 만듭니다. </p>
</div>
<div class="sect3">
<div class="titlepage"><div><div><h4 class="title">
<a name="idm859"></a>4.3.3.2. 설치 프로그램 파일 추가하기</h4></div></div></div>
<p>두가지의 다른 설치 방식이 있고 여기서 선택합니다: hd-media 방식은 설치 ISO 파일이 USB 메모리에 들어 있어야 하고, 그 ISO 파일에서 설치 프로그램 모듈 및 베이스 시스템을 읽어들입니다. netboot 방식은 그렇게 하지 않고 필요한 내용을 모두 데비안 미러사이트에서 읽어들입니다. </p>
<p>어느 데비안 미러에서든지 <a class="ulink" href="http://ftp.kr.debian.org/debian/dists/bullseye/main/installer-amd64/current/images" target="_top">debian/dists/bullseye/main/installer-amd64/current/images/</a>
아래 hd-media 또는 netboot 하위 폴더에서 원하는 설치 프로그램 파일을
다운로드해야 합니다. </p>
<div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem"><p><code class="filename">vmlinuz</code> 또는 <code class="filename">linux</code> (커널 바이너리) </p></li>
<li class="listitem"><p> <code class="filename">initrd.gz</code> (초기화 RAM 디스크 이미지) </p></li>
</ul></div>
<p> 설치 프로그램은 텍스트 기반 버전과 (파일은 hd-media 또는 netboot 위치에 있습니다) 그래픽 버전을 (해당 <code class="filename">gtk</code> 하위 폴더를 보십시오) 선택할 수 있습니다. </p>
<p>그 다음 파티션을 마운트하고 (<strong class="userinput"><code>mount /dev/<em class="replaceable"><code>sdX1</code></em> /mnt</code></strong>) 다음 설치 프로그램 파일을 USB 메모리로 복사하십시오: </p>
<p>그 USB 메모리의 최상위 디렉터리에 이름이 <code class="filename">syslinux.cfg</code>인 텍스트 파일을 만듭니다. 그 안에는 최소한 다음 줄이 필요합니다: </p>
<div class="informalexample"><pre class="screen">
default vmlinuz initrd=initrd.gz
</pre></div>
<p> <code class="filename">netboot</code>의 파일을 사용하는 경우, 커널 바이너리 이름을 <span class="quote">“<span class="quote"><code class="filename">linux</code></span>”</span>로 변경하십시오. </p>
<p>그래픽 설치 프로그램의 경우 (<code class="filename">gtk</code>의 이미지) 줄의 끝에 <strong class="userinput"><code>vga=788</code></strong> 파라미터를 추가해야 합니다. 기타 다른 파라미터를 필요에 따라 추가할 수 있습니다. </p>
<p>부팅 프롬프트에서 파라미터를 추가할 수 있게 허용하려면 <strong class="userinput"><code>prompt 1</code></strong> 줄을 추가하십시오. </p>
<p><code class="filename">hd-media</code>의 파일을 사용하는 경우, 데비안 설치 이미지의 ISO 파일을 USB 메모리로 복사해야 합니다. (<code class="filename">netboot</code> 방식의 경우 불필요합니다.) </p>
<p>netinst나 전체 CD/DVD 이미지 중 하나를 사용할 수 있습니다(<a class="xref" href="ch04s01.html" title="4.1. 공식 데비안 GNU/리눅스 설치 이미지">4.1절. “공식 데비안 GNU/리눅스 설치 이미지”</a> 참조). 반드시 맞는 이미지를 선택하십시오. <span class="quote">“<span class="quote">netboot <code class="filename">mini.iso</code></span>”</span> 이미지는 이 용도에 사용할 수 없으니 주의하십시오. </p>
<p>다 마쳤으면, USB 메모리 마운트를 해제하십시오 (<strong class="userinput"><code>umount /mnt</code></strong>). </p>
</div>
</div>
<div class="footnotes">
<br><hr width="100" align="left">
<div id="ftn.idm841" class="footnote"><p><a href="#idm841" class="para"><sup class="para">[3] </sup></a><span class="quote">“<span class="quote">bootable</span>”</span> 플래그를 잊지 말고 붙이십시오. </p></div>
</div>
</div>
<div class="navfooter">
<hr>
<table width="100%" summary="Navigation footer">
<tr>
<td width="40%" align="left">
<a accesskey="p" href="ch04s02.html"><img src="images/prev.png" alt="이전"></a> </td>
<td width="20%" align="center"><a accesskey="u" href="ch04.html"><img src="images/up.png" alt="위로"></a></td>
<td width="40%" align="right"> <a accesskey="n" href="ch04s04.html"><img src="images/next.png" alt="다음"></a>
</td>
</tr>
<tr>
<td width="40%" align="left" valign="top">4.2. 데비안 미러에서 파일 다운로드 </td>
<td width="20%" align="center"><a accesskey="h" href="index.html"><img src="images/home.png" alt="처음으로"></a></td>
<td width="40%" align="right" valign="top"> 4.4. 하드 디스크 부팅에 필요한 파일 준비하기</td>
</tr>
</table>
</div>
</body>
</html>
